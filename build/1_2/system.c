/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

#include <windows.h>
#include <errno.h>
#include <io.h>
#include <fcntl.h>
#include <signal.h>
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10602 TY10602;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY8004 TY8004;
typedef struct TY10988 TY10988;
typedef struct TY8674 TY8674;
typedef struct TY8632 TY8632;
typedef struct TY8630 TY8630;
typedef struct TY8622 TY8622;
typedef struct TY8672 TY8672;
typedef struct TY8634 TY8634;
typedef struct TY8611 TY8611;
typedef struct TY8607 TY8607;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY420 TY420;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct TY442 TY442;
typedef struct EAssertionFailed EAssertionFailed;
typedef struct EOverflow EOverflow;
typedef struct TY428 TY428;
typedef struct TY452 TY452;
typedef N_NIMCALL_PTR(void, TY2719) (void);
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
struct TY8630 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct TY8632 {
  TY8630 Sup;
TY8632* Next;
TY8632* Prev;
TY8622* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
typedef TY8632* TY8681[512];
typedef TY8607* TY8609[1024];
struct TY8611 {
TY8609 Data;
};
struct TY8674 {
TY8672* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
TY8681 Freesmallchunks;
TY8634* Freechunkslist;
TY8611 Chunkstarts;
};
struct TY8634 {
  TY8630 Sup;
TY8634* Next;
TY8634* Prev;
NI Align;
NF64 Data;
};
typedef NI TY8614[8];
struct TY8607 {
TY8607* Next;
NI Key;
TY8614 Bits;
};
struct TY8672 {
NI Size;
NI Acc;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY8622 {
TY8622* Next;
NI Zerofield;
};
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
typedef N_NIMCALL_PTR(void, TFinalizer) (void* Self_10994);
struct TSafePoint {
TSafePoint* prev;
NI status;
E_Base* exc;
jmp_buf context;
};
struct TY442 {
  TY418 Sup;
};
typedef N_STDCALL_PTR(void, TY8012) (TY8004* L_8014);
typedef NimStringDesc* TY4102[5];
typedef TFrame* TY4813[128];
struct EAssertionFailed {
  TY416 Sup;
};
struct TY428 {
  TY416 Sup;
};
struct EOverflow {
  TY428 Sup;
};
struct TY452 {
  TY416 Sup;
};
typedef NIM_CHAR TY19262[60];
static N_INLINE(void, Initstackbottom_3013)(void);
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624);
N_NIMCALL(void, Initgc_3011)(void);
N_NIMCALL(void, Init_10678)(TY10618* S_10681, NI Cap_10682);
N_NOCONV(void*, Alloc0_1953)(NI Size_1955);
N_NOCONV(void*, Alloc_1950)(NI Size_1952);
N_NIMCALL(void*, Rawalloc_9595)(TY8674* A_9598, NI Requestedsize_9599);
static N_INLINE(NI, Roundup_8656)(NI X_8658, NI V_8659);
N_NIMCALL(TY8632*, Getsmallchunk_9562)(TY8674* A_9565);
N_NIMCALL(TY8634*, Getbigchunk_9492)(TY8674* A_9495, NI Size_9496);
N_NIMCALL(void, Splitchunk_9466)(TY8674* A_9469, TY8634* C_9470, NI Size_9471);
static N_INLINE(void, Updateprevsize_9011)(TY8674* A_9014, TY8634* C_9015, NI Prevsize_9016);
static N_INLINE(NIM_BOOL, Isaccessible_8952)(void* P_8954);
N_NIMCALL(NIM_BOOL, Contains_8811)(TY8611* S_8813, NI Key_8814);
N_NIMCALL(TY8607*, Intsetget_8774)(TY8611* T_8776, NI Key_8777);
static N_INLINE(NI, Pageindex_8881)(void* P_8883);
N_NIMCALL(void, Incl_8831)(TY8611* S_8834, NI Key_8835);
N_NIMCALL(TY8607*, Intsetput_8793)(TY8611* T_8796, NI Key_8797);
N_NIMCALL(void*, Llalloc_8730)(TY8674* A_8733, NI Size_8734);
static N_INLINE(void*, Osallocpages_8289)(NI Size_8291);
N_NIMCALL(void, Raiseoutofmem_8259)(void);
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824);
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
static N_INLINE(void, Lock_11013)(TY10990* Gch_11016);
static N_INLINE(void, Checkcollection_13500)(void);
N_NIMCALL(void, Collectct_12005)(TY10990* Gch_12008);
N_NIMCALL(NI, Getoccupiedmem_2017)(void);
N_NIMCALL(NI, Gettotalmem_2021)(void);
N_NIMCALL(NI, Getfreemem_2019)(void);
N_NOINLINE(NI, Stacksize_16601)(void);
N_CDECL(void, Markstackandregisters_16615)(TY10990* Gch_16618);
static N_INLINE(void, Gcmark_15803)(void* P_15805);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
N_NIMCALL(NIM_BOOL, Isallocatedptr_10201)(TY8674* A_10203, void* P_10204);
static N_INLINE(TY8630*, Pageaddr_8885)(void* P_8887);
static N_INLINE(NIM_BOOL, Chunkunused_9007)(TY8630* C_9009);
static N_INLINE(NIM_BOOL, Issmallchunk_9001)(TY8630* C_9003);
static N_INLINE(void, Add_10658)(TY10618* S_10661, TY10602* C_10662);
N_NOCONV(void, Dealloc_1960)(void* P_1962);
N_NIMCALL(void, Rawdealloc_9864)(TY8674* A_9867, void* P_9868);
N_NIMCALL(void, Freebigchunk_9020)(TY8674* A_9023, TY8634* C_9024);
N_NIMCALL(void, Excl_8838)(TY8611* S_8841, NI Key_8842);
static N_INLINE(NI, Pageindex_8877)(TY8630* C_8879);
N_NIMCALL(void, Freeoschunks_8926)(TY8674* A_8929, void* P_8930, NI Size_8931);
static N_INLINE(void, Osdeallocpages_8293)(void* P_8295, NI Size_8296);
static N_INLINE(void, Deccurrmem_8703)(TY8674* A_8706, NI Bytes_8707);
N_NIMCALL(void, Markthreadstacks_15811)(TY10990* Gch_15814);
N_NIMCALL(void, Collectzct_16801)(TY10990* Gch_16804);
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418);
N_NIMCALL(void, Excl_10881)(TY10614* S_10884, TY10602* Cell_10885);
N_NIMCALL(TY10610*, Cellsetget_10714)(TY10614* T_10716, NI Key_10717);
static N_INLINE(NI, Nexttry_10709)(NI H_10711, NI Maxhash_10712);
N_NIMCALL(void, Preparedealloc_12025)(TY10602* Cell_12027);
static N_INLINE(void*, Celltousr_11408)(TY10602* Cell_11410);
N_NIMCALL(void, Forallchildren_12012)(TY10602* Cell_12014, NU8 Op_12015);
N_NIMCALL(void, Forallchildrenaux_12020)(void* Dest_12022, TNimType* Mt_12023, NU8 Op_12024);
N_NIMCALL(void, Dooperation_12016)(void* P_12018, NU8 Op_12019);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(void, Forallslotsaux_13401)(void* Dest_13403, TNimNode* N_13405, NU8 Op_13406);
N_NIMCALL(TNimNode*, Selectbranch_7463)(void* Aa_7465, TNimNode* N_7467);
N_NIMCALL(NI, Getdiscriminant_7443)(void* Aa_7445, TNimNode* N_7447);
N_NIMCALL(void, Collectcycles_15003)(TY10990* Gch_15006);
N_NIMCALL(void, Init_10688)(TY10614* S_10691);
N_NIMCALL(NIM_BOOL, Containsorincl_10899)(TY10614* S_10902, TY10602* Cell_10903);
N_NOINLINE(void, Incl_10874)(TY10614* S_10877, TY10602* Cell_10878);
N_NIMCALL(TY10610*, Cellsetput_10795)(TY10614* T_10798, NI Key_10799);
N_NIMCALL(void, Cellsetenlarge_10770)(TY10614* T_10773);
N_NIMCALL(void, Cellsetrawinsert_10733)(TY10614* T_10735, TY10610** Data_10736, TY10610* Desc_10737);
N_NIMCALL(NIM_BOOL, Contains_10854)(TY10614* S_10856, TY10602* Cell_10857);
N_NIMCALL(void, Deinit_10692)(TY10614* S_10695);
N_NIMCALL(void, Unmarkstackandregisters_17401)(TY10990* Gch_17404);
static N_INLINE(void, Decref_12801)(TY10602* C_12803);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054);
static N_INLINE(void, Unlock_11201)(TY10990* Gch_11204);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487);
N_NIMCALL(void, raiseException)(E_Base* E_5404, NCSTRING Ename_5405);
N_NIMCALL(void, Gcdisable_2663)(void);
static N_INLINE(void, pushCurrentException)(E_Base* E_4641);
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015);
static N_INLINE(void, Incref_13002)(TY10602* C_13004);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_18625, NI Newlen_18626);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18582, NI Addlen_18583);
static N_INLINE(NI, Resize_18401)(NI Old_18403);
N_NIMCALL(void*, Growobj_14007)(void* Old_14009, NI Newsize_14010);
N_NIMCALL(void, Rawwritestacktrace_4999)(NimStringDesc** S_5002);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_18504);
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_18499, NI Len_18500);
N_NIMCALL(void, Writetostderr_4433)(NCSTRING Msg_4435);
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673);
static N_INLINE(void, Quitordebug_5201)(void);
N_NIMCALL(void, Gcenable_2665)(void);
static N_INLINE(void, rawEchoNL)(void);
static N_INLINE(void, Inccurrmem_8686)(TY8674* A_8689, NI Bytes_8690);
N_NIMCALL(TY8634*, Requestoschunks_8892)(TY8674* A_8895, NI Size_8896);
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611);
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621);
N_NIMCALL(void, Rawwrite_7264)(FILE* F_7266, NimStringDesc* S_7267);
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618);
N_NOINLINE(void, Procaddrerror_7273)(NCSTRING Name_7275);
N_NOCONV(void, signalHandler)(NI32 Sig_5478);
N_NIMCALL(void, registerSignalHandler)(void);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NIMCALL(NI, getRefcount)(void* P_11437);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_18495);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_18543, NI Start_18544, NI Last_18545);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_18558, NI Start_18559);
static N_INLINE(NI, addInt)(NI A_6003, NI B_6004);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, mulInt)(NI A_7003, NI B_7004);
N_NOINLINE(NIM_BOOL, Isonstack_12009)(void* P_12011);
N_NIMCALL(TNimType*, extGetCellType)(void* C_11433);
N_NIMCALL(void, Objectinitaux_19464)(void* Dest_19466, TNimNode* N_19468);
N_NIMCALL(void, objectInit)(void* Dest_19462, TNimType* Typ_19463);
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NI, Ptrsize_10233)(void* P_10235);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19203);
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4635);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697);
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744);
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741);
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718);
static N_INLINE(void, popSafePoint)(void);
static N_INLINE(E_Base*, getCurrentException)(void);
static N_INLINE(void, popCurrentException)(void);
N_NIMCALL(void, reraiseException)(void);
N_NIMCALL(void, genericAssign)(void* Dest_19365, void* Src_19366, TNimType* Mt_19367);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027);
N_NIMCALL(void, Genericassignaux_19368)(void* Dest_19370, void* Src_19371, TNimNode* N_19373);
N_NIMCALL(void, Listremove_9046)(TY8634** Head_9050, TY8634* C_9051);
N_NIMCALL(void, Listadd_9626)(TY8632** Head_9630, TY8632* C_9631);
N_NIMCALL(void, Listremove_9768)(TY8632** Head_9772, TY8632* C_9773);
N_NIMCALL(void, Listadd_9407)(TY8634** Head_9411, TY8634* C_9412);
STRING_LITERAL(TMP21308, "cannot write string to file", 27);
STRING_LITERAL(TMP21309, "No stack traceback available", 28);
STRING_LITERAL(TMP21310, "Error: unhandled exception: ", 28);
STRING_LITERAL(TMP21311, "Error: unhandled exception", 26);
STRING_LITERAL(TMP21312, " [", 2);
STRING_LITERAL(TMP21313, "]\015\012", 3);
STRING_LITERAL(TMP21314, "\015\012", 2);
STRING_LITERAL(TMP21315, "out of memory; cannot even throw an exception", 45);
STRING_LITERAL(TMP21316, "out of memory", 13);
STRING_LITERAL(TMP21318, "kernel32", 8);
STRING_LITERAL(TMP21319, "kernel32", 8);
STRING_LITERAL(TMP21320, "could not load: ", 16);
STRING_LITERAL(TMP21321, "could not import: ", 18);
STRING_LITERAL(TMP21322, "rb", 2);
STRING_LITERAL(TMP21323, "wb", 2);
STRING_LITERAL(TMP21324, "w+b", 3);
STRING_LITERAL(TMP21325, "r+b", 3);
STRING_LITERAL(TMP21326, "ab", 2);
NIM_CONST TY4102 Formatopen_4101 = {((NimStringDesc*) &TMP21322),
((NimStringDesc*) &TMP21323),
((NimStringDesc*) &TMP21324),
((NimStringDesc*) &TMP21325),
((NimStringDesc*) &TMP21326)}
;
STRING_LITERAL(TMP21327, "SIGINT: Interrupted by Ctrl-C.\015\012", 32);
STRING_LITERAL(TMP21328, "SIGSEGV: Illegal storage access. (Attempt to read from nil?)\015\012", 62);
STRING_LITERAL(TMP21329, "SIGABRT: Abnormal termination.\015\012", 32);
STRING_LITERAL(TMP21330, "SIGFPE: Arithmetic error.\015\012", 27);
STRING_LITERAL(TMP21331, "SIGILL: Illegal operation.\015\012", 28);
STRING_LITERAL(TMP21332, "SIGBUS: Illegal storage access. (Attempt to read from nil?)\015\012", 61);
STRING_LITERAL(TMP21333, "unknown signal\015\012", 16);
STRING_LITERAL(TMP35239, "over- or underflow", 18);
STRING_LITERAL(TMP193659, "", 0);
STRING_LITERAL(TMP193670, "no exception to reraise", 23);
STRING_LITERAL(TMP193771, " (invalid data!)", 16);
STRING_LITERAL(TMP193875, "cannot retrieve file position", 29);
STRING_LITERAL(TMP193876, "cannot set file position", 24);
STRING_LITERAL(TMP195491, "[GC] total memory: ", 19);
STRING_LITERAL(TMP195492, "\015\012[GC] occupied memory: ", 24);
STRING_LITERAL(TMP195493, "\015\012[GC] stack scans: ", 20);
STRING_LITERAL(TMP195494, "\015\012[GC] stack cells: ", 20);
STRING_LITERAL(TMP195495, "\015\012[GC] cycle collections: ", 26);
STRING_LITERAL(TMP195496, "\015\012[GC] max threshold: ", 22);
STRING_LITERAL(TMP195497, "\015\012[GC] zct capacity: ", 21);
STRING_LITERAL(TMP195498, "\015\012[GC] max cycle table size: ", 29);
STRING_LITERAL(TMP195499, "\015\012[GC] max stack size: ", 23);
TY2719 Dbglinehook_2722;
TNimType Strdesc_3017;
extern TNimType* NTI4262; /* ref EIO */
extern TNimType* NTI420; /* EIO */
static void* TMP21317;
TY8012 Dl_8011;
extern TNimType* NTI8262; /* ref EOutOfMemory */
extern TNimType* NTI442; /* EOutOfMemory */
NimStringDesc* Stacktracenewline_4432;
TSafePoint* excHandler;
E_Base* Currexception_4632;
NimStringDesc* Buf_4810;
NimStringDesc* Assertbuf_4811;
TFrame* framePtr;
TY4813 Tempframes_4815;
EAssertionFailed* Gassertionfailed_5451;
NIM_BOOL Dbgaborting_5475;
extern TNimType* NTI5450; /* ref EAssertionFailed */
extern TNimType* NTI436; /* EAssertionFailed */
NIM_BOOL Ismultithreaded_7601;
TY442* Goutofmem_8258;
TY8674 Allocator_8729;
NI Lastsize_8891;
void* Stackbottom_11009;
TY10990 Gch_11010;
NI Cyclethreshold_11011;
NI Recgclock_11012;
extern TNimType* NTI5891; /* ref EOverflow */
extern TNimType* NTI432; /* EOverflow */
extern TNimType* NTI5433; /* ref ENoExceptionToReraise */
extern TNimType* NTI452; /* ENoExceptionToReraise */
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624) {
NI A_16204;
NI B_16205;
if (!(Stackbottom_11009 == NIM_NIL)) goto LA2;
Stackbottom_11009 = Thestackbottom_1624;
goto LA1;
LA2: ;
A_16204 = 0;
A_16204 = ((NI) (Thestackbottom_1624));
B_16205 = 0;
B_16205 = ((NI) (Stackbottom_11009));
Stackbottom_11009 = ((void*) (((A_16204 >= B_16205) ? A_16204 : B_16205)));
LA1: ;
}
static N_INLINE(void, Initstackbottom_3013)(void) {
void* volatile Locals_3015;
Locals_3015 = 0;
setStackBottom(((void*) (&Locals_3015)));
}
static N_INLINE(NI, Roundup_8656)(NI X_8658, NI V_8659) {
NI Result_8660;
Result_8660 = 0;
Result_8660 = (NI64)((NI64)(X_8658 + (NI64)(V_8659 - 1)) & (NI64)((NU64) ~((NI64)(V_8659 - 1))));
return Result_8660;
}
N_NIMCALL(TY8607*, Intsetget_8774)(TY8611* T_8776, NI Key_8777) {
TY8607* Result_8778;
TY8607* It_8779;
Result_8778 = 0;
It_8779 = 0;
It_8779 = (*T_8776).Data[((NI64)(Key_8777 & 1023))-0];
while (1) {
if (!!((It_8779 == NIM_NIL))) goto LA1;
if (!((*It_8779).Key == Key_8777)) goto LA3;
Result_8778 = It_8779;
goto BeforeRet;
LA3: ;
It_8779 = (*It_8779).Next;
} LA1: ;
Result_8778 = NIM_NIL;
BeforeRet: ;
return Result_8778;
}
N_NIMCALL(NIM_BOOL, Contains_8811)(TY8611* S_8813, NI Key_8814) {
NIM_BOOL Result_8815;
TY8607* T_8816;
NI U_8828;
Result_8815 = 0;
T_8816 = 0;
T_8816 = Intsetget_8774(S_8813, (NI64)((NU64)(Key_8814) >> (NU64)(9)));
if (!!((T_8816 == NIM_NIL))) goto LA2;
U_8828 = 0;
U_8828 = (NI64)(Key_8814 & 511);
Result_8815 = !(((NI64)((*T_8816).Bits[((NI64)((NU64)(U_8828) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_8828 & 63)))) == 0));
goto LA1;
LA2: ;
Result_8815 = NIM_FALSE;
LA1: ;
return Result_8815;
}
static N_INLINE(NI, Pageindex_8881)(void* P_8883) {
NI Result_8884;
Result_8884 = 0;
Result_8884 = (NI64)((NU64)(((NI) (P_8883))) >> (NU64)(12));
return Result_8884;
}
static N_INLINE(NIM_BOOL, Isaccessible_8952)(void* P_8954) {
NIM_BOOL Result_8955;
NI LOC1;
Result_8955 = 0;
LOC1 = Pageindex_8881(P_8954);
Result_8955 = Contains_8811(&Allocator_8729.Chunkstarts, LOC1);
return Result_8955;
}
static N_INLINE(void, Updateprevsize_9011)(TY8674* A_9014, TY8634* C_9015, NI Prevsize_9016) {
TY8630* Ri_9017;
NIM_BOOL LOC2;
Ri_9017 = 0;
Ri_9017 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9015))) + (NU64)((*C_9015).Sup.Size))));
LOC2 = Isaccessible_8952(((void*) (Ri_9017)));
if (!LOC2) goto LA3;
(*Ri_9017).Prevsize = Prevsize_9016;
LA3: ;
}
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737) {
NI Result_4251;
Result_4251 = 0;
Result_4251 = fwrite(Buffer_3736, 1, Len_3737, F_3735);
return Result_4251;
}
static N_INLINE(void, Lock_11013)(TY10990* Gch_11016) {
}
N_NIMCALL(NI, Gettotalmem_2021)(void) {
NI Result_10277;
Result_10277 = 0;
Result_10277 = Allocator_8729.Currmem;
goto BeforeRet;
BeforeRet: ;
return Result_10277;
}
N_NIMCALL(NI, Getfreemem_2019)(void) {
NI Result_10274;
Result_10274 = 0;
Result_10274 = Allocator_8729.Freemem;
return Result_10274;
}
N_NIMCALL(NI, Getoccupiedmem_2017)(void) {
NI Result_10280;
NI LOC1;
NI LOC2;
Result_10280 = 0;
LOC1 = Gettotalmem_2021();
LOC2 = Getfreemem_2019();
Result_10280 = (NI64)(LOC1 - LOC2);
goto BeforeRet;
BeforeRet: ;
return Result_10280;
}
N_NOINLINE(NI, Stacksize_16601)(void) {
NI Result_16603;
void* volatile Stacktop_16604;
Result_16603 = 0;
Stacktop_16604 = 0;
Result_16603 = (NI64)abs((NI64)(((NI) (&Stacktop_16604)) - ((NI) (Stackbottom_11009))));
return Result_16603;
}
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11414))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(TY8630*, Pageaddr_8885)(void* P_8887) {
TY8630* Result_8888;
Result_8888 = 0;
Result_8888 = ((TY8630*) ((NI64)(((NI) (P_8887)) & -4096)));
return Result_8888;
}
static N_INLINE(NIM_BOOL, Chunkunused_9007)(TY8630* C_9009) {
NIM_BOOL Result_9010;
Result_9010 = 0;
Result_9010 = !((*C_9009).Used);
return Result_9010;
}
static N_INLINE(NIM_BOOL, Issmallchunk_9001)(TY8630* C_9003) {
NIM_BOOL Result_9004;
Result_9004 = 0;
Result_9004 = ((*C_9003).Size <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)));
goto BeforeRet;
BeforeRet: ;
return Result_9004;
}
N_NIMCALL(NIM_BOOL, Isallocatedptr_10201)(TY8674* A_10203, void* P_10204) {
NIM_BOOL Result_10205;
NIM_BOOL LOC2;
TY8630* C_10206;
NIM_BOOL LOC6;
NIM_BOOL LOC10;
TY8632* C_10207;
NI Offset_10208;
NIM_BOOL LOC13;
NIM_BOOL LOC14;
TY8634* C_10212;
NIM_BOOL LOC17;
Result_10205 = 0;
LOC2 = Isaccessible_8952(P_10204);
if (!LOC2) goto LA3;
C_10206 = 0;
C_10206 = Pageaddr_8885(P_10204);
LOC6 = Chunkunused_9007(C_10206);
if (!!(LOC6)) goto LA7;
LOC10 = Issmallchunk_9001(C_10206);
if (!LOC10) goto LA11;
C_10207 = 0;
C_10207 = ((TY8632*) (C_10206));
Offset_10208 = 0;
Offset_10208 = (NI64)((NU64)((NI64)(((NI) (P_10204)) & 4095)) - (NU64)((NI64)(((NI)sizeof(TY8632)) - 8)));
LOC14 = ((NU64)(Offset_10208) < (NU64)((*C_10207).Acc));
if (!(LOC14)) goto LA15;
LOC14 = ((NI64)((NU64)(Offset_10208) % (NU64)((*C_10207).Sup.Size)) == 0);
LA15: ;
LOC13 = LOC14;
if (!(LOC13)) goto LA16;
LOC13 = ((NU64)(1) < (NU64)((*((TY8622*) (P_10204))).Zerofield));
LA16: ;
Result_10205 = LOC13;
goto LA9;
LA11: ;
C_10212 = 0;
C_10212 = ((TY8634*) (C_10206));
LOC17 = (P_10204 == ((void*) (&(*C_10212).Data)));
if (!(LOC17)) goto LA18;
LOC17 = ((NU64)(1) < (NU64)((*((TY8622*) (P_10204))).Zerofield));
LA18: ;
Result_10205 = LOC17;
LA9: ;
LA7: ;
LA3: ;
return Result_10205;
}
N_NIMCALL(void, Excl_8838)(TY8611* S_8841, NI Key_8842) {
TY8607* T_8843;
NI U_8855;
T_8843 = 0;
T_8843 = Intsetget_8774(&(*S_8841), (NI64)((NU64)(Key_8842) >> (NU64)(9)));
if (!!((T_8843 == NIM_NIL))) goto LA2;
U_8855 = 0;
U_8855 = (NI64)(Key_8842 & 511);
(*T_8843).Bits[((NI64)((NU64)(U_8855) >> (NU64)(6)))-0] = (NI64)((*T_8843).Bits[((NI64)((NU64)(U_8855) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_8855 & 63))))));
LA2: ;
}
static N_INLINE(NI, Pageindex_8877)(TY8630* C_8879) {
NI Result_8880;
Result_8880 = 0;
Result_8880 = (NI64)((NU64)(((NI) (C_8879))) >> (NU64)(12));
return Result_8880;
}
static N_INLINE(void, Osdeallocpages_8293)(void* P_8295, NI Size_8296) {
VirtualFree(P_8295, 0, ((NI32) 32768));
}
static N_INLINE(void, Deccurrmem_8703)(TY8674* A_8706, NI Bytes_8707) {
(*A_8706).Maxmem = (((*A_8706).Maxmem >= (*A_8706).Currmem) ? (*A_8706).Maxmem : (*A_8706).Currmem);
(*A_8706).Currmem -= Bytes_8707;
}
N_NIMCALL(void, Freeoschunks_8926)(TY8674* A_8929, void* P_8930, NI Size_8931) {
TY8630* C_8932;
NI Nxt_8933;
TY8630* Next_8936;
NI LOC2;
NIM_BOOL LOC3;
NI LOC6;
C_8932 = 0;
C_8932 = ((TY8630*) (P_8930));
Nxt_8933 = 0;
Nxt_8933 = (NI64)((NU64)(((NI) (P_8930))) + (NU64)((*C_8932).Size));
Next_8936 = 0;
Next_8936 = ((TY8630*) (Nxt_8933));
LOC2 = Pageindex_8877(Next_8936);
LOC3 = Contains_8811(&(*A_8929).Chunkstarts, LOC2);
if (!LOC3) goto LA4;
(*Next_8936).Prevsize = 0;
LA4: ;
LOC6 = Pageindex_8881(P_8930);
Excl_8838(&(*A_8929).Chunkstarts, LOC6);
Osdeallocpages_8293(P_8930, Size_8931);
Deccurrmem_8703(A_8929, Size_8931);
(*A_8929).Freemem -= Size_8931;
}
N_NIMCALL(void, Freebigchunk_9020)(TY8674* A_9023, TY8634* C_9024) {
TY8634* C_9025;
TY8630* Ri_9040;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
NI LOC10;
TY8630* Le_9203;
NIM_BOOL LOC15;
NIM_BOOL LOC20;
NI LOC23;
NI LOC27;
C_9025 = 0;
C_9025 = C_9024;
(*A_9023).Freemem += (*C_9025).Sup.Size;
Ri_9040 = 0;
Ri_9040 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9025))) + (NU64)((*C_9025).Sup.Size))));
LOC2 = Isaccessible_8952(((void*) (Ri_9040)));
if (!(LOC2)) goto LA3;
LOC2 = Chunkunused_9007(Ri_9040);
LA3: ;
if (!LOC2) goto LA4;
LOC7 = Issmallchunk_9001(Ri_9040);
if (!!(LOC7)) goto LA8;
Listremove_9046(&(*A_9023).Freechunkslist, ((TY8634*) (Ri_9040)));
(*C_9025).Sup.Size += (*Ri_9040).Size;
LOC10 = Pageindex_8877(Ri_9040);
Excl_8838(&(*A_9023).Chunkstarts, LOC10);
LA8: ;
LA4: ;
if (!!(((*C_9025).Sup.Prevsize == 0))) goto LA12;
Le_9203 = 0;
Le_9203 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9025))) - (NU64)((*C_9025).Sup.Prevsize))));
LOC15 = Isaccessible_8952(((void*) (Le_9203)));
if (!(LOC15)) goto LA16;
LOC15 = Chunkunused_9007(Le_9203);
LA16: ;
if (!LOC15) goto LA17;
LOC20 = Issmallchunk_9001(Le_9203);
if (!!(LOC20)) goto LA21;
Listremove_9046(&(*A_9023).Freechunkslist, ((TY8634*) (Le_9203)));
(*Le_9203).Size += (*C_9025).Sup.Size;
LOC23 = Pageindex_8877(&C_9025->Sup);
Excl_8838(&(*A_9023).Chunkstarts, LOC23);
C_9025 = ((TY8634*) (Le_9203));
LA21: ;
LA17: ;
LA12: ;
if (!((*C_9025).Sup.Size < 1048576)) goto LA25;
LOC27 = Pageindex_8877(&C_9025->Sup);
Incl_8831(&(*A_9023).Chunkstarts, LOC27);
Updateprevsize_9011(A_9023, C_9025, (*C_9025).Sup.Size);
Listadd_9407(&(*A_9023).Freechunkslist, C_9025);
(*C_9025).Sup.Used = NIM_FALSE;
goto LA24;
LA25: ;
Freeoschunks_8926(A_9023, ((void*) (C_9025)), (*C_9025).Sup.Size);
LA24: ;
}
N_NIMCALL(void, Rawdealloc_9864)(TY8674* A_9867, void* P_9868) {
TY8630* C_9869;
NIM_BOOL LOC2;
TY8632* C_9870;
NI S_9871;
TY8622* F_9873;
C_9869 = 0;
C_9869 = Pageaddr_8885(P_9868);
LOC2 = Issmallchunk_9001(C_9869);
if (!LOC2) goto LA3;
C_9870 = 0;
C_9870 = ((TY8632*) (C_9869));
S_9871 = 0;
S_9871 = (*C_9870).Sup.Size;
F_9873 = 0;
F_9873 = ((TY8622*) (P_9868));
(*F_9873).Zerofield = 0;
(*F_9873).Next = (*C_9870).Freelist;
(*C_9870).Freelist = F_9873;
if (!((*C_9870).Free < S_9871)) goto LA6;
Listadd_9626(&(*A_9867).Freesmallchunks[((NI64)(S_9871 / 8))-0], C_9870);
(*C_9870).Free += S_9871;
goto LA5;
LA6: ;
(*C_9870).Free += S_9871;
if (!((*C_9870).Free == (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)))) goto LA9;
Listremove_9768(&(*A_9867).Freesmallchunks[((NI64)(S_9871 / 8))-0], C_9870);
(*C_9870).Sup.Size = 4096;
Freebigchunk_9020(A_9867, ((TY8634*) (C_9870)));
LA9: ;
LA5: ;
goto LA1;
LA3: ;
Freebigchunk_9020(A_9867, ((TY8634*) (C_9869)));
LA1: ;
}
N_NOCONV(void, Dealloc_1960)(void* P_1962) {
void* X_10228;
X_10228 = 0;
X_10228 = ((void*) ((NI64)((NU64)(((NI) (P_1962))) - (NU64)(((NI)sizeof(TY8622))))));
Rawdealloc_9864(&Allocator_8729, X_10228);
}
static N_INLINE(void, Add_10658)(TY10618* S_10661, TY10602* C_10662) {
TY10602** D_10665;
void* LOC4;
if (!((*S_10661).Cap <= (*S_10661).Len)) goto LA2;
(*S_10661).Cap = (NI64)((NI64)((*S_10661).Cap * 3) / 2);
D_10665 = 0;
LOC4 = Alloc_1950((NI64)((*S_10661).Cap * 8));
D_10665 = ((TY10602**) (LOC4));
memcpy(((void*) (D_10665)), ((void*) ((*S_10661).D)), (NI64)((*S_10661).Len * 8));
Dealloc_1960(((void*) ((*S_10661).D)));
(*S_10661).D = D_10665;
LA2: ;
(*S_10661).D[((*S_10661).Len)-0] = C_10662;
(*S_10661).Len += 1;
}
static N_INLINE(void, Gcmark_15803)(void* P_15805) {
TY10602* Cell_15806;
NI C_15807;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
Cell_15806 = 0;
Cell_15806 = Usrtocell_11412(P_15805);
C_15807 = 0;
C_15807 = ((NI) (Cell_15806));
LOC2 = ((NU64)(4096) < (NU64)(C_15807));
if (!(LOC2)) goto LA3;
LOC2 = ((NI64)(C_15807 & 7) == 0);
LA3: ;
if (!LOC2) goto LA4;
LOC7 = Isallocatedptr_10201(&Allocator_8729, ((void*) (Cell_15806)));
if (!LOC7) goto LA8;
(*Cell_15806).Refcount = (NI64)((NU64)((*Cell_15806).Refcount) + (NU64)(8));
Add_10658(&Gch_11010.Decstack, Cell_15806);
LA8: ;
LA4: ;
}
N_CDECL(void, Markstackandregisters_16615)(TY10990* Gch_16618) {
jmp_buf Registers_16619;
NI32 LOC2;
NI Max_16623;
NI Sp_16625;
memset((void*)&Registers_16619, 0, sizeof(Registers_16619));
LOC2 = setjmp(Registers_16619);
if (!(LOC2 == ((NI32) 0))) goto LA3;
Max_16623 = 0;
Max_16623 = ((NI) (Stackbottom_11009));
Sp_16625 = 0;
Sp_16625 = ((NI) (Registers_16619));
while (1) {
if (!((NU64)(Sp_16625) <= (NU64)(Max_16623))) goto LA5;
Gcmark_15803((*((void**) (Sp_16625))));
Sp_16625 = (NI64)((NU64)(Sp_16625) + (NU64)(8));
} LA5: ;
LA3: ;
}
N_NIMCALL(void, Markthreadstacks_15811)(TY10990* Gch_15814) {
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418) {
NIM_BOOL Result_11419;
Result_11419 = 0;
Result_11419 = !((((*(*C_11418).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11419;
}
static N_INLINE(NI, Nexttry_10709)(NI H_10711, NI Maxhash_10712) {
NI Result_10713;
Result_10713 = 0;
Result_10713 = (NI64)((NI64)((NI64)(5 * H_10711) + 1) & Maxhash_10712);
return Result_10713;
}
N_NIMCALL(TY10610*, Cellsetget_10714)(TY10614* T_10716, NI Key_10717) {
TY10610* Result_10718;
NI H_10719;
Result_10718 = 0;
H_10719 = 0;
H_10719 = (NI64)(((NI) (Key_10717)) & (*T_10716).Max);
while (1) {
if (!!(((*T_10716).Data[(H_10719)-0] == NIM_NIL))) goto LA1;
if (!((*(*T_10716).Data[(H_10719)-0]).Key == Key_10717)) goto LA3;
Result_10718 = (*T_10716).Data[(H_10719)-0];
goto BeforeRet;
LA3: ;
H_10719 = Nexttry_10709(H_10719, (*T_10716).Max);
} LA1: ;
Result_10718 = NIM_NIL;
goto BeforeRet;
BeforeRet: ;
return Result_10718;
}
N_NIMCALL(void, Excl_10881)(TY10614* S_10884, TY10602* Cell_10885) {
NI U_10886;
TY10610* T_10887;
U_10886 = 0;
U_10886 = ((NI) (Cell_10885));
T_10887 = 0;
T_10887 = Cellsetget_10714(&(*S_10884), (NI64)((NU64)(U_10886) >> (NU64)(12)));
if (!!((T_10887 == NIM_NIL))) goto LA2;
U_10886 = (NI64)((NU64)((NI64)((NU64)(U_10886) % (NU64)(4096))) / (NU64)(8));
(*T_10887).Bits[((NI64)((NU64)(U_10886) >> (NU64)(6)))-0] = (NI64)((*T_10887).Bits[((NI64)((NU64)(U_10886) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_10886 & 63))))));
LA2: ;
}
static N_INLINE(void*, Celltousr_11408)(TY10602* Cell_11410) {
void* Result_11411;
Result_11411 = 0;
Result_11411 = ((void*) ((NI64)((NU64)(((NI) (Cell_11410))) + (NU64)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11411;
}
N_NIMCALL(void, Preparedealloc_12025)(TY10602* Cell_12027) {
void* LOC4;
if (!!(((*(*Cell_12027).Typ).finalizer == NIM_NIL))) goto LA2;
Recgclock_11012 += 1;
LOC4 = Celltousr_11408(Cell_12027);
((TFinalizer) ((*(*Cell_12027).Typ).finalizer))(LOC4);
Recgclock_11012 -= 1;
LA2: ;
}
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405) {
if (!((NI64)((*C_11405).Refcount & 4) == 0)) goto LA2;
(*C_11405).Refcount = (NI64)((NI64)((*C_11405).Refcount & -8) | 4);
Add_10658(S_11404, C_11405);
LA2: ;
}
N_NIMCALL(void, Dooperation_12016)(void* P_12018, NU8 Op_12019) {
TY10602* C_14806;
if (!(P_12018 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
C_14806 = 0;
C_14806 = Usrtocell_11412(P_12018);
switch (Op_12019) {
case ((NU8) 0):
(*C_14806).Refcount = (NI64)((NU64)((*C_14806).Refcount) - (NU64)(8));
if (!((NU64)((*C_14806).Refcount) < (NU64)(8))) goto LA5;
Addzct_11401(&Gch_11010.Zct, C_14806);
LA5: ;
break;
case ((NU8) 1):
Add_10658(&Gch_11010.Tempstack, C_14806);
break;
case ((NU8) 2):
(*C_14806).Refcount = (NI64)((NU64)((*C_14806).Refcount) - (NU64)(8));
break;
}
BeforeRet: ;
}
N_NIMCALL(NI, Getdiscriminant_7443)(void* Aa_7445, TNimNode* N_7447) {
NI Result_7448;
NI D_7458;
NI A_7459;
Result_7448 = 0;
D_7458 = 0;
A_7459 = 0;
A_7459 = ((NI) (Aa_7445));
switch ((*(*N_7447).typ).size) {
case 1:
D_7458 = ((NI)(NU)(NU8)((*((NI8*) ((NI64)((NU64)(A_7459) + (NU64)((*N_7447).offset)))))));
break;
case 2:
D_7458 = ((NI)(NU)(NU16)((*((NI16*) ((NI64)((NU64)(A_7459) + (NU64)((*N_7447).offset)))))));
break;
case 4:
D_7458 = ((NI) ((*((NI32*) ((NI64)((NU64)(A_7459) + (NU64)((*N_7447).offset)))))));
break;
default:
break;
}
Result_7448 = D_7458;
goto BeforeRet;
BeforeRet: ;
return Result_7448;
}
N_NIMCALL(TNimNode*, Selectbranch_7463)(void* Aa_7465, TNimNode* N_7467) {
TNimNode* Result_7469;
NI Discr_7470;
Result_7469 = 0;
Discr_7470 = 0;
Discr_7470 = Getdiscriminant_7443(Aa_7465, N_7467);
if (!((NU64)(Discr_7470) < (NU64)((*N_7467).len))) goto LA2;
Result_7469 = (*N_7467).sons[(Discr_7470)-0];
if (!(Result_7469 == NIM_NIL)) goto LA5;
Result_7469 = (*N_7467).sons[((*N_7467).len)-0];
LA5: ;
goto LA1;
LA2: ;
Result_7469 = (*N_7467).sons[((*N_7467).len)-0];
LA1: ;
return Result_7469;
}
N_NIMCALL(void, Forallslotsaux_13401)(void* Dest_13403, TNimNode* N_13405, NU8 Op_13406) {
NI D_13407;
NI I_13415;
NI HEX3Atmp_21075;
NI Res_21077;
TNimNode* M_13416;
D_13407 = 0;
D_13407 = ((NI) (Dest_13403));
switch ((*N_13405).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
Forallchildrenaux_12020(((void*) ((NI64)((NU64)(D_13407) + (NU64)((*N_13405).offset)))), (*N_13405).typ, Op_13406);
break;
case ((NU8) 2):
I_13415 = 0;
HEX3Atmp_21075 = 0;
HEX3Atmp_21075 = (NI64)((*N_13405).len - 1);
Res_21077 = 0;
Res_21077 = 0;
while (1) {
if (!(Res_21077 <= HEX3Atmp_21075)) goto LA1;
I_13415 = Res_21077;
Forallslotsaux_13401(Dest_13403, (*N_13405).sons[(I_13415)-0], Op_13406);
Res_21077 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_13416 = 0;
M_13416 = Selectbranch_7463(Dest_13403, N_13405);
if (!!((M_13416 == NIM_NIL))) goto LA3;
Forallslotsaux_13401(Dest_13403, M_13416, Op_13406);
LA3: ;
break;
}
}
N_NIMCALL(void, Forallchildrenaux_12020)(void* Dest_12022, TNimType* Mt_12023, NU8 Op_12024) {
NI D_13433;
NI I_13452;
NI HEX3Atmp_21081;
NI Res_21083;
D_13433 = 0;
D_13433 = ((NI) (Dest_12022));
if (!(Dest_12022 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!((((*Mt_12023).flags &(1<<((((NU8) 0))&7)))!=0))) goto LA5;
switch ((*Mt_12023).kind) {
case ((NU8) 16):
case ((NU8) 4):
case ((NU8) 27):
I_13452 = 0;
HEX3Atmp_21081 = 0;
HEX3Atmp_21081 = (NI64)((NI64)((*Mt_12023).size / (*(*Mt_12023).base).size) - 1);
Res_21083 = 0;
Res_21083 = 0;
while (1) {
if (!(Res_21083 <= HEX3Atmp_21081)) goto LA7;
I_13452 = Res_21083;
Forallchildrenaux_12020(((void*) ((NI64)((NU64)(D_13433) + (NU64)((NI64)((NU64)(I_13452) * (NU64)((*(*Mt_12023).base).size)))))), (*Mt_12023).base, Op_12024);
Res_21083 += 1;
} LA7: ;
break;
case ((NU8) 22):
case ((NU8) 28):
case ((NU8) 24):
Dooperation_12016((*((void**) (D_13433))), Op_12024);
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
Forallslotsaux_13401(Dest_12022, (*Mt_12023).node, Op_12024);
break;
default:
break;
}
LA5: ;
BeforeRet: ;
}
N_NIMCALL(void, Forallchildren_12012)(TY10602* Cell_12014, NU8 Op_12015) {
void* LOC1;
NI D_13479;
void* LOC2;
TGenericSeq* S_13480;
NI I_13499;
NI HEX3Atmp_21087;
NI Res_21089;
switch ((*(*Cell_12014).Typ).kind) {
case ((NU8) 22):
LOC1 = Celltousr_11408(Cell_12014);
Forallchildrenaux_12020(LOC1, (*(*Cell_12014).Typ).base, Op_12015);
break;
case ((NU8) 24):
D_13479 = 0;
LOC2 = Celltousr_11408(Cell_12014);
D_13479 = ((NI) (LOC2));
S_13480 = 0;
S_13480 = ((TGenericSeq*) (D_13479));
if (!!((S_13480 == NIM_NIL))) goto LA4;
I_13499 = 0;
HEX3Atmp_21087 = 0;
HEX3Atmp_21087 = (NI64)((*S_13480).len - 1);
Res_21089 = 0;
Res_21089 = 0;
while (1) {
if (!(Res_21089 <= HEX3Atmp_21087)) goto LA6;
I_13499 = Res_21089;
Forallchildrenaux_12020(((void*) ((NI64)((NU64)((NI64)((NU64)(D_13479) + (NU64)((NI64)((NU64)(I_13499) * (NU64)((*(*(*Cell_12014).Typ).base).size))))) + (NU64)(16)))), (*(*Cell_12014).Typ).base, Op_12015);
Res_21089 += 1;
} LA6: ;
LA4: ;
break;
case ((NU8) 28):
break;
default:
break;
}
}
N_NIMCALL(void, Collectzct_16801)(TY10990* Gch_16804) {
NI* L_16806;
TY10602* C_16809;
NIM_BOOL LOC6;
L_16806 = 0;
L_16806 = &(*Gch_16804).Zct.Len;
while (1) {
if (!(0 < (*L_16806))) goto LA1;
C_16809 = 0;
C_16809 = (*Gch_16804).Zct.D[(0)-0];
(*C_16809).Refcount = (NI64)((*C_16809).Refcount & -8);
(*Gch_16804).Zct.D[(0)-0] = (*Gch_16804).Zct.D[((NI64)((*L_16806) - 1))-0];
(*L_16806) -= 1;
if (!((NU64)((*C_16809).Refcount) < (NU64)(8))) goto LA3;
LOC6 = Canbecycleroot_11416(C_16809);
if (!LOC6) goto LA7;
Excl_10881(&(*Gch_16804).Cycleroots, C_16809);
LA7: ;
Preparedealloc_12025(C_16809);
Forallchildren_12012(C_16809, ((NU8) 0));
Rawdealloc_9864(&Allocator_8729, ((void*) (C_16809)));
LA3: ;
} LA1: ;
}
N_NIMCALL(void, Init_10688)(TY10614* S_10691) {
void* LOC1;
LOC1 = Alloc0_1953(8192);
(*S_10691).Data = ((TY10610**) (LOC1));
(*S_10691).Max = 1023;
(*S_10691).Counter = 0;
(*S_10691).Head = NIM_NIL;
}
N_NIMCALL(void, Cellsetrawinsert_10733)(TY10614* T_10735, TY10610** Data_10736, TY10610* Desc_10737) {
NI H_10738;
H_10738 = 0;
H_10738 = (NI64)(((NI) ((*Desc_10737).Key)) & (*T_10735).Max);
while (1) {
if (!!((Data_10736[(H_10738)-0] == NIM_NIL))) goto LA1;
H_10738 = Nexttry_10709(H_10738, (*T_10735).Max);
} LA1: ;
Data_10736[(H_10738)-0] = Desc_10737;
}
N_NIMCALL(void, Cellsetenlarge_10770)(TY10614* T_10773) {
NI Oldmax_10774;
TY10610** N_10775;
void* LOC1;
NI I_10783;
NI Res_21066;
Oldmax_10774 = 0;
Oldmax_10774 = (*T_10773).Max;
(*T_10773).Max = (NI64)((NI64)((NI64)((*T_10773).Max + 1) * 2) - 1);
N_10775 = 0;
LOC1 = Alloc0_1953((NI64)((NI64)((*T_10773).Max + 1) * 8));
N_10775 = ((TY10610**) (LOC1));
I_10783 = 0;
Res_21066 = 0;
Res_21066 = 0;
while (1) {
if (!(Res_21066 <= Oldmax_10774)) goto LA2;
I_10783 = Res_21066;
if (!!(((*T_10773).Data[(I_10783)-0] == NIM_NIL))) goto LA4;
Cellsetrawinsert_10733(&(*T_10773), N_10775, (*T_10773).Data[(I_10783)-0]);
LA4: ;
Res_21066 += 1;
} LA2: ;
Dealloc_1960(((void*) ((*T_10773).Data)));
(*T_10773).Data = N_10775;
}
N_NIMCALL(TY10610*, Cellsetput_10795)(TY10614* T_10798, NI Key_10799) {
TY10610* Result_10800;
NI H_10801;
TY10610* X_10802;
NIM_BOOL LOC9;
void* LOC14;
Result_10800 = 0;
H_10801 = 0;
H_10801 = (NI64)(((NI) (Key_10799)) & (*T_10798).Max);
while (1) {
X_10802 = 0;
X_10802 = (*T_10798).Data[(H_10801)-0];
if (!(X_10802 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*X_10802).Key == Key_10799)) goto LA6;
Result_10800 = X_10802;
goto BeforeRet;
LA6: ;
H_10801 = Nexttry_10709(H_10801, (*T_10798).Max);
} LA1: ;
LOC9 = ((NI64)((NI64)((*T_10798).Max + 1) * 2) < (NI64)((*T_10798).Counter * 3));
if (LOC9) goto LA10;
LOC9 = ((NI64)((NI64)((*T_10798).Max + 1) - (*T_10798).Counter) < 4);
LA10: ;
if (!LOC9) goto LA11;
Cellsetenlarge_10770(T_10798);
LA11: ;
(*T_10798).Counter += 1;
H_10801 = (NI64)(((NI) (Key_10799)) & (*T_10798).Max);
while (1) {
if (!!(((*T_10798).Data[(H_10801)-0] == NIM_NIL))) goto LA13;
H_10801 = Nexttry_10709(H_10801, (*T_10798).Max);
} LA13: ;
LOC14 = Alloc0_1953(((NI)sizeof(TY10610)));
Result_10800 = ((TY10610*) (LOC14));
(*Result_10800).Next = (*T_10798).Head;
(*Result_10800).Key = Key_10799;
(*T_10798).Head = Result_10800;
(*T_10798).Data[(H_10801)-0] = Result_10800;
BeforeRet: ;
return Result_10800;
}
N_NOINLINE(void, Incl_10874)(TY10614* S_10877, TY10602* Cell_10878) {
NI U_10879;
TY10610* T_10880;
U_10879 = 0;
U_10879 = ((NI) (Cell_10878));
T_10880 = 0;
T_10880 = Cellsetput_10795(S_10877, (NI64)((NU64)(U_10879) >> (NU64)(12)));
U_10879 = (NI64)((NU64)((NI64)((NU64)(U_10879) % (NU64)(4096))) / (NU64)(8));
(*T_10880).Bits[((NI64)((NU64)(U_10879) >> (NU64)(6)))-0] = (NI64)((*T_10880).Bits[((NI64)((NU64)(U_10879) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_10879 & 63))));
}
N_NIMCALL(NIM_BOOL, Containsorincl_10899)(TY10614* S_10902, TY10602* Cell_10903) {
NIM_BOOL Result_10904;
NI U_10905;
TY10610* T_10906;
Result_10904 = 0;
U_10905 = 0;
U_10905 = ((NI) (Cell_10903));
T_10906 = 0;
T_10906 = Cellsetget_10714(&(*S_10902), (NI64)((NU64)(U_10905) >> (NU64)(12)));
if (!!((T_10906 == NIM_NIL))) goto LA2;
U_10905 = (NI64)((NU64)((NI64)((NU64)(U_10905) % (NU64)(4096))) / (NU64)(8));
Result_10904 = !(((NI64)((*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_10905 & 63)))) == 0));
if (!!(Result_10904)) goto LA5;
(*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] = (NI64)((*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_10905 & 63))));
LA5: ;
goto LA1;
LA2: ;
Incl_10874(S_10902, Cell_10903);
Result_10904 = NIM_FALSE;
LA1: ;
return Result_10904;
}
N_NIMCALL(NIM_BOOL, Contains_10854)(TY10614* S_10856, TY10602* Cell_10857) {
NIM_BOOL Result_10858;
NI U_10859;
TY10610* T_10860;
Result_10858 = 0;
U_10859 = 0;
U_10859 = ((NI) (Cell_10857));
T_10860 = 0;
T_10860 = Cellsetget_10714(S_10856, (NI64)((NU64)(U_10859) >> (NU64)(12)));
if (!!((T_10860 == NIM_NIL))) goto LA2;
U_10859 = (NI64)((NU64)((NI64)((NU64)(U_10859) % (NU64)(4096))) / (NU64)(8));
Result_10858 = !(((NI64)((*T_10860).Bits[((NI64)((NU64)(U_10859) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_10859 & 63)))) == 0));
goto LA1;
LA2: ;
Result_10858 = NIM_FALSE;
LA1: ;
return Result_10858;
}
N_NIMCALL(void, Deinit_10692)(TY10614* S_10695) {
TY10610* It_10696;
TY10610* N_10708;
It_10696 = 0;
It_10696 = (*S_10695).Head;
while (1) {
if (!!((It_10696 == NIM_NIL))) goto LA1;
N_10708 = 0;
N_10708 = (*It_10696).Next;
Dealloc_1960(((void*) (It_10696)));
It_10696 = N_10708;
} LA1: ;
(*S_10695).Head = NIM_NIL;
Dealloc_1960(((void*) ((*S_10695).Data)));
(*S_10695).Data = NIM_NIL;
(*S_10695).Counter = 0;
}
N_NIMCALL(void, Collectcycles_15003)(TY10990* Gch_15006) {
NI Tabsize_15007;
TY10602* C_15008;
TY10614 HEX3Atmp_21101;
TY10610* R_21103;
NI I_21105;
NI W_21107;
NI J_21109;
TY10614 Marker_15023;
TY10602* C_15025;
TY10614 HEX3Atmp_21124;
TY10610* R_21126;
NI I_21128;
NI W_21130;
NI J_21132;
NIM_BOOL LOC17;
TY10602* D_15041;
NIM_BOOL LOC22;
NIM_BOOL LOC24;
TY10602* C_15045;
TY10614 HEX3Atmp_21158;
TY10610* R_21160;
NI I_21162;
NI W_21164;
NI J_21166;
TY10602* D_15060;
NIM_BOOL LOC41;
Tabsize_15007 = 0;
Tabsize_15007 = 0;
C_15008 = 0;
memset((void*)&HEX3Atmp_21101, 0, sizeof(HEX3Atmp_21101));
HEX3Atmp_21101 = (*Gch_15006).Cycleroots;
R_21103 = 0;
R_21103 = HEX3Atmp_21101.Head;
while (1) {
if (!!((R_21103 == NIM_NIL))) goto LA1;
I_21105 = 0;
I_21105 = 0;
while (1) {
if (!(I_21105 <= 7)) goto LA2;
W_21107 = 0;
W_21107 = (*R_21103).Bits[(I_21105)-0];
J_21109 = 0;
J_21109 = 0;
while (1) {
if (!!((W_21107 == 0))) goto LA3;
if (!!(((NI64)(W_21107 & 1) == 0))) goto LA5;
C_15008 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_21103).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_21105) << (NU64)(6))) + (NU64)(J_21109))) * (NU64)(8)))));
Tabsize_15007 += 1;
Forallchildren_12012(C_15008, ((NU8) 2));
LA5: ;
J_21109 += 1;
W_21107 = (NI64)((NU64)(W_21107) >> (NU64)(1));
} LA3: ;
I_21105 += 1;
} LA2: ;
R_21103 = (*R_21103).Next;
} LA1: ;
(*Gch_15006).Stat.Cycletablesize = (((*Gch_15006).Stat.Cycletablesize >= Tabsize_15007) ? (*Gch_15006).Stat.Cycletablesize : Tabsize_15007);
memset((void*)&Marker_15023, 0, sizeof(Marker_15023));
Init_10688(&Marker_15023);
C_15025 = 0;
memset((void*)&HEX3Atmp_21124, 0, sizeof(HEX3Atmp_21124));
HEX3Atmp_21124 = (*Gch_15006).Cycleroots;
R_21126 = 0;
R_21126 = HEX3Atmp_21124.Head;
while (1) {
if (!!((R_21126 == NIM_NIL))) goto LA7;
I_21128 = 0;
I_21128 = 0;
while (1) {
if (!(I_21128 <= 7)) goto LA8;
W_21130 = 0;
W_21130 = (*R_21126).Bits[(I_21128)-0];
J_21132 = 0;
J_21132 = 0;
while (1) {
if (!!((W_21130 == 0))) goto LA9;
if (!!(((NI64)(W_21130 & 1) == 0))) goto LA11;
C_15025 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_21126).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_21128) << (NU64)(6))) + (NU64)(J_21132))) * (NU64)(8)))));
if (!((NU64)(8) <= (NU64)((*C_15025).Refcount))) goto LA14;
LOC17 = Containsorincl_10899(&Marker_15023, C_15025);
if (!!(LOC17)) goto LA18;
(*Gch_15006).Tempstack.Len = 0;
Forallchildren_12012(C_15025, ((NU8) 1));
while (1) {
if (!(0 < (*Gch_15006).Tempstack.Len)) goto LA20;
(*Gch_15006).Tempstack.Len -= 1;
D_15041 = 0;
D_15041 = (*Gch_15006).Tempstack.D[((*Gch_15006).Tempstack.Len)-0];
(*D_15041).Refcount = (NI64)((NU64)((*D_15041).Refcount) + (NU64)(8));
LOC22 = Contains_10854(&(*Gch_15006).Cycleroots, D_15041);
if (!(LOC22)) goto LA23;
LOC24 = Containsorincl_10899(&Marker_15023, D_15041);
LOC22 = !(LOC24);
LA23: ;
if (!LOC22) goto LA25;
Forallchildren_12012(D_15041, ((NU8) 1));
LA25: ;
} LA20: ;
LA18: ;
LA14: ;
LA11: ;
J_21132 += 1;
W_21130 = (NI64)((NU64)(W_21130) >> (NU64)(1));
} LA9: ;
I_21128 += 1;
} LA8: ;
R_21126 = (*R_21126).Next;
} LA7: ;
C_15045 = 0;
memset((void*)&HEX3Atmp_21158, 0, sizeof(HEX3Atmp_21158));
HEX3Atmp_21158 = (*Gch_15006).Cycleroots;
R_21160 = 0;
R_21160 = HEX3Atmp_21158.Head;
while (1) {
if (!!((R_21160 == NIM_NIL))) goto LA27;
I_21162 = 0;
I_21162 = 0;
while (1) {
if (!(I_21162 <= 7)) goto LA28;
W_21164 = 0;
W_21164 = (*R_21160).Bits[(I_21162)-0];
J_21166 = 0;
J_21166 = 0;
while (1) {
if (!!((W_21164 == 0))) goto LA29;
if (!!(((NI64)(W_21164 & 1) == 0))) goto LA31;
C_15045 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_21160).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_21162) << (NU64)(6))) + (NU64)(J_21166))) * (NU64)(8)))));
if (!((NU64)((*C_15045).Refcount) < (NU64)(8))) goto LA34;
(*Gch_15006).Tempstack.Len = 0;
Forallchildren_12012(C_15045, ((NU8) 1));
while (1) {
if (!(0 < (*Gch_15006).Tempstack.Len)) goto LA36;
(*Gch_15006).Tempstack.Len -= 1;
D_15060 = 0;
D_15060 = (*Gch_15006).Tempstack.D[((*Gch_15006).Tempstack.Len)-0];
if (!((NU64)((*D_15060).Refcount) < (NU64)(8))) goto LA38;
LOC41 = Contains_10854(&(*Gch_15006).Cycleroots, D_15060);
if (!!(LOC41)) goto LA42;
Addzct_11401(&(*Gch_15006).Zct, D_15060);
LA42: ;
LA38: ;
} LA36: ;
Preparedealloc_12025(C_15045);
Rawdealloc_9864(&Allocator_8729, ((void*) (C_15045)));
LA34: ;
LA31: ;
J_21166 += 1;
W_21164 = (NI64)((NU64)(W_21164) >> (NU64)(1));
} LA29: ;
I_21162 += 1;
} LA28: ;
R_21160 = (*R_21160).Next;
} LA27: ;
Deinit_10692(&(*Gch_15006).Cycleroots);
Init_10688(&(*Gch_15006).Cycleroots);
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11010.Zct, C_12403);
}
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054) {
Incl_10874(&Gch_11010.Cycleroots, C_12054);
}
static N_INLINE(void, Decref_12801)(TY10602* C_12803) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3006(&(*C_12803).Refcount, 8);
if (!((NU64)(LOC2) < (NU64)(8))) goto LA3;
Rtladdzct_12401(C_12803);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11416(C_12803);
if (!LOC5) goto LA6;
Rtladdcycleroot_12052(C_12803);
goto LA1;
LA6: ;
LA1: ;
}
N_NIMCALL(void, Unmarkstackandregisters_17401)(TY10990* Gch_17404) {
TY10602** D_17405;
NI I_17413;
NI HEX3Atmp_21193;
NI Res_21195;
D_17405 = 0;
D_17405 = (*Gch_17404).Decstack.D;
I_17413 = 0;
HEX3Atmp_21193 = 0;
HEX3Atmp_21193 = (NI64)((*Gch_17404).Decstack.Len - 1);
Res_21195 = 0;
Res_21195 = 0;
while (1) {
if (!(Res_21195 <= HEX3Atmp_21193)) goto LA1;
I_17413 = Res_21195;
Decref_12801(D_17405[(I_17413)-0]);
Res_21195 += 1;
} LA1: ;
(*Gch_17404).Decstack.Len = 0;
}
N_NIMCALL(void, Collectct_12005)(TY10990* Gch_12008) {
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC5;
NI LOC7;
NI LOC11;
NIM_BOOL LOC13;
NI LOC14;
NI LOC18;
LOC3 = (256 <= (*Gch_12008).Zct.Len);
if (LOC3) goto LA4;
LOC5 = NIM_TRUE;
if (!(LOC5)) goto LA6;
LOC7 = Getoccupiedmem_2017();
LOC5 = (Cyclethreshold_11011 <= LOC7);
LA6: ;
LOC3 = LOC5;
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA8;
LOC2 = NIM_FALSE;
LA8: ;
if (!LOC2) goto LA9;
LOC11 = Stacksize_16601();
(*Gch_12008).Stat.Maxstacksize = (((*Gch_12008).Stat.Maxstacksize >= LOC11) ? (*Gch_12008).Stat.Maxstacksize : LOC11);
Markstackandregisters_16615(Gch_12008);
Markthreadstacks_15811(Gch_12008);
(*Gch_12008).Stat.Maxstackcells = (((*Gch_12008).Stat.Maxstackcells >= (*Gch_12008).Decstack.Len) ? (*Gch_12008).Stat.Maxstackcells : (*Gch_12008).Decstack.Len);
(*Gch_12008).Stat.Stackscans += 1;
Collectzct_16801(Gch_12008);
LOC14 = Getoccupiedmem_2017();
LOC13 = (Cyclethreshold_11011 <= LOC14);
if (LOC13) goto LA15;
LOC13 = NIM_FALSE;
LA15: ;
if (!LOC13) goto LA16;
Collectcycles_15003(Gch_12008);
Collectzct_16801(Gch_12008);
(*Gch_12008).Stat.Cyclecollections += 1;
LOC18 = Getoccupiedmem_2017();
Cyclethreshold_11011 = ((4194304 >= (NI64)(LOC18 * 2)) ? 4194304 : (NI64)(LOC18 * 2));
(*Gch_12008).Stat.Maxthreshold = (((*Gch_12008).Stat.Maxthreshold >= Cyclethreshold_11011) ? (*Gch_12008).Stat.Maxthreshold : Cyclethreshold_11011);
LA16: ;
Unmarkstackandregisters_17401(Gch_12008);
LA9: ;
}
static N_INLINE(void, Checkcollection_13500)(void) {
if (!(Recgclock_11012 == 0)) goto LA2;
Collectct_12005(&Gch_11010);
LA2: ;
}
static N_INLINE(void, Unlock_11201)(TY10990* Gch_11204) {
}
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508) {
void* Result_13509;
TY10602* Res_13524;
void* LOC1;
NI L_13602;
TY10602** D_13603;
NI I_13613;
NI HEX3Atmp_21093;
NI HEX3Atmp_21094;
NI Res_21096;
TY10602* C_13614;
Result_13509 = 0;
Lock_11013(&Gch_11010);
Checkcollection_13500();
Res_13524 = 0;
LOC1 = Rawalloc_9595(&Allocator_8729, (NI64)(Size_13508 + ((NI)sizeof(TY10602))));
Res_13524 = ((TY10602*) (LOC1));
zeroMem(((void*) (Res_13524)), (NI64)(Size_13508 + ((NI)sizeof(TY10602))));
(*Res_13524).Typ = Typ_13507;
(*Res_13524).Refcount = 4;
L_13602 = 0;
L_13602 = Gch_11010.Zct.Len;
D_13603 = 0;
D_13603 = Gch_11010.Zct.D;
I_13613 = 0;
HEX3Atmp_21093 = 0;
HEX3Atmp_21094 = 0;
HEX3Atmp_21093 = (NI64)(L_13602 - 1);
HEX3Atmp_21094 = ((0 >= (NI64)(L_13602 - 8)) ? 0 : (NI64)(L_13602 - 8));
Res_21096 = 0;
Res_21096 = HEX3Atmp_21093;
while (1) {
if (!(HEX3Atmp_21094 <= Res_21096)) goto LA3;
I_13613 = Res_21096;
C_13614 = 0;
C_13614 = D_13603[(I_13613)-0];
if (!((NU64)(8) <= (NU64)((*C_13614).Refcount))) goto LA5;
(*C_13614).Refcount = (NI64)((*C_13614).Refcount & -8);
D_13603[(I_13613)-0] = Res_13524;
goto LA2;
LA5: ;
Res_21096 -= 1;
} LA3: ;
Add_10658(&Gch_11010.Zct, Res_13524);
LA2: ;
Unlock_11201(&Gch_11010);
Result_13509 = Celltousr_11408(Res_13524);
return Result_13509;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3001(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3006(&(*C_13022).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487) {
NimStringDesc* Result_18488;
NI S_18489;
void* LOC4;
Result_18488 = 0;
S_18489 = 0;
S_18489 = Space_18487;
if (!(S_18489 < 8)) goto LA2;
S_18489 = 7;
LA2: ;
LOC4 = newObj(&Strdesc_3017, (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(S_18489 + 1) * 1)));
Result_18488 = ((NimStringDesc*) (LOC4));
(*Result_18488).Sup.space = S_18489;
return Result_18488;
}
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508) {
NimStringDesc* Result_18509;
Result_18509 = 0;
if (!(Src_18508 == NIM_NIL)) goto LA2;
Result_18509 = NIM_NIL;
goto BeforeRet;
LA2: ;
Result_18509 = rawNewString((*Src_18508).Sup.space);
(*Result_18509).Sup.len = (*Src_18508).Sup.len;
memcpy(((NCSTRING) ((*Result_18509).data)), ((NCSTRING) ((*Src_18508).data)), ((NI32) ((NI64)((NI64)((*Src_18508).Sup.len + 1) * 1))));
BeforeRet: ;
return Result_18509;
}
N_NIMCALL(void, Gcdisable_2663)(void) {
NI LOC1;
LOC1 = Atomicinc_3001(&Recgclock_11012, 1);
}
static N_INLINE(void, Incref_13002)(TY10602* C_13004) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3001(&(*C_13004).Refcount, 8);
LOC3 = Canbecycleroot_11416(C_13004);
if (!LOC3) goto LA4;
Rtladdcycleroot_12052(C_13004);
LA4: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015) {
TY10602* LOC4;
TY10602* LOC8;
if (!!((Src_13015 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11412(Src_13015);
Incref_13002(LOC4);
LA2: ;
if (!!(((*Dest_13014) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412((*Dest_13014));
Decref_12801(LOC8);
LA6: ;
(*Dest_13014) = Src_13015;
}
static N_INLINE(void, pushCurrentException)(E_Base* E_4641) {
asgnRef((void**) &(*E_4641).parent, Currexception_4632);
asgnRef((void**) &Currexception_4632, E_4641);
}
static N_INLINE(NI, Resize_18401)(NI Old_18403) {
NI Result_18404;
Result_18404 = 0;
if (!(Old_18403 <= 0)) goto LA2;
Result_18404 = 4;
goto BeforeRet;
goto LA1;
LA2: ;
if (!(Old_18403 < 65536)) goto LA4;
Result_18404 = (NI64)(Old_18403 * 2);
goto BeforeRet;
goto LA1;
LA4: ;
Result_18404 = (NI64)((NI64)(Old_18403 * 3) / 2);
goto BeforeRet;
LA1: ;
BeforeRet: ;
return Result_18404;
}
N_NIMCALL(void*, Growobj_14007)(void* Old_14009, NI Newsize_14010) {
void* Result_14011;
TY10602* Ol_14013;
TY10602* Res_14038;
void* LOC1;
NI Elemsize_14039;
NI Oldsize_14049;
NI J_14054;
TY10602** D_14055;
NIM_BOOL LOC13;
Result_14011 = 0;
Lock_11013(&Gch_11010);
Checkcollection_13500();
Ol_14013 = 0;
Ol_14013 = Usrtocell_11412(Old_14009);
Res_14038 = 0;
LOC1 = Rawalloc_9595(&Allocator_8729, (NI64)(Newsize_14010 + ((NI)sizeof(TY10602))));
Res_14038 = ((TY10602*) (LOC1));
Elemsize_14039 = 0;
Elemsize_14039 = 1;
if (!!(((*(*Ol_14013).Typ).kind == ((NU8) 28)))) goto LA3;
Elemsize_14039 = (*(*(*Ol_14013).Typ).base).size;
LA3: ;
Oldsize_14049 = 0;
Oldsize_14049 = (NI64)((NI64)((*((TGenericSeq*) (Old_14009))).len * Elemsize_14039) + 16);
memcpy(((void*) (Res_14038)), ((void*) (Ol_14013)), (NI64)(Oldsize_14049 + ((NI)sizeof(TY10602))));
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Res_14038))) + (NU64)(Oldsize_14049))) + (NU64)(((NI)sizeof(TY10602)))))), (NI64)(Newsize_14010 - Oldsize_14049));
if (!((NI64)((*Ol_14013).Refcount & 7) == 4)) goto LA6;
J_14054 = 0;
J_14054 = (NI64)(Gch_11010.Zct.Len - 1);
D_14055 = 0;
D_14055 = Gch_11010.Zct.D;
while (1) {
if (!(0 <= J_14054)) goto LA8;
if (!(D_14055[(J_14054)-0] == Ol_14013)) goto LA10;
D_14055[(J_14054)-0] = Res_14038;
goto LA8;
LA10: ;
J_14054 -= 1;
} LA8: ;
LA6: ;
LOC13 = Canbecycleroot_11416(Ol_14013);
if (!LOC13) goto LA14;
Excl_10881(&Gch_11010.Cycleroots, Ol_14013);
LA14: ;
Rawdealloc_9864(&Allocator_8729, ((void*) (Ol_14013)));
Unlock_11201(&Gch_11010);
Result_14011 = Celltousr_11408(Res_14038);
return Result_14011;
}
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18582, NI Addlen_18583) {
NimStringDesc* Result_18584;
NI Sp_18589;
NI LOC4;
void* LOC5;
Result_18584 = 0;
if (!((NI64)((NI64)((*Dest_18582).Sup.len + Addlen_18583) + 1) <= (*Dest_18582).Sup.space)) goto LA2;
Result_18584 = Dest_18582;
goto LA1;
LA2: ;
Sp_18589 = 0;
LOC4 = Resize_18401((*Dest_18582).Sup.space);
Sp_18589 = ((LOC4 >= (NI64)((NI64)((*Dest_18582).Sup.len + Addlen_18583) + 1)) ? LOC4 : (NI64)((NI64)((*Dest_18582).Sup.len + Addlen_18583) + 1));
LOC5 = Growobj_14007(((void*) (Dest_18582)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(Sp_18589 + 1) * 1)));
Result_18584 = ((NimStringDesc*) (LOC5));
(*Result_18584).Sup.space = Sp_18589;
LA1: ;
return Result_18584;
}
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_18625, NI Newlen_18626) {
NimStringDesc* Result_18627;
NI N_18630;
Result_18627 = 0;
N_18630 = 0;
N_18630 = ((Newlen_18626 >= 0) ? Newlen_18626 : 0);
if (!(N_18630 <= (*S_18625).Sup.space)) goto LA2;
Result_18627 = S_18625;
goto LA1;
LA2: ;
Result_18627 = resizeString(S_18625, N_18630);
LA1: ;
(*Result_18627).Sup.len = N_18630;
(*Result_18627).data[(N_18630)-0] = 0;
return Result_18627;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593) {
memcpy(((NCSTRING) (&(*Dest_18592).data[((*Dest_18592).Sup.len)-0])), ((NCSTRING) ((*Src_18593).data)), ((NI32) ((NI64)((NI64)((*Src_18593).Sup.len + 1) * 1))));
(*Dest_18592).Sup.len += (*Src_18593).Sup.len;
}
N_NIMCALL(void, Rawwritestacktrace_4999)(NimStringDesc** S_5002) {
(*S_5002) = resizeString((*S_5002), 28);
appendString((*S_5002), ((NimStringDesc*) &TMP21309));
(*S_5002) = resizeString((*S_5002), Stacktracenewline_4432->Sup.len + 0);
appendString((*S_5002), Stacktracenewline_4432);
}
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_18499, NI Len_18500) {
NimStringDesc* Result_18501;
Result_18501 = 0;
Result_18501 = rawNewString(Len_18500);
(*Result_18501).Sup.len = Len_18500;
memcpy(((NCSTRING) ((*Result_18501).data)), Str_18499, ((NI32) ((NI64)((NI64)(Len_18500 + 1) * 1))));
(*Result_18501).data[(Len_18500)-0] = 0;
return Result_18501;
}
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_18504) {
NimStringDesc* Result_18505;
NI LOC1;
Result_18505 = 0;
LOC1 = strlen(Str_18504);
Result_18505 = toNimStr(Str_18504, LOC1);
goto BeforeRet;
BeforeRet: ;
return Result_18505;
}
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673) {
fputs(C_3673, F_3672);
}
N_NIMCALL(void, Writetostderr_4433)(NCSTRING Msg_4435) {
Write_3670(stdout, Msg_4435);
}
static N_INLINE(void, Quitordebug_5201)(void) {
exit(1);
}
N_NIMCALL(void, Gcenable_2665)(void) {
NI LOC4;
if (!(0 < Recgclock_11012)) goto LA2;
LOC4 = Atomicdec_3006(&Recgclock_11012, 1);
LA2: ;
}
N_NIMCALL(void, raiseException)(E_Base* E_5404, NCSTRING Ename_5405) {
NIM_BOOL LOC8;
NimStringDesc* LOC12;
Gcdisable_2663();
(*E_5404).name = Ename_5405;
if (!!((excHandler == NIM_NIL))) goto LA2;
pushCurrentException(E_5404);
longjmp((*excHandler).context, ((NI32) 1));
goto LA1;
LA2: ;
if (!!(Buf_4810 == 0)) goto LA5;
Buf_4810 = setLengthStr(Buf_4810, 0);
Rawwritestacktrace_4999(&Buf_4810);
LOC8 = !(((*E_5404).message == NIM_NIL));
if (!(LOC8)) goto LA9;
LOC8 = !(((NU8)((*E_5404).message->data[0]) == (NU8)(0)));
LA9: ;
if (!LOC8) goto LA10;
Buf_4810 = resizeString(Buf_4810, 28);
appendString(Buf_4810, ((NimStringDesc*) &TMP21310));
Buf_4810 = resizeString(Buf_4810, (*E_5404).message->Sup.len + 0);
appendString(Buf_4810, (*E_5404).message);
goto LA7;
LA10: ;
Buf_4810 = resizeString(Buf_4810, 26);
appendString(Buf_4810, ((NimStringDesc*) &TMP21311));
LA7: ;
Buf_4810 = resizeString(Buf_4810, 2);
appendString(Buf_4810, ((NimStringDesc*) &TMP21312));
LOC12 = 0;
LOC12 = cstrToNimstr(Ename_5405);
Buf_4810 = resizeString(Buf_4810, LOC12->Sup.len + 0);
appendString(Buf_4810, LOC12);
Buf_4810 = resizeString(Buf_4810, 3);
appendString(Buf_4810, ((NimStringDesc*) &TMP21313));
Writetostderr_4433(Buf_4810->data);
goto LA4;
LA5: ;
Writetostderr_4433(Ename_5405);
LA4: ;
Quitordebug_5201();
LA1: ;
Gcenable_2665();
}
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661) {
NI LOC2;
TY420* E_4263;
LOC2 = Writebuffer_3733(F_3660, ((void*) (S_3661->data)), S_3661->Sup.len);
if (!!((LOC2 == S_3661->Sup.len))) goto LA3;
E_4263 = 0;
E_4263 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4263).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4263).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP21308)));
raiseException((E_Base*)E_4263, "EIO");
LA3: ;
}
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094) {
Write_3658(stdout, X_4094);
}
static N_INLINE(void, rawEchoNL)(void) {
Write_3658(stdout, ((NimStringDesc*) &TMP21314));
}
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824) {
rawEcho(Errormsg_2824);
rawEchoNL();
exit(1);
}
N_NIMCALL(void, Raiseoutofmem_8259)(void) {
if (!(Goutofmem_8258 == NIM_NIL)) goto LA2;
Quit_2822(((NimStringDesc*) &TMP21315));
LA2: ;
asgnRefNoCycle((void**) &(*Goutofmem_8258).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP21316)));
raiseException((E_Base*)Goutofmem_8258, "EOutOfMemory");
}
static N_INLINE(void*, Osallocpages_8289)(NI Size_8291) {
void* Result_8292;
Result_8292 = 0;
Result_8292 = VirtualAlloc(NIM_NIL, Size_8291, ((NI32) 12288), ((NI32) 4));
if (!(Result_8292 == NIM_NIL)) goto LA2;
Raiseoutofmem_8259();
LA2: ;
return Result_8292;
}
static N_INLINE(void, Inccurrmem_8686)(TY8674* A_8689, NI Bytes_8690) {
(*A_8689).Currmem += Bytes_8690;
}
N_NIMCALL(void*, Llalloc_8730)(TY8674* A_8733, NI Size_8734) {
void* Result_8735;
NIM_BOOL LOC2;
NI Request_8749;
void* LOC6;
Result_8735 = 0;
LOC2 = ((*A_8733).Llmem == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = ((*(*A_8733).Llmem).Size < Size_8734);
LA3: ;
if (!LOC2) goto LA4;
Request_8749 = 0;
Request_8749 = Roundup_8656((NI64)(Size_8734 + ((NI)sizeof(TY8672))), 4096);
LOC6 = Osallocpages_8289(Request_8749);
(*A_8733).Llmem = ((TY8672*) (LOC6));
Inccurrmem_8686(A_8733, Request_8749);
(*(*A_8733).Llmem).Size = (NI64)(Request_8749 - ((NI)sizeof(TY8672)));
(*(*A_8733).Llmem).Acc = ((NI)sizeof(TY8672));
LA4: ;
Result_8735 = ((void*) ((NI64)(((NI) ((*A_8733).Llmem)) + (*(*A_8733).Llmem).Acc)));
(*(*A_8733).Llmem).Size -= Size_8734;
(*(*A_8733).Llmem).Acc += Size_8734;
zeroMem(Result_8735, Size_8734);
return Result_8735;
}
N_NIMCALL(TY8607*, Intsetput_8793)(TY8611* T_8796, NI Key_8797) {
TY8607* Result_8798;
void* LOC4;
Result_8798 = 0;
Result_8798 = Intsetget_8774(&(*T_8796), Key_8797);
if (!(Result_8798 == NIM_NIL)) goto LA2;
LOC4 = Llalloc_8730(&Allocator_8729, ((NI)sizeof(TY8607)));
Result_8798 = ((TY8607*) (LOC4));
(*Result_8798).Next = (*T_8796).Data[((NI64)(Key_8797 & 1023))-0];
(*T_8796).Data[((NI64)(Key_8797 & 1023))-0] = Result_8798;
(*Result_8798).Key = Key_8797;
LA2: ;
return Result_8798;
}
N_NIMCALL(void, Incl_8831)(TY8611* S_8834, NI Key_8835) {
TY8607* T_8836;
NI U_8837;
T_8836 = 0;
T_8836 = Intsetput_8793(S_8834, (NI64)((NU64)(Key_8835) >> (NU64)(9)));
U_8837 = 0;
U_8837 = (NI64)(Key_8835 & 511);
(*T_8836).Bits[((NI64)((NU64)(U_8837) >> (NU64)(6)))-0] = (NI64)((*T_8836).Bits[((NI64)((NU64)(U_8837) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_8837 & 63))));
}
N_NIMCALL(void, Splitchunk_9466)(TY8674* A_9469, TY8634* C_9470, NI Size_9471) {
TY8634* Rest_9472;
NI LOC1;
Rest_9472 = 0;
Rest_9472 = ((TY8634*) ((NI64)((NU64)(((NI) (C_9470))) + (NU64)(Size_9471))));
(*Rest_9472).Sup.Size = (NI64)((*C_9470).Sup.Size - Size_9471);
(*Rest_9472).Sup.Used = NIM_FALSE;
(*Rest_9472).Next = NIM_NIL;
(*Rest_9472).Prev = NIM_NIL;
(*Rest_9472).Sup.Prevsize = Size_9471;
Updateprevsize_9011(A_9469, C_9470, (*Rest_9472).Sup.Size);
(*C_9470).Sup.Size = Size_9471;
LOC1 = Pageindex_8877(&Rest_9472->Sup);
Incl_8831(&(*A_9469).Chunkstarts, LOC1);
Listadd_9407(&(*A_9469).Freechunkslist, Rest_9472);
}
N_NIMCALL(TY8634*, Requestoschunks_8892)(TY8674* A_8895, NI Size_8896) {
TY8634* Result_8897;
void* LOC1;
NI Nxt_8912;
TY8630* Next_8915;
NI LOC3;
NIM_BOOL LOC4;
NI Prv_8918;
TY8630* Prev_8921;
NIM_BOOL LOC8;
NI LOC9;
Result_8897 = 0;
Inccurrmem_8686(A_8895, Size_8896);
(*A_8895).Freemem += Size_8896;
LOC1 = Osallocpages_8289(Size_8896);
Result_8897 = ((TY8634*) (LOC1));
(*Result_8897).Next = NIM_NIL;
(*Result_8897).Prev = NIM_NIL;
(*Result_8897).Sup.Used = NIM_FALSE;
(*Result_8897).Sup.Size = Size_8896;
Nxt_8912 = 0;
Nxt_8912 = (NI64)((NU64)(((NI) (Result_8897))) + (NU64)(Size_8896));
Next_8915 = 0;
Next_8915 = ((TY8630*) (Nxt_8912));
LOC3 = Pageindex_8877(Next_8915);
LOC4 = Contains_8811(&(*A_8895).Chunkstarts, LOC3);
if (!LOC4) goto LA5;
(*Next_8915).Prevsize = Size_8896;
LA5: ;
Prv_8918 = 0;
Prv_8918 = (NI64)((NU64)(((NI) (Result_8897))) - (NU64)(Lastsize_8891));
Prev_8921 = 0;
Prev_8921 = ((TY8630*) (Prv_8918));
LOC9 = Pageindex_8877(Prev_8921);
LOC8 = Contains_8811(&(*A_8895).Chunkstarts, LOC9);
if (!(LOC8)) goto LA10;
LOC8 = ((*Prev_8921).Size == Lastsize_8891);
LA10: ;
if (!LOC8) goto LA11;
(*Result_8897).Sup.Prevsize = Lastsize_8891;
goto LA7;
LA11: ;
(*Result_8897).Sup.Prevsize = 0;
LA7: ;
Lastsize_8891 = Size_8896;
return Result_8897;
}
N_NIMCALL(TY8634*, Getbigchunk_9492)(TY8674* A_9495, NI Size_9496) {
TY8634* Result_9497;
NI LOC11;
Result_9497 = 0;
Result_9497 = (*A_9495).Freechunkslist;
while (1) {
if (!!((Result_9497 == NIM_NIL))) goto LA2;
if (!((*Result_9497).Sup.Size == Size_9496)) goto LA4;
Listremove_9046(&(*A_9495).Freechunkslist, Result_9497);
goto LA1;
goto LA3;
LA4: ;
if (!(Size_9496 < (*Result_9497).Sup.Size)) goto LA6;
Listremove_9046(&(*A_9495).Freechunkslist, Result_9497);
Splitchunk_9466(A_9495, Result_9497, Size_9496);
goto LA1;
goto LA3;
LA6: ;
LA3: ;
Result_9497 = (*Result_9497).Next;
} LA2: ;
if (!(Size_9496 < 524288)) goto LA9;
Result_9497 = Requestoschunks_8892(A_9495, 524288);
Splitchunk_9466(A_9495, Result_9497, Size_9496);
goto LA8;
LA9: ;
Result_9497 = Requestoschunks_8892(A_9495, Size_9496);
LA8: ;
LA1: ;
(*Result_9497).Sup.Prevsize = 0;
(*Result_9497).Sup.Used = NIM_TRUE;
LOC11 = Pageindex_8877(&Result_9497->Sup);
Incl_8831(&(*A_9495).Chunkstarts, LOC11);
(*A_9495).Freemem -= Size_9496;
return Result_9497;
}
N_NIMCALL(TY8632*, Getsmallchunk_9562)(TY8674* A_9565) {
TY8632* Result_9566;
TY8634* Res_9567;
Result_9566 = 0;
Res_9567 = 0;
Res_9567 = Getbigchunk_9492(A_9565, 4096);
Result_9566 = ((TY8632*) (Res_9567));
return Result_9566;
}
N_NIMCALL(void*, Rawalloc_9595)(TY8674* A_9598, NI Requestedsize_9599) {
void* Result_9600;
NI Size_9605;
NI S_9608;
TY8632* C_9609;
TY8634* C_9836;
Result_9600 = 0;
Size_9605 = 0;
Size_9605 = Roundup_8656(Requestedsize_9599, 8);
if (!(Size_9605 <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)))) goto LA2;
S_9608 = 0;
S_9608 = (NI64)(Size_9605 / 8);
C_9609 = 0;
C_9609 = (*A_9598).Freesmallchunks[(S_9608)-0];
if (!(C_9609 == NIM_NIL)) goto LA5;
C_9609 = Getsmallchunk_9562(A_9598);
(*C_9609).Freelist = NIM_NIL;
(*C_9609).Sup.Size = Size_9605;
(*C_9609).Acc = Size_9605;
(*C_9609).Free = (NI64)((NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)) - Size_9605);
(*C_9609).Next = NIM_NIL;
(*C_9609).Prev = NIM_NIL;
Listadd_9626(&(*A_9598).Freesmallchunks[(S_9608)-0], C_9609);
Result_9600 = ((void*) (&(*C_9609).Data));
goto LA4;
LA5: ;
if (!((*C_9609).Freelist == NIM_NIL)) goto LA8;
Result_9600 = ((void*) ((NI64)((NU64)(((NI) (&(*C_9609).Data))) + (NU64)((*C_9609).Acc))));
(*C_9609).Acc += Size_9605;
goto LA7;
LA8: ;
Result_9600 = ((void*) ((*C_9609).Freelist));
(*C_9609).Freelist = (*(*C_9609).Freelist).Next;
LA7: ;
(*C_9609).Free -= Size_9605;
LA4: ;
if (!((*C_9609).Free < Size_9605)) goto LA11;
Listremove_9768(&(*A_9598).Freesmallchunks[(S_9608)-0], C_9609);
LA11: ;
goto LA1;
LA2: ;
Size_9605 = Roundup_8656((NI64)(Requestedsize_9599 + (NI64)(((NI)sizeof(TY8634)) - 8)), 4096);
C_9836 = 0;
C_9836 = Getbigchunk_9492(A_9598, Size_9605);
Result_9600 = ((void*) (&(*C_9836).Data));
LA1: ;
return Result_9600;
}
N_NOCONV(void*, Alloc_1950)(NI Size_1952) {
void* Result_10218;
Result_10218 = 0;
Result_10218 = Rawalloc_9595(&Allocator_8729, (NI64)(Size_1952 + ((NI)sizeof(TY8622))));
(*((TY8622*) (Result_10218))).Zerofield = 1;
Result_10218 = ((void*) ((NI64)((NU64)(((NI) (Result_10218))) + (NU64)(((NI)sizeof(TY8622))))));
return Result_10218;
}
N_NOCONV(void*, Alloc0_1953)(NI Size_1955) {
void* Result_10224;
Result_10224 = 0;
Result_10224 = Alloc_1950(Size_1955);
zeroMem(Result_10224, Size_1955);
return Result_10224;
}
N_NIMCALL(void, Init_10678)(TY10618* S_10681, NI Cap_10682) {
void* LOC1;
(*S_10681).Len = 0;
(*S_10681).Cap = Cap_10682;
LOC1 = Alloc0_1953((NI64)(Cap_10682 * 8));
(*S_10681).D = ((TY10602**) (LOC1));
}
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611) {
void* Result_7294;
void* LOC1;
Result_7294 = 0;
LOC1 = LoadLibraryA(Path_1611->data);
Result_7294 = ((void*) (LOC1));
return Result_7294;
}
N_NIMCALL(void, Rawwrite_7264)(FILE* F_7266, NimStringDesc* S_7267) {
NI LOC1;
LOC1 = Writebuffer_3733(F_7266, ((void*) (S_7267->data)), S_7267->Sup.len);
}
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621) {
Rawwrite_7264(stdout, ((NimStringDesc*) &TMP21320));
Rawwrite_7264(stdout, Path_1621);
Rawwrite_7264(stdout, ((NimStringDesc*) &TMP21314));
exit(1);
}
N_NOINLINE(void, Procaddrerror_7273)(NCSTRING Name_7275) {
Rawwrite_7264(stdout, ((NimStringDesc*) &TMP21321));
Write_3670(stdout, Name_7275);
Rawwrite_7264(stdout, ((NimStringDesc*) &TMP21314));
exit(1);
}
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618) {
void* Result_7299;
Result_7299 = 0;
Result_7299 = GetProcAddress(((void*) (Lib_1617)), Name_1618);
if (!(Result_7299 == NIM_NIL)) goto LA2;
Procaddrerror_7273(Name_1618);
LA2: ;
return Result_7299;
}
N_NIMCALL(void, Initgc_3011)(void) {
Gch_11010.Stat.Stackscans = 0;
Gch_11010.Stat.Cyclecollections = 0;
Gch_11010.Stat.Maxthreshold = 0;
Gch_11010.Stat.Maxstacksize = 0;
Gch_11010.Stat.Maxstackcells = 0;
Gch_11010.Stat.Cycletablesize = 0;
Init_10678(&Gch_11010.Zct, 1024);
Init_10678(&Gch_11010.Tempstack, 1024);
Init_10688(&Gch_11010.Cycleroots);
Init_10678(&Gch_11010.Decstack, 1024);
Dl_8011(&Gch_11010.Cyclerootslock);
Dl_8011(&Gch_11010.Zctlock);
asgnRefNoCycle((void**) &Goutofmem_8258, (TY442*) newObj(NTI8262, sizeof(TY442)));
(*Goutofmem_8258).Sup.Sup.Sup.Sup.m_type = NTI442;
}
N_NOCONV(void, signalHandler)(NI32 Sig_5478) {
NI32 S_5479;
S_5479 = 0;
S_5479 = Sig_5478;
Gcdisable_2663();
Buf_4810 = setLengthStr(Buf_4810, 0);
Rawwritestacktrace_4999(&Buf_4810);
if (!(S_5479 == SIGINT)) goto LA2;
Buf_4810 = resizeString(Buf_4810, 32);
appendString(Buf_4810, ((NimStringDesc*) &TMP21327));
goto LA1;
LA2: ;
if (!(S_5479 == SIGSEGV)) goto LA4;
Buf_4810 = resizeString(Buf_4810, 62);
appendString(Buf_4810, ((NimStringDesc*) &TMP21328));
goto LA1;
LA4: ;
if (!(S_5479 == SIGABRT)) goto LA6;
if (!Dbgaborting_5475) goto LA9;
goto BeforeRet;
LA9: ;
Buf_4810 = resizeString(Buf_4810, 32);
appendString(Buf_4810, ((NimStringDesc*) &TMP21329));
goto LA1;
LA6: ;
if (!(S_5479 == SIGFPE)) goto LA11;
Buf_4810 = resizeString(Buf_4810, 27);
appendString(Buf_4810, ((NimStringDesc*) &TMP21330));
goto LA1;
LA11: ;
if (!(S_5479 == SIGILL)) goto LA13;
Buf_4810 = resizeString(Buf_4810, 28);
appendString(Buf_4810, ((NimStringDesc*) &TMP21331));
goto LA1;
LA13: ;
if (!(S_5479 == SIGSEGV)) goto LA15;
Buf_4810 = resizeString(Buf_4810, 61);
appendString(Buf_4810, ((NimStringDesc*) &TMP21332));
goto LA1;
LA15: ;
Buf_4810 = resizeString(Buf_4810, 16);
appendString(Buf_4810, ((NimStringDesc*) &TMP21333));
LA1: ;
Writetostderr_4433(Buf_4810->data);
Dbgaborting_5475 = NIM_TRUE;
Gcenable_2665();
exit(1);
BeforeRet: ;
}
N_NIMCALL(void, registerSignalHandler)(void) {
signal(SIGINT, signalHandler);
signal(SIGSEGV, signalHandler);
signal(SIGABRT, signalHandler);
signal(SIGFPE, signalHandler);
signal(SIGILL, signalHandler);
signal(SIGSEGV, signalHandler);
}
N_NIMCALL(NI, getRefcount)(void* P_11437) {
NI Result_11438;
TY10602* LOC1;
Result_11438 = 0;
LOC1 = Usrtocell_11412(P_11437);
Result_11438 = (NI64)((NU64)(((NI) ((*LOC1).Refcount))) >> (NU64)(3));
return Result_11438;
}
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_18495) {
NimStringDesc* Result_18496;
Result_18496 = 0;
Result_18496 = rawNewString(Len_18495);
(*Result_18496).Sup.len = Len_18495;
return Result_18496;
}
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_18543, NI Start_18544, NI Last_18545) {
NimStringDesc* Result_18546;
NI Start_18549;
NI Len_18552;
Result_18546 = 0;
Start_18549 = 0;
Start_18549 = ((Start_18544 >= 0) ? Start_18544 : 0);
Len_18552 = 0;
Len_18552 = (NI64)((NI64)(((Last_18545 <= (NI64)((*S_18543).Sup.len - 1)) ? Last_18545 : (NI64)((*S_18543).Sup.len - 1)) - Start_18549) + 1);
if (!(0 < Len_18552)) goto LA2;
Result_18546 = rawNewString(Len_18552);
(*Result_18546).Sup.len = Len_18552;
memcpy(((NCSTRING) ((*Result_18546).data)), ((NCSTRING) (&(*S_18543).data[(Start_18549)-0])), ((NI32) ((NI64)(Len_18552 * 1))));
(*Result_18546).data[(Len_18552)-0] = 0;
goto LA1;
LA2: ;
Result_18546 = mnewString(0);
LA1: ;
return Result_18546;
}
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_18558, NI Start_18559) {
NimStringDesc* Result_18560;
Result_18560 = 0;
Result_18560 = copyStrLast(S_18558, Start_18559, (NI64)((*S_18558).Sup.len - 1));
goto BeforeRet;
BeforeRet: ;
return Result_18560;
}
N_NOINLINE(void, raiseOverflow)(void) {
EOverflow* E_5892;
E_5892 = 0;
E_5892 = (EOverflow*) newObj(NTI5891, sizeof(EOverflow));
(*E_5892).Sup.Sup.Sup.Sup.m_type = NTI432;
asgnRefNoCycle((void**) &(*E_5892).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP35239)));
raiseException((E_Base*)E_5892, "EOverflow");
}
static N_INLINE(NI, addInt)(NI A_6003, NI B_6004) {
NI Result_6005;
NIM_BOOL LOC2;
Result_6005 = 0;
Result_6005 = (NI64)((NU64)(A_6003) + (NU64)(B_6004));
LOC2 = (0 <= (NI64)(Result_6005 ^ A_6003));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_6005 ^ B_6004));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_6005;
}
N_NIMCALL(NI, mulInt)(NI A_7003, NI B_7004) {
NI Result_7005;
NF Resasfloat_7006;
NF Floatprod_7007;
Result_7005 = 0;
Resasfloat_7006 = 0;
Floatprod_7007 = 0;
Result_7005 = (NI64)((NU64)(A_7003) * (NU64)(B_7004));
Floatprod_7007 = (((double) (A_7003)) * ((double) (B_7004)));
Resasfloat_7006 = ((double) (Result_7005));
if (!(Resasfloat_7006 == Floatprod_7007)) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((Resasfloat_7006 - Floatprod_7007) > 0? ((Resasfloat_7006 - Floatprod_7007)) : -((Resasfloat_7006 - Floatprod_7007)))) <= (Floatprod_7007 > 0? (Floatprod_7007) : -(Floatprod_7007)))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_7005;
}
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005) {
void* Result_14006;
NI LOC1;
NI LOC2;
Result_14006 = 0;
LOC1 = mulInt(Len_14005, (*(*Typ_14004).base).size);
LOC2 = addInt(LOC1, 16);
Result_14006 = newObj(Typ_14004, LOC2);
(*((TGenericSeq*) (Result_14006))).len = Len_14005;
(*((TGenericSeq*) (Result_14006))).space = Len_14005;
return Result_14006;
}
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324) {
NI Result_3319;
NI32 LOC1;
Result_3319 = 0;
LOC1 = strcmp(X_1323->data, Y_1324->data);
Result_3319 = ((NI) (LOC1));
goto BeforeRet;
BeforeRet: ;
return Result_3319;
}
N_NOINLINE(NIM_BOOL, Isonstack_12009)(void* P_12011) {
NIM_BOOL Result_16609;
void* volatile Stacktop_16610;
NI B_16611;
NI A_16613;
NI X_16614;
NIM_BOOL LOC1;
Result_16609 = 0;
Stacktop_16610 = 0;
B_16611 = 0;
B_16611 = ((NI) (Stackbottom_11009));
A_16613 = 0;
A_16613 = ((NI) (&Stacktop_16610));
X_16614 = 0;
X_16614 = ((NI) (P_12011));
LOC1 = ((NU64)(A_16613) <= (NU64)(X_16614));
if (!(LOC1)) goto LA2;
LOC1 = ((NU64)(X_16614) <= (NU64)(B_16611));
LA2: ;
Result_16609 = LOC1;
return Result_16609;
}
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027) {
NIM_BOOL LOC2;
TY10602* LOC8;
TY10602* LOC12;
LOC2 = Isonstack_12009(((void*) (Dest_13026)));
if (!!(LOC2)) goto LA3;
if (!!((Src_13027 == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412(Src_13027);
Incref_13002(LOC8);
LA6: ;
if (!!(((*Dest_13026) == NIM_NIL))) goto LA10;
LOC12 = Usrtocell_11412((*Dest_13026));
Decref_12801(LOC12);
LA10: ;
LA3: ;
(*Dest_13026) = Src_13027;
}
N_NIMCALL(TNimType*, extGetCellType)(void* C_11433) {
TNimType* Result_11434;
TY10602* LOC1;
Result_11434 = 0;
LOC1 = Usrtocell_11412(C_11433);
Result_11434 = (*LOC1).Typ;
return Result_11434;
}
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805) {
TGenericSeq* Result_18806;
NI LOC4;
void* LOC5;
NI I_18820;
NI HEX3Atmp_21205;
NI Res_21207;
TNimType* LOC9;
Result_18806 = 0;
Result_18806 = Seq_18803;
if (!((*Result_18806).space < Newlen_18805)) goto LA2;
LOC4 = Resize_18401((*Result_18806).space);
(*Result_18806).space = ((LOC4 >= Newlen_18805) ? LOC4 : Newlen_18805);
LOC5 = Growobj_14007(((void*) (Result_18806)), (NI64)((NI64)(Elemsize_18804 * (*Result_18806).space) + 16));
Result_18806 = ((TGenericSeq*) (LOC5));
goto LA1;
LA2: ;
if (!(Newlen_18805 < (*Result_18806).len)) goto LA6;
I_18820 = 0;
HEX3Atmp_21205 = 0;
HEX3Atmp_21205 = (NI64)((*Result_18806).len - 1);
Res_21207 = 0;
Res_21207 = Newlen_18805;
while (1) {
if (!(Res_21207 <= HEX3Atmp_21205)) goto LA8;
I_18820 = Res_21207;
LOC9 = extGetCellType(((void*) (Result_18806)));
Forallchildrenaux_12020(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_18806))) + (NU64)(16))) + (NU64)((NI64)((NU64)(I_18820) * (NU64)(Elemsize_18804)))))), (*LOC9).base, ((NU8) 0));
Res_21207 += 1;
} LA8: ;
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_18806))) + (NU64)(16))) + (NU64)((NI64)((NU64)(Newlen_18805) * (NU64)(Elemsize_18804)))))), (NI64)((NU64)((NI64)((NU64)((*Result_18806).len) - (NU64)(Newlen_18805))) * (NU64)(Elemsize_18804)));
goto LA1;
LA6: ;
LA1: ;
(*Result_18806).len = Newlen_18805;
return Result_18806;
}
N_NIMCALL(void, Objectinitaux_19464)(void* Dest_19466, TNimNode* N_19468) {
NI D_19469;
NI I_19477;
NI HEX3Atmp_21250;
NI Res_21252;
TNimNode* M_19478;
D_19469 = 0;
D_19469 = ((NI) (Dest_19466));
switch ((*N_19468).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
objectInit(((void*) ((NI64)((NU64)(D_19469) + (NU64)((*N_19468).offset)))), (*N_19468).typ);
break;
case ((NU8) 2):
I_19477 = 0;
HEX3Atmp_21250 = 0;
HEX3Atmp_21250 = (NI64)((*N_19468).len - 1);
Res_21252 = 0;
Res_21252 = 0;
while (1) {
if (!(Res_21252 <= HEX3Atmp_21250)) goto LA1;
I_19477 = Res_21252;
Objectinitaux_19464(Dest_19466, (*N_19468).sons[(I_19477)-0]);
Res_21252 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_19478 = 0;
M_19478 = Selectbranch_7463(Dest_19466, N_19468);
if (!!((M_19478 == NIM_NIL))) goto LA3;
Objectinitaux_19464(Dest_19466, M_19478);
LA3: ;
break;
}
}
N_NIMCALL(void, objectInit)(void* Dest_19462, TNimType* Typ_19463) {
NI D_19494;
TNimType** Pint_19496;
NI I_19504;
NI HEX3Atmp_21256;
NI Res_21258;
D_19494 = 0;
D_19494 = ((NI) (Dest_19462));
switch ((*Typ_19463).kind) {
case ((NU8) 17):
Pint_19496 = 0;
Pint_19496 = ((TNimType**) (Dest_19462));
(*Pint_19496) = Typ_19463;
Objectinitaux_19464(Dest_19462, (*Typ_19463).node);
break;
case ((NU8) 18):
case ((NU8) 40):
Objectinitaux_19464(Dest_19462, (*Typ_19463).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_19504 = 0;
HEX3Atmp_21256 = 0;
HEX3Atmp_21256 = (NI64)((NI64)((*Typ_19463).size / (*(*Typ_19463).base).size) - 1);
Res_21258 = 0;
Res_21258 = 0;
while (1) {
if (!(Res_21258 <= HEX3Atmp_21256)) goto LA1;
I_19504 = Res_21258;
objectInit(((void*) ((NI64)((NU64)(D_19494) + (NU64)((NI64)(I_19504 * (*(*Typ_19463).base).size))))), (*Typ_19463).base);
Res_21258 += 1;
} LA1: ;
break;
default:
break;
}
}
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604) {
NimStringDesc* Result_18565;
void* LOC4;
Result_18565 = 0;
Result_18565 = S_1603;
if (!((*Result_18565).Sup.space <= (*Result_18565).Sup.len)) goto LA2;
(*Result_18565).Sup.space = Resize_18401((*Result_18565).Sup.space);
LOC4 = Growobj_14007(((void*) (Result_18565)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)((*Result_18565).Sup.space + 1) * 1)));
Result_18565 = ((NimStringDesc*) (LOC4));
LA2: ;
(*Result_18565).data[((*Result_18565).Sup.len)-0] = C_1604;
(*Result_18565).data[((NI64)((*Result_18565).Sup.len + 1))-0] = 0;
(*Result_18565).Sup.len += 1;
return Result_18565;
}
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19203) {
NimStringDesc* Result_19204;
NI I_19205;
NI Y_19206;
NI D_19207;
NI J_19248;
NI HEX3Atmp_21212;
NI Res_21214;
NIM_CHAR LOC9;
Result_19204 = 0;
Result_19204 = mnewString(32);
I_19205 = 0;
I_19205 = 0;
Y_19206 = 0;
Y_19206 = X_19203;
while (1) {
D_19207 = 0;
D_19207 = (NI64)(Y_19206 / 10);
Result_19204->data[I_19205] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_19206 - (NI64)(D_19207 * 10))))) + 48)))));
I_19205 += 1;
Y_19206 = D_19207;
if (!(Y_19206 == 0)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
if (!(X_19203 < 0)) goto LA6;
Result_19204->data[I_19205] = 45;
I_19205 += 1;
LA6: ;
Result_19204 = setLengthStr(Result_19204, I_19205);
J_19248 = 0;
HEX3Atmp_21212 = 0;
HEX3Atmp_21212 = (NI64)((NI64)(I_19205 / 2) - 1);
Res_21214 = 0;
Res_21214 = 0;
while (1) {
if (!(Res_21214 <= HEX3Atmp_21212)) goto LA8;
J_19248 = Res_21214;
LOC9 = Result_19204->data[J_19248];
Result_19204->data[J_19248] = Result_19204->data[(NI64)((NI64)(I_19205 - J_19248) - 1)];
Result_19204->data[(NI64)((NI64)(I_19205 - J_19248) - 1)] = LOC9;
Res_21214 += 1;
} LA8: ;
return Result_19204;
}
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18635, NI Elemsize_18636) {
TGenericSeq* Result_18637;
void* LOC4;
Result_18637 = 0;
Result_18637 = Seq_18635;
if (!((*Result_18637).space <= (*Result_18637).len)) goto LA2;
(*Result_18637).space = Resize_18401((*Result_18637).space);
LOC4 = Growobj_14007(((void*) (Result_18637)), (NI64)((NI64)(Elemsize_18636 * (*Result_18637).space) + 16));
Result_18637 = ((TGenericSeq*) (LOC4));
LA2: ;
(*Result_18637).len += 1;
return Result_18637;
}
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623) {
NIM_BOOL Result_4112;
void* P_4113;
NI32 LOC5;
TY442* E_4119;
NI32 LOC11;
Result_4112 = 0;
P_4113 = 0;
P_4113 = fopen(Filename_3621->data, Formatopen_4101[(Mode_3622)-0]->data);
Result_4112 = !((P_4113 == NIM_NIL));
(*F_3620) = ((FILE*) (P_4113));
if (!(0 < Bufsize_3623)) goto LA2;
LOC5 = setvbuf((*F_3620), NIM_NIL, _IOFBF, ((NI32) (Bufsize_3623)));
if (!!((LOC5 == ((NI32) 0)))) goto LA6;
E_4119 = 0;
E_4119 = (TY442*) newObj(NTI8262, sizeof(TY442));
(*E_4119).Sup.Sup.Sup.Sup.m_type = NTI442;
asgnRefNoCycle((void**) &(*E_4119).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP21316)));
raiseException((E_Base*)E_4119, "EOutOfMemory");
LA6: ;
goto LA1;
LA2: ;
if (!(Bufsize_3623 == 0)) goto LA9;
LOC11 = setvbuf((*F_3620), NIM_NIL, _IONBF, ((NI32) 0));
goto LA1;
LA9: ;
LA1: ;
return Result_4112;
}
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718) {
NI Result_4199;
Result_4199 = 0;
Result_4199 = fread(Buffer_3717, 1, Len_3718, F_3716);
return Result_4199;
}
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793) {
NI32 C_3794;
(*Result_3793) = setLengthStr((*Result_3793), 0);
while (1) {
C_3794 = 0;
C_3794 = fgetc(F_3791);
if (!(C_3794 < ((NI32) 0))) goto LA3;
goto LA1;
LA3: ;
if (!(C_3794 == ((NI32) 10))) goto LA6;
goto LA1;
LA6: ;
if (!(C_3794 == ((NI32) 13))) goto LA9;
C_3794 = fgetc(F_3791);
if (!!((C_3794 == ((NI32) 10)))) goto LA12;
ungetc(C_3794, F_3791);
LA12: ;
goto LA1;
LA9: ;
(*Result_3793) = addChar((*Result_3793), ((NIM_CHAR) (((NI) (((NI) (C_3794)))))));
} LA1: ;
}
N_NIMCALL(NimStringDesc*, Readline_3679)(FILE* F_3681) {
NimStringDesc* Result_3806;
Result_3806 = 0;
Result_3806 = copyString(((NimStringDesc*) &TMP193659));
Rawreadline_3789(F_3681, &Result_3806);
return Result_3806;
}
N_NIMCALL(NI64, mulInt64)(NI64 A_5979, NI64 B_5980) {
NI64 Result_5981;
NF64 Resasfloat_5982;
NF64 Floatprod_5983;
Result_5981 = 0;
Resasfloat_5982 = 0;
Floatprod_5983 = 0;
Result_5981 = (NI64)((NU64)(A_5979) * (NU64)(B_5980));
Floatprod_5983 = ((double) (A_5979));
Floatprod_5983 = ((NF64) ((((NF) (Floatprod_5983)) * ((NF) (((double) (B_5980)))))));
Resasfloat_5982 = ((double) (Result_5981));
if (!(((NF) (Resasfloat_5982)) == ((NF) (Floatprod_5983)))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((((NF) (Resasfloat_5982)) - ((NF) (Floatprod_5983))) > 0? ((((NF) (Resasfloat_5982)) - ((NF) (Floatprod_5983)))) : -((((NF) (Resasfloat_5982)) - ((NF) (Floatprod_5983)))))) <= (((NF) (Floatprod_5983)) > 0? (((NF) (Floatprod_5983))) : -(((NF) (Floatprod_5983)))))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_5981;
}
N_NIMCALL(void, reraiseException)(void) {
TY452* E_5434;
if (!(Currexception_4632 == NIM_NIL)) goto LA2;
E_5434 = 0;
E_5434 = (TY452*) newObj(NTI5433, sizeof(TY452));
(*E_5434).Sup.Sup.Sup.m_type = NTI452;
asgnRefNoCycle((void**) &(*E_5434).Sup.Sup.message, copyString(((NimStringDesc*) &TMP193670)));
raiseException((E_Base*)E_5434, "ENoExceptionToReraise");
goto LA1;
LA2: ;
raiseException(Currexception_4632, (*Currexception_4632).name);
LA1: ;
}
N_NIMCALL(NI, Ptrsize_10233)(void* P_10235) {
NI Result_10236;
void* X_10237;
TY8630* LOC1;
Result_10236 = 0;
X_10237 = 0;
X_10237 = ((void*) ((NI64)((NU64)(((NI) (P_10235))) - (NU64)(((NI)sizeof(TY8622))))));
LOC1 = Pageaddr_8885(X_10237);
Result_10236 = (NI64)((*LOC1).Size - ((NI)sizeof(TY8622)));
return Result_10236;
}
N_NOCONV(void*, Realloc_1956)(void* P_1958, NI Newsize_1959) {
void* Result_10242;
NI LOC7;
Result_10242 = 0;
if (!(0 < Newsize_1959)) goto LA2;
Result_10242 = Alloc_1950(Newsize_1959);
if (!!((P_1958 == NIM_NIL))) goto LA5;
LOC7 = Ptrsize_10233(P_1958);
memcpy(Result_10242, P_1958, LOC7);
Dealloc_1960(P_1958);
LA5: ;
goto LA1;
LA2: ;
if (!!((P_1958 == NIM_NIL))) goto LA8;
Dealloc_1960(P_1958);
goto LA1;
LA8: ;
LA1: ;
return Result_10242;
}
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_19328) {
NimStringDesc* Result_19329;
Result_19329 = 0;
Result_19329 = mnewString(1);
Result_19329->data[0] = X_19328;
return Result_19329;
}
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_19267) {
NimStringDesc* Result_19268;
NI I_19269;
NI64 Y_19270;
NI64 D_19271;
NI J_19312;
NI HEX3Atmp_21219;
NI Res_21221;
NIM_CHAR LOC9;
Result_19268 = 0;
Result_19268 = mnewString(32);
I_19269 = 0;
I_19269 = 0;
Y_19270 = 0;
Y_19270 = X_19267;
while (1) {
D_19271 = 0;
D_19271 = (NI64)(Y_19270 / 10);
Result_19268->data[I_19269] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_19270 - (NI64)(D_19271 * 10))))) + 48)))));
I_19269 += 1;
Y_19270 = D_19271;
if (!(Y_19270 == 0)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
if (!(X_19267 < 0)) goto LA6;
Result_19268->data[I_19269] = 45;
I_19269 += 1;
LA6: ;
Result_19268 = setLengthStr(Result_19268, I_19269);
J_19312 = 0;
HEX3Atmp_21219 = 0;
HEX3Atmp_21219 = (NI64)((NI64)(I_19269 / 2) - 1);
Res_21221 = 0;
Res_21221 = 0;
while (1) {
if (!(Res_21221 <= HEX3Atmp_21219)) goto LA8;
J_19312 = Res_21221;
LOC9 = Result_19268->data[J_19312];
Result_19268->data[J_19312] = Result_19268->data[(NI64)((NI64)(I_19269 - J_19312) - 1)];
Result_19268->data[(NI64)((NI64)(I_19269 - J_19312) - 1)] = LOC9;
Res_21221 += 1;
} LA8: ;
return Result_19268;
}
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_19260) {
NimStringDesc* Result_19261;
TY19262 Buf_19264;
Result_19261 = 0;
memset((void*)&Buf_19264, 0, sizeof(Buf_19264));
sprintf(((NCSTRING) (Buf_19264)), "%#g", X_19260);
Result_19261 = cstrToNimstr(((NCSTRING) (Buf_19264)));
goto BeforeRet;
BeforeRet: ;
return Result_19261;
}
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19579, TNimType* Typ_19580) {
NimStringDesc* Result_19581;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
Result_19581 = 0;
if (!((NU64)(E_19579) < (NU64)((*(*Typ_19580).node).len))) goto LA2;
Result_19581 = cstrToNimstr((*(*(*Typ_19580).node).sons[(E_19579)-0]).name);
goto LA1;
LA2: ;
LOC4 = 0;
LOC5 = 0;
LOC5 = nimIntToStr(E_19579);
LOC4 = rawNewString(LOC5->Sup.len + 16);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP193771));
Result_19581 = LOC4;
LA1: ;
return Result_19581;
}
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640) {
NIM_BOOL Result_4069;
NI32 C_4070;
Result_4069 = 0;
C_4070 = 0;
C_4070 = fgetc(F_3640);
ungetc(C_4070, F_3640);
Result_4069 = (C_4070 == ((NI32) -1));
goto BeforeRet;
BeforeRet: ;
return Result_4069;
}
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4635) {
(*S_4635).prev = excHandler;
excHandler = S_4635;
}
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744) {
NI64 Result_4305;
NI LOC1;
TY420* E_4309;
Result_4305 = 0;
LOC1 = ftell(F_3744);
Result_4305 = ((NI64) (LOC1));
if (!(Result_4305 < 0)) goto LA3;
E_4309 = 0;
E_4309 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4309).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4309).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP193875)));
raiseException((E_Base*)E_4309, "EIO");
LA3: ;
return Result_4305;
}
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741) {
NI LOC2;
TY420* E_4286;
LOC2 = fseek(F_3740, ((NI) (Pos_3741)), 0);
if (!!((LOC2 == 0))) goto LA3;
E_4286 = 0;
E_4286 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4286).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4286).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP193876)));
raiseException((E_Base*)E_4286, "EIO");
LA3: ;
}
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697) {
NI64 Result_4328;
NI64 Oldpos_4329;
NI LOC1;
Result_4328 = 0;
Oldpos_4329 = 0;
Oldpos_4329 = Getfilepos_3742(F_3697);
LOC1 = fseek(F_3697, 0, 2);
Result_4328 = Getfilepos_3742(F_3697);
Setfilepos_3738(F_3697, Oldpos_4329);
return Result_4328;
}
static N_INLINE(void, popSafePoint)(void) {
excHandler = (*excHandler).prev;
}
static N_INLINE(E_Base*, getCurrentException)(void) {
E_Base* Result_20404;
Result_20404 = 0;
Result_20404 = Currexception_4632;
return Result_20404;
}
static N_INLINE(void, popCurrentException)(void) {
asgnRef((void**) &Currexception_4632, (*Currexception_4632).parent);
}
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649) {
NimStringDesc* Result_4057;
FILE* F_4058;
TSafePoint TMP193874;
NIM_BOOL LOC2;
NI64 volatile Len_4060;
NI LOC9;
Result_4057 = 0;
F_4058 = 0;
pushSafePoint(&TMP193874);
TMP193874.status = setjmp(TMP193874.context);
if (TMP193874.status == 0) {
LOC2 = Open_3617(&F_4058, Filename_3649, ((NU8) 0), -1);
if (!LOC2) goto LA3;
Len_4060 = 0;
Len_4060 = Getfilesize_3695(F_4058);
if (!(Len_4060 < IL64(9223372036854775807))) goto LA6;
Result_4057 = mnewString(((NI) (Len_4060)));
LOC9 = Readbuffer_3714(F_4058, ((void*) (&Result_4057->data[0])), ((NI) (Len_4060)));
if (!!((((NI64) (LOC9)) == Len_4060))) goto LA10;
Result_4057 = copyString(NIM_NIL);
LA10: ;
LA6: ;
fclose(F_4058);
goto LA1;
LA3: ;
Result_4057 = copyString(NIM_NIL);
LA1: ;
popSafePoint();
} else {
popSafePoint();
if (getCurrentException()->Sup.m_type == NTI420) {
Result_4057 = copyString(NIM_NIL);
TMP193874.status = 0;popCurrentException();}
}
if (TMP193874.status != 0) reraiseException();
return Result_4057;
}
N_NIMCALL(void, Genericassignaux_19368)(void* Dest_19370, void* Src_19371, TNimNode* N_19373) {
NI D_19374;
NI S_19375;
NI I_19383;
NI HEX3Atmp_21226;
NI Res_21228;
TNimNode* M_19384;
D_19374 = 0;
D_19374 = ((NI) (Dest_19370));
S_19375 = 0;
S_19375 = ((NI) (Src_19371));
switch ((*N_19373).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
genericAssign(((void*) ((NI64)((NU64)(D_19374) + (NU64)((*N_19373).offset)))), ((void*) ((NI64)((NU64)(S_19375) + (NU64)((*N_19373).offset)))), (*N_19373).typ);
break;
case ((NU8) 2):
I_19383 = 0;
HEX3Atmp_21226 = 0;
HEX3Atmp_21226 = (NI64)((*N_19373).len - 1);
Res_21228 = 0;
Res_21228 = 0;
while (1) {
if (!(Res_21228 <= HEX3Atmp_21226)) goto LA1;
I_19383 = Res_21228;
Genericassignaux_19368(Dest_19370, Src_19371, (*N_19373).sons[(I_19383)-0]);
Res_21228 += 1;
} LA1: ;
break;
case ((NU8) 3):
memcpy(((void*) ((NI64)((NU64)(D_19374) + (NU64)((*N_19373).offset)))), ((void*) ((NI64)((NU64)(S_19375) + (NU64)((*N_19373).offset)))), (*(*N_19373).typ).size);
M_19384 = 0;
M_19384 = Selectbranch_7463(Src_19371, N_19373);
if (!!((M_19384 == NIM_NIL))) goto LA3;
Genericassignaux_19368(Dest_19370, Src_19371, M_19384);
LA3: ;
break;
}
}
N_NIMCALL(void, genericAssign)(void* Dest_19365, void* Src_19366, TNimType* Mt_19367) {
NI D_19401;
NI S_19402;
void* S2_19414;
TGenericSeq* Seq_19415;
void** X_19416;
void* LOC4;
NI Dst_19417;
NI I_19425;
NI HEX3Atmp_21232;
NI Res_21234;
TGenericSeq* Dstseq_19426;
NI I_19434;
NI HEX3Atmp_21238;
NI Res_21240;
void* S2_19435;
NimStringDesc* LOC10;
void** X_19436;
D_19401 = 0;
D_19401 = ((NI) (Dest_19365));
S_19402 = 0;
S_19402 = ((NI) (Src_19366));
switch ((*Mt_19367).kind) {
case ((NU8) 24):
S2_19414 = 0;
S2_19414 = (*((void**) (Src_19366)));
Seq_19415 = 0;
Seq_19415 = ((TGenericSeq*) (S2_19414));
if (!(S2_19414 == NIM_NIL)) goto LA2;
X_19416 = 0;
X_19416 = ((void**) (Dest_19365));
(*X_19416) = NIM_NIL;
goto BeforeRet;
LA2: ;
LOC4 = newObj(Mt_19367, (NI64)((NI64)((*Seq_19415).len * (*(*Mt_19367).base).size) + 16));
unsureAsgnRef(((void**) (Dest_19365)), LOC4);
Dst_19417 = 0;
Dst_19417 = ((NI) ((*((void**) (Dest_19365)))));
I_19425 = 0;
HEX3Atmp_21232 = 0;
HEX3Atmp_21232 = (NI64)((*Seq_19415).len - 1);
Res_21234 = 0;
Res_21234 = 0;
while (1) {
if (!(Res_21234 <= HEX3Atmp_21232)) goto LA5;
I_19425 = Res_21234;
genericAssign(((void*) ((NI64)((NU64)((NI64)((NU64)(Dst_19417) + (NU64)((NI64)((NU64)(I_19425) * (NU64)((*(*Mt_19367).base).size))))) + (NU64)(16)))), ((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (S2_19414))) + (NU64)((NI64)((NU64)(I_19425) * (NU64)((*(*Mt_19367).base).size))))) + (NU64)(16)))), (*Mt_19367).base);
Res_21234 += 1;
} LA5: ;
Dstseq_19426 = 0;
Dstseq_19426 = ((TGenericSeq*) (Dst_19417));
(*Dstseq_19426).len = (*Seq_19415).len;
(*Dstseq_19426).space = (*Seq_19415).len;
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
Genericassignaux_19368(Dest_19365, Src_19366, (*Mt_19367).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_19434 = 0;
HEX3Atmp_21238 = 0;
HEX3Atmp_21238 = (NI64)((NI64)((*Mt_19367).size / (*(*Mt_19367).base).size) - 1);
Res_21240 = 0;
Res_21240 = 0;
while (1) {
if (!(Res_21240 <= HEX3Atmp_21238)) goto LA6;
I_19434 = Res_21240;
genericAssign(((void*) ((NI64)((NU64)(D_19401) + (NU64)((NI64)((NU64)(I_19434) * (NU64)((*(*Mt_19367).base).size)))))), ((void*) ((NI64)((NU64)(S_19402) + (NU64)((NI64)((NU64)(I_19434) * (NU64)((*(*Mt_19367).base).size)))))), (*Mt_19367).base);
Res_21240 += 1;
} LA6: ;
break;
case ((NU8) 28):
S2_19435 = 0;
S2_19435 = (*((void**) (S_19402)));
if (!!((S2_19435 == NIM_NIL))) goto LA8;
LOC10 = copyString(((NimStringDesc*) (S2_19435)));
unsureAsgnRef(((void**) (Dest_19365)), ((void*) (LOC10)));
goto LA7;
LA8: ;
X_19436 = 0;
X_19436 = ((void**) (Dest_19365));
(*X_19436) = NIM_NIL;
goto BeforeRet;
LA7: ;
break;
case ((NU8) 22):
unsureAsgnRef(((void**) (Dest_19365)), (*((void**) (S_19402))));
break;
default:
memcpy(Dest_19365, Src_19366, (*Mt_19367).size);
break;
}
BeforeRet: ;
}
N_NIMCALL(void, genericSeqAssign)(void* Dest_19439, void* Src_19440, TNimType* Mt_19441) {
void* Src_19442;
Src_19442 = 0;
Src_19442 = Src_19440;
genericAssign(Dest_19439, ((void*) (&Src_19442)), Mt_19441);
}
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2682)(void) {
NimStringDesc* Result_17624;
NimStringDesc* LOC1;
NI LOC2;
NimStringDesc* LOC3;
NI LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
Result_17624 = 0;
Gcdisable_2663();
LOC1 = 0;
LOC2 = Gettotalmem_2021();
LOC3 = 0;
LOC3 = nimIntToStr(LOC2);
LOC4 = Getoccupiedmem_2017();
LOC5 = 0;
LOC5 = nimIntToStr(LOC4);
LOC6 = 0;
LOC6 = nimIntToStr(Gch_11010.Stat.Stackscans);
LOC7 = 0;
LOC7 = nimIntToStr(Gch_11010.Stat.Maxstackcells);
LOC8 = 0;
LOC8 = nimIntToStr(Gch_11010.Stat.Cyclecollections);
LOC9 = 0;
LOC9 = nimIntToStr(Gch_11010.Stat.Maxthreshold);
LOC10 = 0;
LOC10 = nimIntToStr(Gch_11010.Zct.Cap);
LOC11 = 0;
LOC11 = nimIntToStr(Gch_11010.Stat.Cycletablesize);
LOC12 = 0;
LOC12 = nimIntToStr(Gch_11010.Stat.Maxstacksize);
LOC1 = rawNewString(LOC3->Sup.len + LOC5->Sup.len + LOC6->Sup.len + LOC7->Sup.len + LOC8->Sup.len + LOC9->Sup.len + LOC10->Sup.len + LOC11->Sup.len + LOC12->Sup.len + 204);
appendString(LOC1, ((NimStringDesc*) &TMP195491));
appendString(LOC1, LOC3);
appendString(LOC1, ((NimStringDesc*) &TMP195492));
appendString(LOC1, LOC5);
appendString(LOC1, ((NimStringDesc*) &TMP195493));
appendString(LOC1, LOC6);
appendString(LOC1, ((NimStringDesc*) &TMP195494));
appendString(LOC1, LOC7);
appendString(LOC1, ((NimStringDesc*) &TMP195495));
appendString(LOC1, LOC8);
appendString(LOC1, ((NimStringDesc*) &TMP195496));
appendString(LOC1, LOC9);
appendString(LOC1, ((NimStringDesc*) &TMP195497));
appendString(LOC1, LOC10);
appendString(LOC1, ((NimStringDesc*) &TMP195498));
appendString(LOC1, LOC11);
appendString(LOC1, ((NimStringDesc*) &TMP195499));
appendString(LOC1, LOC12);
Result_17624 = LOC1;
Gcenable_2665();
return Result_17624;
}
N_NIMCALL(void, Listremove_9046)(TY8634** Head_9050, TY8634* C_9051) {
if (!(C_9051 == (*Head_9050))) goto LA2;
(*Head_9050) = (*C_9051).Next;
if (!!(((*Head_9050) == NIM_NIL))) goto LA5;
(*(*Head_9050)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
(*(*C_9051).Prev).Next = (*C_9051).Next;
if (!!(((*C_9051).Next == NIM_NIL))) goto LA8;
(*(*C_9051).Next).Prev = (*C_9051).Prev;
LA8: ;
LA1: ;
(*C_9051).Next = NIM_NIL;
(*C_9051).Prev = NIM_NIL;
}
N_NIMCALL(void, Listadd_9626)(TY8632** Head_9630, TY8632* C_9631) {
(*C_9631).Next = (*Head_9630);
if (!!(((*Head_9630) == NIM_NIL))) goto LA2;
(*(*Head_9630)).Prev = C_9631;
LA2: ;
(*Head_9630) = C_9631;
}
N_NIMCALL(void, Listremove_9768)(TY8632** Head_9772, TY8632* C_9773) {
if (!(C_9773 == (*Head_9772))) goto LA2;
(*Head_9772) = (*C_9773).Next;
if (!!(((*Head_9772) == NIM_NIL))) goto LA5;
(*(*Head_9772)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
(*(*C_9773).Prev).Next = (*C_9773).Next;
if (!!(((*C_9773).Next == NIM_NIL))) goto LA8;
(*(*C_9773).Next).Prev = (*C_9773).Prev;
LA8: ;
LA1: ;
(*C_9773).Next = NIM_NIL;
(*C_9773).Prev = NIM_NIL;
}
N_NIMCALL(void, Listadd_9407)(TY8634** Head_9411, TY8634* C_9412) {
(*C_9412).Next = (*Head_9411);
if (!!(((*Head_9411) == NIM_NIL))) goto LA2;
(*(*Head_9411)).Prev = C_9412;
LA2: ;
(*Head_9411) = C_9412;
}
N_NOINLINE(void, systemInit)(void) {
NI LOC1;
NI LOC2;
if (!((TMP21317 = nimLoadLibrary((NimStringDesc*) &TMP21318))
)) nimLoadLibraryError((NimStringDesc*) &TMP21319);
Dl_8011 = (TY8012) nimGetProcAddr(TMP21317, "InitializeCriticalSection");
Dbglinehook_2722 = ((TY2719) (NIM_NIL));
Strdesc_3017.size = 8;
Strdesc_3017.kind = ((NU8) 28);
Strdesc_3017.flags = 2;
Initstackbottom_3013();
Initgc_3011();
LOC1 = fileno(stdin);
setmode(LOC1, O_BINARY);
LOC2 = fileno(stdout);
setmode(LOC2, O_BINARY);
asgnRefNoCycle((void**) &Stacktracenewline_4432, copyString(((NimStringDesc*) &TMP21314)));
excHandler = NIM_NIL;
registerSignalHandler();
asgnRefNoCycle((void**) &Gassertionfailed_5451, (EAssertionFailed*) newObj(NTI5450, sizeof(EAssertionFailed)));
(*Gassertionfailed_5451).Sup.Sup.Sup.m_type = NTI436;
asgnRefNoCycle((void**) &Buf_4810, mnewString(2048));
asgnRefNoCycle((void**) &Assertbuf_4811, mnewString(2048));
Buf_4810 = setLengthStr(Buf_4810, 0);
Assertbuf_4811 = setLengthStr(Assertbuf_4811, 0);
Lastsize_8891 = 4096;
Cyclethreshold_11011 = 4194304;
Recgclock_11012 = 0;
}

