/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY48008 TY48008;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10802 TY10802;
typedef struct TY10818 TY10818;
typedef struct TY11196 TY11196;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11194 TY11194;
typedef struct TY48406 TY48406;
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11194 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11196 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
TY11194 Stat;
};
typedef TY48008* TY48407[1];
typedef NI TY46040[256];
typedef NI TY8814[8];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY48406 {
  TGenericSeq Sup;
  TY48008* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newObj)(TNimType* Typ_13910, NI Size_13911);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(NI, Atomicinc_3401)(NI* Memloc_3404, NI X_3405);
static N_INLINE(NI, Atomicdec_3406)(NI* Memloc_3409, NI X_3410);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18712);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1355);
N_NIMCALL(void, Newrecropetostr_48388)(NimStringDesc** Result_48391, NI* Resultlen_48393, TY48008* R_48394);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14404, NI Len_14405);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18842, NI Elemsize_18843);
N_NIMCALL(TY48008*, Insertincache_48201)(NimStringDesc* S_48203, TY48008* Tree_48204);
N_NIMCALL(TY48008*, Newrope_48102)(NimStringDesc* Data_48104);
N_NIMCALL(TY48008*, Splay_48136)(NimStringDesc* S_48138, TY48008* Tree_48139, NI* Cmpres_48141);
N_NIMCALL(NI, Cmp_1327)(NimStringDesc* X_1329, NimStringDesc* Y_1330);
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_18613, NimStringDesc* B_18614);
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040);
N_NIMCALL(TY48008*, Con_48019)(TY48008* A_48021, NimStringDesc* B_48022);
N_NIMCALL(TY48008*, Con_48015)(TY48008* A_48017, TY48008* B_48018);
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035);
N_NIMCALL(void, Internalerror_43578)(NimStringDesc* Errmsg_43580);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19403);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18689);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18816, NIM_CHAR C_18817);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_2328, NI First_2329, NI Last_2330);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_19470);
N_NIMCALL(TY48008*, Ropef_48066)(NimStringDesc* Frmt_48068, TY48008** Args_48070, NI Args_48070Len0);
N_NIMCALL(NI32, Crcfromfile_46029)(NimStringDesc* Filename_46031);
N_NIMCALL(NI32, Crcfromrope_48997)(TY48008* R_48999);
N_NIMCALL(NI32, Newcrcfromropeaux_48912)(TY48008* R_48914, NI32 Startval_48915);
static N_INLINE(NI32, Updatecrc32_46018)(NIM_CHAR Val_46020, NI32 Crc_46021);
static N_INLINE(NI32, Updatecrc32_46014)(NI8 Val_46016, NI32 Crc_46017);
N_NIMCALL(void, Writerope_48055)(TY48008* Head_48057, NimStringDesc* Filename_48058);
N_NIMCALL(NIM_BOOL, Open_4017)(FILE** F_4020, NimStringDesc* Filename_4021, NU8 Mode_4022, NI Bufsize_4023);
N_NIMCALL(void, Newwriteroperec_48621)(FILE** F_48624, TY48008* C_48625);
N_NIMCALL(void, Write_4066)(FILE* F_4068, NimStringDesc* S_4069);
N_NIMCALL(void, Rawmessage_43560)(NU8 Msg_43562, NimStringDesc* Arg_43563);
static N_INLINE(TY48008*, Pop_48429)(TY48406** S_48434);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
STRING_LITERAL(TMP192898, "", 0);
STRING_LITERAL(TMP193231, "$", 1);
STRING_LITERAL(TMP193232, "ropes: invalid format string $", 30);
extern NIM_CONST TY46040 Crc32table_46039;
TY48008* Cache_48123;
NI Misses_48124;
NI Hits_48125;
TY48008* N_48126;
extern TNimType* NTI48006; /* PRope */
extern TY11196 Gch_11214;
extern TNimType* NTI48008; /* TRope */
extern TNimType* NTI48406; /* seq[PRope] */
extern NimStringDesc* Tnl_47573;
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI64)((NU64)(((NI) (Usr_11614))) - (NU64)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicinc_3401)(NI* Memloc_3404, NI X_3405) {
NI Result_8007;
Result_8007 = 0;
(*Memloc_3404) += X_3405;
Result_8007 = (*Memloc_3404);
return Result_8007;
}
static N_INLINE(NI, Atomicdec_3406)(NI* Memloc_3409, NI X_3410) {
NI Result_8206;
Result_8206 = 0;
(*Memloc_3409) -= X_3410;
Result_8206 = (*Memloc_3409);
return Result_8206;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11214.Zct, C_12603);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3401(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3406(&(*C_13222).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(void, Newrecropetostr_48388)(NimStringDesc** Result_48391, NI* Resultlen_48393, TY48008* R_48394) {
TY48406* Stack_48409;
TY48407 LOC1;
TY48008* It_48460;
Stack_48409 = 0;
Stack_48409 = (TY48406*) newSeq(NTI48406, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = R_48394;
asgnRefNoCycle((void**) &Stack_48409->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_48409->Sup.len)) goto LA2;
It_48460 = 0;
It_48460 = Pop_48429(&Stack_48409);
while (1) {
if (!((*It_48460).Data == NIM_NIL)) goto LA3;
Stack_48409 = (TY48406*) incrSeq(&(Stack_48409)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48409->data[Stack_48409->Sup.len-1], (*It_48460).Right);
It_48460 = (*It_48460).Left;
} LA3: ;
memcpy(((void*) (&(*Result_48391)->data[(*Resultlen_48393)])), ((void*) (&(*It_48460).Data->data[0])), (*It_48460).Length);
(*Resultlen_48393) += (*It_48460).Length;
} LA2: ;
}
N_NIMCALL(NimStringDesc*, Ropetostr_48063)(TY48008* P_48065) {
NimStringDesc* Result_48500;
NI Resultlen_48512;
Result_48500 = 0;
if (!(P_48065 == NIM_NIL)) goto LA2;
Result_48500 = copyString(((NimStringDesc*) &TMP192898));
goto LA1;
LA2: ;
Result_48500 = mnewString((*P_48065).Length);
Resultlen_48512 = 0;
Resultlen_48512 = 0;
Newrecropetostr_48388(&Result_48500, &Resultlen_48512, P_48065);
LA1: ;
return Result_48500;
}
N_NIMCALL(TY48008*, Newrope_48102)(NimStringDesc* Data_48104) {
TY48008* Result_48105;
Result_48105 = 0;
Result_48105 = (TY48008*) newObj(NTI48006, sizeof(TY48008));
(*Result_48105).Sup.m_type = NTI48008;
if (!!((Data_48104 == NIM_NIL))) goto LA2;
(*Result_48105).Length = Data_48104->Sup.len;
asgnRefNoCycle((void**) &(*Result_48105).Data, copyString(Data_48104));
LA2: ;
return Result_48105;
}
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_18613, NimStringDesc* B_18614) {
NI Result_18615;
NI32 LOC10;
Result_18615 = 0;
if (!(A_18613 == B_18614)) goto LA2;
Result_18615 = 0;
goto BeforeRet;
LA2: ;
if (!(A_18613 == NIM_NIL)) goto LA5;
Result_18615 = -1;
goto BeforeRet;
LA5: ;
if (!(B_18614 == NIM_NIL)) goto LA8;
Result_18615 = 1;
goto BeforeRet;
LA8: ;
LOC10 = strcmp(((NCSTRING) ((*A_18613).data)), ((NCSTRING) ((*B_18614).data)));
Result_18615 = ((NI) (LOC10));
goto BeforeRet;
BeforeRet: ;
return Result_18615;
}
N_NIMCALL(TY48008*, Splay_48136)(NimStringDesc* S_48138, TY48008* Tree_48139, NI* Cmpres_48141) {
TY48008* Result_48142;
NI C_48143;
TY48008* T_48144;
TY48008* Le_48145;
TY48008* R_48146;
NIM_BOOL LOC6;
TY48008* Y_48162;
NIM_BOOL LOC16;
TY48008* Y_48189;
Result_48142 = 0;
C_48143 = 0;
T_48144 = 0;
T_48144 = Tree_48139;
asgnRefNoCycle((void**) &(*N_48126).Left, NIM_NIL);
asgnRefNoCycle((void**) &(*N_48126).Right, NIM_NIL);
Le_48145 = 0;
Le_48145 = N_48126;
R_48146 = 0;
R_48146 = N_48126;
while (1) {
C_48143 = Cmp_1327(S_48138, (*T_48144).Data);
if (!(C_48143 < 0)) goto LA3;
LOC6 = !(((*T_48144).Left == NIM_NIL));
if (!(LOC6)) goto LA7;
LOC6 = (cmpStrings(S_48138, (*(*T_48144).Left).Data) < 0);
LA7: ;
if (!LOC6) goto LA8;
Y_48162 = 0;
Y_48162 = (*T_48144).Left;
asgnRefNoCycle((void**) &(*T_48144).Left, (*Y_48162).Right);
asgnRefNoCycle((void**) &(*Y_48162).Right, T_48144);
T_48144 = Y_48162;
LA8: ;
if (!((*T_48144).Left == NIM_NIL)) goto LA11;
goto LA1;
LA11: ;
asgnRefNoCycle((void**) &(*R_48146).Left, T_48144);
R_48146 = T_48144;
T_48144 = (*T_48144).Left;
goto LA2;
LA3: ;
if (!(0 < C_48143)) goto LA13;
LOC16 = !(((*T_48144).Right == NIM_NIL));
if (!(LOC16)) goto LA17;
LOC16 = (cmpStrings((*(*T_48144).Right).Data, S_48138) < 0);
LA17: ;
if (!LOC16) goto LA18;
Y_48189 = 0;
Y_48189 = (*T_48144).Right;
asgnRefNoCycle((void**) &(*T_48144).Right, (*Y_48189).Left);
asgnRefNoCycle((void**) &(*Y_48189).Left, T_48144);
T_48144 = Y_48189;
LA18: ;
if (!((*T_48144).Right == NIM_NIL)) goto LA21;
goto LA1;
LA21: ;
asgnRefNoCycle((void**) &(*Le_48145).Right, T_48144);
Le_48145 = T_48144;
T_48144 = (*T_48144).Right;
goto LA2;
LA13: ;
goto LA1;
LA2: ;
} LA1: ;
(*Cmpres_48141) = C_48143;
asgnRefNoCycle((void**) &(*Le_48145).Right, (*T_48144).Left);
asgnRefNoCycle((void**) &(*R_48146).Left, (*T_48144).Right);
asgnRefNoCycle((void**) &(*T_48144).Left, (*N_48126).Right);
asgnRefNoCycle((void**) &(*T_48144).Right, (*N_48126).Left);
Result_48142 = T_48144;
return Result_48142;
}
N_NIMCALL(TY48008*, Insertincache_48201)(NimStringDesc* S_48203, TY48008* Tree_48204) {
TY48008* Result_48205;
TY48008* T_48206;
NI Cmp_48230;
Result_48205 = 0;
T_48206 = 0;
T_48206 = Tree_48204;
if (!(T_48206 == NIM_NIL)) goto LA2;
Result_48205 = Newrope_48102(S_48203);
if (!NIM_FALSE) goto LA5;
Misses_48124 += 1;
LA5: ;
goto BeforeRet;
LA2: ;
Cmp_48230 = 0;
T_48206 = Splay_48136(S_48203, T_48206, &Cmp_48230);
if (!(Cmp_48230 == 0)) goto LA8;
Result_48205 = T_48206;
if (!NIM_FALSE) goto LA11;
Hits_48125 += 1;
LA11: ;
goto LA7;
LA8: ;
if (!NIM_FALSE) goto LA14;
Misses_48124 += 1;
LA14: ;
Result_48205 = Newrope_48102(S_48203);
if (!(Cmp_48230 < 0)) goto LA17;
asgnRefNoCycle((void**) &(*Result_48205).Left, (*T_48206).Left);
asgnRefNoCycle((void**) &(*Result_48205).Right, T_48206);
asgnRefNoCycle((void**) &(*T_48206).Left, NIM_NIL);
goto LA16;
LA17: ;
asgnRefNoCycle((void**) &(*Result_48205).Right, (*T_48206).Right);
asgnRefNoCycle((void**) &(*Result_48205).Left, T_48206);
asgnRefNoCycle((void**) &(*T_48206).Right, NIM_NIL);
LA16: ;
LA7: ;
BeforeRet: ;
return Result_48205;
}
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048) {
TY48008* Result_48280;
Result_48280 = 0;
if (!((S_48048) && (S_48048)->Sup.len == 0)) goto LA2;
Result_48280 = NIM_NIL;
goto LA1;
LA2: ;
if (!NIM_TRUE) goto LA4;
Result_48280 = Insertincache_48201(S_48048, Cache_48123);
asgnRefNoCycle((void**) &Cache_48123, Result_48280);
goto LA1;
LA4: ;
Result_48280 = Newrope_48102(S_48048);
LA1: ;
return Result_48280;
}
N_NIMCALL(TY48008*, Con_48015)(TY48008* A_48017, TY48008* B_48018) {
TY48008* Result_48519;
Result_48519 = 0;
if (!(A_48017 == NIM_NIL)) goto LA2;
Result_48519 = B_48018;
goto LA1;
LA2: ;
if (!(B_48018 == NIM_NIL)) goto LA4;
Result_48519 = A_48017;
goto LA1;
LA4: ;
Result_48519 = Newrope_48102(NIM_NIL);
(*Result_48519).Length = (NI64)((*A_48017).Length + (*B_48018).Length);
asgnRefNoCycle((void**) &(*Result_48519).Left, A_48017);
asgnRefNoCycle((void**) &(*Result_48519).Right, B_48018);
LA1: ;
return Result_48519;
}
N_NIMCALL(TY48008*, Con_48019)(TY48008* A_48021, NimStringDesc* B_48022) {
TY48008* Result_48546;
TY48008* LOC1;
Result_48546 = 0;
LOC1 = 0;
LOC1 = Torope_48046(B_48022);
Result_48546 = Con_48015(A_48021, LOC1);
return Result_48546;
}
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040) {
unsureAsgnRef((void**) &(*A_48039), Con_48019((*A_48039), B_48040));
}
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035) {
unsureAsgnRef((void**) &(*A_48034), Con_48015((*A_48034), B_48035));
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800) {
memcpy(((NCSTRING) (&(*Dest_18799).data[((*Dest_18799).Sup.len)-0])), ((NCSTRING) ((*Src_18800).data)), ((NI32) ((NI64)((NI64)((*Src_18800).Sup.len + 1) * 1))));
(*Dest_18799).Sup.len += (*Src_18800).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18816, NIM_CHAR C_18817) {
(*Dest_18816).data[((*Dest_18816).Sup.len)-0] = C_18817;
(*Dest_18816).data[((NI64)((*Dest_18816).Sup.len + 1))-0] = 0;
(*Dest_18816).Sup.len += 1;
}
N_NIMCALL(TY48008*, Ropef_48066)(NimStringDesc* Frmt_48068, TY48008** Args_48070, NI Args_48070Len0) {
TY48008* Result_48720;
NI I_48721;
NI Length_48724;
NI Num_48725;
NI J_48780;
NIM_BOOL LOC7;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NimStringDesc* LOC16;
NI Start_48839;
NimStringDesc* LOC24;
Result_48720 = 0;
I_48721 = 0;
I_48721 = 0;
Length_48724 = 0;
Length_48724 = Frmt_48068->Sup.len;
Result_48720 = NIM_NIL;
Num_48725 = 0;
Num_48725 = 0;
while (1) {
if (!(I_48721 <= (NI64)(Length_48724 - 1))) goto LA1;
if (!((NU8)(Frmt_48068->data[I_48721]) == (NU8)(36))) goto LA3;
I_48721 += 1;
switch (((NU8)(Frmt_48068->data[I_48721]))) {
case 36:
App_48036(&Result_48720, ((NimStringDesc*) &TMP193231));
I_48721 += 1;
break;
case 35:
I_48721 += 1;
App_48031(&Result_48720, Args_48070[Num_48725]);
Num_48725 += 1;
break;
case 48 ... 57:
J_48780 = 0;
J_48780 = 0;
while (1) {
J_48780 = (NI64)((NI64)((NI64)(J_48780 * 10) + ((NU8)(Frmt_48068->data[I_48721]))) - 48);
I_48721 += 1;
LOC7 = ((NI64)((NI64)(Length_48724 + 0) - 1) < I_48721);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_48068->data[I_48721])) >= ((NU8)(48)) && ((NU8)(Frmt_48068->data[I_48721])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
Num_48725 = J_48780;
if (!((NI64)((Args_48070Len0-1) + 1) < J_48780)) goto LA12;
LOC14 = 0;
LOC15 = 0;
LOC15 = nimIntToStr(J_48780);
LOC14 = rawNewString(LOC15->Sup.len + 30);
appendString(LOC14, ((NimStringDesc*) &TMP193232));
appendString(LOC14, LOC15);
Internalerror_43578(LOC14);
LA12: ;
App_48031(&Result_48720, Args_48070[(NI64)(J_48780 - 1)]);
break;
case 78:
case 110:
App_48036(&Result_48720, Tnl_47573);
I_48721 += 1;
break;
default:
LOC16 = 0;
LOC16 = rawNewString(31);
appendString(LOC16, ((NimStringDesc*) &TMP193232));
appendChar(LOC16, Frmt_48068->data[I_48721]);
Internalerror_43578(LOC16);
break;
}
LA3: ;
Start_48839 = 0;
Start_48839 = I_48721;
while (1) {
if (!(I_48721 <= (NI64)(Length_48724 - 1))) goto LA17;
if (!!(((NU8)(Frmt_48068->data[I_48721]) == (NU8)(36)))) goto LA19;
I_48721 += 1;
goto LA18;
LA19: ;
goto LA17;
LA18: ;
} LA17: ;
if (!(Start_48839 <= (NI64)(I_48721 - 1))) goto LA22;
LOC24 = 0;
LOC24 = copyStrLast(Frmt_48068, Start_48839, (NI64)(I_48721 - 1));
App_48036(&Result_48720, LOC24);
LA22: ;
} LA1: ;
return Result_48720;
}
N_NIMCALL(TY48008*, Torope_48049)(NI64 I_48051) {
TY48008* Result_48587;
NimStringDesc* LOC1;
Result_48587 = 0;
LOC1 = 0;
LOC1 = nimInt64ToStr(I_48051);
Result_48587 = Torope_48046(LOC1);
return Result_48587;
}
N_NIMCALL(void, Appf_48071)(TY48008** C_48074, NimStringDesc* Frmt_48075, TY48008** Args_48077, NI Args_48077Len0) {
TY48008* LOC1;
LOC1 = 0;
LOC1 = Ropef_48066(Frmt_48075, Args_48077, Args_48077Len0);
App_48031(C_48074, LOC1);
}
N_NIMCALL(TY48008*, Con_48023)(NimStringDesc* A_48025, TY48008* B_48026) {
TY48008* Result_48551;
TY48008* LOC1;
Result_48551 = 0;
LOC1 = 0;
LOC1 = Torope_48046(A_48025);
Result_48551 = Con_48015(LOC1, B_48026);
return Result_48551;
}
N_NIMCALL(void, Prepend_48041)(TY48008** A_48044, TY48008* B_48045) {
unsureAsgnRef((void**) &(*A_48044), Con_48015(B_48045, (*A_48044)));
}
static N_INLINE(NI32, Updatecrc32_46014)(NI8 Val_46016, NI32 Crc_46017) {
NI32 Result_46048;
Result_46048 = 0;
Result_46048 = (NI32)(((NI32) (Crc32table_46039[((NI64)((NI64)(((NI) (Crc_46017)) ^ (NI64)(((NI) (Val_46016)) & 255)) & 255))-0])) ^ (NI32)((NU32)(Crc_46017) >> (NU32)(((NI32) 8))));
return Result_46048;
}
static N_INLINE(NI32, Updatecrc32_46018)(NIM_CHAR Val_46020, NI32 Crc_46021) {
NI32 Result_46053;
Result_46053 = 0;
Result_46053 = Updatecrc32_46014(((NI8) (((NU8)(Val_46020)))), Crc_46021);
return Result_46053;
}
N_NIMCALL(NI32, Newcrcfromropeaux_48912)(TY48008* R_48914, NI32 Startval_48915) {
NI32 Result_48916;
TY48406* Stack_48931;
TY48407 LOC1;
TY48008* It_48958;
NI I_48977;
NI L_48980;
Result_48916 = 0;
Stack_48931 = 0;
Stack_48931 = (TY48406*) newSeq(NTI48406, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = R_48914;
asgnRefNoCycle((void**) &Stack_48931->data[0], LOC1[0]);
Result_48916 = Startval_48915;
while (1) {
if (!(0 < Stack_48931->Sup.len)) goto LA2;
It_48958 = 0;
It_48958 = Pop_48429(&Stack_48931);
while (1) {
if (!((*It_48958).Data == NIM_NIL)) goto LA3;
Stack_48931 = (TY48406*) incrSeq(&(Stack_48931)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48931->data[Stack_48931->Sup.len-1], (*It_48958).Right);
It_48958 = (*It_48958).Left;
} LA3: ;
I_48977 = 0;
I_48977 = 0;
L_48980 = 0;
L_48980 = (*It_48958).Data->Sup.len;
while (1) {
if (!(I_48977 < L_48980)) goto LA4;
Result_48916 = Updatecrc32_46018((*It_48958).Data->data[I_48977], Result_48916);
I_48977 += 1;
} LA4: ;
} LA2: ;
return Result_48916;
}
N_NIMCALL(NI32, Crcfromrope_48997)(TY48008* R_48999) {
NI32 Result_49000;
Result_49000 = 0;
Result_49000 = Newcrcfromropeaux_48912(R_48999, ((NI32) -1));
return Result_49000;
}
N_NIMCALL(void, Newwriteroperec_48621)(FILE** F_48624, TY48008* C_48625) {
TY48406* Stack_48640;
TY48407 LOC1;
TY48008* It_48667;
Stack_48640 = 0;
Stack_48640 = (TY48406*) newSeq(NTI48406, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = C_48625;
asgnRefNoCycle((void**) &Stack_48640->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_48640->Sup.len)) goto LA2;
It_48667 = 0;
It_48667 = Pop_48429(&Stack_48640);
while (1) {
if (!((*It_48667).Data == NIM_NIL)) goto LA3;
Stack_48640 = (TY48406*) incrSeq(&(Stack_48640)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48640->data[Stack_48640->Sup.len-1], (*It_48667).Right);
It_48667 = (*It_48667).Left;
} LA3: ;
Write_4066((*F_48624), (*It_48667).Data);
} LA2: ;
}
N_NIMCALL(void, Writerope_48055)(TY48008* Head_48057, NimStringDesc* Filename_48058) {
FILE* F_48701;
NIM_BOOL LOC2;
F_48701 = 0;
LOC2 = Open_4017(&F_48701, Filename_48058, ((NU8) 1), -1);
if (!LOC2) goto LA3;
if (!!((Head_48057 == NIM_NIL))) goto LA6;
Newwriteroperec_48621(&F_48701, Head_48057);
LA6: ;
fclose(F_48701);
goto LA1;
LA3: ;
Rawmessage_43560(((NU8) 2), Filename_48058);
LA1: ;
}
N_NIMCALL(NIM_BOOL, Writeropeifnotequal_48059)(TY48008* R_48061, NimStringDesc* Filename_48062) {
NIM_BOOL Result_49005;
NI32 C_49006;
NI32 LOC2;
Result_49005 = 0;
C_49006 = 0;
C_49006 = Crcfromfile_46029(Filename_48062);
LOC2 = Crcfromrope_48997(R_48061);
if (!!((C_49006 == LOC2))) goto LA3;
Writerope_48055(R_48061, Filename_48062);
Result_49005 = NIM_TRUE;
goto LA1;
LA3: ;
Result_49005 = NIM_FALSE;
LA1: ;
return Result_49005;
}
N_NIMCALL(NI, Ropelen_48052)(TY48008* A_48054) {
NI Result_48090;
Result_48090 = 0;
if (!(A_48054 == NIM_NIL)) goto LA2;
Result_48090 = 0;
goto LA1;
LA2: ;
Result_48090 = (*A_48054).Length;
LA1: ;
return Result_48090;
}
static N_INLINE(TY48008*, Pop_48429)(TY48406** S_48434) {
TY48008* Result_48435;
NI L_48446;
Result_48435 = 0;
L_48446 = 0;
L_48446 = (NI64)((*S_48434)->Sup.len - 1);
Result_48435 = (*S_48434)->data[L_48446];
(*S_48434) = (TY48406*) setLengthSeq(&((*S_48434))->Sup, sizeof(TY48008*), L_48446);
return Result_48435;
}
N_NOINLINE(void, ropesInit)(void) {
asgnRefNoCycle((void**) &N_48126, (TY48008*) newObj(NTI48006, sizeof(TY48008)));
(*N_48126).Sup.m_type = NTI48008;
}

