/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY48008 TY48008;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10602 TY10602;
typedef struct TY10618 TY10618;
typedef struct TY10990 TY10990;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY8004 TY8004;
typedef struct TY10988 TY10988;
typedef struct TY48445 TY48445;
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
typedef TY48008* TY48446[1];
typedef NI TY46040[256];
typedef NI TY8614[8];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY48445 {
  TGenericSeq Sup;
  TY48008* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NIMCALL(void, Newrecropetostr_48427)(NimStringDesc** Result_48430, NI* Resultlen_48432, TY48008* R_48433);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18635, NI Elemsize_18636);
N_NIMCALL(TY48008*, Insertincache_48241)(NimStringDesc* S_48243, TY48008* Tree_48244);
N_NIMCALL(TY48008*, Newrope_48105)(NimStringDesc* Data_48107);
N_NIMCALL(TY48008*, Splay_48179)(NimStringDesc* S_48181, TY48008* Tree_48182, NI* Cmpres_48184);
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324);
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_18411, NimStringDesc* B_18412);
N_NIMCALL(TY48008*, Con_48019)(TY48008* A_48021, NimStringDesc* B_48022);
N_NIMCALL(TY48008*, Con_48015)(TY48008* A_48017, TY48008* B_48018);
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027);
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040);
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035);
N_NIMCALL(void, Internalerror_43571)(NimStringDesc* Errmsg_43573);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19203);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18609, NIM_CHAR C_18610);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1928, NI First_1929, NI Last_1930);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_19267);
N_NIMCALL(TY48008*, Ropef_48069)(NimStringDesc* Frmt_48071, TY48008** Args_48073, NI Args_48073Len0);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_19260);
N_NIMCALL(NI32, Crcfromfile_46029)(NimStringDesc* Filename_46031);
N_NIMCALL(NI32, Crcfromrope_49052)(TY48008* R_49054);
N_NIMCALL(NI32, Newcrcfromropeaux_48968)(TY48008* R_48970, NI32 Startval_48971);
static N_INLINE(NI32, Updatecrc32_46018)(NIM_CHAR Val_46020, NI32 Crc_46021);
static N_INLINE(NI32, Updatecrc32_46014)(NI8 Val_46016, NI32 Crc_46017);
N_NIMCALL(void, Writerope_48058)(TY48008* Head_48060, NimStringDesc* Filename_48061);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(void, Newwriteroperec_48666)(FILE** F_48669, TY48008* C_48670);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
N_NIMCALL(void, Rawmessage_43553)(NU8 Msg_43555, NimStringDesc* Arg_43556);
N_NIMCALL(TY48008*, Pop_48466)(TY48445** S_48471);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
STRING_LITERAL(TMP193904, "", 0);
STRING_LITERAL(TMP194245, "$", 1);
STRING_LITERAL(TMP194246, "ropes: invalid format string $", 30);
extern NIM_CONST TY46040 Crc32table_46039;
TY48008* Cache_48126;
NI Misses_48127;
NI Hits_48128;
TY48008* N_48129;
extern TNimType* NTI48006; /* PRope */
extern TY10990 Gch_11010;
extern TNimType* NTI48008; /* TRope */
extern TNimType* NTI48445; /* seq[PRope] */
extern NimStringDesc* Tnl_47573;
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11414))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11010.Zct, C_12403);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3001(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3006(&(*C_13022).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(void, Newrecropetostr_48427)(NimStringDesc** Result_48430, NI* Resultlen_48432, TY48008* R_48433) {
TY48445* Stack_48448;
TY48446 LOC1;
TY48008* It_48497;
Stack_48448 = 0;
Stack_48448 = (TY48445*) newSeq(NTI48445, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = R_48433;
asgnRefNoCycle((void**) &Stack_48448->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_48448->Sup.len)) goto LA2;
It_48497 = 0;
It_48497 = Pop_48466(&Stack_48448);
while (1) {
if (!((*It_48497).Data == NIM_NIL)) goto LA3;
Stack_48448 = (TY48445*) incrSeq(&(Stack_48448)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48448->data[Stack_48448->Sup.len-1], (*It_48497).Right);
It_48497 = (*It_48497).Left;
} LA3: ;
memcpy(((void*) (&(*Result_48430)->data[(*Resultlen_48432)])), ((void*) (&(*It_48497).Data->data[0])), (*It_48497).Length);
(*Resultlen_48432) += (*It_48497).Length;
} LA2: ;
}
N_NIMCALL(NimStringDesc*, Ropetostr_48066)(TY48008* P_48068) {
NimStringDesc* Result_48539;
NI Resultlen_48551;
Result_48539 = 0;
if (!(P_48068 == NIM_NIL)) goto LA2;
Result_48539 = copyString(((NimStringDesc*) &TMP193904));
goto LA1;
LA2: ;
Result_48539 = mnewString((*P_48068).Length);
Resultlen_48551 = 0;
Resultlen_48551 = 0;
Newrecropetostr_48427(&Result_48539, &Resultlen_48551, P_48068);
LA1: ;
return Result_48539;
}
N_NIMCALL(TY48008*, Newrope_48105)(NimStringDesc* Data_48107) {
TY48008* Result_48108;
Result_48108 = 0;
Result_48108 = (TY48008*) newObj(NTI48006, sizeof(TY48008));
(*Result_48108).Sup.m_type = NTI48008;
if (!!((Data_48107 == NIM_NIL))) goto LA2;
(*Result_48108).Length = Data_48107->Sup.len;
asgnRefNoCycle((void**) &(*Result_48108).Data, copyString(Data_48107));
LA2: ;
return Result_48108;
}
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_18411, NimStringDesc* B_18412) {
NI Result_18413;
NI32 LOC10;
Result_18413 = 0;
if (!(A_18411 == B_18412)) goto LA2;
Result_18413 = 0;
goto BeforeRet;
LA2: ;
if (!(A_18411 == NIM_NIL)) goto LA5;
Result_18413 = -1;
goto BeforeRet;
LA5: ;
if (!(B_18412 == NIM_NIL)) goto LA8;
Result_18413 = 1;
goto BeforeRet;
LA8: ;
LOC10 = strcmp(((NCSTRING) ((*A_18411).data)), ((NCSTRING) ((*B_18412).data)));
Result_18413 = ((NI) (LOC10));
goto BeforeRet;
BeforeRet: ;
return Result_18413;
}
N_NIMCALL(TY48008*, Splay_48179)(NimStringDesc* S_48181, TY48008* Tree_48182, NI* Cmpres_48184) {
TY48008* Result_48185;
NI C_48186;
TY48008* T_48187;
TY48008* Le_48188;
TY48008* R_48189;
NIM_BOOL LOC6;
TY48008* Y_48203;
NIM_BOOL LOC16;
TY48008* Y_48228;
Result_48185 = 0;
C_48186 = 0;
T_48187 = 0;
T_48187 = Tree_48182;
asgnRefNoCycle((void**) &(*N_48129).Left, NIM_NIL);
asgnRefNoCycle((void**) &(*N_48129).Right, NIM_NIL);
Le_48188 = 0;
Le_48188 = N_48129;
R_48189 = 0;
R_48189 = N_48129;
while (1) {
C_48186 = Cmp_1321(S_48181, (*T_48187).Data);
if (!(C_48186 < 0)) goto LA3;
LOC6 = !(((*T_48187).Left == NIM_NIL));
if (!(LOC6)) goto LA7;
LOC6 = (cmpStrings(S_48181, (*(*T_48187).Left).Data) < 0);
LA7: ;
if (!LOC6) goto LA8;
Y_48203 = 0;
Y_48203 = (*T_48187).Left;
asgnRefNoCycle((void**) &(*T_48187).Left, (*Y_48203).Right);
asgnRefNoCycle((void**) &(*Y_48203).Right, T_48187);
T_48187 = Y_48203;
LA8: ;
if (!((*T_48187).Left == NIM_NIL)) goto LA11;
goto LA1;
LA11: ;
asgnRefNoCycle((void**) &(*R_48189).Left, T_48187);
R_48189 = T_48187;
T_48187 = (*T_48187).Left;
goto LA2;
LA3: ;
if (!(0 < C_48186)) goto LA13;
LOC16 = !(((*T_48187).Right == NIM_NIL));
if (!(LOC16)) goto LA17;
LOC16 = (cmpStrings((*(*T_48187).Right).Data, S_48181) < 0);
LA17: ;
if (!LOC16) goto LA18;
Y_48228 = 0;
Y_48228 = (*T_48187).Right;
asgnRefNoCycle((void**) &(*T_48187).Right, (*Y_48228).Left);
asgnRefNoCycle((void**) &(*Y_48228).Left, T_48187);
T_48187 = Y_48228;
LA18: ;
if (!((*T_48187).Right == NIM_NIL)) goto LA21;
goto LA1;
LA21: ;
asgnRefNoCycle((void**) &(*Le_48188).Right, T_48187);
Le_48188 = T_48187;
T_48187 = (*T_48187).Right;
goto LA2;
LA13: ;
goto LA1;
LA2: ;
} LA1: ;
(*Cmpres_48184) = C_48186;
asgnRefNoCycle((void**) &(*Le_48188).Right, (*T_48187).Left);
asgnRefNoCycle((void**) &(*R_48189).Left, (*T_48187).Right);
asgnRefNoCycle((void**) &(*T_48187).Left, (*N_48129).Right);
asgnRefNoCycle((void**) &(*T_48187).Right, (*N_48129).Left);
Result_48185 = T_48187;
return Result_48185;
}
N_NIMCALL(TY48008*, Insertincache_48241)(NimStringDesc* S_48243, TY48008* Tree_48244) {
TY48008* Result_48245;
TY48008* T_48246;
NI Cmp_48270;
Result_48245 = 0;
T_48246 = 0;
T_48246 = Tree_48244;
if (!(T_48246 == NIM_NIL)) goto LA2;
Result_48245 = Newrope_48105(S_48243);
if (!NIM_FALSE) goto LA5;
Misses_48127 += 1;
LA5: ;
goto BeforeRet;
LA2: ;
Cmp_48270 = 0;
T_48246 = Splay_48179(S_48243, T_48246, &Cmp_48270);
if (!(Cmp_48270 == 0)) goto LA8;
Result_48245 = T_48246;
if (!NIM_FALSE) goto LA11;
Hits_48128 += 1;
LA11: ;
goto LA7;
LA8: ;
if (!NIM_FALSE) goto LA14;
Misses_48127 += 1;
LA14: ;
Result_48245 = Newrope_48105(S_48243);
if (!(Cmp_48270 < 0)) goto LA17;
asgnRefNoCycle((void**) &(*Result_48245).Left, (*T_48246).Left);
asgnRefNoCycle((void**) &(*Result_48245).Right, T_48246);
asgnRefNoCycle((void**) &(*T_48246).Left, NIM_NIL);
goto LA16;
LA17: ;
asgnRefNoCycle((void**) &(*Result_48245).Right, (*T_48246).Right);
asgnRefNoCycle((void**) &(*Result_48245).Left, T_48246);
asgnRefNoCycle((void**) &(*T_48246).Right, NIM_NIL);
LA16: ;
LA7: ;
BeforeRet: ;
return Result_48245;
}
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048) {
TY48008* Result_48318;
Result_48318 = 0;
if (!((S_48048) && (S_48048)->Sup.len == 0)) goto LA2;
Result_48318 = NIM_NIL;
goto LA1;
LA2: ;
if (!NIM_TRUE) goto LA4;
Result_48318 = Insertincache_48241(S_48048, Cache_48126);
asgnRefNoCycle((void**) &Cache_48126, Result_48318);
goto LA1;
LA4: ;
Result_48318 = Newrope_48105(S_48048);
LA1: ;
return Result_48318;
}
N_NIMCALL(TY48008*, Con_48015)(TY48008* A_48017, TY48008* B_48018) {
TY48008* Result_48558;
Result_48558 = 0;
if (!(A_48017 == NIM_NIL)) goto LA2;
Result_48558 = B_48018;
goto LA1;
LA2: ;
if (!(B_48018 == NIM_NIL)) goto LA4;
Result_48558 = A_48017;
goto LA1;
LA4: ;
Result_48558 = Newrope_48105(NIM_NIL);
(*Result_48558).Length = (NI64)((*A_48017).Length + (*B_48018).Length);
asgnRefNoCycle((void**) &(*Result_48558).Left, A_48017);
asgnRefNoCycle((void**) &(*Result_48558).Right, B_48018);
LA1: ;
return Result_48558;
}
N_NIMCALL(TY48008*, Con_48019)(TY48008* A_48021, NimStringDesc* B_48022) {
TY48008* Result_48585;
TY48008* LOC1;
Result_48585 = 0;
LOC1 = 0;
LOC1 = Torope_48046(B_48022);
Result_48585 = Con_48015(A_48021, LOC1);
return Result_48585;
}
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040) {
unsureAsgnRef((void**) &(*A_48039), Con_48019((*A_48039), B_48040));
}
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035) {
unsureAsgnRef((void**) &(*A_48034), Con_48015((*A_48034), B_48035));
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593) {
memcpy(((NCSTRING) (&(*Dest_18592).data[((*Dest_18592).Sup.len)-0])), ((NCSTRING) ((*Src_18593).data)), ((NI32) ((NI64)((NI64)((*Src_18593).Sup.len + 1) * 1))));
(*Dest_18592).Sup.len += (*Src_18593).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18609, NIM_CHAR C_18610) {
(*Dest_18609).data[((*Dest_18609).Sup.len)-0] = C_18610;
(*Dest_18609).data[((NI64)((*Dest_18609).Sup.len + 1))-0] = 0;
(*Dest_18609).Sup.len += 1;
}
N_NIMCALL(TY48008*, Ropef_48069)(NimStringDesc* Frmt_48071, TY48008** Args_48073, NI Args_48073Len0) {
TY48008* Result_48765;
NI I_48766;
NI J_48767;
NI Length_48768;
NI Start_48769;
NI Num_48770;
NIM_BOOL LOC7;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NimStringDesc* LOC16;
NimStringDesc* LOC24;
Result_48765 = 0;
I_48766 = 0;
J_48767 = 0;
Length_48768 = 0;
Start_48769 = 0;
Num_48770 = 0;
I_48766 = 0;
Length_48768 = Frmt_48071->Sup.len;
Result_48765 = NIM_NIL;
Num_48770 = 0;
while (1) {
if (!(I_48766 <= (NI64)(Length_48768 - 1))) goto LA1;
if (!((NU8)(Frmt_48071->data[I_48766]) == (NU8)(36))) goto LA3;
I_48766 += 1;
switch (((NU8)(Frmt_48071->data[I_48766]))) {
case 36:
App_48036(&Result_48765, ((NimStringDesc*) &TMP194245));
I_48766 += 1;
break;
case 35:
I_48766 += 1;
App_48031(&Result_48765, Args_48073[Num_48770]);
Num_48770 += 1;
break;
case 48 ... 57:
J_48767 = 0;
while (1) {
J_48767 = (NI64)((NI64)((NI64)(J_48767 * 10) + ((NU8)(Frmt_48071->data[I_48766]))) - 48);
I_48766 += 1;
LOC7 = ((NI64)((NI64)(Length_48768 + 0) - 1) < I_48766);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_48071->data[I_48766])) >= ((NU8)(48)) && ((NU8)(Frmt_48071->data[I_48766])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
Num_48770 = J_48767;
if (!((NI64)((Args_48073Len0-1) + 1) < J_48767)) goto LA12;
LOC14 = 0;
LOC15 = 0;
LOC15 = nimIntToStr(J_48767);
LOC14 = rawNewString(LOC15->Sup.len + 30);
appendString(LOC14, ((NimStringDesc*) &TMP194246));
appendString(LOC14, LOC15);
Internalerror_43571(LOC14);
LA12: ;
App_48031(&Result_48765, Args_48073[(NI64)(J_48767 - 1)]);
break;
case 78:
case 110:
App_48036(&Result_48765, Tnl_47573);
I_48766 += 1;
break;
default:
LOC16 = 0;
LOC16 = rawNewString(31);
appendString(LOC16, ((NimStringDesc*) &TMP194246));
appendChar(LOC16, Frmt_48071->data[I_48766]);
Internalerror_43571(LOC16);
break;
}
LA3: ;
Start_48769 = I_48766;
while (1) {
if (!(I_48766 <= (NI64)(Length_48768 - 1))) goto LA17;
if (!!(((NU8)(Frmt_48071->data[I_48766]) == (NU8)(36)))) goto LA19;
I_48766 += 1;
goto LA18;
LA19: ;
goto LA17;
LA18: ;
} LA17: ;
if (!(Start_48769 <= (NI64)(I_48766 - 1))) goto LA22;
LOC24 = 0;
LOC24 = copyStrLast(Frmt_48071, Start_48769, (NI64)(I_48766 - 1));
App_48036(&Result_48765, LOC24);
LA22: ;
} LA1: ;
return Result_48765;
}
N_NIMCALL(TY48008*, Torope_48052)(NI64 I_48054) {
TY48008* Result_48628;
NimStringDesc* LOC1;
Result_48628 = 0;
LOC1 = 0;
LOC1 = nimInt64ToStr(I_48054);
Result_48628 = Torope_48046(LOC1);
return Result_48628;
}
N_NIMCALL(void, Appf_48074)(TY48008** C_48077, NimStringDesc* Frmt_48078, TY48008** Args_48080, NI Args_48080Len0) {
TY48008* LOC1;
LOC1 = 0;
LOC1 = Ropef_48069(Frmt_48078, Args_48080, Args_48080Len0);
App_48031(C_48077, LOC1);
}
N_NIMCALL(TY48008*, Con_48023)(NimStringDesc* A_48025, TY48008* B_48026) {
TY48008* Result_48590;
TY48008* LOC1;
Result_48590 = 0;
LOC1 = 0;
LOC1 = Torope_48046(A_48025);
Result_48590 = Con_48015(LOC1, B_48026);
return Result_48590;
}
N_NIMCALL(void, Prepend_48041)(TY48008** A_48044, TY48008* B_48045) {
unsureAsgnRef((void**) &(*A_48044), Con_48015(B_48045, (*A_48044)));
}
N_NIMCALL(TY48008*, Toropef_48049)(NF64 R_48051) {
TY48008* Result_48634;
NimStringDesc* LOC1;
Result_48634 = 0;
LOC1 = 0;
LOC1 = nimFloatToStr(((NF) (R_48051)));
Result_48634 = Torope_48046(LOC1);
return Result_48634;
}
static N_INLINE(NI32, Updatecrc32_46014)(NI8 Val_46016, NI32 Crc_46017) {
NI32 Result_46048;
Result_46048 = 0;
Result_46048 = (NI32)(((NI32) (Crc32table_46039[((NI64)((NI64)(((NI) (Crc_46017)) ^ (NI64)(((NI) (Val_46016)) & 255)) & 255))-0])) ^ (NI32)((NU32)(Crc_46017) >> (NU32)(((NI32) 8))));
return Result_46048;
}
static N_INLINE(NI32, Updatecrc32_46018)(NIM_CHAR Val_46020, NI32 Crc_46021) {
NI32 Result_46053;
Result_46053 = 0;
Result_46053 = Updatecrc32_46014(((NI8) (((NU8)(Val_46020)))), Crc_46021);
return Result_46053;
}
N_NIMCALL(NI32, Newcrcfromropeaux_48968)(TY48008* R_48970, NI32 Startval_48971) {
NI32 Result_48972;
TY48445* Stack_48987;
TY48446 LOC1;
TY48008* It_49012;
NI I_49031;
NI L_49034;
Result_48972 = 0;
Stack_48987 = 0;
Stack_48987 = (TY48445*) newSeq(NTI48445, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = R_48970;
asgnRefNoCycle((void**) &Stack_48987->data[0], LOC1[0]);
Result_48972 = Startval_48971;
while (1) {
if (!(0 < Stack_48987->Sup.len)) goto LA2;
It_49012 = 0;
It_49012 = Pop_48466(&Stack_48987);
while (1) {
if (!((*It_49012).Data == NIM_NIL)) goto LA3;
Stack_48987 = (TY48445*) incrSeq(&(Stack_48987)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48987->data[Stack_48987->Sup.len-1], (*It_49012).Right);
It_49012 = (*It_49012).Left;
} LA3: ;
I_49031 = 0;
I_49031 = 0;
L_49034 = 0;
L_49034 = (*It_49012).Data->Sup.len;
while (1) {
if (!(I_49031 < L_49034)) goto LA4;
Result_48972 = Updatecrc32_46018((*It_49012).Data->data[I_49031], Result_48972);
I_49031 += 1;
} LA4: ;
} LA2: ;
return Result_48972;
}
N_NIMCALL(NI32, Crcfromrope_49052)(TY48008* R_49054) {
NI32 Result_49055;
Result_49055 = 0;
Result_49055 = Newcrcfromropeaux_48968(R_49054, ((NI32) -1));
return Result_49055;
}
N_NIMCALL(void, Newwriteroperec_48666)(FILE** F_48669, TY48008* C_48670) {
TY48445* Stack_48685;
TY48446 LOC1;
TY48008* It_48710;
Stack_48685 = 0;
Stack_48685 = (TY48445*) newSeq(NTI48445, 1);
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = C_48670;
asgnRefNoCycle((void**) &Stack_48685->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_48685->Sup.len)) goto LA2;
It_48710 = 0;
It_48710 = Pop_48466(&Stack_48685);
while (1) {
if (!((*It_48710).Data == NIM_NIL)) goto LA3;
Stack_48685 = (TY48445*) incrSeq(&(Stack_48685)->Sup, sizeof(TY48008*));
asgnRefNoCycle((void**) &Stack_48685->data[Stack_48685->Sup.len-1], (*It_48710).Right);
It_48710 = (*It_48710).Left;
} LA3: ;
Write_3658((*F_48669), (*It_48710).Data);
} LA2: ;
}
N_NIMCALL(void, Writerope_48058)(TY48008* Head_48060, NimStringDesc* Filename_48061) {
FILE* F_48746;
NIM_BOOL LOC2;
F_48746 = 0;
LOC2 = Open_3617(&F_48746, Filename_48061, ((NU8) 1), -1);
if (!LOC2) goto LA3;
if (!!((Head_48060 == NIM_NIL))) goto LA6;
Newwriteroperec_48666(&F_48746, Head_48060);
LA6: ;
fclose(F_48746);
goto LA1;
LA3: ;
Rawmessage_43553(((NU8) 2), Filename_48061);
LA1: ;
}
N_NIMCALL(NIM_BOOL, Writeropeifnotequal_48062)(TY48008* R_48064, NimStringDesc* Filename_48065) {
NIM_BOOL Result_49060;
NI32 C_49061;
NI32 LOC2;
Result_49060 = 0;
C_49061 = 0;
C_49061 = Crcfromfile_46029(Filename_48065);
LOC2 = Crcfromrope_49052(R_48064);
if (!!((C_49061 == LOC2))) goto LA3;
Writerope_48058(R_48064, Filename_48065);
Result_49060 = NIM_TRUE;
goto LA1;
LA3: ;
Result_49060 = NIM_FALSE;
LA1: ;
return Result_49060;
}
N_NIMCALL(NI, Ropelen_48055)(TY48008* A_48057) {
NI Result_48093;
Result_48093 = 0;
if (!(A_48057 == NIM_NIL)) goto LA2;
Result_48093 = 0;
goto LA1;
LA2: ;
Result_48093 = (*A_48057).Length;
LA1: ;
return Result_48093;
}
N_NIMCALL(TY48008*, Pop_48466)(TY48445** S_48471) {
TY48008* Result_48472;
NI L_48483;
Result_48472 = 0;
L_48483 = 0;
L_48483 = (NI64)((*S_48471)->Sup.len - 1);
Result_48472 = (*S_48471)->data[L_48483];
(*S_48471) = (TY48445*) setLengthSeq(&((*S_48471))->Sup, sizeof(TY48008*), L_48483);
return Result_48472;
}
N_NOINLINE(void, ropesInit)(void) {
asgnRefNoCycle((void**) &N_48129, (TY48008*) newObj(NTI48006, sizeof(TY48008)));
(*N_48129).Sup.m_type = NTI48008;
}

