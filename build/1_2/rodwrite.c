/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY49898 TY49898;
typedef struct TY49894 TY49894;
typedef struct TY49896 TY49896;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY98006 TY98006;
typedef struct TY98002 TY98002;
typedef struct TY49545 TY49545;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY86031 TY86031;
typedef struct TY49523 TY49523;
typedef struct TY48005 TY48005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY49549 TY49549;
typedef struct TY48011 TY48011;
typedef struct TY41532 TY41532;
typedef struct TY49527 TY49527;
typedef struct TY49525 TY49525;
typedef struct TY49537 TY49537;
typedef struct TY46008 TY46008;
typedef struct TY49541 TY49541;
typedef struct TY104004 TY104004;
typedef struct TY86029 TY86029;
typedef struct TY53223 TY53223;
typedef struct TY53221 TY53221;
typedef struct TY53219 TY53219;
typedef struct TY49547 TY49547;
typedef struct TY33221 TY33221;
typedef struct TY10202 TY10202;
typedef struct TY10214 TY10214;
typedef struct TY10590 TY10590;
typedef struct TY10218 TY10218;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY53079 TY53079;
typedef struct TY49517 TY49517;
typedef struct TY37013 TY37013;
typedef struct TY49561 TY49561;
typedef struct TY49559 TY49559;
typedef struct TY49557 TY49557;
struct TGenericSeq {
NI len;
NI space;
};
struct TY49898 {
NI Counter;
NI Max;
TY49894* Head;
TY49896* Data;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef N_NIMCALL_PTR(TY98002*, TY98007) (TY49545* Module_98008, NimStringDesc* Filename_98009);
typedef N_NIMCALL_PTR(TY98002*, TY98012) (TY49545* Module_98013, NimStringDesc* Filename_98014, TY86031* Rd_98015);
typedef N_NIMCALL_PTR(TY49523*, TY98018) (TY98002* P_98019, TY49523* N_98020);
typedef N_NIMCALL_PTR(TY49523*, TY98023) (TY98002* P_98024, TY49523* Toplevelstmt_98025);
struct TY98006 {
TY98007 Open;
TY98012 Opencached;
TY98018 Close;
TY98023 Process;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY98002 {
  TNimObject Sup;
};
struct TY53219 {
NI Key;
NI Val;
};
struct TY53223 {
NI Counter;
TY53221* Data;
};
struct TY86029 {
NI Lastidxkey;
NI Lastidxval;
TY53223 Tab;
TY46008* R;
NI Offset;
};
struct TY104004 {
  TY98002 Sup;
TY49545* Module;
NI32 Crc;
NU32 Options;
TY46008* Defines;
TY46008* Incldeps;
TY46008* Moddeps;
TY46008* Interf;
TY46008* Compilerprocs;
TY86029 Index;
TY86029 Imports;
TY46008* Converters;
TY46008* Init;
TY46008* Data;
NimStringDesc* Filename;
TY49525* Sstack;
TY49547* Tstack;
TY33221* Files;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TY53079 {
NI H;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
typedef TY46008* TY169860[2];
typedef TY46008* TY46446[1];
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
typedef TY46008* TY154033[3];
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
typedef NI TY8214[8];
struct TY49894 {
TY49894* Next;
NI Key;
TY8214 Bits;
};
struct TY49557 {
TY48005* Key;
TNimObject* Val;
};
struct TY49561 {
NI Counter;
TY49559* Data;
};
struct TY86031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY33221* Moddeps;
TY33221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY86029 Index;
TY86029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY49561 Syms;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY49896 {
  TGenericSeq Sup;
  TY49894* data[SEQ_DECL_SIZE];
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
struct TY53221 {
  TGenericSeq Sup;
  TY53219 data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
struct TY33221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
struct TY49559 {
  TGenericSeq Sup;
  TY49557 data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Intsetinit_49922)(TY49898* S_49925);
N_NIMCALL(void, Initpass_98031)(TY98006* P_98034);
N_NIMCALL(TY98002*, Myopen_105964)(TY49545* Module_105966, NimStringDesc* Filename_105967);
N_NIMCALL(void, Internalerror_41571)(NimStringDesc* Errmsg_41573);
N_NIMCALL(TY104004*, Newrodwriter_104024)(NimStringDesc* Modfilename_104026, NI32 Crc_104027, TY49545* Module_104028);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413);
static N_INLINE(void, Incref_11401)(TY10202* C_11403);
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628);
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Decref_11260)(TY10202* C_11262);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(void, Initiitable_53228)(TY53223* X_53231);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(TY46008*, Getdefines_104056)(void);
N_NIMCALL(TY49545*, Inittabiter_53081)(TY53079* Ti_53084, TY49527* Tab_53085);
N_NIMCALL(void, App_46036)(TY46008** A_46039, NimStringDesc* B_46040);
N_NIMCALL(TY49545*, Nextiter_53086)(TY53079* Ti_53089, TY49527* Tab_53090);
N_NIMCALL(NI32, Getcrc_86064)(NimStringDesc* Filename_86066);
N_NIMCALL(void, Rawaddinterfacesym_105327)(TY104004* W_105329, TY49545* S_105330);
N_NIMCALL(void, Pushsym_104272)(TY104004* W_104274, TY49545* S_104275);
N_NIMCALL(NI, Iitableget_53232)(TY53223 T_53234, NI Key_53235);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(void, Processstacks_104053)(TY104004* W_104055);
N_NIMCALL(void, Symstack_105098)(TY104004* W_105100);
N_NIMCALL(TY49545*, Getmodule_53206)(TY49545* S_53208);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(NI, Ropelen_46055)(TY46008* A_46057);
N_NIMCALL(void, Addtoindex_105073)(TY86029* W_105076, NI Key_105077, NI Val_105078);
N_NIMCALL(void, App_46031)(TY46008** A_46034, TY46008* B_46035);
N_NIMCALL(TY46008*, Encodeint_86073)(NI64 X_86075);
N_NIMCALL(void, Appf_46074)(TY46008** C_46077, NimStringDesc* Frmt_46078, TY46008** Args_46080, NI Args_46080Len0);
N_NIMCALL(void, Iitableput_53236)(TY53223* T_53239, NI Key_53240, NI Val_53241);
N_NIMCALL(TY46008*, Encodesym_104860)(TY104004* W_104862, TY49545* S_104863);
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048);
N_NIMCALL(TY46008*, Encodestr_104048)(TY104004* W_104050, NimStringDesc* S_104051);
N_NIMCALL(TY46008*, Encode_86076)(NimStringDesc* S_86078);
N_NIMCALL(void, Pushtype_104243)(TY104004* W_104245, TY49549* T_104246);
N_NIMCALL(NI, Fileidx_104090)(TY104004* W_104092, NimStringDesc* Filename_104093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848);
N_NIMCALL(NimStringDesc*, Tofilename_41579)(TY41532 Info_41581);
N_NIMCALL(NIM_BOOL, Astneeded_98041)(TY49545* S_98043);
N_NIMCALL(TY46008*, Encodenode_104301)(TY104004* W_104303, TY41532 Finfo_104304, TY49523* N_104305);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_17660);
N_NIMCALL(NI, Sonslen_49801)(TY49523* N_49803);
N_NIMCALL(TY46008*, Encodeloc_104553)(TY104004* W_104555, TY49537* Loc_104556);
N_NIMCALL(NimStringDesc*, Ropetostr_46066)(TY46008* P_46068);
N_NIMCALL(TY46008*, Ropef_46069)(NimStringDesc* Frmt_46071, TY46008** Args_46073, NI Args_46073Len0);
N_NIMCALL(TY46008*, Encodelib_104834)(TY104004* W_104836, TY49541* Lib_104837, TY41532 Info_104838);
N_NIMCALL(void, Typestack_105252)(TY104004* W_105254);
N_NIMCALL(TY46008*, Encodetype_104664)(TY104004* W_104666, TY49549* T_104667);
N_NIMCALL(TY41532, Unknownlineinfo_41536)(void);
N_NIMCALL(NI, Sonslen_49804)(TY49549* N_49806);
N_NIMCALL(TY49523*, Myclose_105972)(TY98002* C_105974, TY49523* N_105975);
N_NIMCALL(void, Writerod_104045)(TY104004* W_104047);
N_NIMCALL(void, Writerope_46058)(TY46008* Head_46060, NimStringDesc* Filename_46061);
N_NIMCALL(NimStringDesc*, Completegeneratedfilepath_40099)(NimStringDesc* F_40101, NIM_BOOL Createsubdir_40102);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_32820, NimStringDesc* Ext_32821);
N_NIMCALL(TY49523*, Process_105537)(TY98002* C_105539, TY49523* N_105540);
N_NIMCALL(void, Addinterfacesym_104037)(TY104004* W_104039, TY49545* S_104040);
N_NIMCALL(void, Internalerror_41567)(TY41532 Info_41569, NimStringDesc* Errmsg_41570);
N_NIMCALL(void, Addmoddep_104029)(TY104004* W_104031, NimStringDesc* Dep_104032);
N_NIMCALL(NimStringDesc*, Getmodulefile_103013)(TY49523* N_103015);
N_NIMCALL(void, Addstmt_104041)(TY104004* W_104043, TY49523* N_104044);
N_NIMCALL(void, Addincldep_104033)(TY104004* W_104035, NimStringDesc* Dep_104036);
N_NIMCALL(NI32, Crcfromfile_44029)(NimStringDesc* Filename_44031);
STRING_LITERAL(TMP191819, "rodwrite: module ID not set", 27);
STRING_LITERAL(TMP191821, " ", 1);
STRING_LITERAL(TMP191822, "symStack: module nil: ", 22);
STRING_LITERAL(TMP191823, "\012", 1);
STRING_LITERAL(TMP191824, "$1 $2\012", 6);
STRING_LITERAL(TMP191825, "{}", 2);
STRING_LITERAL(TMP191826, "+$1", 3);
STRING_LITERAL(TMP191827, "&$1", 3);
STRING_LITERAL(TMP191828, "^$1", 3);
STRING_LITERAL(TMP191829, "?$1,$2,$3", 9);
STRING_LITERAL(TMP191830, "*$1", 3);
STRING_LITERAL(TMP191831, "$$$1", 4);
STRING_LITERAL(TMP191832, "@$1", 3);
STRING_LITERAL(TMP191833, "()", 2);
STRING_LITERAL(TMP191834, "(", 1);
STRING_LITERAL(TMP191835, "?$1,$2", 6);
STRING_LITERAL(TMP191836, "?$1", 3);
STRING_LITERAL(TMP191837, "!$1", 3);
STRING_LITERAL(TMP191838, ")", 1);
STRING_LITERAL(TMP191839, "%$1", 3);
STRING_LITERAL(TMP191840, "`$1", 3);
STRING_LITERAL(TMP191841, "<$1>", 4);
STRING_LITERAL(TMP191842, "|$1", 3);
STRING_LITERAL(TMP191843, "[]", 2);
STRING_LITERAL(TMP191844, "encodeType: tyForward", 21);
STRING_LITERAL(TMP191845, "/$1", 3);
STRING_LITERAL(TMP191846, "=$1", 3);
STRING_LITERAL(TMP191847, "^()", 3);
STRING_LITERAL(TMP191848, "NIM:", 4);
STRING_LITERAL(TMP191849, "1012", 4);
STRING_LITERAL(TMP191850, "ID:", 3);
STRING_LITERAL(TMP191851, "CRC:", 4);
STRING_LITERAL(TMP191852, "OPTIONS:", 8);
STRING_LITERAL(TMP191853, "DEFINES:", 8);
STRING_LITERAL(TMP191854, "FILES(\012", 7);
STRING_LITERAL(TMP191855, ")\012", 2);
STRING_LITERAL(TMP191856, "INCLUDES(\012", 10);
STRING_LITERAL(TMP191857, "DEPS:", 5);
STRING_LITERAL(TMP191858, "INTERF(\012", 8);
STRING_LITERAL(TMP191859, "COMPILERPROCS(\012", 15);
STRING_LITERAL(TMP191860, "INDEX(\012", 7);
STRING_LITERAL(TMP191861, "IMPORTS(\012", 9);
STRING_LITERAL(TMP191862, "CONVERTERS:", 11);
STRING_LITERAL(TMP191863, "INIT(\012", 6);
STRING_LITERAL(TMP191864, "DATA(\012", 6);
STRING_LITERAL(TMP191865, "rod", 3);
STRING_LITERAL(TMP191866, "rodwrite.process", 16);
TY49898 Debugwritten_105097;
extern NU32 Gglobaloptions_40077;
extern TNimType* NTI104006; /* PRodWriter */
extern TNimType* NTI104004; /* TRodWriter */
extern TNimType* NTI49525; /* TSymSeq */
extern TY10590 Gch_10608;
extern TNimType* NTI49547; /* TTypeSeq */
extern TY49527 Gsymbols_57001;
extern NU32 Goptions_40075;
extern TNimType* NTI33221; /* seq[string] */
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628) {
NIM_BOOL Result_10629;
Result_10629 = 0;
Result_10629 = !((((*(*C_10628).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_10629;
}
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254) {
Incl_10474(&Gch_10608.Cycleroots, C_11254);
}
static N_INLINE(void, Incref_11401)(TY10202* C_11403) {
NIM_BOOL LOC2;
(*C_11403).Refcount = (NI64)((NU64)((*C_11403).Refcount) + (NU64)(8));
LOC2 = Canbecycleroot_10626(C_11403);
if (!LOC2) goto LA3;
Rtladdcycleroot_11252(C_11403);
LA3: ;
}
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI64)((NU64)(((NI) (Usr_10624))) - (NU64)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, Decref_11260)(TY10202* C_11262) {
NIM_BOOL LOC4;
(*C_11262).Refcount = (NI64)((NU64)((*C_11262).Refcount) - (NU64)(8));
if (!((NU64)((*C_11262).Refcount) < (NU64)(8))) goto LA2;
Rtladdzct_11256(C_11262);
goto LA1;
LA2: ;
LOC4 = Canbecycleroot_10626(C_11262);
if (!LOC4) goto LA5;
Rtladdcycleroot_11252(C_11262);
goto LA1;
LA5: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413) {
TY10202* LOC4;
TY10202* LOC8;
if (!!((Src_11413 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_10622(Src_11413);
Incref_11401(LOC4);
LA2: ;
if (!!(((*Dest_11412) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_10622((*Dest_11412));
Decref_11260(LOC8);
LA6: ;
(*Dest_11412) = Src_11413;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI64)((NU64)((*C_11418).Refcount) + (NU64)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI64)((NU64)((*C_11419).Refcount) - (NU64)(8));
if (!((NU64)((*C_11419).Refcount) < (NU64)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(TY46008*, Getdefines_104056)(void) {
TY46008* Result_104058;
TY53079 It_104059;
TY49545* S_104061;
Result_104058 = 0;
memset((void*)&It_104059, 0, sizeof(It_104059));
S_104061 = 0;
S_104061 = Inittabiter_53081(&It_104059, &Gsymbols_57001);
Result_104058 = NIM_NIL;
while (1) {
if (!!((S_104061 == NIM_NIL))) goto LA1;
if (!((*S_104061).Position == 1)) goto LA3;
if (!!((Result_104058 == NIM_NIL))) goto LA6;
App_46036(&Result_104058, ((NimStringDesc*) &TMP191821));
LA6: ;
App_46036(&Result_104058, (*(*S_104061).Name).S);
LA3: ;
S_104061 = Nextiter_53086(&It_104059, &Gsymbols_57001);
} LA1: ;
return Result_104058;
}
N_NIMCALL(TY104004*, Newrodwriter_104024)(NimStringDesc* Modfilename_104026, NI32 Crc_104027, TY49545* Module_104028) {
TY104004* Result_104151;
Result_104151 = 0;
Result_104151 = (TY104004*) newObj(NTI104006, sizeof(TY104004));
(*Result_104151).Sup.Sup.m_type = NTI104004;
asgnRef((void**) &(*Result_104151).Sstack, (TY49525*) newSeq(NTI49525, 0));
asgnRef((void**) &(*Result_104151).Tstack, (TY49547*) newSeq(NTI49547, 0));
Initiitable_53228(&(*Result_104151).Index.Tab);
Initiitable_53228(&(*Result_104151).Imports.Tab);
asgnRefNoCycle((void**) &(*Result_104151).Filename, copyString(Modfilename_104026));
(*Result_104151).Crc = Crc_104027;
asgnRef((void**) &(*Result_104151).Module, Module_104028);
asgnRefNoCycle((void**) &(*Result_104151).Defines, Getdefines_104056());
(*Result_104151).Options = Goptions_40075;
asgnRefNoCycle((void**) &(*Result_104151).Files, (TY33221*) newSeq(NTI33221, 0));
return Result_104151;
}
N_NIMCALL(void, Pushsym_104272)(TY104004* W_104274, TY49545* S_104275) {
NI LOC2;
NI L_104288;
LOC2 = Iitableget_53232((*W_104274).Index.Tab, (*S_104275).Sup.Id);
if (!(LOC2 == (IL64(-9223372036854775807) - IL64(1)))) goto LA3;
L_104288 = 0;
L_104288 = (*W_104274).Sstack->Sup.len;
(*W_104274).Sstack = (TY49525*) setLengthSeq(&((*W_104274).Sstack)->Sup, sizeof(TY49545*), (NI64)(L_104288 + 1));
asgnRef((void**) &(*W_104274).Sstack->data[L_104288], S_104275);
LA3: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI64)((NI64)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
N_NIMCALL(void, Addtoindex_105073)(TY86029* W_105076, NI Key_105077, NI Val_105078) {
TY46008* LOC4;
TY169860 LOC5;
if (!((NI64)(Key_105077 - (*W_105076).Lastidxkey) == 1)) goto LA2;
LOC4 = Encodeint_86073(((NI64) ((NI64)(Val_105078 - (*W_105076).Lastidxval))));
App_46031(&(*W_105076).R, LOC4);
App_46036(&(*W_105076).R, ((NimStringDesc*) &TMP191823));
goto LA1;
LA2: ;
LOC5[0] = Encodeint_86073(((NI64) ((NI64)(Key_105077 - (*W_105076).Lastidxkey))));
LOC5[1] = Encodeint_86073(((NI64) ((NI64)(Val_105078 - (*W_105076).Lastidxval))));
Appf_46074(&(*W_105076).R, ((NimStringDesc*) &TMP191824), LOC5, 2);
LA1: ;
(*W_105076).Lastidxkey = Key_105077;
(*W_105076).Lastidxval = Val_105078;
Iitableput_53236(&(*W_105076).Tab, Key_105077, Val_105078);
}
N_NIMCALL(TY46008*, Encodestr_104048)(TY104004* W_104050, NimStringDesc* S_104051) {
TY46008* Result_104052;
Result_104052 = 0;
Result_104052 = Encode_86076(S_104051);
return Result_104052;
}
N_NIMCALL(void, Pushtype_104243)(TY104004* W_104245, TY49549* T_104246) {
NI LOC2;
NI L_104259;
LOC2 = Iitableget_53232((*W_104245).Index.Tab, (*T_104246).Sup.Id);
if (!(LOC2 == (IL64(-9223372036854775807) - IL64(1)))) goto LA3;
L_104259 = 0;
L_104259 = (*W_104245).Tstack->Sup.len;
(*W_104245).Tstack = (TY49547*) setLengthSeq(&((*W_104245).Tstack)->Sup, sizeof(TY49549*), (NI64)(L_104259 + 1));
asgnRef((void**) &(*W_104245).Tstack->data[L_104259], T_104246);
LA3: ;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848) {
NIM_BOOL Result_16849;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_16849 = 0;
if (!(A_16847 == B_16848)) goto LA2;
Result_16849 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_16847 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_16848 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_16849 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_16847).Sup.len == (*B_16848).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_16847).data)), ((NCSTRING) ((*B_16848).data)), ((NI32) ((NI64)((*A_16847).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_16849 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_16849;
}
N_NIMCALL(NI, Fileidx_104090)(TY104004* W_104092, NimStringDesc* Filename_104093) {
NI Result_104094;
NI I_104117;
NI HEX3Atmp_104141;
NI Res_104143;
Result_104094 = 0;
I_104117 = 0;
HEX3Atmp_104141 = 0;
HEX3Atmp_104141 = ((*W_104092).Files->Sup.len-1);
Res_104143 = 0;
Res_104143 = 0;
while (1) {
if (!(Res_104143 <= HEX3Atmp_104141)) goto LA1;
I_104117 = Res_104143;
if (!eqStrings((*W_104092).Files->data[I_104117], Filename_104093)) goto LA3;
Result_104094 = I_104117;
goto BeforeRet;
LA3: ;
Res_104143 += 1;
} LA1: ;
Result_104094 = (*W_104092).Files->Sup.len;
(*W_104092).Files = (TY33221*) setLengthSeq(&((*W_104092).Files)->Sup, sizeof(NimStringDesc*), (NI64)(Result_104094 + 1));
asgnRefNoCycle((void**) &(*W_104092).Files->data[Result_104094], copyString(Filename_104093));
BeforeRet: ;
return Result_104094;
}
N_NIMCALL(TY46008*, Encodenode_104301)(TY104004* W_104303, TY41532 Finfo_104304, TY49523* N_104305) {
TY46008* Result_104306;
TY46008* LOC4;
TY154033 LOC8;
NimStringDesc* LOC9;
NI LOC10;
TY169860 LOC13;
TY46446 LOC16;
NU8 F_104355;
TY46446 LOC20;
TY46446 LOC24;
TY46446 LOC28;
TY46446 LOC32;
NimStringDesc* LOC33;
TY46446 LOC37;
TY46446 LOC38;
TY46446 LOC39;
NI I_104532;
NI HEX3Atmp_104548;
NI LOC40;
NI Res_104550;
TY46008* LOC42;
Result_104306 = 0;
if (!(N_104305 == NIM_NIL)) goto LA2;
Result_104306 = Torope_46046(((NimStringDesc*) &TMP191833));
goto BeforeRet;
LA2: ;
Result_104306 = Torope_46046(((NimStringDesc*) &TMP191834));
LOC4 = Encodeint_86073(((NI64) ((*N_104305).Kind)));
App_46031(&Result_104306, LOC4);
if (!!((Finfo_104304.Fileindex == (*N_104305).Info.Fileindex))) goto LA6;
LOC8[0] = Encodeint_86073(((NI64) ((*N_104305).Info.Col)));
LOC8[1] = Encodeint_86073(((NI64) ((*N_104305).Info.Line)));
LOC9 = Tofilename_41579((*N_104305).Info);
LOC10 = Fileidx_104090(W_104303, LOC9);
LOC8[2] = Encodeint_86073(((NI64) (LOC10)));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191829), LOC8, 3);
goto LA5;
LA6: ;
if (!!((Finfo_104304.Line == (*N_104305).Info.Line))) goto LA11;
LOC13[0] = Encodeint_86073(((NI64) ((*N_104305).Info.Col)));
LOC13[1] = Encodeint_86073(((NI64) ((*N_104305).Info.Line)));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191835), LOC13, 2);
goto LA5;
LA11: ;
if (!!((Finfo_104304.Col == (*N_104305).Info.Col))) goto LA14;
LOC16[0] = Encodeint_86073(((NI64) ((*N_104305).Info.Col)));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191836), LOC16, 1);
goto LA5;
LA14: ;
LA5: ;
memset((void*)&F_104355, 0, sizeof(F_104355));
F_104355 = ((*N_104305).Flags & 30);
if (!!((F_104355 == 0))) goto LA18;
LOC20[0] = Encodeint_86073(((NI64) (((NI32) (F_104355)))));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191831), LOC20, 1);
LA18: ;
if (!!(((*N_104305).Typ == NIM_NIL))) goto LA22;
LOC24[0] = Encodeint_86073(((NI64) ((*(*N_104305).Typ).Sup.Id)));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191828), LOC24, 1);
Pushtype_104243(W_104303, (*N_104305).Typ);
LA22: ;
switch ((*N_104305).Kind) {
case ((NU8) 5) ... ((NU8) 10):
if (!!(((*N_104305).KindU.S1.Intval == 0))) goto LA26;
LOC28[0] = Encodeint_86073((*N_104305).KindU.S1.Intval);
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191837), LOC28, 1);
LA26: ;
break;
case ((NU8) 11) ... ((NU8) 13):
if (!!((((NF) ((*N_104305).KindU.S2.Floatval)) == 0.000000))) goto LA30;
LOC33 = nimFloatToStr(((NF) ((*N_104305).KindU.S2.Floatval)));
LOC32[0] = Encodestr_104048(W_104303, LOC33);
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191837), LOC32, 1);
LA30: ;
break;
case ((NU8) 14) ... ((NU8) 16):
if (!!((((*N_104305).KindU.S3.Strval) && ((*N_104305).KindU.S3.Strval)->Sup.len == 0))) goto LA35;
LOC37[0] = Encodestr_104048(W_104303, (*N_104305).KindU.S3.Strval);
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191837), LOC37, 1);
LA35: ;
break;
case ((NU8) 2):
LOC38[0] = Encodestr_104048(W_104303, (*(*N_104305).KindU.S5.Ident).S);
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191837), LOC38, 1);
break;
case ((NU8) 3):
LOC39[0] = Encodeint_86073(((NI64) ((*(*N_104305).KindU.S4.Sym).Sup.Id)));
Appf_46074(&Result_104306, ((NimStringDesc*) &TMP191837), LOC39, 1);
Pushsym_104272(W_104303, (*N_104305).KindU.S4.Sym);
break;
default:
I_104532 = 0;
HEX3Atmp_104548 = 0;
LOC40 = Sonslen_49801(N_104305);
HEX3Atmp_104548 = (NI64)(LOC40 - 1);
Res_104550 = 0;
Res_104550 = 0;
while (1) {
if (!(Res_104550 <= HEX3Atmp_104548)) goto LA41;
I_104532 = Res_104550;
LOC42 = Encodenode_104301(W_104303, (*N_104305).Info, (*N_104305).KindU.S6.Sons->data[I_104532]);
App_46031(&Result_104306, LOC42);
Res_104550 += 1;
} LA41: ;
break;
}
App_46036(&Result_104306, ((NimStringDesc*) &TMP191838));
BeforeRet: ;
return Result_104306;
}
N_NIMCALL(TY46008*, Encodeloc_104553)(TY104004* W_104555, TY49537* Loc_104556) {
TY46008* Result_104557;
TY46008* LOC4;
TY46446 LOC8;
TY46446 LOC12;
TY46446 LOC16;
TY46446 LOC20;
NimStringDesc* LOC21;
TY46446 LOC25;
TY46446 LOC29;
Result_104557 = 0;
Result_104557 = NIM_NIL;
if (!!(((*Loc_104556).K == ((NU8) 0)))) goto LA2;
LOC4 = Encodeint_86073(((NI64) ((*Loc_104556).K)));
App_46031(&Result_104557, LOC4);
LA2: ;
if (!!(((*Loc_104556).S == ((NU8) 0)))) goto LA6;
LOC8[0] = Encodeint_86073(((NI64) ((*Loc_104556).S)));
Appf_46074(&Result_104557, ((NimStringDesc*) &TMP191830), LOC8, 1);
LA6: ;
if (!!(((*Loc_104556).Flags == 0))) goto LA10;
LOC12[0] = Encodeint_86073(((NI64) (((NI32) ((*Loc_104556).Flags)))));
Appf_46074(&Result_104557, ((NimStringDesc*) &TMP191831), LOC12, 1);
LA10: ;
if (!!(((*Loc_104556).T == NIM_NIL))) goto LA14;
LOC16[0] = Encodeint_86073(((NI64) ((*(*Loc_104556).T).Sup.Id)));
Appf_46074(&Result_104557, ((NimStringDesc*) &TMP191828), LOC16, 1);
Pushtype_104243(W_104555, (*Loc_104556).T);
LA14: ;
if (!!(((*Loc_104556).R == NIM_NIL))) goto LA18;
LOC21 = Ropetostr_46066((*Loc_104556).R);
LOC20[0] = Encodestr_104048(W_104555, LOC21);
Appf_46074(&Result_104557, ((NimStringDesc*) &TMP191837), LOC20, 1);
LA18: ;
if (!!(((*Loc_104556).A == 0))) goto LA23;
LOC25[0] = Encodeint_86073(((NI64) ((*Loc_104556).A)));
Appf_46074(&Result_104557, ((NimStringDesc*) &TMP191836), LOC25, 1);
LA23: ;
if (!!((Result_104557 == NIM_NIL))) goto LA27;
LOC29[0] = Result_104557;
Result_104557 = Ropef_46069(((NimStringDesc*) &TMP191841), LOC29, 1);
LA27: ;
return Result_104557;
}
N_NIMCALL(TY46008*, Encodelib_104834)(TY104004* W_104836, TY49541* Lib_104837, TY41532 Info_104838) {
TY46008* Result_104839;
TY46446 LOC1;
TY46446 LOC2;
NimStringDesc* LOC3;
TY46446 LOC4;
Result_104839 = 0;
Result_104839 = NIM_NIL;
LOC1[0] = Encodeint_86073(((NI64) ((*Lib_104837).Kind)));
Appf_46074(&Result_104839, ((NimStringDesc*) &TMP191842), LOC1, 1);
LOC3 = Ropetostr_46066((*Lib_104837).Name);
LOC2[0] = Encodestr_104048(W_104836, LOC3);
Appf_46074(&Result_104839, ((NimStringDesc*) &TMP191842), LOC2, 1);
LOC4[0] = Encodenode_104301(W_104836, Info_104838, (*Lib_104837).Path);
Appf_46074(&Result_104839, ((NimStringDesc*) &TMP191842), LOC4, 1);
return Result_104839;
}
N_NIMCALL(TY46008*, Encodesym_104860)(TY104004* W_104862, TY49545* S_104863) {
TY46008* Result_104864;
TY49523* Codeast_104865;
TY46008* Col_104866;
TY46008* Line_104867;
TY46008* LOC4;
TY46446 LOC5;
TY46446 LOC6;
TY46446 LOC10;
TY154033 LOC17;
NimStringDesc* LOC18;
NI LOC19;
TY46446 LOC23;
TY46446 LOC27;
TY46446 LOC31;
NIM_BOOL LOC36;
TY46008* LOC39;
TY46446 LOC46;
TY46446 LOC50;
TY46446 LOC54;
TY46008* LOC55;
TY46008* LOC59;
Result_104864 = 0;
Codeast_104865 = 0;
Col_104866 = 0;
Line_104867 = 0;
Codeast_104865 = NIM_NIL;
if (!(S_104863 == NIM_NIL)) goto LA2;
Result_104864 = Torope_46046(((NimStringDesc*) &TMP191825));
goto BeforeRet;
LA2: ;
Result_104864 = NIM_NIL;
LOC4 = Encodeint_86073(((NI64) ((*S_104863).Kind)));
App_46031(&Result_104864, LOC4);
LOC5[0] = Encodeint_86073(((NI64) ((*S_104863).Sup.Id)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191826), LOC5, 1);
LOC6[0] = Encodestr_104048(W_104862, (*(*S_104863).Name).S);
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191827), LOC6, 1);
if (!!(((*S_104863).Typ == NIM_NIL))) goto LA8;
LOC10[0] = Encodeint_86073(((NI64) ((*(*S_104863).Typ).Sup.Id)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191828), LOC10, 1);
Pushtype_104243(W_104862, (*S_104863).Typ);
LA8: ;
if (!((*S_104863).Info.Col == ((NI16) -1))) goto LA12;
Col_104866 = NIM_NIL;
goto LA11;
LA12: ;
Col_104866 = Encodeint_86073(((NI64) ((*S_104863).Info.Col)));
LA11: ;
if (!((*S_104863).Info.Line == ((NI16) -1))) goto LA15;
Line_104867 = NIM_NIL;
goto LA14;
LA15: ;
Line_104867 = Encodeint_86073(((NI64) ((*S_104863).Info.Line)));
LA14: ;
LOC17[0] = Col_104866;
LOC17[1] = Line_104867;
LOC18 = Tofilename_41579((*S_104863).Info);
LOC19 = Fileidx_104090(W_104862, LOC18);
LOC17[2] = Encodeint_86073(((NI64) (LOC19)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191829), LOC17, 3);
if (!!(((*S_104863).Owner == NIM_NIL))) goto LA21;
LOC23[0] = Encodeint_86073(((NI64) ((*(*S_104863).Owner).Sup.Id)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191830), LOC23, 1);
Pushsym_104272(W_104862, (*S_104863).Owner);
LA21: ;
if (!!(((*S_104863).Flags == 0))) goto LA25;
LOC27[0] = Encodeint_86073(((NI64) (((NI32) ((*S_104863).Flags)))));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191831), LOC27, 1);
LA25: ;
if (!!(((*S_104863).Magic == ((NU8) 0)))) goto LA29;
LOC31[0] = Encodeint_86073(((NI64) ((*S_104863).Magic)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191832), LOC31, 1);
LA29: ;
if (!!(((*S_104863).Ast == NIM_NIL))) goto LA33;
LOC36 = Astneeded_98041(S_104863);
if (!!(LOC36)) goto LA37;
Codeast_104865 = (*(*S_104863).Ast).KindU.S6.Sons->data[4];
asgnRefNoCycle((void**) &(*(*S_104863).Ast).KindU.S6.Sons->data[4], NIM_NIL);
LA37: ;
LOC39 = Encodenode_104301(W_104862, (*S_104863).Info, (*S_104863).Ast);
App_46031(&Result_104864, LOC39);
if (!!((Codeast_104865 == NIM_NIL))) goto LA41;
asgnRefNoCycle((void**) &(*(*S_104863).Ast).KindU.S6.Sons->data[4], Codeast_104865);
LA41: ;
LA33: ;
if (!!(((*S_104863).Options == (*W_104862).Options))) goto LA44;
LOC46[0] = Encodeint_86073(((NI64) (((NI32) ((*S_104863).Options)))));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191837), LOC46, 1);
LA44: ;
if (!!(((*S_104863).Position == 0))) goto LA48;
LOC50[0] = Encodeint_86073(((NI64) ((*S_104863).Position)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191839), LOC50, 1);
LA48: ;
if (!!(((*S_104863).Offset == -1))) goto LA52;
LOC54[0] = Encodeint_86073(((NI64) ((*S_104863).Offset)));
Appf_46074(&Result_104864, ((NimStringDesc*) &TMP191840), LOC54, 1);
LA52: ;
LOC55 = Encodeloc_104553(W_104862, &(*S_104863).Loc);
App_46031(&Result_104864, LOC55);
if (!!(((*S_104863).Annex == NIM_NIL))) goto LA57;
LOC59 = Encodelib_104834(W_104862, (*S_104863).Annex, (*S_104863).Info);
App_46031(&Result_104864, LOC59);
LA57: ;
BeforeRet: ;
return Result_104864;
}
N_NIMCALL(void, Symstack_105098)(TY104004* W_105100) {
NI I_105101;
NI L_105102;
TY49545* S_105103;
TY49545* M_105104;
NI LOC3;
NimStringDesc* LOC9;
NIM_BOOL LOC11;
TY46008* LOC15;
TY169860 LOC19;
TY169860 LOC23;
TY46008* LOC30;
NI LOC31;
I_105101 = 0;
L_105102 = 0;
S_105103 = 0;
M_105104 = 0;
I_105101 = 0;
while (1) {
if (!(I_105101 < (*W_105100).Sstack->Sup.len)) goto LA1;
S_105103 = (*W_105100).Sstack->data[I_105101];
LOC3 = Iitableget_53232((*W_105100).Index.Tab, (*S_105103).Sup.Id);
if (!(LOC3 == (IL64(-9223372036854775807) - IL64(1)))) goto LA4;
M_105104 = Getmodule_53206(S_105103);
if (!(M_105104 == NIM_NIL)) goto LA7;
LOC9 = rawNewString((*(*S_105103).Name).S->Sup.len + 22);
appendString(LOC9, ((NimStringDesc*) &TMP191822));
appendString(LOC9, (*(*S_105103).Name).S);
Internalerror_41571(LOC9);
LA7: ;
LOC11 = ((*M_105104).Sup.Id == (*(*W_105100).Module).Sup.Id);
if (LOC11) goto LA12;
LOC11 = (((*S_105103).Flags &(1<<((((NU8) 4))&31)))!=0);
LA12: ;
if (!LOC11) goto LA13;
L_105102 = Ropelen_46055((*W_105100).Data);
Addtoindex_105073(&(*W_105100).Index, (*S_105103).Sup.Id, L_105102);
LOC15 = Encodesym_104860(W_105100, S_105103);
App_46031(&(*W_105100).Data, LOC15);
App_46036(&(*W_105100).Data, ((NimStringDesc*) &TMP191823));
if (!(((*S_105103).Flags &(1<<((((NU8) 3))&31)))!=0)) goto LA17;
LOC19[0] = Encode_86076((*(*S_105103).Name).S);
LOC19[1] = Encodeint_86073(((NI64) ((*S_105103).Sup.Id)));
Appf_46074(&(*W_105100).Interf, ((NimStringDesc*) &TMP191824), LOC19, 2);
LA17: ;
if (!(((*S_105103).Flags &(1<<((((NU8) 19))&31)))!=0)) goto LA21;
LOC23[0] = Encode_86076((*(*S_105103).Name).S);
LOC23[1] = Encodeint_86073(((NI64) ((*S_105103).Sup.Id)));
Appf_46074(&(*W_105100).Compilerprocs, ((NimStringDesc*) &TMP191824), LOC23, 2);
LA21: ;
if (!((*S_105103).Kind == ((NU8) 12))) goto LA25;
if (!!(((*W_105100).Converters == NIM_NIL))) goto LA28;
App_46036(&(*W_105100).Converters, ((NimStringDesc*) &TMP191821));
LA28: ;
LOC30 = Encodeint_86073(((NI64) ((*S_105103).Sup.Id)));
App_46031(&(*W_105100).Converters, LOC30);
LA25: ;
goto LA10;
LA13: ;
LOC31 = Iitableget_53232((*W_105100).Imports.Tab, (*S_105103).Sup.Id);
if (!(LOC31 == (IL64(-9223372036854775807) - IL64(1)))) goto LA32;
Addtoindex_105073(&(*W_105100).Imports, (*S_105103).Sup.Id, (*M_105104).Sup.Id);
goto LA10;
LA32: ;
LA10: ;
LA4: ;
I_105101 += 1;
} LA1: ;
(*W_105100).Sstack = (TY49525*) setLengthSeq(&((*W_105100).Sstack)->Sup, sizeof(TY49545*), 0);
}
N_NIMCALL(TY46008*, Encodetype_104664)(TY104004* W_104666, TY49549* T_104667) {
TY46008* Result_104668;
TY46008* LOC7;
TY46446 LOC8;
TY41532 LOC12;
TY46008* LOC13;
TY46446 LOC17;
TY46446 LOC21;
TY46446 LOC25;
TY46446 LOC29;
TY46446 LOC33;
TY46446 LOC37;
TY46446 LOC41;
TY46008* LOC42;
NI I_104810;
NI HEX3Atmp_104829;
NI LOC43;
NI Res_104831;
TY46446 LOC48;
Result_104668 = 0;
if (!(T_104667 == NIM_NIL)) goto LA2;
Result_104668 = Torope_46046(((NimStringDesc*) &TMP191843));
goto BeforeRet;
LA2: ;
Result_104668 = NIM_NIL;
if (!((*T_104667).Kind == ((NU8) 30))) goto LA5;
Internalerror_41571(((NimStringDesc*) &TMP191844));
LA5: ;
LOC7 = Encodeint_86073(((NI64) ((*T_104667).Kind)));
App_46031(&Result_104668, LOC7);
LOC8[0] = Encodeint_86073(((NI64) ((*T_104667).Sup.Id)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191826), LOC8, 1);
if (!!(((*T_104667).N == NIM_NIL))) goto LA10;
LOC12 = Unknownlineinfo_41536();
LOC13 = Encodenode_104301(W_104666, LOC12, (*T_104667).N);
App_46031(&Result_104668, LOC13);
LA10: ;
if (!!(((*T_104667).Flags == 0))) goto LA15;
LOC17[0] = Encodeint_86073(((NI64) (((NI32) ((*T_104667).Flags)))));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191831), LOC17, 1);
LA15: ;
if (!!(((*T_104667).Callconv == ((NU8) 0)))) goto LA19;
LOC21[0] = Encodeint_86073(((NI64) ((*T_104667).Callconv)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191836), LOC21, 1);
LA19: ;
if (!!(((*T_104667).Owner == NIM_NIL))) goto LA23;
LOC25[0] = Encodeint_86073(((NI64) ((*(*T_104667).Owner).Sup.Id)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191830), LOC25, 1);
Pushsym_104272(W_104666, (*T_104667).Owner);
LA23: ;
if (!!(((*T_104667).Sym == NIM_NIL))) goto LA27;
LOC29[0] = Encodeint_86073(((NI64) ((*(*T_104667).Sym).Sup.Id)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191827), LOC29, 1);
Pushsym_104272(W_104666, (*T_104667).Sym);
LA27: ;
if (!!(((*T_104667).Size == -1))) goto LA31;
LOC33[0] = Encodeint_86073((*T_104667).Size);
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191845), LOC33, 1);
LA31: ;
if (!!(((*T_104667).Align == 2))) goto LA35;
LOC37[0] = Encodeint_86073(((NI64) ((*T_104667).Align)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191846), LOC37, 1);
LA35: ;
if (!!(((*T_104667).Containerid == 0))) goto LA39;
LOC41[0] = Encodeint_86073(((NI64) ((*T_104667).Containerid)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191832), LOC41, 1);
LA39: ;
LOC42 = Encodeloc_104553(W_104666, &(*T_104667).Loc);
App_46031(&Result_104668, LOC42);
I_104810 = 0;
HEX3Atmp_104829 = 0;
LOC43 = Sonslen_49804(T_104667);
HEX3Atmp_104829 = (NI64)(LOC43 - 1);
Res_104831 = 0;
Res_104831 = 0;
while (1) {
if (!(Res_104831 <= HEX3Atmp_104829)) goto LA44;
I_104810 = Res_104831;
if (!((*T_104667).Sons->data[I_104810] == NIM_NIL)) goto LA46;
App_46036(&Result_104668, ((NimStringDesc*) &TMP191847));
goto LA45;
LA46: ;
LOC48[0] = Encodeint_86073(((NI64) ((*(*T_104667).Sons->data[I_104810]).Sup.Id)));
Appf_46074(&Result_104668, ((NimStringDesc*) &TMP191828), LOC48, 1);
Pushtype_104243(W_104666, (*T_104667).Sons->data[I_104810]);
LA45: ;
Res_104831 += 1;
} LA44: ;
BeforeRet: ;
return Result_104668;
}
N_NIMCALL(void, Typestack_105252)(TY104004* W_105254) {
NI I_105255;
NI L_105256;
NI LOC3;
TY46008* LOC6;
I_105255 = 0;
L_105256 = 0;
I_105255 = 0;
while (1) {
if (!(I_105255 < (*W_105254).Tstack->Sup.len)) goto LA1;
LOC3 = Iitableget_53232((*W_105254).Index.Tab, (*(*W_105254).Tstack->data[I_105255]).Sup.Id);
if (!(LOC3 == (IL64(-9223372036854775807) - IL64(1)))) goto LA4;
L_105256 = Ropelen_46055((*W_105254).Data);
Addtoindex_105073(&(*W_105254).Index, (*(*W_105254).Tstack->data[I_105255]).Sup.Id, L_105256);
LOC6 = Encodetype_104664(W_105254, (*W_105254).Tstack->data[I_105255]);
App_46031(&(*W_105254).Data, LOC6);
App_46036(&(*W_105254).Data, ((NimStringDesc*) &TMP191823));
LA4: ;
I_105255 += 1;
} LA1: ;
(*W_105254).Tstack = (TY49547*) setLengthSeq(&((*W_105254).Tstack)->Sup, sizeof(TY49549*), 0);
}
N_NIMCALL(void, Processstacks_104053)(TY104004* W_104055) {
NIM_BOOL LOC2;
while (1) {
LOC2 = (0 < (*W_104055).Tstack->Sup.len);
if (LOC2) goto LA3;
LOC2 = (0 < (*W_104055).Sstack->Sup.len);
LA3: ;
if (!LOC2) goto LA1;
Symstack_105098(W_104055);
Typestack_105252(W_104055);
} LA1: ;
}
N_NIMCALL(void, Rawaddinterfacesym_105327)(TY104004* W_105329, TY49545* S_105330) {
Pushsym_104272(W_105329, S_105330);
Processstacks_104053(W_105329);
}
N_NIMCALL(TY98002*, Myopen_105964)(TY49545* Module_105966, NimStringDesc* Filename_105967) {
TY98002* Result_105968;
TY104004* W_105971;
NI32 LOC4;
Result_105968 = 0;
if (!((*Module_105966).Sup.Id < 0)) goto LA2;
Internalerror_41571(((NimStringDesc*) &TMP191819));
LA2: ;
W_105971 = 0;
LOC4 = Getcrc_86064(Filename_105967);
W_105971 = Newrodwriter_104024(Filename_105967, LOC4, Module_105966);
Rawaddinterfacesym_105327(W_105971, Module_105966);
Result_105968 = &W_105971->Sup;
return Result_105968;
}
N_NIMCALL(void, Writerod_104045)(TY104004* W_104047) {
TY46008* Content_105381;
TY46008* LOC1;
TY46008* LOC2;
TY46008* LOC3;
TY46008* LOC4;
TY46008* LOC5;
TY46008* LOC6;
TY46008* LOC7;
TY46008* LOC8;
TY46008* LOC9;
NI I_105412;
NI HEX3Atmp_105532;
NI Res_105534;
TY46008* LOC11;
TY46008* LOC12;
TY46008* LOC13;
TY46008* LOC14;
TY46008* LOC15;
TY46008* LOC16;
TY46008* LOC17;
TY46008* LOC18;
TY46008* LOC19;
TY46008* LOC20;
TY46008* LOC21;
TY46008* LOC22;
TY46008* LOC23;
TY46008* LOC24;
TY46008* LOC25;
TY46008* LOC26;
TY46008* LOC27;
TY46008* LOC28;
TY46008* LOC29;
NimStringDesc* LOC30;
NimStringDesc* LOC31;
Content_105381 = 0;
Processstacks_104053(W_104047);
Content_105381 = Torope_46046(((NimStringDesc*) &TMP191848));
LOC1 = Torope_46046(((NimStringDesc*) &TMP191849));
App_46031(&Content_105381, LOC1);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC2 = Torope_46046(((NimStringDesc*) &TMP191850));
App_46031(&Content_105381, LOC2);
LOC3 = Encodeint_86073(((NI64) ((*(*W_104047).Module).Sup.Id)));
App_46031(&Content_105381, LOC3);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC4 = Torope_46046(((NimStringDesc*) &TMP191851));
App_46031(&Content_105381, LOC4);
LOC5 = Encodeint_86073(((NI64) ((*W_104047).Crc)));
App_46031(&Content_105381, LOC5);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC6 = Torope_46046(((NimStringDesc*) &TMP191852));
App_46031(&Content_105381, LOC6);
LOC7 = Encodeint_86073(((NI64) (((NI32) ((*W_104047).Options)))));
App_46031(&Content_105381, LOC7);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC8 = Torope_46046(((NimStringDesc*) &TMP191853));
App_46031(&Content_105381, LOC8);
App_46031(&Content_105381, (*W_104047).Defines);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC9 = Torope_46046(((NimStringDesc*) &TMP191854));
App_46031(&Content_105381, LOC9);
I_105412 = 0;
HEX3Atmp_105532 = 0;
HEX3Atmp_105532 = ((*W_104047).Files->Sup.len-1);
Res_105534 = 0;
Res_105534 = 0;
while (1) {
if (!(Res_105534 <= HEX3Atmp_105532)) goto LA10;
I_105412 = Res_105534;
LOC11 = Encode_86076((*W_104047).Files->data[I_105412]);
App_46031(&Content_105381, LOC11);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
Res_105534 += 1;
} LA10: ;
LOC12 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC12);
LOC13 = Torope_46046(((NimStringDesc*) &TMP191856));
App_46031(&Content_105381, LOC13);
App_46031(&Content_105381, (*W_104047).Incldeps);
LOC14 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC14);
LOC15 = Torope_46046(((NimStringDesc*) &TMP191857));
App_46031(&Content_105381, LOC15);
App_46031(&Content_105381, (*W_104047).Moddeps);
App_46036(&Content_105381, ((NimStringDesc*) &TMP191823));
LOC16 = Torope_46046(((NimStringDesc*) &TMP191858));
App_46031(&Content_105381, LOC16);
App_46031(&Content_105381, (*W_104047).Interf);
LOC17 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC17);
LOC18 = Torope_46046(((NimStringDesc*) &TMP191859));
App_46031(&Content_105381, LOC18);
App_46031(&Content_105381, (*W_104047).Compilerprocs);
LOC19 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC19);
LOC20 = Torope_46046(((NimStringDesc*) &TMP191860));
App_46031(&Content_105381, LOC20);
App_46031(&Content_105381, (*W_104047).Index.R);
LOC21 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC21);
LOC22 = Torope_46046(((NimStringDesc*) &TMP191861));
App_46031(&Content_105381, LOC22);
App_46031(&Content_105381, (*W_104047).Imports.R);
LOC23 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC23);
LOC24 = Torope_46046(((NimStringDesc*) &TMP191862));
App_46031(&Content_105381, LOC24);
App_46031(&Content_105381, (*W_104047).Converters);
LOC25 = Torope_46046(((NimStringDesc*) &TMP191823));
App_46031(&Content_105381, LOC25);
LOC26 = Torope_46046(((NimStringDesc*) &TMP191863));
App_46031(&Content_105381, LOC26);
App_46031(&Content_105381, (*W_104047).Init);
LOC27 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC27);
LOC28 = Torope_46046(((NimStringDesc*) &TMP191864));
App_46031(&Content_105381, LOC28);
App_46031(&Content_105381, (*W_104047).Data);
LOC29 = Torope_46046(((NimStringDesc*) &TMP191855));
App_46031(&Content_105381, LOC29);
LOC30 = nosChangeFileExt((*W_104047).Filename, ((NimStringDesc*) &TMP191865));
LOC31 = Completegeneratedfilepath_40099(LOC30, NIM_TRUE);
Writerope_46058(Content_105381, LOC31);
}
N_NIMCALL(TY49523*, Myclose_105972)(TY98002* C_105974, TY49523* N_105975) {
TY49523* Result_105976;
TY104004* W_105977;
Result_105976 = 0;
W_105977 = 0;
W_105977 = ((TY104004*) (C_105974));
Writerod_104045(W_105977);
Result_105976 = N_105975;
return Result_105976;
}
N_NIMCALL(void, Addinterfacesym_104037)(TY104004* W_104039, TY49545* S_104040) {
if (!(W_104039 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((524296 & (*S_104040).Flags) == 0))) goto LA5;
Rawaddinterfacesym_105327(W_104039, S_104040);
LA5: ;
BeforeRet: ;
}
N_NIMCALL(void, Addmoddep_104029)(TY104004* W_104031, NimStringDesc* Dep_104032) {
NI LOC4;
TY46008* LOC5;
if (!!(((*W_104031).Moddeps == NIM_NIL))) goto LA2;
App_46036(&(*W_104031).Moddeps, ((NimStringDesc*) &TMP191821));
LA2: ;
LOC4 = Fileidx_104090(W_104031, Dep_104032);
LOC5 = Encodeint_86073(((NI64) (LOC4)));
App_46031(&(*W_104031).Moddeps, LOC5);
}
N_NIMCALL(void, Addstmt_104041)(TY104004* W_104043, TY49523* N_104044) {
NI LOC1;
TY46008* LOC2;
TY41532 LOC3;
TY46008* LOC4;
LOC1 = Ropelen_46055((*W_104043).Data);
LOC2 = Encodeint_86073(((NI64) (LOC1)));
App_46031(&(*W_104043).Init, LOC2);
App_46036(&(*W_104043).Init, ((NimStringDesc*) &TMP191823));
LOC3 = Unknownlineinfo_41536();
LOC4 = Encodenode_104301(W_104043, LOC3, N_104044);
App_46031(&(*W_104043).Data, LOC4);
App_46036(&(*W_104043).Data, ((NimStringDesc*) &TMP191823));
Processstacks_104053(W_104043);
}
N_NIMCALL(void, Addincldep_104033)(TY104004* W_104035, NimStringDesc* Dep_104036) {
NI LOC1;
TY46008* LOC2;
NI32 LOC3;
TY46008* LOC4;
LOC1 = Fileidx_104090(W_104035, Dep_104036);
LOC2 = Encodeint_86073(((NI64) (LOC1)));
App_46031(&(*W_104035).Incldeps, LOC2);
App_46036(&(*W_104035).Incldeps, ((NimStringDesc*) &TMP191821));
LOC3 = Crcfromfile_44029(Dep_104036);
LOC4 = Encodeint_86073(((NI64) (LOC3)));
App_46031(&(*W_104035).Incldeps, LOC4);
App_46036(&(*W_104035).Incldeps, ((NimStringDesc*) &TMP191823));
}
N_NIMCALL(TY49523*, Process_105537)(TY98002* C_105539, TY49523* N_105540) {
TY49523* Result_105541;
TY104004* W_105542;
TY49523* A_105543;
TY49545* S_105544;
NI I_105563;
NI HEX3Atmp_105929;
NI LOC4;
NI Res_105931;
TY49523* LOC6;
NIM_BOOL LOC11;
NIM_BOOL LOC12;
NI I_105685;
NI HEX3Atmp_105935;
NI LOC17;
NI Res_105937;
NI I_105747;
NI HEX3Atmp_105941;
NI LOC26;
NI Res_105943;
NI I_105809;
NI HEX3Atmp_105947;
NI LOC35;
NI Res_105949;
NI I_105883;
NI HEX3Atmp_105953;
NI LOC44;
NI Res_105955;
NimStringDesc* LOC46;
NimStringDesc* LOC47;
NI I_105915;
NI HEX3Atmp_105959;
NI LOC48;
NI Res_105961;
NimStringDesc* LOC50;
Result_105541 = 0;
W_105542 = 0;
A_105543 = 0;
S_105544 = 0;
Result_105541 = N_105540;
if (!(C_105539 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
W_105542 = ((TY104004*) (C_105539));
switch ((*N_105540).Kind) {
case ((NU8) 101):
I_105563 = 0;
HEX3Atmp_105929 = 0;
LOC4 = Sonslen_49801(N_105540);
HEX3Atmp_105929 = (NI64)(LOC4 - 1);
Res_105931 = 0;
Res_105931 = 0;
while (1) {
if (!(Res_105931 <= HEX3Atmp_105929)) goto LA5;
I_105563 = Res_105931;
LOC6 = Process_105537(C_105539, (*N_105540).KindU.S6.Sons->data[I_105563]);
Res_105931 += 1;
} LA5: ;
break;
case ((NU8) 73):
case ((NU8) 72):
S_105544 = (*(*N_105540).KindU.S6.Sons->data[0]).KindU.S4.Sym;
Addinterfacesym_104037(W_105542, S_105544);
break;
case ((NU8) 69):
case ((NU8) 70):
case ((NU8) 74):
case ((NU8) 71):
S_105544 = (*(*N_105540).KindU.S6.Sons->data[0]).KindU.S4.Sym;
if (!(S_105544 == NIM_NIL)) goto LA8;
Internalerror_41567((*N_105540).Info, ((NimStringDesc*) &TMP191866));
LA8: ;
LOC12 = !(((*N_105540).KindU.S6.Sons->data[4] == NIM_NIL));
if (LOC12) goto LA13;
LOC12 = !(((*S_105544).Magic == ((NU8) 0)));
LA13: ;
LOC11 = LOC12;
if (LOC11) goto LA14;
LOC11 = !((((*S_105544).Flags &(1<<((((NU8) 6))&31)))!=0));
LA14: ;
if (!LOC11) goto LA15;
Addinterfacesym_104037(W_105542, S_105544);
LA15: ;
break;
case ((NU8) 87):
I_105685 = 0;
HEX3Atmp_105935 = 0;
LOC17 = Sonslen_49801(N_105540);
HEX3Atmp_105935 = (NI64)(LOC17 - 1);
Res_105937 = 0;
Res_105937 = 0;
while (1) {
if (!(Res_105937 <= HEX3Atmp_105935)) goto LA18;
I_105685 = Res_105937;
A_105543 = (*N_105540).KindU.S6.Sons->data[I_105685];
if (!((*A_105543).Kind == ((NU8) 105))) goto LA21;
goto LA19;
LA21: ;
if (!!(((*A_105543).Kind == ((NU8) 25)))) goto LA24;
Internalerror_41567((*A_105543).Info, ((NimStringDesc*) &TMP191866));
LA24: ;
Addinterfacesym_104037(W_105542, (*(*A_105543).KindU.S6.Sons->data[0]).KindU.S4.Sym);
LA19: ;
Res_105937 += 1;
} LA18: ;
break;
case ((NU8) 88):
I_105747 = 0;
HEX3Atmp_105941 = 0;
LOC26 = Sonslen_49801(N_105540);
HEX3Atmp_105941 = (NI64)(LOC26 - 1);
Res_105943 = 0;
Res_105943 = 0;
while (1) {
if (!(Res_105943 <= HEX3Atmp_105941)) goto LA27;
I_105747 = Res_105943;
A_105543 = (*N_105540).KindU.S6.Sons->data[I_105747];
if (!((*A_105543).Kind == ((NU8) 105))) goto LA30;
goto LA28;
LA30: ;
if (!!(((*A_105543).Kind == ((NU8) 89)))) goto LA33;
Internalerror_41567((*A_105543).Info, ((NimStringDesc*) &TMP191866));
LA33: ;
Addinterfacesym_104037(W_105542, (*(*A_105543).KindU.S6.Sons->data[0]).KindU.S4.Sym);
LA28: ;
Res_105943 += 1;
} LA27: ;
break;
case ((NU8) 90):
I_105809 = 0;
HEX3Atmp_105947 = 0;
LOC35 = Sonslen_49801(N_105540);
HEX3Atmp_105947 = (NI64)(LOC35 - 1);
Res_105949 = 0;
Res_105949 = 0;
while (1) {
if (!(Res_105949 <= HEX3Atmp_105947)) goto LA36;
I_105809 = Res_105949;
A_105543 = (*N_105540).KindU.S6.Sons->data[I_105809];
if (!((*A_105543).Kind == ((NU8) 105))) goto LA39;
goto LA37;
LA39: ;
if (!!(((*(*A_105543).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA42;
Internalerror_41567((*A_105543).Info, ((NimStringDesc*) &TMP191866));
LA42: ;
S_105544 = (*(*A_105543).KindU.S6.Sons->data[0]).KindU.S4.Sym;
Addinterfacesym_104037(W_105542, S_105544);
LA37: ;
Res_105949 += 1;
} LA36: ;
break;
case ((NU8) 102):
I_105883 = 0;
HEX3Atmp_105953 = 0;
LOC44 = Sonslen_49801(N_105540);
HEX3Atmp_105953 = (NI64)(LOC44 - 1);
Res_105955 = 0;
Res_105955 = 0;
while (1) {
if (!(Res_105955 <= HEX3Atmp_105953)) goto LA45;
I_105883 = Res_105955;
LOC46 = Getmodulefile_103013((*N_105540).KindU.S6.Sons->data[I_105883]);
Addmoddep_104029(W_105542, LOC46);
Res_105955 += 1;
} LA45: ;
Addstmt_104041(W_105542, N_105540);
break;
case ((NU8) 103):
LOC47 = Getmodulefile_103013((*N_105540).KindU.S6.Sons->data[0]);
Addmoddep_104029(W_105542, LOC47);
Addstmt_104041(W_105542, N_105540);
break;
case ((NU8) 104):
I_105915 = 0;
HEX3Atmp_105959 = 0;
LOC48 = Sonslen_49801(N_105540);
HEX3Atmp_105959 = (NI64)(LOC48 - 1);
Res_105961 = 0;
Res_105961 = 0;
while (1) {
if (!(Res_105961 <= HEX3Atmp_105959)) goto LA49;
I_105915 = Res_105961;
LOC50 = Getmodulefile_103013((*N_105540).KindU.S6.Sons->data[I_105915]);
Addincldep_104033(W_105542, LOC50);
Res_105961 += 1;
} LA49: ;
break;
case ((NU8) 81):
Addstmt_104041(W_105542, N_105540);
break;
default:
break;
}
BeforeRet: ;
return Result_105541;
}
N_NIMCALL(TY98006, Rodwritepass_104001)(void) {
TY98006 Result_105980;
memset((void*)&Result_105980, 0, sizeof(Result_105980));
Initpass_98031(&Result_105980);
if (!((Gglobaloptions_40077 &(1<<((((NU8) 15))&31)))!=0)) goto LA2;
Result_105980.Open = Myopen_105964;
Result_105980.Close = Myclose_105972;
Result_105980.Process = Process_105537;
LA2: ;
return Result_105980;
}
N_NOINLINE(void, rodwriteInit)(void) {
Intsetinit_49922(&Debugwritten_105097);
}

