/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY53223 TY53223;
typedef struct TY53221 TY53221;
typedef struct TY53219 TY53219;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY49545 TY49545;
typedef struct TY49527 TY49527;
typedef struct TY49525 TY49525;
typedef struct TY48011 TY48011;
typedef struct TY48005 TY48005;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY49549 TY49549;
typedef struct TY41532 TY41532;
typedef struct TY49523 TY49523;
typedef struct TY49537 TY49537;
typedef struct TY46008 TY46008;
typedef struct TY49541 TY49541;
typedef struct TY10202 TY10202;
typedef struct TY10214 TY10214;
typedef struct TY10590 TY10590;
typedef struct TY10218 TY10218;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY53079 TY53079;
typedef struct TY49561 TY49561;
typedef struct TY49559 TY49559;
typedef struct TY49557 TY49557;
typedef struct TY53107 TY53107;
typedef struct TY53109 TY53109;
typedef struct TY53092 TY53092;
typedef struct TY49567 TY49567;
typedef struct TY49565 TY49565;
typedef struct TY49563 TY49563;
typedef struct TY49517 TY49517;
typedef struct TY49547 TY49547;
typedef struct TY37013 TY37013;
struct TY53219 {
NI Key;
NI Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY53223 {
NI Counter;
TY53221* Data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TY53079 {
NI H;
};
struct TY49557 {
TY48005* Key;
TNimObject* Val;
};
struct TY49561 {
NI Counter;
TY49559* Data;
};
struct TY53107 {
NI Tos;
TY53109* Stack;
};
struct TY53092 {
NI H;
TY48011* Name;
};
struct TY49563 {
TY48005* Key;
TY49523* Val;
};
struct TY49567 {
NI Counter;
TY49565* Data;
};
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
typedef NI TY8214[8];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY53221 {
  TGenericSeq Sup;
  TY53219 data[SEQ_DECL_SIZE];
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
struct TY49559 {
  TGenericSeq Sup;
  TY49557 data[SEQ_DECL_SIZE];
};
struct TY53109 {
  TGenericSeq Sup;
  TY49527 data[SEQ_DECL_SIZE];
};
struct TY49565 {
  TGenericSeq Sup;
  TY49563 data[SEQ_DECL_SIZE];
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11422, void* Src_11423);
N_NIMCALL(NI, Nexttry_53213)(NI H_53215, NI Maxhash_53216);
N_NIMCALL(NIM_BOOL, Mustrehash_53209)(NI Length_53211, NI Counter_53212);
N_NIMCALL(void, Strtableenlarge_55357)(TY49527* T_55360);
N_NIMCALL(void, Strtablerawinsert_55311)(TY49525** Data_55314, TY49545* N_55315);
N_NIMCALL(void, Internalerror_41567)(TY41532 Info_41569, NimStringDesc* Errmsg_41570);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413);
static N_INLINE(void, Incref_11401)(TY10202* C_11403);
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628);
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Decref_11260)(TY10202* C_11262);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(TY49545*, Nextiter_53086)(TY53079* Ti_53089, TY49527* Tab_53090);
N_NIMCALL(NI, Iitablerawget_56157)(TY53223 T_56159, NI Key_56160);
N_NIMCALL(void, Iitablerawinsert_56176)(TY53221** Data_56179, NI Key_56180, NI Val_56181);
N_NIMCALL(NI, Idtablerawget_55778)(TY49561 T_55780, NI Key_55781);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
N_NIMCALL(void, Idtablerawinsert_55831)(TY49559** Data_55834, TY48005* Key_55835, TNimObject* Val_55836);
N_NIMCALL(TY49545*, Strtableget_53069)(TY49527* T_53071, TY48011* Name_53072);
N_NIMCALL(TY49545*, Nextidentiter_53101)(TY53092* Ti_53104, TY49527* Tab_53105);
N_NIMCALL(NI, Idnodetablerawget_55967)(TY49567 T_55969, TY48005* Key_55970);
N_NIMCALL(void, Idnodetablerawinsert_55995)(TY49565** Data_55998, TY48005* Key_55999, TY49523* Val_56000);
N_NIMCALL(NI, Sonslen_49801)(TY49523* N_49803);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(void, Initstrtable_49744)(TY49527* X_49747);
N_NIMCALL(NU8, Symtabadduniqueat_53143)(TY53107* Tab_53146, TY49545* E_53147, NI At_53148);
N_NIMCALL(void, Strtableadd_53064)(TY49527* T_53067, TY49545* N_53068);
N_NIMCALL(NimStringDesc*, Ropetostr_46066)(TY46008* P_46068);
N_NIMCALL(TY46008*, Debugtype_54411)(TY49549* N_54413);
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_17979, TNimType* Typ_17980);
N_NIMCALL(void, App_46036)(TY46008** A_46039, NimStringDesc* B_46040);
N_NIMCALL(NI, Sonslen_49804)(TY49549* N_49806);
N_NIMCALL(void, App_46031)(TY46008** A_46034, TY46008* B_46035);
N_NIMCALL(TY49545*, Lookupinrecord_53202)(TY49523* N_53204, TY48011* Field_53205);
N_NIMCALL(TY49523*, Lastson_49807)(TY49523* N_49809);
N_NIMCALL(void, Writeln_54812)(FILE* F_54815, NimStringDesc* X_54816);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
STRING_LITERAL(TMP190621, "StrTableRawInsert: ", 19);
STRING_LITERAL(TMP191063, "getSymFromList", 14);
STRING_LITERAL(TMP191145, "null", 4);
STRING_LITERAL(TMP191146, " ", 1);
STRING_LITERAL(TMP191147, "(", 1);
STRING_LITERAL(TMP191148, ", ", 2);
STRING_LITERAL(TMP191149, ")", 1);
STRING_LITERAL(TMP191688, "lookupInRecord", 14);
STRING_LITERAL(TMP191689, "lookupInRecord(record case branch)", 34);
STRING_LITERAL(TMP191690, "lookupInRecord()", 16);
STRING_LITERAL(TMP192495, "\015\012", 2);
extern TNimType* NTI53221; /* TIIPairSeq */
extern TNimType* NTI49525; /* TSymSeq */
extern TY10590 Gch_10608;
extern TNimType* NTI49559; /* TIdPairSeq */
extern TNimType* NTI53109; /* seq[TStrTable] */
extern TNimType* NTI49565; /* TIdNodePairSeq */
extern TNimType* NTI49162; /* TTypeKind */
N_NIMCALL(void, Initiitable_53228)(TY53223* X_53231) {
NI I_56151;
NI Res_56154;
(*X_53231).Counter = 0;
unsureAsgnRef((void**) &(*X_53231).Data, (TY53221*) newSeq(NTI53221, 8));
I_56151 = 0;
Res_56154 = 0;
Res_56154 = 0;
while (1) {
if (!(Res_56154 <= 7)) goto LA1;
I_56151 = Res_56154;
(*X_53231).Data->data[I_56151].Key = (IL64(-9223372036854775807) - IL64(1));
Res_56154 += 1;
} LA1: ;
}
N_NIMCALL(NI, Nexttry_53213)(NI H_53215, NI Maxhash_53216) {
NI Result_54868;
Result_54868 = 0;
Result_54868 = (NI64)((NI64)((NI64)(5 * H_53215) + 1) & Maxhash_53216);
return Result_54868;
}
N_NIMCALL(TY49545*, Strtableget_53069)(TY49527* T_53071, TY48011* Name_53072) {
TY49545* Result_55507;
NI H_55508;
Result_55507 = 0;
H_55508 = 0;
H_55508 = (NI64)((*Name_53072).H & ((*T_53071).Data->Sup.len-1));
while (1) {
Result_55507 = (*T_53071).Data->data[H_55508];
if (!(Result_55507 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*Result_55507).Name).Sup.Id == (*Name_53072).Sup.Id)) goto LA6;
goto LA1;
LA6: ;
H_55508 = Nexttry_53213(H_55508, ((*T_53071).Data->Sup.len-1));
} LA1: ;
return Result_55507;
}
N_NIMCALL(NIM_BOOL, Mustrehash_53209)(NI Length_53211, NI Counter_53212) {
NIM_BOOL Result_53536;
NIM_BOOL LOC1;
Result_53536 = 0;
LOC1 = ((NI64)(Length_53211 * 2) < (NI64)(Counter_53212 * 3));
if (LOC1) goto LA2;
LOC1 = ((NI64)(Length_53211 - Counter_53212) < 4);
LA2: ;
Result_53536 = LOC1;
return Result_53536;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI64)((NI64)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628) {
NIM_BOOL Result_10629;
Result_10629 = 0;
Result_10629 = !((((*(*C_10628).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_10629;
}
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254) {
Incl_10474(&Gch_10608.Cycleroots, C_11254);
}
static N_INLINE(void, Incref_11401)(TY10202* C_11403) {
NIM_BOOL LOC2;
(*C_11403).Refcount = (NI64)((NU64)((*C_11403).Refcount) + (NU64)(8));
LOC2 = Canbecycleroot_10626(C_11403);
if (!LOC2) goto LA3;
Rtladdcycleroot_11252(C_11403);
LA3: ;
}
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI64)((NU64)(((NI) (Usr_10624))) - (NU64)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, Decref_11260)(TY10202* C_11262) {
NIM_BOOL LOC4;
(*C_11262).Refcount = (NI64)((NU64)((*C_11262).Refcount) - (NU64)(8));
if (!((NU64)((*C_11262).Refcount) < (NU64)(8))) goto LA2;
Rtladdzct_11256(C_11262);
goto LA1;
LA2: ;
LOC4 = Canbecycleroot_10626(C_11262);
if (!LOC4) goto LA5;
Rtladdcycleroot_11252(C_11262);
goto LA1;
LA5: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413) {
TY10202* LOC4;
TY10202* LOC8;
if (!!((Src_11413 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_10622(Src_11413);
Incref_11401(LOC4);
LA2: ;
if (!!(((*Dest_11412) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_10622((*Dest_11412));
Decref_11260(LOC8);
LA6: ;
(*Dest_11412) = Src_11413;
}
N_NIMCALL(void, Strtablerawinsert_55311)(TY49525** Data_55314, TY49545* N_55315) {
NI H_55316;
NimStringDesc* LOC5;
H_55316 = 0;
H_55316 = (NI64)((*(*N_55315).Name).H & ((*Data_55314)->Sup.len-1));
while (1) {
if (!!(((*Data_55314)->data[H_55316] == NIM_NIL))) goto LA1;
if (!((*Data_55314)->data[H_55316] == N_55315)) goto LA3;
LOC5 = rawNewString((*(*N_55315).Name).S->Sup.len + 19);
appendString(LOC5, ((NimStringDesc*) &TMP190621));
appendString(LOC5, (*(*N_55315).Name).S);
Internalerror_41567((*N_55315).Info, LOC5);
LA3: ;
H_55316 = Nexttry_53213(H_55316, ((*Data_55314)->Sup.len-1));
} LA1: ;
asgnRef((void**) &(*Data_55314)->data[H_55316], N_55315);
}
N_NIMCALL(void, Strtableenlarge_55357)(TY49527* T_55360) {
TY49525* N_55361;
NI I_55391;
NI HEX3Atmp_55414;
NI Res_55416;
TY49525* LOC5;
N_55361 = 0;
N_55361 = (TY49525*) newSeq(NTI49525, (NI64)((*T_55360).Data->Sup.len * 2));
I_55391 = 0;
HEX3Atmp_55414 = 0;
HEX3Atmp_55414 = ((*T_55360).Data->Sup.len-1);
Res_55416 = 0;
Res_55416 = 0;
while (1) {
if (!(Res_55416 <= HEX3Atmp_55414)) goto LA1;
I_55391 = Res_55416;
if (!!(((*T_55360).Data->data[I_55391] == NIM_NIL))) goto LA3;
Strtablerawinsert_55311(&N_55361, (*T_55360).Data->data[I_55391]);
LA3: ;
Res_55416 += 1;
} LA1: ;
LOC5 = (*T_55360).Data;
unsureAsgnRef((void**) &(*T_55360).Data, N_55361);
N_55361 = LOC5;
}
N_NIMCALL(void, Strtableadd_53064)(TY49527* T_53067, TY49545* N_53068) {
NIM_BOOL LOC2;
LOC2 = Mustrehash_53209((*T_53067).Data->Sup.len, (*T_53067).Counter);
if (!LOC2) goto LA3;
Strtableenlarge_55357(T_53067);
LA3: ;
Strtablerawinsert_55311(&(*T_53067).Data, N_53068);
(*T_53067).Counter += 1;
}
N_NIMCALL(TY49545*, Nextiter_53086)(TY53079* Ti_53089, TY49527* Tab_53090) {
TY49545* Result_55569;
Result_55569 = 0;
Result_55569 = NIM_NIL;
while (1) {
if (!((*Ti_53089).H <= ((*Tab_53090).Data->Sup.len-1))) goto LA1;
Result_55569 = (*Tab_53090).Data->data[(*Ti_53089).H];
(*Ti_53089).H += 1;
if (!!((Result_55569 == NIM_NIL))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
return Result_55569;
}
N_NIMCALL(TY49545*, Inittabiter_53081)(TY53079* Ti_53084, TY49527* Tab_53085) {
TY49545* Result_55561;
Result_55561 = 0;
(*Ti_53084).H = 0;
if (!((*Tab_53085).Counter == 0)) goto LA2;
Result_55561 = NIM_NIL;
goto LA1;
LA2: ;
Result_55561 = Nextiter_53086(Ti_53084, Tab_53085);
LA1: ;
return Result_55561;
}
N_NIMCALL(NI, Iitablerawget_56157)(TY53223 T_56159, NI Key_56160) {
NI Result_56161;
NI H_56162;
Result_56161 = 0;
H_56162 = 0;
H_56162 = (NI64)(Key_56160 & (T_56159.Data->Sup.len-1));
while (1) {
if (!!((T_56159.Data->data[H_56162].Key == (IL64(-9223372036854775807) - IL64(1))))) goto LA1;
if (!(T_56159.Data->data[H_56162].Key == Key_56160)) goto LA3;
Result_56161 = H_56162;
goto BeforeRet;
LA3: ;
H_56162 = Nexttry_53213(H_56162, (T_56159.Data->Sup.len-1));
} LA1: ;
Result_56161 = -1;
BeforeRet: ;
return Result_56161;
}
N_NIMCALL(void, Iitablerawinsert_56176)(TY53221** Data_56179, NI Key_56180, NI Val_56181) {
NI H_56182;
H_56182 = 0;
H_56182 = (NI64)(Key_56180 & ((*Data_56179)->Sup.len-1));
while (1) {
if (!!(((*Data_56179)->data[H_56182].Key == (IL64(-9223372036854775807) - IL64(1))))) goto LA1;
H_56182 = Nexttry_53213(H_56182, ((*Data_56179)->Sup.len-1));
} LA1: ;
(*Data_56179)->data[H_56182].Key = Key_56180;
(*Data_56179)->data[H_56182].Val = Val_56181;
}
N_NIMCALL(void, Iitableput_53236)(TY53223* T_53239, NI Key_53240, NI Val_53241) {
NI Index_56196;
TY53221* N_56197;
NIM_BOOL LOC5;
NI I_56241;
NI HEX3Atmp_56276;
NI Res_56278;
NI I_56249;
NI HEX3Atmp_56282;
NI Res_56284;
TY53221* LOC13;
Index_56196 = 0;
N_56197 = 0;
Index_56196 = Iitablerawget_56157((*T_53239), Key_53240);
if (!(0 <= Index_56196)) goto LA2;
(*T_53239).Data->data[Index_56196].Val = Val_53241;
goto LA1;
LA2: ;
LOC5 = Mustrehash_53209((*T_53239).Data->Sup.len, (*T_53239).Counter);
if (!LOC5) goto LA6;
N_56197 = (TY53221*) newSeq(NTI53221, (NI64)((*T_53239).Data->Sup.len * 2));
I_56241 = 0;
HEX3Atmp_56276 = 0;
HEX3Atmp_56276 = (N_56197->Sup.len-1);
Res_56278 = 0;
Res_56278 = 0;
while (1) {
if (!(Res_56278 <= HEX3Atmp_56276)) goto LA8;
I_56241 = Res_56278;
N_56197->data[I_56241].Key = (IL64(-9223372036854775807) - IL64(1));
Res_56278 += 1;
} LA8: ;
I_56249 = 0;
HEX3Atmp_56282 = 0;
HEX3Atmp_56282 = ((*T_53239).Data->Sup.len-1);
Res_56284 = 0;
Res_56284 = 0;
while (1) {
if (!(Res_56284 <= HEX3Atmp_56282)) goto LA9;
I_56249 = Res_56284;
if (!!(((*T_53239).Data->data[I_56249].Key == (IL64(-9223372036854775807) - IL64(1))))) goto LA11;
Iitablerawinsert_56176(&N_56197, (*T_53239).Data->data[I_56249].Key, (*T_53239).Data->data[I_56249].Val);
LA11: ;
Res_56284 += 1;
} LA9: ;
LOC13 = (*T_53239).Data;
unsureAsgnRef((void**) &(*T_53239).Data, N_56197);
N_56197 = LOC13;
LA6: ;
Iitablerawinsert_56176(&(*T_53239).Data, Key_53240, Val_53241);
(*T_53239).Counter += 1;
LA1: ;
}
N_NIMCALL(NI, Idtablerawget_55778)(TY49561 T_55780, NI Key_55781) {
NI Result_55782;
NI H_55783;
Result_55782 = 0;
H_55783 = 0;
H_55783 = (NI64)(Key_55781 & (T_55780.Data->Sup.len-1));
while (1) {
if (!!((T_55780.Data->data[H_55783].Key == NIM_NIL))) goto LA1;
if (!((*T_55780.Data->data[H_55783].Key).Id == Key_55781)) goto LA3;
Result_55782 = H_55783;
goto BeforeRet;
LA3: ;
H_55783 = Nexttry_53213(H_55783, (T_55780.Data->Sup.len-1));
} LA1: ;
Result_55782 = -1;
BeforeRet: ;
return Result_55782;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI64)((NU64)((*C_11418).Refcount) + (NU64)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI64)((NU64)((*C_11419).Refcount) - (NU64)(8));
if (!((NU64)((*C_11419).Refcount) < (NU64)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(void, Idtablerawinsert_55831)(TY49559** Data_55834, TY48005* Key_55835, TNimObject* Val_55836) {
NI H_55837;
H_55837 = 0;
H_55837 = (NI64)((*Key_55835).Id & ((*Data_55834)->Sup.len-1));
while (1) {
if (!!(((*Data_55834)->data[H_55837].Key == NIM_NIL))) goto LA1;
H_55837 = Nexttry_53213(H_55837, ((*Data_55834)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_55834)->data[H_55837].Key, Key_55835);
asgnRefNoCycle((void**) &(*Data_55834)->data[H_55837].Val, Val_55836);
}
N_NIMCALL(void, Idtableput_53174)(TY49561* T_53177, TY48005* Key_53178, TNimObject* Val_53179) {
NI Index_55869;
TY49559* N_55870;
NIM_BOOL LOC5;
NI I_55923;
NI HEX3Atmp_55959;
NI Res_55961;
TY49559* LOC12;
Index_55869 = 0;
N_55870 = 0;
Index_55869 = Idtablerawget_55778((*T_53177), (*Key_53178).Id);
if (!(0 <= Index_55869)) goto LA2;
asgnRefNoCycle((void**) &(*T_53177).Data->data[Index_55869].Val, Val_53179);
goto LA1;
LA2: ;
LOC5 = Mustrehash_53209((*T_53177).Data->Sup.len, (*T_53177).Counter);
if (!LOC5) goto LA6;
N_55870 = (TY49559*) newSeq(NTI49559, (NI64)((*T_53177).Data->Sup.len * 2));
I_55923 = 0;
HEX3Atmp_55959 = 0;
HEX3Atmp_55959 = ((*T_53177).Data->Sup.len-1);
Res_55961 = 0;
Res_55961 = 0;
while (1) {
if (!(Res_55961 <= HEX3Atmp_55959)) goto LA8;
I_55923 = Res_55961;
if (!!(((*T_53177).Data->data[I_55923].Key == NIM_NIL))) goto LA10;
Idtablerawinsert_55831(&N_55870, (*T_53177).Data->data[I_55923].Key, (*T_53177).Data->data[I_55923].Val);
LA10: ;
Res_55961 += 1;
} LA8: ;
LOC12 = (*T_53177).Data;
unsureAsgnRef((void**) &(*T_53177).Data, N_55870);
N_55870 = LOC12;
LA6: ;
Idtablerawinsert_55831(&(*T_53177).Data, Key_53178, Val_53179);
(*T_53177).Counter += 1;
LA1: ;
}
N_NIMCALL(TNimObject*, Idtableget_53170)(TY49561 T_53172, NI Key_53173) {
TNimObject* Result_55827;
NI Index_55828;
Result_55827 = 0;
Index_55828 = 0;
Index_55828 = Idtablerawget_55778(T_53172, Key_53173);
if (!(0 <= Index_55828)) goto LA2;
Result_55827 = T_53172.Data->data[Index_55828].Val;
goto LA1;
LA2: ;
Result_55827 = NIM_NIL;
LA1: ;
return Result_55827;
}
N_NIMCALL(NI, Iitableget_53232)(TY53223 T_53234, NI Key_53235) {
NI Result_56172;
NI Index_56173;
Result_56172 = 0;
Index_56173 = 0;
Index_56173 = Iitablerawget_56157(T_53234, Key_53235);
if (!(0 <= Index_56173)) goto LA2;
Result_56172 = T_53234.Data->data[Index_56173].Val;
goto LA1;
LA2: ;
Result_56172 = (IL64(-9223372036854775807) - IL64(1));
LA1: ;
return Result_56172;
}
N_NIMCALL(void, Initsymtab_53111)(TY53107* Tab_53114) {
(*Tab_53114).Tos = 0;
unsureAsgnRef((void**) &(*Tab_53114).Stack, (TY53109*) newSeq(NTI53109, 0));
}
N_NIMCALL(TY49545*, Symtabget_53119)(TY53107 Tab_53121, TY48011* S_53122) {
TY49545* Result_55613;
NI I_55636;
NI HEX3Atmp_55649;
NI Res_55651;
Result_55613 = 0;
I_55636 = 0;
HEX3Atmp_55649 = 0;
HEX3Atmp_55649 = (NI64)(((NI) (Tab_53121.Tos)) - 1);
Res_55651 = 0;
Res_55651 = HEX3Atmp_55649;
while (1) {
if (!(0 <= Res_55651)) goto LA1;
I_55636 = Res_55651;
Result_55613 = Strtableget_53069(&Tab_53121.Stack->data[I_55636], S_53122);
if (!!((Result_55613 == NIM_NIL))) goto LA3;
goto BeforeRet;
LA3: ;
Res_55651 -= 1;
} LA1: ;
Result_55613 = NIM_NIL;
BeforeRet: ;
return Result_55613;
}
N_NIMCALL(TY49545*, Getmodule_53206)(TY49545* S_53208) {
TY49545* Result_53421;
NIM_BOOL LOC2;
Result_53421 = 0;
Result_53421 = S_53208;
while (1) {
LOC2 = !((Result_53421 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Result_53421).Kind == ((NU8) 18)));
LA3: ;
if (!LOC2) goto LA1;
Result_53421 = (*Result_53421).Owner;
} LA1: ;
return Result_53421;
}
N_NIMCALL(TY49545*, Nextidentiter_53101)(TY53092* Ti_53104, TY49527* Tab_53105) {
TY49545* Result_55537;
NI H_55538;
NI Start_55539;
Result_55537 = 0;
H_55538 = 0;
Start_55539 = 0;
H_55538 = (NI64)((*Ti_53104).H & ((*Tab_53105).Data->Sup.len-1));
Start_55539 = H_55538;
Result_55537 = (*Tab_53105).Data->data[H_55538];
while (1) {
if (!!((Result_55537 == NIM_NIL))) goto LA1;
if (!((*(*Result_55537).Name).Sup.Id == (*(*Ti_53104).Name).Sup.Id)) goto LA3;
goto LA1;
LA3: ;
H_55538 = Nexttry_53213(H_55538, ((*Tab_53105).Data->Sup.len-1));
if (!(H_55538 == Start_55539)) goto LA6;
Result_55537 = NIM_NIL;
goto LA1;
LA6: ;
Result_55537 = (*Tab_53105).Data->data[H_55538];
} LA1: ;
(*Ti_53104).H = Nexttry_53213(H_55538, ((*Tab_53105).Data->Sup.len-1));
return Result_55537;
}
N_NIMCALL(TY49545*, Initidentiter_53095)(TY53092* Ti_53098, TY49527* Tab_53099, TY48011* S_53100) {
TY49545* Result_55529;
Result_55529 = 0;
(*Ti_53098).H = (*S_53100).H;
unsureAsgnRef((void**) &(*Ti_53098).Name, S_53100);
if (!((*Tab_53099).Counter == 0)) goto LA2;
Result_55529 = NIM_NIL;
goto LA1;
LA2: ;
Result_55529 = Nextidentiter_53101(Ti_53098, Tab_53099);
LA1: ;
return Result_55529;
}
N_NIMCALL(NI, Idnodetablerawget_55967)(TY49567 T_55969, TY48005* Key_55970) {
NI Result_55971;
NI H_55972;
Result_55971 = 0;
H_55972 = 0;
H_55972 = (NI64)((*Key_55970).Id & (T_55969.Data->Sup.len-1));
while (1) {
if (!!((T_55969.Data->data[H_55972].Key == NIM_NIL))) goto LA1;
if (!((*T_55969.Data->data[H_55972].Key).Id == (*Key_55970).Id)) goto LA3;
Result_55971 = H_55972;
goto BeforeRet;
LA3: ;
H_55972 = Nexttry_53213(H_55972, (T_55969.Data->Sup.len-1));
} LA1: ;
Result_55971 = -1;
BeforeRet: ;
return Result_55971;
}
N_NIMCALL(TY49523*, Idnodetableget_53184)(TY49567 T_53186, TY48005* Key_53187) {
TY49523* Result_55991;
NI Index_55992;
Result_55991 = 0;
Index_55992 = 0;
Index_55992 = Idnodetablerawget_55967(T_53186, Key_53187);
if (!(0 <= Index_55992)) goto LA2;
Result_55991 = T_53186.Data->data[Index_55992].Val;
goto LA1;
LA2: ;
Result_55991 = NIM_NIL;
LA1: ;
return Result_55991;
}
N_NIMCALL(void, Idnodetablerawinsert_55995)(TY49565** Data_55998, TY48005* Key_55999, TY49523* Val_56000) {
NI H_56001;
H_56001 = 0;
H_56001 = (NI64)((*Key_55999).Id & ((*Data_55998)->Sup.len-1));
while (1) {
if (!!(((*Data_55998)->data[H_56001].Key == NIM_NIL))) goto LA1;
H_56001 = Nexttry_53213(H_56001, ((*Data_55998)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_55998)->data[H_56001].Key, Key_55999);
asgnRefNoCycle((void**) &(*Data_55998)->data[H_56001].Val, Val_56000);
}
N_NIMCALL(void, Idnodetableput_53188)(TY49567* T_53191, TY48005* Key_53192, TY49523* Val_53193) {
NI Index_56033;
TY49565* N_56034;
NIM_BOOL LOC5;
NI I_56087;
NI HEX3Atmp_56123;
NI Res_56125;
TY49565* LOC12;
Index_56033 = 0;
N_56034 = 0;
Index_56033 = Idnodetablerawget_55967((*T_53191), Key_53192);
if (!(0 <= Index_56033)) goto LA2;
asgnRefNoCycle((void**) &(*T_53191).Data->data[Index_56033].Val, Val_53193);
goto LA1;
LA2: ;
LOC5 = Mustrehash_53209((*T_53191).Data->Sup.len, (*T_53191).Counter);
if (!LOC5) goto LA6;
N_56034 = (TY49565*) newSeq(NTI49565, (NI64)((*T_53191).Data->Sup.len * 2));
I_56087 = 0;
HEX3Atmp_56123 = 0;
HEX3Atmp_56123 = ((*T_53191).Data->Sup.len-1);
Res_56125 = 0;
Res_56125 = 0;
while (1) {
if (!(Res_56125 <= HEX3Atmp_56123)) goto LA8;
I_56087 = Res_56125;
if (!!(((*T_53191).Data->data[I_56087].Key == NIM_NIL))) goto LA10;
Idnodetablerawinsert_55995(&N_56034, (*T_53191).Data->data[I_56087].Key, (*T_53191).Data->data[I_56087].Val);
LA10: ;
Res_56125 += 1;
} LA8: ;
LOC12 = (*T_53191).Data;
unsureAsgnRef((void**) &(*T_53191).Data, N_56034);
N_56034 = LOC12;
LA6: ;
Idnodetablerawinsert_55995(&(*T_53191).Data, Key_53192, Val_53193);
(*T_53191).Counter += 1;
LA1: ;
}
N_NIMCALL(TY49545*, Getsymfromlist_53197)(TY49523* List_53199, TY48011* Ident_53200, NI Start_53201) {
TY49545* Result_53466;
NI I_53474;
NI HEX3Atmp_53523;
NI LOC1;
NI Res_53525;
Result_53466 = 0;
I_53474 = 0;
HEX3Atmp_53523 = 0;
LOC1 = Sonslen_49801(List_53199);
HEX3Atmp_53523 = (NI64)(LOC1 - 1);
Res_53525 = 0;
Res_53525 = Start_53201;
while (1) {
if (!(Res_53525 <= HEX3Atmp_53523)) goto LA2;
I_53474 = Res_53525;
if (!!(((*(*List_53199).KindU.S6.Sons->data[I_53474]).Kind == ((NU8) 3)))) goto LA4;
Internalerror_41567((*List_53199).Info, ((NimStringDesc*) &TMP191063));
LA4: ;
Result_53466 = (*(*List_53199).KindU.S6.Sons->data[I_53474]).KindU.S4.Sym;
if (!((*(*Result_53466).Name).Sup.Id == (*Ident_53200).Sup.Id)) goto LA7;
goto BeforeRet;
LA7: ;
Res_53525 += 1;
} LA2: ;
Result_53466 = NIM_NIL;
BeforeRet: ;
return Result_53466;
}
N_NIMCALL(TNimObject*, Idtableget_53166)(TY49561 T_53168, TY48005* Key_53169) {
TNimObject* Result_55819;
NI Index_55820;
Result_55819 = 0;
Index_55820 = 0;
Index_55820 = Idtablerawget_55778(T_53168, (*Key_53169).Id);
if (!(0 <= Index_55820)) goto LA2;
Result_55819 = T_53168.Data->data[Index_55820].Val;
goto LA1;
LA2: ;
Result_55819 = NIM_NIL;
LA1: ;
return Result_55819;
}
N_NIMCALL(void, Openscope_53149)(TY53107* Tab_53152) {
if (!((*Tab_53152).Stack->Sup.len <= ((NI) ((*Tab_53152).Tos)))) goto LA2;
(*Tab_53152).Stack = (TY53109*) setLengthSeq(&((*Tab_53152).Stack)->Sup, sizeof(TY49527), (NI64)(((NI) ((*Tab_53152).Tos)) + 1));
LA2: ;
Initstrtable_49744(&(*Tab_53152).Stack->data[(*Tab_53152).Tos]);
(*Tab_53152).Tos += 1;
}
N_NIMCALL(NU8, Symtabadduniqueat_53143)(TY53107* Tab_53146, TY49545* E_53147, NI At_53148) {
NU8 Result_55673;
TY49545* LOC2;
Result_55673 = 0;
LOC2 = Strtableget_53069(&(*Tab_53146).Stack->data[At_53148], (*E_53147).Name);
if (!!((LOC2 == NIM_NIL))) goto LA3;
Result_55673 = ((NU8) 0);
goto LA1;
LA3: ;
Strtableadd_53064(&(*Tab_53146).Stack->data[At_53148], E_53147);
Result_55673 = ((NU8) 1);
LA1: ;
return Result_55673;
}
N_NIMCALL(NU8, Symtabaddunique_53138)(TY53107* Tab_53141, TY49545* E_53142) {
NU8 Result_55691;
Result_55691 = 0;
Result_55691 = Symtabadduniqueat_53143(Tab_53141, E_53142, ((NI) ((NI64)(((NI) ((*Tab_53141).Tos)) - 1))));
return Result_55691;
}
N_NIMCALL(void, Rawclosescope_53153)(TY53107* Tab_53156) {
(*Tab_53156).Tos -= 1;
}
N_NIMCALL(TY46008*, Debugtype_54411)(TY49549* N_54413) {
TY46008* Result_54414;
NIM_BOOL LOC8;
NI LOC10;
NI I_54466;
NI HEX3Atmp_54485;
NI LOC13;
NI Res_54487;
TY46008* LOC21;
Result_54414 = 0;
if (!(N_54413 == NIM_NIL)) goto LA2;
Result_54414 = Torope_46046(((NimStringDesc*) &TMP191145));
goto LA1;
LA2: ;
Result_54414 = Torope_46046(reprEnum((*N_54413).Kind, NTI49162));
if (!!(((*N_54413).Sym == NIM_NIL))) goto LA5;
App_46036(&Result_54414, ((NimStringDesc*) &TMP191146));
App_46036(&Result_54414, (*(*(*N_54413).Sym).Name).S);
LA5: ;
LOC8 = !(((*N_54413).Kind == ((NU8) 28)));
if (!(LOC8)) goto LA9;
LOC10 = Sonslen_49804(N_54413);
LOC8 = (0 < LOC10);
LA9: ;
if (!LOC8) goto LA11;
App_46036(&Result_54414, ((NimStringDesc*) &TMP191147));
I_54466 = 0;
HEX3Atmp_54485 = 0;
LOC13 = Sonslen_49804(N_54413);
HEX3Atmp_54485 = (NI64)(LOC13 - 1);
Res_54487 = 0;
Res_54487 = 0;
while (1) {
if (!(Res_54487 <= HEX3Atmp_54485)) goto LA14;
I_54466 = Res_54487;
if (!(0 < I_54466)) goto LA16;
App_46036(&Result_54414, ((NimStringDesc*) &TMP191148));
LA16: ;
if (!((*N_54413).Sons->data[I_54466] == NIM_NIL)) goto LA19;
App_46036(&Result_54414, ((NimStringDesc*) &TMP191145));
goto LA18;
LA19: ;
LOC21 = Debugtype_54411((*N_54413).Sons->data[I_54466]);
App_46031(&Result_54414, LOC21);
LA18: ;
Res_54487 += 1;
} LA14: ;
App_46036(&Result_54414, ((NimStringDesc*) &TMP191149));
LA11: ;
LA1: ;
return Result_54414;
}
N_NIMCALL(void, Debug_53160)(TY49549* N_53162) {
TY46008* LOC1;
NimStringDesc* LOC2;
LOC1 = Debugtype_54411(N_53162);
LOC2 = Ropetostr_46066(LOC1);
Writeln_54812(stdout, LOC2);
}
N_NIMCALL(void, Symtabaddat_53132)(TY53107* Tab_53135, TY49545* E_53136, NI At_53137) {
Strtableadd_53064(&(*Tab_53135).Stack->data[At_53137], E_53136);
}
N_NIMCALL(TY49545*, Symtablocalget_53123)(TY53107 Tab_53125, TY48011* S_53126) {
TY49545* Result_55608;
Result_55608 = 0;
Result_55608 = Strtableget_53069(&Tab_53125.Stack->data[(NI64)(((NI) (Tab_53125.Tos)) - 1)], S_53126);
return Result_55608;
}
N_NIMCALL(void, Symtabadd_53127)(TY53107* Tab_53130, TY49545* E_53131) {
Strtableadd_53064(&(*Tab_53130).Stack->data[(NI64)(((NI) ((*Tab_53130).Tos)) - 1)], E_53131);
}
N_NIMCALL(NIM_BOOL, Idtablehasobjectaskey_53180)(TY49561 T_53182, TY48005* Key_53183) {
NIM_BOOL Result_55802;
NI Index_55803;
Result_55802 = 0;
Index_55803 = 0;
Index_55803 = Idtablerawget_55778(T_53182, (*Key_53183).Id);
if (!(0 <= Index_55803)) goto LA2;
Result_55802 = (T_53182.Data->data[Index_55803].Key == Key_53183);
goto LA1;
LA2: ;
Result_55802 = NIM_FALSE;
LA1: ;
return Result_55802;
}
N_NIMCALL(TY49545*, Lookupinrecord_53202)(TY49523* N_53204, TY48011* Field_53205) {
TY49545* Result_53246;
NI I_53269;
NI HEX3Atmp_53407;
NI LOC1;
NI Res_53409;
NI I_53344;
NI HEX3Atmp_53413;
NI LOC12;
NI Res_53415;
TY49523* LOC14;
Result_53246 = 0;
Result_53246 = NIM_NIL;
switch ((*N_53204).Kind) {
case ((NU8) 113):
I_53269 = 0;
HEX3Atmp_53407 = 0;
LOC1 = Sonslen_49801(N_53204);
HEX3Atmp_53407 = (NI64)(LOC1 - 1);
Res_53409 = 0;
Res_53409 = 0;
while (1) {
if (!(Res_53409 <= HEX3Atmp_53407)) goto LA2;
I_53269 = Res_53409;
Result_53246 = Lookupinrecord_53202((*N_53204).KindU.S6.Sons->data[I_53269], Field_53205);
if (!!((Result_53246 == NIM_NIL))) goto LA4;
goto BeforeRet;
LA4: ;
Res_53409 += 1;
} LA2: ;
break;
case ((NU8) 114):
if (!!(((*(*N_53204).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA7;
Internalerror_41567((*N_53204).Info, ((NimStringDesc*) &TMP191688));
LA7: ;
Result_53246 = Lookupinrecord_53202((*N_53204).KindU.S6.Sons->data[0], Field_53205);
if (!!((Result_53246 == NIM_NIL))) goto LA10;
goto BeforeRet;
LA10: ;
I_53344 = 0;
HEX3Atmp_53413 = 0;
LOC12 = Sonslen_49801(N_53204);
HEX3Atmp_53413 = (NI64)(LOC12 - 1);
Res_53415 = 0;
Res_53415 = 1;
while (1) {
if (!(Res_53415 <= HEX3Atmp_53413)) goto LA13;
I_53344 = Res_53415;
switch ((*(*N_53204).KindU.S6.Sons->data[I_53344]).Kind) {
case ((NU8) 75):
case ((NU8) 78):
LOC14 = Lastson_49807((*N_53204).KindU.S6.Sons->data[I_53344]);
Result_53246 = Lookupinrecord_53202(LOC14, Field_53205);
if (!!((Result_53246 == NIM_NIL))) goto LA16;
goto BeforeRet;
LA16: ;
break;
default:
Internalerror_41567((*N_53204).Info, ((NimStringDesc*) &TMP191689));
break;
}
Res_53415 += 1;
} LA13: ;
break;
case ((NU8) 3):
if (!((*(*(*N_53204).KindU.S4.Sym).Name).Sup.Id == (*Field_53205).Sup.Id)) goto LA19;
Result_53246 = (*N_53204).KindU.S4.Sym;
LA19: ;
break;
default:
Internalerror_41567((*N_53204).Info, ((NimStringDesc*) &TMP191690));
break;
}
BeforeRet: ;
return Result_53246;
}
N_NIMCALL(void, Writeln_54812)(FILE* F_54815, NimStringDesc* X_54816) {
Write_3658(F_54815, X_54816);
Write_3658(F_54815, ((NimStringDesc*) &TMP192495));
}
N_NOINLINE(void, astalgoInit)(void) {
}

