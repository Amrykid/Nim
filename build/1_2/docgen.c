/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10602 TY10602;
typedef struct TNimType TNimType;
typedef struct TY10618 TY10618;
typedef struct TY10990 TY10990;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY8004 TY8004;
typedef struct TY10988 TY10988;
typedef struct TY51525 TY51525;
typedef struct TY151017 TY151017;
typedef struct TNimNode TNimNode;
typedef struct TY48008 TY48008;
typedef struct TY151034 TY151034;
typedef struct TY151011 TY151011;
typedef struct TY143077 TY143077;
typedef struct TY143075 TY143075;
typedef struct TY51551 TY51551;
typedef struct TY43532 TY43532;
typedef struct TY51547 TY51547;
typedef struct TY50011 TY50011;
typedef struct TY51519 TY51519;
typedef struct TY148007 TY148007;
typedef struct TNimObject TNimObject;
typedef struct TY81016 TY81016;
typedef struct TY81014 TY81014;
typedef struct TY81012 TY81012;
typedef struct TY50005 TY50005;
typedef struct TY51529 TY51529;
typedef struct TY51527 TY51527;
typedef struct TY51539 TY51539;
typedef struct TY51543 TY51543;
typedef struct TY51549 TY51549;
typedef struct TY39013 TY39013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY151011 {
TY143077* N;
TY48008* Refname;
TY48008* Header;
};
typedef TY48008* TY151013[21];
typedef TY48008* TY151044[5];
struct TY151017 {
NimStringDesc* Filename;
NimStringDesc* Basedir;
TY48008* Moddesc;
TY48008* Dependson;
NI Id;
NI Splitafter;
TY151034* Tocpart;
NIM_BOOL Hastoc;
TY151013 Toc;
TY151013 Section;
TY143077* Indexfile;
TY143077* Theindex;
NimStringDesc* Indexvalfilename;
NI Indent;
NI Verbatim;
TY151044 Meta;
};
struct TY143077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY143075* Sons;
};
struct TY43532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51525 {
TY51551* Typ;
NimStringDesc* Comment;
TY43532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51547* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51519* Sons;
} S6;
} KindU;
};
typedef TY48008* TY48446[1];
typedef TY48008* TY158585[4];
typedef TY48008* TY173060[2];
struct TNimObject {
TNimType* m_type;
};
struct TY148007 {
  TNimObject Sup;
NU8 Kind;
NI Start;
NI Length;
NCSTRING Buf;
NI Pos;
NU8 State;
};
typedef NimStringDesc* TY148060[33];
struct TY81012 {
NU8 Kind;
NI16 Length;
};
struct TY81016 {
NI Indent;
NI Linelen;
NI Pos;
NI Idx;
TY81014* Tokens;
NimStringDesc* Buf;
NI Pendingnl;
TY51519* Comstack;
NU8 Flags;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY51529 {
TNimType* m_type;
NI Counter;
TY51527* Data;
};
struct TY51539 {
NU8 K;
NU8 S;
NU8 Flags;
TY51551* T;
TY48008* R;
NI A;
};
struct TY51547 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51551* Typ;
TY50011* Name;
TY43532 Info;
TY51547* Owner;
NU32 Flags;
TY51529 Tab;
TY51525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51539 Loc;
TY51543* Annex;
};
typedef NimStringDesc* TY73146[109];
typedef NimStringDesc* TY44018[4];
typedef NimStringDesc* TY43865[1];
typedef NimStringDesc* TY153604[6];
typedef TY48008* TY159326[6];
typedef NimStringDesc* TY153623[8];
typedef TY48008* TY160005[8];
typedef NIM_CHAR TY152336[9];
typedef TY48008* TY157050[3];
typedef NI TY8614[8];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY51551 {
  TY50005 Sup;
NU8 Kind;
TY51549* Sons;
TY51525* N;
NU8 Flags;
NU8 Callconv;
TY51547* Owner;
TY51547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51539 Loc;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51543 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51525* Path;
};
struct TY151034 {
  TGenericSeq Sup;
  TY151011 data[SEQ_DECL_SIZE];
};
struct TY143075 {
  TGenericSeq Sup;
  TY143077* data[SEQ_DECL_SIZE];
};
struct TY51519 {
  TGenericSeq Sup;
  TY51525* data[SEQ_DECL_SIZE];
};
struct TY81014 {
  TGenericSeq Sup;
  TY81012 data[SEQ_DECL_SIZE];
};
struct TY51527 {
  TGenericSeq Sup;
  TY51547* data[SEQ_DECL_SIZE];
};
struct TY51549 {
  TGenericSeq Sup;
  TY51551* data[SEQ_DECL_SIZE];
};
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508);
N_NIMCALL(TY51525*, Parsefile_88031)(NimStringDesc* Filename_88033);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_34844, NimStringDesc* Ext_34845);
N_NIMCALL(TY151017*, Newdocumentor_151162)(NimStringDesc* Filename_151164);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
N_NIMCALL(NimStringDesc*, Getconfigvar_42133)(NimStringDesc* Key_42135);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* S_25504);
N_NIMCALL(void, Initindexfile_151132)(TY151017* D_151134);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_34820, NimStringDesc* Ext_34821);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* Path_34585);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* Filename_32804);
N_NIMCALL(TY143077*, Rstparse_143082)(NimStringDesc* Text_143084, NIM_BOOL Skippounds_143085, NimStringDesc* Filename_143086, NI Line_143087, NI Column_143088, NIM_BOOL* Hastoc_143090);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(TY143077*, Findindexnode_151048)(TY143077* N_151050);
N_NIMCALL(TY143077*, Newrstnode_143094)(NU8 Kind_143096);
N_NIMCALL(NI, Rsonslen_143091)(TY143077* N_143093);
N_NIMCALL(void, Rawmessage_43553)(NU8 Msg_43555, NimStringDesc* Arg_43556);
N_NIMCALL(void, Clearindex_143126)(TY143077* Index_143128, NimStringDesc* Filename_143129);
N_NIMCALL(void, Addson_143101)(TY143077* Father_143103, TY143077* Son_143104);
N_NIMCALL(TY143077*, Newrstnode_143097)(NU8 Kind_143099, NimStringDesc* S_143100);
N_NIMCALL(void, Generatedoc_153108)(TY151017* D_153110, TY51525* N_153111);
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035);
N_NIMCALL(TY48008*, Gencomment_151718)(TY151017* D_151720, TY51525* N_151721);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25769, NimStringDesc* Prefix_25770);
N_NIMCALL(TY48008*, Renderrsttoout_151612)(TY151017* D_151614, TY143077* N_151615);
N_NIMCALL(TY48008*, Renderaux_151616)(TY151017* D_151618, TY143077* N_151619, NimStringDesc* Outer_151620);
N_NIMCALL(TY48008*, Ropef_48069)(NimStringDesc* Frmt_48071, TY48008** Args_48073, NI Args_48073Len0);
N_NIMCALL(TY48008*, Renderheadline_152180)(TY151017* D_152182, TY143077* N_152183);
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_143105)(TY143077* N_143107);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
N_NIMCALL(TY48008*, Dispf_151579)(NimStringDesc* Xml_151581, NimStringDesc* Tex_151582, TY48008** Args_151584, NI Args_151584Len0);
N_NIMCALL(TY48008*, Torope_48052)(NI64 I_48054);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18609, NIM_CHAR C_18610);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487);
N_NIMCALL(TY48008*, Renderoverline_152250)(TY151017* D_152252, TY143077* N_152253);
N_NIMCALL(NimStringDesc*, Disp_151565)(NimStringDesc* Xml_151567, NimStringDesc* Tex_151568);
N_NIMCALL(TY48008*, Renderfield_152873)(TY151017* D_152875, TY143077* N_152876);
N_NIMCALL(NimStringDesc*, Addnodes_143108)(TY143077* N_143110);
N_NIMCALL(NimStringDesc*, Esc_151505)(NimStringDesc* S_151507, NI Splitafter_151508);
N_NIMCALL(NI, Nextsplitpoint_151455)(NimStringDesc* S_151457, NI Start_151458);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18582, NI Addlen_18583);
N_NIMCALL(void, Escchar_151441)(NimStringDesc** Dest_151444, NIM_CHAR C_151445);
N_NIMCALL(void, Addxmlchar_151426)(NimStringDesc** Dest_151429, NIM_CHAR C_151430);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Addtexchar_151436)(NimStringDesc** Dest_151439, NIM_CHAR C_151440);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24981, NIM_BOOL Leading_24982, NIM_BOOL Trailing_24983);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_24638, NimStringDesc* B_24639);
N_NIMCALL(void, Internalerror_43571)(NimStringDesc* Errmsg_43573);
N_NIMCALL(NimStringDesc*, Texcolumns_152855)(TY143077* N_152857);
N_NIMCALL(void, Dispa_151595)(TY48008** Dest_151598, NimStringDesc* Xml_151599, NimStringDesc* Tex_151600, TY48008** Args_151602, NI Args_151602Len0);
N_NIMCALL(void, Appf_48074)(TY48008** C_48077, NimStringDesc* Frmt_48078, TY48008** Args_48080, NI Args_48080Len0);
N_NIMCALL(TY143077*, Lastson_143667)(TY143077* N_143669);
N_NIMCALL(TY48008*, Renderimage_152713)(TY151017* D_152715, TY143077* N_152716);
N_NIMCALL(NimStringDesc*, Getfieldvalue_143111)(TY143077* N_143113, NimStringDesc* Fieldname_143114);
N_NIMCALL(TY48008*, Fieldaux_152709)(NimStringDesc* S_152711);
N_NIMCALL(NimStringDesc*, Getargument_143115)(TY143077* N_143117);
N_NIMCALL(TY48008*, Rendercodeblock_152767)(TY151017* D_152769, TY143077* N_152770);
N_NIMCALL(NU8, Getsourcelanguage_148102)(NimStringDesc* Name_148104);
N_NIMCALL(void, Initgeneraltokenizer_148105)(TY148007* G_148108, NimStringDesc* Buf_148109);
N_NIMCALL(void, Getnexttoken_148114)(TY148007* G_148117, NU8 Lang_148118);
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1928, NI First_1929, NI Last_1930);
N_NIMCALL(void, Deinitgeneraltokenizer_148110)(TY148007* G_148113);
N_NIMCALL(TY48008*, Rendercontainer_152830)(TY151017* D_152832, TY143077* N_152833);
N_NIMCALL(TY48008*, Renderindexterm_151677)(TY151017* D_151679, TY143077* N_151680);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19203);
N_NIMCALL(void, Setindexpair_143118)(TY143077* Index_143120, TY143077* Key_143121, TY143077* Val_143122);
N_NIMCALL(NimStringDesc*, Tofilename_43579)(TY43532 Info_43581);
N_NIMCALL(NI, Tolinenumber_43585)(TY43532 Info_43587);
N_NIMCALL(NI, Tocolumn_43582)(TY43532 Info_43584);
N_NIMCALL(void, Genitem_152074)(TY151017* D_152076, TY51525* N_152077, TY51525* Namenode_152078, NU8 K_152079);
N_NIMCALL(NIM_BOOL, Isvisible_151801)(TY51525* N_151803);
N_NIMCALL(NI, Sonslen_51803)(TY51525* N_51805);
N_NIMCALL(NimStringDesc*, Getname_151929)(TY51525* N_151931, NI Splitafter_151932);
N_NIMCALL(void, Internalerror_43567)(TY43532 Info_43569, NimStringDesc* Errmsg_43570);
N_NIMCALL(TY48008*, Genreccomment_151725)(TY151017* D_151727, TY51525* N_151728);
N_NIMCALL(void, Inittokrender_81048)(TY81016* R_81051, TY51525* N_81052, NU8 Renderflags_81055);
N_NIMCALL(void, Getnexttok_81056)(TY81016* R_81059, NU8* Kind_81061, NimStringDesc** Literal_81063);
N_NIMCALL(TY48008*, Ropeformatnamedvars_151220)(NimStringDesc* Frmt_151222, NimStringDesc** Varnames_151224, NI Varnames_151224Len0, TY48008** Varvalues_151226, NI Varvalues_151226Len0);
N_NIMCALL(NI, Getvaridx_151198)(NimStringDesc** Varnames_151201, NI Varnames_151201Len0, NimStringDesc* Id_151202);
N_NIMCALL(void, Setindexforsourceterm_151641)(TY151017* D_151643, TY143077* Name_151644, NI Id_151645);
N_NIMCALL(TY143077*, Getrstname_152010)(TY51525* N_152012);
N_NIMCALL(TY51525*, Lastson_51809)(TY51525* N_51811);
N_NIMCALL(void, Writerope_48058)(TY48008* Head_48060, NimStringDesc* Filename_48061);
N_NIMCALL(TY48008*, Genoutfile_153511)(TY151017* D_153513);
N_NIMCALL(TY48008*, Rendertocentries_152674)(TY151017* D_152676, NI* J_152678, NI Lvl_152679);
N_NIMCALL(TY48008*, Rendertocentry_152665)(TY151017* D_152667, TY151011* E_152668);
N_NIMCALL(void, Gensection_153447)(TY151017* D_153449, NU8 Kind_153450);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_1924, NI First_1925);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19579, TNimType* Typ_19580);
N_NIMCALL(NimStringDesc*, ntgetDateStr)(void);
N_NIMCALL(NimStringDesc*, ntgetClockStr)(void);
N_NIMCALL(NimStringDesc*, Getoutfile_42143)(NimStringDesc* Filename_42145, NimStringDesc* Ext_42146);
N_NIMCALL(void, Generateindex_153637)(TY151017* D_153639);
N_NIMCALL(void, Sortindex_143123)(TY143077* A_143125);
N_NIMCALL(TY48008*, Renderrsttorst_152306)(TY151017* D_152308, TY143077* N_152309);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_25750, NIM_CHAR C_25751);
N_NIMCALL(TY48008*, Renderrstsons_152310)(TY151017* D_152312, TY143077* N_152313);
N_NIMCALL(NI, Ropelen_48055)(TY48008* A_48057);
N_NIMCALL(void, Commandrstaux_153667)(NimStringDesc* Filename_153669, NimStringDesc* Outext_153670);
STRING_LITERAL(TMP151047, "<wbr />", 7);
STRING_LITERAL(TMP195090, "nim", 3);
STRING_LITERAL(TMP195097, "split.item.toc", 14);
STRING_LITERAL(TMP195098, "txt", 3);
STRING_LITERAL(TMP195099, "html", 4);
STRING_LITERAL(TMP195167, "Index", 5);
STRING_LITERAL(TMP195168, "##", 2);
STRING_LITERAL(TMP195169, "$1", 2);
STRING_LITERAL(TMP195170, "<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2_toc\">$3</a></h$1>", 63);
STRING_LITERAL(TMP195171, "\\rsth$4{$3}\\label{$2}$n", 23);
STRING_LITERAL(TMP195172, "", 0);
STRING_LITERAL(TMP195173, "<h$1 id=\"$2\">$3</h$1>", 21);
STRING_LITERAL(TMP195174, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP195175, "\\rstov$4{$3}\\label{$2}$n", 24);
STRING_LITERAL(TMP195176, "<hr />\015\012", 8);
STRING_LITERAL(TMP195177, "\\hrule\015\012", 8);
STRING_LITERAL(TMP195178, "<p>$1</p>\015\012", 11);
STRING_LITERAL(TMP195179, "$1$n$n", 6);
STRING_LITERAL(TMP195180, "<ul class=\"simple\">$1</ul>\015\012", 28);
STRING_LITERAL(TMP195181, "\\begin{itemize}$1\\end{itemize}\015\012", 32);
STRING_LITERAL(TMP195182, "<li>$1</li>\015\012", 13);
STRING_LITERAL(TMP195183, "\\item $1\015\012", 10);
STRING_LITERAL(TMP195184, "<ol class=\"simple\">$1</ol>\015\012", 28);
STRING_LITERAL(TMP195185, "\\begin{enumerate}$1\\end{enumerate}\015\012", 36);
STRING_LITERAL(TMP195186, "<dl class=\"docutils\">$1</dl>\015\012", 30);
STRING_LITERAL(TMP195187, "\\begin{description}$1\\end{description}\015\012", 40);
STRING_LITERAL(TMP195188, "<dt>$1</dt>\015\012", 13);
STRING_LITERAL(TMP195189, "\\item[$1] ", 10);
STRING_LITERAL(TMP195190, "<dd>$1</dd>\015\012", 13);
STRING_LITERAL(TMP195191, "$1\015\012", 4);
STRING_LITERAL(TMP195192, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP195193, " ", 1);
STRING_LITERAL(TMP195194, "&amp;", 5);
STRING_LITERAL(TMP195195, "&lt;", 4);
STRING_LITERAL(TMP195196, "&gt;", 4);
STRING_LITERAL(TMP195197, "&quot;", 6);
STRING_LITERAL(TMP195198, "\\_", 2);
STRING_LITERAL(TMP195199, "\\symbol{123}", 12);
STRING_LITERAL(TMP195200, "\\symbol{125}", 12);
STRING_LITERAL(TMP195201, "\\symbol{91}", 11);
STRING_LITERAL(TMP195202, "\\symbol{93}", 11);
STRING_LITERAL(TMP195203, "\\symbol{92}", 11);
STRING_LITERAL(TMP195204, "\\$", 2);
STRING_LITERAL(TMP195205, "\\&", 2);
STRING_LITERAL(TMP195206, "\\#", 2);
STRING_LITERAL(TMP195207, "\\%", 2);
STRING_LITERAL(TMP195208, "\\symbol{126}", 12);
STRING_LITERAL(TMP195209, "\\symbol{64}", 11);
STRING_LITERAL(TMP195210, "\\symbol{94}", 11);
STRING_LITERAL(TMP195211, "\\symbol{96}", 11);
STRING_LITERAL(TMP195212, "author", 6);
STRING_LITERAL(TMP195213, "version", 7);
STRING_LITERAL(TMP195214, "<tr>$1</tr>$n", 13);
STRING_LITERAL(TMP195215, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP195216, "\\item[$1:]", 10);
STRING_LITERAL(TMP195217, "<td>$1</td>", 11);
STRING_LITERAL(TMP195218, " $1$n", 5);
STRING_LITERAL(TMP195219, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP195220, "\\begin{description}$n$1\\end{description}\015\012", 42);
STRING_LITERAL(TMP195221, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP195222, "\\item[$1]", 9);
STRING_LITERAL(TMP195223, "<td align=\"left\">$1</td>$n", 26);
STRING_LITERAL(TMP195224, "renderRstToOut", 14);
STRING_LITERAL(TMP195225, "<pre>$1</pre>$n", 15);
STRING_LITERAL(TMP195226, "\\begin{rstpre}$n$1$n\\end{rstpre}$n", 34);
STRING_LITERAL(TMP195227, "<p>$1</p>", 9);
STRING_LITERAL(TMP195228, "$1<br />", 8);
STRING_LITERAL(TMP195229, "$1\\\\$n", 6);
STRING_LITERAL(TMP195230, "<blockquote><p>$1</p></blockquote>$n", 36);
STRING_LITERAL(TMP195231, "\\begin{quote}$1\\end{quote}$n", 28);
STRING_LITERAL(TMP195232, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP195233, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP195234, "|X", 2);
STRING_LITERAL(TMP195235, "|}$n\\hline$n$1\\end{rsttab}\\end{table}", 37);
STRING_LITERAL(TMP195236, " & $1", 5);
STRING_LITERAL(TMP195237, "$1\\\\$n\\hline$n", 14);
STRING_LITERAL(TMP195238, "<th>$1</th>", 11);
STRING_LITERAL(TMP195239, "\\textbf{$1}", 11);
STRING_LITERAL(TMP195240, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP195241, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP195242, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP195243, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP195244, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP195245, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP195246, "scale", 5);
STRING_LITERAL(TMP195247, " scale=\"$1\"", 11);
STRING_LITERAL(TMP195248, " scale=$1", 9);
STRING_LITERAL(TMP195249, "height", 6);
STRING_LITERAL(TMP195250, " height=\"$1\"", 12);
STRING_LITERAL(TMP195251, " height=$1", 10);
STRING_LITERAL(TMP195252, "width", 5);
STRING_LITERAL(TMP195253, " width=\"$1\"", 11);
STRING_LITERAL(TMP195254, " width=$1", 9);
STRING_LITERAL(TMP195255, "alt", 3);
STRING_LITERAL(TMP195256, " alt=\"$1\"", 9);
STRING_LITERAL(TMP195257, "align", 5);
STRING_LITERAL(TMP195258, " align=\"$1\"", 11);
STRING_LITERAL(TMP195259, "[$1]", 4);
STRING_LITERAL(TMP195260, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP195261, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP195262, "renderCodeBlock", 15);
STRING_LITERAL(TMP195378, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP195379, "\\span$2{$1}", 11);
extern NIM_CONST TY148060 Tokenclasstostr_148059;
STRING_LITERAL(TMP195380, "<pre>$1</pre>", 13);
STRING_LITERAL(TMP195381, "<div>$1</div>", 13);
STRING_LITERAL(TMP195382, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP195383, "$2", 2);
STRING_LITERAL(TMP195384, "|$1|", 4);
STRING_LITERAL(TMP195385, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP195386, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP195387, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP195388, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP195389, "<em>$1</em>", 11);
STRING_LITERAL(TMP195390, "\\emph{$1}", 9);
STRING_LITERAL(TMP195391, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP195392, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP195393, "<em id=\"$1\">$2</em>", 19);
STRING_LITERAL(TMP195394, "$2\\label{$1}", 12);
STRING_LITERAL(TMP195395, "#", 1);
STRING_LITERAL(TMP195396, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP195397, "\\texttt{$1}", 11);
STRING_LITERAL(TMP195398, "`", 1);
STRING_LITERAL(TMP195399, "getName()", 9);
STRING_LITERAL(TMP195400, "<span class=\"Comment\">$1</span>", 31);
STRING_LITERAL(TMP195401, "\\spanComment{$1}", 16);
STRING_LITERAL(TMP195402, "<span class=\"Keyword\">$1</span>", 31);
STRING_LITERAL(TMP195403, "\\spanKeyword{$1}", 16);
STRING_LITERAL(TMP195404, "<span class=\"Operator\">$1</span>", 32);
STRING_LITERAL(TMP195405, "\\spanOperator{$1}", 17);
STRING_LITERAL(TMP195406, "<span class=\"StringLit\">$1</span>", 33);
STRING_LITERAL(TMP195407, "\\spanStringLit{$1}", 18);
STRING_LITERAL(TMP195408, "<span class=\"CharLit\">$1</span>", 31);
STRING_LITERAL(TMP195409, "\\spanCharLit{$1}", 16);
STRING_LITERAL(TMP195410, "<span class=\"DecNumber\">$1</span>", 33);
STRING_LITERAL(TMP195411, "\\spanDecNumber{$1}", 18);
STRING_LITERAL(TMP195412, "<span class=\"FloatNumber\">$1</span>", 35);
STRING_LITERAL(TMP195413, "\\spanFloatNumber{$1}", 20);
STRING_LITERAL(TMP195414, "<span class=\"Identifier\">$1</span>", 34);
STRING_LITERAL(TMP195415, "\\spanIdentifier{$1}", 19);
STRING_LITERAL(TMP195416, "<span class=\"Other\">$1</span>", 29);
STRING_LITERAL(TMP195417, "\\spanOther{$1}", 14);
STRING_LITERAL(TMP195418, "docgen.genThing(", 16);
extern NIM_CONST TY73146 Toktypetostr_73145;
STRING_LITERAL(TMP195419, "$", 1);
STRING_LITERAL(TMP195420, "ropeFormatNamedVars", 19);
STRING_LITERAL(TMP195421, "}", 1);
STRING_LITERAL(TMP195422, "doc.item", 8);
STRING_LITERAL(TMP195424, "name", 4);
STRING_LITERAL(TMP195425, "header", 6);
STRING_LITERAL(TMP195426, "desc", 4);
STRING_LITERAL(TMP195427, "itemID", 6);
NIM_CONST TY44018 TMP195423 = {((NimStringDesc*) &TMP195424),
((NimStringDesc*) &TMP195425),
((NimStringDesc*) &TMP195426),
((NimStringDesc*) &TMP195427)}
;
STRING_LITERAL(TMP195428, "doc.item.toc", 12);
STRING_LITERAL(TMP195429, "getRstName()", 12);
STRING_LITERAL(TMP195430, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>$n", 61);
STRING_LITERAL(TMP195431, "\\item\\label{$1_toc} $2\\ref{$1}$n", 32);
STRING_LITERAL(TMP195432, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP195433, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP195434, "doc.section", 11);
STRING_LITERAL(TMP195436, "sectionid", 9);
STRING_LITERAL(TMP195437, "sectionTitle", 12);
STRING_LITERAL(TMP195438, "sectionTitleID", 14);
STRING_LITERAL(TMP195439, "content", 7);
NIM_CONST TY44018 TMP195435 = {((NimStringDesc*) &TMP195436),
((NimStringDesc*) &TMP195437),
((NimStringDesc*) &TMP195438),
((NimStringDesc*) &TMP195439)}
;
STRING_LITERAL(TMP195440, "doc.section.toc", 15);
STRING_LITERAL(TMP195441, "doc.toc", 7);
NIM_CONST TY43865 TMP195442 = {((NimStringDesc*) &TMP195439)}
;
STRING_LITERAL(TMP195443, "Module ", 7);
STRING_LITERAL(TMP195444, "doc.body_toc", 12);
STRING_LITERAL(TMP195445, "doc.body_no_toc", 15);
STRING_LITERAL(TMP195447, "title", 5);
STRING_LITERAL(TMP195448, "tableofcontents", 15);
STRING_LITERAL(TMP195449, "moduledesc", 10);
STRING_LITERAL(TMP195450, "date", 4);
STRING_LITERAL(TMP195451, "time", 4);
NIM_CONST TY153604 TMP195446 = {((NimStringDesc*) &TMP195447),
((NimStringDesc*) &TMP195448),
((NimStringDesc*) &TMP195449),
((NimStringDesc*) &TMP195450),
((NimStringDesc*) &TMP195451),
((NimStringDesc*) &TMP195439)}
;
STRING_LITERAL(TMP195452, "doc.file", 8);
NIM_CONST TY153623 TMP195453 = {((NimStringDesc*) &TMP195447),
((NimStringDesc*) &TMP195448),
((NimStringDesc*) &TMP195449),
((NimStringDesc*) &TMP195450),
((NimStringDesc*) &TMP195451),
((NimStringDesc*) &TMP195439),
((NimStringDesc*) &TMP195212),
((NimStringDesc*) &TMP195213)}
;
NIM_CONST TY152336 Lvltochar_152335 = {33,
61,
45,
126,
96,
60,
42,
124,
43}
;
STRING_LITERAL(TMP195454, "$n$1$2$n$1$3", 12);
extern NIM_CONST TY152336 Lvltochar_152335;
STRING_LITERAL(TMP195455, "$n$1$3$n$1$2$n$1$3", 18);
STRING_LITERAL(TMP195456, "$n$n$1$2$n$n", 12);
STRING_LITERAL(TMP195457, "$n$n$1$2", 8);
STRING_LITERAL(TMP195458, "$n$1* $2", 8);
STRING_LITERAL(TMP195459, "$n$1(#) $2", 10);
STRING_LITERAL(TMP195460, "$n$1  $2", 8);
STRING_LITERAL(TMP195461, "$n$1:$2:$3$4", 12);
STRING_LITERAL(TMP195462, "$n$1| $2", 8);
STRING_LITERAL(TMP195463, "`$1`_", 5);
STRING_LITERAL(TMP195464, "`$1 <$2>`_", 10);
STRING_LITERAL(TMP195465, "`$1`:$2:", 8);
STRING_LITERAL(TMP195466, "`$1`:sub:", 9);
STRING_LITERAL(TMP195467, "`$1`:sup:", 9);
STRING_LITERAL(TMP195468, "`$1`:idx:", 9);
STRING_LITERAL(TMP195469, "*$1*", 4);
STRING_LITERAL(TMP195470, "**$1**", 6);
STRING_LITERAL(TMP195471, "`$1`", 4);
STRING_LITERAL(TMP195472, "``$1``", 6);
STRING_LITERAL(TMP195473, "\\", 1);
STRING_LITERAL(TMP195474, "\\\\", 2);
STRING_LITERAL(TMP195475, "$n$n$1.. index::$n$2", 20);
STRING_LITERAL(TMP195476, "$n$n$1.. contents::", 19);
STRING_LITERAL(TMP195478, "\\-", 2);
STRING_LITERAL(TMP195479, "tex", 3);
NimStringDesc* Splitter_151046;
extern TY10990 Gch_11010;
extern TNimType* NTI151019; /* PDoc */
extern TNimType* NTI151034; /* seq[TTocEntry] */
extern NimStringDesc* Gindexfile_42081;
extern NU8 Gcmd_42082;
extern TNimType* NTI148007; /* TGeneralTokenizer */
extern TNimType* NTI51174; /* TSymKind */
extern NU32 Gglobaloptions_42077;
extern TNimType* NTI143008; /* TRstNodeKind */
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11414))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11010.Zct, C_12403);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3001(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3006(&(*C_13022).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(TY151017*, Newdocumentor_151162)(NimStringDesc* Filename_151164) {
TY151017* Result_151165;
NimStringDesc* S_151197;
Result_151165 = 0;
Result_151165 = (TY151017*) newObj(NTI151019, sizeof(TY151017));
asgnRefNoCycle((void**) &(*Result_151165).Tocpart, (TY151034*) newSeq(NTI151034, 0));
asgnRefNoCycle((void**) &(*Result_151165).Filename, copyString(Filename_151164));
(*Result_151165).Id = 100;
(*Result_151165).Splitafter = 20;
S_151197 = 0;
S_151197 = Getconfigvar_42133(((NimStringDesc*) &TMP195097));
if (!!(((S_151197) && (S_151197)->Sup.len == 0))) goto LA2;
(*Result_151165).Splitafter = nsuParseInt(S_151197);
LA2: ;
return Result_151165;
}
N_NIMCALL(TY143077*, Findindexnode_151048)(TY143077* N_151050) {
TY143077* Result_151051;
NI I_151114;
NI HEX3Atmp_151127;
NI LOC11;
NI Res_151129;
Result_151051 = 0;
if (!(N_151050 == NIM_NIL)) goto LA2;
Result_151051 = NIM_NIL;
goto LA1;
LA2: ;
if (!((*N_151050).Kind == ((NU8) 51))) goto LA4;
Result_151051 = (*N_151050).Sons->data[2];
if (!(Result_151051 == NIM_NIL)) goto LA7;
Result_151051 = Newrstnode_143094(((NU8) 9));
asgnRefNoCycle((void**) &(*N_151050).Sons->data[2], Result_151051);
goto LA6;
LA7: ;
if (!((*Result_151051).Kind == ((NU8) 0))) goto LA9;
Result_151051 = (*Result_151051).Sons->data[0];
goto LA6;
LA9: ;
LA6: ;
goto LA1;
LA4: ;
Result_151051 = NIM_NIL;
I_151114 = 0;
HEX3Atmp_151127 = 0;
LOC11 = Rsonslen_143091(N_151050);
HEX3Atmp_151127 = (NI64)(LOC11 - 1);
Res_151129 = 0;
Res_151129 = 0;
while (1) {
if (!(Res_151129 <= HEX3Atmp_151127)) goto LA12;
I_151114 = Res_151129;
Result_151051 = Findindexnode_151048((*N_151050).Sons->data[I_151114]);
if (!!((Result_151051 == NIM_NIL))) goto LA14;
goto BeforeRet;
LA14: ;
Res_151129 += 1;
} LA12: ;
LA1: ;
BeforeRet: ;
return Result_151051;
}
N_NIMCALL(void, Initindexfile_151132)(TY151017* D_151134) {
TY143077* H_151135;
NIM_BOOL Dummyhastoc_151136;
NimStringDesc* LOC4;
NIM_BOOL LOC6;
NimStringDesc* LOC9;
NIM_BOOL LOC11;
TY143077* LOC15;
H_151135 = 0;
Dummyhastoc_151136 = 0;
if (!(Gindexfile_42081->Sup.len == 0)) goto LA2;
goto BeforeRet;
LA2: ;
asgnRefNoCycle((void**) &Gindexfile_42081, nosaddFileExt(Gindexfile_42081, ((NimStringDesc*) &TMP195098)));
LOC4 = 0;
LOC4 = nosextractFilename((*D_151134).Filename);
asgnRefNoCycle((void**) &(*D_151134).Indexvalfilename, nosChangeFileExt(LOC4, ((NimStringDesc*) &TMP195099)));
LOC6 = nosexistsFile(Gindexfile_42081);
if (!LOC6) goto LA7;
LOC9 = 0;
LOC9 = Readfile_3647(Gindexfile_42081);
asgnRefNoCycle((void**) &(*D_151134).Indexfile, Rstparse_143082(LOC9, NIM_FALSE, Gindexfile_42081, 0, 1, &Dummyhastoc_151136));
asgnRefNoCycle((void**) &(*D_151134).Theindex, Findindexnode_151048((*D_151134).Indexfile));
LOC11 = ((*D_151134).Theindex == NIM_NIL);
if (LOC11) goto LA12;
LOC11 = !(((*(*D_151134).Theindex).Kind == ((NU8) 9)));
LA12: ;
if (!LOC11) goto LA13;
Rawmessage_43553(((NU8) 188), Gindexfile_42081);
LA13: ;
Clearindex_143126((*D_151134).Theindex, (*D_151134).Indexvalfilename);
goto LA5;
LA7: ;
asgnRefNoCycle((void**) &(*D_151134).Indexfile, Newrstnode_143094(((NU8) 0)));
H_151135 = Newrstnode_143094(((NU8) 2));
(*H_151135).Level = 1;
LOC15 = 0;
LOC15 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195167));
Addson_143101(H_151135, LOC15);
Addson_143101((*D_151134).Indexfile, H_151135);
H_151135 = Newrstnode_143094(((NU8) 51));
Addson_143101(H_151135, NIM_NIL);
Addson_143101(H_151135, NIM_NIL);
asgnRefNoCycle((void**) &(*D_151134).Theindex, Newrstnode_143094(((NU8) 9)));
Addson_143101(H_151135, (*D_151134).Theindex);
Addson_143101((*D_151134).Indexfile, H_151135);
LA5: ;
BeforeRet: ;
}
N_NIMCALL(TY48008*, Renderaux_151616)(TY151017* D_151618, TY143077* N_151619, NimStringDesc* Outer_151620) {
TY48008* Result_151621;
NI I_151629;
NI HEX3Atmp_151636;
NI LOC1;
NI Res_151638;
TY48008* LOC3;
TY48446 LOC4;
Result_151621 = 0;
Result_151621 = NIM_NIL;
I_151629 = 0;
HEX3Atmp_151636 = 0;
LOC1 = Rsonslen_143091(N_151619);
HEX3Atmp_151636 = (NI64)(LOC1 - 1);
Res_151638 = 0;
Res_151638 = 0;
while (1) {
if (!(Res_151638 <= HEX3Atmp_151636)) goto LA2;
I_151629 = Res_151638;
LOC3 = 0;
LOC3 = Renderrsttoout_151612(D_151618, (*N_151619).Sons->data[I_151629]);
App_48031(&Result_151621, LOC3);
Res_151638 += 1;
} LA2: ;
memset((void*)&LOC4, 0, sizeof(LOC4));
LOC4[0] = Result_151621;
Result_151621 = Ropef_48069(Outer_151620, LOC4, 1);
return Result_151621;
}
N_NIMCALL(TY48008*, Dispf_151579)(NimStringDesc* Xml_151581, NimStringDesc* Tex_151582, TY48008** Args_151584, NI Args_151584Len0) {
TY48008* Result_151585;
Result_151585 = 0;
if (!!((Gcmd_42082 == ((NU8) 15)))) goto LA2;
Result_151585 = Ropef_48069(Xml_151581, Args_151584, Args_151584Len0);
goto LA1;
LA2: ;
Result_151585 = Ropef_48069(Tex_151582, Args_151584, Args_151584Len0);
LA1: ;
return Result_151585;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18609, NIM_CHAR C_18610) {
(*Dest_18609).data[((*Dest_18609).Sup.len)-0] = C_18610;
(*Dest_18609).data[((NI64)((*Dest_18609).Sup.len + 1))-0] = 0;
(*Dest_18609).Sup.len += 1;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593) {
memcpy(((NCSTRING) (&(*Dest_18592).data[((*Dest_18592).Sup.len)-0])), ((NCSTRING) ((*Src_18593).data)), ((NI32) ((NI64)((NI64)((*Src_18593).Sup.len + 1) * 1))));
(*Dest_18592).Sup.len += (*Src_18593).Sup.len;
}
N_NIMCALL(TY48008*, Renderheadline_152180)(TY151017* D_152182, TY143077* N_152183) {
TY48008* Result_152184;
NI I_152192;
NI HEX3Atmp_152245;
NI LOC1;
NI Res_152247;
TY48008* LOC3;
TY48008* Refname_152194;
NimStringDesc* LOC4;
NI Length_152205;
TY158585 LOC8;
NimStringDesc* LOC9;
TY158585 LOC10;
NimStringDesc* LOC11;
Result_152184 = 0;
Result_152184 = NIM_NIL;
I_152192 = 0;
HEX3Atmp_152245 = 0;
LOC1 = Rsonslen_143091(N_152183);
HEX3Atmp_152245 = (NI64)(LOC1 - 1);
Res_152247 = 0;
Res_152247 = 0;
while (1) {
if (!(Res_152247 <= HEX3Atmp_152245)) goto LA2;
I_152192 = Res_152247;
LOC3 = 0;
LOC3 = Renderrsttoout_151612(D_152182, (*N_152183).Sons->data[I_152192]);
App_48031(&Result_152184, LOC3);
Res_152247 += 1;
} LA2: ;
Refname_152194 = 0;
LOC4 = 0;
LOC4 = Rstnodetorefname_143105(N_152183);
Refname_152194 = Torope_48046(LOC4);
if (!(*D_152182).Hastoc) goto LA6;
Length_152205 = 0;
Length_152205 = (*D_152182).Tocpart->Sup.len;
(*D_152182).Tocpart = (TY151034*) setLengthSeq(&((*D_152182).Tocpart)->Sup, sizeof(TY151011), (NI64)(Length_152205 + 1));
asgnRefNoCycle((void**) &(*D_152182).Tocpart->data[Length_152205].Refname, Refname_152194);
asgnRefNoCycle((void**) &(*D_152182).Tocpart->data[Length_152205].N, N_152183);
asgnRefNoCycle((void**) &(*D_152182).Tocpart->data[Length_152205].Header, Result_152184);
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Torope_48052(((NI64) ((*N_152183).Level)));
LOC8[1] = (*D_152182).Tocpart->data[Length_152205].Refname;
LOC8[2] = Result_152184;
LOC9 = 0;
LOC9 = rawNewString(1);
appendChar(LOC9, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_152183).Level - 1) + 65))))));
appendString(LOC9, ((NimStringDesc*) &TMP195172));
LOC8[3] = Torope_48046(LOC9);
Result_152184 = Dispf_151579(((NimStringDesc*) &TMP195170), ((NimStringDesc*) &TMP195171), LOC8, 4);
goto LA5;
LA6: ;
memset((void*)&LOC10, 0, sizeof(LOC10));
LOC10[0] = Torope_48052(((NI64) ((*N_152183).Level)));
LOC10[1] = Refname_152194;
LOC10[2] = Result_152184;
LOC11 = 0;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_152183).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP195172));
LOC10[3] = Torope_48046(LOC11);
Result_152184 = Dispf_151579(((NimStringDesc*) &TMP195173), ((NimStringDesc*) &TMP195171), LOC10, 4);
LA5: ;
return Result_152184;
}
N_NIMCALL(TY48008*, Renderoverline_152250)(TY151017* D_152252, TY143077* N_152253) {
TY48008* Result_152254;
TY48008* T_152255;
NI I_152263;
NI HEX3Atmp_152301;
NI LOC1;
NI Res_152303;
TY48008* LOC3;
TY158585 LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
Result_152254 = 0;
T_152255 = 0;
T_152255 = NIM_NIL;
I_152263 = 0;
HEX3Atmp_152301 = 0;
LOC1 = Rsonslen_143091(N_152253);
HEX3Atmp_152301 = (NI64)(LOC1 - 1);
Res_152303 = 0;
Res_152303 = 0;
while (1) {
if (!(Res_152303 <= HEX3Atmp_152301)) goto LA2;
I_152263 = Res_152303;
LOC3 = 0;
LOC3 = Renderrsttoout_151612(D_152252, (*N_152253).Sons->data[I_152263]);
App_48031(&T_152255, LOC3);
Res_152303 += 1;
} LA2: ;
Result_152254 = NIM_NIL;
if (!((*D_152252).Meta[(((NU8) 1))-0] == NIM_NIL)) goto LA5;
asgnRefNoCycle((void**) &(*D_152252).Meta[(((NU8) 1))-0], T_152255);
goto LA4;
LA5: ;
if (!((*D_152252).Meta[(((NU8) 2))-0] == NIM_NIL)) goto LA7;
asgnRefNoCycle((void**) &(*D_152252).Meta[(((NU8) 2))-0], T_152255);
goto LA4;
LA7: ;
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_48052(((NI64) ((*N_152253).Level)));
LOC10 = 0;
LOC10 = Rstnodetorefname_143105(N_152253);
LOC9[1] = Torope_48046(LOC10);
LOC9[2] = T_152255;
LOC11 = 0;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_152253).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP195172));
LOC9[3] = Torope_48046(LOC11);
Result_152254 = Dispf_151579(((NimStringDesc*) &TMP195174), ((NimStringDesc*) &TMP195175), LOC9, 4);
LA4: ;
return Result_152254;
}
N_NIMCALL(NimStringDesc*, Disp_151565)(NimStringDesc* Xml_151567, NimStringDesc* Tex_151568) {
NimStringDesc* Result_151569;
Result_151569 = 0;
if (!!((Gcmd_42082 == ((NU8) 15)))) goto LA2;
Result_151569 = copyString(Xml_151567);
goto LA1;
LA2: ;
Result_151569 = copyString(Tex_151568);
LA1: ;
return Result_151569;
}
N_NIMCALL(NI, Nextsplitpoint_151455)(NimStringDesc* S_151457, NI Start_151458) {
NI Result_151459;
Result_151459 = 0;
Result_151459 = Start_151458;
while (1) {
if (!(Result_151459 < (NI64)(S_151457->Sup.len + 0))) goto LA1;
switch (((NU8)(S_151457->data[Result_151459]))) {
case 95:
goto BeforeRet;
break;
case 97 ... 122:
if (!((NI64)(Result_151459 + 1) < (NI64)(S_151457->Sup.len + 0))) goto LA3;
if (!(((NU8)(S_151457->data[(NI64)(Result_151459 + 1)])) >= ((NU8)(65)) && ((NU8)(S_151457->data[(NI64)(Result_151459 + 1)])) <= ((NU8)(90)))) goto LA6;
goto BeforeRet;
LA6: ;
LA3: ;
break;
default:
break;
}
Result_151459 += 1;
} LA1: ;
Result_151459 -= 1;
BeforeRet: ;
return Result_151459;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448) {
NIM_BOOL Result_18449;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_18449 = 0;
if (!(A_18447 == B_18448)) goto LA2;
Result_18449 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18447 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18448 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18449 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18447).Sup.len == (*B_18448).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18447).data)), ((NCSTRING) ((*B_18448).data)), ((NI32) ((NI64)((*A_18447).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18449 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18449;
}
N_NIMCALL(void, Addxmlchar_151426)(NimStringDesc** Dest_151429, NIM_CHAR C_151430) {
switch (((NU8)(C_151430))) {
case 38:
(*Dest_151429) = resizeString((*Dest_151429), 5);
appendString((*Dest_151429), ((NimStringDesc*) &TMP195194));
break;
case 60:
(*Dest_151429) = resizeString((*Dest_151429), 4);
appendString((*Dest_151429), ((NimStringDesc*) &TMP195195));
break;
case 62:
(*Dest_151429) = resizeString((*Dest_151429), 4);
appendString((*Dest_151429), ((NimStringDesc*) &TMP195196));
break;
case 34:
(*Dest_151429) = resizeString((*Dest_151429), 6);
appendString((*Dest_151429), ((NimStringDesc*) &TMP195197));
break;
default:
(*Dest_151429) = addChar((*Dest_151429), C_151430);
break;
}
}
N_NIMCALL(void, Addtexchar_151436)(NimStringDesc** Dest_151439, NIM_CHAR C_151440) {
switch (((NU8)(C_151440))) {
case 95:
(*Dest_151439) = resizeString((*Dest_151439), 2);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195198));
break;
case 123:
(*Dest_151439) = resizeString((*Dest_151439), 12);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195199));
break;
case 125:
(*Dest_151439) = resizeString((*Dest_151439), 12);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195200));
break;
case 91:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195201));
break;
case 93:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195202));
break;
case 92:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195203));
break;
case 36:
(*Dest_151439) = resizeString((*Dest_151439), 2);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195204));
break;
case 38:
(*Dest_151439) = resizeString((*Dest_151439), 2);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195205));
break;
case 35:
(*Dest_151439) = resizeString((*Dest_151439), 2);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195206));
break;
case 37:
(*Dest_151439) = resizeString((*Dest_151439), 2);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195207));
break;
case 126:
(*Dest_151439) = resizeString((*Dest_151439), 12);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195208));
break;
case 64:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195209));
break;
case 94:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195210));
break;
case 96:
(*Dest_151439) = resizeString((*Dest_151439), 11);
appendString((*Dest_151439), ((NimStringDesc*) &TMP195211));
break;
default:
(*Dest_151439) = addChar((*Dest_151439), C_151440);
break;
}
}
N_NIMCALL(void, Escchar_151441)(NimStringDesc** Dest_151444, NIM_CHAR C_151445) {
if (!!((Gcmd_42082 == ((NU8) 15)))) goto LA2;
Addxmlchar_151426(Dest_151444, C_151445);
goto LA1;
LA2: ;
Addtexchar_151436(Dest_151444, C_151445);
LA1: ;
}
N_NIMCALL(NimStringDesc*, Esc_151505)(NimStringDesc* S_151507, NI Splitafter_151508) {
NimStringDesc* Result_151509;
NI Partlen_151512;
NI J_151513;
NI K_151518;
NIM_BOOL LOC6;
NI I_151528;
NI Res_151555;
NI I_151551;
NI HEX3Atmp_151560;
NI Res_151562;
Result_151509 = 0;
Result_151509 = copyString(((NimStringDesc*) &TMP195172));
if (!(0 <= Splitafter_151508)) goto LA2;
Partlen_151512 = 0;
Partlen_151512 = 0;
J_151513 = 0;
J_151513 = 0;
while (1) {
if (!(J_151513 < S_151507->Sup.len)) goto LA4;
K_151518 = 0;
K_151518 = Nextsplitpoint_151455(S_151507, J_151513);
LOC6 = !(eqStrings(Splitter_151046, ((NimStringDesc*) &TMP195193)));
if (LOC6) goto LA7;
LOC6 = (Splitafter_151508 < (NI64)((NI64)((NI64)(Partlen_151512 + K_151518) - J_151513) + 1));
LA7: ;
if (!LOC6) goto LA8;
Partlen_151512 = 0;
Result_151509 = resizeString(Result_151509, Splitter_151046->Sup.len + 0);
appendString(Result_151509, Splitter_151046);
LA8: ;
I_151528 = 0;
Res_151555 = 0;
Res_151555 = J_151513;
while (1) {
if (!(Res_151555 <= K_151518)) goto LA10;
I_151528 = Res_151555;
Escchar_151441(&Result_151509, S_151507->data[I_151528]);
Res_151555 += 1;
} LA10: ;
Partlen_151512 += (NI64)((NI64)(K_151518 - J_151513) + 1);
J_151513 = (NI64)(K_151518 + 1);
} LA4: ;
goto LA1;
LA2: ;
I_151551 = 0;
HEX3Atmp_151560 = 0;
HEX3Atmp_151560 = (NI64)((NI64)(S_151507->Sup.len + 0) - 1);
Res_151562 = 0;
Res_151562 = 0;
while (1) {
if (!(Res_151562 <= HEX3Atmp_151560)) goto LA11;
I_151551 = Res_151562;
Escchar_151441(&Result_151509, S_151507->data[I_151551]);
Res_151562 += 1;
} LA11: ;
LA1: ;
return Result_151509;
}
N_NIMCALL(TY48008*, Renderfield_152873)(TY151017* D_152875, TY143077* N_152876) {
TY48008* Result_152877;
NIM_BOOL B_152878;
NimStringDesc* Fieldname_152888;
TY48008* Fieldval_152889;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NI LOC8;
NI LOC14;
NimStringDesc* LOC23;
Result_152877 = 0;
B_152878 = 0;
B_152878 = NIM_FALSE;
if (!(Gcmd_42082 == ((NU8) 15))) goto LA2;
Fieldname_152888 = 0;
Fieldname_152888 = Addnodes_143108((*N_152876).Sons->data[0]);
Fieldval_152889 = 0;
LOC4 = 0;
LOC4 = Addnodes_143108((*N_152876).Sons->data[1]);
LOC5 = 0;
LOC5 = nsuStrip(LOC4, NIM_TRUE, NIM_TRUE);
LOC6 = 0;
LOC6 = Esc_151505(LOC5, -1);
Fieldval_152889 = Torope_48046(LOC6);
LOC8 = nsuCmpIgnoreStyle(Fieldname_152888, ((NimStringDesc*) &TMP195212));
if (!(LOC8 == 0)) goto LA9;
if (!((*D_152875).Meta[(((NU8) 3))-0] == NIM_NIL)) goto LA12;
asgnRefNoCycle((void**) &(*D_152875).Meta[(((NU8) 3))-0], Fieldval_152889);
B_152878 = NIM_TRUE;
LA12: ;
goto LA7;
LA9: ;
LOC14 = nsuCmpIgnoreStyle(Fieldname_152888, ((NimStringDesc*) &TMP195213));
if (!(LOC14 == 0)) goto LA15;
if (!((*D_152875).Meta[(((NU8) 4))-0] == NIM_NIL)) goto LA18;
asgnRefNoCycle((void**) &(*D_152875).Meta[(((NU8) 4))-0], Fieldval_152889);
B_152878 = NIM_TRUE;
LA18: ;
goto LA7;
LA15: ;
LA7: ;
LA2: ;
if (!B_152878) goto LA21;
Result_152877 = NIM_NIL;
goto LA20;
LA21: ;
LOC23 = 0;
LOC23 = Disp_151565(((NimStringDesc*) &TMP195214), ((NimStringDesc*) &TMP195169));
Result_152877 = Renderaux_151616(D_152875, N_152876, LOC23);
LA20: ;
return Result_152877;
}
N_NIMCALL(NimStringDesc*, Texcolumns_152855)(TY143077* N_152857) {
NimStringDesc* Result_152858;
NI I_152866;
NI HEX3Atmp_152868;
NI Res_152870;
Result_152858 = 0;
Result_152858 = copyString(((NimStringDesc*) &TMP195172));
I_152866 = 0;
HEX3Atmp_152868 = 0;
HEX3Atmp_152868 = Rsonslen_143091(N_152857);
Res_152870 = 0;
Res_152870 = 1;
while (1) {
if (!(Res_152870 <= HEX3Atmp_152868)) goto LA1;
I_152866 = Res_152870;
Result_152858 = resizeString(Result_152858, 2);
appendString(Result_152858, ((NimStringDesc*) &TMP195234));
Res_152870 += 1;
} LA1: ;
return Result_152858;
}
N_NIMCALL(void, Dispa_151595)(TY48008** Dest_151598, NimStringDesc* Xml_151599, NimStringDesc* Tex_151600, TY48008** Args_151602, NI Args_151602Len0) {
if (!!((Gcmd_42082 == ((NU8) 15)))) goto LA2;
Appf_48074(Dest_151598, Xml_151599, Args_151602, Args_151602Len0);
goto LA1;
LA2: ;
Appf_48074(Dest_151598, Tex_151600, Args_151602, Args_151602Len0);
LA1: ;
}
N_NIMCALL(TY48008*, Fieldaux_152709)(NimStringDesc* S_152711) {
TY48008* Result_152712;
NimStringDesc* LOC1;
Result_152712 = 0;
LOC1 = 0;
LOC1 = nsuStrip(S_152711, NIM_TRUE, NIM_TRUE);
Result_152712 = Torope_48046(LOC1);
return Result_152712;
}
N_NIMCALL(TY48008*, Renderimage_152713)(TY151017* D_152715, TY143077* N_152716) {
TY48008* Result_152717;
TY48008* Options_152718;
NimStringDesc* S_152719;
TY48446 LOC4;
TY48446 LOC8;
TY48446 LOC12;
TY48446 LOC16;
TY48446 LOC20;
TY48446 LOC24;
TY173060 LOC25;
NimStringDesc* LOC26;
NI LOC28;
TY48008* LOC31;
Result_152717 = 0;
Options_152718 = 0;
Options_152718 = NIM_NIL;
S_152719 = 0;
S_152719 = Getfieldvalue_143111(N_152716, ((NimStringDesc*) &TMP195246));
if (!!(((S_152719) && (S_152719)->Sup.len == 0))) goto LA2;
memset((void*)&LOC4, 0, sizeof(LOC4));
LOC4[0] = Fieldaux_152709(S_152719);
Dispa_151595(&Options_152718, ((NimStringDesc*) &TMP195247), ((NimStringDesc*) &TMP195248), LOC4, 1);
LA2: ;
S_152719 = Getfieldvalue_143111(N_152716, ((NimStringDesc*) &TMP195249));
if (!!(((S_152719) && (S_152719)->Sup.len == 0))) goto LA6;
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Fieldaux_152709(S_152719);
Dispa_151595(&Options_152718, ((NimStringDesc*) &TMP195250), ((NimStringDesc*) &TMP195251), LOC8, 1);
LA6: ;
S_152719 = Getfieldvalue_143111(N_152716, ((NimStringDesc*) &TMP195252));
if (!!(((S_152719) && (S_152719)->Sup.len == 0))) goto LA10;
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC12[0] = Fieldaux_152709(S_152719);
Dispa_151595(&Options_152718, ((NimStringDesc*) &TMP195253), ((NimStringDesc*) &TMP195254), LOC12, 1);
LA10: ;
S_152719 = Getfieldvalue_143111(N_152716, ((NimStringDesc*) &TMP195255));
if (!!(((S_152719) && (S_152719)->Sup.len == 0))) goto LA14;
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC16[0] = Fieldaux_152709(S_152719);
Dispa_151595(&Options_152718, ((NimStringDesc*) &TMP195256), ((NimStringDesc*) &TMP195172), LOC16, 1);
LA14: ;
S_152719 = Getfieldvalue_143111(N_152716, ((NimStringDesc*) &TMP195257));
if (!!(((S_152719) && (S_152719)->Sup.len == 0))) goto LA18;
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC20[0] = Fieldaux_152709(S_152719);
Dispa_151595(&Options_152718, ((NimStringDesc*) &TMP195258), ((NimStringDesc*) &TMP195172), LOC20, 1);
LA18: ;
if (!!((Options_152718 == NIM_NIL))) goto LA22;
memset((void*)&LOC24, 0, sizeof(LOC24));
LOC24[0] = Options_152718;
Options_152718 = Dispf_151579(((NimStringDesc*) &TMP195169), ((NimStringDesc*) &TMP195259), LOC24, 1);
LA22: ;
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC26 = 0;
LOC26 = Getargument_143115(N_152716);
LOC25[0] = Torope_48046(LOC26);
LOC25[1] = Options_152718;
Result_152717 = Dispf_151579(((NimStringDesc*) &TMP195260), ((NimStringDesc*) &TMP195261), LOC25, 2);
LOC28 = Rsonslen_143091(N_152716);
if (!(3 <= LOC28)) goto LA29;
LOC31 = 0;
LOC31 = Renderrsttoout_151612(D_152715, (*N_152716).Sons->data[2]);
App_48031(&Result_152717, LOC31);
LA29: ;
return Result_152717;
}
N_NIMCALL(TY48008*, Rendercodeblock_152767)(TY151017* D_152769, TY143077* N_152770) {
TY48008* Result_152771;
TY143077* M_152783;
NimStringDesc* Langstr_152793;
NimStringDesc* LOC7;
NU8 Lang_152794;
TY148007 G_152804;
NimStringDesc* LOC15;
TY173060 LOC16;
NimStringDesc* LOC17;
NimStringDesc* LOC18;
TY48446 LOC22;
Result_152771 = 0;
Result_152771 = NIM_NIL;
if (!((*N_152770).Sons->data[2] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
M_152783 = 0;
M_152783 = (*(*N_152770).Sons->data[2]).Sons->data[0];
if (!!(((*M_152783).Kind == ((NU8) 62)))) goto LA5;
Internalerror_43571(((NimStringDesc*) &TMP195262));
LA5: ;
Langstr_152793 = 0;
LOC7 = 0;
LOC7 = Getargument_143115(N_152770);
Langstr_152793 = nsuStrip(LOC7, NIM_TRUE, NIM_TRUE);
Lang_152794 = 0;
if (!((Langstr_152793) && (Langstr_152793)->Sup.len == 0)) goto LA9;
Lang_152794 = ((NU8) 1);
goto LA8;
LA9: ;
Lang_152794 = Getsourcelanguage_148102(Langstr_152793);
LA8: ;
if (!(Lang_152794 == ((NU8) 0))) goto LA12;
Rawmessage_43553(((NU8) 218), Langstr_152793);
Result_152771 = Torope_48046((*M_152783).Text);
goto LA11;
LA12: ;
memset((void*)&G_152804, 0, sizeof(G_152804));
G_152804.Sup.m_type = NTI148007;
Initgeneraltokenizer_148105(&G_152804, (*M_152783).Text);
while (1) {
Getnexttoken_148114(&G_152804, Lang_152794);
switch (G_152804.Kind) {
case ((NU8) 0):
goto LA14;
break;
case ((NU8) 1):
case ((NU8) 2):
LOC15 = 0;
LOC15 = copyStrLast((*M_152783).Text, (NI64)(G_152804.Start + 0), (NI64)((NI64)((NI64)(G_152804.Length + G_152804.Start) - 1) + 0));
App_48036(&Result_152771, LOC15);
break;
default:
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC17 = 0;
LOC17 = copyStrLast((*M_152783).Text, (NI64)(G_152804.Start + 0), (NI64)((NI64)((NI64)(G_152804.Length + G_152804.Start) - 1) + 0));
LOC18 = 0;
LOC18 = Esc_151505(LOC17, -1);
LOC16[0] = Torope_48046(LOC18);
LOC16[1] = Torope_48046(Tokenclasstostr_148059[(G_152804.Kind)-0]);
Dispa_151595(&Result_152771, ((NimStringDesc*) &TMP195378), ((NimStringDesc*) &TMP195379), LOC16, 2);
break;
}
} LA14: ;
Deinitgeneraltokenizer_148110(&G_152804);
LA11: ;
if (!!((Result_152771 == NIM_NIL))) goto LA20;
memset((void*)&LOC22, 0, sizeof(LOC22));
LOC22[0] = Result_152771;
Result_152771 = Dispf_151579(((NimStringDesc*) &TMP195380), ((NimStringDesc*) &TMP195226), LOC22, 1);
LA20: ;
BeforeRet: ;
return Result_152771;
}
N_NIMCALL(TY48008*, Rendercontainer_152830)(TY151017* D_152832, TY143077* N_152833) {
TY48008* Result_152834;
TY48008* Arg_152835;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY48446 LOC6;
TY173060 LOC7;
Result_152834 = 0;
Result_152834 = Renderrsttoout_151612(D_152832, (*N_152833).Sons->data[2]);
Arg_152835 = 0;
LOC1 = 0;
LOC1 = Getargument_143115(N_152833);
LOC2 = 0;
LOC2 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Arg_152835 = Torope_48046(LOC2);
if (!(Arg_152835 == NIM_NIL)) goto LA4;
memset((void*)&LOC6, 0, sizeof(LOC6));
LOC6[0] = Result_152834;
Result_152834 = Dispf_151579(((NimStringDesc*) &TMP195381), ((NimStringDesc*) &TMP195169), LOC6, 1);
goto LA3;
LA4: ;
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Arg_152835;
LOC7[1] = Result_152834;
Result_152834 = Dispf_151579(((NimStringDesc*) &TMP195382), ((NimStringDesc*) &TMP195383), LOC7, 2);
LA3: ;
return Result_152834;
}
N_NIMCALL(TY48008*, Renderindexterm_151677)(TY151017* D_151679, TY143077* N_151680) {
TY48008* Result_151681;
TY173060 LOC1;
TY143077* H_151698;
TY143077* A_151717;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_151681 = 0;
(*D_151679).Id += 1;
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = Torope_48052(((NI64) ((*D_151679).Id)));
LOC1[1] = Renderaux_151616(D_151679, N_151680, ((NimStringDesc*) &TMP195169));
Result_151681 = Dispf_151579(((NimStringDesc*) &TMP195393), ((NimStringDesc*) &TMP195394), LOC1, 2);
H_151698 = 0;
H_151698 = Newrstnode_143094(((NU8) 38));
A_151717 = 0;
LOC2 = 0;
LOC3 = 0;
LOC3 = Disp_151565(((NimStringDesc*) &TMP195395), ((NimStringDesc*) &TMP195172));
LOC4 = 0;
LOC4 = nimIntToStr((*D_151679).Id);
LOC2 = rawNewString((*D_151679).Indexvalfilename->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC2, (*D_151679).Indexvalfilename);
appendString(LOC2, LOC3);
appendString(LOC2, LOC4);
A_151717 = Newrstnode_143097(((NU8) 62), LOC2);
Addson_143101(H_151698, A_151717);
Addson_143101(H_151698, A_151717);
Setindexpair_143118((*D_151679).Theindex, N_151680, H_151698);
return Result_151681;
}
N_NIMCALL(TY48008*, Renderrsttoout_151612)(TY151017* D_151614, TY143077* N_151615) {
TY48008* Result_152920;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NI I_152971;
NI HEX3Atmp_153097;
NI LOC12;
NI Res_153099;
TY48008* LOC14;
TY48446 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC21;
NimStringDesc* LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
NimStringDesc* LOC28;
NimStringDesc* LOC29;
NimStringDesc* LOC30;
NimStringDesc* LOC31;
NI LOC33;
NI I_153045;
NI HEX3Atmp_153103;
NI LOC36;
NI Res_153105;
TY48446 LOC38;
TY48446 LOC39;
NimStringDesc* LOC40;
NimStringDesc* LOC41;
TY173060 LOC42;
NimStringDesc* LOC43;
NimStringDesc* LOC44;
TY173060 LOC45;
TY143077* LOC49;
NimStringDesc* LOC50;
TY143077* LOC54;
NimStringDesc* LOC55;
NimStringDesc* LOC56;
TY173060 LOC57;
NimStringDesc* LOC58;
NimStringDesc* LOC59;
NimStringDesc* LOC60;
NimStringDesc* LOC61;
NimStringDesc* LOC62;
NimStringDesc* LOC66;
NimStringDesc* LOC67;
NimStringDesc* LOC68;
Result_152920 = 0;
if (!(N_151615 == NIM_NIL)) goto LA2;
Result_152920 = NIM_NIL;
goto BeforeRet;
LA2: ;
switch ((*N_151615).Kind) {
case ((NU8) 0):
Result_152920 = Renderaux_151616(D_151614, N_151615, ((NimStringDesc*) &TMP195169));
break;
case ((NU8) 1):
Result_152920 = Renderheadline_152180(D_151614, N_151615);
break;
case ((NU8) 2):
Result_152920 = Renderoverline_152250(D_151614, N_151615);
break;
case ((NU8) 3):
LOC4 = 0;
LOC4 = Disp_151565(((NimStringDesc*) &TMP195176), ((NimStringDesc*) &TMP195177));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC4);
break;
case ((NU8) 4):
LOC5 = 0;
LOC5 = Disp_151565(((NimStringDesc*) &TMP195178), ((NimStringDesc*) &TMP195179));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC5);
break;
case ((NU8) 5):
LOC6 = 0;
LOC6 = Disp_151565(((NimStringDesc*) &TMP195180), ((NimStringDesc*) &TMP195181));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC6);
break;
case ((NU8) 6):
case ((NU8) 8):
LOC7 = 0;
LOC7 = Disp_151565(((NimStringDesc*) &TMP195182), ((NimStringDesc*) &TMP195183));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC7);
break;
case ((NU8) 7):
LOC8 = 0;
LOC8 = Disp_151565(((NimStringDesc*) &TMP195184), ((NimStringDesc*) &TMP195185));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC8);
break;
case ((NU8) 9):
LOC9 = 0;
LOC9 = Disp_151565(((NimStringDesc*) &TMP195186), ((NimStringDesc*) &TMP195187));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC9);
break;
case ((NU8) 10):
Result_152920 = Renderaux_151616(D_151614, N_151615, ((NimStringDesc*) &TMP195169));
break;
case ((NU8) 11):
LOC10 = 0;
LOC10 = Disp_151565(((NimStringDesc*) &TMP195188), ((NimStringDesc*) &TMP195189));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC10);
break;
case ((NU8) 12):
LOC11 = 0;
LOC11 = Disp_151565(((NimStringDesc*) &TMP195190), ((NimStringDesc*) &TMP195191));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC11);
break;
case ((NU8) 13):
Result_152920 = NIM_NIL;
I_152971 = 0;
HEX3Atmp_153097 = 0;
LOC12 = Rsonslen_143091(N_151615);
HEX3Atmp_153097 = (NI64)(LOC12 - 1);
Res_153099 = 0;
Res_153099 = 0;
while (1) {
if (!(Res_153099 <= HEX3Atmp_153097)) goto LA13;
I_152971 = Res_153099;
LOC14 = 0;
LOC14 = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[I_152971]);
App_48031(&Result_152920, LOC14);
Res_153099 += 1;
} LA13: ;
if (!!((Result_152920 == NIM_NIL))) goto LA16;
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC18[0] = Result_152920;
Result_152920 = Dispf_151579(((NimStringDesc*) &TMP195192), ((NimStringDesc*) &TMP195187), LOC18, 1);
LA16: ;
break;
case ((NU8) 14):
Result_152920 = Renderfield_152873(D_151614, N_151615);
break;
case ((NU8) 15):
LOC19 = 0;
LOC19 = Disp_151565(((NimStringDesc*) &TMP195215), ((NimStringDesc*) &TMP195216));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC19);
break;
case ((NU8) 16):
LOC20 = 0;
LOC20 = Disp_151565(((NimStringDesc*) &TMP195217), ((NimStringDesc*) &TMP195218));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC20);
break;
case ((NU8) 51):
Result_152920 = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[2]);
break;
case ((NU8) 17):
LOC21 = 0;
LOC21 = Disp_151565(((NimStringDesc*) &TMP195219), ((NimStringDesc*) &TMP195220));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC21);
break;
case ((NU8) 18):
LOC22 = 0;
LOC22 = Disp_151565(((NimStringDesc*) &TMP195214), ((NimStringDesc*) &TMP195169));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC22);
break;
case ((NU8) 19):
LOC23 = 0;
LOC23 = Disp_151565(((NimStringDesc*) &TMP195221), ((NimStringDesc*) &TMP195222));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC23);
break;
case ((NU8) 23):
LOC24 = 0;
LOC24 = Disp_151565(((NimStringDesc*) &TMP195223), ((NimStringDesc*) &TMP195218));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC24);
break;
case ((NU8) 20):
case ((NU8) 21):
case ((NU8) 22):
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
case ((NU8) 24):
LOC25 = 0;
LOC25 = Disp_151565(((NimStringDesc*) &TMP195225), ((NimStringDesc*) &TMP195226));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC25);
break;
case ((NU8) 25):
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
case ((NU8) 26):
LOC26 = 0;
LOC26 = Disp_151565(((NimStringDesc*) &TMP195227), ((NimStringDesc*) &TMP195179));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC26);
break;
case ((NU8) 27):
LOC27 = 0;
LOC27 = Disp_151565(((NimStringDesc*) &TMP195228), ((NimStringDesc*) &TMP195229));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC27);
break;
case ((NU8) 28):
LOC28 = 0;
LOC28 = Disp_151565(((NimStringDesc*) &TMP195230), ((NimStringDesc*) &TMP195231));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC28);
break;
case ((NU8) 29):
case ((NU8) 30):
LOC29 = 0;
LOC30 = 0;
LOC30 = Texcolumns_152855(N_151615);
LOC29 = rawNewString(LOC30->Sup.len + 65);
appendString(LOC29, ((NimStringDesc*) &TMP195233));
appendString(LOC29, LOC30);
appendString(LOC29, ((NimStringDesc*) &TMP195235));
LOC31 = 0;
LOC31 = Disp_151565(((NimStringDesc*) &TMP195232), LOC29);
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC31);
break;
case ((NU8) 31):
LOC33 = Rsonslen_143091(N_151615);
if (!(1 <= LOC33)) goto LA34;
Result_152920 = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[0]);
I_153045 = 0;
HEX3Atmp_153103 = 0;
LOC36 = Rsonslen_143091(N_151615);
HEX3Atmp_153103 = (NI64)(LOC36 - 1);
Res_153105 = 0;
Res_153105 = 1;
while (1) {
if (!(Res_153105 <= HEX3Atmp_153103)) goto LA37;
I_153045 = Res_153105;
memset((void*)&LOC38, 0, sizeof(LOC38));
LOC38[0] = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[I_153045]);
Dispa_151595(&Result_152920, ((NimStringDesc*) &TMP195169), ((NimStringDesc*) &TMP195236), LOC38, 1);
Res_153105 += 1;
} LA37: ;
memset((void*)&LOC39, 0, sizeof(LOC39));
LOC39[0] = Result_152920;
Result_152920 = Dispf_151579(((NimStringDesc*) &TMP195214), ((NimStringDesc*) &TMP195237), LOC39, 1);
goto LA32;
LA34: ;
Result_152920 = NIM_NIL;
LA32: ;
break;
case ((NU8) 33):
LOC40 = 0;
LOC40 = Disp_151565(((NimStringDesc*) &TMP195217), ((NimStringDesc*) &TMP195169));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC40);
break;
case ((NU8) 32):
LOC41 = 0;
LOC41 = Disp_151565(((NimStringDesc*) &TMP195238), ((NimStringDesc*) &TMP195239));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC41);
break;
case ((NU8) 34):
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
case ((NU8) 35):
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
case ((NU8) 36):
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
case ((NU8) 39):
memset((void*)&LOC42, 0, sizeof(LOC42));
LOC42[0] = Renderaux_151616(D_151614, N_151615, ((NimStringDesc*) &TMP195169));
LOC43 = 0;
LOC43 = Rstnodetorefname_143105(N_151615);
LOC42[1] = Torope_48046(LOC43);
Result_152920 = Dispf_151579(((NimStringDesc*) &TMP195240), ((NimStringDesc*) &TMP195241), LOC42, 2);
break;
case ((NU8) 37):
LOC44 = 0;
LOC44 = Disp_151565(((NimStringDesc*) &TMP195242), ((NimStringDesc*) &TMP195243));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC44);
break;
case ((NU8) 38):
memset((void*)&LOC45, 0, sizeof(LOC45));
LOC45[0] = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[0]);
LOC45[1] = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[1]);
Result_152920 = Dispf_151579(((NimStringDesc*) &TMP195244), ((NimStringDesc*) &TMP195245), LOC45, 2);
break;
case ((NU8) 41):
case ((NU8) 42):
Result_152920 = Renderaux_151616(D_151614, N_151615, ((NimStringDesc*) &TMP195169));
break;
case ((NU8) 48):
if (!!((Gcmd_42082 == ((NU8) 15)))) goto LA47;
LOC49 = 0;
LOC49 = Lastson_143667(N_151615);
LOC50 = 0;
LOC50 = Addnodes_143108(LOC49);
Result_152920 = Torope_48046(LOC50);
LA47: ;
break;
case ((NU8) 49):
if (!(Gcmd_42082 == ((NU8) 15))) goto LA52;
LOC54 = 0;
LOC54 = Lastson_143667(N_151615);
LOC55 = 0;
LOC55 = Addnodes_143108(LOC54);
Result_152920 = Torope_48046(LOC55);
LA52: ;
break;
case ((NU8) 45):
case ((NU8) 46):
Result_152920 = Renderimage_152713(D_151614, N_151615);
break;
case ((NU8) 47):
Result_152920 = Rendercodeblock_152767(D_151614, N_151615);
break;
case ((NU8) 50):
Result_152920 = Rendercontainer_152830(D_151614, N_151615);
break;
case ((NU8) 61):
case ((NU8) 52):
LOC56 = 0;
LOC56 = Disp_151565(((NimStringDesc*) &TMP195384), ((NimStringDesc*) &TMP195384));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC56);
break;
case ((NU8) 40):
Result_152920 = Renderaux_151616(D_151614, N_151615, ((NimStringDesc*) &TMP195172));
break;
case ((NU8) 53):
memset((void*)&LOC57, 0, sizeof(LOC57));
LOC57[0] = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[0]);
LOC57[1] = Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[1]);
Result_152920 = Dispf_151579(((NimStringDesc*) &TMP195378), ((NimStringDesc*) &TMP195379), LOC57, 2);
break;
case ((NU8) 54):
LOC58 = 0;
LOC58 = Disp_151565(((NimStringDesc*) &TMP195385), ((NimStringDesc*) &TMP195386));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC58);
break;
case ((NU8) 55):
LOC59 = 0;
LOC59 = Disp_151565(((NimStringDesc*) &TMP195387), ((NimStringDesc*) &TMP195388));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC59);
break;
case ((NU8) 57):
LOC60 = 0;
LOC60 = Disp_151565(((NimStringDesc*) &TMP195389), ((NimStringDesc*) &TMP195390));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC60);
break;
case ((NU8) 58):
LOC61 = 0;
LOC61 = Disp_151565(((NimStringDesc*) &TMP195391), ((NimStringDesc*) &TMP195239));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC61);
break;
case ((NU8) 59):
LOC62 = 0;
LOC62 = Disp_151565(((NimStringDesc*) &TMP195392), ((NimStringDesc*) &TMP195390));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC62);
break;
case ((NU8) 56):
if (!((*D_151614).Theindex == NIM_NIL)) goto LA64;
LOC66 = 0;
LOC66 = Disp_151565(((NimStringDesc*) &TMP195389), ((NimStringDesc*) &TMP195390));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC66);
goto LA63;
LA64: ;
Result_152920 = Renderindexterm_151677(D_151614, N_151615);
LA63: ;
break;
case ((NU8) 60):
LOC67 = 0;
LOC67 = Disp_151565(((NimStringDesc*) &TMP195396), ((NimStringDesc*) &TMP195397));
Result_152920 = Renderaux_151616(D_151614, N_151615, LOC67);
break;
case ((NU8) 62):
LOC68 = 0;
LOC68 = Esc_151505((*N_151615).Text, -1);
Result_152920 = Torope_48046(LOC68);
break;
case ((NU8) 44):
(*D_151614).Hastoc = NIM_TRUE;
break;
case ((NU8) 43):
asgnRefNoCycle((void**) &(*D_151614).Meta[(((NU8) 1))-0], Renderrsttoout_151612(D_151614, (*N_151615).Sons->data[0]));
break;
default:
Internalerror_43571(((NimStringDesc*) &TMP195224));
break;
}
BeforeRet: ;
return Result_152920;
}
N_NIMCALL(TY48008*, Gencomment_151718)(TY151017* D_151720, TY51525* N_151721) {
TY48008* Result_151722;
NIM_BOOL Dummyhastoc_151723;
NIM_BOOL LOC2;
NimStringDesc* LOC6;
NI LOC7;
NI LOC8;
TY143077* LOC9;
Result_151722 = 0;
Dummyhastoc_151723 = 0;
LOC2 = !(((*N_151721).Comment == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = nsuStartsWith((*N_151721).Comment, ((NimStringDesc*) &TMP195168));
LA3: ;
if (!LOC2) goto LA4;
LOC6 = 0;
LOC6 = Tofilename_43579((*N_151721).Info);
LOC7 = Tolinenumber_43585((*N_151721).Info);
LOC8 = Tocolumn_43582((*N_151721).Info);
LOC9 = 0;
LOC9 = Rstparse_143082((*N_151721).Comment, NIM_TRUE, LOC6, LOC7, LOC8, &Dummyhastoc_151723);
Result_151722 = Renderrsttoout_151612(D_151720, LOC9);
LA4: ;
return Result_151722;
}
N_NIMCALL(NIM_BOOL, Isvisible_151801)(TY51525* N_151803) {
NIM_BOOL Result_151804;
NIM_BOOL LOC5;
NI LOC6;
TY50011* V_151861;
NIM_BOOL LOC10;
Result_151804 = 0;
Result_151804 = NIM_FALSE;
if (!((*N_151803).Kind == ((NU8) 29))) goto LA2;
LOC6 = Sonslen_51803(N_151803);
LOC5 = (LOC6 == 2);
if (!(LOC5)) goto LA7;
LOC5 = ((*(*N_151803).KindU.S6.Sons->data[0]).Kind == ((NU8) 2));
LA7: ;
if (!LOC5) goto LA8;
V_151861 = 0;
V_151861 = (*(*N_151803).KindU.S6.Sons->data[0]).KindU.S5.Ident;
LOC10 = ((*V_151861).Sup.Id == 69);
if (LOC10) goto LA11;
LOC10 = ((*V_151861).Sup.Id == 70);
LA11: ;
Result_151804 = LOC10;
LA8: ;
goto LA1;
LA2: ;
if (!((*N_151803).Kind == ((NU8) 3))) goto LA12;
Result_151804 = (((*(*N_151803).KindU.S4.Sym).Flags &(1<<((((NU8) 3))&31)))!=0);
goto LA1;
LA12: ;
if (!((*N_151803).Kind == ((NU8) 34))) goto LA14;
Result_151804 = Isvisible_151801((*N_151803).KindU.S6.Sons->data[0]);
goto LA1;
LA14: ;
LA1: ;
return Result_151804;
}
N_NIMCALL(NimStringDesc*, Getname_151929)(TY51525* N_151931, NI Splitafter_151932) {
NimStringDesc* Result_151933;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_151933 = 0;
switch ((*N_151931).Kind) {
case ((NU8) 29):
Result_151933 = Getname_151929((*N_151931).KindU.S6.Sons->data[1], Splitafter_151932);
break;
case ((NU8) 34):
Result_151933 = Getname_151929((*N_151931).KindU.S6.Sons->data[0], Splitafter_151932);
break;
case ((NU8) 3):
Result_151933 = Esc_151505((*(*(*N_151931).KindU.S4.Sym).Name).S, Splitafter_151932);
break;
case ((NU8) 2):
Result_151933 = Esc_151505((*(*N_151931).KindU.S5.Ident).S, Splitafter_151932);
break;
case ((NU8) 43):
LOC1 = 0;
LOC2 = 0;
LOC2 = Esc_151505(((NimStringDesc*) &TMP195398), -1);
LOC3 = 0;
LOC3 = Getname_151929((*N_151931).KindU.S6.Sons->data[0], Splitafter_151932);
LOC4 = 0;
LOC4 = Esc_151505(((NimStringDesc*) &TMP195398), -1);
LOC1 = rawNewString(LOC2->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC1, LOC2);
appendString(LOC1, LOC3);
appendString(LOC1, LOC4);
Result_151933 = LOC1;
break;
default:
Internalerror_43567((*N_151931).Info, ((NimStringDesc*) &TMP195399));
Result_151933 = copyString(((NimStringDesc*) &TMP195172));
break;
}
return Result_151933;
}
N_NIMCALL(TY48008*, Genreccomment_151725)(TY151017* D_151727, TY51525* N_151728) {
TY48008* Result_151729;
NI I_151771;
NI HEX3Atmp_151796;
NI LOC10;
NI Res_151798;
Result_151729 = 0;
if (!(N_151728 == NIM_NIL)) goto LA2;
Result_151729 = NIM_NIL;
goto BeforeRet;
LA2: ;
Result_151729 = Gencomment_151718(D_151727, N_151728);
if (!(Result_151729 == NIM_NIL)) goto LA5;
if (!!(((*N_151728).Kind >= ((NU8) 1) && (*N_151728).Kind <= ((NU8) 18)))) goto LA8;
I_151771 = 0;
HEX3Atmp_151796 = 0;
LOC10 = Sonslen_51803(N_151728);
HEX3Atmp_151796 = (NI64)(LOC10 - 1);
Res_151798 = 0;
Res_151798 = 0;
while (1) {
if (!(Res_151798 <= HEX3Atmp_151796)) goto LA11;
I_151771 = Res_151798;
Result_151729 = Genreccomment_151725(D_151727, (*N_151728).KindU.S6.Sons->data[I_151771]);
if (!!((Result_151729 == NIM_NIL))) goto LA13;
goto BeforeRet;
LA13: ;
Res_151798 += 1;
} LA11: ;
LA8: ;
goto LA4;
LA5: ;
asgnRefNoCycle((void**) &(*N_151728).Comment, copyString(NIM_NIL));
LA4: ;
BeforeRet: ;
return Result_151729;
}
N_NIMCALL(NI, Getvaridx_151198)(NimStringDesc** Varnames_151201, NI Varnames_151201Len0, NimStringDesc* Id_151202) {
NI Result_151203;
NI I_151211;
NI HEX3Atmp_151215;
NI Res_151217;
NI LOC3;
Result_151203 = 0;
I_151211 = 0;
HEX3Atmp_151215 = 0;
HEX3Atmp_151215 = (Varnames_151201Len0-1);
Res_151217 = 0;
Res_151217 = 0;
while (1) {
if (!(Res_151217 <= HEX3Atmp_151215)) goto LA1;
I_151211 = Res_151217;
LOC3 = nsuCmpIgnoreStyle(Varnames_151201[I_151211], Id_151202);
if (!(LOC3 == 0)) goto LA4;
Result_151203 = I_151211;
goto BeforeRet;
LA4: ;
Res_151217 += 1;
} LA1: ;
Result_151203 = -1;
BeforeRet: ;
return Result_151203;
}
N_NIMCALL(TY48008*, Ropeformatnamedvars_151220)(NimStringDesc* Frmt_151222, NimStringDesc** Varnames_151224, NI Varnames_151224Len0, TY48008** Varvalues_151226, NI Varvalues_151226Len0) {
TY48008* Result_151227;
NI I_151228;
NI L_151231;
NI Num_151232;
NI J_151287;
NIM_BOOL LOC7;
NimStringDesc* Id_151327;
NI Idx_151352;
NimStringDesc* Id_151356;
NI Idx_151397;
NI Start_151401;
NimStringDesc* LOC35;
Result_151227 = 0;
I_151228 = 0;
I_151228 = 0;
L_151231 = 0;
L_151231 = Frmt_151222->Sup.len;
Result_151227 = NIM_NIL;
Num_151232 = 0;
Num_151232 = 0;
while (1) {
if (!(I_151228 < L_151231)) goto LA1;
if (!((NU8)(Frmt_151222->data[I_151228]) == (NU8)(36))) goto LA3;
I_151228 += 1;
switch (((NU8)(Frmt_151222->data[I_151228]))) {
case 35:
App_48031(&Result_151227, Varvalues_151226[Num_151232]);
Num_151232 += 1;
I_151228 += 1;
break;
case 36:
App_48036(&Result_151227, ((NimStringDesc*) &TMP195419));
I_151228 += 1;
break;
case 48 ... 57:
J_151287 = 0;
J_151287 = 0;
while (1) {
J_151287 = (NI64)((NI64)((NI64)(J_151287 * 10) + ((NU8)(Frmt_151222->data[I_151228]))) - 48);
I_151228 += 1;
LOC7 = ((NI64)((NI64)(L_151231 + 0) - 1) < I_151228);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_151222->data[I_151228])) >= ((NU8)(48)) && ((NU8)(Frmt_151222->data[I_151228])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
if (!((NI64)((Varvalues_151226Len0-1) + 1) < J_151287)) goto LA12;
Internalerror_43571(((NimStringDesc*) &TMP195420));
LA12: ;
Num_151232 = J_151287;
App_48031(&Result_151227, Varvalues_151226[(NI64)(J_151287 - 1)]);
break;
case 65 ... 90:
case 97 ... 122:
case 128 ... 255:
Id_151327 = 0;
Id_151327 = copyString(((NimStringDesc*) &TMP195172));
while (1) {
Id_151327 = addChar(Id_151327, Frmt_151222->data[I_151228]);
I_151228 += 1;
if (!!((((NU8)(Frmt_151222->data[I_151228])) >= ((NU8)(65)) && ((NU8)(Frmt_151222->data[I_151228])) <= ((NU8)(90)) || ((NU8)(Frmt_151222->data[I_151228])) == ((NU8)(95)) || ((NU8)(Frmt_151222->data[I_151228])) >= ((NU8)(97)) && ((NU8)(Frmt_151222->data[I_151228])) <= ((NU8)(122)) || ((NU8)(Frmt_151222->data[I_151228])) >= ((NU8)(128)) && ((NU8)(Frmt_151222->data[I_151228])) <= ((NU8)(255))))) goto LA16;
goto LA14;
LA16: ;
} LA14: ;
Idx_151352 = 0;
Idx_151352 = Getvaridx_151198(Varnames_151224, Varnames_151224Len0, Id_151327);
if (!(0 <= Idx_151352)) goto LA19;
App_48031(&Result_151227, Varvalues_151226[Idx_151352]);
goto LA18;
LA19: ;
Rawmessage_43553(((NU8) 148), Id_151327);
LA18: ;
break;
case 123:
Id_151356 = 0;
Id_151356 = copyString(((NimStringDesc*) &TMP195172));
I_151228 += 1;
while (1) {
if (!!(((NU8)(Frmt_151222->data[I_151228]) == (NU8)(125)))) goto LA21;
if (!((NU8)(Frmt_151222->data[I_151228]) == (NU8)(0))) goto LA23;
Rawmessage_43553(((NU8) 21), ((NimStringDesc*) &TMP195421));
LA23: ;
Id_151356 = addChar(Id_151356, Frmt_151222->data[I_151228]);
I_151228 += 1;
} LA21: ;
I_151228 += 1;
Idx_151397 = 0;
Idx_151397 = Getvaridx_151198(Varnames_151224, Varnames_151224Len0, Id_151356);
if (!(0 <= Idx_151397)) goto LA26;
App_48031(&Result_151227, Varvalues_151226[Idx_151397]);
goto LA25;
LA26: ;
Rawmessage_43553(((NU8) 148), Id_151356);
LA25: ;
break;
default:
Internalerror_43571(((NimStringDesc*) &TMP195420));
break;
}
LA3: ;
Start_151401 = 0;
Start_151401 = I_151228;
while (1) {
if (!(I_151228 < L_151231)) goto LA28;
if (!!(((NU8)(Frmt_151222->data[I_151228]) == (NU8)(36)))) goto LA30;
I_151228 += 1;
goto LA29;
LA30: ;
goto LA28;
LA29: ;
} LA28: ;
if (!(Start_151401 <= (NI64)(I_151228 - 1))) goto LA33;
LOC35 = 0;
LOC35 = copyStrLast(Frmt_151222, Start_151401, (NI64)(I_151228 - 1));
App_48036(&Result_151227, LOC35);
LA33: ;
} LA1: ;
return Result_151227;
}
N_NIMCALL(void, Setindexforsourceterm_151641)(TY151017* D_151643, TY143077* Name_151644, NI Id_151645) {
TY143077* H_151657;
TY143077* A_151676;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
if (!((*D_151643).Theindex == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
H_151657 = 0;
H_151657 = Newrstnode_143094(((NU8) 38));
A_151676 = 0;
LOC4 = 0;
LOC5 = 0;
LOC5 = Disp_151565(((NimStringDesc*) &TMP195395), ((NimStringDesc*) &TMP195172));
LOC6 = 0;
LOC6 = nimIntToStr(Id_151645);
LOC4 = rawNewString((*D_151643).Indexvalfilename->Sup.len + LOC5->Sup.len + LOC6->Sup.len + 0);
appendString(LOC4, (*D_151643).Indexvalfilename);
appendString(LOC4, LOC5);
appendString(LOC4, LOC6);
A_151676 = Newrstnode_143097(((NU8) 62), LOC4);
Addson_143101(H_151657, A_151676);
Addson_143101(H_151657, A_151676);
A_151676 = Newrstnode_143094(((NU8) 56));
Addson_143101(A_151676, Name_151644);
Setindexpair_143118((*D_151643).Theindex, A_151676, H_151657);
BeforeRet: ;
}
N_NIMCALL(TY143077*, Getrstname_152010)(TY51525* N_152012) {
TY143077* Result_152013;
Result_152013 = 0;
switch ((*N_152012).Kind) {
case ((NU8) 29):
Result_152013 = Getrstname_152010((*N_152012).KindU.S6.Sons->data[1]);
break;
case ((NU8) 34):
Result_152013 = Getrstname_152010((*N_152012).KindU.S6.Sons->data[0]);
break;
case ((NU8) 3):
Result_152013 = Newrstnode_143097(((NU8) 62), (*(*(*N_152012).KindU.S4.Sym).Name).S);
break;
case ((NU8) 2):
Result_152013 = Newrstnode_143097(((NU8) 62), (*(*N_152012).KindU.S5.Ident).S);
break;
case ((NU8) 43):
Result_152013 = Getrstname_152010((*N_152012).KindU.S6.Sons->data[0]);
break;
default:
Internalerror_43567((*N_152012).Info, ((NimStringDesc*) &TMP195429));
Result_152013 = NIM_NIL;
break;
}
return Result_152013;
}
N_NIMCALL(void, Genitem_152074)(TY151017* D_152076, TY51525* N_152077, TY51525* Namenode_152078, NU8 K_152079) {
TY81016 R_152080;
NU8 Kind_152081;
NimStringDesc* Literal_152082;
TY48008* Name_152083;
TY48008* Result_152084;
TY48008* Comm_152085;
NIM_BOOL LOC2;
NimStringDesc* LOC5;
TY48446 LOC7;
NimStringDesc* LOC8;
TY48446 LOC9;
TY48446 LOC10;
NimStringDesc* LOC11;
TY48446 LOC12;
NimStringDesc* LOC13;
TY48446 LOC14;
NimStringDesc* LOC15;
TY48446 LOC16;
NimStringDesc* LOC17;
TY48446 LOC18;
NimStringDesc* LOC19;
TY48446 LOC20;
NimStringDesc* LOC21;
TY48446 LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
TY158585 LOC26;
TY48008* LOC27;
NimStringDesc* LOC28;
TY158585 LOC29;
NimStringDesc* LOC30;
TY48008* LOC31;
TY143077* LOC32;
memset((void*)&R_152080, 0, sizeof(R_152080));
Kind_152081 = 0;
Literal_152082 = 0;
Name_152083 = 0;
Result_152084 = 0;
Comm_152085 = 0;
LOC2 = Isvisible_151801(Namenode_152078);
if (!!(LOC2)) goto LA3;
goto BeforeRet;
LA3: ;
LOC5 = 0;
LOC5 = Getname_151929(Namenode_152078, -1);
Name_152083 = Torope_48046(LOC5);
Result_152084 = NIM_NIL;
Literal_152082 = copyString(((NimStringDesc*) &TMP195172));
Kind_152081 = ((NU8) 1);
Comm_152085 = Genreccomment_151725(D_152076, N_152077);
Inittokrender_81048(&R_152080, N_152077, 30);
while (1) {
Getnexttok_81056(&R_152080, &Kind_152081, &Literal_152082);
switch (Kind_152081) {
case ((NU8) 1):
goto LA6;
break;
case ((NU8) 100):
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC8 = 0;
LOC8 = Esc_151505(Literal_152082, -1);
LOC7[0] = Torope_48046(LOC8);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195400), ((NimStringDesc*) &TMP195401), LOC7, 1);
break;
case ((NU8) 3) ... ((NU8) 65):
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_48046(Literal_152082);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195402), ((NimStringDesc*) &TMP195403), LOC9, 1);
break;
case ((NU8) 99):
case ((NU8) 98):
memset((void*)&LOC10, 0, sizeof(LOC10));
LOC11 = 0;
LOC11 = Esc_151505(Literal_152082, -1);
LOC10[0] = Torope_48046(LOC11);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195404), ((NimStringDesc*) &TMP195405), LOC10, 1);
break;
case ((NU8) 74) ... ((NU8) 76):
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC13 = 0;
LOC13 = Esc_151505(Literal_152082, -1);
LOC12[0] = Torope_48046(LOC13);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195406), ((NimStringDesc*) &TMP195407), LOC12, 1);
break;
case ((NU8) 79):
memset((void*)&LOC14, 0, sizeof(LOC14));
LOC15 = 0;
LOC15 = Esc_151505(Literal_152082, -1);
LOC14[0] = Torope_48046(LOC15);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195408), ((NimStringDesc*) &TMP195409), LOC14, 1);
break;
case ((NU8) 66) ... ((NU8) 70):
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC17 = 0;
LOC17 = Esc_151505(Literal_152082, -1);
LOC16[0] = Torope_48046(LOC17);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195410), ((NimStringDesc*) &TMP195411), LOC16, 1);
break;
case ((NU8) 71) ... ((NU8) 73):
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC19 = 0;
LOC19 = Esc_151505(Literal_152082, -1);
LOC18[0] = Torope_48046(LOC19);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195412), ((NimStringDesc*) &TMP195413), LOC18, 1);
break;
case ((NU8) 2):
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC21 = 0;
LOC21 = Esc_151505(Literal_152082, -1);
LOC20[0] = Torope_48046(LOC21);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195414), ((NimStringDesc*) &TMP195415), LOC20, 1);
break;
case ((NU8) 102):
case ((NU8) 103):
case ((NU8) 104):
case ((NU8) 105):
App_48036(&Result_152084, Literal_152082);
break;
case ((NU8) 80):
case ((NU8) 81):
case ((NU8) 82):
case ((NU8) 83):
case ((NU8) 84):
case ((NU8) 85):
case ((NU8) 86):
case ((NU8) 87):
case ((NU8) 88):
case ((NU8) 89):
case ((NU8) 90):
case ((NU8) 91):
case ((NU8) 92):
case ((NU8) 93):
case ((NU8) 94):
case ((NU8) 95):
case ((NU8) 96):
case ((NU8) 97):
case ((NU8) 101):
memset((void*)&LOC22, 0, sizeof(LOC22));
LOC23 = 0;
LOC23 = Esc_151505(Literal_152082, -1);
LOC22[0] = Torope_48046(LOC23);
Dispa_151595(&Result_152084, ((NimStringDesc*) &TMP195416), ((NimStringDesc*) &TMP195417), LOC22, 1);
break;
default:
LOC24 = 0;
LOC24 = rawNewString(Toktypetostr_73145[(Kind_152081)-0]->Sup.len + 17);
appendString(LOC24, ((NimStringDesc*) &TMP195418));
appendString(LOC24, Toktypetostr_73145[(Kind_152081)-0]);
appendChar(LOC24, 41);
Internalerror_43567((*N_152077).Info, LOC24);
break;
}
} LA6: ;
(*D_152076).Id += 1;
LOC25 = 0;
LOC25 = Getconfigvar_42133(((NimStringDesc*) &TMP195422));
memset((void*)&LOC26, 0, sizeof(LOC26));
LOC26[0] = Name_152083;
LOC26[1] = Result_152084;
LOC26[2] = Comm_152085;
LOC26[3] = Torope_48052(((NI64) ((*D_152076).Id)));
LOC27 = 0;
LOC27 = Ropeformatnamedvars_151220(LOC25, TMP195423, 4, LOC26, 4);
App_48031(&(*D_152076).Section[(K_152079)-0], LOC27);
LOC28 = 0;
LOC28 = Getconfigvar_42133(((NimStringDesc*) &TMP195428));
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC30 = 0;
LOC30 = Getname_151929(Namenode_152078, (*D_152076).Splitafter);
LOC29[0] = Torope_48046(LOC30);
LOC29[1] = Result_152084;
LOC29[2] = Comm_152085;
LOC29[3] = Torope_48052(((NI64) ((*D_152076).Id)));
LOC31 = 0;
LOC31 = Ropeformatnamedvars_151220(LOC28, TMP195423, 4, LOC29, 4);
App_48031(&(*D_152076).Toc[(K_152079)-0], LOC31);
LOC32 = 0;
LOC32 = Getrstname_152010(Namenode_152078);
Setindexforsourceterm_151641(D_152076, LOC32, (*D_152076).Id);
BeforeRet: ;
}
N_NIMCALL(void, Generatedoc_153108)(TY151017* D_153110, TY51525* N_153111) {
TY48008* LOC4;
NI I_153203;
NI HEX3Atmp_153424;
NI LOC5;
NI Res_153426;
NI I_153268;
NI HEX3Atmp_153430;
NI LOC10;
NI Res_153432;
NI I_153333;
NI HEX3Atmp_153436;
NI LOC15;
NI Res_153438;
NI I_153398;
NI HEX3Atmp_153442;
NI LOC20;
NI Res_153444;
TY51525* LOC22;
if (!(N_153111 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_153111).Kind) {
case ((NU8) 105):
LOC4 = 0;
LOC4 = Gencomment_151718(D_153110, N_153111);
App_48031(&(*D_153110).Moddesc, LOC4);
break;
case ((NU8) 69):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 9));
break;
case ((NU8) 70):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 10));
break;
case ((NU8) 74):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 11));
break;
case ((NU8) 72):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 13));
break;
case ((NU8) 73):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 14));
break;
case ((NU8) 71):
Genitem_152074(D_153110, N_153111, (*N_153111).KindU.S6.Sons->data[0], ((NU8) 12));
break;
case ((NU8) 87):
I_153203 = 0;
HEX3Atmp_153424 = 0;
LOC5 = Sonslen_51803(N_153111);
HEX3Atmp_153424 = (NI64)(LOC5 - 1);
Res_153426 = 0;
Res_153426 = 0;
while (1) {
if (!(Res_153426 <= HEX3Atmp_153424)) goto LA6;
I_153203 = Res_153426;
if (!!(((*(*N_153111).KindU.S6.Sons->data[I_153203]).Kind == ((NU8) 105)))) goto LA8;
Genitem_152074(D_153110, (*N_153111).KindU.S6.Sons->data[I_153203], (*(*N_153111).KindU.S6.Sons->data[I_153203]).KindU.S6.Sons->data[0], ((NU8) 8));
LA8: ;
Res_153426 += 1;
} LA6: ;
break;
case ((NU8) 88):
I_153268 = 0;
HEX3Atmp_153430 = 0;
LOC10 = Sonslen_51803(N_153111);
HEX3Atmp_153430 = (NI64)(LOC10 - 1);
Res_153432 = 0;
Res_153432 = 0;
while (1) {
if (!(Res_153432 <= HEX3Atmp_153430)) goto LA11;
I_153268 = Res_153432;
if (!!(((*(*N_153111).KindU.S6.Sons->data[I_153268]).Kind == ((NU8) 105)))) goto LA13;
Genitem_152074(D_153110, (*N_153111).KindU.S6.Sons->data[I_153268], (*(*N_153111).KindU.S6.Sons->data[I_153268]).KindU.S6.Sons->data[0], ((NU8) 7));
LA13: ;
Res_153432 += 1;
} LA11: ;
break;
case ((NU8) 90):
I_153333 = 0;
HEX3Atmp_153436 = 0;
LOC15 = Sonslen_51803(N_153111);
HEX3Atmp_153436 = (NI64)(LOC15 - 1);
Res_153438 = 0;
Res_153438 = 0;
while (1) {
if (!(Res_153438 <= HEX3Atmp_153436)) goto LA16;
I_153333 = Res_153438;
if (!!(((*(*N_153111).KindU.S6.Sons->data[I_153333]).Kind == ((NU8) 105)))) goto LA18;
Genitem_152074(D_153110, (*N_153111).KindU.S6.Sons->data[I_153333], (*(*N_153111).KindU.S6.Sons->data[I_153333]).KindU.S6.Sons->data[0], ((NU8) 6));
LA18: ;
Res_153438 += 1;
} LA16: ;
break;
case ((NU8) 101):
I_153398 = 0;
HEX3Atmp_153442 = 0;
LOC20 = Sonslen_51803(N_153111);
HEX3Atmp_153442 = (NI64)(LOC20 - 1);
Res_153444 = 0;
Res_153444 = 0;
while (1) {
if (!(Res_153444 <= HEX3Atmp_153442)) goto LA21;
I_153398 = Res_153444;
Generatedoc_153108(D_153110, (*N_153111).KindU.S6.Sons->data[I_153398]);
Res_153444 += 1;
} LA21: ;
break;
case ((NU8) 83):
LOC22 = 0;
LOC22 = Lastson_51809((*N_153111).KindU.S6.Sons->data[0]);
Generatedoc_153108(D_153110, LOC22);
break;
default:
break;
}
BeforeRet: ;
}
N_NIMCALL(TY48008*, Rendertocentry_152665)(TY151017* D_152667, TY151011* E_152668) {
TY48008* Result_152669;
TY173060 LOC1;
Result_152669 = 0;
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = (*E_152668).Refname;
LOC1[1] = (*E_152668).Header;
Result_152669 = Dispf_151579(((NimStringDesc*) &TMP195430), ((NimStringDesc*) &TMP195431), LOC1, 2);
return Result_152669;
}
N_NIMCALL(TY48008*, Rendertocentries_152674)(TY151017* D_152676, NI* J_152678, NI Lvl_152679) {
TY48008* Result_152680;
NI A_152683;
TY48008* LOC5;
TY48008* LOC8;
TY48446 LOC12;
Result_152680 = 0;
Result_152680 = NIM_NIL;
while (1) {
if (!((*J_152678) <= ((*D_152676).Tocpart->Sup.len-1))) goto LA1;
A_152683 = 0;
A_152683 = (NI64)abs((*(*D_152676).Tocpart->data[(*J_152678)].N).Level);
if (!(A_152683 == Lvl_152679)) goto LA3;
LOC5 = 0;
LOC5 = Rendertocentry_152665(D_152676, &(*D_152676).Tocpart->data[(*J_152678)]);
App_48031(&Result_152680, LOC5);
(*J_152678) += 1;
goto LA2;
LA3: ;
if (!(Lvl_152679 < A_152683)) goto LA6;
LOC8 = 0;
LOC8 = Rendertocentries_152674(D_152676, J_152678, A_152683);
App_48031(&Result_152680, LOC8);
goto LA2;
LA6: ;
goto LA1;
LA2: ;
} LA1: ;
if (!(1 < Lvl_152679)) goto LA10;
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC12[0] = Result_152680;
Result_152680 = Dispf_151579(((NimStringDesc*) &TMP195432), ((NimStringDesc*) &TMP195433), LOC12, 1);
LA10: ;
return Result_152680;
}
N_NIMCALL(void, Gensection_153447)(TY151017* D_153449, NU8 Kind_153450) {
TY48008* Title_153474;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY158585 LOC7;
NimStringDesc* LOC8;
TY158585 LOC9;
if (!((*D_153449).Section[(Kind_153450)-0] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Title_153474 = 0;
LOC4 = 0;
LOC5 = 0;
LOC5 = copyStr(reprEnum(Kind_153450, NTI51174), 2);
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendChar(LOC4, 115);
Title_153474 = Torope_48046(LOC4);
LOC6 = 0;
LOC6 = Getconfigvar_42133(((NimStringDesc*) &TMP195434));
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Torope_48052(((NI64) (Kind_153450)));
LOC7[1] = Title_153474;
LOC7[2] = Torope_48052(((NI64) ((NI64)(Kind_153450 + 50))));
LOC7[3] = (*D_153449).Section[(Kind_153450)-0];
asgnRefNoCycle((void**) &(*D_153449).Section[(Kind_153450)-0], Ropeformatnamedvars_151220(LOC6, TMP195435, 4, LOC7, 4));
LOC8 = 0;
LOC8 = Getconfigvar_42133(((NimStringDesc*) &TMP195440));
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_48052(((NI64) (Kind_153450)));
LOC9[1] = Title_153474;
LOC9[2] = Torope_48052(((NI64) ((NI64)(Kind_153450 + 50))));
LOC9[3] = (*D_153449).Toc[(Kind_153450)-0];
asgnRefNoCycle((void**) &(*D_153449).Toc[(Kind_153450)-0], Ropeformatnamedvars_151220(LOC8, TMP195435, 4, LOC9, 4));
BeforeRet: ;
}
N_NIMCALL(TY48008*, Genoutfile_153511)(TY151017* D_153513) {
TY48008* Result_153514;
TY48008* Code_153515;
TY48008* Toc_153516;
TY48008* Title_153517;
TY48008* Content_153518;
NimStringDesc* Bodyname_153519;
NI J_153520;
NU8 I_153551;
NU8 Res_153629;
NimStringDesc* LOC5;
TY48446 LOC6;
NU8 I_153579;
NU8 Res_153634;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
NimStringDesc* LOC17;
TY159326 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC24;
TY160005 LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
Result_153514 = 0;
Code_153515 = 0;
Toc_153516 = 0;
Title_153517 = 0;
Content_153518 = 0;
Bodyname_153519 = 0;
J_153520 = 0;
J_153520 = 0;
Toc_153516 = Rendertocentries_152674(D_153513, &J_153520, 1);
Code_153515 = NIM_NIL;
Content_153518 = NIM_NIL;
Title_153517 = NIM_NIL;
I_153551 = 0;
Res_153629 = 0;
Res_153629 = ((NU8) 0);
while (1) {
if (!(Res_153629 <= ((NU8) 20))) goto LA1;
I_153551 = Res_153629;
Gensection_153447(D_153513, I_153551);
App_48031(&Toc_153516, (*D_153513).Toc[(I_153551)-0]);
Res_153629 += 1;
} LA1: ;
if (!!((Toc_153516 == NIM_NIL))) goto LA3;
LOC5 = 0;
LOC5 = Getconfigvar_42133(((NimStringDesc*) &TMP195441));
memset((void*)&LOC6, 0, sizeof(LOC6));
LOC6[0] = Toc_153516;
Toc_153516 = Ropeformatnamedvars_151220(LOC5, TMP195442, 1, LOC6, 1);
LA3: ;
I_153579 = 0;
Res_153634 = 0;
Res_153634 = ((NU8) 0);
while (1) {
if (!(Res_153634 <= ((NU8) 20))) goto LA7;
I_153579 = Res_153634;
App_48031(&Code_153515, (*D_153513).Section[(I_153579)-0]);
Res_153634 += 1;
} LA7: ;
if (!!(((*D_153513).Meta[(((NU8) 1))-0] == NIM_NIL))) goto LA9;
Title_153517 = (*D_153513).Meta[(((NU8) 1))-0];
goto LA8;
LA9: ;
LOC11 = 0;
LOC12 = 0;
LOC12 = nosChangeFileExt((*D_153513).Filename, ((NimStringDesc*) &TMP195172));
LOC13 = 0;
LOC13 = nosextractFilename(LOC12);
LOC11 = rawNewString(LOC13->Sup.len + 7);
appendString(LOC11, ((NimStringDesc*) &TMP195443));
appendString(LOC11, LOC13);
Title_153517 = Torope_48046(LOC11);
LA8: ;
if (!(*D_153513).Hastoc) goto LA15;
Bodyname_153519 = copyString(((NimStringDesc*) &TMP195444));
goto LA14;
LA15: ;
Bodyname_153519 = copyString(((NimStringDesc*) &TMP195445));
LA14: ;
LOC17 = 0;
LOC17 = Getconfigvar_42133(Bodyname_153519);
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC18[0] = Title_153517;
LOC18[1] = Toc_153516;
LOC18[2] = (*D_153513).Moddesc;
LOC19 = 0;
LOC19 = ntgetDateStr();
LOC18[3] = Torope_48046(LOC19);
LOC20 = 0;
LOC20 = ntgetClockStr();
LOC18[4] = Torope_48046(LOC20);
LOC18[5] = Code_153515;
Content_153518 = Ropeformatnamedvars_151220(LOC17, TMP195446, 6, LOC18, 6);
if (!!(((Gglobaloptions_42077 &(1<<((((NU8) 6))&31)))!=0))) goto LA22;
LOC24 = 0;
LOC24 = Getconfigvar_42133(((NimStringDesc*) &TMP195452));
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC25[0] = Title_153517;
LOC25[1] = Toc_153516;
LOC25[2] = (*D_153513).Moddesc;
LOC26 = 0;
LOC26 = ntgetDateStr();
LOC25[3] = Torope_48046(LOC26);
LOC27 = 0;
LOC27 = ntgetClockStr();
LOC25[4] = Torope_48046(LOC27);
LOC25[5] = Content_153518;
LOC25[6] = (*D_153513).Meta[(((NU8) 3))-0];
LOC25[7] = (*D_153513).Meta[(((NU8) 4))-0];
Code_153515 = Ropeformatnamedvars_151220(LOC24, TMP195453, 8, LOC25, 8);
goto LA21;
LA22: ;
Code_153515 = Content_153518;
LA21: ;
Result_153514 = Code_153515;
return Result_153514;
}
N_NIMCALL(TY48008*, Renderrstsons_152310)(TY151017* D_152312, TY143077* N_152313) {
TY48008* Result_152314;
NI I_152322;
NI HEX3Atmp_152325;
NI LOC1;
NI Res_152327;
TY48008* LOC3;
Result_152314 = 0;
I_152322 = 0;
HEX3Atmp_152325 = 0;
LOC1 = Rsonslen_143091(N_152313);
HEX3Atmp_152325 = (NI64)(LOC1 - 1);
Res_152327 = 0;
Res_152327 = 0;
while (1) {
if (!(Res_152327 <= HEX3Atmp_152325)) goto LA2;
I_152322 = Res_152327;
LOC3 = 0;
LOC3 = Renderrsttorst_152306(D_152312, (*N_152313).Sons->data[I_152322]);
App_48031(&Result_152314, LOC3);
Res_152327 += 1;
} LA2: ;
return Result_152314;
}
N_NIMCALL(TY48008*, Renderrsttorst_152306)(TY151017* D_152308, TY143077* N_152309) {
TY48008* Result_152334;
TY48008* Ind_152351;
NimStringDesc* LOC4;
NI L_152352;
TY157050 LOC5;
NimStringDesc* LOC6;
NI L_152357;
TY157050 LOC7;
NimStringDesc* LOC8;
TY173060 LOC9;
NimStringDesc* LOC10;
TY173060 LOC11;
TY173060 LOC15;
TY173060 LOC19;
TY173060 LOC20;
TY173060 LOC24;
NI L_152491;
NI LOC25;
TY158585 LOC26;
NI LOC27;
NimStringDesc* LOC28;
TY173060 LOC29;
TY48446 LOC30;
TY173060 LOC31;
TY173060 LOC32;
TY48446 LOC33;
TY48446 LOC34;
TY48446 LOC35;
TY48446 LOC36;
TY48446 LOC37;
TY48446 LOC38;
TY48446 LOC39;
NIM_BOOL LOC41;
TY173060 LOC48;
TY48446 LOC49;
Result_152334 = 0;
Result_152334 = NIM_NIL;
if (!(N_152309 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Ind_152351 = 0;
LOC4 = 0;
LOC4 = nsuRepeatChar((*D_152308).Indent, 32);
Ind_152351 = Torope_48046(LOC4);
switch ((*N_152309).Kind) {
case ((NU8) 0):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
break;
case ((NU8) 1):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
L_152352 = 0;
L_152352 = Ropelen_48055(Result_152334);
memset((void*)&LOC5, 0, sizeof(LOC5));
LOC5[0] = Ind_152351;
LOC5[1] = Result_152334;
LOC6 = 0;
LOC6 = nsuRepeatChar(L_152352, Lvltochar_152335[((*N_152309).Level)-0]);
LOC5[2] = Torope_48046(LOC6);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195454), LOC5, 3);
break;
case ((NU8) 2):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
L_152357 = 0;
L_152357 = Ropelen_48055(Result_152334);
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Ind_152351;
LOC7[1] = Result_152334;
LOC8 = 0;
LOC8 = nsuRepeatChar(L_152357, Lvltochar_152335[((*N_152309).Level)-0]);
LOC7[2] = Torope_48046(LOC8);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195455), LOC7, 3);
break;
case ((NU8) 3):
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Ind_152351;
LOC10 = 0;
LOC10 = nsuRepeatChar((NI64)(78 - (*D_152308).Indent), 45);
LOC9[1] = Torope_48046(LOC10);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195456), LOC9, 2);
break;
case ((NU8) 4):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC11, 0, sizeof(LOC11));
LOC11[0] = Ind_152351;
LOC11[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195457), LOC11, 2);
break;
case ((NU8) 6):
(*D_152308).Indent += 2;
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
if (!!((Result_152334 == NIM_NIL))) goto LA13;
memset((void*)&LOC15, 0, sizeof(LOC15));
LOC15[0] = Ind_152351;
LOC15[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195458), LOC15, 2);
LA13: ;
(*D_152308).Indent -= 2;
break;
case ((NU8) 8):
(*D_152308).Indent += 4;
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
if (!!((Result_152334 == NIM_NIL))) goto LA17;
memset((void*)&LOC19, 0, sizeof(LOC19));
LOC19[0] = Ind_152351;
LOC19[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195459), LOC19, 2);
LA17: ;
(*D_152308).Indent -= 4;
break;
case ((NU8) 17):
case ((NU8) 13):
case ((NU8) 9):
case ((NU8) 10):
case ((NU8) 26):
case ((NU8) 15):
case ((NU8) 16):
case ((NU8) 37):
case ((NU8) 5):
case ((NU8) 7):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
break;
case ((NU8) 11):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC20[0] = Ind_152351;
LOC20[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195457), LOC20, 2);
break;
case ((NU8) 12):
(*D_152308).Indent += 2;
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
if (!!(((*(*N_152309).Sons->data[0]).Kind == ((NU8) 5)))) goto LA22;
memset((void*)&LOC24, 0, sizeof(LOC24));
LOC24[0] = Ind_152351;
LOC24[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195460), LOC24, 2);
LA22: ;
(*D_152308).Indent -= 2;
break;
case ((NU8) 14):
Result_152334 = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[0]);
L_152491 = 0;
LOC25 = Ropelen_48055(Result_152334);
L_152491 = (((NI64)(LOC25 + 3) >= 30) ? (NI64)(LOC25 + 3) : 30);
(*D_152308).Indent += L_152491;
memset((void*)&LOC26, 0, sizeof(LOC26));
LOC26[0] = Ind_152351;
LOC26[1] = Result_152334;
LOC27 = Ropelen_48055(Result_152334);
LOC28 = 0;
LOC28 = nsuRepeatChar((NI64)((NI64)(L_152491 - LOC27) - 2), 32);
LOC26[2] = Torope_48046(LOC28);
LOC26[3] = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[1]);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195461), LOC26, 4);
(*D_152308).Indent -= L_152491;
break;
case ((NU8) 27):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC29[0] = Ind_152351;
LOC29[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195462), LOC29, 2);
break;
case ((NU8) 28):
(*D_152308).Indent += 2;
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
(*D_152308).Indent -= 2;
break;
case ((NU8) 39):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC30, 0, sizeof(LOC30));
LOC30[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195463), LOC30, 1);
break;
case ((NU8) 38):
memset((void*)&LOC31, 0, sizeof(LOC31));
LOC31[0] = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[0]);
LOC31[1] = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[1]);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195464), LOC31, 2);
break;
case ((NU8) 53):
Result_152334 = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[0]);
memset((void*)&LOC32, 0, sizeof(LOC32));
LOC32[0] = Result_152334;
LOC32[1] = Renderrsttorst_152306(D_152308, (*N_152309).Sons->data[1]);
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195465), LOC32, 2);
break;
case ((NU8) 54):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC33, 0, sizeof(LOC33));
LOC33[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195466), LOC33, 1);
break;
case ((NU8) 55):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC34, 0, sizeof(LOC34));
LOC34[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195467), LOC34, 1);
break;
case ((NU8) 56):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC35, 0, sizeof(LOC35));
LOC35[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195468), LOC35, 1);
break;
case ((NU8) 57):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC36, 0, sizeof(LOC36));
LOC36[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195469), LOC36, 1);
break;
case ((NU8) 58):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC37, 0, sizeof(LOC37));
LOC37[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195470), LOC37, 1);
break;
case ((NU8) 59):
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC38, 0, sizeof(LOC38));
LOC38[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195471), LOC38, 1);
break;
case ((NU8) 60):
(*D_152308).Verbatim += 1;
Result_152334 = Renderrstsons_152310(D_152308, N_152309);
memset((void*)&LOC39, 0, sizeof(LOC39));
LOC39[0] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195472), LOC39, 1);
(*D_152308).Verbatim -= 1;
break;
case ((NU8) 62):
LOC41 = ((*D_152308).Verbatim == 0);
if (!(LOC41)) goto LA42;
LOC41 = eqStrings((*N_152309).Text, ((NimStringDesc*) &TMP195473));
LA42: ;
if (!LOC41) goto LA43;
Result_152334 = Torope_48046(((NimStringDesc*) &TMP195474));
goto LA40;
LA43: ;
Result_152334 = Torope_48046((*N_152309).Text);
LA40: ;
break;
case ((NU8) 51):
(*D_152308).Indent += 3;
if (!!(((*N_152309).Sons->data[2] == NIM_NIL))) goto LA46;
Result_152334 = Renderrstsons_152310(D_152308, (*N_152309).Sons->data[2]);
LA46: ;
(*D_152308).Indent -= 3;
memset((void*)&LOC48, 0, sizeof(LOC48));
LOC48[0] = Ind_152351;
LOC48[1] = Result_152334;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195475), LOC48, 2);
break;
case ((NU8) 44):
memset((void*)&LOC49, 0, sizeof(LOC49));
LOC49[0] = Ind_152351;
Result_152334 = Ropef_48069(((NimStringDesc*) &TMP195476), LOC49, 1);
break;
default:
Rawmessage_43553(((NU8) 189), reprEnum((*N_152309).Kind, NTI143008));
break;
}
BeforeRet: ;
return Result_152334;
}
N_NIMCALL(void, Generateindex_153637)(TY151017* D_153639) {
TY48008* LOC4;
if (!!(((*D_153639).Theindex == NIM_NIL))) goto LA2;
Sortindex_143123((*D_153639).Theindex);
LOC4 = 0;
LOC4 = Renderrsttorst_152306(D_153639, (*D_153639).Indexfile);
Writerope_48058(LOC4, Gindexfile_42081);
LA2: ;
}
N_NIMCALL(void, Commanddoc_151001)(NimStringDesc* Filename_151003) {
TY51525* Ast_153654;
NimStringDesc* LOC1;
TY151017* D_153666;
TY48008* LOC5;
NimStringDesc* LOC6;
Ast_153654 = 0;
LOC1 = 0;
LOC1 = nosaddFileExt(Filename_151003, ((NimStringDesc*) &TMP195090));
Ast_153654 = Parsefile_88031(LOC1);
if (!(Ast_153654 == NIM_NIL)) goto LA3;
goto BeforeRet;
LA3: ;
D_153666 = 0;
D_153666 = Newdocumentor_151162(Filename_151003);
Initindexfile_151132(D_153666);
(*D_153666).Hastoc = NIM_TRUE;
Generatedoc_153108(D_153666, Ast_153654);
LOC5 = 0;
LOC5 = Genoutfile_153511(D_153666);
LOC6 = 0;
LOC6 = Getoutfile_42143(Filename_151003, ((NimStringDesc*) &TMP195099));
Writerope_48058(LOC5, LOC6);
Generateindex_153637(D_153666);
BeforeRet: ;
}
N_NIMCALL(void, Commandrstaux_153667)(NimStringDesc* Filename_153669, NimStringDesc* Outext_153670) {
NimStringDesc* Filen_153671;
TY151017* D_153672;
TY143077* Rst_153674;
NimStringDesc* LOC1;
TY48008* Code_153675;
NimStringDesc* LOC2;
Filen_153671 = 0;
Filen_153671 = nosaddFileExt(Filename_153669, ((NimStringDesc*) &TMP195098));
D_153672 = 0;
D_153672 = Newdocumentor_151162(Filen_153671);
Initindexfile_151132(D_153672);
Rst_153674 = 0;
LOC1 = 0;
LOC1 = Readfile_3647(Filen_153671);
Rst_153674 = Rstparse_143082(LOC1, NIM_FALSE, Filen_153671, 0, 1, &(*D_153672).Hastoc);
asgnRefNoCycle((void**) &(*D_153672).Moddesc, Renderrsttoout_151612(D_153672, Rst_153674));
Code_153675 = 0;
Code_153675 = Genoutfile_153511(D_153672);
LOC2 = 0;
LOC2 = Getoutfile_42143(Filename_153669, Outext_153670);
Writerope_48058(Code_153675, LOC2);
Generateindex_153637(D_153672);
}
N_NIMCALL(void, Commandrst2html_151004)(NimStringDesc* Filename_151006) {
Commandrstaux_153667(Filename_151006, ((NimStringDesc*) &TMP195099));
}
N_NIMCALL(void, Commandrst2tex_151007)(NimStringDesc* Filename_151009) {
asgnRefNoCycle((void**) &Splitter_151046, copyString(((NimStringDesc*) &TMP195478)));
Commandrstaux_153667(Filename_151009, ((NimStringDesc*) &TMP195479));
}
N_NOINLINE(void, docgenInit)(void) {
asgnRefNoCycle((void**) &Splitter_151046, copyString(((NimStringDesc*) &TMP151047)));
}

