/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY51526 TY51526;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY51552 TY51552;
typedef struct TY43539 TY43539;
typedef struct TY51548 TY51548;
typedef struct TY50011 TY50011;
typedef struct TY51520 TY51520;
typedef struct TY72013 TY72013;
typedef struct TY50005 TY50005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY51550 TY51550;
typedef struct TY51540 TY51540;
typedef struct TY48008 TY48008;
typedef struct TY51530 TY51530;
typedef struct TY51528 TY51528;
typedef struct TY51544 TY51544;
typedef struct TY39013 TY39013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY43539 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51526 {
TY51552* Typ;
NimStringDesc* Comment;
TY43539 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51548* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51520* Sons;
} S6;
} KindU;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
struct TY51540 {
NU8 K;
NU8 S;
NU8 Flags;
TY51552* T;
TY48008* R;
NI A;
};
struct TY51552 {
  TY50005 Sup;
NU8 Kind;
TY51550* Sons;
TY51526* N;
NU8 Flags;
NU8 Callconv;
TY51548* Owner;
TY51548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51540 Loc;
};
struct TY51530 {
TNimType* m_type;
NI Counter;
TY51528* Data;
};
struct TY51548 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51552* Typ;
TY50011* Name;
TY43539 Info;
TY51548* Owner;
NU32 Flags;
TY51530 Tab;
TY51526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51540 Loc;
TY51544* Annex;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY72013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51544 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51526* Path;
};
struct TY51520 {
  TGenericSeq Sup;
  TY51526* data[SEQ_DECL_SIZE];
};
struct TY51550 {
  TGenericSeq Sup;
  TY51552* data[SEQ_DECL_SIZE];
};
struct TY51528 {
  TGenericSeq Sup;
  TY51548* data[SEQ_DECL_SIZE];
};
N_NIMCALL(TY51526*, Getarg_87036)(TY51526* N_87038, NimStringDesc* Name_87039, NI Pos_87040);
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806);
N_NIMCALL(void, Invalidpragma_87032)(TY51526* N_87034);
N_NIMCALL(void, Limessage_43569)(TY43539 Info_43571, NU8 Msg_43572, NimStringDesc* Arg_43573);
N_NIMCALL(NimStringDesc*, Rendertree_82042)(TY51526* N_82044, NU8 Renderflags_82047);
N_NIMCALL(NIM_BOOL, Identeq_50028)(TY50011* Id_50030, NimStringDesc* Name_50031);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18712);
N_NIMCALL(NimStringDesc*, Strarg_87020)(TY51526* N_87022, NimStringDesc* Name_87023, NI Pos_87024, NimStringDesc* Default_87025);
N_NIMCALL(NIM_BOOL, Boolarg_87026)(TY51526* N_87028, NimStringDesc* Name_87029, NI Pos_87030, NIM_BOOL Default_87031);
N_NIMCALL(TY72013*, Llstreamopen_72025)(NimStringDesc* Data_72027);
N_NIMCALL(NIM_BOOL, Llstreamatend_72071)(TY72013* S_72073);
N_NIMCALL(NimStringDesc*, Llstreamreadline_72048)(TY72013* S_72050);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24976, NIM_BOOL Leading_24977, NIM_BOOL Trailing_24978);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25848, NimStringDesc* Prefix_25849);
N_NIMCALL(void, Llstreamwriteln_72067)(TY72013* S_72069, NimStringDesc* Data_72070);
N_NIMCALL(void, Llstreamclose_72040)(TY72013* S_72042);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* S_26301, NimStringDesc* Sub_26302, NimStringDesc* By_26303);
STRING_LITERAL(TMP192853, "startswith", 10);
STRING_LITERAL(TMP192854, "", 0);
STRING_LITERAL(TMP192855, "true", 4);
STRING_LITERAL(TMP192856, "false", 5);
STRING_LITERAL(TMP192857, "leading", 7);
STRING_LITERAL(TMP192858, "trailing", 8);
STRING_LITERAL(TMP192859, "sub", 3);
STRING_LITERAL(TMP192860, "by", 2);
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806) {
NI Result_52886;
Result_52886 = 0;
if (!(*N_51806).KindU.S6.Sons == 0) goto LA2;
Result_52886 = 0;
goto LA1;
LA2: ;
Result_52886 = (*N_51806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_52886;
}
N_NIMCALL(void, Invalidpragma_87032)(TY51526* N_87034) {
NimStringDesc* LOC1;
LOC1 = 0;
LOC1 = Rendertree_82042(N_87034, 4);
Limessage_43569((*N_87034).Info, ((NU8) 160), LOC1);
}
N_NIMCALL(TY51526*, Getarg_87036)(TY51526* N_87038, NimStringDesc* Name_87039, NI Pos_87040) {
TY51526* Result_87041;
NI I_87077;
NI HEX3Atmp_87206;
NI LOC4;
NI Res_87208;
NIM_BOOL LOC13;
Result_87041 = 0;
Result_87041 = NIM_NIL;
if (!((*N_87038).Kind >= ((NU8) 1) && (*N_87038).Kind <= ((NU8) 18))) goto LA2;
goto BeforeRet;
LA2: ;
I_87077 = 0;
HEX3Atmp_87206 = 0;
LOC4 = Sonslen_51804(N_87038);
HEX3Atmp_87206 = (NI64)(LOC4 - 1);
Res_87208 = 0;
Res_87208 = 1;
while (1) {
if (!(Res_87208 <= HEX3Atmp_87206)) goto LA5;
I_87077 = Res_87208;
if (!((*(*N_87038).KindU.S6.Sons->data[I_87077]).Kind == ((NU8) 23))) goto LA7;
if (!!(((*(*(*N_87038).KindU.S6.Sons->data[I_87077]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA10;
Invalidpragma_87032(N_87038);
LA10: ;
LOC13 = Identeq_50028((*(*(*N_87038).KindU.S6.Sons->data[I_87077]).KindU.S6.Sons->data[0]).KindU.S5.Ident, Name_87039);
if (!LOC13) goto LA14;
Result_87041 = (*(*N_87038).KindU.S6.Sons->data[I_87077]).KindU.S6.Sons->data[1];
goto BeforeRet;
LA14: ;
goto LA6;
LA7: ;
if (!(I_87077 == Pos_87040)) goto LA16;
Result_87041 = (*N_87038).KindU.S6.Sons->data[I_87077];
goto BeforeRet;
goto LA6;
LA16: ;
LA6: ;
Res_87208 += 1;
} LA5: ;
BeforeRet: ;
return Result_87041;
}
N_NIMCALL(NIM_CHAR, Chararg_87014)(TY51526* N_87016, NimStringDesc* Name_87017, NI Pos_87018, NIM_CHAR Default_87019) {
NIM_CHAR Result_87215;
TY51526* X_87216;
Result_87215 = 0;
X_87216 = 0;
X_87216 = Getarg_87036(N_87016, Name_87017, Pos_87018);
if (!(X_87216 == NIM_NIL)) goto LA2;
Result_87215 = Default_87019;
goto LA1;
LA2: ;
if (!((*X_87216).Kind == ((NU8) 5))) goto LA4;
Result_87215 = ((NIM_CHAR) (((NI) (((NI) ((*X_87216).KindU.S1.Intval))))));
goto LA1;
LA4: ;
Invalidpragma_87032(N_87016);
LA1: ;
return Result_87215;
}
N_NIMCALL(NimStringDesc*, Strarg_87020)(TY51526* N_87022, NimStringDesc* Name_87023, NI Pos_87024, NimStringDesc* Default_87025) {
NimStringDesc* Result_87255;
TY51526* X_87256;
Result_87255 = 0;
X_87256 = 0;
X_87256 = Getarg_87036(N_87022, Name_87023, Pos_87024);
if (!(X_87256 == NIM_NIL)) goto LA2;
Result_87255 = copyString(Default_87025);
goto LA1;
LA2: ;
if (!((*X_87256).Kind >= ((NU8) 14) && (*X_87256).Kind <= ((NU8) 16))) goto LA4;
Result_87255 = copyString((*X_87256).KindU.S3.Strval);
goto LA1;
LA4: ;
Invalidpragma_87032(N_87022);
LA1: ;
return Result_87255;
}
N_NIMCALL(NIM_BOOL, Boolarg_87026)(TY51526* N_87028, NimStringDesc* Name_87029, NI Pos_87030, NIM_BOOL Default_87031) {
NIM_BOOL Result_87298;
TY51526* X_87299;
NIM_BOOL LOC4;
NIM_BOOL LOC8;
Result_87298 = 0;
X_87299 = 0;
X_87299 = Getarg_87036(N_87028, Name_87029, Pos_87030);
if (!(X_87299 == NIM_NIL)) goto LA2;
Result_87298 = Default_87031;
goto LA1;
LA2: ;
LOC4 = ((*X_87299).Kind == ((NU8) 2));
if (!(LOC4)) goto LA5;
LOC4 = Identeq_50028((*X_87299).KindU.S5.Ident, ((NimStringDesc*) &TMP192855));
LA5: ;
if (!LOC4) goto LA6;
Result_87298 = NIM_TRUE;
goto LA1;
LA6: ;
LOC8 = ((*X_87299).Kind == ((NU8) 2));
if (!(LOC8)) goto LA9;
LOC8 = Identeq_50028((*X_87299).KindU.S5.Ident, ((NimStringDesc*) &TMP192856));
LA9: ;
if (!LOC8) goto LA10;
Result_87298 = NIM_FALSE;
goto LA1;
LA10: ;
Invalidpragma_87032(N_87028);
LA1: ;
return Result_87298;
}
N_NIMCALL(TY72013*, Filterstrip_87009)(TY72013* Stdin_87011, NimStringDesc* Filename_87012, TY51526* Call_87013) {
TY72013* Result_87358;
NimStringDesc* Pattern_87359;
NIM_BOOL Leading_87360;
NIM_BOOL Trailing_87361;
NIM_BOOL LOC2;
NimStringDesc* Line_87362;
NimStringDesc* Stripped_87363;
NIM_BOOL LOC4;
Result_87358 = 0;
Pattern_87359 = 0;
Pattern_87359 = Strarg_87020(Call_87013, ((NimStringDesc*) &TMP192853), 1, ((NimStringDesc*) &TMP192854));
Leading_87360 = 0;
Leading_87360 = Boolarg_87026(Call_87013, ((NimStringDesc*) &TMP192857), 2, NIM_TRUE);
Trailing_87361 = 0;
Trailing_87361 = Boolarg_87026(Call_87013, ((NimStringDesc*) &TMP192858), 3, NIM_TRUE);
Result_87358 = Llstreamopen_72025(((NimStringDesc*) &TMP192854));
while (1) {
LOC2 = Llstreamatend_72071(Stdin_87011);
if (!!(LOC2)) goto LA1;
Line_87362 = 0;
Line_87362 = Llstreamreadline_72048(Stdin_87011);
Stripped_87363 = 0;
Stripped_87363 = nsuStrip(Line_87362, Leading_87360, Trailing_87361);
LOC4 = (Pattern_87359->Sup.len == 0);
if (LOC4) goto LA5;
LOC4 = nsuStartsWith(Stripped_87363, Pattern_87359);
LA5: ;
if (!LOC4) goto LA6;
Llstreamwriteln_72067(Result_87358, Stripped_87363);
goto LA3;
LA6: ;
Llstreamwriteln_72067(Result_87358, Line_87362);
LA3: ;
} LA1: ;
Llstreamclose_72040(Stdin_87011);
return Result_87358;
}
N_NIMCALL(TY72013*, Filterreplace_87004)(TY72013* Stdin_87006, NimStringDesc* Filename_87007, TY51526* Call_87008) {
TY72013* Result_87373;
NimStringDesc* Sub_87374;
NimStringDesc* By_87379;
NIM_BOOL LOC5;
NimStringDesc* Line_87380;
NimStringDesc* LOC6;
Result_87373 = 0;
Sub_87374 = 0;
Sub_87374 = Strarg_87020(Call_87008, ((NimStringDesc*) &TMP192859), 1, ((NimStringDesc*) &TMP192854));
if (!(Sub_87374->Sup.len == 0)) goto LA2;
Invalidpragma_87032(Call_87008);
LA2: ;
By_87379 = 0;
By_87379 = Strarg_87020(Call_87008, ((NimStringDesc*) &TMP192860), 2, ((NimStringDesc*) &TMP192854));
Result_87373 = Llstreamopen_72025(((NimStringDesc*) &TMP192854));
while (1) {
LOC5 = Llstreamatend_72071(Stdin_87006);
if (!!(LOC5)) goto LA4;
Line_87380 = 0;
Line_87380 = Llstreamreadline_72048(Stdin_87006);
LOC6 = 0;
LOC6 = nsuReplaceStr(Line_87380, Sub_87374, By_87379);
Llstreamwriteln_72067(Result_87373, LOC6);
} LA4: ;
Llstreamclose_72040(Stdin_87006);
return Result_87373;
}
N_NOINLINE(void, filtersInit)(void) {
}

