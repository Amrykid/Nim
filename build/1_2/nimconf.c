/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY73135 TY73135;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10202 TY10202;
typedef struct TY10218 TY10218;
typedef struct TY10590 TY10590;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY70267 TY70267;
typedef struct TY69015 TY69015;
typedef struct TNimObject TNimObject;
typedef struct TY68013 TY68013;
typedef struct TY70281 TY70281;
typedef struct TY70263 TY70263;
typedef struct TY48011 TY48011;
typedef struct TY48005 TY48005;
typedef struct TY41532 TY41532;
struct TGenericSeq {
NI len;
NI space;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY69015 {
  TNimObject Sup;
NI Bufpos;
NCSTRING Buf;
NI Buflen;
TY68013* Stream;
NI Linenumber;
NI Sentinel;
NI Linestart;
};
struct TY70267 {
  TY69015 Sup;
NimStringDesc* Filename;
TY70281* Indentstack;
NI Dedent;
NI Indentahead;
};
struct TY70263 {
TNimType* m_type;
NU8 Toktype;
NI Indent;
TY48011* Ident;
NI64 Inumber;
NF64 Fnumber;
NU8 Base;
NimStringDesc* Literal;
TY70263* Next;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
typedef NimStringDesc* TY67066[3];
typedef NI TY8214[8];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY68013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TY73135 {
  TGenericSeq Sup;
  NIM_BOOL data[SEQ_DECL_SIZE];
};
struct TY70281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(NimStringDesc*, Getprefixdir_40107)(void);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(NimStringDesc*, nosJoinPath)(NimStringDesc* Head_32203, NimStringDesc* Tail_32204);
N_NIMCALL(void, Loadspecialconfig_73007)(NimStringDesc* Configfilename_73009);
N_NIMCALL(void, Readconfigfile_73447)(NimStringDesc* Filename_73449);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
N_NIMCALL(TY68013*, Llstreamopen_68032)(NimStringDesc* Filename_68034, NU8 Mode_68035);
N_NIMCALL(void, Openlexer_70298)(TY70267* Lex_70301, NimStringDesc* Filename_70302, TY68013* Inputstream_70303);
N_NIMCALL(void, Conftok_73329)(TY70267* L_73332, TY70263* Tok_73333);
N_NIMCALL(void, Ppgettok_73010)(TY70267* L_73013, TY70263* Tok_73014);
N_NIMCALL(void, Rawgettok_70304)(TY70267* L_70307, TY70263* Tok_70309);
N_NIMCALL(void, Parsedirective_73284)(TY70267* L_73287, TY70263* Tok_73288);
N_NIMCALL(NU8, Whichkeyword_66465)(TY48011* Id_66467);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(NIM_BOOL, Evalppif_73120)(TY70267* L_73123, TY70263* Tok_73124);
N_NIMCALL(NIM_BOOL, Parseexpr_73054)(TY70267* L_73057, TY70263* Tok_73058);
N_NIMCALL(NIM_BOOL, Parseandexpr_73090)(TY70267* L_73093, TY70263* Tok_73094);
N_NIMCALL(NIM_BOOL, Parseatom_73059)(TY70267* L_73062, TY70263* Tok_73063);
N_NIMCALL(void, Lexmessage_70326)(TY70267* L_70328, NU8 Msg_70329, NimStringDesc* Arg_70330);
N_NIMCALL(NIM_BOOL, Isdefined_57059)(TY48011* Symbol_57061);
N_NIMCALL(void, Jumptodirective_73176)(TY70267* L_73179, TY70263* Tok_73180, NU8 Dest_73181);
N_NIMCALL(void, Doelse_73182)(TY70267* L_73185, TY70263* Tok_73186);
N_NIMCALL(void, Doelif_73198)(TY70267* L_73201, TY70263* Tok_73202);
N_NIMCALL(void, Doend_73153)(TY70267* L_73156, TY70263* Tok_73157);
N_NIMCALL(void, Messageout_41550)(NimStringDesc* S_41552);
N_NIMCALL(NimStringDesc*, Toktostr_70323)(TY70263* Tok_70325);
N_NIMCALL(void, Putenv_33439)(NimStringDesc* Key_33441, NimStringDesc* Val_33442);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, Getenv_33425)(NimStringDesc* Key_33427);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(void, Parseassignment_73371)(TY70267* L_73374, TY70263* Tok_73375);
N_NIMCALL(TY48011*, Getident_48016)(NimStringDesc* Identifier_48018);
N_NIMCALL(TY41532, Getlineinfo_70313)(TY70267* L_70315);
N_NIMCALL(void, Checksymbol_73346)(TY70267* L_73348, TY70263* Tok_73349);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_16982, NI Addlen_16983);
N_NIMCALL(void, Processswitch_67012)(NimStringDesc* Switch_67014, NimStringDesc* Arg_67015, NU8 Pass_67016, TY41532 Info_67017);
N_NIMCALL(void, Closelexer_70316)(TY70267* Lex_70319);
N_NIMCALL(void, Rawmessage_41553)(NU8 Msg_41555, NimStringDesc* Arg_41556);
N_NIMCALL(NimStringDesc*, Getconfigpath_73507)(NimStringDesc* Filename_73509);
N_NIMCALL(NimStringDesc*, nosgetConfigDir)(void);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* Filename_30804);
N_NIMCALL(NimStringDesc*, nosJoinPathOpenArray)(NimStringDesc** Parts_32287, NI Parts_32287Len0);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_32820, NimStringDesc* Ext_32821);
STRING_LITERAL(TMP190683, "/usr", 4);
STRING_LITERAL(TMP190684, "/usr/lib/nimrod", 15);
STRING_LITERAL(TMP190685, "/usr/local", 10);
STRING_LITERAL(TMP190686, "/usr/local/lib/nimrod", 21);
STRING_LITERAL(TMP190687, "lib", 3);
STRING_LITERAL(TMP190713, "@", 1);
STRING_LITERAL(TMP190714, "\')\'", 3);
STRING_LITERAL(TMP190715, "\':\'", 3);
STRING_LITERAL(TMP190716, "@if", 3);
STRING_LITERAL(TMP190717, "@end", 4);
STRING_LITERAL(TMP190719, "-", 1);
STRING_LITERAL(TMP190720, "--", 2);
STRING_LITERAL(TMP190721, "", 0);
STRING_LITERAL(TMP190722, "\']\'", 3);
STRING_LITERAL(TMP190723, "&", 1);
STRING_LITERAL(TMP190726, "config", 6);
STRING_LITERAL(TMP190727, "/etc/", 5);
STRING_LITERAL(TMP190728, "nimrod.cfg", 10);
STRING_LITERAL(TMP190729, "cfg", 3);
TY73135* Condstack_73136;
extern TNimType* NTI73135; /* seq[bool] */
extern TY10590 Gch_10608;
extern NimStringDesc* Libpath_40110;
extern NU32 Gglobaloptions_40077;
extern TNimType* NTI70267; /* TLexer */
extern TNimType* NTI70261; /* PToken */
extern TNimType* NTI70263; /* TToken */
extern NI Gverbosity_40083;
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI64)((NU64)(((NI) (Usr_10624))) - (NU64)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI64)((NU64)((*C_11418).Refcount) + (NU64)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI64)((NU64)((*C_11419).Refcount) - (NU64)(8));
if (!((NU64)((*C_11419).Refcount) < (NU64)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848) {
NIM_BOOL Result_16849;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_16849 = 0;
if (!(A_16847 == B_16848)) goto LA2;
Result_16849 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_16847 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_16848 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_16849 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_16847).Sup.len == (*B_16848).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_16847).data)), ((NCSTRING) ((*B_16848).data)), ((NI32) ((NI64)((*A_16847).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_16849 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_16849;
}
N_NIMCALL(void, Ppgettok_73010)(TY70267* L_73013, TY70263* Tok_73014) {
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
Rawgettok_70304(L_73013, Tok_73014);
while (1) {
LOC4 = ((*Tok_73014).Toktype == ((NU8) 102));
if (LOC4) goto LA5;
LOC4 = ((*Tok_73014).Toktype == ((NU8) 103));
LA5: ;
LOC3 = LOC4;
if (LOC3) goto LA6;
LOC3 = ((*Tok_73014).Toktype == ((NU8) 104));
LA6: ;
LOC2 = LOC3;
if (LOC2) goto LA7;
LOC2 = ((*Tok_73014).Toktype == ((NU8) 100));
LA7: ;
if (!LOC2) goto LA1;
Rawgettok_70304(L_73013, Tok_73014);
} LA1: ;
}
N_NIMCALL(NIM_BOOL, Parseatom_73059)(TY70267* L_73062, TY70263* Tok_73063) {
NIM_BOOL Result_73064;
NIM_BOOL LOC9;
Result_73064 = 0;
if (!((*Tok_73063).Toktype == ((NU8) 80))) goto LA2;
Ppgettok_73010(L_73062, Tok_73063);
Result_73064 = Parseexpr_73054(L_73062, Tok_73063);
if (!((*Tok_73063).Toktype == ((NU8) 81))) goto LA5;
Ppgettok_73010(L_73062, Tok_73063);
goto LA4;
LA5: ;
Lexmessage_70326(&(*L_73062), ((NU8) 21), ((NimStringDesc*) &TMP190714));
LA4: ;
goto LA1;
LA2: ;
if (!((*(*Tok_73063).Ident).Sup.Id == 40)) goto LA7;
Ppgettok_73010(L_73062, Tok_73063);
LOC9 = Parseatom_73059(L_73062, Tok_73063);
Result_73064 = !(LOC9);
goto LA1;
LA7: ;
Result_73064 = Isdefined_57059((*Tok_73063).Ident);
Ppgettok_73010(L_73062, Tok_73063);
LA1: ;
return Result_73064;
}
N_NIMCALL(NIM_BOOL, Parseandexpr_73090)(TY70267* L_73093, TY70263* Tok_73094) {
NIM_BOOL Result_73095;
NIM_BOOL B_73096;
NIM_BOOL LOC2;
Result_73095 = 0;
B_73096 = 0;
Result_73095 = Parseatom_73059(L_73093, Tok_73094);
while (1) {
if (!((*(*Tok_73094).Ident).Sup.Id == 2)) goto LA1;
Ppgettok_73010(L_73093, Tok_73094);
B_73096 = Parseatom_73059(L_73093, Tok_73094);
LOC2 = Result_73095;
if (!(LOC2)) goto LA3;
LOC2 = B_73096;
LA3: ;
Result_73095 = LOC2;
} LA1: ;
return Result_73095;
}
N_NIMCALL(NIM_BOOL, Parseexpr_73054)(TY70267* L_73057, TY70263* Tok_73058) {
NIM_BOOL Result_73110;
NIM_BOOL B_73111;
NIM_BOOL LOC2;
Result_73110 = 0;
B_73111 = 0;
Result_73110 = Parseandexpr_73090(L_73057, Tok_73058);
while (1) {
if (!((*(*Tok_73058).Ident).Sup.Id == 44)) goto LA1;
Ppgettok_73010(L_73057, Tok_73058);
B_73111 = Parseandexpr_73090(L_73057, Tok_73058);
LOC2 = Result_73110;
if (LOC2) goto LA3;
LOC2 = B_73111;
LA3: ;
Result_73110 = LOC2;
} LA1: ;
return Result_73110;
}
N_NIMCALL(NIM_BOOL, Evalppif_73120)(TY70267* L_73123, TY70263* Tok_73124) {
NIM_BOOL Result_73125;
Result_73125 = 0;
Ppgettok_73010(L_73123, Tok_73124);
Result_73125 = Parseexpr_73054(L_73123, Tok_73124);
if (!((*Tok_73124).Toktype == ((NU8) 94))) goto LA2;
Ppgettok_73010(L_73123, Tok_73124);
goto LA1;
LA2: ;
Lexmessage_70326(&(*L_73123), ((NU8) 21), ((NimStringDesc*) &TMP190715));
LA1: ;
return Result_73125;
}
N_NIMCALL(void, Doelse_73182)(TY70267* L_73185, TY70263* Tok_73186) {
if (!((Condstack_73136->Sup.len-1) < 0)) goto LA2;
Lexmessage_70326(&(*L_73185), ((NU8) 21), ((NimStringDesc*) &TMP190716));
LA2: ;
Ppgettok_73010(L_73185, Tok_73186);
if (!((*Tok_73186).Toktype == ((NU8) 94))) goto LA5;
Ppgettok_73010(L_73185, Tok_73186);
LA5: ;
if (!Condstack_73136->data[(Condstack_73136->Sup.len-1)]) goto LA8;
Jumptodirective_73176(L_73185, Tok_73186, ((NU8) 0));
LA8: ;
}
N_NIMCALL(void, Doelif_73198)(TY70267* L_73201, TY70263* Tok_73202) {
NIM_BOOL Res_73203;
NIM_BOOL LOC5;
Res_73203 = 0;
if (!((Condstack_73136->Sup.len-1) < 0)) goto LA2;
Lexmessage_70326(&(*L_73201), ((NU8) 21), ((NimStringDesc*) &TMP190716));
LA2: ;
Res_73203 = Evalppif_73120(L_73201, Tok_73202);
LOC5 = Condstack_73136->data[(Condstack_73136->Sup.len-1)];
if (LOC5) goto LA6;
LOC5 = !(Res_73203);
LA6: ;
if (!LOC5) goto LA7;
Jumptodirective_73176(L_73201, Tok_73202, ((NU8) 1));
goto LA4;
LA7: ;
Condstack_73136->data[(Condstack_73136->Sup.len-1)] = NIM_TRUE;
LA4: ;
}
N_NIMCALL(void, Doend_73153)(TY70267* L_73156, TY70263* Tok_73157) {
if (!((Condstack_73136->Sup.len-1) < 0)) goto LA2;
Lexmessage_70326(&(*L_73156), ((NU8) 21), ((NimStringDesc*) &TMP190716));
LA2: ;
Ppgettok_73010(L_73156, Tok_73157);
Condstack_73136 = (TY73135*) setLengthSeq(&(Condstack_73136)->Sup, sizeof(NIM_BOOL), (Condstack_73136->Sup.len-1));
}
N_NIMCALL(void, Jumptodirective_73176)(TY70267* L_73179, TY70263* Tok_73180, NU8 Dest_73181) {
NI Nestedifs_73212;
NIM_BOOL LOC3;
NU8 LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC14;
Nestedifs_73212 = 0;
Nestedifs_73212 = 0;
while (1) {
LOC3 = !(((*Tok_73180).Ident == NIM_NIL));
if (!(LOC3)) goto LA4;
LOC3 = eqStrings((*(*Tok_73180).Ident).S, ((NimStringDesc*) &TMP190713));
LA4: ;
if (!LOC3) goto LA5;
Ppgettok_73010(L_73179, Tok_73180);
LOC7 = Whichkeyword_66465((*Tok_73180).Ident);
switch (LOC7) {
case ((NU8) 26):
Nestedifs_73212 += 1;
break;
case ((NU8) 18):
LOC9 = (Dest_73181 == ((NU8) 1));
if (!(LOC9)) goto LA10;
LOC9 = (Nestedifs_73212 == 0);
LA10: ;
if (!LOC9) goto LA11;
Doelse_73182(L_73179, Tok_73180);
goto LA1;
LA11: ;
break;
case ((NU8) 17):
LOC14 = (Dest_73181 == ((NU8) 1));
if (!(LOC14)) goto LA15;
LOC14 = (Nestedifs_73212 == 0);
LA15: ;
if (!LOC14) goto LA16;
Doelif_73198(L_73179, Tok_73180);
goto LA1;
LA16: ;
break;
case ((NU8) 19):
if (!(Nestedifs_73212 == 0)) goto LA19;
Doend_73153(L_73179, Tok_73180);
goto LA1;
LA19: ;
if (!(0 < Nestedifs_73212)) goto LA22;
Nestedifs_73212 -= 1;
LA22: ;
break;
default:
break;
}
Ppgettok_73010(L_73179, Tok_73180);
goto LA2;
LA5: ;
if (!((*Tok_73180).Toktype == ((NU8) 1))) goto LA24;
Lexmessage_70326(&(*L_73179), ((NU8) 21), ((NimStringDesc*) &TMP190717));
goto LA2;
LA24: ;
Ppgettok_73010(L_73179, Tok_73180);
LA2: ;
} LA1: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI64)((NI64)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
N_NIMCALL(void, Parsedirective_73284)(TY70267* L_73287, TY70263* Tok_73288) {
NIM_BOOL Res_73289;
NimStringDesc* Key_73290;
NU8 LOC1;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
Res_73289 = 0;
Key_73290 = 0;
Ppgettok_73010(L_73287, Tok_73288);
LOC1 = Whichkeyword_66465((*Tok_73288).Ident);
switch (LOC1) {
case ((NU8) 26):
Condstack_73136 = (TY73135*) setLengthSeq(&(Condstack_73136)->Sup, sizeof(NIM_BOOL), (NI64)(Condstack_73136->Sup.len + 1));
Res_73289 = Evalppif_73120(L_73287, Tok_73288);
Condstack_73136->data[(Condstack_73136->Sup.len-1)] = Res_73289;
if (!!(Res_73289)) goto LA3;
Jumptodirective_73176(L_73287, Tok_73288, ((NU8) 1));
LA3: ;
break;
case ((NU8) 17):
Doelif_73198(L_73287, Tok_73288);
break;
case ((NU8) 18):
Doelse_73182(L_73287, Tok_73288);
break;
case ((NU8) 19):
Doend_73153(L_73287, Tok_73288);
break;
case ((NU8) 215):
Ppgettok_73010(L_73287, Tok_73288);
LOC5 = Toktostr_70323(Tok_73288);
Messageout_41550(LOC5);
Ppgettok_73010(L_73287, Tok_73288);
break;
case ((NU8) 216):
Ppgettok_73010(L_73287, Tok_73288);
Key_73290 = Toktostr_70323(Tok_73288);
Ppgettok_73010(L_73287, Tok_73288);
LOC6 = Toktostr_70323(Tok_73288);
Putenv_33439(Key_73290, LOC6);
Ppgettok_73010(L_73287, Tok_73288);
break;
case ((NU8) 217):
Ppgettok_73010(L_73287, Tok_73288);
Key_73290 = Toktostr_70323(Tok_73288);
Ppgettok_73010(L_73287, Tok_73288);
LOC8 = Toktostr_70323(Tok_73288);
LOC9 = Getenv_33425(Key_73290);
LOC7 = rawNewString(LOC8->Sup.len + LOC9->Sup.len + 0);
appendString(LOC7, LOC8);
appendString(LOC7, LOC9);
Putenv_33439(Key_73290, LOC7);
Ppgettok_73010(L_73287, Tok_73288);
break;
case ((NU8) 218):
Ppgettok_73010(L_73287, Tok_73288);
Key_73290 = Toktostr_70323(Tok_73288);
Ppgettok_73010(L_73287, Tok_73288);
LOC11 = Getenv_33425(Key_73290);
LOC12 = Toktostr_70323(Tok_73288);
LOC10 = rawNewString(LOC11->Sup.len + LOC12->Sup.len + 0);
appendString(LOC10, LOC11);
appendString(LOC10, LOC12);
Putenv_33439(Key_73290, LOC10);
Ppgettok_73010(L_73287, Tok_73288);
break;
default:
LOC13 = Toktostr_70323(Tok_73288);
Lexmessage_70326(&(*L_73287), ((NU8) 28), LOC13);
break;
}
}
N_NIMCALL(void, Conftok_73329)(TY70267* L_73332, TY70263* Tok_73333) {
NIM_BOOL LOC2;
Ppgettok_73010(L_73332, Tok_73333);
while (1) {
LOC2 = !(((*Tok_73333).Ident == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*(*Tok_73333).Ident).S, ((NimStringDesc*) &TMP190713));
LA3: ;
if (!LOC2) goto LA1;
Parsedirective_73284(L_73332, Tok_73333);
} LA1: ;
}
N_NIMCALL(void, Checksymbol_73346)(TY70267* L_73348, TY70263* Tok_73349) {
NimStringDesc* LOC4;
if (!!(((*Tok_73349).Toktype >= ((NU8) 2) && (*Tok_73349).Toktype <= ((NU8) 65) || (*Tok_73349).Toktype >= ((NU8) 74) && (*Tok_73349).Toktype <= ((NU8) 76)))) goto LA2;
LOC4 = Toktostr_70323(Tok_73349);
Lexmessage_70326(L_73348, ((NU8) 19), LOC4);
LA2: ;
}
N_NIMCALL(void, Parseassignment_73371)(TY70267* L_73374, TY70263* Tok_73375) {
NimStringDesc* S_73376;
NimStringDesc* Val_73377;
TY41532 Info_73378;
NIM_BOOL LOC2;
TY48011* LOC3;
TY48011* LOC5;
NimStringDesc* LOC9;
NimStringDesc* LOC13;
NIM_BOOL LOC18;
NimStringDesc* LOC25;
NIM_BOOL LOC27;
TY48011* LOC29;
NimStringDesc* LOC30;
S_73376 = 0;
Val_73377 = 0;
memset((void*)&Info_73378, 0, sizeof(Info_73378));
LOC3 = Getident_48016(((NimStringDesc*) &TMP190719));
LOC2 = ((*(*Tok_73375).Ident).Sup.Id == (*LOC3).Sup.Id);
if (LOC2) goto LA4;
LOC5 = Getident_48016(((NimStringDesc*) &TMP190720));
LOC2 = ((*(*Tok_73375).Ident).Sup.Id == (*LOC5).Sup.Id);
LA4: ;
if (!LOC2) goto LA6;
Conftok_73329(L_73374, Tok_73375);
LA6: ;
Info_73378 = Getlineinfo_70313(&(*L_73374));
Checksymbol_73346(&(*L_73374), Tok_73375);
S_73376 = Toktostr_70323(Tok_73375);
Conftok_73329(L_73374, Tok_73375);
Val_73377 = copyString(((NimStringDesc*) &TMP190721));
while (1) {
if (!((*Tok_73375).Toktype == ((NU8) 96))) goto LA8;
S_73376 = addChar(S_73376, 46);
Conftok_73329(L_73374, Tok_73375);
Checksymbol_73346(&(*L_73374), Tok_73375);
LOC9 = Toktostr_70323(Tok_73375);
S_73376 = resizeString(S_73376, LOC9->Sup.len + 0);
appendString(S_73376, LOC9);
Conftok_73329(L_73374, Tok_73375);
} LA8: ;
if (!((*Tok_73375).Toktype == ((NU8) 82))) goto LA11;
Conftok_73329(L_73374, Tok_73375);
Checksymbol_73346(&(*L_73374), Tok_73375);
LOC13 = Toktostr_70323(Tok_73375);
Val_73377 = resizeString(Val_73377, LOC13->Sup.len + 0);
appendString(Val_73377, LOC13);
Conftok_73329(L_73374, Tok_73375);
if (!((*Tok_73375).Toktype == ((NU8) 83))) goto LA15;
Conftok_73329(L_73374, Tok_73375);
goto LA14;
LA15: ;
Lexmessage_70326(&(*L_73374), ((NU8) 21), ((NimStringDesc*) &TMP190722));
LA14: ;
Val_73377 = addChar(Val_73377, 93);
LA11: ;
LOC18 = ((*Tok_73375).Toktype == ((NU8) 94));
if (LOC18) goto LA19;
LOC18 = ((*Tok_73375).Toktype == ((NU8) 95));
LA19: ;
if (!LOC18) goto LA20;
if (!(0 < Val_73377->Sup.len)) goto LA23;
Val_73377 = addChar(Val_73377, 58);
LA23: ;
Conftok_73329(L_73374, Tok_73375);
Checksymbol_73346(&(*L_73374), Tok_73375);
LOC25 = Toktostr_70323(Tok_73375);
Val_73377 = resizeString(Val_73377, LOC25->Sup.len + 0);
appendString(Val_73377, LOC25);
Conftok_73329(L_73374, Tok_73375);
while (1) {
LOC27 = !(((*Tok_73375).Ident == NIM_NIL));
if (!(LOC27)) goto LA28;
LOC29 = Getident_48016(((NimStringDesc*) &TMP190723));
LOC27 = ((*(*Tok_73375).Ident).Sup.Id == (*LOC29).Sup.Id);
LA28: ;
if (!LOC27) goto LA26;
Conftok_73329(L_73374, Tok_73375);
Checksymbol_73346(&(*L_73374), Tok_73375);
LOC30 = Toktostr_70323(Tok_73375);
Val_73377 = resizeString(Val_73377, LOC30->Sup.len + 0);
appendString(Val_73377, LOC30);
Conftok_73329(L_73374, Tok_73375);
} LA26: ;
LA20: ;
Processswitch_67012(S_73376, Val_73377, ((NU8) 2), Info_73378);
}
N_NIMCALL(void, Readconfigfile_73447)(NimStringDesc* Filename_73449) {
TY70267 L_73450;
TY70263* Tok_73451;
TY68013* Stream_73452;
memset((void*)&L_73450, 0, sizeof(L_73450));
L_73450.Sup.Sup.m_type = NTI70267;
Tok_73451 = 0;
Stream_73452 = 0;
Tok_73451 = (TY70263*) newObj(NTI70261, sizeof(TY70263));
(*Tok_73451).m_type = NTI70263;
Stream_73452 = Llstreamopen_68032(Filename_73449, ((NU8) 0));
if (!!((Stream_73452 == NIM_NIL))) goto LA2;
Openlexer_70298(&L_73450, Filename_73449, Stream_73452);
(*Tok_73451).Toktype = ((NU8) 1);
Conftok_73329(&L_73450, Tok_73451);
while (1) {
if (!!(((*Tok_73451).Toktype == ((NU8) 1)))) goto LA4;
Parseassignment_73371(&L_73450, Tok_73451);
} LA4: ;
if (!(0 < Condstack_73136->Sup.len)) goto LA6;
Lexmessage_70326(&L_73450, ((NU8) 21), ((NimStringDesc*) &TMP190717));
LA6: ;
Closelexer_70316(&L_73450);
if (!(1 <= Gverbosity_40083)) goto LA9;
Rawmessage_41553(((NU8) 233), Filename_73449);
LA9: ;
LA2: ;
}
N_NIMCALL(NimStringDesc*, Getconfigpath_73507)(NimStringDesc* Filename_73509) {
NimStringDesc* Result_73510;
NimStringDesc* LOC1;
NIM_BOOL LOC3;
TY67066 LOC6;
NIM_BOOL LOC8;
NimStringDesc* LOC11;
Result_73510 = 0;
LOC1 = nosgetConfigDir();
Result_73510 = nosJoinPath(LOC1, Filename_73509);
LOC3 = nosexistsFile(Result_73510);
if (!!(LOC3)) goto LA4;
LOC6[0] = Getprefixdir_40107();
LOC6[1] = copyString(((NimStringDesc*) &TMP190726));
LOC6[2] = copyString(Filename_73509);
Result_73510 = nosJoinPathOpenArray(LOC6, 3);
LOC8 = nosexistsFile(Result_73510);
if (!!(LOC8)) goto LA9;
LOC11 = rawNewString(Filename_73509->Sup.len + 5);
appendString(LOC11, ((NimStringDesc*) &TMP190727));
appendString(LOC11, Filename_73509);
Result_73510 = LOC11;
LA9: ;
LA4: ;
return Result_73510;
}
N_NIMCALL(void, Loadspecialconfig_73007)(NimStringDesc* Configfilename_73009) {
NimStringDesc* LOC4;
if (!!(((Gglobaloptions_40077 &(1<<((((NU8) 16))&31)))!=0))) goto LA2;
LOC4 = Getconfigpath_73507(Configfilename_73009);
Readconfigfile_73447(LOC4);
LA2: ;
}
N_NIMCALL(void, Loadconfig_73004)(NimStringDesc* Project_73006) {
NimStringDesc* Conffile_73540;
NimStringDesc* Prefix_73541;
NIM_BOOL LOC10;
NIM_BOOL LOC15;
Conffile_73540 = 0;
Prefix_73541 = 0;
if (!((Libpath_40110) && (Libpath_40110)->Sup.len == 0)) goto LA2;
Prefix_73541 = Getprefixdir_40107();
if (!eqStrings(Prefix_73541, ((NimStringDesc*) &TMP190683))) goto LA5;
asgnRefNoCycle((void**) &Libpath_40110, copyString(((NimStringDesc*) &TMP190684)));
goto LA4;
LA5: ;
if (!eqStrings(Prefix_73541, ((NimStringDesc*) &TMP190685))) goto LA7;
asgnRefNoCycle((void**) &Libpath_40110, copyString(((NimStringDesc*) &TMP190686)));
goto LA4;
LA7: ;
asgnRefNoCycle((void**) &Libpath_40110, nosJoinPath(Prefix_73541, ((NimStringDesc*) &TMP190687)));
LA4: ;
LA2: ;
Loadspecialconfig_73007(((NimStringDesc*) &TMP190728));
LOC10 = !(((Gglobaloptions_40077 &(1<<((((NU8) 17))&31)))!=0));
if (!(LOC10)) goto LA11;
LOC10 = !(((Project_73006) && (Project_73006)->Sup.len == 0));
LA11: ;
if (!LOC10) goto LA12;
Conffile_73540 = nosChangeFileExt(Project_73006, ((NimStringDesc*) &TMP190729));
LOC15 = nosexistsFile(Conffile_73540);
if (!LOC15) goto LA16;
Readconfigfile_73447(Conffile_73540);
LA16: ;
LA12: ;
}
N_NOINLINE(void, nimconfInit)(void) {
asgnRefNoCycle((void**) &Condstack_73136, (TY73135*) newSeq(NTI73135, 0));
}

