/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10202 TY10202;
typedef struct TNimType TNimType;
typedef struct TY10218 TY10218;
typedef struct TY10590 TY10590;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY49523 TY49523;
typedef struct TY148017 TY148017;
typedef struct TNimNode TNimNode;
typedef struct TY46008 TY46008;
typedef struct TY148034 TY148034;
typedef struct TY148011 TY148011;
typedef struct TY140077 TY140077;
typedef struct TY140075 TY140075;
typedef struct TY49549 TY49549;
typedef struct TY41532 TY41532;
typedef struct TY49545 TY49545;
typedef struct TY48011 TY48011;
typedef struct TY49517 TY49517;
typedef struct TY145007 TY145007;
typedef struct TNimObject TNimObject;
typedef struct TY78016 TY78016;
typedef struct TY78014 TY78014;
typedef struct TY78012 TY78012;
typedef struct TY48005 TY48005;
typedef struct TY49527 TY49527;
typedef struct TY49525 TY49525;
typedef struct TY49537 TY49537;
typedef struct TY49541 TY49541;
typedef struct TY49547 TY49547;
typedef struct TY37013 TY37013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY148011 {
TY140077* N;
TY46008* Refname;
TY46008* Header;
};
typedef TY46008* TY148013[21];
typedef TY46008* TY148044[5];
struct TY148017 {
NimStringDesc* Filename;
NimStringDesc* Basedir;
TY46008* Moddesc;
TY46008* Dependson;
NI Id;
NI Splitafter;
TY148034* Tocpart;
NIM_BOOL Hastoc;
TY148013 Toc;
TY148013 Section;
TY140077* Indexfile;
TY140077* Theindex;
NimStringDesc* Indexvalfilename;
NI Indent;
NI Verbatim;
TY148044 Meta;
};
struct TY140077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY140075* Sons;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
typedef TY46008* TY46446[1];
typedef TY46008* TY155568[4];
typedef TY46008* TY169860[2];
struct TNimObject {
TNimType* m_type;
};
struct TY145007 {
  TNimObject Sup;
NU8 Kind;
NI Start;
NI Length;
NCSTRING Buf;
NI Pos;
NU8 State;
};
typedef NimStringDesc* TY145060[33];
struct TY78012 {
NU8 Kind;
NI16 Length;
};
struct TY78016 {
NI Indent;
NI Linelen;
NI Pos;
NI Idx;
TY78014* Tokens;
NimStringDesc* Buf;
NI Pendingnl;
TY49517* Comstack;
NU8 Flags;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
typedef NimStringDesc* TY70146[109];
typedef NimStringDesc* TY42018[4];
typedef NimStringDesc* TY41865[1];
typedef NimStringDesc* TY150604[6];
typedef TY46008* TY156309[6];
typedef NimStringDesc* TY150623[8];
typedef TY46008* TY156826[8];
typedef NIM_CHAR TY149336[9];
typedef TY46008* TY154033[3];
typedef NI TY8214[16];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
struct TY148034 {
  TGenericSeq Sup;
  TY148011 data[SEQ_DECL_SIZE];
};
struct TY140075 {
  TGenericSeq Sup;
  TY140077* data[SEQ_DECL_SIZE];
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
struct TY78014 {
  TGenericSeq Sup;
  TY78012 data[SEQ_DECL_SIZE];
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(TY49523*, Parsefile_85031)(NimStringDesc* Filename_85033);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_32844, NimStringDesc* Ext_32845);
N_NIMCALL(TY148017*, Newdocumentor_148162)(NimStringDesc* Filename_148164);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
N_NIMCALL(NimStringDesc*, Getconfigvar_40133)(NimStringDesc* Key_40135);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* S_23504);
N_NIMCALL(void, Initindexfile_148132)(TY148017* D_148134);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_32820, NimStringDesc* Ext_32821);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* Path_32585);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* Filename_30804);
N_NIMCALL(TY140077*, Rstparse_140082)(NimStringDesc* Text_140084, NIM_BOOL Skippounds_140085, NimStringDesc* Filename_140086, NI Line_140087, NI Column_140088, NIM_BOOL* Hastoc_140090);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(TY140077*, Findindexnode_148048)(TY140077* N_148050);
N_NIMCALL(TY140077*, Newrstnode_140094)(NU8 Kind_140096);
N_NIMCALL(NI, Rsonslen_140091)(TY140077* N_140093);
N_NIMCALL(void, Rawmessage_41553)(NU8 Msg_41555, NimStringDesc* Arg_41556);
N_NIMCALL(void, Clearindex_140126)(TY140077* Index_140128, NimStringDesc* Filename_140129);
N_NIMCALL(void, Addson_140101)(TY140077* Father_140103, TY140077* Son_140104);
N_NIMCALL(TY140077*, Newrstnode_140097)(NU8 Kind_140099, NimStringDesc* S_140100);
N_NIMCALL(void, Generatedoc_150108)(TY148017* D_150110, TY49523* N_150111);
N_NIMCALL(void, App_46031)(TY46008** A_46034, TY46008* B_46035);
N_NIMCALL(TY46008*, Gencomment_148718)(TY148017* D_148720, TY49523* N_148721);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_23769, NimStringDesc* Prefix_23770);
N_NIMCALL(TY46008*, Renderrsttoout_148612)(TY148017* D_148614, TY140077* N_148615);
N_NIMCALL(TY46008*, Renderaux_148616)(TY148017* D_148618, TY140077* N_148619, NimStringDesc* Outer_148620);
N_NIMCALL(TY46008*, Ropef_46069)(NimStringDesc* Frmt_46071, TY46008** Args_46073, NI Args_46073Len0);
N_NIMCALL(TY46008*, Renderheadline_149180)(TY148017* D_149182, TY140077* N_149183);
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_140105)(TY140077* N_140107);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(TY46008*, Dispf_148579)(NimStringDesc* Xml_148581, NimStringDesc* Tex_148582, TY46008** Args_148584, NI Args_148584Len0);
N_NIMCALL(TY46008*, Torope_46052)(NI64 I_46054);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(TY46008*, Renderoverline_149250)(TY148017* D_149252, TY140077* N_149253);
N_NIMCALL(NimStringDesc*, Disp_148565)(NimStringDesc* Xml_148567, NimStringDesc* Tex_148568);
N_NIMCALL(TY46008*, Renderfield_149873)(TY148017* D_149875, TY140077* N_149876);
N_NIMCALL(NimStringDesc*, Addnodes_140108)(TY140077* N_140110);
N_NIMCALL(NimStringDesc*, Esc_148505)(NimStringDesc* S_148507, NI Splitafter_148508);
N_NIMCALL(NI, Nextsplitpoint_148455)(NimStringDesc* S_148457, NI Start_148458);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_16982, NI Addlen_16983);
N_NIMCALL(void, Escchar_148441)(NimStringDesc** Dest_148444, NIM_CHAR C_148445);
N_NIMCALL(void, Addxmlchar_148426)(NimStringDesc** Dest_148429, NIM_CHAR C_148430);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Addtexchar_148436)(NimStringDesc** Dest_148439, NIM_CHAR C_148440);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_22981, NIM_BOOL Leading_22982, NIM_BOOL Trailing_22983);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_22638, NimStringDesc* B_22639);
N_NIMCALL(void, Internalerror_41571)(NimStringDesc* Errmsg_41573);
N_NIMCALL(NimStringDesc*, Texcolumns_149855)(TY140077* N_149857);
N_NIMCALL(void, Dispa_148595)(TY46008** Dest_148598, NimStringDesc* Xml_148599, NimStringDesc* Tex_148600, TY46008** Args_148602, NI Args_148602Len0);
N_NIMCALL(void, Appf_46074)(TY46008** C_46077, NimStringDesc* Frmt_46078, TY46008** Args_46080, NI Args_46080Len0);
N_NIMCALL(TY140077*, Lastson_140667)(TY140077* N_140669);
N_NIMCALL(TY46008*, Renderimage_149713)(TY148017* D_149715, TY140077* N_149716);
N_NIMCALL(NimStringDesc*, Getfieldvalue_140111)(TY140077* N_140113, NimStringDesc* Fieldname_140114);
N_NIMCALL(TY46008*, Fieldaux_149709)(NimStringDesc* S_149711);
N_NIMCALL(NimStringDesc*, Getargument_140115)(TY140077* N_140117);
N_NIMCALL(TY46008*, Rendercodeblock_149767)(TY148017* D_149769, TY140077* N_149770);
N_NIMCALL(NU8, Getsourcelanguage_145102)(NimStringDesc* Name_145104);
N_NIMCALL(void, Initgeneraltokenizer_145105)(TY145007* G_145108, NimStringDesc* Buf_145109);
N_NIMCALL(void, Getnexttoken_145114)(TY145007* G_145117, NU8 Lang_145118);
N_NIMCALL(void, App_46036)(TY46008** A_46039, NimStringDesc* B_46040);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1752, NI First_1753, NI Last_1754);
N_NIMCALL(void, Deinitgeneraltokenizer_145110)(TY145007* G_145113);
N_NIMCALL(TY46008*, Rendercontainer_149830)(TY148017* D_149832, TY140077* N_149833);
N_NIMCALL(TY46008*, Renderindexterm_148677)(TY148017* D_148679, TY140077* N_148680);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17603);
N_NIMCALL(void, Setindexpair_140118)(TY140077* Index_140120, TY140077* Key_140121, TY140077* Val_140122);
N_NIMCALL(NimStringDesc*, Tofilename_41579)(TY41532 Info_41581);
N_NIMCALL(NI, Tolinenumber_41585)(TY41532 Info_41587);
N_NIMCALL(NI, Tocolumn_41582)(TY41532 Info_41584);
N_NIMCALL(void, Genitem_149074)(TY148017* D_149076, TY49523* N_149077, TY49523* Namenode_149078, NU8 K_149079);
N_NIMCALL(NIM_BOOL, Isvisible_148801)(TY49523* N_148803);
N_NIMCALL(NI, Sonslen_49801)(TY49523* N_49803);
N_NIMCALL(NimStringDesc*, Getname_148929)(TY49523* N_148931, NI Splitafter_148932);
N_NIMCALL(void, Internalerror_41567)(TY41532 Info_41569, NimStringDesc* Errmsg_41570);
N_NIMCALL(TY46008*, Genreccomment_148725)(TY148017* D_148727, TY49523* N_148728);
N_NIMCALL(void, Inittokrender_78048)(TY78016* R_78051, TY49523* N_78052, NU8 Renderflags_78055);
N_NIMCALL(void, Getnexttok_78056)(TY78016* R_78059, NU8* Kind_78061, NimStringDesc** Literal_78063);
N_NIMCALL(TY46008*, Ropeformatnamedvars_148220)(NimStringDesc* Frmt_148222, NimStringDesc** Varnames_148224, NI Varnames_148224Len0, TY46008** Varvalues_148226, NI Varvalues_148226Len0);
N_NIMCALL(NI, Getvaridx_148198)(NimStringDesc** Varnames_148201, NI Varnames_148201Len0, NimStringDesc* Id_148202);
N_NIMCALL(void, Setindexforsourceterm_148641)(TY148017* D_148643, TY140077* Name_148644, NI Id_148645);
N_NIMCALL(TY140077*, Getrstname_149010)(TY49523* N_149012);
N_NIMCALL(TY49523*, Lastson_49807)(TY49523* N_49809);
N_NIMCALL(void, Writerope_46058)(TY46008* Head_46060, NimStringDesc* Filename_46061);
N_NIMCALL(TY46008*, Genoutfile_150511)(TY148017* D_150513);
N_NIMCALL(TY46008*, Rendertocentries_149674)(TY148017* D_149676, NI* J_149678, NI Lvl_149679);
N_NIMCALL(TY46008*, Rendertocentry_149665)(TY148017* D_149667, TY148011 E_149668);
N_NIMCALL(void, Gensection_150447)(TY148017* D_150449, NU8 Kind_150450);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_1748, NI First_1749);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_17979, TNimType* Typ_17980);
N_NIMCALL(NimStringDesc*, ntgetDateStr)(void);
N_NIMCALL(NimStringDesc*, ntgetClockStr)(void);
N_NIMCALL(NimStringDesc*, Getoutfile_40143)(NimStringDesc* Filename_40145, NimStringDesc* Ext_40146);
N_NIMCALL(void, Generateindex_150637)(TY148017* D_150639);
N_NIMCALL(void, Sortindex_140123)(TY140077* A_140125);
N_NIMCALL(TY46008*, Renderrsttorst_149306)(TY148017* D_149308, TY140077* N_149309);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_23750, NIM_CHAR C_23751);
N_NIMCALL(TY46008*, Renderrstsons_149310)(TY148017* D_149312, TY140077* N_149313);
N_NIMCALL(NI, Ropelen_46055)(TY46008* A_46057);
N_NIMCALL(void, Commandrstaux_150667)(NimStringDesc* Filename_150669, NimStringDesc* Outext_150670);
STRING_LITERAL(TMP148047, "<wbr />", 7);
STRING_LITERAL(TMP192083, "nim", 3);
STRING_LITERAL(TMP192090, "split.item.toc", 14);
STRING_LITERAL(TMP192091, "txt", 3);
STRING_LITERAL(TMP192092, "html", 4);
STRING_LITERAL(TMP192159, "Index", 5);
STRING_LITERAL(TMP192160, "##", 2);
STRING_LITERAL(TMP192161, "$1", 2);
STRING_LITERAL(TMP192162, "<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2_toc\">$3</a></h$1>", 63);
STRING_LITERAL(TMP192163, "\\rsth$4{$3}\\label{$2}$n", 23);
STRING_LITERAL(TMP192164, "", 0);
STRING_LITERAL(TMP192165, "<h$1 id=\"$2\">$3</h$1>", 21);
STRING_LITERAL(TMP192166, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP192167, "\\rstov$4{$3}\\label{$2}$n", 24);
STRING_LITERAL(TMP192168, "<hr />\015\012", 8);
STRING_LITERAL(TMP192169, "\\hrule\015\012", 8);
STRING_LITERAL(TMP192170, "<p>$1</p>\015\012", 11);
STRING_LITERAL(TMP192171, "$1$n$n", 6);
STRING_LITERAL(TMP192172, "<ul class=\"simple\">$1</ul>\015\012", 28);
STRING_LITERAL(TMP192173, "\\begin{itemize}$1\\end{itemize}\015\012", 32);
STRING_LITERAL(TMP192174, "<li>$1</li>\015\012", 13);
STRING_LITERAL(TMP192175, "\\item $1\015\012", 10);
STRING_LITERAL(TMP192176, "<ol class=\"simple\">$1</ol>\015\012", 28);
STRING_LITERAL(TMP192177, "\\begin{enumerate}$1\\end{enumerate}\015\012", 36);
STRING_LITERAL(TMP192178, "<dl class=\"docutils\">$1</dl>\015\012", 30);
STRING_LITERAL(TMP192179, "\\begin{description}$1\\end{description}\015\012", 40);
STRING_LITERAL(TMP192180, "<dt>$1</dt>\015\012", 13);
STRING_LITERAL(TMP192181, "\\item[$1] ", 10);
STRING_LITERAL(TMP192182, "<dd>$1</dd>\015\012", 13);
STRING_LITERAL(TMP192183, "$1\015\012", 4);
STRING_LITERAL(TMP192184, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP192185, " ", 1);
STRING_LITERAL(TMP192186, "&amp;", 5);
STRING_LITERAL(TMP192187, "&lt;", 4);
STRING_LITERAL(TMP192188, "&gt;", 4);
STRING_LITERAL(TMP192189, "&quot;", 6);
STRING_LITERAL(TMP192190, "\\_", 2);
STRING_LITERAL(TMP192191, "\\symbol{123}", 12);
STRING_LITERAL(TMP192192, "\\symbol{125}", 12);
STRING_LITERAL(TMP192193, "\\symbol{91}", 11);
STRING_LITERAL(TMP192194, "\\symbol{93}", 11);
STRING_LITERAL(TMP192195, "\\symbol{92}", 11);
STRING_LITERAL(TMP192196, "\\$", 2);
STRING_LITERAL(TMP192197, "\\&", 2);
STRING_LITERAL(TMP192198, "\\#", 2);
STRING_LITERAL(TMP192199, "\\%", 2);
STRING_LITERAL(TMP192200, "\\symbol{126}", 12);
STRING_LITERAL(TMP192201, "\\symbol{64}", 11);
STRING_LITERAL(TMP192202, "\\symbol{94}", 11);
STRING_LITERAL(TMP192203, "\\symbol{96}", 11);
STRING_LITERAL(TMP192204, "author", 6);
STRING_LITERAL(TMP192205, "version", 7);
STRING_LITERAL(TMP192206, "<tr>$1</tr>$n", 13);
STRING_LITERAL(TMP192207, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP192208, "\\item[$1:]", 10);
STRING_LITERAL(TMP192209, "<td>$1</td>", 11);
STRING_LITERAL(TMP192210, " $1$n", 5);
STRING_LITERAL(TMP192211, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP192212, "\\begin{description}$n$1\\end{description}\015\012", 42);
STRING_LITERAL(TMP192213, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP192214, "\\item[$1]", 9);
STRING_LITERAL(TMP192215, "<td align=\"left\">$1</td>$n", 26);
STRING_LITERAL(TMP192216, "renderRstToOut", 14);
STRING_LITERAL(TMP192217, "<pre>$1</pre>$n", 15);
STRING_LITERAL(TMP192218, "\\begin{rstpre}$n$1$n\\end{rstpre}$n", 34);
STRING_LITERAL(TMP192219, "<p>$1</p>", 9);
STRING_LITERAL(TMP192220, "$1<br />", 8);
STRING_LITERAL(TMP192221, "$1\\\\$n", 6);
STRING_LITERAL(TMP192222, "<blockquote><p>$1</p></blockquote>$n", 36);
STRING_LITERAL(TMP192223, "\\begin{quote}$1\\end{quote}$n", 28);
STRING_LITERAL(TMP192224, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP192225, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP192226, "|X", 2);
STRING_LITERAL(TMP192227, "|}$n\\hline$n$1\\end{rsttab}\\end{table}", 37);
STRING_LITERAL(TMP192228, " & $1", 5);
STRING_LITERAL(TMP192229, "$1\\\\$n\\hline$n", 14);
STRING_LITERAL(TMP192230, "<th>$1</th>", 11);
STRING_LITERAL(TMP192231, "\\textbf{$1}", 11);
STRING_LITERAL(TMP192232, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP192233, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP192234, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP192235, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP192236, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP192237, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP192238, "scale", 5);
STRING_LITERAL(TMP192239, " scale=\"$1\"", 11);
STRING_LITERAL(TMP192240, " scale=$1", 9);
STRING_LITERAL(TMP192241, "height", 6);
STRING_LITERAL(TMP192242, " height=\"$1\"", 12);
STRING_LITERAL(TMP192243, " height=$1", 10);
STRING_LITERAL(TMP192244, "width", 5);
STRING_LITERAL(TMP192245, " width=\"$1\"", 11);
STRING_LITERAL(TMP192246, " width=$1", 9);
STRING_LITERAL(TMP192247, "alt", 3);
STRING_LITERAL(TMP192248, " alt=\"$1\"", 9);
STRING_LITERAL(TMP192249, "align", 5);
STRING_LITERAL(TMP192250, " align=\"$1\"", 11);
STRING_LITERAL(TMP192251, "[$1]", 4);
STRING_LITERAL(TMP192252, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP192253, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP192254, "renderCodeBlock", 15);
STRING_LITERAL(TMP192370, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP192371, "\\span$2{$1}", 11);
extern NIM_CONST TY145060 Tokenclasstostr_145059;
STRING_LITERAL(TMP192372, "<pre>$1</pre>", 13);
STRING_LITERAL(TMP192373, "<div>$1</div>", 13);
STRING_LITERAL(TMP192374, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP192375, "$2", 2);
STRING_LITERAL(TMP192376, "|$1|", 4);
STRING_LITERAL(TMP192377, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP192378, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP192379, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP192380, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP192381, "<em>$1</em>", 11);
STRING_LITERAL(TMP192382, "\\emph{$1}", 9);
STRING_LITERAL(TMP192383, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP192384, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP192385, "<em id=\"$1\">$2</em>", 19);
STRING_LITERAL(TMP192386, "$2\\label{$1}", 12);
STRING_LITERAL(TMP192387, "#", 1);
STRING_LITERAL(TMP192388, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP192389, "\\texttt{$1}", 11);
STRING_LITERAL(TMP192390, "`", 1);
STRING_LITERAL(TMP192391, "getName()", 9);
STRING_LITERAL(TMP192392, "<span class=\"Comment\">$1</span>", 31);
STRING_LITERAL(TMP192393, "\\spanComment{$1}", 16);
STRING_LITERAL(TMP192394, "<span class=\"Keyword\">$1</span>", 31);
STRING_LITERAL(TMP192395, "\\spanKeyword{$1}", 16);
STRING_LITERAL(TMP192396, "<span class=\"Operator\">$1</span>", 32);
STRING_LITERAL(TMP192397, "\\spanOperator{$1}", 17);
STRING_LITERAL(TMP192398, "<span class=\"StringLit\">$1</span>", 33);
STRING_LITERAL(TMP192399, "\\spanStringLit{$1}", 18);
STRING_LITERAL(TMP192400, "<span class=\"CharLit\">$1</span>", 31);
STRING_LITERAL(TMP192401, "\\spanCharLit{$1}", 16);
STRING_LITERAL(TMP192402, "<span class=\"DecNumber\">$1</span>", 33);
STRING_LITERAL(TMP192403, "\\spanDecNumber{$1}", 18);
STRING_LITERAL(TMP192404, "<span class=\"FloatNumber\">$1</span>", 35);
STRING_LITERAL(TMP192405, "\\spanFloatNumber{$1}", 20);
STRING_LITERAL(TMP192406, "<span class=\"Identifier\">$1</span>", 34);
STRING_LITERAL(TMP192407, "\\spanIdentifier{$1}", 19);
STRING_LITERAL(TMP192408, "<span class=\"Other\">$1</span>", 29);
STRING_LITERAL(TMP192409, "\\spanOther{$1}", 14);
STRING_LITERAL(TMP192410, "docgen.genThing(", 16);
extern NIM_CONST TY70146 Toktypetostr_70145;
STRING_LITERAL(TMP192411, "$", 1);
STRING_LITERAL(TMP192412, "ropeFormatNamedVars", 19);
STRING_LITERAL(TMP192413, "}", 1);
STRING_LITERAL(TMP192414, "doc.item", 8);
STRING_LITERAL(TMP192416, "name", 4);
STRING_LITERAL(TMP192417, "header", 6);
STRING_LITERAL(TMP192418, "desc", 4);
STRING_LITERAL(TMP192419, "itemID", 6);
NIM_CONST TY42018 TMP192415 = {((NimStringDesc*) &TMP192416),
((NimStringDesc*) &TMP192417),
((NimStringDesc*) &TMP192418),
((NimStringDesc*) &TMP192419)}
;
STRING_LITERAL(TMP192420, "doc.item.toc", 12);
STRING_LITERAL(TMP192421, "getRstName()", 12);
STRING_LITERAL(TMP192422, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>$n", 61);
STRING_LITERAL(TMP192423, "\\item\\label{$1_toc} $2\\ref{$1}$n", 32);
STRING_LITERAL(TMP192424, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP192425, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP192426, "doc.section", 11);
STRING_LITERAL(TMP192428, "sectionid", 9);
STRING_LITERAL(TMP192429, "sectionTitle", 12);
STRING_LITERAL(TMP192430, "sectionTitleID", 14);
STRING_LITERAL(TMP192431, "content", 7);
NIM_CONST TY42018 TMP192427 = {((NimStringDesc*) &TMP192428),
((NimStringDesc*) &TMP192429),
((NimStringDesc*) &TMP192430),
((NimStringDesc*) &TMP192431)}
;
STRING_LITERAL(TMP192432, "doc.section.toc", 15);
STRING_LITERAL(TMP192433, "doc.toc", 7);
NIM_CONST TY41865 TMP192434 = {((NimStringDesc*) &TMP192431)}
;
STRING_LITERAL(TMP192435, "Module ", 7);
STRING_LITERAL(TMP192436, "doc.body_toc", 12);
STRING_LITERAL(TMP192437, "doc.body_no_toc", 15);
STRING_LITERAL(TMP192439, "title", 5);
STRING_LITERAL(TMP192440, "tableofcontents", 15);
STRING_LITERAL(TMP192441, "moduledesc", 10);
STRING_LITERAL(TMP192442, "date", 4);
STRING_LITERAL(TMP192443, "time", 4);
NIM_CONST TY150604 TMP192438 = {((NimStringDesc*) &TMP192439),
((NimStringDesc*) &TMP192440),
((NimStringDesc*) &TMP192441),
((NimStringDesc*) &TMP192442),
((NimStringDesc*) &TMP192443),
((NimStringDesc*) &TMP192431)}
;
STRING_LITERAL(TMP192444, "doc.file", 8);
NIM_CONST TY150623 TMP192445 = {((NimStringDesc*) &TMP192439),
((NimStringDesc*) &TMP192440),
((NimStringDesc*) &TMP192441),
((NimStringDesc*) &TMP192442),
((NimStringDesc*) &TMP192443),
((NimStringDesc*) &TMP192431),
((NimStringDesc*) &TMP192204),
((NimStringDesc*) &TMP192205)}
;
NIM_CONST TY149336 Lvltochar_149335 = {33,
61,
45,
126,
96,
60,
42,
124,
43}
;
STRING_LITERAL(TMP192446, "$n$1$2$n$1$3", 12);
extern NIM_CONST TY149336 Lvltochar_149335;
STRING_LITERAL(TMP192447, "$n$1$3$n$1$2$n$1$3", 18);
STRING_LITERAL(TMP192448, "$n$n$1$2$n$n", 12);
STRING_LITERAL(TMP192449, "$n$n$1$2", 8);
STRING_LITERAL(TMP192450, "$n$1* $2", 8);
STRING_LITERAL(TMP192451, "$n$1(#) $2", 10);
STRING_LITERAL(TMP192452, "$n$1  $2", 8);
STRING_LITERAL(TMP192453, "$n$1:$2:$3$4", 12);
STRING_LITERAL(TMP192454, "$n$1| $2", 8);
STRING_LITERAL(TMP192455, "`$1`_", 5);
STRING_LITERAL(TMP192456, "`$1 <$2>`_", 10);
STRING_LITERAL(TMP192457, "`$1`:$2:", 8);
STRING_LITERAL(TMP192458, "`$1`:sub:", 9);
STRING_LITERAL(TMP192459, "`$1`:sup:", 9);
STRING_LITERAL(TMP192460, "`$1`:idx:", 9);
STRING_LITERAL(TMP192461, "*$1*", 4);
STRING_LITERAL(TMP192462, "**$1**", 6);
STRING_LITERAL(TMP192463, "`$1`", 4);
STRING_LITERAL(TMP192464, "``$1``", 6);
STRING_LITERAL(TMP192465, "\\", 1);
STRING_LITERAL(TMP192466, "\\\\", 2);
STRING_LITERAL(TMP192467, "$n$n$1.. index::$n$2", 20);
STRING_LITERAL(TMP192468, "$n$n$1.. contents::", 19);
STRING_LITERAL(TMP192470, "\\-", 2);
STRING_LITERAL(TMP192471, "tex", 3);
NimStringDesc* Splitter_148046;
extern TY10590 Gch_10608;
extern TNimType* NTI148019; /* PDoc */
extern TNimType* NTI148034; /* seq[TTocEntry] */
extern NimStringDesc* Gindexfile_40081;
extern NU8 Gcmd_40082;
extern TNimType* NTI145007; /* TGeneralTokenizer */
extern TNimType* NTI49174; /* TSymKind */
extern NU32 Gglobaloptions_40077;
extern TNimType* NTI140008; /* TRstNodeKind */
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_10624))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI32)((NU32)((*C_11418).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI32)((NU32)((*C_11419).Refcount) - (NU32)(8));
if (!((NU32)((*C_11419).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(TY148017*, Newdocumentor_148162)(NimStringDesc* Filename_148164) {
TY148017* Result_148165;
NimStringDesc* S_148197;
Result_148165 = 0;
Result_148165 = (TY148017*) newObj(NTI148019, sizeof(TY148017));
asgnRefNoCycle((void**) &(*Result_148165).Tocpart, (TY148034*) newSeq(NTI148034, 0));
asgnRefNoCycle((void**) &(*Result_148165).Filename, copyString(Filename_148164));
(*Result_148165).Id = 100;
(*Result_148165).Splitafter = 20;
S_148197 = 0;
S_148197 = Getconfigvar_40133(((NimStringDesc*) &TMP192090));
if (!!(((S_148197) && (S_148197)->Sup.len == 0))) goto LA2;
(*Result_148165).Splitafter = nsuParseInt(S_148197);
LA2: ;
return Result_148165;
}
N_NIMCALL(TY140077*, Findindexnode_148048)(TY140077* N_148050) {
TY140077* Result_148051;
NI I_148114;
NI HEX3Atmp_148127;
NI LOC11;
NI Res_148129;
Result_148051 = 0;
if (!(N_148050 == NIM_NIL)) goto LA2;
Result_148051 = NIM_NIL;
goto LA1;
LA2: ;
if (!((*N_148050).Kind == ((NU8) 51))) goto LA4;
Result_148051 = (*N_148050).Sons->data[2];
if (!(Result_148051 == NIM_NIL)) goto LA7;
Result_148051 = Newrstnode_140094(((NU8) 9));
asgnRefNoCycle((void**) &(*N_148050).Sons->data[2], Result_148051);
goto LA6;
LA7: ;
if (!((*Result_148051).Kind == ((NU8) 0))) goto LA9;
Result_148051 = (*Result_148051).Sons->data[0];
goto LA6;
LA9: ;
LA6: ;
goto LA1;
LA4: ;
Result_148051 = NIM_NIL;
I_148114 = 0;
HEX3Atmp_148127 = 0;
LOC11 = Rsonslen_140091(N_148050);
HEX3Atmp_148127 = (NI32)(LOC11 - 1);
Res_148129 = 0;
Res_148129 = 0;
while (1) {
if (!(Res_148129 <= HEX3Atmp_148127)) goto LA12;
I_148114 = Res_148129;
Result_148051 = Findindexnode_148048((*N_148050).Sons->data[I_148114]);
if (!!((Result_148051 == NIM_NIL))) goto LA14;
goto BeforeRet;
LA14: ;
Res_148129 += 1;
} LA12: ;
LA1: ;
BeforeRet: ;
return Result_148051;
}
N_NIMCALL(void, Initindexfile_148132)(TY148017* D_148134) {
TY140077* H_148135;
NIM_BOOL Dummyhastoc_148136;
NimStringDesc* LOC4;
NIM_BOOL LOC6;
NimStringDesc* LOC9;
NIM_BOOL LOC11;
TY140077* LOC15;
H_148135 = 0;
Dummyhastoc_148136 = 0;
if (!(Gindexfile_40081->Sup.len == 0)) goto LA2;
goto BeforeRet;
LA2: ;
asgnRefNoCycle((void**) &Gindexfile_40081, nosaddFileExt(Gindexfile_40081, ((NimStringDesc*) &TMP192091)));
LOC4 = nosextractFilename((*D_148134).Filename);
asgnRefNoCycle((void**) &(*D_148134).Indexvalfilename, nosChangeFileExt(LOC4, ((NimStringDesc*) &TMP192092)));
LOC6 = nosexistsFile(Gindexfile_40081);
if (!LOC6) goto LA7;
LOC9 = Readfile_3647(Gindexfile_40081);
asgnRefNoCycle((void**) &(*D_148134).Indexfile, Rstparse_140082(LOC9, NIM_FALSE, Gindexfile_40081, 0, 1, &Dummyhastoc_148136));
asgnRefNoCycle((void**) &(*D_148134).Theindex, Findindexnode_148048((*D_148134).Indexfile));
LOC11 = ((*D_148134).Theindex == NIM_NIL);
if (LOC11) goto LA12;
LOC11 = !(((*(*D_148134).Theindex).Kind == ((NU8) 9)));
LA12: ;
if (!LOC11) goto LA13;
Rawmessage_41553(((NU8) 188), Gindexfile_40081);
LA13: ;
Clearindex_140126((*D_148134).Theindex, (*D_148134).Indexvalfilename);
goto LA5;
LA7: ;
asgnRefNoCycle((void**) &(*D_148134).Indexfile, Newrstnode_140094(((NU8) 0)));
H_148135 = Newrstnode_140094(((NU8) 2));
(*H_148135).Level = 1;
LOC15 = Newrstnode_140097(((NU8) 62), ((NimStringDesc*) &TMP192159));
Addson_140101(H_148135, LOC15);
Addson_140101((*D_148134).Indexfile, H_148135);
H_148135 = Newrstnode_140094(((NU8) 51));
Addson_140101(H_148135, NIM_NIL);
Addson_140101(H_148135, NIM_NIL);
asgnRefNoCycle((void**) &(*D_148134).Theindex, Newrstnode_140094(((NU8) 9)));
Addson_140101(H_148135, (*D_148134).Theindex);
Addson_140101((*D_148134).Indexfile, H_148135);
LA5: ;
BeforeRet: ;
}
N_NIMCALL(TY46008*, Renderaux_148616)(TY148017* D_148618, TY140077* N_148619, NimStringDesc* Outer_148620) {
TY46008* Result_148621;
NI I_148629;
NI HEX3Atmp_148636;
NI LOC1;
NI Res_148638;
TY46008* LOC3;
TY46446 LOC4;
Result_148621 = 0;
Result_148621 = NIM_NIL;
I_148629 = 0;
HEX3Atmp_148636 = 0;
LOC1 = Rsonslen_140091(N_148619);
HEX3Atmp_148636 = (NI32)(LOC1 - 1);
Res_148638 = 0;
Res_148638 = 0;
while (1) {
if (!(Res_148638 <= HEX3Atmp_148636)) goto LA2;
I_148629 = Res_148638;
LOC3 = Renderrsttoout_148612(D_148618, (*N_148619).Sons->data[I_148629]);
App_46031(&Result_148621, LOC3);
Res_148638 += 1;
} LA2: ;
LOC4[0] = Result_148621;
Result_148621 = Ropef_46069(Outer_148620, LOC4, 1);
return Result_148621;
}
N_NIMCALL(TY46008*, Dispf_148579)(NimStringDesc* Xml_148581, NimStringDesc* Tex_148582, TY46008** Args_148584, NI Args_148584Len0) {
TY46008* Result_148585;
Result_148585 = 0;
if (!!((Gcmd_40082 == ((NU8) 15)))) goto LA2;
Result_148585 = Ropef_46069(Xml_148581, Args_148584, Args_148584Len0);
goto LA1;
LA2: ;
Result_148585 = Ropef_46069(Tex_148582, Args_148584, Args_148584Len0);
LA1: ;
return Result_148585;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010) {
(*Dest_17009).data[((*Dest_17009).Sup.len)-0] = C_17010;
(*Dest_17009).data[((NI32)((*Dest_17009).Sup.len + 1))-0] = 0;
(*Dest_17009).Sup.len += 1;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI32)((NI32)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
N_NIMCALL(TY46008*, Renderheadline_149180)(TY148017* D_149182, TY140077* N_149183) {
TY46008* Result_149184;
NI I_149192;
NI HEX3Atmp_149245;
NI LOC1;
NI Res_149247;
TY46008* LOC3;
TY46008* Refname_149194;
NimStringDesc* LOC4;
NI Length_149205;
TY155568 LOC8;
NimStringDesc* LOC9;
TY155568 LOC10;
NimStringDesc* LOC11;
Result_149184 = 0;
Result_149184 = NIM_NIL;
I_149192 = 0;
HEX3Atmp_149245 = 0;
LOC1 = Rsonslen_140091(N_149183);
HEX3Atmp_149245 = (NI32)(LOC1 - 1);
Res_149247 = 0;
Res_149247 = 0;
while (1) {
if (!(Res_149247 <= HEX3Atmp_149245)) goto LA2;
I_149192 = Res_149247;
LOC3 = Renderrsttoout_148612(D_149182, (*N_149183).Sons->data[I_149192]);
App_46031(&Result_149184, LOC3);
Res_149247 += 1;
} LA2: ;
Refname_149194 = 0;
LOC4 = Rstnodetorefname_140105(N_149183);
Refname_149194 = Torope_46046(LOC4);
if (!(*D_149182).Hastoc) goto LA6;
Length_149205 = 0;
Length_149205 = (*D_149182).Tocpart->Sup.len;
(*D_149182).Tocpart = (TY148034*) setLengthSeq(&((*D_149182).Tocpart)->Sup, sizeof(TY148011), (NI32)(Length_149205 + 1));
asgnRefNoCycle((void**) &(*D_149182).Tocpart->data[Length_149205].Refname, Refname_149194);
asgnRefNoCycle((void**) &(*D_149182).Tocpart->data[Length_149205].N, N_149183);
asgnRefNoCycle((void**) &(*D_149182).Tocpart->data[Length_149205].Header, Result_149184);
LOC8[0] = Torope_46052(((NI64) ((*N_149183).Level)));
LOC8[1] = (*D_149182).Tocpart->data[Length_149205].Refname;
LOC8[2] = Result_149184;
LOC9 = rawNewString(1);
appendChar(LOC9, ((NIM_CHAR) (((NI) ((NI32)((NI32)((*N_149183).Level - 1) + 65))))));
appendString(LOC9, ((NimStringDesc*) &TMP192164));
LOC8[3] = Torope_46046(LOC9);
Result_149184 = Dispf_148579(((NimStringDesc*) &TMP192162), ((NimStringDesc*) &TMP192163), LOC8, 4);
goto LA5;
LA6: ;
LOC10[0] = Torope_46052(((NI64) ((*N_149183).Level)));
LOC10[1] = Refname_149194;
LOC10[2] = Result_149184;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI32)((NI32)((*N_149183).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP192164));
LOC10[3] = Torope_46046(LOC11);
Result_149184 = Dispf_148579(((NimStringDesc*) &TMP192165), ((NimStringDesc*) &TMP192163), LOC10, 4);
LA5: ;
return Result_149184;
}
N_NIMCALL(TY46008*, Renderoverline_149250)(TY148017* D_149252, TY140077* N_149253) {
TY46008* Result_149254;
TY46008* T_149255;
NI I_149263;
NI HEX3Atmp_149301;
NI LOC1;
NI Res_149303;
TY46008* LOC3;
TY155568 LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
Result_149254 = 0;
T_149255 = 0;
T_149255 = NIM_NIL;
I_149263 = 0;
HEX3Atmp_149301 = 0;
LOC1 = Rsonslen_140091(N_149253);
HEX3Atmp_149301 = (NI32)(LOC1 - 1);
Res_149303 = 0;
Res_149303 = 0;
while (1) {
if (!(Res_149303 <= HEX3Atmp_149301)) goto LA2;
I_149263 = Res_149303;
LOC3 = Renderrsttoout_148612(D_149252, (*N_149253).Sons->data[I_149263]);
App_46031(&T_149255, LOC3);
Res_149303 += 1;
} LA2: ;
Result_149254 = NIM_NIL;
if (!((*D_149252).Meta[(((NU8) 1))-0] == NIM_NIL)) goto LA5;
asgnRefNoCycle((void**) &(*D_149252).Meta[(((NU8) 1))-0], T_149255);
goto LA4;
LA5: ;
if (!((*D_149252).Meta[(((NU8) 2))-0] == NIM_NIL)) goto LA7;
asgnRefNoCycle((void**) &(*D_149252).Meta[(((NU8) 2))-0], T_149255);
goto LA4;
LA7: ;
LOC9[0] = Torope_46052(((NI64) ((*N_149253).Level)));
LOC10 = Rstnodetorefname_140105(N_149253);
LOC9[1] = Torope_46046(LOC10);
LOC9[2] = T_149255;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI32)((NI32)((*N_149253).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP192164));
LOC9[3] = Torope_46046(LOC11);
Result_149254 = Dispf_148579(((NimStringDesc*) &TMP192166), ((NimStringDesc*) &TMP192167), LOC9, 4);
LA4: ;
return Result_149254;
}
N_NIMCALL(NimStringDesc*, Disp_148565)(NimStringDesc* Xml_148567, NimStringDesc* Tex_148568) {
NimStringDesc* Result_148569;
Result_148569 = 0;
if (!!((Gcmd_40082 == ((NU8) 15)))) goto LA2;
Result_148569 = copyString(Xml_148567);
goto LA1;
LA2: ;
Result_148569 = copyString(Tex_148568);
LA1: ;
return Result_148569;
}
N_NIMCALL(NI, Nextsplitpoint_148455)(NimStringDesc* S_148457, NI Start_148458) {
NI Result_148459;
Result_148459 = 0;
Result_148459 = Start_148458;
while (1) {
if (!(Result_148459 < (NI32)(S_148457->Sup.len + 0))) goto LA1;
switch (((NU8)(S_148457->data[Result_148459]))) {
case 95:
goto BeforeRet;
break;
case 97 ... 122:
if (!((NI32)(Result_148459 + 1) < (NI32)(S_148457->Sup.len + 0))) goto LA3;
if (!(((NU8)(S_148457->data[(NI32)(Result_148459 + 1)])) >= ((NU8)(65)) && ((NU8)(S_148457->data[(NI32)(Result_148459 + 1)])) <= ((NU8)(90)))) goto LA6;
goto BeforeRet;
LA6: ;
LA3: ;
break;
default:
break;
}
Result_148459 += 1;
} LA1: ;
Result_148459 -= 1;
BeforeRet: ;
return Result_148459;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848) {
NIM_BOOL Result_16849;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_16849 = 0;
if (!(A_16847 == B_16848)) goto LA2;
Result_16849 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_16847 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_16848 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_16849 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_16847).Sup.len == (*B_16848).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_16847).data)), ((NCSTRING) ((*B_16848).data)), ((NI32) ((NI32)((*A_16847).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_16849 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_16849;
}
N_NIMCALL(void, Addxmlchar_148426)(NimStringDesc** Dest_148429, NIM_CHAR C_148430) {
switch (((NU8)(C_148430))) {
case 38:
(*Dest_148429) = resizeString((*Dest_148429), 5);
appendString((*Dest_148429), ((NimStringDesc*) &TMP192186));
break;
case 60:
(*Dest_148429) = resizeString((*Dest_148429), 4);
appendString((*Dest_148429), ((NimStringDesc*) &TMP192187));
break;
case 62:
(*Dest_148429) = resizeString((*Dest_148429), 4);
appendString((*Dest_148429), ((NimStringDesc*) &TMP192188));
break;
case 34:
(*Dest_148429) = resizeString((*Dest_148429), 6);
appendString((*Dest_148429), ((NimStringDesc*) &TMP192189));
break;
default:
(*Dest_148429) = addChar((*Dest_148429), C_148430);
break;
}
}
N_NIMCALL(void, Addtexchar_148436)(NimStringDesc** Dest_148439, NIM_CHAR C_148440) {
switch (((NU8)(C_148440))) {
case 95:
(*Dest_148439) = resizeString((*Dest_148439), 2);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192190));
break;
case 123:
(*Dest_148439) = resizeString((*Dest_148439), 12);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192191));
break;
case 125:
(*Dest_148439) = resizeString((*Dest_148439), 12);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192192));
break;
case 91:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192193));
break;
case 93:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192194));
break;
case 92:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192195));
break;
case 36:
(*Dest_148439) = resizeString((*Dest_148439), 2);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192196));
break;
case 38:
(*Dest_148439) = resizeString((*Dest_148439), 2);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192197));
break;
case 35:
(*Dest_148439) = resizeString((*Dest_148439), 2);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192198));
break;
case 37:
(*Dest_148439) = resizeString((*Dest_148439), 2);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192199));
break;
case 126:
(*Dest_148439) = resizeString((*Dest_148439), 12);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192200));
break;
case 64:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192201));
break;
case 94:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192202));
break;
case 96:
(*Dest_148439) = resizeString((*Dest_148439), 11);
appendString((*Dest_148439), ((NimStringDesc*) &TMP192203));
break;
default:
(*Dest_148439) = addChar((*Dest_148439), C_148440);
break;
}
}
N_NIMCALL(void, Escchar_148441)(NimStringDesc** Dest_148444, NIM_CHAR C_148445) {
if (!!((Gcmd_40082 == ((NU8) 15)))) goto LA2;
Addxmlchar_148426(Dest_148444, C_148445);
goto LA1;
LA2: ;
Addtexchar_148436(Dest_148444, C_148445);
LA1: ;
}
N_NIMCALL(NimStringDesc*, Esc_148505)(NimStringDesc* S_148507, NI Splitafter_148508) {
NimStringDesc* Result_148509;
NI Partlen_148512;
NI J_148513;
NI K_148518;
NIM_BOOL LOC6;
NI I_148528;
NI Res_148555;
NI I_148551;
NI HEX3Atmp_148560;
NI Res_148562;
Result_148509 = 0;
Result_148509 = copyString(((NimStringDesc*) &TMP192164));
if (!(0 <= Splitafter_148508)) goto LA2;
Partlen_148512 = 0;
Partlen_148512 = 0;
J_148513 = 0;
J_148513 = 0;
while (1) {
if (!(J_148513 < S_148507->Sup.len)) goto LA4;
K_148518 = 0;
K_148518 = Nextsplitpoint_148455(S_148507, J_148513);
LOC6 = !(eqStrings(Splitter_148046, ((NimStringDesc*) &TMP192185)));
if (LOC6) goto LA7;
LOC6 = (Splitafter_148508 < (NI32)((NI32)((NI32)(Partlen_148512 + K_148518) - J_148513) + 1));
LA7: ;
if (!LOC6) goto LA8;
Partlen_148512 = 0;
Result_148509 = resizeString(Result_148509, Splitter_148046->Sup.len + 0);
appendString(Result_148509, Splitter_148046);
LA8: ;
I_148528 = 0;
Res_148555 = 0;
Res_148555 = J_148513;
while (1) {
if (!(Res_148555 <= K_148518)) goto LA10;
I_148528 = Res_148555;
Escchar_148441(&Result_148509, S_148507->data[I_148528]);
Res_148555 += 1;
} LA10: ;
Partlen_148512 += (NI32)((NI32)(K_148518 - J_148513) + 1);
J_148513 = (NI32)(K_148518 + 1);
} LA4: ;
goto LA1;
LA2: ;
I_148551 = 0;
HEX3Atmp_148560 = 0;
HEX3Atmp_148560 = (NI32)((NI32)(S_148507->Sup.len + 0) - 1);
Res_148562 = 0;
Res_148562 = 0;
while (1) {
if (!(Res_148562 <= HEX3Atmp_148560)) goto LA11;
I_148551 = Res_148562;
Escchar_148441(&Result_148509, S_148507->data[I_148551]);
Res_148562 += 1;
} LA11: ;
LA1: ;
return Result_148509;
}
N_NIMCALL(TY46008*, Renderfield_149873)(TY148017* D_149875, TY140077* N_149876) {
TY46008* Result_149877;
NIM_BOOL B_149878;
NimStringDesc* Fieldname_149888;
TY46008* Fieldval_149889;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NI LOC8;
NI LOC14;
NimStringDesc* LOC23;
Result_149877 = 0;
B_149878 = 0;
B_149878 = NIM_FALSE;
if (!(Gcmd_40082 == ((NU8) 15))) goto LA2;
Fieldname_149888 = 0;
Fieldname_149888 = Addnodes_140108((*N_149876).Sons->data[0]);
Fieldval_149889 = 0;
LOC4 = Addnodes_140108((*N_149876).Sons->data[1]);
LOC5 = nsuStrip(LOC4, NIM_TRUE, NIM_TRUE);
LOC6 = Esc_148505(LOC5, -1);
Fieldval_149889 = Torope_46046(LOC6);
LOC8 = nsuCmpIgnoreStyle(Fieldname_149888, ((NimStringDesc*) &TMP192204));
if (!(LOC8 == 0)) goto LA9;
if (!((*D_149875).Meta[(((NU8) 3))-0] == NIM_NIL)) goto LA12;
asgnRefNoCycle((void**) &(*D_149875).Meta[(((NU8) 3))-0], Fieldval_149889);
B_149878 = NIM_TRUE;
LA12: ;
goto LA7;
LA9: ;
LOC14 = nsuCmpIgnoreStyle(Fieldname_149888, ((NimStringDesc*) &TMP192205));
if (!(LOC14 == 0)) goto LA15;
if (!((*D_149875).Meta[(((NU8) 4))-0] == NIM_NIL)) goto LA18;
asgnRefNoCycle((void**) &(*D_149875).Meta[(((NU8) 4))-0], Fieldval_149889);
B_149878 = NIM_TRUE;
LA18: ;
goto LA7;
LA15: ;
LA7: ;
LA2: ;
if (!B_149878) goto LA21;
Result_149877 = NIM_NIL;
goto LA20;
LA21: ;
LOC23 = Disp_148565(((NimStringDesc*) &TMP192206), ((NimStringDesc*) &TMP192161));
Result_149877 = Renderaux_148616(D_149875, N_149876, LOC23);
LA20: ;
return Result_149877;
}
N_NIMCALL(NimStringDesc*, Texcolumns_149855)(TY140077* N_149857) {
NimStringDesc* Result_149858;
NI I_149866;
NI HEX3Atmp_149868;
NI Res_149870;
Result_149858 = 0;
Result_149858 = copyString(((NimStringDesc*) &TMP192164));
I_149866 = 0;
HEX3Atmp_149868 = 0;
HEX3Atmp_149868 = Rsonslen_140091(N_149857);
Res_149870 = 0;
Res_149870 = 1;
while (1) {
if (!(Res_149870 <= HEX3Atmp_149868)) goto LA1;
I_149866 = Res_149870;
Result_149858 = resizeString(Result_149858, 2);
appendString(Result_149858, ((NimStringDesc*) &TMP192226));
Res_149870 += 1;
} LA1: ;
return Result_149858;
}
N_NIMCALL(void, Dispa_148595)(TY46008** Dest_148598, NimStringDesc* Xml_148599, NimStringDesc* Tex_148600, TY46008** Args_148602, NI Args_148602Len0) {
if (!!((Gcmd_40082 == ((NU8) 15)))) goto LA2;
Appf_46074(Dest_148598, Xml_148599, Args_148602, Args_148602Len0);
goto LA1;
LA2: ;
Appf_46074(Dest_148598, Tex_148600, Args_148602, Args_148602Len0);
LA1: ;
}
N_NIMCALL(TY46008*, Fieldaux_149709)(NimStringDesc* S_149711) {
TY46008* Result_149712;
NimStringDesc* LOC1;
Result_149712 = 0;
LOC1 = nsuStrip(S_149711, NIM_TRUE, NIM_TRUE);
Result_149712 = Torope_46046(LOC1);
return Result_149712;
}
N_NIMCALL(TY46008*, Renderimage_149713)(TY148017* D_149715, TY140077* N_149716) {
TY46008* Result_149717;
TY46008* Options_149718;
NimStringDesc* S_149719;
TY46446 LOC4;
TY46446 LOC8;
TY46446 LOC12;
TY46446 LOC16;
TY46446 LOC20;
TY46446 LOC24;
TY169860 LOC25;
NimStringDesc* LOC26;
NI LOC28;
TY46008* LOC31;
Result_149717 = 0;
Options_149718 = 0;
Options_149718 = NIM_NIL;
S_149719 = 0;
S_149719 = Getfieldvalue_140111(N_149716, ((NimStringDesc*) &TMP192238));
if (!!(((S_149719) && (S_149719)->Sup.len == 0))) goto LA2;
LOC4[0] = Fieldaux_149709(S_149719);
Dispa_148595(&Options_149718, ((NimStringDesc*) &TMP192239), ((NimStringDesc*) &TMP192240), LOC4, 1);
LA2: ;
S_149719 = Getfieldvalue_140111(N_149716, ((NimStringDesc*) &TMP192241));
if (!!(((S_149719) && (S_149719)->Sup.len == 0))) goto LA6;
LOC8[0] = Fieldaux_149709(S_149719);
Dispa_148595(&Options_149718, ((NimStringDesc*) &TMP192242), ((NimStringDesc*) &TMP192243), LOC8, 1);
LA6: ;
S_149719 = Getfieldvalue_140111(N_149716, ((NimStringDesc*) &TMP192244));
if (!!(((S_149719) && (S_149719)->Sup.len == 0))) goto LA10;
LOC12[0] = Fieldaux_149709(S_149719);
Dispa_148595(&Options_149718, ((NimStringDesc*) &TMP192245), ((NimStringDesc*) &TMP192246), LOC12, 1);
LA10: ;
S_149719 = Getfieldvalue_140111(N_149716, ((NimStringDesc*) &TMP192247));
if (!!(((S_149719) && (S_149719)->Sup.len == 0))) goto LA14;
LOC16[0] = Fieldaux_149709(S_149719);
Dispa_148595(&Options_149718, ((NimStringDesc*) &TMP192248), ((NimStringDesc*) &TMP192164), LOC16, 1);
LA14: ;
S_149719 = Getfieldvalue_140111(N_149716, ((NimStringDesc*) &TMP192249));
if (!!(((S_149719) && (S_149719)->Sup.len == 0))) goto LA18;
LOC20[0] = Fieldaux_149709(S_149719);
Dispa_148595(&Options_149718, ((NimStringDesc*) &TMP192250), ((NimStringDesc*) &TMP192164), LOC20, 1);
LA18: ;
if (!!((Options_149718 == NIM_NIL))) goto LA22;
LOC24[0] = Options_149718;
Options_149718 = Dispf_148579(((NimStringDesc*) &TMP192161), ((NimStringDesc*) &TMP192251), LOC24, 1);
LA22: ;
LOC26 = Getargument_140115(N_149716);
LOC25[0] = Torope_46046(LOC26);
LOC25[1] = Options_149718;
Result_149717 = Dispf_148579(((NimStringDesc*) &TMP192252), ((NimStringDesc*) &TMP192253), LOC25, 2);
LOC28 = Rsonslen_140091(N_149716);
if (!(3 <= LOC28)) goto LA29;
LOC31 = Renderrsttoout_148612(D_149715, (*N_149716).Sons->data[2]);
App_46031(&Result_149717, LOC31);
LA29: ;
return Result_149717;
}
N_NIMCALL(TY46008*, Rendercodeblock_149767)(TY148017* D_149769, TY140077* N_149770) {
TY46008* Result_149771;
TY140077* M_149783;
NimStringDesc* Langstr_149793;
NimStringDesc* LOC7;
NU8 Lang_149794;
TY145007 G_149804;
NimStringDesc* LOC15;
TY169860 LOC16;
NimStringDesc* LOC17;
NimStringDesc* LOC18;
TY46446 LOC22;
Result_149771 = 0;
Result_149771 = NIM_NIL;
if (!((*N_149770).Sons->data[2] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
M_149783 = 0;
M_149783 = (*(*N_149770).Sons->data[2]).Sons->data[0];
if (!!(((*M_149783).Kind == ((NU8) 62)))) goto LA5;
Internalerror_41571(((NimStringDesc*) &TMP192254));
LA5: ;
Langstr_149793 = 0;
LOC7 = Getargument_140115(N_149770);
Langstr_149793 = nsuStrip(LOC7, NIM_TRUE, NIM_TRUE);
Lang_149794 = 0;
if (!((Langstr_149793) && (Langstr_149793)->Sup.len == 0)) goto LA9;
Lang_149794 = ((NU8) 1);
goto LA8;
LA9: ;
Lang_149794 = Getsourcelanguage_145102(Langstr_149793);
LA8: ;
if (!(Lang_149794 == ((NU8) 0))) goto LA12;
Rawmessage_41553(((NU8) 218), Langstr_149793);
Result_149771 = Torope_46046((*M_149783).Text);
goto LA11;
LA12: ;
memset((void*)&G_149804, 0, sizeof(G_149804));
G_149804.Sup.m_type = NTI145007;
Initgeneraltokenizer_145105(&G_149804, (*M_149783).Text);
while (1) {
Getnexttoken_145114(&G_149804, Lang_149794);
switch (G_149804.Kind) {
case ((NU8) 0):
goto LA14;
break;
case ((NU8) 1):
case ((NU8) 2):
LOC15 = copyStrLast((*M_149783).Text, (NI32)(G_149804.Start + 0), (NI32)((NI32)((NI32)(G_149804.Length + G_149804.Start) - 1) + 0));
App_46036(&Result_149771, LOC15);
break;
default:
LOC17 = copyStrLast((*M_149783).Text, (NI32)(G_149804.Start + 0), (NI32)((NI32)((NI32)(G_149804.Length + G_149804.Start) - 1) + 0));
LOC18 = Esc_148505(LOC17, -1);
LOC16[0] = Torope_46046(LOC18);
LOC16[1] = Torope_46046(Tokenclasstostr_145059[(G_149804.Kind)-0]);
Dispa_148595(&Result_149771, ((NimStringDesc*) &TMP192370), ((NimStringDesc*) &TMP192371), LOC16, 2);
break;
}
} LA14: ;
Deinitgeneraltokenizer_145110(&G_149804);
LA11: ;
if (!!((Result_149771 == NIM_NIL))) goto LA20;
LOC22[0] = Result_149771;
Result_149771 = Dispf_148579(((NimStringDesc*) &TMP192372), ((NimStringDesc*) &TMP192218), LOC22, 1);
LA20: ;
BeforeRet: ;
return Result_149771;
}
N_NIMCALL(TY46008*, Rendercontainer_149830)(TY148017* D_149832, TY140077* N_149833) {
TY46008* Result_149834;
TY46008* Arg_149835;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY46446 LOC6;
TY169860 LOC7;
Result_149834 = 0;
Result_149834 = Renderrsttoout_148612(D_149832, (*N_149833).Sons->data[2]);
Arg_149835 = 0;
LOC1 = Getargument_140115(N_149833);
LOC2 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Arg_149835 = Torope_46046(LOC2);
if (!(Arg_149835 == NIM_NIL)) goto LA4;
LOC6[0] = Result_149834;
Result_149834 = Dispf_148579(((NimStringDesc*) &TMP192373), ((NimStringDesc*) &TMP192161), LOC6, 1);
goto LA3;
LA4: ;
LOC7[0] = Arg_149835;
LOC7[1] = Result_149834;
Result_149834 = Dispf_148579(((NimStringDesc*) &TMP192374), ((NimStringDesc*) &TMP192375), LOC7, 2);
LA3: ;
return Result_149834;
}
N_NIMCALL(TY46008*, Renderindexterm_148677)(TY148017* D_148679, TY140077* N_148680) {
TY46008* Result_148681;
TY169860 LOC1;
TY140077* H_148698;
TY140077* A_148717;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_148681 = 0;
(*D_148679).Id += 1;
LOC1[0] = Torope_46052(((NI64) ((*D_148679).Id)));
LOC1[1] = Renderaux_148616(D_148679, N_148680, ((NimStringDesc*) &TMP192161));
Result_148681 = Dispf_148579(((NimStringDesc*) &TMP192385), ((NimStringDesc*) &TMP192386), LOC1, 2);
H_148698 = 0;
H_148698 = Newrstnode_140094(((NU8) 38));
A_148717 = 0;
LOC3 = Disp_148565(((NimStringDesc*) &TMP192387), ((NimStringDesc*) &TMP192164));
LOC4 = nimIntToStr((*D_148679).Id);
LOC2 = rawNewString((*D_148679).Indexvalfilename->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC2, (*D_148679).Indexvalfilename);
appendString(LOC2, LOC3);
appendString(LOC2, LOC4);
A_148717 = Newrstnode_140097(((NU8) 62), LOC2);
Addson_140101(H_148698, A_148717);
Addson_140101(H_148698, A_148717);
Setindexpair_140118((*D_148679).Theindex, N_148680, H_148698);
return Result_148681;
}
N_NIMCALL(TY46008*, Renderrsttoout_148612)(TY148017* D_148614, TY140077* N_148615) {
TY46008* Result_149920;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NI I_149971;
NI HEX3Atmp_150097;
NI LOC12;
NI Res_150099;
TY46008* LOC14;
TY46446 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC21;
NimStringDesc* LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
NimStringDesc* LOC28;
NimStringDesc* LOC29;
NimStringDesc* LOC30;
NimStringDesc* LOC31;
NI LOC33;
NI I_150045;
NI HEX3Atmp_150103;
NI LOC36;
NI Res_150105;
TY46446 LOC38;
TY46446 LOC39;
NimStringDesc* LOC40;
NimStringDesc* LOC41;
TY169860 LOC42;
NimStringDesc* LOC43;
NimStringDesc* LOC44;
TY169860 LOC45;
TY140077* LOC49;
NimStringDesc* LOC50;
TY140077* LOC54;
NimStringDesc* LOC55;
NimStringDesc* LOC56;
TY169860 LOC57;
NimStringDesc* LOC58;
NimStringDesc* LOC59;
NimStringDesc* LOC60;
NimStringDesc* LOC61;
NimStringDesc* LOC62;
NimStringDesc* LOC66;
NimStringDesc* LOC67;
NimStringDesc* LOC68;
Result_149920 = 0;
if (!(N_148615 == NIM_NIL)) goto LA2;
Result_149920 = NIM_NIL;
goto BeforeRet;
LA2: ;
switch ((*N_148615).Kind) {
case ((NU8) 0):
Result_149920 = Renderaux_148616(D_148614, N_148615, ((NimStringDesc*) &TMP192161));
break;
case ((NU8) 1):
Result_149920 = Renderheadline_149180(D_148614, N_148615);
break;
case ((NU8) 2):
Result_149920 = Renderoverline_149250(D_148614, N_148615);
break;
case ((NU8) 3):
LOC4 = Disp_148565(((NimStringDesc*) &TMP192168), ((NimStringDesc*) &TMP192169));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC4);
break;
case ((NU8) 4):
LOC5 = Disp_148565(((NimStringDesc*) &TMP192170), ((NimStringDesc*) &TMP192171));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC5);
break;
case ((NU8) 5):
LOC6 = Disp_148565(((NimStringDesc*) &TMP192172), ((NimStringDesc*) &TMP192173));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC6);
break;
case ((NU8) 6):
case ((NU8) 8):
LOC7 = Disp_148565(((NimStringDesc*) &TMP192174), ((NimStringDesc*) &TMP192175));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC7);
break;
case ((NU8) 7):
LOC8 = Disp_148565(((NimStringDesc*) &TMP192176), ((NimStringDesc*) &TMP192177));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC8);
break;
case ((NU8) 9):
LOC9 = Disp_148565(((NimStringDesc*) &TMP192178), ((NimStringDesc*) &TMP192179));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC9);
break;
case ((NU8) 10):
Result_149920 = Renderaux_148616(D_148614, N_148615, ((NimStringDesc*) &TMP192161));
break;
case ((NU8) 11):
LOC10 = Disp_148565(((NimStringDesc*) &TMP192180), ((NimStringDesc*) &TMP192181));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC10);
break;
case ((NU8) 12):
LOC11 = Disp_148565(((NimStringDesc*) &TMP192182), ((NimStringDesc*) &TMP192183));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC11);
break;
case ((NU8) 13):
Result_149920 = NIM_NIL;
I_149971 = 0;
HEX3Atmp_150097 = 0;
LOC12 = Rsonslen_140091(N_148615);
HEX3Atmp_150097 = (NI32)(LOC12 - 1);
Res_150099 = 0;
Res_150099 = 0;
while (1) {
if (!(Res_150099 <= HEX3Atmp_150097)) goto LA13;
I_149971 = Res_150099;
LOC14 = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[I_149971]);
App_46031(&Result_149920, LOC14);
Res_150099 += 1;
} LA13: ;
if (!!((Result_149920 == NIM_NIL))) goto LA16;
LOC18[0] = Result_149920;
Result_149920 = Dispf_148579(((NimStringDesc*) &TMP192184), ((NimStringDesc*) &TMP192179), LOC18, 1);
LA16: ;
break;
case ((NU8) 14):
Result_149920 = Renderfield_149873(D_148614, N_148615);
break;
case ((NU8) 15):
LOC19 = Disp_148565(((NimStringDesc*) &TMP192207), ((NimStringDesc*) &TMP192208));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC19);
break;
case ((NU8) 16):
LOC20 = Disp_148565(((NimStringDesc*) &TMP192209), ((NimStringDesc*) &TMP192210));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC20);
break;
case ((NU8) 51):
Result_149920 = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[2]);
break;
case ((NU8) 17):
LOC21 = Disp_148565(((NimStringDesc*) &TMP192211), ((NimStringDesc*) &TMP192212));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC21);
break;
case ((NU8) 18):
LOC22 = Disp_148565(((NimStringDesc*) &TMP192206), ((NimStringDesc*) &TMP192161));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC22);
break;
case ((NU8) 19):
LOC23 = Disp_148565(((NimStringDesc*) &TMP192213), ((NimStringDesc*) &TMP192214));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC23);
break;
case ((NU8) 23):
LOC24 = Disp_148565(((NimStringDesc*) &TMP192215), ((NimStringDesc*) &TMP192210));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC24);
break;
case ((NU8) 20):
case ((NU8) 21):
case ((NU8) 22):
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
case ((NU8) 24):
LOC25 = Disp_148565(((NimStringDesc*) &TMP192217), ((NimStringDesc*) &TMP192218));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC25);
break;
case ((NU8) 25):
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
case ((NU8) 26):
LOC26 = Disp_148565(((NimStringDesc*) &TMP192219), ((NimStringDesc*) &TMP192171));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC26);
break;
case ((NU8) 27):
LOC27 = Disp_148565(((NimStringDesc*) &TMP192220), ((NimStringDesc*) &TMP192221));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC27);
break;
case ((NU8) 28):
LOC28 = Disp_148565(((NimStringDesc*) &TMP192222), ((NimStringDesc*) &TMP192223));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC28);
break;
case ((NU8) 29):
case ((NU8) 30):
LOC30 = Texcolumns_149855(N_148615);
LOC29 = rawNewString(LOC30->Sup.len + 65);
appendString(LOC29, ((NimStringDesc*) &TMP192225));
appendString(LOC29, LOC30);
appendString(LOC29, ((NimStringDesc*) &TMP192227));
LOC31 = Disp_148565(((NimStringDesc*) &TMP192224), LOC29);
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC31);
break;
case ((NU8) 31):
LOC33 = Rsonslen_140091(N_148615);
if (!(1 <= LOC33)) goto LA34;
Result_149920 = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[0]);
I_150045 = 0;
HEX3Atmp_150103 = 0;
LOC36 = Rsonslen_140091(N_148615);
HEX3Atmp_150103 = (NI32)(LOC36 - 1);
Res_150105 = 0;
Res_150105 = 1;
while (1) {
if (!(Res_150105 <= HEX3Atmp_150103)) goto LA37;
I_150045 = Res_150105;
LOC38[0] = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[I_150045]);
Dispa_148595(&Result_149920, ((NimStringDesc*) &TMP192161), ((NimStringDesc*) &TMP192228), LOC38, 1);
Res_150105 += 1;
} LA37: ;
LOC39[0] = Result_149920;
Result_149920 = Dispf_148579(((NimStringDesc*) &TMP192206), ((NimStringDesc*) &TMP192229), LOC39, 1);
goto LA32;
LA34: ;
Result_149920 = NIM_NIL;
LA32: ;
break;
case ((NU8) 33):
LOC40 = Disp_148565(((NimStringDesc*) &TMP192209), ((NimStringDesc*) &TMP192161));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC40);
break;
case ((NU8) 32):
LOC41 = Disp_148565(((NimStringDesc*) &TMP192230), ((NimStringDesc*) &TMP192231));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC41);
break;
case ((NU8) 34):
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
case ((NU8) 35):
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
case ((NU8) 36):
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
case ((NU8) 39):
LOC42[0] = Renderaux_148616(D_148614, N_148615, ((NimStringDesc*) &TMP192161));
LOC43 = Rstnodetorefname_140105(N_148615);
LOC42[1] = Torope_46046(LOC43);
Result_149920 = Dispf_148579(((NimStringDesc*) &TMP192232), ((NimStringDesc*) &TMP192233), LOC42, 2);
break;
case ((NU8) 37):
LOC44 = Disp_148565(((NimStringDesc*) &TMP192234), ((NimStringDesc*) &TMP192235));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC44);
break;
case ((NU8) 38):
LOC45[0] = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[0]);
LOC45[1] = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[1]);
Result_149920 = Dispf_148579(((NimStringDesc*) &TMP192236), ((NimStringDesc*) &TMP192237), LOC45, 2);
break;
case ((NU8) 41):
case ((NU8) 42):
Result_149920 = Renderaux_148616(D_148614, N_148615, ((NimStringDesc*) &TMP192161));
break;
case ((NU8) 48):
if (!!((Gcmd_40082 == ((NU8) 15)))) goto LA47;
LOC49 = Lastson_140667(N_148615);
LOC50 = Addnodes_140108(LOC49);
Result_149920 = Torope_46046(LOC50);
LA47: ;
break;
case ((NU8) 49):
if (!(Gcmd_40082 == ((NU8) 15))) goto LA52;
LOC54 = Lastson_140667(N_148615);
LOC55 = Addnodes_140108(LOC54);
Result_149920 = Torope_46046(LOC55);
LA52: ;
break;
case ((NU8) 45):
case ((NU8) 46):
Result_149920 = Renderimage_149713(D_148614, N_148615);
break;
case ((NU8) 47):
Result_149920 = Rendercodeblock_149767(D_148614, N_148615);
break;
case ((NU8) 50):
Result_149920 = Rendercontainer_149830(D_148614, N_148615);
break;
case ((NU8) 61):
case ((NU8) 52):
LOC56 = Disp_148565(((NimStringDesc*) &TMP192376), ((NimStringDesc*) &TMP192376));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC56);
break;
case ((NU8) 40):
Result_149920 = Renderaux_148616(D_148614, N_148615, ((NimStringDesc*) &TMP192164));
break;
case ((NU8) 53):
LOC57[0] = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[0]);
LOC57[1] = Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[1]);
Result_149920 = Dispf_148579(((NimStringDesc*) &TMP192370), ((NimStringDesc*) &TMP192371), LOC57, 2);
break;
case ((NU8) 54):
LOC58 = Disp_148565(((NimStringDesc*) &TMP192377), ((NimStringDesc*) &TMP192378));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC58);
break;
case ((NU8) 55):
LOC59 = Disp_148565(((NimStringDesc*) &TMP192379), ((NimStringDesc*) &TMP192380));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC59);
break;
case ((NU8) 57):
LOC60 = Disp_148565(((NimStringDesc*) &TMP192381), ((NimStringDesc*) &TMP192382));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC60);
break;
case ((NU8) 58):
LOC61 = Disp_148565(((NimStringDesc*) &TMP192383), ((NimStringDesc*) &TMP192231));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC61);
break;
case ((NU8) 59):
LOC62 = Disp_148565(((NimStringDesc*) &TMP192384), ((NimStringDesc*) &TMP192382));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC62);
break;
case ((NU8) 56):
if (!((*D_148614).Theindex == NIM_NIL)) goto LA64;
LOC66 = Disp_148565(((NimStringDesc*) &TMP192381), ((NimStringDesc*) &TMP192382));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC66);
goto LA63;
LA64: ;
Result_149920 = Renderindexterm_148677(D_148614, N_148615);
LA63: ;
break;
case ((NU8) 60):
LOC67 = Disp_148565(((NimStringDesc*) &TMP192388), ((NimStringDesc*) &TMP192389));
Result_149920 = Renderaux_148616(D_148614, N_148615, LOC67);
break;
case ((NU8) 62):
LOC68 = Esc_148505((*N_148615).Text, -1);
Result_149920 = Torope_46046(LOC68);
break;
case ((NU8) 44):
(*D_148614).Hastoc = NIM_TRUE;
break;
case ((NU8) 43):
asgnRefNoCycle((void**) &(*D_148614).Meta[(((NU8) 1))-0], Renderrsttoout_148612(D_148614, (*N_148615).Sons->data[0]));
break;
default:
Internalerror_41571(((NimStringDesc*) &TMP192216));
break;
}
BeforeRet: ;
return Result_149920;
}
N_NIMCALL(TY46008*, Gencomment_148718)(TY148017* D_148720, TY49523* N_148721) {
TY46008* Result_148722;
NIM_BOOL Dummyhastoc_148723;
NIM_BOOL LOC2;
NimStringDesc* LOC6;
NI LOC7;
NI LOC8;
TY140077* LOC9;
Result_148722 = 0;
Dummyhastoc_148723 = 0;
LOC2 = !(((*N_148721).Comment == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = nsuStartsWith((*N_148721).Comment, ((NimStringDesc*) &TMP192160));
LA3: ;
if (!LOC2) goto LA4;
LOC6 = Tofilename_41579((*N_148721).Info);
LOC7 = Tolinenumber_41585((*N_148721).Info);
LOC8 = Tocolumn_41582((*N_148721).Info);
LOC9 = Rstparse_140082((*N_148721).Comment, NIM_TRUE, LOC6, LOC7, LOC8, &Dummyhastoc_148723);
Result_148722 = Renderrsttoout_148612(D_148720, LOC9);
LA4: ;
return Result_148722;
}
N_NIMCALL(NIM_BOOL, Isvisible_148801)(TY49523* N_148803) {
NIM_BOOL Result_148804;
NIM_BOOL LOC5;
NI LOC6;
TY48011* V_148861;
NIM_BOOL LOC10;
Result_148804 = 0;
Result_148804 = NIM_FALSE;
if (!((*N_148803).Kind == ((NU8) 29))) goto LA2;
LOC6 = Sonslen_49801(N_148803);
LOC5 = (LOC6 == 2);
if (!(LOC5)) goto LA7;
LOC5 = ((*(*N_148803).KindU.S6.Sons->data[0]).Kind == ((NU8) 2));
LA7: ;
if (!LOC5) goto LA8;
V_148861 = 0;
V_148861 = (*(*N_148803).KindU.S6.Sons->data[0]).KindU.S5.Ident;
LOC10 = ((*V_148861).Sup.Id == 69);
if (LOC10) goto LA11;
LOC10 = ((*V_148861).Sup.Id == 70);
LA11: ;
Result_148804 = LOC10;
LA8: ;
goto LA1;
LA2: ;
if (!((*N_148803).Kind == ((NU8) 3))) goto LA12;
Result_148804 = (((*(*N_148803).KindU.S4.Sym).Flags &(1<<((((NU8) 3))&31)))!=0);
goto LA1;
LA12: ;
if (!((*N_148803).Kind == ((NU8) 34))) goto LA14;
Result_148804 = Isvisible_148801((*N_148803).KindU.S6.Sons->data[0]);
goto LA1;
LA14: ;
LA1: ;
return Result_148804;
}
N_NIMCALL(NimStringDesc*, Getname_148929)(TY49523* N_148931, NI Splitafter_148932) {
NimStringDesc* Result_148933;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_148933 = 0;
switch ((*N_148931).Kind) {
case ((NU8) 29):
Result_148933 = Getname_148929((*N_148931).KindU.S6.Sons->data[1], Splitafter_148932);
break;
case ((NU8) 34):
Result_148933 = Getname_148929((*N_148931).KindU.S6.Sons->data[0], Splitafter_148932);
break;
case ((NU8) 3):
Result_148933 = Esc_148505((*(*(*N_148931).KindU.S4.Sym).Name).S, Splitafter_148932);
break;
case ((NU8) 2):
Result_148933 = Esc_148505((*(*N_148931).KindU.S5.Ident).S, Splitafter_148932);
break;
case ((NU8) 43):
LOC2 = Esc_148505(((NimStringDesc*) &TMP192390), -1);
LOC3 = Getname_148929((*N_148931).KindU.S6.Sons->data[0], Splitafter_148932);
LOC4 = Esc_148505(((NimStringDesc*) &TMP192390), -1);
LOC1 = rawNewString(LOC2->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC1, LOC2);
appendString(LOC1, LOC3);
appendString(LOC1, LOC4);
Result_148933 = LOC1;
break;
default:
Internalerror_41567((*N_148931).Info, ((NimStringDesc*) &TMP192391));
Result_148933 = copyString(((NimStringDesc*) &TMP192164));
break;
}
return Result_148933;
}
N_NIMCALL(TY46008*, Genreccomment_148725)(TY148017* D_148727, TY49523* N_148728) {
TY46008* Result_148729;
NI I_148771;
NI HEX3Atmp_148796;
NI LOC10;
NI Res_148798;
Result_148729 = 0;
if (!(N_148728 == NIM_NIL)) goto LA2;
Result_148729 = NIM_NIL;
goto BeforeRet;
LA2: ;
Result_148729 = Gencomment_148718(D_148727, N_148728);
if (!(Result_148729 == NIM_NIL)) goto LA5;
if (!!(((*N_148728).Kind >= ((NU8) 1) && (*N_148728).Kind <= ((NU8) 18)))) goto LA8;
I_148771 = 0;
HEX3Atmp_148796 = 0;
LOC10 = Sonslen_49801(N_148728);
HEX3Atmp_148796 = (NI32)(LOC10 - 1);
Res_148798 = 0;
Res_148798 = 0;
while (1) {
if (!(Res_148798 <= HEX3Atmp_148796)) goto LA11;
I_148771 = Res_148798;
Result_148729 = Genreccomment_148725(D_148727, (*N_148728).KindU.S6.Sons->data[I_148771]);
if (!!((Result_148729 == NIM_NIL))) goto LA13;
goto BeforeRet;
LA13: ;
Res_148798 += 1;
} LA11: ;
LA8: ;
goto LA4;
LA5: ;
asgnRefNoCycle((void**) &(*N_148728).Comment, copyString(NIM_NIL));
LA4: ;
BeforeRet: ;
return Result_148729;
}
N_NIMCALL(NI, Getvaridx_148198)(NimStringDesc** Varnames_148201, NI Varnames_148201Len0, NimStringDesc* Id_148202) {
NI Result_148203;
NI I_148211;
NI HEX3Atmp_148215;
NI Res_148217;
NI LOC3;
Result_148203 = 0;
I_148211 = 0;
HEX3Atmp_148215 = 0;
HEX3Atmp_148215 = (Varnames_148201Len0-1);
Res_148217 = 0;
Res_148217 = 0;
while (1) {
if (!(Res_148217 <= HEX3Atmp_148215)) goto LA1;
I_148211 = Res_148217;
LOC3 = nsuCmpIgnoreStyle(Varnames_148201[I_148211], Id_148202);
if (!(LOC3 == 0)) goto LA4;
Result_148203 = I_148211;
goto BeforeRet;
LA4: ;
Res_148217 += 1;
} LA1: ;
Result_148203 = -1;
BeforeRet: ;
return Result_148203;
}
N_NIMCALL(TY46008*, Ropeformatnamedvars_148220)(NimStringDesc* Frmt_148222, NimStringDesc** Varnames_148224, NI Varnames_148224Len0, TY46008** Varvalues_148226, NI Varvalues_148226Len0) {
TY46008* Result_148227;
NI I_148228;
NI L_148231;
NI Num_148232;
NI J_148287;
NIM_BOOL LOC7;
NimStringDesc* Id_148327;
NI Idx_148352;
NimStringDesc* Id_148356;
NI Idx_148397;
NI Start_148401;
NimStringDesc* LOC35;
Result_148227 = 0;
I_148228 = 0;
I_148228 = 0;
L_148231 = 0;
L_148231 = Frmt_148222->Sup.len;
Result_148227 = NIM_NIL;
Num_148232 = 0;
Num_148232 = 0;
while (1) {
if (!(I_148228 < L_148231)) goto LA1;
if (!((NU8)(Frmt_148222->data[I_148228]) == (NU8)(36))) goto LA3;
I_148228 += 1;
switch (((NU8)(Frmt_148222->data[I_148228]))) {
case 35:
App_46031(&Result_148227, Varvalues_148226[Num_148232]);
Num_148232 += 1;
I_148228 += 1;
break;
case 36:
App_46036(&Result_148227, ((NimStringDesc*) &TMP192411));
I_148228 += 1;
break;
case 48 ... 57:
J_148287 = 0;
J_148287 = 0;
while (1) {
J_148287 = (NI32)((NI32)((NI32)(J_148287 * 10) + ((NU8)(Frmt_148222->data[I_148228]))) - 48);
I_148228 += 1;
LOC7 = ((NI32)((NI32)(L_148231 + 0) - 1) < I_148228);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_148222->data[I_148228])) >= ((NU8)(48)) && ((NU8)(Frmt_148222->data[I_148228])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
if (!((NI32)((Varvalues_148226Len0-1) + 1) < J_148287)) goto LA12;
Internalerror_41571(((NimStringDesc*) &TMP192412));
LA12: ;
Num_148232 = J_148287;
App_46031(&Result_148227, Varvalues_148226[(NI32)(J_148287 - 1)]);
break;
case 65 ... 90:
case 97 ... 122:
case 128 ... 255:
Id_148327 = 0;
Id_148327 = copyString(((NimStringDesc*) &TMP192164));
while (1) {
Id_148327 = addChar(Id_148327, Frmt_148222->data[I_148228]);
I_148228 += 1;
if (!!((((NU8)(Frmt_148222->data[I_148228])) >= ((NU8)(65)) && ((NU8)(Frmt_148222->data[I_148228])) <= ((NU8)(90)) || ((NU8)(Frmt_148222->data[I_148228])) == ((NU8)(95)) || ((NU8)(Frmt_148222->data[I_148228])) >= ((NU8)(97)) && ((NU8)(Frmt_148222->data[I_148228])) <= ((NU8)(122)) || ((NU8)(Frmt_148222->data[I_148228])) >= ((NU8)(128)) && ((NU8)(Frmt_148222->data[I_148228])) <= ((NU8)(255))))) goto LA16;
goto LA14;
LA16: ;
} LA14: ;
Idx_148352 = 0;
Idx_148352 = Getvaridx_148198(Varnames_148224, Varnames_148224Len0, Id_148327);
if (!(0 <= Idx_148352)) goto LA19;
App_46031(&Result_148227, Varvalues_148226[Idx_148352]);
goto LA18;
LA19: ;
Rawmessage_41553(((NU8) 148), Id_148327);
LA18: ;
break;
case 123:
Id_148356 = 0;
Id_148356 = copyString(((NimStringDesc*) &TMP192164));
I_148228 += 1;
while (1) {
if (!!(((NU8)(Frmt_148222->data[I_148228]) == (NU8)(125)))) goto LA21;
if (!((NU8)(Frmt_148222->data[I_148228]) == (NU8)(0))) goto LA23;
Rawmessage_41553(((NU8) 21), ((NimStringDesc*) &TMP192413));
LA23: ;
Id_148356 = addChar(Id_148356, Frmt_148222->data[I_148228]);
I_148228 += 1;
} LA21: ;
I_148228 += 1;
Idx_148397 = 0;
Idx_148397 = Getvaridx_148198(Varnames_148224, Varnames_148224Len0, Id_148356);
if (!(0 <= Idx_148397)) goto LA26;
App_46031(&Result_148227, Varvalues_148226[Idx_148397]);
goto LA25;
LA26: ;
Rawmessage_41553(((NU8) 148), Id_148356);
LA25: ;
break;
default:
Internalerror_41571(((NimStringDesc*) &TMP192412));
break;
}
LA3: ;
Start_148401 = 0;
Start_148401 = I_148228;
while (1) {
if (!(I_148228 < L_148231)) goto LA28;
if (!!(((NU8)(Frmt_148222->data[I_148228]) == (NU8)(36)))) goto LA30;
I_148228 += 1;
goto LA29;
LA30: ;
goto LA28;
LA29: ;
} LA28: ;
if (!(Start_148401 <= (NI32)(I_148228 - 1))) goto LA33;
LOC35 = copyStrLast(Frmt_148222, Start_148401, (NI32)(I_148228 - 1));
App_46036(&Result_148227, LOC35);
LA33: ;
} LA1: ;
return Result_148227;
}
N_NIMCALL(void, Setindexforsourceterm_148641)(TY148017* D_148643, TY140077* Name_148644, NI Id_148645) {
TY140077* H_148657;
TY140077* A_148676;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
if (!((*D_148643).Theindex == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
H_148657 = 0;
H_148657 = Newrstnode_140094(((NU8) 38));
A_148676 = 0;
LOC5 = Disp_148565(((NimStringDesc*) &TMP192387), ((NimStringDesc*) &TMP192164));
LOC6 = nimIntToStr(Id_148645);
LOC4 = rawNewString((*D_148643).Indexvalfilename->Sup.len + LOC5->Sup.len + LOC6->Sup.len + 0);
appendString(LOC4, (*D_148643).Indexvalfilename);
appendString(LOC4, LOC5);
appendString(LOC4, LOC6);
A_148676 = Newrstnode_140097(((NU8) 62), LOC4);
Addson_140101(H_148657, A_148676);
Addson_140101(H_148657, A_148676);
A_148676 = Newrstnode_140094(((NU8) 56));
Addson_140101(A_148676, Name_148644);
Setindexpair_140118((*D_148643).Theindex, A_148676, H_148657);
BeforeRet: ;
}
N_NIMCALL(TY140077*, Getrstname_149010)(TY49523* N_149012) {
TY140077* Result_149013;
Result_149013 = 0;
switch ((*N_149012).Kind) {
case ((NU8) 29):
Result_149013 = Getrstname_149010((*N_149012).KindU.S6.Sons->data[1]);
break;
case ((NU8) 34):
Result_149013 = Getrstname_149010((*N_149012).KindU.S6.Sons->data[0]);
break;
case ((NU8) 3):
Result_149013 = Newrstnode_140097(((NU8) 62), (*(*(*N_149012).KindU.S4.Sym).Name).S);
break;
case ((NU8) 2):
Result_149013 = Newrstnode_140097(((NU8) 62), (*(*N_149012).KindU.S5.Ident).S);
break;
case ((NU8) 43):
Result_149013 = Getrstname_149010((*N_149012).KindU.S6.Sons->data[0]);
break;
default:
Internalerror_41567((*N_149012).Info, ((NimStringDesc*) &TMP192421));
Result_149013 = NIM_NIL;
break;
}
return Result_149013;
}
N_NIMCALL(void, Genitem_149074)(TY148017* D_149076, TY49523* N_149077, TY49523* Namenode_149078, NU8 K_149079) {
TY78016 R_149080;
NU8 Kind_149081;
NimStringDesc* Literal_149082;
TY46008* Name_149083;
TY46008* Result_149084;
TY46008* Comm_149085;
NIM_BOOL LOC2;
NimStringDesc* LOC5;
TY46446 LOC7;
NimStringDesc* LOC8;
TY46446 LOC9;
TY46446 LOC10;
NimStringDesc* LOC11;
TY46446 LOC12;
NimStringDesc* LOC13;
TY46446 LOC14;
NimStringDesc* LOC15;
TY46446 LOC16;
NimStringDesc* LOC17;
TY46446 LOC18;
NimStringDesc* LOC19;
TY46446 LOC20;
NimStringDesc* LOC21;
TY46446 LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
TY155568 LOC26;
TY46008* LOC27;
NimStringDesc* LOC28;
TY155568 LOC29;
NimStringDesc* LOC30;
TY46008* LOC31;
TY140077* LOC32;
memset((void*)&R_149080, 0, sizeof(R_149080));
Kind_149081 = 0;
Literal_149082 = 0;
Name_149083 = 0;
Result_149084 = 0;
Comm_149085 = 0;
LOC2 = Isvisible_148801(Namenode_149078);
if (!!(LOC2)) goto LA3;
goto BeforeRet;
LA3: ;
LOC5 = Getname_148929(Namenode_149078, -1);
Name_149083 = Torope_46046(LOC5);
Result_149084 = NIM_NIL;
Literal_149082 = copyString(((NimStringDesc*) &TMP192164));
Kind_149081 = ((NU8) 1);
Comm_149085 = Genreccomment_148725(D_149076, N_149077);
Inittokrender_78048(&R_149080, N_149077, 30);
while (1) {
Getnexttok_78056(&R_149080, &Kind_149081, &Literal_149082);
switch (Kind_149081) {
case ((NU8) 1):
goto LA6;
break;
case ((NU8) 100):
LOC8 = Esc_148505(Literal_149082, -1);
LOC7[0] = Torope_46046(LOC8);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192392), ((NimStringDesc*) &TMP192393), LOC7, 1);
break;
case ((NU8) 3) ... ((NU8) 65):
LOC9[0] = Torope_46046(Literal_149082);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192394), ((NimStringDesc*) &TMP192395), LOC9, 1);
break;
case ((NU8) 99):
case ((NU8) 98):
LOC11 = Esc_148505(Literal_149082, -1);
LOC10[0] = Torope_46046(LOC11);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192396), ((NimStringDesc*) &TMP192397), LOC10, 1);
break;
case ((NU8) 74) ... ((NU8) 76):
LOC13 = Esc_148505(Literal_149082, -1);
LOC12[0] = Torope_46046(LOC13);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192398), ((NimStringDesc*) &TMP192399), LOC12, 1);
break;
case ((NU8) 79):
LOC15 = Esc_148505(Literal_149082, -1);
LOC14[0] = Torope_46046(LOC15);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192400), ((NimStringDesc*) &TMP192401), LOC14, 1);
break;
case ((NU8) 66) ... ((NU8) 70):
LOC17 = Esc_148505(Literal_149082, -1);
LOC16[0] = Torope_46046(LOC17);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192402), ((NimStringDesc*) &TMP192403), LOC16, 1);
break;
case ((NU8) 71) ... ((NU8) 73):
LOC19 = Esc_148505(Literal_149082, -1);
LOC18[0] = Torope_46046(LOC19);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192404), ((NimStringDesc*) &TMP192405), LOC18, 1);
break;
case ((NU8) 2):
LOC21 = Esc_148505(Literal_149082, -1);
LOC20[0] = Torope_46046(LOC21);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192406), ((NimStringDesc*) &TMP192407), LOC20, 1);
break;
case ((NU8) 102):
case ((NU8) 103):
case ((NU8) 104):
case ((NU8) 105):
App_46036(&Result_149084, Literal_149082);
break;
case ((NU8) 80):
case ((NU8) 81):
case ((NU8) 82):
case ((NU8) 83):
case ((NU8) 84):
case ((NU8) 85):
case ((NU8) 86):
case ((NU8) 87):
case ((NU8) 88):
case ((NU8) 89):
case ((NU8) 90):
case ((NU8) 91):
case ((NU8) 92):
case ((NU8) 93):
case ((NU8) 94):
case ((NU8) 95):
case ((NU8) 96):
case ((NU8) 97):
case ((NU8) 101):
LOC23 = Esc_148505(Literal_149082, -1);
LOC22[0] = Torope_46046(LOC23);
Dispa_148595(&Result_149084, ((NimStringDesc*) &TMP192408), ((NimStringDesc*) &TMP192409), LOC22, 1);
break;
default:
LOC24 = rawNewString(Toktypetostr_70145[(Kind_149081)-0]->Sup.len + 17);
appendString(LOC24, ((NimStringDesc*) &TMP192410));
appendString(LOC24, Toktypetostr_70145[(Kind_149081)-0]);
appendChar(LOC24, 41);
Internalerror_41567((*N_149077).Info, LOC24);
break;
}
} LA6: ;
(*D_149076).Id += 1;
LOC25 = Getconfigvar_40133(((NimStringDesc*) &TMP192414));
LOC26[0] = Name_149083;
LOC26[1] = Result_149084;
LOC26[2] = Comm_149085;
LOC26[3] = Torope_46052(((NI64) ((*D_149076).Id)));
LOC27 = Ropeformatnamedvars_148220(LOC25, TMP192415, 4, LOC26, 4);
App_46031(&(*D_149076).Section[(K_149079)-0], LOC27);
LOC28 = Getconfigvar_40133(((NimStringDesc*) &TMP192420));
LOC30 = Getname_148929(Namenode_149078, (*D_149076).Splitafter);
LOC29[0] = Torope_46046(LOC30);
LOC29[1] = Result_149084;
LOC29[2] = Comm_149085;
LOC29[3] = Torope_46052(((NI64) ((*D_149076).Id)));
LOC31 = Ropeformatnamedvars_148220(LOC28, TMP192415, 4, LOC29, 4);
App_46031(&(*D_149076).Toc[(K_149079)-0], LOC31);
LOC32 = Getrstname_149010(Namenode_149078);
Setindexforsourceterm_148641(D_149076, LOC32, (*D_149076).Id);
BeforeRet: ;
}
N_NIMCALL(void, Generatedoc_150108)(TY148017* D_150110, TY49523* N_150111) {
TY46008* LOC4;
NI I_150203;
NI HEX3Atmp_150424;
NI LOC5;
NI Res_150426;
NI I_150268;
NI HEX3Atmp_150430;
NI LOC10;
NI Res_150432;
NI I_150333;
NI HEX3Atmp_150436;
NI LOC15;
NI Res_150438;
NI I_150398;
NI HEX3Atmp_150442;
NI LOC20;
NI Res_150444;
TY49523* LOC22;
if (!(N_150111 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_150111).Kind) {
case ((NU8) 105):
LOC4 = Gencomment_148718(D_150110, N_150111);
App_46031(&(*D_150110).Moddesc, LOC4);
break;
case ((NU8) 69):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 9));
break;
case ((NU8) 70):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 10));
break;
case ((NU8) 74):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 11));
break;
case ((NU8) 72):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 13));
break;
case ((NU8) 73):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 14));
break;
case ((NU8) 71):
Genitem_149074(D_150110, N_150111, (*N_150111).KindU.S6.Sons->data[0], ((NU8) 12));
break;
case ((NU8) 87):
I_150203 = 0;
HEX3Atmp_150424 = 0;
LOC5 = Sonslen_49801(N_150111);
HEX3Atmp_150424 = (NI32)(LOC5 - 1);
Res_150426 = 0;
Res_150426 = 0;
while (1) {
if (!(Res_150426 <= HEX3Atmp_150424)) goto LA6;
I_150203 = Res_150426;
if (!!(((*(*N_150111).KindU.S6.Sons->data[I_150203]).Kind == ((NU8) 105)))) goto LA8;
Genitem_149074(D_150110, (*N_150111).KindU.S6.Sons->data[I_150203], (*(*N_150111).KindU.S6.Sons->data[I_150203]).KindU.S6.Sons->data[0], ((NU8) 8));
LA8: ;
Res_150426 += 1;
} LA6: ;
break;
case ((NU8) 88):
I_150268 = 0;
HEX3Atmp_150430 = 0;
LOC10 = Sonslen_49801(N_150111);
HEX3Atmp_150430 = (NI32)(LOC10 - 1);
Res_150432 = 0;
Res_150432 = 0;
while (1) {
if (!(Res_150432 <= HEX3Atmp_150430)) goto LA11;
I_150268 = Res_150432;
if (!!(((*(*N_150111).KindU.S6.Sons->data[I_150268]).Kind == ((NU8) 105)))) goto LA13;
Genitem_149074(D_150110, (*N_150111).KindU.S6.Sons->data[I_150268], (*(*N_150111).KindU.S6.Sons->data[I_150268]).KindU.S6.Sons->data[0], ((NU8) 7));
LA13: ;
Res_150432 += 1;
} LA11: ;
break;
case ((NU8) 90):
I_150333 = 0;
HEX3Atmp_150436 = 0;
LOC15 = Sonslen_49801(N_150111);
HEX3Atmp_150436 = (NI32)(LOC15 - 1);
Res_150438 = 0;
Res_150438 = 0;
while (1) {
if (!(Res_150438 <= HEX3Atmp_150436)) goto LA16;
I_150333 = Res_150438;
if (!!(((*(*N_150111).KindU.S6.Sons->data[I_150333]).Kind == ((NU8) 105)))) goto LA18;
Genitem_149074(D_150110, (*N_150111).KindU.S6.Sons->data[I_150333], (*(*N_150111).KindU.S6.Sons->data[I_150333]).KindU.S6.Sons->data[0], ((NU8) 6));
LA18: ;
Res_150438 += 1;
} LA16: ;
break;
case ((NU8) 101):
I_150398 = 0;
HEX3Atmp_150442 = 0;
LOC20 = Sonslen_49801(N_150111);
HEX3Atmp_150442 = (NI32)(LOC20 - 1);
Res_150444 = 0;
Res_150444 = 0;
while (1) {
if (!(Res_150444 <= HEX3Atmp_150442)) goto LA21;
I_150398 = Res_150444;
Generatedoc_150108(D_150110, (*N_150111).KindU.S6.Sons->data[I_150398]);
Res_150444 += 1;
} LA21: ;
break;
case ((NU8) 83):
LOC22 = Lastson_49807((*N_150111).KindU.S6.Sons->data[0]);
Generatedoc_150108(D_150110, LOC22);
break;
default:
break;
}
BeforeRet: ;
}
N_NIMCALL(TY46008*, Rendertocentry_149665)(TY148017* D_149667, TY148011 E_149668) {
TY46008* Result_149669;
TY169860 LOC1;
Result_149669 = 0;
LOC1[0] = E_149668.Refname;
LOC1[1] = E_149668.Header;
Result_149669 = Dispf_148579(((NimStringDesc*) &TMP192422), ((NimStringDesc*) &TMP192423), LOC1, 2);
return Result_149669;
}
N_NIMCALL(TY46008*, Rendertocentries_149674)(TY148017* D_149676, NI* J_149678, NI Lvl_149679) {
TY46008* Result_149680;
NI A_149683;
TY46008* LOC5;
TY46008* LOC8;
TY46446 LOC12;
Result_149680 = 0;
Result_149680 = NIM_NIL;
while (1) {
if (!((*J_149678) <= ((*D_149676).Tocpart->Sup.len-1))) goto LA1;
A_149683 = 0;
A_149683 = (NI32)abs((*(*D_149676).Tocpart->data[(*J_149678)].N).Level);
if (!(A_149683 == Lvl_149679)) goto LA3;
LOC5 = Rendertocentry_149665(D_149676, (*D_149676).Tocpart->data[(*J_149678)]);
App_46031(&Result_149680, LOC5);
(*J_149678) += 1;
goto LA2;
LA3: ;
if (!(Lvl_149679 < A_149683)) goto LA6;
LOC8 = Rendertocentries_149674(D_149676, J_149678, A_149683);
App_46031(&Result_149680, LOC8);
goto LA2;
LA6: ;
goto LA1;
LA2: ;
} LA1: ;
if (!(1 < Lvl_149679)) goto LA10;
LOC12[0] = Result_149680;
Result_149680 = Dispf_148579(((NimStringDesc*) &TMP192424), ((NimStringDesc*) &TMP192425), LOC12, 1);
LA10: ;
return Result_149680;
}
N_NIMCALL(void, Gensection_150447)(TY148017* D_150449, NU8 Kind_150450) {
TY46008* Title_150474;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY155568 LOC7;
NimStringDesc* LOC8;
TY155568 LOC9;
if (!((*D_150449).Section[(Kind_150450)-0] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Title_150474 = 0;
LOC5 = copyStr(reprEnum(Kind_150450, NTI49174), 2);
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendChar(LOC4, 115);
Title_150474 = Torope_46046(LOC4);
LOC6 = Getconfigvar_40133(((NimStringDesc*) &TMP192426));
LOC7[0] = Torope_46052(((NI64) (Kind_150450)));
LOC7[1] = Title_150474;
LOC7[2] = Torope_46052(((NI64) ((NI32)(Kind_150450 + 50))));
LOC7[3] = (*D_150449).Section[(Kind_150450)-0];
asgnRefNoCycle((void**) &(*D_150449).Section[(Kind_150450)-0], Ropeformatnamedvars_148220(LOC6, TMP192427, 4, LOC7, 4));
LOC8 = Getconfigvar_40133(((NimStringDesc*) &TMP192432));
LOC9[0] = Torope_46052(((NI64) (Kind_150450)));
LOC9[1] = Title_150474;
LOC9[2] = Torope_46052(((NI64) ((NI32)(Kind_150450 + 50))));
LOC9[3] = (*D_150449).Toc[(Kind_150450)-0];
asgnRefNoCycle((void**) &(*D_150449).Toc[(Kind_150450)-0], Ropeformatnamedvars_148220(LOC8, TMP192427, 4, LOC9, 4));
BeforeRet: ;
}
N_NIMCALL(TY46008*, Genoutfile_150511)(TY148017* D_150513) {
TY46008* Result_150514;
TY46008* Code_150515;
TY46008* Toc_150516;
TY46008* Title_150517;
TY46008* Content_150518;
NimStringDesc* Bodyname_150519;
NI J_150520;
NU8 I_150551;
NU8 Res_150629;
NimStringDesc* LOC5;
TY46446 LOC6;
NU8 I_150579;
NU8 Res_150634;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
NimStringDesc* LOC17;
TY156309 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC24;
TY156826 LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
Result_150514 = 0;
Code_150515 = 0;
Toc_150516 = 0;
Title_150517 = 0;
Content_150518 = 0;
Bodyname_150519 = 0;
J_150520 = 0;
J_150520 = 0;
Toc_150516 = Rendertocentries_149674(D_150513, &J_150520, 1);
Code_150515 = NIM_NIL;
Content_150518 = NIM_NIL;
Title_150517 = NIM_NIL;
I_150551 = 0;
Res_150629 = 0;
Res_150629 = ((NU8) 0);
while (1) {
if (!(Res_150629 <= ((NU8) 20))) goto LA1;
I_150551 = Res_150629;
Gensection_150447(D_150513, I_150551);
App_46031(&Toc_150516, (*D_150513).Toc[(I_150551)-0]);
Res_150629 += 1;
} LA1: ;
if (!!((Toc_150516 == NIM_NIL))) goto LA3;
LOC5 = Getconfigvar_40133(((NimStringDesc*) &TMP192433));
LOC6[0] = Toc_150516;
Toc_150516 = Ropeformatnamedvars_148220(LOC5, TMP192434, 1, LOC6, 1);
LA3: ;
I_150579 = 0;
Res_150634 = 0;
Res_150634 = ((NU8) 0);
while (1) {
if (!(Res_150634 <= ((NU8) 20))) goto LA7;
I_150579 = Res_150634;
App_46031(&Code_150515, (*D_150513).Section[(I_150579)-0]);
Res_150634 += 1;
} LA7: ;
if (!!(((*D_150513).Meta[(((NU8) 1))-0] == NIM_NIL))) goto LA9;
Title_150517 = (*D_150513).Meta[(((NU8) 1))-0];
goto LA8;
LA9: ;
LOC12 = nosChangeFileExt((*D_150513).Filename, ((NimStringDesc*) &TMP192164));
LOC13 = nosextractFilename(LOC12);
LOC11 = rawNewString(LOC13->Sup.len + 7);
appendString(LOC11, ((NimStringDesc*) &TMP192435));
appendString(LOC11, LOC13);
Title_150517 = Torope_46046(LOC11);
LA8: ;
if (!(*D_150513).Hastoc) goto LA15;
Bodyname_150519 = copyString(((NimStringDesc*) &TMP192436));
goto LA14;
LA15: ;
Bodyname_150519 = copyString(((NimStringDesc*) &TMP192437));
LA14: ;
LOC17 = Getconfigvar_40133(Bodyname_150519);
LOC18[0] = Title_150517;
LOC18[1] = Toc_150516;
LOC18[2] = (*D_150513).Moddesc;
LOC19 = ntgetDateStr();
LOC18[3] = Torope_46046(LOC19);
LOC20 = ntgetClockStr();
LOC18[4] = Torope_46046(LOC20);
LOC18[5] = Code_150515;
Content_150518 = Ropeformatnamedvars_148220(LOC17, TMP192438, 6, LOC18, 6);
if (!!(((Gglobaloptions_40077 &(1<<((((NU8) 6))&31)))!=0))) goto LA22;
LOC24 = Getconfigvar_40133(((NimStringDesc*) &TMP192444));
LOC25[0] = Title_150517;
LOC25[1] = Toc_150516;
LOC25[2] = (*D_150513).Moddesc;
LOC26 = ntgetDateStr();
LOC25[3] = Torope_46046(LOC26);
LOC27 = ntgetClockStr();
LOC25[4] = Torope_46046(LOC27);
LOC25[5] = Content_150518;
LOC25[6] = (*D_150513).Meta[(((NU8) 3))-0];
LOC25[7] = (*D_150513).Meta[(((NU8) 4))-0];
Code_150515 = Ropeformatnamedvars_148220(LOC24, TMP192445, 8, LOC25, 8);
goto LA21;
LA22: ;
Code_150515 = Content_150518;
LA21: ;
Result_150514 = Code_150515;
return Result_150514;
}
N_NIMCALL(TY46008*, Renderrstsons_149310)(TY148017* D_149312, TY140077* N_149313) {
TY46008* Result_149314;
NI I_149322;
NI HEX3Atmp_149325;
NI LOC1;
NI Res_149327;
TY46008* LOC3;
Result_149314 = 0;
I_149322 = 0;
HEX3Atmp_149325 = 0;
LOC1 = Rsonslen_140091(N_149313);
HEX3Atmp_149325 = (NI32)(LOC1 - 1);
Res_149327 = 0;
Res_149327 = 0;
while (1) {
if (!(Res_149327 <= HEX3Atmp_149325)) goto LA2;
I_149322 = Res_149327;
LOC3 = Renderrsttorst_149306(D_149312, (*N_149313).Sons->data[I_149322]);
App_46031(&Result_149314, LOC3);
Res_149327 += 1;
} LA2: ;
return Result_149314;
}
N_NIMCALL(TY46008*, Renderrsttorst_149306)(TY148017* D_149308, TY140077* N_149309) {
TY46008* Result_149334;
TY46008* Ind_149351;
NimStringDesc* LOC4;
NI L_149352;
TY154033 LOC5;
NimStringDesc* LOC6;
NI L_149357;
TY154033 LOC7;
NimStringDesc* LOC8;
TY169860 LOC9;
NimStringDesc* LOC10;
TY169860 LOC11;
TY169860 LOC15;
TY169860 LOC19;
TY169860 LOC20;
TY169860 LOC24;
NI L_149491;
NI LOC25;
TY155568 LOC26;
NI LOC27;
NimStringDesc* LOC28;
TY169860 LOC29;
TY46446 LOC30;
TY169860 LOC31;
TY169860 LOC32;
TY46446 LOC33;
TY46446 LOC34;
TY46446 LOC35;
TY46446 LOC36;
TY46446 LOC37;
TY46446 LOC38;
TY46446 LOC39;
NIM_BOOL LOC41;
TY169860 LOC48;
TY46446 LOC49;
Result_149334 = 0;
Result_149334 = NIM_NIL;
if (!(N_149309 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Ind_149351 = 0;
LOC4 = nsuRepeatChar((*D_149308).Indent, 32);
Ind_149351 = Torope_46046(LOC4);
switch ((*N_149309).Kind) {
case ((NU8) 0):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
break;
case ((NU8) 1):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
L_149352 = 0;
L_149352 = Ropelen_46055(Result_149334);
LOC5[0] = Ind_149351;
LOC5[1] = Result_149334;
LOC6 = nsuRepeatChar(L_149352, Lvltochar_149335[((*N_149309).Level)-0]);
LOC5[2] = Torope_46046(LOC6);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192446), LOC5, 3);
break;
case ((NU8) 2):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
L_149357 = 0;
L_149357 = Ropelen_46055(Result_149334);
LOC7[0] = Ind_149351;
LOC7[1] = Result_149334;
LOC8 = nsuRepeatChar(L_149357, Lvltochar_149335[((*N_149309).Level)-0]);
LOC7[2] = Torope_46046(LOC8);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192447), LOC7, 3);
break;
case ((NU8) 3):
LOC9[0] = Ind_149351;
LOC10 = nsuRepeatChar((NI32)(78 - (*D_149308).Indent), 45);
LOC9[1] = Torope_46046(LOC10);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192448), LOC9, 2);
break;
case ((NU8) 4):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC11[0] = Ind_149351;
LOC11[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192449), LOC11, 2);
break;
case ((NU8) 6):
(*D_149308).Indent += 2;
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
if (!!((Result_149334 == NIM_NIL))) goto LA13;
LOC15[0] = Ind_149351;
LOC15[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192450), LOC15, 2);
LA13: ;
(*D_149308).Indent -= 2;
break;
case ((NU8) 8):
(*D_149308).Indent += 4;
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
if (!!((Result_149334 == NIM_NIL))) goto LA17;
LOC19[0] = Ind_149351;
LOC19[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192451), LOC19, 2);
LA17: ;
(*D_149308).Indent -= 4;
break;
case ((NU8) 17):
case ((NU8) 13):
case ((NU8) 9):
case ((NU8) 10):
case ((NU8) 26):
case ((NU8) 15):
case ((NU8) 16):
case ((NU8) 37):
case ((NU8) 5):
case ((NU8) 7):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
break;
case ((NU8) 11):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC20[0] = Ind_149351;
LOC20[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192449), LOC20, 2);
break;
case ((NU8) 12):
(*D_149308).Indent += 2;
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
if (!!(((*(*N_149309).Sons->data[0]).Kind == ((NU8) 5)))) goto LA22;
LOC24[0] = Ind_149351;
LOC24[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192452), LOC24, 2);
LA22: ;
(*D_149308).Indent -= 2;
break;
case ((NU8) 14):
Result_149334 = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[0]);
L_149491 = 0;
LOC25 = Ropelen_46055(Result_149334);
L_149491 = (((NI32)(LOC25 + 3) >= 30) ? (NI32)(LOC25 + 3) : 30);
(*D_149308).Indent += L_149491;
LOC26[0] = Ind_149351;
LOC26[1] = Result_149334;
LOC27 = Ropelen_46055(Result_149334);
LOC28 = nsuRepeatChar((NI32)((NI32)(L_149491 - LOC27) - 2), 32);
LOC26[2] = Torope_46046(LOC28);
LOC26[3] = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[1]);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192453), LOC26, 4);
(*D_149308).Indent -= L_149491;
break;
case ((NU8) 27):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC29[0] = Ind_149351;
LOC29[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192454), LOC29, 2);
break;
case ((NU8) 28):
(*D_149308).Indent += 2;
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
(*D_149308).Indent -= 2;
break;
case ((NU8) 39):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC30[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192455), LOC30, 1);
break;
case ((NU8) 38):
LOC31[0] = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[0]);
LOC31[1] = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[1]);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192456), LOC31, 2);
break;
case ((NU8) 53):
Result_149334 = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[0]);
LOC32[0] = Result_149334;
LOC32[1] = Renderrsttorst_149306(D_149308, (*N_149309).Sons->data[1]);
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192457), LOC32, 2);
break;
case ((NU8) 54):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC33[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192458), LOC33, 1);
break;
case ((NU8) 55):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC34[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192459), LOC34, 1);
break;
case ((NU8) 56):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC35[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192460), LOC35, 1);
break;
case ((NU8) 57):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC36[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192461), LOC36, 1);
break;
case ((NU8) 58):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC37[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192462), LOC37, 1);
break;
case ((NU8) 59):
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC38[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192463), LOC38, 1);
break;
case ((NU8) 60):
(*D_149308).Verbatim += 1;
Result_149334 = Renderrstsons_149310(D_149308, N_149309);
LOC39[0] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192464), LOC39, 1);
(*D_149308).Verbatim -= 1;
break;
case ((NU8) 62):
LOC41 = ((*D_149308).Verbatim == 0);
if (!(LOC41)) goto LA42;
LOC41 = eqStrings((*N_149309).Text, ((NimStringDesc*) &TMP192465));
LA42: ;
if (!LOC41) goto LA43;
Result_149334 = Torope_46046(((NimStringDesc*) &TMP192466));
goto LA40;
LA43: ;
Result_149334 = Torope_46046((*N_149309).Text);
LA40: ;
break;
case ((NU8) 51):
(*D_149308).Indent += 3;
if (!!(((*N_149309).Sons->data[2] == NIM_NIL))) goto LA46;
Result_149334 = Renderrstsons_149310(D_149308, (*N_149309).Sons->data[2]);
LA46: ;
(*D_149308).Indent -= 3;
LOC48[0] = Ind_149351;
LOC48[1] = Result_149334;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192467), LOC48, 2);
break;
case ((NU8) 44):
LOC49[0] = Ind_149351;
Result_149334 = Ropef_46069(((NimStringDesc*) &TMP192468), LOC49, 1);
break;
default:
Rawmessage_41553(((NU8) 189), reprEnum((*N_149309).Kind, NTI140008));
break;
}
BeforeRet: ;
return Result_149334;
}
N_NIMCALL(void, Generateindex_150637)(TY148017* D_150639) {
TY46008* LOC4;
if (!!(((*D_150639).Theindex == NIM_NIL))) goto LA2;
Sortindex_140123((*D_150639).Theindex);
LOC4 = Renderrsttorst_149306(D_150639, (*D_150639).Indexfile);
Writerope_46058(LOC4, Gindexfile_40081);
LA2: ;
}
N_NIMCALL(void, Commanddoc_148001)(NimStringDesc* Filename_148003) {
TY49523* Ast_150654;
NimStringDesc* LOC1;
TY148017* D_150666;
TY46008* LOC5;
NimStringDesc* LOC6;
Ast_150654 = 0;
LOC1 = nosaddFileExt(Filename_148003, ((NimStringDesc*) &TMP192083));
Ast_150654 = Parsefile_85031(LOC1);
if (!(Ast_150654 == NIM_NIL)) goto LA3;
goto BeforeRet;
LA3: ;
D_150666 = 0;
D_150666 = Newdocumentor_148162(Filename_148003);
Initindexfile_148132(D_150666);
(*D_150666).Hastoc = NIM_TRUE;
Generatedoc_150108(D_150666, Ast_150654);
LOC5 = Genoutfile_150511(D_150666);
LOC6 = Getoutfile_40143(Filename_148003, ((NimStringDesc*) &TMP192092));
Writerope_46058(LOC5, LOC6);
Generateindex_150637(D_150666);
BeforeRet: ;
}
N_NIMCALL(void, Commandrstaux_150667)(NimStringDesc* Filename_150669, NimStringDesc* Outext_150670) {
NimStringDesc* Filen_150671;
TY148017* D_150672;
TY140077* Rst_150674;
NimStringDesc* LOC1;
TY46008* Code_150675;
NimStringDesc* LOC2;
Filen_150671 = 0;
Filen_150671 = nosaddFileExt(Filename_150669, ((NimStringDesc*) &TMP192091));
D_150672 = 0;
D_150672 = Newdocumentor_148162(Filen_150671);
Initindexfile_148132(D_150672);
Rst_150674 = 0;
LOC1 = Readfile_3647(Filen_150671);
Rst_150674 = Rstparse_140082(LOC1, NIM_FALSE, Filen_150671, 0, 1, &(*D_150672).Hastoc);
asgnRefNoCycle((void**) &(*D_150672).Moddesc, Renderrsttoout_148612(D_150672, Rst_150674));
Code_150675 = 0;
Code_150675 = Genoutfile_150511(D_150672);
LOC2 = Getoutfile_40143(Filename_150669, Outext_150670);
Writerope_46058(Code_150675, LOC2);
Generateindex_150637(D_150672);
}
N_NIMCALL(void, Commandrst2html_148004)(NimStringDesc* Filename_148006) {
Commandrstaux_150667(Filename_148006, ((NimStringDesc*) &TMP192092));
}
N_NIMCALL(void, Commandrst2tex_148007)(NimStringDesc* Filename_148009) {
asgnRefNoCycle((void**) &Splitter_148046, copyString(((NimStringDesc*) &TMP192470)));
Commandrstaux_150667(Filename_148009, ((NimStringDesc*) &TMP192471));
}
N_NOINLINE(void, docgenInit)(void) {
asgnRefNoCycle((void**) &Splitter_148046, copyString(((NimStringDesc*) &TMP148047)));
}

