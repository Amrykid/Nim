/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY104012 TY104012;
typedef struct TY51552 TY51552;
typedef struct TY123007 TY123007;
typedef struct TY51548 TY51548;
typedef struct TY51526 TY51526;
typedef struct TY51564 TY51564;
typedef struct TY51562 TY51562;
typedef struct TY51560 TY51560;
typedef struct TY50005 TY50005;
typedef struct TNimObject TNimObject;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY43538 TY43538;
typedef struct TY50011 TY50011;
typedef struct TY51520 TY51520;
typedef struct TY51550 TY51550;
typedef struct TY51540 TY51540;
typedef struct TY48008 TY48008;
typedef struct TY51530 TY51530;
typedef struct TY51528 TY51528;
typedef struct TY51544 TY51544;
typedef struct TY10602 TY10602;
typedef struct TY10614 TY10614;
typedef struct TY10996 TY10996;
typedef struct TY10618 TY10618;
typedef struct TY10610 TY10610;
typedef struct TY10994 TY10994;
typedef struct TY102002 TY102002;
typedef struct TY104006 TY104006;
typedef struct TY56099 TY56099;
typedef struct TY56101 TY56101;
typedef struct TY51895 TY51895;
typedef struct TY51891 TY51891;
typedef struct TY51893 TY51893;
typedef struct TY39019 TY39019;
typedef struct TY39013 TY39013;
typedef struct TY105004 TY105004;
typedef struct TY56084 TY56084;
struct TY51560 {
TY50005* Key;
TNimObject* Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY51564 {
NI Counter;
TY51562* Data;
};
struct TY123007 {
NI Exactmatches;
NI Subtypematches;
NI Intconvmatches;
NI Convmatches;
NI Genericmatches;
NU8 State;
TY51552* Callee;
TY51548* Calleesym;
TY51526* Call;
TY51564 Bindings;
NIM_BOOL Basetypematch;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef NIM_CHAR TY245[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY245 data;
};
struct TY43538 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51526 {
TY51552* Typ;
NimStringDesc* Comment;
TY43538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51548* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51520* Sons;
} S6;
} KindU;
};
struct TNimObject {
TNimType* m_type;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
struct TY51540 {
NU8 K;
NU8 S;
NU8 Flags;
TY51552* T;
TY48008* R;
NI A;
};
struct TY51552 {
  TY50005 Sup;
NU8 Kind;
TY51550* Sons;
TY51526* N;
NU8 Flags;
NU8 Callconv;
TY51548* Owner;
TY51548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51540 Loc;
};
struct TY51530 {
TNimType* m_type;
NI Counter;
TY51528* Data;
};
struct TY51548 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51552* Typ;
TY50011* Name;
TY43538 Info;
TY51548* Owner;
NU32 Flags;
TY51530 Tab;
TY51526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51540 Loc;
TY51544* Annex;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY10994 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10996 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY10994 Stat;
};
struct TY102002 {
  TNimObject Sup;
};
struct TY56099 {
NI Tos;
TY56101* Stack;
};
struct TY51895 {
NI Counter;
NI Max;
TY51891* Head;
TY51893* Data;
};
struct TY39019 {
TNimType* m_type;
TY39013* Head;
TY39013* Tail;
NI Counter;
};
typedef N_NIMCALL_PTR(TY51526*, TY104032) (TY104012* C_104033, TY51526* N_104034);
typedef N_NIMCALL_PTR(TY51526*, TY104037) (TY104012* C_104038, TY51526* N_104039);
struct TY104012 {
  TY102002 Sup;
TY51548* Module;
TY104006* P;
NI Instcounter;
TY51526* Generics;
NI Lastgenericidx;
TY56099 Tab;
TY51895 Ambiguoussymbols;
TY51528* Converters;
TY39019 Optionstack;
TY39019 Libs;
NIM_BOOL Fromcache;
TY104032 Semconstexpr;
TY104037 Semexpr;
TY51895 Includedfiles;
NimStringDesc* Filename;
TY51530 Userpragmas;
};
struct TY56084 {
NI H;
TY50011* Name;
};
struct TY105004 {
NI Stackptr;
TY56084 It;
TY51548* M;
NU8 Mode;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51544 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51526* Path;
};
typedef NI TY8614[16];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY104006 {
TY51548* Owner;
TY51548* Resultsym;
NI Nestedloopcounter;
NI Nestedblockcounter;
};
struct TY51891 {
TY51891* Next;
NI Key;
TY8614 Bits;
};
struct TY51562 {
  TGenericSeq Sup;
  TY51560 data[SEQ_DECL_SIZE];
};
struct TY51520 {
  TGenericSeq Sup;
  TY51526* data[SEQ_DECL_SIZE];
};
struct TY51550 {
  TGenericSeq Sup;
  TY51552* data[SEQ_DECL_SIZE];
};
struct TY51528 {
  TGenericSeq Sup;
  TY51548* data[SEQ_DECL_SIZE];
};
struct TY56101 {
  TGenericSeq Sup;
  TY51530 data[SEQ_DECL_SIZE];
};
struct TY51893 {
  TGenericSeq Sup;
  TY51891* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, genericReset)(void* Dest_19528, TNimType* Mt_19529);
N_NIMCALL(void, Initcandidate_123035)(TY123007* C_123038, TY51552* Callee_123039);
static N_INLINE(void, Initcandidateaux_123030)(TY123007* C_123033, TY51552* Callee_123034);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027);
N_NIMCALL(void, Initidtable_51755)(TY51564* X_51758);
N_NIMCALL(TY51526*, Paramtypesmatch_124712)(TY104012* C_124714, TY123007* M_124716, TY51552* F_124717, TY51552* A_124718, TY51526* Arg_124719);
N_NIMCALL(TY51526*, Paramtypesmatchaux_124566)(TY104012* C_124568, TY123007* M_124570, TY51552* F_124571, TY51552* A_124572, TY51526* Arg_124573);
N_NIMCALL(NU8, Typerel_123303)(TY51564* Mapping_123306, TY51552* F_123307, TY51552* A_123308);
N_NIMCALL(TY51552*, Skiptypes_94087)(TY51552* T_94089, NU64 Kinds_94090);
static N_INLINE(TY51552*, Lastson_51813)(TY51552* N_51815);
static N_INLINE(NI, Sonslen_51807)(TY51552* N_51809);
N_NIMCALL(TY51552*, Base_94021)(TY51552* T_94023);
N_NIMCALL(NU8, Handlerange_123334)(TY51552* F_123336, TY51552* A_123337, NU8 Min_123338, NU8 Max_123339);
N_NIMCALL(NU8, Handlefloatrange_123400)(TY51552* F_123402, TY51552* A_123403);
N_NIMCALL(NU8, Minrel_123473)(NU8 A_123475, NU8 B_123476);
N_NIMCALL(NI64, Lengthord_94007)(TY51552* T_94009);
N_NIMCALL(NIM_BOOL, Isordinaltype_94069)(TY51552* T_94071);
N_NIMCALL(void, Internalerror_44212)(NimStringDesc* Errmsg_44214);
N_NIMCALL(NU8, Tuplerel_123487)(TY51564* Mapping_123490, TY51552* F_123491, TY51552* A_123492);
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806);
N_NIMCALL(void, Internalerror_44208)(TY43538 Info_44210, NimStringDesc* Errmsg_44211);
N_NIMCALL(NIM_BOOL, Isobjectsubtype_123443)(TY51552* A_123445, TY51552* F_123446);
N_NIMCALL(NI64, Firstord_94001)(TY51552* T_94003);
N_NIMCALL(TNimObject*, Idtableget_56158)(TY51564 T_56160, TY50005* Key_56161);
N_NIMCALL(void, Idtableput_56166)(TY51564* T_56169, TY50005* Key_56170, TNimObject* Val_56171);
N_NIMCALL(TY51552*, Concretetype_123309)(TY51564 Mapping_123311, TY51552* T_123312);
N_NIMCALL(TY51552*, Newtype_51707)(NU8 Kind_51709, TY51548* Owner_51710);
N_NIMCALL(void, Addson_51828)(TY51552* Father_51830, TY51552* Son_51831);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18489);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19632, TNimType* Typ_19633);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18616, NIM_CHAR C_18617);
N_NIMCALL(TY51526*, Implicitconv_124481)(NU8 Kind_124483, TY51552* F_124484, TY51526* Arg_124485, TY123007* M_124486, TY104012* C_124487);
N_NIMCALL(TY51526*, Newnodei_51738)(NU8 Kind_51740, TY43538 Info_51741);
N_NIMCALL(NIM_BOOL, Containsgenerictype_122066)(TY51552* T_122068);
N_NIMCALL(TY51552*, Getinstantiatedtype_124452)(TY104012* C_124454, TY51526* Arg_124455, TY123007* M_124456, TY51552* F_124457);
N_NIMCALL(TY51552*, Generatetypeinstance_122447)(TY104012* P_122449, TY51564 Pt_122450, TY51526* Arg_122451, TY51552* T_122452);
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015);
static N_INLINE(void, Incref_13002)(TY10602* C_13004);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418);
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054);
N_NOINLINE(void, Incl_10880)(TY10614* S_10883, TY10602* Cell_10884);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(void, Decref_12801)(TY10602* C_12803);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(void, Addson_51824)(TY51526* Father_51826, TY51526* Son_51827);
N_NIMCALL(TY51526*, Copytree_51852)(TY51526* Src_51854);
N_NIMCALL(TY51526*, Userconvmatch_124500)(TY104012* C_124502, TY123007* M_124504, TY51552* F_124505, TY51552* A_124506, TY51526* Arg_124507);
N_NIMCALL(TY51526*, Newsymnode_51735)(TY51548* Sym_51737);
N_NIMCALL(TY51526*, Newnodeit_51742)(NU8 Kind_51744, TY43538 Info_51745, TY51552* Typ_51746);
N_NIMCALL(void, Copycandidate_123103)(TY123007* A_123106, TY123007* B_123107);
N_NIMCALL(void, Copyidtable_51799)(TY51564* Dest_51802, TY51564 Src_51803);
N_NIMCALL(void, genericAssign)(void* Dest_19452, void* Src_19453, TNimType* Mt_19454);
N_NIMCALL(NI, Cmpcandidates_123109)(TY123007* A_123111, TY123007* B_123112);
N_NIMCALL(void, Markused_104403)(TY51526* N_104405, TY51548* S_104406);
static N_INLINE(TY51526*, HEX5BHEX5D_53137)(TY51526* N_53139, NI I_53140);
N_NIMCALL(void, Intsetinit_51919)(TY51895* S_51922);
N_NIMCALL(void, Matchesaux_124977)(TY104012* C_124979, TY51526* N_124980, TY123007* M_124982, TY51895* Marker_124984);
N_NIMCALL(void, Localerror_44193)(TY43538 Info_44195, NU8 Msg_44196, NimStringDesc* Arg_44197);
N_NIMCALL(TY51548*, Getsymfromlist_56189)(TY51526* List_56191, TY50011* Ident_56192, NI Start_56193);
N_NIMCALL(NIM_BOOL, Intsetcontainsorincl_51923)(TY51895* S_51926, NI Key_51927);
N_NIMCALL(void, Setson_124934)(TY51526* Father_124936, NI At_124937, TY51526* Son_124938);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
N_NIMCALL(TY51552*, Getsystype_99008)(NU8 Kind_99010);
N_NIMCALL(NimStringDesc*, Msgkindtostring_43832)(NU8 Kind_43834);
N_NIMCALL(NimStringDesc*, Rendertree_82042)(TY51526* N_82044, NU8 Renderflags_82047);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18589, NI Addlen_18590);
N_NIMCALL(NimStringDesc*, Typetostring_94014)(TY51552* Typ_94016, NU8 Prefer_94017);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1803, NIM_CHAR C_1804);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18512);
N_NIMCALL(TY51548*, Initoverloaditer_105745)(TY105004* O_105748, TY104012* C_105749, TY51526* N_105750);
N_NIMCALL(NimStringDesc*, Getprocheader_94018)(TY51548* Sym_94020);
N_NIMCALL(TY51548*, Nextoverloaditer_106074)(TY105004* O_106077, TY104012* C_106078, TY51526* N_106079);
STRING_LITERAL(TMP194035, "forward type in typeRel()", 25);
STRING_LITERAL(TMP194036, "tupleRel", 8);
STRING_LITERAL(TMP194037, "typeRel: tyGenericInvokation -> tyGenericInvokation", 51);
STRING_LITERAL(TMP194038, "wrong instantiated type!", 24);
STRING_LITERAL(TMP194039, "has constraints: ", 17);
STRING_LITERAL(TMP194040, "typeRel(", 8);
STRING_LITERAL(TMP194051, "getInstantiatedType", 19);
STRING_LITERAL(TMP194052, "implicitConv", 12);
STRING_LITERAL(TMP194053, "x.state is not csMatch", 22);
STRING_LITERAL(TMP194054, "", 0);
STRING_LITERAL(TMP194073, "matches", 7);
STRING_LITERAL(TMP194252, ": ", 2);
STRING_LITERAL(TMP194253, ", ", 2);
STRING_LITERAL(TMP194254, "\015\012", 2);
extern TNimType* NTI123007; /* TCandidate */
extern TNimType* NTI51162; /* TTypeKind */
extern TY10996 Gch_11014;
extern TY51526* Emptynode_51858;
extern TNimType* NTI51895; /* TIntSet */
extern TNimType* NTI51564; /* TIdTable */
extern TNimType* NTI105004; /* TOverloadIter */
static N_INLINE(void, Initcandidateaux_123030)(TY123007* C_123033, TY51552* Callee_123034) {
(*C_123033).Exactmatches = 0;
(*C_123033).Subtypematches = 0;
(*C_123033).Convmatches = 0;
(*C_123033).Intconvmatches = 0;
(*C_123033).Genericmatches = 0;
(*C_123033).State = ((NU8) 0);
unsureAsgnRef((void**) &(*C_123033).Callee, Callee_123034);
unsureAsgnRef((void**) &(*C_123033).Call, NIM_NIL);
(*C_123033).Basetypematch = NIM_FALSE;
}
N_NIMCALL(void, Initcandidate_123035)(TY123007* C_123038, TY51552* Callee_123039) {
Initcandidateaux_123030(C_123038, Callee_123039);
unsureAsgnRef((void**) &(*C_123038).Calleesym, NIM_NIL);
Initidtable_51755(&(*C_123038).Bindings);
}
static N_INLINE(NI, Sonslen_51807)(TY51552* N_51809) {
NI Result_52761;
Result_52761 = 0;
if (!(*N_51809).Sons == 0) goto LA2;
Result_52761 = 0;
goto LA1;
LA2: ;
Result_52761 = (*N_51809).Sons->Sup.len;
LA1: ;
return Result_52761;
}
static N_INLINE(TY51552*, Lastson_51813)(TY51552* N_51815) {
TY51552* Result_53932;
NI LOC1;
Result_53932 = 0;
Result_53932 = NIM_NIL;
LOC1 = Sonslen_51807(N_51815);
Result_53932 = (*N_51815).Sons->data[(NI32)(LOC1 - 1)];
return Result_53932;
}
N_NIMCALL(NU8, Handlerange_123334)(TY51552* F_123336, TY51552* A_123337, NU8 Min_123338, NU8 Max_123339) {
NU8 Result_123340;
NU8 K_123351;
TY51552* LOC4;
NIM_BOOL LOC8;
NIM_BOOL LOC12;
Result_123340 = 0;
if (!((*A_123337).Kind == (*F_123336).Kind)) goto LA2;
Result_123340 = ((NU8) 5);
goto LA1;
LA2: ;
K_123351 = 0;
LOC4 = 0;
LOC4 = Skiptypes_94087(A_123337, 1048576);
K_123351 = (*LOC4).Kind;
if (!(K_123351 == (*F_123336).Kind)) goto LA6;
Result_123340 = ((NU8) 3);
goto LA5;
LA6: ;
LOC8 = ((*F_123336).Kind == ((NU8) 31));
if (!(LOC8)) goto LA9;
LOC8 = (K_123351 >= ((NU8) 31) && K_123351 <= ((NU8) 34));
LA9: ;
if (!LOC8) goto LA10;
Result_123340 = ((NU8) 2);
goto LA5;
LA10: ;
LOC12 = (Min_123338 <= K_123351);
if (!(LOC12)) goto LA13;
LOC12 = (K_123351 <= Max_123339);
LA13: ;
if (!LOC12) goto LA14;
Result_123340 = ((NU8) 1);
goto LA5;
LA14: ;
Result_123340 = ((NU8) 0);
LA5: ;
LA1: ;
return Result_123340;
}
N_NIMCALL(NU8, Handlefloatrange_123400)(TY51552* F_123402, TY51552* A_123403) {
NU8 Result_123404;
NU8 K_123415;
TY51552* LOC4;
NIM_BOOL LOC8;
Result_123404 = 0;
if (!((*A_123403).Kind == (*F_123402).Kind)) goto LA2;
Result_123404 = ((NU8) 5);
goto LA1;
LA2: ;
K_123415 = 0;
LOC4 = 0;
LOC4 = Skiptypes_94087(A_123403, 1048576);
K_123415 = (*LOC4).Kind;
if (!(K_123415 == (*F_123402).Kind)) goto LA6;
Result_123404 = ((NU8) 3);
goto LA5;
LA6: ;
LOC8 = (((NU8) 36) <= K_123415);
if (!(LOC8)) goto LA9;
LOC8 = (K_123415 <= ((NU8) 39));
LA9: ;
if (!LOC8) goto LA10;
Result_123404 = ((NU8) 1);
goto LA5;
LA10: ;
Result_123404 = ((NU8) 0);
LA5: ;
LA1: ;
return Result_123404;
}
N_NIMCALL(NU8, Minrel_123473)(NU8 A_123475, NU8 B_123476) {
NU8 Result_123477;
Result_123477 = 0;
if (!(A_123475 <= B_123476)) goto LA2;
Result_123477 = A_123475;
goto LA1;
LA2: ;
Result_123477 = B_123476;
LA1: ;
return Result_123477;
}
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806) {
NI Result_52897;
Result_52897 = 0;
if (!(*N_51806).KindU.S6.Sons == 0) goto LA2;
Result_52897 = 0;
goto LA1;
LA2: ;
Result_52897 = (*N_51806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_52897;
}
N_NIMCALL(NU8, Tuplerel_123487)(TY51564* Mapping_123490, TY51552* F_123491, TY51552* A_123492) {
NU8 Result_123493;
NI LOC2;
NI LOC3;
NI I_123504;
NI HEX3Atmp_123642;
NI LOC6;
NI Res_123644;
NU8 M_123505;
NIM_BOOL LOC12;
NI I_123547;
NI HEX3Atmp_123645;
NI LOC16;
NI Res_123647;
TY51548* X_123614;
TY51548* Y_123639;
X_123614 = 0;
Y_123639 = 0;
Result_123493 = 0;
Result_123493 = ((NU8) 0);
LOC2 = Sonslen_51807(A_123492);
LOC3 = Sonslen_51807(F_123491);
if (!(LOC2 == LOC3)) goto LA4;
Result_123493 = ((NU8) 5);
I_123504 = 0;
HEX3Atmp_123642 = 0;
LOC6 = Sonslen_51807(F_123491);
HEX3Atmp_123642 = (NI32)(LOC6 - 1);
Res_123644 = 0;
Res_123644 = 0;
while (1) {
if (!(Res_123644 <= HEX3Atmp_123642)) goto LA7;
I_123504 = Res_123644;
M_123505 = 0;
M_123505 = Typerel_123303(Mapping_123490, (*F_123491).Sons->data[I_123504], (*A_123492).Sons->data[I_123504]);
if (!(M_123505 < ((NU8) 3))) goto LA9;
Result_123493 = ((NU8) 0);
goto BeforeRet;
LA9: ;
Result_123493 = Minrel_123473(Result_123493, M_123505);
Res_123644 += 1;
} LA7: ;
LOC12 = !(((*F_123491).N == NIM_NIL));
if (!(LOC12)) goto LA13;
LOC12 = !(((*A_123492).N == NIM_NIL));
LA13: ;
if (!LOC12) goto LA14;
I_123547 = 0;
HEX3Atmp_123645 = 0;
LOC16 = Sonslen_51804((*F_123491).N);
HEX3Atmp_123645 = (NI32)(LOC16 - 1);
Res_123647 = 0;
Res_123647 = 0;
while (1) {
if (!(Res_123647 <= HEX3Atmp_123645)) goto LA17;
I_123547 = Res_123647;
if (!!(((*(*(*F_123491).N).KindU.S6.Sons->data[I_123547]).Kind == ((NU8) 3)))) goto LA19;
Internalerror_44208((*(*F_123491).N).Info, ((NimStringDesc*) &TMP194036));
LA19: ;
if (!!(((*(*(*A_123492).N).KindU.S6.Sons->data[I_123547]).Kind == ((NU8) 3)))) goto LA22;
Internalerror_44208((*(*A_123492).N).Info, ((NimStringDesc*) &TMP194036));
LA22: ;
X_123614 = NIM_NIL;
X_123614 = (*(*(*F_123491).N).KindU.S6.Sons->data[I_123547]).KindU.S4.Sym;
Y_123639 = NIM_NIL;
Y_123639 = (*(*(*A_123492).N).KindU.S6.Sons->data[I_123547]).KindU.S4.Sym;
if (!!(((*(*X_123614).Name).Sup.Id == (*(*Y_123639).Name).Sup.Id))) goto LA25;
Result_123493 = ((NU8) 0);
goto BeforeRet;
LA25: ;
Res_123647 += 1;
} LA17: ;
LA14: ;
LA4: ;
BeforeRet: ;
return Result_123493;
}
N_NIMCALL(NIM_BOOL, Isobjectsubtype_123443)(TY51552* A_123445, TY51552* F_123446) {
NIM_BOOL Result_123447;
TY51552* T_123448;
NIM_BOOL LOC2;
T_123448 = 0;
Result_123447 = 0;
T_123448 = NIM_NIL;
T_123448 = A_123445;
while (1) {
LOC2 = !((T_123448 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*T_123448).Sup.Id == (*F_123446).Sup.Id));
LA3: ;
if (!LOC2) goto LA1;
T_123448 = Base_94021(T_123448);
} LA1: ;
Result_123447 = !((T_123448 == NIM_NIL));
return Result_123447;
}
N_NIMCALL(TY51552*, Concretetype_123309)(TY51564 Mapping_123311, TY51552* T_123312) {
TY51552* Result_123313;
TNimObject* LOC2;
Result_123313 = 0;
Result_123313 = NIM_NIL;
switch ((*T_123312).Kind) {
case ((NU8) 4):
Result_123313 = Newtype_51707(((NU8) 16), (*T_123312).Owner);
Addson_51828(Result_123313, (*T_123312).Sons->data[0]);
Addson_51828(Result_123313, (*T_123312).Sons->data[1]);
break;
case ((NU8) 5):
Result_123313 = NIM_NIL;
break;
case ((NU8) 12):
Result_123313 = T_123312;
while (1) {
LOC2 = 0;
LOC2 = Idtableget_56158(Mapping_123311, &T_123312->Sup);
Result_123313 = ((TY51552*) (LOC2));
if (!(Result_123313 == NIM_NIL)) goto LA4;
goto LA1;
LA4: ;
if (!!(((*Result_123313).Kind == ((NU8) 12)))) goto LA7;
goto LA1;
LA7: ;
} LA1: ;
break;
default:
Result_123313 = T_123312;
break;
}
return Result_123313;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600) {
memcpy(((NCSTRING) (&(*Dest_18599).data[((*Dest_18599).Sup.len)-0])), ((NCSTRING) ((*Src_18600).data)), ((NI32) ((NI32)((NI32)((*Src_18600).Sup.len + 1) * 1))));
(*Dest_18599).Sup.len += (*Src_18600).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18616, NIM_CHAR C_18617) {
(*Dest_18616).data[((*Dest_18616).Sup.len)-0] = C_18617;
(*Dest_18616).data[((NI32)((*Dest_18616).Sup.len + 1))-0] = 0;
(*Dest_18616).Sup.len += 1;
}
N_NIMCALL(NU8, Typerel_123303)(TY51564* Mapping_123306, TY51552* F_123307, TY51552* A_123308) {
NU8 Result_123654;
TY51552* X_123655;
TY51552* Concrete_123656;
NU8 M_123657;
NIM_BOOL LOC2;
TY51552* LOC4;
TY51552* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC14;
TY51552* LOC18;
TY51552* LOC24;
TY51552* LOC30;
TY51552* LOC31;
TY51552* LOC35;
TY51552* LOC41;
TY51552* LOC42;
TY51552* LOC43;
NU8 LOC44;
NU8 LOC45;
NIM_BOOL LOC53;
NI64 LOC55;
NI64 LOC56;
NU8 LOC61;
TY51552* LOC62;
TY51552* LOC63;
NIM_BOOL LOC68;
TY51552* LOC72;
NU8 LOC73;
NIM_BOOL LOC77;
TY51552* LOC81;
NU8 LOC82;
NIM_BOOL LOC86;
TY51552* LOC90;
NU8 LOC91;
NIM_BOOL LOC95;
NIM_BOOL LOC103;
NIM_BOOL LOC124;
NIM_BOOL LOC128;
NIM_BOOL LOC136;
TY51552* LOC143;
TY51552* LOC144;
TY51552* LOC148;
TY51552* LOC149;
NIM_BOOL LOC154;
NI LOC155;
NI LOC156;
NI I_124090;
NI HEX3Atmp_124432;
NI LOC160;
NI Res_124434;
NIM_BOOL LOC163;
NU8 LOC165;
NIM_BOOL LOC184;
NIM_BOOL LOC192;
NIM_BOOL LOC193;
NI64 LOC194;
TY51552* LOC196;
TY51552* LOC203;
TY51552* LOC204;
NIM_BOOL LOC212;
NI LOC214;
NI LOC215;
NI I_124285;
NI HEX3Atmp_124435;
NI LOC218;
NI Res_124437;
NU8 LOC224;
NI I_124323;
NI HEX3Atmp_124438;
NI LOC230;
NI Res_124440;
TNimObject* LOC232;
NIM_BOOL LOC234;
TNimObject* LOC238;
NI LOC243;
NimStringDesc* LOC249;
NI I_124376;
NI HEX3Atmp_124441;
NI LOC250;
NI Res_124443;
NU8 LOC253;
NimStringDesc* LOC266;
X_123655 = 0;
Concrete_123656 = 0;
Result_123654 = 0;
X_123655 = NIM_NIL;
Concrete_123656 = NIM_NIL;
M_123657 = 0;
Result_123654 = ((NU8) 0);
LOC2 = ((*A_123308).Kind == ((NU8) 11));
if (!(LOC2)) goto LA3;
LOC4 = 0;
LOC4 = Skiptypes_94087(F_123307, 8388608);
LOC2 = !(((*LOC4).Kind == ((NU8) 10) || (*LOC4).Kind == ((NU8) 9)));
LA3: ;
if (!LOC2) goto LA5;
LOC7 = 0;
LOC7 = Lastson_51813(A_123308);
Result_123654 = Typerel_123303(Mapping_123306, F_123307, LOC7);
goto BeforeRet;
LA5: ;
LOC9 = ((*A_123308).Kind == ((NU8) 23));
if (!(LOC9)) goto LA10;
LOC9 = !(((*F_123307).Kind == ((NU8) 23)));
LA10: ;
if (!LOC9) goto LA11;
Result_123654 = Typerel_123303(Mapping_123306, F_123307, (*A_123308).Sons->data[0]);
goto BeforeRet;
LA11: ;
switch ((*F_123307).Kind) {
case ((NU8) 14):
LOC14 = ((*A_123308).Kind == (*F_123307).Kind);
if (!(LOC14)) goto LA15;
LOC14 = ((*A_123308).Sup.Id == (*F_123307).Sup.Id);
LA15: ;
if (!LOC14) goto LA16;
Result_123654 = ((NU8) 5);
goto LA13;
LA16: ;
LOC18 = 0;
LOC18 = Skiptypes_94087(A_123308, 1048576);
if (!((*LOC18).Sup.Id == (*F_123307).Sup.Id)) goto LA19;
Result_123654 = ((NU8) 3);
goto LA13;
LA19: ;
LA13: ;
break;
case ((NU8) 1):
case ((NU8) 2):
if (!((*A_123308).Kind == (*F_123307).Kind)) goto LA22;
Result_123654 = ((NU8) 5);
goto LA21;
LA22: ;
LOC24 = 0;
LOC24 = Skiptypes_94087(A_123308, 1048576);
if (!((*LOC24).Kind == (*F_123307).Kind)) goto LA25;
Result_123654 = ((NU8) 3);
goto LA21;
LA25: ;
LA21: ;
break;
case ((NU8) 20):
if (!((*A_123308).Kind == (*F_123307).Kind)) goto LA28;
LOC30 = 0;
LOC30 = Base_94021(A_123308);
LOC31 = 0;
LOC31 = Base_94021(F_123307);
Result_123654 = Typerel_123303(Mapping_123306, LOC30, LOC31);
if (!(Result_123654 < ((NU8) 4))) goto LA33;
Result_123654 = ((NU8) 0);
LA33: ;
goto LA27;
LA28: ;
LOC35 = 0;
LOC35 = Skiptypes_94087(F_123307, 1048576);
if (!((*LOC35).Kind == (*A_123308).Kind)) goto LA36;
Result_123654 = ((NU8) 1);
goto LA27;
LA36: ;
LA27: ;
break;
case ((NU8) 31):
Result_123654 = Handlerange_123334(F_123307, A_123308, ((NU8) 32), ((NU8) 34));
break;
case ((NU8) 32):
Result_123654 = Handlerange_123334(F_123307, A_123308, ((NU8) 32), ((NU8) 32));
break;
case ((NU8) 33):
Result_123654 = Handlerange_123334(F_123307, A_123308, ((NU8) 32), ((NU8) 33));
break;
case ((NU8) 34):
Result_123654 = Handlerange_123334(F_123307, A_123308, ((NU8) 31), ((NU8) 34));
break;
case ((NU8) 35):
Result_123654 = Handlerange_123334(F_123307, A_123308, ((NU8) 31), ((NU8) 35));
break;
case ((NU8) 36):
Result_123654 = Handlefloatrange_123400(F_123307, A_123308);
break;
case ((NU8) 37):
Result_123654 = Handlefloatrange_123400(F_123307, A_123308);
break;
case ((NU8) 38):
Result_123654 = Handlefloatrange_123400(F_123307, A_123308);
break;
case ((NU8) 39):
Result_123654 = Handlefloatrange_123400(F_123307, A_123308);
break;
case ((NU8) 23):
if (!((*A_123308).Kind == (*F_123307).Kind)) goto LA39;
LOC41 = 0;
LOC41 = Base_94021(F_123307);
LOC42 = 0;
LOC42 = Base_94021(A_123308);
Result_123654 = Typerel_123303(Mapping_123306, LOC41, LOC42);
goto LA38;
LA39: ;
LOC43 = 0;
LOC43 = Base_94021(F_123307);
Result_123654 = Typerel_123303(Mapping_123306, LOC43, A_123308);
LA38: ;
break;
case ((NU8) 16):
case ((NU8) 4):
switch ((*A_123308).Kind) {
case ((NU8) 16):
LOC44 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], (*A_123308).Sons->data[0]);
LOC45 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[1], (*A_123308).Sons->data[1]);
Result_123654 = Minrel_123473(LOC44, LOC45);
if (!(Result_123654 < ((NU8) 4))) goto LA47;
Result_123654 = ((NU8) 0);
LA47: ;
break;
case ((NU8) 4):
Result_123654 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[1], (*A_123308).Sons->data[1]);
if (!(Result_123654 < ((NU8) 4))) goto LA50;
Result_123654 = ((NU8) 0);
goto LA49;
LA50: ;
LOC53 = !((Result_123654 == ((NU8) 4)));
if (!(LOC53)) goto LA54;
LOC55 = Lengthord_94007(F_123307);
LOC56 = Lengthord_94007(A_123308);
LOC53 = !((LOC55 == LOC56));
LA54: ;
if (!LOC53) goto LA57;
Result_123654 = ((NU8) 0);
goto LA52;
LA57: ;
if (!((*(*F_123307).Sons->data[0]).Kind == ((NU8) 9) || (*(*F_123307).Sons->data[0]).Kind == ((NU8) 10) || (*(*F_123307).Sons->data[0]).Kind == ((NU8) 12))) goto LA59;
LOC61 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], (*A_123308).Sons->data[0]);
Result_123654 = Minrel_123473(Result_123654, LOC61);
goto LA52;
LA59: ;
LA52: ;
LA49: ;
break;
default:
break;
}
break;
case ((NU8) 27):
switch ((*A_123308).Kind) {
case ((NU8) 27):
LOC62 = 0;
LOC62 = Base_94021(F_123307);
LOC63 = 0;
LOC63 = Base_94021(A_123308);
Result_123654 = Typerel_123303(Mapping_123306, LOC62, LOC63);
if (!(Result_123654 < ((NU8) 4))) goto LA65;
Result_123654 = ((NU8) 0);
LA65: ;
break;
case ((NU8) 4):
LOC68 = !(((*(*F_123307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC68)) goto LA69;
LOC68 = ((*(*A_123308).Sons->data[1]).Kind == ((NU8) 3));
LA69: ;
if (!LOC68) goto LA70;
Result_123654 = ((NU8) 3);
goto LA67;
LA70: ;
LOC72 = 0;
LOC72 = Base_94021(F_123307);
LOC73 = Typerel_123303(Mapping_123306, LOC72, (*A_123308).Sons->data[1]);
if (!(((NU8) 4) <= LOC73)) goto LA74;
Result_123654 = ((NU8) 3);
goto LA67;
LA74: ;
LA67: ;
break;
case ((NU8) 16):
LOC77 = !(((*(*F_123307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC77)) goto LA78;
LOC77 = ((*(*A_123308).Sons->data[1]).Kind == ((NU8) 3));
LA78: ;
if (!LOC77) goto LA79;
Result_123654 = ((NU8) 3);
goto LA76;
LA79: ;
LOC81 = 0;
LOC81 = Base_94021(F_123307);
LOC82 = Typerel_123303(Mapping_123306, LOC81, (*A_123308).Sons->data[1]);
if (!(((NU8) 4) <= LOC82)) goto LA83;
Result_123654 = ((NU8) 1);
goto LA76;
LA83: ;
LA76: ;
break;
case ((NU8) 24):
LOC86 = !(((*(*F_123307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC86)) goto LA87;
LOC86 = ((*(*A_123308).Sons->data[0]).Kind == ((NU8) 3));
LA87: ;
if (!LOC86) goto LA88;
Result_123654 = ((NU8) 1);
goto LA85;
LA88: ;
LOC90 = 0;
LOC90 = Base_94021(F_123307);
LOC91 = Typerel_123303(Mapping_123306, LOC90, (*A_123308).Sons->data[0]);
if (!(((NU8) 4) <= LOC91)) goto LA92;
Result_123654 = ((NU8) 1);
goto LA85;
LA92: ;
LA85: ;
break;
default:
break;
}
break;
case ((NU8) 24):
switch ((*A_123308).Kind) {
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
case ((NU8) 24):
LOC95 = !(((*(*F_123307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC95)) goto LA96;
LOC95 = ((*(*A_123308).Sons->data[0]).Kind == ((NU8) 3));
LA96: ;
if (!LOC95) goto LA97;
Result_123654 = ((NU8) 3);
goto LA94;
LA97: ;
Result_123654 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], (*A_123308).Sons->data[0]);
if (!(Result_123654 < ((NU8) 4))) goto LA100;
Result_123654 = ((NU8) 0);
LA100: ;
LA94: ;
break;
default:
break;
}
break;
case ((NU8) 15):
LOC103 = Isordinaltype_94069(A_123308);
if (!LOC103) goto LA104;
if (!((*A_123308).Kind == ((NU8) 15))) goto LA107;
X_123655 = (*A_123308).Sons->data[0];
goto LA106;
LA107: ;
X_123655 = A_123308;
LA106: ;
Result_123654 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], X_123655);
if (!(Result_123654 < ((NU8) 4))) goto LA110;
Result_123654 = ((NU8) 0);
LA110: ;
LA104: ;
break;
case ((NU8) 30):
Internalerror_44212(((NimStringDesc*) &TMP194035));
break;
case ((NU8) 5):
if (!((*A_123308).Kind == (*F_123307).Kind)) goto LA113;
Result_123654 = ((NU8) 5);
LA113: ;
break;
case ((NU8) 18):
if (!((*A_123308).Kind == ((NU8) 18))) goto LA116;
Result_123654 = Tuplerel_123487(Mapping_123306, F_123307, A_123308);
LA116: ;
break;
case ((NU8) 17):
if (!((*A_123308).Kind == ((NU8) 17))) goto LA119;
if (!((*A_123308).Sup.Id == (*F_123307).Sup.Id)) goto LA122;
Result_123654 = ((NU8) 5);
goto LA121;
LA122: ;
LOC124 = Isobjectsubtype_123443(A_123308, F_123307);
if (!LOC124) goto LA125;
Result_123654 = ((NU8) 3);
goto LA121;
LA125: ;
LA121: ;
LA119: ;
break;
case ((NU8) 13):
LOC128 = ((*A_123308).Kind == ((NU8) 13));
if (!(LOC128)) goto LA129;
LOC128 = ((*A_123308).Sup.Id == (*F_123307).Sup.Id);
LA129: ;
if (!LOC128) goto LA130;
Result_123654 = ((NU8) 5);
LA130: ;
break;
case ((NU8) 19):
if (!((*A_123308).Kind == ((NU8) 19))) goto LA133;
LOC136 = !(((*(*F_123307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC136)) goto LA137;
LOC136 = ((*(*A_123308).Sons->data[0]).Kind == ((NU8) 3));
LA137: ;
if (!LOC136) goto LA138;
Result_123654 = ((NU8) 3);
goto LA135;
LA138: ;
Result_123654 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], (*A_123308).Sons->data[0]);
if (!(Result_123654 <= ((NU8) 1))) goto LA141;
Result_123654 = ((NU8) 0);
LA141: ;
LA135: ;
LA133: ;
break;
case ((NU8) 21):
switch ((*A_123308).Kind) {
case ((NU8) 21):
LOC143 = 0;
LOC143 = Base_94021(F_123307);
LOC144 = 0;
LOC144 = Base_94021(A_123308);
Result_123654 = Typerel_123303(Mapping_123306, LOC143, LOC144);
if (!(Result_123654 <= ((NU8) 1))) goto LA146;
Result_123654 = ((NU8) 0);
LA146: ;
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 22):
switch ((*A_123308).Kind) {
case ((NU8) 22):
LOC148 = 0;
LOC148 = Base_94021(F_123307);
LOC149 = 0;
LOC149 = Base_94021(A_123308);
Result_123654 = Typerel_123303(Mapping_123306, LOC148, LOC149);
if (!(Result_123654 <= ((NU8) 1))) goto LA151;
Result_123654 = ((NU8) 0);
LA151: ;
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 25):
switch ((*A_123308).Kind) {
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
case ((NU8) 25):
LOC155 = Sonslen_51807(F_123307);
LOC156 = Sonslen_51807(A_123308);
LOC154 = (LOC155 == LOC156);
if (!(LOC154)) goto LA157;
LOC154 = ((*F_123307).Callconv == (*A_123308).Callconv);
LA157: ;
if (!LOC154) goto LA158;
Result_123654 = ((NU8) 5);
I_124090 = 0;
HEX3Atmp_124432 = 0;
LOC160 = Sonslen_51807(F_123307);
HEX3Atmp_124432 = (NI32)(LOC160 - 1);
Res_124434 = 0;
Res_124434 = 1;
while (1) {
if (!(Res_124434 <= HEX3Atmp_124432)) goto LA161;
I_124090 = Res_124434;
M_123657 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[I_124090], (*A_123308).Sons->data[I_124090]);
LOC163 = (M_123657 == ((NU8) 0));
if (!(LOC163)) goto LA164;
LOC165 = Typerel_123303(Mapping_123306, (*A_123308).Sons->data[I_124090], (*F_123307).Sons->data[I_124090]);
LOC163 = (LOC165 == ((NU8) 3));
LA164: ;
if (!LOC163) goto LA166;
Result_123654 = ((NU8) 1);
goto LA162;
LA166: ;
if (!(M_123657 < ((NU8) 3))) goto LA168;
Result_123654 = ((NU8) 0);
goto BeforeRet;
goto LA162;
LA168: ;
Result_123654 = Minrel_123473(M_123657, Result_123654);
LA162: ;
Res_124434 += 1;
} LA161: ;
if (!!(((*F_123307).Sons->data[0] == NIM_NIL))) goto LA171;
if (!!(((*A_123308).Sons->data[0] == NIM_NIL))) goto LA174;
M_123657 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], (*A_123308).Sons->data[0]);
if (!(M_123657 < ((NU8) 3))) goto LA177;
Result_123654 = ((NU8) 0);
goto LA176;
LA177: ;
if (!(M_123657 == ((NU8) 3))) goto LA179;
Result_123654 = ((NU8) 1);
goto LA176;
LA179: ;
Result_123654 = Minrel_123473(M_123657, Result_123654);
LA176: ;
goto LA173;
LA174: ;
Result_123654 = ((NU8) 0);
LA173: ;
goto LA170;
LA171: ;
if (!!(((*A_123308).Sons->data[0] == NIM_NIL))) goto LA181;
Result_123654 = ((NU8) 0);
goto LA170;
LA181: ;
LA170: ;
LOC184 = (((*F_123307).Flags &(1<<((((NU8) 1))&7)))!=0);
if (!(LOC184)) goto LA185;
LOC184 = !((((*A_123308).Flags &(1<<((((NU8) 1))&7)))!=0));
LA185: ;
if (!LOC184) goto LA186;
Result_123654 = ((NU8) 0);
LA186: ;
LA158: ;
break;
default:
break;
}
break;
case ((NU8) 26):
switch ((*A_123308).Kind) {
case ((NU8) 26):
Result_123654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
case ((NU8) 21):
case ((NU8) 25):
case ((NU8) 29):
Result_123654 = ((NU8) 1);
break;
default:
break;
}
break;
case ((NU8) 28):
switch ((*A_123308).Kind) {
case ((NU8) 28):
Result_123654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 29):
switch ((*A_123308).Kind) {
case ((NU8) 29):
Result_123654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
case ((NU8) 28):
Result_123654 = ((NU8) 1);
break;
case ((NU8) 21):
if (!((*(*A_123308).Sons->data[0]).Kind == ((NU8) 2))) goto LA189;
Result_123654 = ((NU8) 1);
LA189: ;
break;
case ((NU8) 16):
LOC194 = Firstord_94001((*A_123308).Sons->data[0]);
LOC193 = (LOC194 == 0);
if (!(LOC193)) goto LA195;
LOC196 = 0;
LOC196 = Skiptypes_94087((*A_123308).Sons->data[0], 1048576);
LOC193 = ((*LOC196).Kind >= ((NU8) 31) && (*LOC196).Kind <= ((NU8) 35));
LA195: ;
LOC192 = LOC193;
if (!(LOC192)) goto LA197;
LOC192 = ((*(*A_123308).Sons->data[1]).Kind == ((NU8) 2));
LA197: ;
if (!LOC192) goto LA198;
Result_123654 = ((NU8) 1);
LA198: ;
break;
default:
break;
}
break;
case ((NU8) 3):
if (!((*A_123308).Kind == ((NU8) 3))) goto LA201;
Result_123654 = ((NU8) 5);
LA201: ;
break;
case ((NU8) 11):
LOC203 = 0;
LOC203 = Lastson_51813(F_123307);
Result_123654 = Typerel_123303(Mapping_123306, LOC203, A_123308);
break;
case ((NU8) 10):
LOC204 = 0;
LOC204 = Lastson_51813(F_123307);
Result_123654 = Typerel_123303(Mapping_123306, LOC204, A_123308);
break;
case ((NU8) 9):
if (!((*A_123308).Kind == ((NU8) 9))) goto LA206;
Internalerror_44212(((NimStringDesc*) &TMP194037));
LA206: ;
if (!((*A_123308).Kind == ((NU8) 11))) goto LA209;
LOC212 = ((*(*F_123307).Sons->data[0]).Containerid == (*(*A_123308).Sons->data[0]).Containerid);
if (!(LOC212)) goto LA213;
LOC214 = Sonslen_51807(A_123308);
LOC215 = Sonslen_51807(F_123307);
LOC212 = ((NI32)(LOC214 - 1) == LOC215);
LA213: ;
if (!LOC212) goto LA216;
I_124285 = 0;
HEX3Atmp_124435 = 0;
LOC218 = Sonslen_51807(F_123307);
HEX3Atmp_124435 = (NI32)(LOC218 - 1);
Res_124437 = 0;
Res_124437 = 1;
while (1) {
if (!(Res_124437 <= HEX3Atmp_124435)) goto LA219;
I_124285 = Res_124437;
if (!((*(*A_123308).Sons->data[I_124285]).Kind == ((NU8) 12))) goto LA221;
Internalerror_44212(((NimStringDesc*) &TMP194038));
LA221: ;
LOC224 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[I_124285], (*A_123308).Sons->data[I_124285]);
if (!(LOC224 < ((NU8) 4))) goto LA225;
goto BeforeRet;
LA225: ;
Res_124437 += 1;
} LA219: ;
Result_123654 = ((NU8) 4);
LA216: ;
goto LA208;
LA209: ;
Result_123654 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[0], A_123308);
if (!!((Result_123654 == ((NU8) 0)))) goto LA228;
I_124323 = 0;
HEX3Atmp_124438 = 0;
LOC230 = Sonslen_51807(F_123307);
HEX3Atmp_124438 = (NI32)(LOC230 - 1);
Res_124440 = 0;
Res_124440 = 1;
while (1) {
if (!(Res_124440 <= HEX3Atmp_124438)) goto LA231;
I_124323 = Res_124440;
LOC232 = 0;
LOC232 = Idtableget_56158((*Mapping_123306), &(*(*F_123307).Sons->data[0]).Sons->data[(NI32)(I_124323 - 1)]->Sup);
X_123655 = ((TY51552*) (LOC232));
LOC234 = (X_123655 == NIM_NIL);
if (LOC234) goto LA235;
LOC234 = ((*X_123655).Kind == ((NU8) 12));
LA235: ;
if (!LOC234) goto LA236;
Internalerror_44212(((NimStringDesc*) &TMP194038));
LA236: ;
Idtableput_56166(Mapping_123306, &(*F_123307).Sons->data[I_124323]->Sup, &X_123655->Sup.Sup);
Res_124440 += 1;
} LA231: ;
LA228: ;
LA208: ;
break;
case ((NU8) 12):
LOC238 = 0;
LOC238 = Idtableget_56158((*Mapping_123306), &F_123307->Sup);
X_123655 = ((TY51552*) (LOC238));
if (!(X_123655 == NIM_NIL)) goto LA240;
LOC243 = Sonslen_51807(F_123307);
if (!(LOC243 == 0)) goto LA244;
Concrete_123656 = Concretetype_123309((*Mapping_123306), A_123308);
if (!!((Concrete_123656 == NIM_NIL))) goto LA247;
Idtableput_56166(Mapping_123306, &F_123307->Sup, &Concrete_123656->Sup.Sup);
Result_123654 = ((NU8) 4);
LA247: ;
goto LA242;
LA244: ;
LOC249 = 0;
LOC249 = rawNewString((*(*(*F_123307).Sym).Name).S->Sup.len + 17);
appendString(LOC249, ((NimStringDesc*) &TMP194039));
appendString(LOC249, (*(*(*F_123307).Sym).Name).S);
Internalerror_44208((*(*F_123307).Sym).Info, LOC249);
I_124376 = 0;
HEX3Atmp_124441 = 0;
LOC250 = Sonslen_51807(F_123307);
HEX3Atmp_124441 = (NI32)(LOC250 - 1);
Res_124443 = 0;
Res_124443 = 0;
while (1) {
if (!(Res_124443 <= HEX3Atmp_124441)) goto LA251;
I_124376 = Res_124443;
LOC253 = Typerel_123303(Mapping_123306, (*F_123307).Sons->data[I_124376], A_123308);
if (!(((NU8) 3) <= LOC253)) goto LA254;
Concrete_123656 = Concretetype_123309((*Mapping_123306), A_123308);
if (!!((Concrete_123656 == NIM_NIL))) goto LA257;
Idtableput_56166(Mapping_123306, &F_123307->Sup, &Concrete_123656->Sup.Sup);
Result_123654 = ((NU8) 4);
LA257: ;
goto LA251;
LA254: ;
Res_124443 += 1;
} LA251: ;
LA242: ;
goto LA239;
LA240: ;
if (!((*A_123308).Kind == ((NU8) 3))) goto LA259;
Result_123654 = ((NU8) 4);
goto LA239;
LA259: ;
if (!((*X_123655).Kind == ((NU8) 12))) goto LA261;
Result_123654 = ((NU8) 4);
goto LA239;
LA261: ;
Result_123654 = Typerel_123303(Mapping_123306, X_123655, A_123308);
LA239: ;
break;
case ((NU8) 6):
case ((NU8) 7):
case ((NU8) 8):
if (!((*A_123308).Kind == (*F_123307).Kind)) goto LA264;
Result_123654 = ((NU8) 5);
goto LA263;
LA264: ;
switch ((*A_123308).Kind) {
case ((NU8) 6):
case ((NU8) 7):
case ((NU8) 8):
Result_123654 = ((NU8) 4);
break;
case ((NU8) 5):
Result_123654 = ((NU8) 3);
break;
default:
break;
}
LA263: ;
break;
default:
LOC266 = 0;
LOC266 = rawNewString(reprEnum((*F_123307).Kind, NTI51162)->Sup.len + 9);
appendString(LOC266, ((NimStringDesc*) &TMP194040));
appendString(LOC266, reprEnum((*F_123307).Kind, NTI51162));
appendChar(LOC266, 41);
Internalerror_44212(LOC266);
break;
}
BeforeRet: ;
return Result_123654;
}
N_NIMCALL(TY51552*, Getinstantiatedtype_124452)(TY104012* C_124454, TY51526* Arg_124455, TY123007* M_124456, TY51552* F_124457) {
TY51552* Result_124458;
TNimObject* LOC1;
Result_124458 = 0;
Result_124458 = NIM_NIL;
LOC1 = 0;
LOC1 = Idtableget_56158((*M_124456).Bindings, &F_124457->Sup);
Result_124458 = ((TY51552*) (LOC1));
if (!(Result_124458 == NIM_NIL)) goto LA3;
Result_124458 = Generatetypeinstance_122447(C_124454, (*M_124456).Bindings, Arg_124455, F_124457);
LA3: ;
if (!(Result_124458 == NIM_NIL)) goto LA6;
Internalerror_44208((*Arg_124455).Info, ((NimStringDesc*) &TMP194051));
LA6: ;
return Result_124458;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418) {
NIM_BOOL Result_11419;
Result_11419 = 0;
Result_11419 = !((((*(*C_11418).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11419;
}
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054) {
Incl_10880(&Gch_11014.Cycleroots, C_12054);
}
static N_INLINE(void, Incref_13002)(TY10602* C_13004) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3221(&(*C_13004).Refcount, 8);
LOC3 = Canbecycleroot_11416(C_13004);
if (!LOC3) goto LA4;
Rtladdcycleroot_12052(C_13004);
LA4: ;
}
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11414))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11014.Zct, C_12403);
}
static N_INLINE(void, Decref_12801)(TY10602* C_12803) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3226(&(*C_12803).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12401(C_12803);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11416(C_12803);
if (!LOC5) goto LA6;
Rtladdcycleroot_12052(C_12803);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015) {
TY10602* LOC4;
TY10602* LOC8;
if (!!((Src_13015 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11412(Src_13015);
Incref_13002(LOC4);
LA2: ;
if (!!(((*Dest_13014) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412((*Dest_13014));
Decref_12801(LOC8);
LA6: ;
(*Dest_13014) = Src_13015;
}
N_NIMCALL(TY51526*, Implicitconv_124481)(NU8 Kind_124483, TY51552* F_124484, TY51526* Arg_124485, TY123007* M_124486, TY104012* C_124487) {
TY51526* Result_124488;
NIM_BOOL LOC2;
Result_124488 = 0;
Result_124488 = NIM_NIL;
Result_124488 = Newnodei_51738(Kind_124483, (*Arg_124485).Info);
LOC2 = Containsgenerictype_122066(F_124484);
if (!LOC2) goto LA3;
asgnRef((void**) &(*Result_124488).Typ, Getinstantiatedtype_124452(C_124487, Arg_124485, M_124486, F_124484));
goto LA1;
LA3: ;
asgnRef((void**) &(*Result_124488).Typ, F_124484);
LA1: ;
if (!((*Result_124488).Typ == NIM_NIL)) goto LA6;
Internalerror_44208((*Arg_124485).Info, ((NimStringDesc*) &TMP194052));
LA6: ;
Addson_51824(Result_124488, Emptynode_51858);
Addson_51824(Result_124488, Arg_124485);
return Result_124488;
}
N_NIMCALL(TY51526*, Userconvmatch_124500)(TY104012* C_124502, TY123007* M_124504, TY51552* F_124505, TY51552* A_124506, TY51526* Arg_124507) {
TY51526* Result_124508;
NI I_124527;
NI HEX3Atmp_124563;
NI Res_124565;
TY51552* Src_124528;
TY51552* Dest_124529;
NIM_BOOL LOC3;
NU8 LOC4;
NU8 LOC6;
TY51526* S_124550;
TY51526* LOC9;
Result_124508 = 0;
Src_124528 = 0;
Dest_124529 = 0;
S_124550 = 0;
Result_124508 = NIM_NIL;
Result_124508 = NIM_NIL;
I_124527 = 0;
HEX3Atmp_124563 = 0;
HEX3Atmp_124563 = (NI32)((*C_124502).Converters->Sup.len - 1);
Res_124565 = 0;
Res_124565 = 0;
while (1) {
if (!(Res_124565 <= HEX3Atmp_124563)) goto LA1;
I_124527 = Res_124565;
Src_124528 = NIM_NIL;
Src_124528 = (*(*(*C_124502).Converters->data[I_124527]).Typ).Sons->data[1];
Dest_124529 = NIM_NIL;
Dest_124529 = (*(*(*C_124502).Converters->data[I_124527]).Typ).Sons->data[0];
LOC4 = Typerel_123303(&(*M_124504).Bindings, F_124505, Dest_124529);
LOC3 = (LOC4 == ((NU8) 5));
if (!(LOC3)) goto LA5;
LOC6 = Typerel_123303(&(*M_124504).Bindings, Src_124528, A_124506);
LOC3 = (LOC6 == ((NU8) 5));
LA5: ;
if (!LOC3) goto LA7;
S_124550 = NIM_NIL;
S_124550 = Newsymnode_51735((*C_124502).Converters->data[I_124527]);
asgnRef((void**) &(*S_124550).Typ, (*(*C_124502).Converters->data[I_124527]).Typ);
(*S_124550).Info = (*Arg_124507).Info;
Result_124508 = Newnodeit_51742(((NU8) 49), (*Arg_124507).Info, (*(*S_124550).Typ).Sons->data[0]);
Addson_51824(Result_124508, S_124550);
LOC9 = 0;
LOC9 = Copytree_51852(Arg_124507);
Addson_51824(Result_124508, LOC9);
(*M_124504).Convmatches += 1;
goto BeforeRet;
LA7: ;
Res_124565 += 1;
} LA1: ;
BeforeRet: ;
return Result_124508;
}
N_NIMCALL(TY51526*, Paramtypesmatchaux_124566)(TY104012* C_124568, TY123007* M_124570, TY51552* F_124571, TY51552* A_124572, TY51526* Arg_124573) {
TY51526* Result_124574;
NU8 R_124576;
TY51526* LOC1;
TY51526* LOC2;
TY51526* LOC3;
TY51552* LOC5;
TY51526* LOC8;
TY51552* LOC10;
TY51526* LOC13;
NIM_BOOL LOC15;
TY51552* LOC19;
TY51552* LOC26;
TY51552* LOC27;
Result_124574 = 0;
Result_124574 = NIM_NIL;
R_124576 = 0;
R_124576 = Typerel_123303(&(*M_124570).Bindings, F_124571, A_124572);
switch (R_124576) {
case ((NU8) 1):
(*M_124570).Convmatches += 1;
LOC1 = 0;
LOC1 = Copytree_51852(Arg_124573);
Result_124574 = Implicitconv_124481(((NU8) 47), F_124571, LOC1, &(*M_124570), C_124568);
break;
case ((NU8) 2):
(*M_124570).Intconvmatches += 1;
LOC2 = 0;
LOC2 = Copytree_51852(Arg_124573);
Result_124574 = Implicitconv_124481(((NU8) 47), F_124571, LOC2, &(*M_124570), C_124568);
break;
case ((NU8) 3):
(*M_124570).Subtypematches += 1;
LOC3 = 0;
LOC3 = Copytree_51852(Arg_124573);
Result_124574 = Implicitconv_124481(((NU8) 48), F_124571, LOC3, &(*M_124570), C_124568);
break;
case ((NU8) 4):
(*M_124570).Genericmatches += 1;
Result_124574 = Copytree_51852(Arg_124573);
asgnRef((void**) &(*Result_124574).Typ, Getinstantiatedtype_124452(C_124568, Arg_124573, &(*M_124570), F_124571));
LOC5 = 0;
LOC5 = Skiptypes_94087((*Result_124574).Typ, 8431616);
if (!((*LOC5).Kind == ((NU8) 18) || (*LOC5).Kind == ((NU8) 27))) goto LA6;
LOC8 = 0;
LOC8 = Copytree_51852(Arg_124573);
Result_124574 = Implicitconv_124481(((NU8) 47), F_124571, LOC8, &(*M_124570), C_124568);
LA6: ;
break;
case ((NU8) 5):
(*M_124570).Exactmatches += 1;
Result_124574 = Copytree_51852(Arg_124573);
LOC10 = 0;
LOC10 = Skiptypes_94087(F_124571, 8431616);
if (!((*LOC10).Kind == ((NU8) 18) || (*LOC10).Kind == ((NU8) 27))) goto LA11;
LOC13 = 0;
LOC13 = Copytree_51852(Arg_124573);
Result_124574 = Implicitconv_124481(((NU8) 47), F_124571, LOC13, &(*M_124570), C_124568);
LA11: ;
break;
case ((NU8) 0):
Result_124574 = Userconvmatch_124500(C_124568, M_124570, F_124571, A_124572, Arg_124573);
LOC15 = (Result_124574 == NIM_NIL);
if (!(LOC15)) goto LA16;
LOC15 = ((*F_124571).Kind == ((NU8) 27));
LA16: ;
if (!LOC15) goto LA17;
LOC19 = 0;
LOC19 = Base_94021(F_124571);
R_124576 = Typerel_123303(&(*M_124570).Bindings, LOC19, A_124572);
if (!(((NU8) 4) <= R_124576)) goto LA21;
(*M_124570).Convmatches += 1;
Result_124574 = Copytree_51852(Arg_124573);
if (!(R_124576 == ((NU8) 4))) goto LA24;
LOC26 = 0;
LOC26 = Base_94021(F_124571);
asgnRef((void**) &(*Result_124574).Typ, Getinstantiatedtype_124452(C_124568, Arg_124573, &(*M_124570), LOC26));
LA24: ;
(*M_124570).Basetypematch = NIM_TRUE;
goto LA20;
LA21: ;
LOC27 = 0;
LOC27 = Base_94021(F_124571);
Result_124574 = Userconvmatch_124500(C_124568, M_124570, LOC27, A_124572, Arg_124573);
LA20: ;
LA17: ;
break;
}
return Result_124574;
}
N_NIMCALL(void, Copycandidate_123103)(TY123007* A_123106, TY123007* B_123107) {
(*A_123106).Exactmatches = (*B_123107).Exactmatches;
(*A_123106).Subtypematches = (*B_123107).Subtypematches;
(*A_123106).Convmatches = (*B_123107).Convmatches;
(*A_123106).Intconvmatches = (*B_123107).Intconvmatches;
(*A_123106).Genericmatches = (*B_123107).Genericmatches;
(*A_123106).State = (*B_123107).State;
unsureAsgnRef((void**) &(*A_123106).Callee, (*B_123107).Callee);
unsureAsgnRef((void**) &(*A_123106).Calleesym, (*B_123107).Calleesym);
unsureAsgnRef((void**) &(*A_123106).Call, Copytree_51852((*B_123107).Call));
(*A_123106).Basetypematch = (*B_123107).Basetypematch;
Copyidtable_51799(&(*A_123106).Bindings, (*B_123107).Bindings);
}
N_NIMCALL(NI, Cmpcandidates_123109)(TY123007* A_123111, TY123007* B_123112) {
NI Result_123113;
Result_123113 = 0;
Result_123113 = (NI32)((*A_123111).Exactmatches - (*B_123112).Exactmatches);
if (!!((Result_123113 == 0))) goto LA2;
goto BeforeRet;
LA2: ;
Result_123113 = (NI32)((*A_123111).Genericmatches - (*B_123112).Genericmatches);
if (!!((Result_123113 == 0))) goto LA5;
goto BeforeRet;
LA5: ;
Result_123113 = (NI32)((*A_123111).Subtypematches - (*B_123112).Subtypematches);
if (!!((Result_123113 == 0))) goto LA8;
goto BeforeRet;
LA8: ;
Result_123113 = (NI32)((*A_123111).Intconvmatches - (*B_123112).Intconvmatches);
if (!!((Result_123113 == 0))) goto LA11;
goto BeforeRet;
LA11: ;
Result_123113 = (NI32)((*A_123111).Convmatches - (*B_123112).Convmatches);
BeforeRet: ;
return Result_123113;
}
N_NIMCALL(TY51526*, Paramtypesmatch_124712)(TY104012* C_124714, TY123007* M_124716, TY51552* F_124717, TY51552* A_124718, TY51526* Arg_124719) {
TY51526* Result_124720;
NIM_BOOL LOC2;
TY123007 X_124741;
TY123007 Y_124742;
TY123007 Z_124743;
NI Best_124747;
NI I_124756;
NI HEX3Atmp_124901;
NI LOC6;
NI Res_124903;
NU8 R_124807;
NI Cmp_124817;
NIM_BOOL LOC22;
NI LOC24;
Result_124720 = 0;
memset((void*)&X_124741, 0, sizeof(X_124741));
memset((void*)&Y_124742, 0, sizeof(Y_124742));
memset((void*)&Z_124743, 0, sizeof(Z_124743));
Result_124720 = NIM_NIL;
LOC2 = (Arg_124719 == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = !(((*Arg_124719).Kind == ((NU8) 46)));
LA3: ;
if (!LOC2) goto LA4;
Result_124720 = Paramtypesmatchaux_124566(C_124714, M_124716, F_124717, A_124718, Arg_124719);
goto LA1;
LA4: ;
genericReset((void*)&X_124741, NTI123007);
genericReset((void*)&Y_124742, NTI123007);
genericReset((void*)&Z_124743, NTI123007);
Initcandidate_123035(&X_124741, (*M_124716).Callee);
Initcandidate_123035(&Y_124742, (*M_124716).Callee);
Initcandidate_123035(&Z_124743, (*M_124716).Callee);
X_124741.Calleesym = (*M_124716).Calleesym;
Y_124742.Calleesym = (*M_124716).Calleesym;
Z_124743.Calleesym = (*M_124716).Calleesym;
Best_124747 = 0;
Best_124747 = -1;
I_124756 = 0;
HEX3Atmp_124901 = 0;
LOC6 = Sonslen_51804(Arg_124719);
HEX3Atmp_124901 = (NI32)(LOC6 - 1);
Res_124903 = 0;
Res_124903 = 0;
while (1) {
if (!(Res_124903 <= HEX3Atmp_124901)) goto LA7;
I_124756 = Res_124903;
if (!((11264 &(1<<(((*(*(*Arg_124719).KindU.S6.Sons->data[I_124756]).KindU.S4.Sym).Kind)&31)))!=0)) goto LA9;
Copycandidate_123103(&Z_124743, &(*M_124716));
R_124807 = 0;
R_124807 = Typerel_123303(&Z_124743.Bindings, F_124717, (*(*Arg_124719).KindU.S6.Sons->data[I_124756]).Typ);
if (!!((R_124807 == ((NU8) 0)))) goto LA12;
switch (X_124741.State) {
case ((NU8) 0):
case ((NU8) 2):
genericAssign((void*)&X_124741, (void*)&Z_124743, NTI123007);
Best_124747 = I_124756;
X_124741.State = ((NU8) 1);
break;
case ((NU8) 1):
Cmp_124817 = 0;
Cmp_124817 = Cmpcandidates_123109(&X_124741, &Z_124743);
if (!(Cmp_124817 < 0)) goto LA15;
Best_124747 = I_124756;
genericAssign((void*)&X_124741, (void*)&Z_124743, NTI123007);
goto LA14;
LA15: ;
if (!(Cmp_124817 == 0)) goto LA17;
genericAssign((void*)&Y_124742, (void*)&Z_124743, NTI123007);
goto LA14;
LA17: ;
LA14: ;
break;
}
LA12: ;
LA9: ;
Res_124903 += 1;
} LA7: ;
if (!(X_124741.State == ((NU8) 0))) goto LA20;
Result_124720 = NIM_NIL;
goto LA19;
LA20: ;
LOC22 = (Y_124742.State == ((NU8) 1));
if (!(LOC22)) goto LA23;
LOC24 = Cmpcandidates_123109(&X_124741, &Y_124742);
LOC22 = (LOC24 == 0);
LA23: ;
if (!LOC22) goto LA25;
if (!!((X_124741.State == ((NU8) 1)))) goto LA28;
Internalerror_44208((*Arg_124719).Info, ((NimStringDesc*) &TMP194053));
LA28: ;
Result_124720 = NIM_NIL;
goto LA19;
LA25: ;
Markused_104403(Arg_124719, (*(*Arg_124719).KindU.S6.Sons->data[Best_124747]).KindU.S4.Sym);
Result_124720 = Paramtypesmatchaux_124566(C_124714, M_124716, F_124717, (*(*Arg_124719).KindU.S6.Sons->data[Best_124747]).Typ, (*Arg_124719).KindU.S6.Sons->data[Best_124747]);
LA19: ;
LA1: ;
return Result_124720;
}
N_NIMCALL(NIM_BOOL, Argtypematches_124914)(TY104012* C_124916, TY51552* F_124917, TY51552* A_124918) {
NIM_BOOL Result_124919;
TY123007 M_124920;
TY51526* LOC1;
memset((void*)&M_124920, 0, sizeof(M_124920));
Result_124919 = 0;
genericReset((void*)&M_124920, NTI123007);
Initcandidate_123035(&M_124920, F_124917);
LOC1 = 0;
LOC1 = Paramtypesmatch_124712(C_124916, &M_124920, F_124917, A_124918, Emptynode_51858);
Result_124919 = !((LOC1 == NIM_NIL));
return Result_124919;
}
static N_INLINE(TY51526*, HEX5BHEX5D_53137)(TY51526* N_53139, NI I_53140) {
TY51526* Result_53141;
Result_53141 = 0;
Result_53141 = NIM_NIL;
Result_53141 = (*N_53139).KindU.S6.Sons->data[I_53140];
return Result_53141;
}
N_NIMCALL(void, Initcandidate_123041)(TY123007* C_123044, TY51548* Callee_123045, TY51526* Binding_123046) {
TY51526* Typeparams_123059;
NI I_123085;
NI HEX3Atmp_123100;
NI LOC4;
NI LOC5;
NI Res_123102;
TY51552* Formaltypeparam_123098;
TY51526* LOC7;
Typeparams_123059 = 0;
Formaltypeparam_123098 = 0;
Initcandidateaux_123030(C_123044, (*Callee_123045).Typ);
unsureAsgnRef((void**) &(*C_123044).Calleesym, Callee_123045);
Initidtable_51755(&(*C_123044).Bindings);
if (!!((Binding_123046 == NIM_NIL))) goto LA2;
Typeparams_123059 = NIM_NIL;
Typeparams_123059 = HEX5BHEX5D_53137((*Callee_123045).Ast, 1);
I_123085 = 0;
HEX3Atmp_123100 = 0;
LOC4 = Sonslen_51804(Typeparams_123059);
LOC5 = Sonslen_51804(Binding_123046);
HEX3Atmp_123100 = ((LOC4 <= (NI32)(LOC5 - 1)) ? LOC4 : (NI32)(LOC5 - 1));
Res_123102 = 0;
Res_123102 = 1;
while (1) {
if (!(Res_123102 <= HEX3Atmp_123100)) goto LA6;
I_123085 = Res_123102;
Formaltypeparam_123098 = NIM_NIL;
Formaltypeparam_123098 = (*(*Typeparams_123059).KindU.S6.Sons->data[(NI32)(I_123085 - 1)]).Typ;
LOC7 = 0;
LOC7 = HEX5BHEX5D_53137(Binding_123046, I_123085);
Idtableput_56166(&(*C_123044).Bindings, &Formaltypeparam_123098->Sup, &(*LOC7).Typ->Sup.Sup);
Res_123102 += 1;
} LA6: ;
LA2: ;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3221(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3226(&(*C_13022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(void, Setson_124934)(TY51526* Father_124936, NI At_124937, TY51526* Son_124938) {
NI LOC2;
LOC2 = Sonslen_51804(Father_124936);
if (!(LOC2 <= At_124937)) goto LA3;
(*Father_124936).KindU.S6.Sons = (TY51520*) setLengthSeq(&((*Father_124936).KindU.S6.Sons)->Sup, sizeof(TY51526*), (NI32)(At_124937 + 1));
LA3: ;
asgnRefNoCycle((void**) &(*Father_124936).KindU.S6.Sons->data[At_124937], Son_124938);
}
N_NIMCALL(void, Matchesaux_124977)(TY104012* C_124979, TY51526* N_124980, TY123007* M_124982, TY51895* Marker_124984) {
NI F_124985;
NI A_124986;
NI Formallen_124987;
TY51526* LOC1;
TY51526* Container_125000;
TY51548* Formal_125001;
NI LOC3;
NIM_BOOL LOC14;
TY51526* Arg_125167;
TY51552* LOC33;
TY51552* LOC36;
TY51526* LOC37;
TY51526* LOC38;
TY51526* LOC39;
TY51526* Arg_125297;
NIM_BOOL LOC43;
NIM_BOOL LOC44;
NIM_BOOL LOC53;
TY51526* Arg_125413;
TY51526* LOC62;
Container_125000 = 0;
Formal_125001 = 0;
Arg_125167 = 0;
Arg_125297 = 0;
Arg_125413 = 0;
F_124985 = 0;
F_124985 = 1;
A_124986 = 0;
A_124986 = 1;
(*M_124982).State = ((NU8) 1);
unsureAsgnRef((void**) &(*M_124982).Call, Newnodei_51738(((NU8) 21), (*N_124980).Info));
asgnRef((void**) &(*(*M_124982).Call).Typ, Base_94021((*M_124982).Callee));
Formallen_124987 = 0;
Formallen_124987 = Sonslen_51804((*(*M_124982).Callee).N);
LOC1 = 0;
LOC1 = Copytree_51852((*N_124980).KindU.S6.Sons->data[0]);
Addson_51824((*M_124982).Call, LOC1);
Container_125000 = NIM_NIL;
Container_125000 = NIM_NIL;
Formal_125001 = NIM_NIL;
Formal_125001 = NIM_NIL;
while (1) {
LOC3 = Sonslen_51804(N_124980);
if (!(A_124986 < LOC3)) goto LA2;
if (!((*(*N_124980).KindU.S6.Sons->data[A_124986]).Kind == ((NU8) 23))) goto LA5;
if (!!(((*(*(*N_124980).KindU.S6.Sons->data[A_124986]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA8;
Localerror_44193((*(*N_124980).KindU.S6.Sons->data[A_124986]).Info, ((NU8) 155), ((NimStringDesc*) &TMP194054));
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA8: ;
Formal_125001 = Getsymfromlist_56189((*(*M_124982).Callee).N, (*(*(*N_124980).KindU.S6.Sons->data[A_124986]).KindU.S6.Sons->data[0]).KindU.S5.Ident, 1);
if (!(Formal_125001 == NIM_NIL)) goto LA11;
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA11: ;
LOC14 = Intsetcontainsorincl_51923(Marker_124984, (*Formal_125001).Position);
if (!LOC14) goto LA15;
Localerror_44193((*(*N_124980).KindU.S6.Sons->data[A_124986]).Info, ((NU8) 139), (*(*Formal_125001).Name).S);
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA15: ;
(*M_124982).Basetypematch = NIM_FALSE;
Arg_125167 = NIM_NIL;
Arg_125167 = Paramtypesmatch_124712(C_124979, M_124982, (*Formal_125001).Typ, (*(*N_124980).KindU.S6.Sons->data[A_124986]).Typ, (*(*N_124980).KindU.S6.Sons->data[A_124986]).KindU.S6.Sons->data[1]);
if (!(Arg_125167 == NIM_NIL)) goto LA18;
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA18: ;
if (!(*M_124982).Basetypematch) goto LA21;
Container_125000 = Newnodei_51738(((NU8) 32), (*(*N_124980).KindU.S6.Sons->data[A_124986]).Info);
Addson_51824(Container_125000, Arg_125167);
Setson_124934((*M_124982).Call, (NI32)((*Formal_125001).Position + 1), Container_125000);
if (!!((F_124985 == (NI32)(Formallen_124987 - 1)))) goto LA24;
Container_125000 = NIM_NIL;
LA24: ;
goto LA20;
LA21: ;
Setson_124934((*M_124982).Call, (NI32)((*Formal_125001).Position + 1), Arg_125167);
LA20: ;
goto LA4;
LA5: ;
if (!(Formallen_124987 <= F_124985)) goto LA27;
if (!(((*(*M_124982).Callee).Flags &(1<<((((NU8) 0))&7)))!=0)) goto LA30;
LOC33 = 0;
LOC33 = Skiptypes_94087((*(*N_124980).KindU.S6.Sons->data[A_124986]).Typ, 8431616);
if (!((*LOC33).Kind == ((NU8) 28))) goto LA34;
LOC36 = 0;
LOC36 = Getsystype_99008(((NU8) 29));
LOC37 = 0;
LOC37 = Copytree_51852((*N_124980).KindU.S6.Sons->data[A_124986]);
LOC38 = 0;
LOC38 = Implicitconv_124481(((NU8) 47), LOC36, LOC37, &(*M_124982), C_124979);
Addson_51824((*M_124982).Call, LOC38);
goto LA32;
LA34: ;
LOC39 = 0;
LOC39 = Copytree_51852((*N_124980).KindU.S6.Sons->data[A_124986]);
Addson_51824((*M_124982).Call, LOC39);
LA32: ;
goto LA29;
LA30: ;
if (!!((Formal_125001 == NIM_NIL))) goto LA40;
(*M_124982).Basetypematch = NIM_FALSE;
Arg_125297 = NIM_NIL;
Arg_125297 = Paramtypesmatch_124712(C_124979, M_124982, (*Formal_125001).Typ, (*(*N_124980).KindU.S6.Sons->data[A_124986]).Typ, (*N_124980).KindU.S6.Sons->data[A_124986]);
LOC44 = !((Arg_125297 == NIM_NIL));
if (!(LOC44)) goto LA45;
LOC44 = (*M_124982).Basetypematch;
LA45: ;
LOC43 = LOC44;
if (!(LOC43)) goto LA46;
LOC43 = !((Container_125000 == NIM_NIL));
LA46: ;
if (!LOC43) goto LA47;
Addson_51824(Container_125000, Arg_125297);
goto LA42;
LA47: ;
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA42: ;
goto LA29;
LA40: ;
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA29: ;
goto LA26;
LA27: ;
if (!!(((*(*(*(*M_124982).Callee).N).KindU.S6.Sons->data[F_124985]).Kind == ((NU8) 3)))) goto LA50;
Internalerror_44208((*(*N_124980).KindU.S6.Sons->data[A_124986]).Info, ((NimStringDesc*) &TMP194073));
LA50: ;
Formal_125001 = (*(*(*(*M_124982).Callee).N).KindU.S6.Sons->data[F_124985]).KindU.S4.Sym;
LOC53 = Intsetcontainsorincl_51923(Marker_124984, (*Formal_125001).Position);
if (!LOC53) goto LA54;
Localerror_44193((*(*N_124980).KindU.S6.Sons->data[A_124986]).Info, ((NU8) 139), (*(*Formal_125001).Name).S);
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA54: ;
(*M_124982).Basetypematch = NIM_FALSE;
Arg_125413 = NIM_NIL;
Arg_125413 = Paramtypesmatch_124712(C_124979, M_124982, (*Formal_125001).Typ, (*(*N_124980).KindU.S6.Sons->data[A_124986]).Typ, (*N_124980).KindU.S6.Sons->data[A_124986]);
if (!(Arg_125413 == NIM_NIL)) goto LA57;
(*M_124982).State = ((NU8) 2);
goto BeforeRet;
LA57: ;
if (!(*M_124982).Basetypematch) goto LA60;
Container_125000 = Newnodei_51738(((NU8) 32), (*(*N_124980).KindU.S6.Sons->data[A_124986]).Info);
Addson_51824(Container_125000, Arg_125413);
LOC62 = 0;
LOC62 = Implicitconv_124481(((NU8) 47), (*Formal_125001).Typ, Container_125000, &(*M_124982), C_124979);
Setson_124934((*M_124982).Call, (NI32)((*Formal_125001).Position + 1), LOC62);
if (!!((F_124985 == (NI32)(Formallen_124987 - 1)))) goto LA64;
Container_125000 = NIM_NIL;
LA64: ;
goto LA59;
LA60: ;
Setson_124934((*M_124982).Call, (NI32)((*Formal_125001).Position + 1), Arg_125413);
LA59: ;
LA26: ;
LA4: ;
A_124986 += 1;
F_124985 += 1;
} LA2: ;
BeforeRet: ;
}
N_NIMCALL(void, Partialmatch_125474)(TY104012* C_125476, TY51526* N_125477, TY123007* M_125479) {
TY51895 Marker_125480;
memset((void*)&Marker_125480, 0, sizeof(Marker_125480));
genericReset((void*)&Marker_125480, NTI51895);
Intsetinit_51919(&Marker_125480);
Matchesaux_124977(C_125476, N_125477, M_125479, &Marker_125480);
}
N_NIMCALL(void, Matches_125483)(TY104012* C_125485, TY51526* N_125486, TY123007* M_125488) {
TY51895 Marker_125489;
NI F_125501;
NI LOC5;
TY51548* Formal_125530;
NIM_BOOL LOC7;
TY51526* Container_125552;
TY51526* LOC16;
TY51526* LOC17;
memset((void*)&Marker_125489, 0, sizeof(Marker_125489));
Formal_125530 = 0;
Container_125552 = 0;
genericReset((void*)&Marker_125489, NTI51895);
Intsetinit_51919(&Marker_125489);
Matchesaux_124977(C_125485, N_125486, M_125488, &Marker_125489);
if (!((*M_125488).State == ((NU8) 2))) goto LA2;
goto BeforeRet;
LA2: ;
F_125501 = 0;
F_125501 = 1;
while (1) {
LOC5 = Sonslen_51804((*(*M_125488).Callee).N);
if (!(F_125501 < LOC5)) goto LA4;
Formal_125530 = NIM_NIL;
Formal_125530 = (*(*(*(*M_125488).Callee).N).KindU.S6.Sons->data[F_125501]).KindU.S4.Sym;
LOC7 = Intsetcontainsorincl_51923(&Marker_125489, (*Formal_125530).Position);
if (!!(LOC7)) goto LA8;
if (!((*Formal_125530).Ast == NIM_NIL)) goto LA11;
if (!((*(*Formal_125530).Typ).Kind == ((NU8) 27))) goto LA14;
Container_125552 = NIM_NIL;
Container_125552 = Newnodei_51738(((NU8) 32), (*N_125486).Info);
LOC16 = 0;
LOC16 = Implicitconv_124481(((NU8) 47), (*Formal_125530).Typ, Container_125552, &(*M_125488), C_125485);
Addson_51824((*M_125488).Call, LOC16);
goto LA13;
LA14: ;
(*M_125488).State = ((NU8) 2);
goto LA4;
LA13: ;
goto LA10;
LA11: ;
LOC17 = 0;
LOC17 = Copytree_51852((*Formal_125530).Ast);
Setson_124934((*M_125488).Call, (NI32)((*Formal_125530).Position + 1), LOC17);
LA10: ;
LA8: ;
F_125501 += 1;
} LA4: ;
BeforeRet: ;
}
N_NIMCALL(NU8, Cmptypes_124444)(TY51552* F_124446, TY51552* A_124447) {
NU8 Result_124448;
TY51564 Mapping_124449;
memset((void*)&Mapping_124449, 0, sizeof(Mapping_124449));
Result_124448 = 0;
genericReset((void*)&Mapping_124449, NTI51564);
Initidtable_51755(&Mapping_124449);
Result_124448 = Typerel_123303(&Mapping_124449, F_124446, A_124447);
return Result_124448;
}
N_NIMCALL(TY51526*, Indextypesmatch_124904)(TY104012* C_124906, TY51552* F_124907, TY51552* A_124908, TY51526* Arg_124909) {
TY51526* Result_124910;
TY123007 M_124911;
Result_124910 = 0;
memset((void*)&M_124911, 0, sizeof(M_124911));
Result_124910 = NIM_NIL;
genericReset((void*)&M_124911, NTI123007);
Initcandidate_123035(&M_124911, F_124907);
Result_124910 = Paramtypesmatch_124712(C_124906, &M_124911, F_124907, A_124908, Arg_124909);
return Result_124910;
}
N_NIMCALL(NimStringDesc*, Getnotfounderror_123175)(TY104012* C_123177, TY51526* N_123178) {
NimStringDesc* Result_123179;
NI I_123188;
NI HEX3Atmp_123300;
NI LOC1;
NI Res_123302;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NI LOC9;
NimStringDesc* Candidates_123248;
TY105004 O_123249;
TY51548* Sym_123263;
NimStringDesc* LOC16;
NimStringDesc* LOC20;
NimStringDesc* LOC21;
Result_123179 = 0;
Candidates_123248 = 0;
memset((void*)&O_123249, 0, sizeof(O_123249));
Sym_123263 = 0;
Result_123179 = NIM_NIL;
Result_123179 = Msgkindtostring_43832(((NU8) 125));
I_123188 = 0;
HEX3Atmp_123300 = 0;
LOC1 = Sonslen_51804(N_123178);
HEX3Atmp_123300 = (NI32)(LOC1 - 1);
Res_123302 = 0;
Res_123302 = 1;
while (1) {
if (!(Res_123302 <= HEX3Atmp_123300)) goto LA2;
I_123188 = Res_123302;
if (!((*(*N_123178).KindU.S6.Sons->data[I_123188]).Kind == ((NU8) 23))) goto LA4;
LOC6 = 0;
LOC6 = Rendertree_82042((*(*N_123178).KindU.S6.Sons->data[I_123188]).KindU.S6.Sons->data[0], 0);
Result_123179 = resizeString(Result_123179, LOC6->Sup.len + 0);
appendString(Result_123179, LOC6);
Result_123179 = resizeString(Result_123179, 2);
appendString(Result_123179, ((NimStringDesc*) &TMP194252));
LA4: ;
LOC7 = 0;
LOC7 = Typetostring_94014((*(*N_123178).KindU.S6.Sons->data[I_123188]).Typ, ((NU8) 0));
Result_123179 = resizeString(Result_123179, LOC7->Sup.len + 0);
appendString(Result_123179, LOC7);
LOC9 = Sonslen_51804(N_123178);
if (!!((I_123188 == (NI32)(LOC9 - 1)))) goto LA10;
Result_123179 = resizeString(Result_123179, 2);
appendString(Result_123179, ((NimStringDesc*) &TMP194253));
LA10: ;
Res_123302 += 1;
} LA2: ;
Result_123179 = addChar(Result_123179, 41);
Candidates_123248 = NIM_NIL;
Candidates_123248 = copyString(((NimStringDesc*) &TMP194054));
genericReset((void*)&O_123249, NTI105004);
Sym_123263 = NIM_NIL;
Sym_123263 = Initoverloaditer_105745(&O_123249, C_123177, (*N_123178).KindU.S6.Sons->data[0]);
while (1) {
if (!!((Sym_123263 == NIM_NIL))) goto LA12;
if (!((15360 &(1<<(((*Sym_123263).Kind)&31)))!=0)) goto LA14;
LOC16 = 0;
LOC16 = Getprocheader_94018(Sym_123263);
Candidates_123248 = resizeString(Candidates_123248, LOC16->Sup.len + 0);
appendString(Candidates_123248, LOC16);
Candidates_123248 = resizeString(Candidates_123248, 2);
appendString(Candidates_123248, ((NimStringDesc*) &TMP194254));
LA14: ;
Sym_123263 = Nextoverloaditer_106074(&O_123249, C_123177, (*N_123178).KindU.S6.Sons->data[0]);
} LA12: ;
if (!!(((Candidates_123248) && (Candidates_123248)->Sup.len == 0))) goto LA18;
LOC20 = 0;
LOC21 = 0;
LOC21 = Msgkindtostring_43832(((NU8) 126));
LOC20 = rawNewString(LOC21->Sup.len + Candidates_123248->Sup.len + 4);
appendString(LOC20, ((NimStringDesc*) &TMP194254));
appendString(LOC20, LOC21);
appendString(LOC20, ((NimStringDesc*) &TMP194254));
appendString(LOC20, Candidates_123248);
Result_123179 = resizeString(Result_123179, LOC20->Sup.len + 0);
appendString(Result_123179, LOC20);
LA18: ;
return Result_123179;
}
N_NOINLINE(void, sigmatchInit)(void) {
}

