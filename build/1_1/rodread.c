/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY49527 TY49527;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY49525 TY49525;
typedef struct TY49545 TY49545;
typedef struct TY49561 TY49561;
typedef struct TY49559 TY49559;
typedef struct TY49557 TY49557;
typedef struct TY48005 TY48005;
typedef struct TNimObject TNimObject;
typedef struct TY88132 TY88132;
typedef struct TY88130 TY88130;
typedef struct TY86031 TY86031;
typedef struct TY10202 TY10202;
typedef struct TY10218 TY10218;
typedef struct TY10590 TY10590;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY49549 TY49549;
typedef struct TY48011 TY48011;
typedef struct TY41532 TY41532;
typedef struct TY49523 TY49523;
typedef struct TY49537 TY49537;
typedef struct TY46008 TY46008;
typedef struct TY49541 TY49541;
typedef struct TY33221 TY33221;
typedef struct TY86029 TY86029;
typedef struct TY53223 TY53223;
typedef struct TY53221 TY53221;
typedef struct TY53219 TY53219;
typedef struct TY49547 TY49547;
typedef struct TY49517 TY49517;
typedef struct TY37013 TY37013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef NimStringDesc* TY86016[9];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY49557 {
TY48005* Key;
TNimObject* Val;
};
struct TY49561 {
NI Counter;
TY49559* Data;
};
struct TY88130 {
NimStringDesc* Filename;
NU8 Reason;
TY86031* Rd;
NI32 Crc;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TNimObject {
TNimType* m_type;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
struct TY53219 {
NI Key;
NI Val;
};
struct TY53223 {
NI Counter;
TY53221* Data;
};
struct TY86029 {
NI Lastidxkey;
NI Lastidxval;
TY53223 Tab;
TY46008* R;
NI Offset;
};
struct TY86031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY33221* Moddeps;
TY33221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY86029 Index;
TY86029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY49561 Syms;
};
typedef NimStringDesc* TY41865[1];
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
typedef NI TY8214[16];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
struct TY49559 {
  TGenericSeq Sup;
  TY49557 data[SEQ_DECL_SIZE];
};
struct TY88132 {
  TGenericSeq Sup;
  TY88130 data[SEQ_DECL_SIZE];
};
struct TY33221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY53221 {
  TGenericSeq Sup;
  TY53219 data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(void, Initidtable_49752)(TY49561* X_49755);
N_NIMCALL(void, Initstrtable_49744)(TY49527* X_49747);
N_NIMCALL(NI, Getid_49691)(void);
N_NIMCALL(NU8, Checkdep_88355)(NimStringDesc* Filename_88357);
N_NIMCALL(NI, Getmoduleidx_88315)(NimStringDesc* Filename_88317);
N_NIMCALL(NIM_BOOL, nossameFile)(NimStringDesc* Path1_32870, NimStringDesc* Path2_32871);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(NI32, Crcfromfile_44029)(NimStringDesc* Filename_44031);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(NimStringDesc*, Togeneratedfile_40103)(NimStringDesc* Path_40105, NimStringDesc* Ext_40106);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* Filename_30804);
N_NIMCALL(TY86031*, Newrodreader_87999)(NimStringDesc* Modfilename_88001, NI32 Crc_88002, NI Readerindex_88003);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_23769, NimStringDesc* Prefix_23770);
N_NIMCALL(void, Initiitable_53228)(TY53223* X_53231);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848);
N_NIMCALL(void, Processrodfile_87614)(TY86031* R_87616, NI32 Crc_87617);
N_NIMCALL(NimStringDesc*, Rdword_87381)(TY86031* R_87383);
N_NIMCALL(NI, Decodeint_86093)(TY86031* R_86095);
N_NIMCALL(void, Setid_49693)(NI Id_49695);
N_NIMCALL(NimStringDesc*, Decode_86090)(TY86031* R_86092);
N_NIMCALL(void, Hexchar_87203)(NIM_CHAR C_87205, NI* Xi_87207);
N_NIMCALL(NIM_BOOL, Isdefined_57059)(TY48011* Symbol_57061);
N_NIMCALL(TY48011*, Getident_48016)(NimStringDesc* Identifier_48018);
N_NIMCALL(NI, Countdefinedsymbols_57064)(void);
N_NIMCALL(void, Skipsection_87271)(TY86031* R_87273);
N_NIMCALL(void, Internalerror_41571)(NimStringDesc* Errmsg_41573);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17603);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(void, Processindex_87522)(TY86031* R_87524, TY86029* Idx_87526);
N_NIMCALL(void, Iitableput_53236)(TY53223* T_53239, NI Key_53240, NI Val_53241);
N_NIMCALL(void, Messageout_41550)(NimStringDesc* S_41552);
N_NIMCALL(NimStringDesc*, HEX2F_32318)(NimStringDesc* Head_32320, NimStringDesc* Tail_32321);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_32844, NimStringDesc* Ext_32845);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* Formatstr_22965, NimStringDesc** A_22967, NI A_22967Len0);
N_NIMCALL(void, Idtableput_53174)(TY49561* T_53177, TY48005* Key_53178, TNimObject* Val_53179);
N_NIMCALL(void, Processinterf_87431)(TY86031* R_87433, TY49545* Module_87434);
N_NIMCALL(TY49545*, Newstub_87410)(TY86031* R_87412, NimStringDesc* Name_87413, NI Id_87414);
N_NIMCALL(void, objectInit)(void* Dest_17862, TNimType* Typ_17863);
N_NIMCALL(void, Registerid_49932)(TY48005* Id_49934);
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413);
static N_INLINE(void, Incref_11401)(TY10202* C_11403);
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628);
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
static N_INLINE(void, Decref_11260)(TY10202* C_11262);
N_NIMCALL(void, Strtableadd_53064)(TY49527* T_53067, TY49545* N_53068);
N_NIMCALL(void, Processcompilerprocs_87471)(TY86031* R_87473, TY49545* Module_87474);
N_NIMCALL(TNimObject*, Idtableget_53170)(TY49561 T_53172, NI Key_53173);
N_NIMCALL(void, Loadconverters_88290)(TY86031* R_88292);
N_NIMCALL(TY49545*, Rrgetsym_86080)(TY86031* R_86082, NI Id_86083, TY41532 Info_86084);
N_NIMCALL(NI, Iitableget_53232)(TY53223 T_53234, NI Key_53235);
N_NIMCALL(void, Internalerror_41567)(TY41532 Info_41569, NimStringDesc* Errmsg_41570);
N_NIMCALL(NimStringDesc*, Ropetostr_46066)(TY46008* P_46068);
N_NIMCALL(TY46008*, Encodeint_86073)(NI64 X_86075);
N_NIMCALL(void, Encodeintaux_86152)(NimStringDesc** Str_86155, NI64 X_86156);
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048);
N_NIMCALL(TY49545*, Decodesymsafepos_88164)(TY86031* Rd_88166, NI Offset_88167, TY41532 Info_88168);
N_NIMCALL(TY49545*, Decodesym_86848)(TY86031* R_86850, TY41532 Info_86851);
N_NIMCALL(TY49549*, Rrgettype_86085)(TY86031* R_86087, NI Id_86088, TY41532 Info_86089);
N_NIMCALL(TY49549*, Decodetype_86574)(TY86031* R_86576, TY41532 Info_86577);
N_NIMCALL(TY49523*, Decodenode_86225)(TY86031* R_86227, TY41532 Finfo_86228);
N_NIMCALL(TY49523*, Newnodei_49735)(NU8 Kind_49737, TY41532 Info_49738);
N_NIMCALL(void, Decodelineinfo_86174)(TY86031* R_86176, TY41532* Info_86178);
N_NIMCALL(TY41532, Newlineinfo_41574)(NimStringDesc* Filename_41576, NI Line_41577, NI Col_41578);
N_NIMCALL(NI64, Decodebint_86096)(TY86031* R_86098);
N_NIMCALL(NF, nsuParseFloat)(NimStringDesc* S_23574);
N_NIMCALL(void, Addson_49821)(TY49523* Father_49823, TY49523* Son_49824);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010);
N_NIMCALL(TY41532, Unknownlineinfo_41536)(void);
N_NIMCALL(void, Decodeloc_86452)(TY86031* R_86454, TY49537* Loc_86456, TY41532 Info_86457);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11422, void* Src_11423);
N_NIMCALL(void, Addson_49825)(TY49549* Father_49827, TY49549* Son_49828);
N_NIMCALL(TY49541*, Decodelib_86786)(TY86031* R_86788, TY41532 Info_86789);
N_NIMCALL(void, Loadstub_86070)(TY49545* S_86072);
N_NIMCALL(TY49523*, Newnode_49708)(NU8 Kind_49710);
N_NIMCALL(NimStringDesc*, nsuToHex)(NI64 X_23450, NI Len_23451);
STRING_LITERAL(TMP86019, "", 0);
STRING_LITERAL(TMP86020, "no need to recompile: $1", 24);
STRING_LITERAL(TMP86021, "symbol file for $1 does not exist", 33);
STRING_LITERAL(TMP86022, "symbol file for $1 has the wrong version", 40);
STRING_LITERAL(TMP86023, "file edited since last compilation: $1", 38);
STRING_LITERAL(TMP86024, "list of conditional symbols changed for: $1", 43);
STRING_LITERAL(TMP86025, "list of options changed for: $1", 31);
STRING_LITERAL(TMP86026, "an include file edited: $1", 26);
STRING_LITERAL(TMP86027, "a module $1 depends on has changed", 34);
NIM_CONST TY86016 Reasontofrmt_86015 = {((NimStringDesc*) &TMP86019),
((NimStringDesc*) &TMP86020),
((NimStringDesc*) &TMP86021),
((NimStringDesc*) &TMP86022),
((NimStringDesc*) &TMP86023),
((NimStringDesc*) &TMP86024),
((NimStringDesc*) &TMP86025),
((NimStringDesc*) &TMP86026),
((NimStringDesc*) &TMP86027)}
;
STRING_LITERAL(TMP190867, "rod", 3);
STRING_LITERAL(TMP190871, "NIM:", 4);
STRING_LITERAL(TMP190872, "1012", 4);
STRING_LITERAL(TMP190873, "CRC", 3);
STRING_LITERAL(TMP190874, "ID", 2);
STRING_LITERAL(TMP190875, "OPTIONS", 7);
STRING_LITERAL(TMP190876, "DEFINES", 7);
STRING_LITERAL(TMP190877, "FILES", 5);
STRING_LITERAL(TMP190878, "INCLUDES", 8);
STRING_LITERAL(TMP190879, "DEPS", 4);
STRING_LITERAL(TMP190880, "INTERF", 6);
STRING_LITERAL(TMP190881, "skipSection ", 12);
STRING_LITERAL(TMP190882, "COMPILERPROCS", 13);
STRING_LITERAL(TMP190883, "INDEX", 5);
STRING_LITERAL(TMP190884, "IMPORTS", 7);
STRING_LITERAL(TMP190885, "CONVERTERS", 10);
STRING_LITERAL(TMP190886, "DATA", 4);
STRING_LITERAL(TMP190887, "INIT", 4);
STRING_LITERAL(TMP190888, "CGEN", 4);
STRING_LITERAL(TMP190889, "skipping section: ", 18);
STRING_LITERAL(TMP190890, "system", 6);
STRING_LITERAL(TMP190891, "nim", 3);
STRING_LITERAL(TMP190892, "handleSymbolFile", 16);
STRING_LITERAL(TMP190893, "processInterf", 13);
STRING_LITERAL(TMP190895, "processCompilerProcs", 20);
STRING_LITERAL(TMP190896, "importConverters", 16);
STRING_LITERAL(TMP190897, "missing from both indexes: +", 28);
STRING_LITERAL(TMP190899, "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", 62);
STRING_LITERAL(TMP190900, "dataIdx == 0", 12);
STRING_LITERAL(TMP190901, "decodeSym: no id", 16);
STRING_LITERAL(TMP190902, "decodeSym: no ident", 19);
STRING_LITERAL(TMP190903, "decodeSym: wrong id", 19);
STRING_LITERAL(TMP190904, "rrGetType", 9);
STRING_LITERAL(TMP190905, "decodeType: no id", 17);
STRING_LITERAL(TMP190906, "decodeNode: nkIdent", 19);
STRING_LITERAL(TMP190907, "decodeNode: nkSym", 17);
STRING_LITERAL(TMP190908, "decodeNode", 10);
STRING_LITERAL(TMP190909, "decodeNode ", 11);
STRING_LITERAL(TMP190910, "decodeLoc ", 10);
STRING_LITERAL(TMP190911, "decodeType ^(", 13);
STRING_LITERAL(TMP190912, "decodeLib: 1", 12);
STRING_LITERAL(TMP190913, "decodeLib: 2", 12);
STRING_LITERAL(TMP190914, "rrGetSym: no reader found: +", 28);
STRING_LITERAL(TMP190915, "loadStub", 8);
STRING_LITERAL(TMP190916, "loadStub: invalid key", 21);
STRING_LITERAL(TMP190917, "loadStub: wrong symbol", 22);
STRING_LITERAL(TMP190918, "loadStub: wrong ID", 18);
STRING_LITERAL(TMP190920, "loadInitSection", 15);
TY49527 Rodcompilerprocs_86059;
extern TNimType* NTI49527; /* TStrTable */
TY49561 Gtypetable_86079;
TY88132* Gmods_88153;
extern TNimType* NTI88132; /* TFileModuleMap */
extern TY10590 Gch_10608;
extern NU32 Gglobaloptions_40077;
extern TNimType* NTI86033; /* PRodReader */
extern TNimType* NTI86031; /* TRodReader */
extern TNimType* NTI33221; /* seq[string] */
extern NU32 Goptions_40075;
extern NimStringDesc* Libpath_40110;
extern NI Gverbosity_40083;
extern TNimType* NTI49521; /* PSym */
extern TNimType* NTI49545; /* TSym */
extern TNimType* NTI49519; /* PType */
extern TNimType* NTI49549; /* TType */
extern TNimType* NTI49543; /* PLib */
extern TNimType* NTI49541; /* TLib */
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_10624))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI32)((NU32)((*C_11418).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI32)((NU32)((*C_11419).Refcount) - (NU32)(8));
if (!((NU32)((*C_11419).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(NI, Getmoduleidx_88315)(NimStringDesc* Filename_88317) {
NI Result_88318;
NI I_88326;
NI HEX3Atmp_88350;
NI Res_88352;
NIM_BOOL LOC3;
Result_88318 = 0;
I_88326 = 0;
HEX3Atmp_88350 = 0;
HEX3Atmp_88350 = (Gmods_88153->Sup.len-1);
Res_88352 = 0;
Res_88352 = 0;
while (1) {
if (!(Res_88352 <= HEX3Atmp_88350)) goto LA1;
I_88326 = Res_88352;
LOC3 = nossameFile(Gmods_88153->data[I_88326].Filename, Filename_88317);
if (!LOC3) goto LA4;
Result_88318 = I_88326;
goto BeforeRet;
LA4: ;
Res_88352 += 1;
} LA1: ;
Result_88318 = Gmods_88153->Sup.len;
Gmods_88153 = (TY88132*) setLengthSeq(&(Gmods_88153)->Sup, sizeof(TY88130), (NI32)(Result_88318 + 1));
BeforeRet: ;
return Result_88318;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_16847, NimStringDesc* B_16848) {
NIM_BOOL Result_16849;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_16849 = 0;
if (!(A_16847 == B_16848)) goto LA2;
Result_16849 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_16847 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_16848 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_16849 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_16847).Sup.len == (*B_16848).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_16847).data)), ((NCSTRING) ((*B_16848).data)), ((NI32) ((NI32)((*A_16847).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_16849 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_16849;
}
N_NIMCALL(NimStringDesc*, Rdword_87381)(TY86031* R_87383) {
NimStringDesc* Result_87384;
Result_87384 = 0;
Result_87384 = copyString(((NimStringDesc*) &TMP86019));
while (1) {
if (!(((NU8)((*R_87383).S->data[(*R_87383).Pos])) >= ((NU8)(65)) && ((NU8)((*R_87383).S->data[(*R_87383).Pos])) <= ((NU8)(90)) || ((NU8)((*R_87383).S->data[(*R_87383).Pos])) == ((NU8)(95)) || ((NU8)((*R_87383).S->data[(*R_87383).Pos])) >= ((NU8)(97)) && ((NU8)((*R_87383).S->data[(*R_87383).Pos])) <= ((NU8)(122)) || ((NU8)((*R_87383).S->data[(*R_87383).Pos])) >= ((NU8)(48)) && ((NU8)((*R_87383).S->data[(*R_87383).Pos])) <= ((NU8)(57)))) goto LA1;
Result_87384 = addChar(Result_87384, (*R_87383).S->data[(*R_87383).Pos]);
(*R_87383).Pos += 1;
} LA1: ;
return Result_87384;
}
N_NIMCALL(NI, Decodeint_86093)(TY86031* R_86095) {
NI Result_87046;
NI I_87047;
NI Sign_87048;
Result_87046 = 0;
I_87047 = 0;
I_87047 = (*R_86095).Pos;
Sign_87048 = 0;
Sign_87048 = -1;
if (!((NU8)((*R_86095).S->data[I_87047]) == (NU8)(45))) goto LA2;
I_87047 += 1;
Sign_87048 = 1;
LA2: ;
Result_87046 = 0;
while (1) {
switch (((NU8)((*R_86095).S->data[I_87047]))) {
case 48 ... 57:
Result_87046 = (NI32)((NI32)(Result_87046 * 190) - (NI32)(((NU8)((*R_86095).S->data[I_87047])) - 48));
break;
case 97 ... 122:
Result_87046 = (NI32)((NI32)(Result_87046 * 190) - (NI32)((NI32)(((NU8)((*R_86095).S->data[I_87047])) - 97) + 10));
break;
case 65 ... 90:
Result_87046 = (NI32)((NI32)(Result_87046 * 190) - (NI32)((NI32)(((NU8)((*R_86095).S->data[I_87047])) - 65) + 36));
break;
case 128 ... 255:
Result_87046 = (NI32)((NI32)(Result_87046 * 190) - (NI32)((NI32)(((NU8)((*R_86095).S->data[I_87047])) - 128) + 62));
break;
default:
goto LA4;
break;
}
I_87047 += 1;
} LA4: ;
Result_87046 = (NI32)(Result_87046 * Sign_87048);
(*R_86095).Pos = I_87047;
return Result_87046;
}
N_NIMCALL(void, Hexchar_87203)(NIM_CHAR C_87205, NI* Xi_87207) {
switch (((NU8)(C_87205))) {
case 48 ... 57:
(*Xi_87207) = (NI32)((NI32)((NU32)((*Xi_87207)) << (NU32)(4)) | (NI32)(((NU8)(C_87205)) - 48));
break;
case 97 ... 102:
(*Xi_87207) = (NI32)((NI32)((NU32)((*Xi_87207)) << (NU32)(4)) | (NI32)((NI32)(((NU8)(C_87205)) - 97) + 10));
break;
case 65 ... 70:
(*Xi_87207) = (NI32)((NI32)((NU32)((*Xi_87207)) << (NU32)(4)) | (NI32)((NI32)(((NU8)(C_87205)) - 65) + 10));
break;
default:
break;
}
}
N_NIMCALL(NimStringDesc*, Decode_86090)(TY86031* R_86092) {
NimStringDesc* Result_87241;
NI I_87242;
NI Xi_87255;
Result_87241 = 0;
I_87242 = 0;
I_87242 = (*R_86092).Pos;
Result_87241 = copyString(((NimStringDesc*) &TMP86019));
while (1) {
switch (((NU8)((*R_86092).S->data[I_87242]))) {
case 92:
I_87242 += 3;
Xi_87255 = 0;
Xi_87255 = 0;
Hexchar_87203((*R_86092).S->data[(NI32)(I_87242 - 2)], &Xi_87255);
Hexchar_87203((*R_86092).S->data[(NI32)(I_87242 - 1)], &Xi_87255);
Result_87241 = addChar(Result_87241, ((NIM_CHAR) (((NI) (Xi_87255)))));
break;
case 97 ... 122:
case 65 ... 90:
case 48 ... 57:
case 95:
Result_87241 = addChar(Result_87241, (*R_86092).S->data[I_87242]);
I_87242 += 1;
break;
default:
goto LA1;
break;
}
} LA1: ;
(*R_86092).Pos = I_87242;
return Result_87241;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI32)((NI32)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
N_NIMCALL(void, Skipsection_87271)(TY86031* R_87273) {
NI C_87292;
NimStringDesc* LOC13;
NimStringDesc* LOC14;
if (!((NU8)((*R_87273).S->data[(*R_87273).Pos]) == (NU8)(58))) goto LA2;
while (1) {
if (!((NU8)(10) < (NU8)((*R_87273).S->data[(*R_87273).Pos]))) goto LA4;
(*R_87273).Pos += 1;
} LA4: ;
goto LA1;
LA2: ;
if (!((NU8)((*R_87273).S->data[(*R_87273).Pos]) == (NU8)(40))) goto LA5;
C_87292 = 0;
C_87292 = 0;
(*R_87273).Pos += 1;
while (1) {
switch (((NU8)((*R_87273).S->data[(*R_87273).Pos]))) {
case 10:
(*R_87273).Line += 1;
break;
case 40:
C_87292 += 1;
break;
case 41:
if (!(C_87292 == 0)) goto LA9;
(*R_87273).Pos += 1;
goto LA7;
goto LA8;
LA9: ;
if (!(0 < C_87292)) goto LA11;
C_87292 -= 1;
goto LA8;
LA11: ;
LA8: ;
break;
case 0:
goto LA7;
break;
default:
break;
}
(*R_87273).Pos += 1;
} LA7: ;
goto LA1;
LA5: ;
LOC14 = nimIntToStr((*R_87273).Line);
LOC13 = rawNewString(LOC14->Sup.len + 12);
appendString(LOC13, ((NimStringDesc*) &TMP190881));
appendString(LOC13, LOC14);
Internalerror_41571(LOC13);
LA1: ;
}
N_NIMCALL(void, Processindex_87522)(TY86031* R_87524, TY86029* Idx_87526) {
NI Key_87527;
NI Val_87528;
NI Tmp_87529;
NIM_BOOL LOC2;
NI LOC7;
Key_87527 = 0;
Val_87528 = 0;
Tmp_87529 = 0;
(*R_87524).Pos += 2;
(*R_87524).Line += 1;
while (1) {
LOC2 = ((NU8)(10) < (NU8)((*R_87524).S->data[(*R_87524).Pos]));
if (!(LOC2)) goto LA3;
LOC2 = !(((NU8)((*R_87524).S->data[(*R_87524).Pos]) == (NU8)(41)));
LA3: ;
if (!LOC2) goto LA1;
Tmp_87529 = Decodeint_86093(R_87524);
if (!((NU8)((*R_87524).S->data[(*R_87524).Pos]) == (NU8)(32))) goto LA5;
(*R_87524).Pos += 1;
Key_87527 = (NI32)((*Idx_87526).Lastidxkey + Tmp_87529);
LOC7 = Decodeint_86093(R_87524);
Val_87528 = (NI32)(LOC7 + (*Idx_87526).Lastidxval);
goto LA4;
LA5: ;
Key_87527 = (NI32)((*Idx_87526).Lastidxkey + 1);
Val_87528 = (NI32)(Tmp_87529 + (*Idx_87526).Lastidxval);
LA4: ;
Iitableput_53236(&(*Idx_87526).Tab, Key_87527, Val_87528);
(*Idx_87526).Lastidxkey = Key_87527;
(*Idx_87526).Lastidxval = Val_87528;
Setid_49693(Key_87527);
if (!((NU8)((*R_87524).S->data[(*R_87524).Pos]) == (NU8)(10))) goto LA9;
(*R_87524).Pos += 1;
(*R_87524).Line += 1;
LA9: ;
} LA1: ;
if (!((NU8)((*R_87524).S->data[(*R_87524).Pos]) == (NU8)(41))) goto LA12;
(*R_87524).Pos += 1;
LA12: ;
}
N_NIMCALL(void, Processrodfile_87614)(TY86031* R_87616, NI32 Crc_87617) {
NimStringDesc* Section_87618;
NimStringDesc* W_87619;
NI D_87620;
NI L_87621;
NI Inclcrc_87622;
NI LOC9;
NI LOC16;
TY48011* LOC24;
NIM_BOOL LOC25;
NI LOC32;
NIM_BOOL LOC38;
NIM_BOOL LOC46;
NI LOC48;
NIM_BOOL LOC53;
NIM_BOOL LOC54;
NI32 LOC56;
NI LOC68;
NimStringDesc* LOC88;
NimStringDesc* LOC89;
Section_87618 = 0;
W_87619 = 0;
D_87620 = 0;
L_87621 = 0;
Inclcrc_87622 = 0;
while (1) {
if (!!(((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(0)))) goto LA1;
Section_87618 = Rdword_87381(R_87616);
if (!!(((*R_87616).Reason == ((NU8) 1)))) goto LA3;
goto LA1;
LA3: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190873))) goto LA6;
(*R_87616).Pos += 1;
LOC9 = Decodeint_86093(R_87616);
if (!!((((NI) (Crc_87617)) == LOC9))) goto LA10;
(*R_87616).Reason = ((NU8) 4);
LA10: ;
goto LA5;
LA6: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190874))) goto LA12;
(*R_87616).Pos += 1;
(*R_87616).Moduleid = Decodeint_86093(R_87616);
Setid_49693((*R_87616).Moduleid);
goto LA5;
LA12: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190875))) goto LA14;
(*R_87616).Pos += 1;
LOC16 = Decodeint_86093(R_87616);
(*R_87616).Options = ((NU32) (((NI32) (LOC16))));
if (!!((Goptions_40075 == (*R_87616).Options))) goto LA18;
(*R_87616).Reason = ((NU8) 6);
LA18: ;
goto LA5;
LA14: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190876))) goto LA20;
(*R_87616).Pos += 1;
D_87620 = 0;
while (1) {
if (!((NU8)(10) < (NU8)((*R_87616).S->data[(*R_87616).Pos]))) goto LA22;
W_87619 = Decode_86090(R_87616);
D_87620 += 1;
LOC24 = Getident_48016(W_87619);
LOC25 = Isdefined_57059(LOC24);
if (!!(LOC25)) goto LA26;
(*R_87616).Reason = ((NU8) 5);
LA26: ;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(32))) goto LA29;
(*R_87616).Pos += 1;
LA29: ;
} LA22: ;
LOC32 = Countdefinedsymbols_57064();
if (!!((D_87620 == LOC32))) goto LA33;
(*R_87616).Reason = ((NU8) 5);
LA33: ;
goto LA5;
LA20: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190877))) goto LA35;
(*R_87616).Pos += 2;
(*R_87616).Line += 1;
L_87621 = 0;
while (1) {
LOC38 = ((NU8)(10) < (NU8)((*R_87616).S->data[(*R_87616).Pos]));
if (!(LOC38)) goto LA39;
LOC38 = !(((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(41)));
LA39: ;
if (!LOC38) goto LA37;
(*R_87616).Files = (TY33221*) setLengthSeq(&((*R_87616).Files)->Sup, sizeof(NimStringDesc*), (NI32)(L_87621 + 1));
asgnRefNoCycle((void**) &(*R_87616).Files->data[L_87621], Decode_86090(R_87616));
(*R_87616).Pos += 1;
(*R_87616).Line += 1;
L_87621 += 1;
} LA37: ;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(41))) goto LA41;
(*R_87616).Pos += 1;
LA41: ;
goto LA5;
LA35: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190878))) goto LA43;
(*R_87616).Pos += 2;
(*R_87616).Line += 1;
while (1) {
LOC46 = ((NU8)(10) < (NU8)((*R_87616).S->data[(*R_87616).Pos]));
if (!(LOC46)) goto LA47;
LOC46 = !(((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(41)));
LA47: ;
if (!LOC46) goto LA45;
LOC48 = Decodeint_86093(R_87616);
W_87619 = copyString((*R_87616).Files->data[LOC48]);
(*R_87616).Pos += 1;
Inclcrc_87622 = Decodeint_86093(R_87616);
if (!((*R_87616).Reason == ((NU8) 1))) goto LA50;
LOC54 = nosexistsFile(W_87619);
LOC53 = !(LOC54);
if (LOC53) goto LA55;
LOC56 = Crcfromfile_44029(W_87619);
LOC53 = !((Inclcrc_87622 == ((NI) (LOC56))));
LA55: ;
if (!LOC53) goto LA57;
(*R_87616).Reason = ((NU8) 7);
LA57: ;
LA50: ;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(10))) goto LA60;
(*R_87616).Pos += 1;
(*R_87616).Line += 1;
LA60: ;
} LA45: ;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(41))) goto LA63;
(*R_87616).Pos += 1;
LA63: ;
goto LA5;
LA43: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190879))) goto LA65;
(*R_87616).Pos += 1;
L_87621 = 0;
while (1) {
if (!((NU8)(10) < (NU8)((*R_87616).S->data[(*R_87616).Pos]))) goto LA67;
(*R_87616).Moddeps = (TY33221*) setLengthSeq(&((*R_87616).Moddeps)->Sup, sizeof(NimStringDesc*), (NI32)(L_87621 + 1));
LOC68 = Decodeint_86093(R_87616);
asgnRefNoCycle((void**) &(*R_87616).Moddeps->data[L_87621], copyString((*R_87616).Files->data[LOC68]));
L_87621 += 1;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(32))) goto LA70;
(*R_87616).Pos += 1;
LA70: ;
} LA67: ;
goto LA5;
LA65: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190880))) goto LA72;
(*R_87616).Interfidx = (NI32)((*R_87616).Pos + 2);
Skipsection_87271(R_87616);
goto LA5;
LA72: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190882))) goto LA74;
(*R_87616).Compilerprocsidx = (NI32)((*R_87616).Pos + 2);
Skipsection_87271(R_87616);
goto LA5;
LA74: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190883))) goto LA76;
Processindex_87522(R_87616, &(*R_87616).Index);
goto LA5;
LA76: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190884))) goto LA78;
Processindex_87522(R_87616, &(*R_87616).Imports);
goto LA5;
LA78: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190885))) goto LA80;
(*R_87616).Convertersidx = (NI32)((*R_87616).Pos + 1);
Skipsection_87271(R_87616);
goto LA5;
LA80: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190886))) goto LA82;
(*R_87616).Dataidx = (NI32)((*R_87616).Pos + 2);
Skipsection_87271(R_87616);
goto LA5;
LA82: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190887))) goto LA84;
(*R_87616).Initidx = (NI32)((*R_87616).Pos + 2);
Skipsection_87271(R_87616);
goto LA5;
LA84: ;
if (!eqStrings(Section_87618, ((NimStringDesc*) &TMP190888))) goto LA86;
(*R_87616).Cgenidx = (NI32)((*R_87616).Pos + 2);
Skipsection_87271(R_87616);
goto LA5;
LA86: ;
LOC89 = nimIntToStr((*R_87616).Pos);
LOC88 = rawNewString(LOC89->Sup.len + 18);
appendString(LOC88, ((NimStringDesc*) &TMP190889));
appendString(LOC88, LOC89);
Messageout_41550(LOC88);
Skipsection_87271(R_87616);
LA5: ;
if (!((NU8)((*R_87616).S->data[(*R_87616).Pos]) == (NU8)(10))) goto LA91;
(*R_87616).Pos += 1;
(*R_87616).Line += 1;
LA91: ;
} LA1: ;
}
N_NIMCALL(TY86031*, Newrodreader_87999)(NimStringDesc* Modfilename_88001, NI32 Crc_88002, NI Readerindex_88003) {
TY86031* Result_88004;
TY86031* R_88052;
NIM_BOOL LOC2;
NimStringDesc* Version_88068;
Result_88004 = 0;
Result_88004 = (TY86031*) newObj(NTI86033, sizeof(TY86031));
(*Result_88004).Sup.m_type = NTI86031;
asgnRefNoCycle((void**) &(*Result_88004).Files, (TY33221*) newSeq(NTI33221, 0));
asgnRefNoCycle((void**) &(*Result_88004).Moddeps, (TY33221*) newSeq(NTI33221, 0));
R_88052 = 0;
R_88052 = Result_88004;
(*R_88052).Reason = ((NU8) 1);
(*R_88052).Pos = 0;
(*R_88052).Line = 1;
(*R_88052).Readerindex = Readerindex_88003;
asgnRefNoCycle((void**) &(*R_88052).Filename, copyString(Modfilename_88001));
Initidtable_49752(&(*R_88052).Syms);
asgnRefNoCycle((void**) &(*R_88052).S, Readfile_3647(Modfilename_88001));
LOC2 = nsuStartsWith((*R_88052).S, ((NimStringDesc*) &TMP190871));
if (!LOC2) goto LA3;
Initiitable_53228(&(*R_88052).Index.Tab);
Initiitable_53228(&(*R_88052).Imports.Tab);
(*R_88052).Pos += 4;
Version_88068 = 0;
Version_88068 = copyString(((NimStringDesc*) &TMP86019));
while (1) {
if (!!((((NU8)((*R_88052).S->data[(*R_88052).Pos])) == ((NU8)(0)) || ((NU8)((*R_88052).S->data[(*R_88052).Pos])) == ((NU8)(10))))) goto LA5;
Version_88068 = addChar(Version_88068, (*R_88052).S->data[(*R_88052).Pos]);
(*R_88052).Pos += 1;
} LA5: ;
if (!((NU8)((*R_88052).S->data[(*R_88052).Pos]) == (NU8)(10))) goto LA7;
(*R_88052).Pos += 1;
LA7: ;
if (!eqStrings(Version_88068, ((NimStringDesc*) &TMP190872))) goto LA10;
Processrodfile_87614(R_88052, Crc_88002);
goto LA9;
LA10: ;
Result_88004 = NIM_NIL;
LA9: ;
goto LA1;
LA3: ;
Result_88004 = NIM_NIL;
LA1: ;
return Result_88004;
}
N_NIMCALL(NU8, Checkdep_88355)(NimStringDesc* Filename_88357) {
NU8 Result_88358;
NI Idx_88359;
NI32 Crc_88369;
TY86031* R_88370;
NimStringDesc* Rodfile_88371;
NIM_BOOL LOC5;
NU8 Res_88392;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NI I_88409;
NI HEX3Atmp_88455;
NI Res_88457;
NIM_BOOL LOC24;
TY41865 LOC28;
NimStringDesc* LOC29;
NIM_BOOL LOC31;
Result_88358 = 0;
Idx_88359 = 0;
Idx_88359 = Getmoduleidx_88315(Filename_88357);
if (!!((Gmods_88153->data[Idx_88359].Reason == ((NU8) 0)))) goto LA2;
Result_88358 = Gmods_88153->data[Idx_88359].Reason;
goto BeforeRet;
LA2: ;
Crc_88369 = 0;
Crc_88369 = Crcfromfile_44029(Filename_88357);
Gmods_88153->data[Idx_88359].Reason = ((NU8) 1);
asgnRefNoCycle((void**) &Gmods_88153->data[Idx_88359].Filename, copyString(Filename_88357));
Gmods_88153->data[Idx_88359].Crc = Crc_88369;
Result_88358 = ((NU8) 1);
R_88370 = 0;
R_88370 = NIM_NIL;
Rodfile_88371 = 0;
Rodfile_88371 = Togeneratedfile_40103(Filename_88357, ((NimStringDesc*) &TMP190867));
LOC5 = nosexistsFile(Rodfile_88371);
if (!LOC5) goto LA6;
R_88370 = Newrodreader_87999(Rodfile_88371, Crc_88369, Idx_88359);
if (!(R_88370 == NIM_NIL)) goto LA9;
Result_88358 = ((NU8) 3);
goto LA8;
LA9: ;
Result_88358 = (*R_88370).Reason;
if (!(Result_88358 == ((NU8) 1))) goto LA12;
Res_88392 = 0;
LOC14 = nosaddFileExt(((NimStringDesc*) &TMP190890), ((NimStringDesc*) &TMP190891));
LOC15 = HEX2F_32318(Libpath_40110, LOC14);
Res_88392 = Checkdep_88355(LOC15);
if (!!((Res_88392 == ((NU8) 1)))) goto LA17;
Result_88358 = ((NU8) 8);
LA17: ;
I_88409 = 0;
HEX3Atmp_88455 = 0;
HEX3Atmp_88455 = ((*R_88370).Moddeps->Sup.len-1);
Res_88457 = 0;
Res_88457 = 0;
while (1) {
if (!(Res_88457 <= HEX3Atmp_88455)) goto LA19;
I_88409 = Res_88457;
Res_88392 = Checkdep_88355((*R_88370).Moddeps->data[I_88409]);
if (!!((Res_88392 == ((NU8) 1)))) goto LA21;
Result_88358 = ((NU8) 8);
LA21: ;
Res_88457 += 1;
} LA19: ;
LA12: ;
LA8: ;
goto LA4;
LA6: ;
Result_88358 = ((NU8) 2);
LA4: ;
LOC24 = !((Result_88358 == ((NU8) 1)));
if (!(LOC24)) goto LA25;
LOC24 = (0 < Gverbosity_40083);
LA25: ;
if (!LOC24) goto LA26;
LOC28[0] = copyString(Filename_88357);
LOC29 = nsuFormatOpenArray(Reasontofrmt_86015[(Result_88358)-0], LOC28, 1);
Messageout_41550(LOC29);
LA26: ;
LOC31 = !((Result_88358 == ((NU8) 1)));
if (LOC31) goto LA32;
LOC31 = ((Gglobaloptions_40077 &(1<<((((NU8) 1))&31)))!=0);
LA32: ;
if (!LOC31) goto LA33;
R_88370 = NIM_NIL;
LA33: ;
asgnRefNoCycle((void**) &Gmods_88153->data[Idx_88359].Rd, R_88370);
Gmods_88153->data[Idx_88359].Reason = Result_88358;
BeforeRet: ;
return Result_88358;
}
N_NIMCALL(TY49545*, Newstub_87410)(TY86031* R_87412, NimStringDesc* Name_87413, NI Id_87414) {
TY49545* Result_87415;
Result_87415 = 0;
Result_87415 = (TY49545*) newObj(NTI49521, sizeof(TY49545));
objectInit(Result_87415, NTI49545);
(*Result_87415).Kind = ((NU8) 20);
(*Result_87415).Sup.Id = Id_87414;
asgnRefNoCycle((void**) &(*Result_87415).Name, Getident_48016(Name_87413));
(*Result_87415).Position = (*R_87412).Readerindex;
Setid_49693(Id_87414);
if (!NIM_FALSE) goto LA2;
Registerid_49932(&Result_87415->Sup);
LA2: ;
return Result_87415;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628) {
NIM_BOOL Result_10629;
Result_10629 = 0;
Result_10629 = !((((*(*C_10628).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_10629;
}
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254) {
Incl_10474(&Gch_10608.Cycleroots, C_11254);
}
static N_INLINE(void, Incref_11401)(TY10202* C_11403) {
NIM_BOOL LOC2;
(*C_11403).Refcount = (NI32)((NU32)((*C_11403).Refcount) + (NU32)(8));
LOC2 = Canbecycleroot_10626(C_11403);
if (!LOC2) goto LA3;
Rtladdcycleroot_11252(C_11403);
LA3: ;
}
static N_INLINE(void, Decref_11260)(TY10202* C_11262) {
NIM_BOOL LOC4;
(*C_11262).Refcount = (NI32)((NU32)((*C_11262).Refcount) - (NU32)(8));
if (!((NU32)((*C_11262).Refcount) < (NU32)(8))) goto LA2;
Rtladdzct_11256(C_11262);
goto LA1;
LA2: ;
LOC4 = Canbecycleroot_10626(C_11262);
if (!LOC4) goto LA5;
Rtladdcycleroot_11252(C_11262);
goto LA1;
LA5: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413) {
TY10202* LOC4;
TY10202* LOC8;
if (!!((Src_11413 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_10622(Src_11413);
Incref_11401(LOC4);
LA2: ;
if (!!(((*Dest_11412) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_10622((*Dest_11412));
Decref_11260(LOC8);
LA6: ;
(*Dest_11412) = Src_11413;
}
N_NIMCALL(void, Processinterf_87431)(TY86031* R_87433, TY49545* Module_87434) {
NIM_BOOL LOC5;
NimStringDesc* W_87441;
NI Key_87454;
TY49545* S_87467;
if (!((*R_87433).Interfidx == 0)) goto LA2;
Internalerror_41571(((NimStringDesc*) &TMP190893));
LA2: ;
(*R_87433).Pos = (*R_87433).Interfidx;
while (1) {
LOC5 = ((NU8)(10) < (NU8)((*R_87433).S->data[(*R_87433).Pos]));
if (!(LOC5)) goto LA6;
LOC5 = !(((NU8)((*R_87433).S->data[(*R_87433).Pos]) == (NU8)(41)));
LA6: ;
if (!LOC5) goto LA4;
W_87441 = 0;
W_87441 = Decode_86090(R_87433);
(*R_87433).Pos += 1;
Key_87454 = 0;
Key_87454 = Decodeint_86093(R_87433);
(*R_87433).Pos += 1;
S_87467 = 0;
S_87467 = Newstub_87410(R_87433, W_87441, Key_87454);
asgnRef((void**) &(*S_87467).Owner, Module_87434);
Strtableadd_53064(&(*Module_87434).Tab, S_87467);
Idtableput_53174(&(*R_87433).Syms, &S_87467->Sup, &S_87467->Sup.Sup);
} LA4: ;
}
N_NIMCALL(void, Processcompilerprocs_87471)(TY86031* R_87473, TY49545* Module_87474) {
TY49545* S_87475;
NimStringDesc* W_87476;
NI Key_87477;
NIM_BOOL LOC5;
TNimObject* LOC7;
S_87475 = 0;
W_87476 = 0;
Key_87477 = 0;
if (!((*R_87473).Compilerprocsidx == 0)) goto LA2;
Internalerror_41571(((NimStringDesc*) &TMP190895));
LA2: ;
(*R_87473).Pos = (*R_87473).Compilerprocsidx;
while (1) {
LOC5 = ((NU8)(10) < (NU8)((*R_87473).S->data[(*R_87473).Pos]));
if (!(LOC5)) goto LA6;
LOC5 = !(((NU8)((*R_87473).S->data[(*R_87473).Pos]) == (NU8)(41)));
LA6: ;
if (!LOC5) goto LA4;
W_87476 = Decode_86090(R_87473);
(*R_87473).Pos += 1;
Key_87477 = Decodeint_86093(R_87473);
(*R_87473).Pos += 1;
LOC7 = Idtableget_53170((*R_87473).Syms, Key_87477);
S_87475 = ((TY49545*) (LOC7));
if (!(S_87475 == NIM_NIL)) goto LA9;
S_87475 = Newstub_87410(R_87473, W_87476, Key_87477);
asgnRef((void**) &(*S_87475).Owner, Module_87474);
Idtableput_53174(&(*R_87473).Syms, &S_87475->Sup, &S_87475->Sup.Sup);
LA9: ;
Strtableadd_53064(&Rodcompilerprocs_86059, S_87475);
} LA4: ;
}
N_NIMCALL(void, Encodeintaux_86152)(NimStringDesc** Str_86155, NI64 X_86156) {
NIM_CHAR D_86158;
NI64 V_86159;
NI64 Rem_86160;
NI Idx_86163;
D_86158 = 0;
V_86159 = 0;
V_86159 = X_86156;
Rem_86160 = 0;
Rem_86160 = (NI64)(V_86159 % 190);
if (!(Rem_86160 < 0)) goto LA2;
(*Str_86155) = addChar((*Str_86155), 45);
V_86159 = -((NI64)(V_86159 / 190));
Rem_86160 = -(Rem_86160);
goto LA1;
LA2: ;
V_86159 = (NI64)(V_86159 / 190);
LA1: ;
Idx_86163 = 0;
Idx_86163 = ((NI) (Rem_86160));
if (!(Idx_86163 < 62)) goto LA5;
D_86158 = ((NimStringDesc*) &TMP190899)->data[(NI32)(Idx_86163 + 0)];
goto LA4;
LA5: ;
D_86158 = ((NIM_CHAR) (((NI) ((NI32)((NI32)(Idx_86163 - 62) + 128)))));
LA4: ;
if (!!((V_86159 == 0))) goto LA8;
Encodeintaux_86152(Str_86155, V_86159);
LA8: ;
(*Str_86155) = addChar((*Str_86155), D_86158);
}
N_NIMCALL(TY46008*, Encodeint_86073)(NI64 X_86075) {
TY46008* Result_86171;
NimStringDesc* Res_86172;
Result_86171 = 0;
Res_86172 = 0;
Res_86172 = copyString(((NimStringDesc*) &TMP86019));
Encodeintaux_86152(&Res_86172, X_86075);
Result_86171 = Torope_46046(Res_86172);
return Result_86171;
}
N_NIMCALL(void, Decodelineinfo_86174)(TY86031* R_86176, TY41532* Info_86178) {
NI LOC7;
NI LOC14;
NI LOC18;
if (!((NU8)((*R_86176).S->data[(*R_86176).Pos]) == (NU8)(63))) goto LA2;
(*R_86176).Pos += 1;
if (!((NU8)((*R_86176).S->data[(*R_86176).Pos]) == (NU8)(44))) goto LA5;
(*Info_86178).Col = ((NI16) -1);
goto LA4;
LA5: ;
LOC7 = Decodeint_86093(R_86176);
(*Info_86178).Col = ((NI16) (LOC7));
LA4: ;
if (!((NU8)((*R_86176).S->data[(*R_86176).Pos]) == (NU8)(44))) goto LA9;
(*R_86176).Pos += 1;
if (!((NU8)((*R_86176).S->data[(*R_86176).Pos]) == (NU8)(44))) goto LA12;
(*Info_86178).Line = ((NI16) -1);
goto LA11;
LA12: ;
LOC14 = Decodeint_86093(R_86176);
(*Info_86178).Line = ((NI16) (LOC14));
LA11: ;
if (!((NU8)((*R_86176).S->data[(*R_86176).Pos]) == (NU8)(44))) goto LA16;
(*R_86176).Pos += 1;
LOC18 = Decodeint_86093(R_86176);
(*Info_86178) = Newlineinfo_41574((*R_86176).Files->data[LOC18], ((NI) ((*Info_86178).Line)), ((NI) ((*Info_86178).Col)));
LA16: ;
LA9: ;
LA2: ;
}
N_NIMCALL(NI64, Decodebint_86096)(TY86031* R_86098) {
NI64 Result_87126;
NI I_87127;
NI64 Sign_87128;
Result_87126 = 0;
I_87127 = 0;
I_87127 = (*R_86098).Pos;
Sign_87128 = 0;
Sign_87128 = -1;
if (!((NU8)((*R_86098).S->data[I_87127]) == (NU8)(45))) goto LA2;
I_87127 += 1;
Sign_87128 = 1;
LA2: ;
Result_87126 = 0;
while (1) {
switch (((NU8)((*R_86098).S->data[I_87127]))) {
case 48 ... 57:
Result_87126 = (NI64)((NI64)(Result_87126 * 190) - ((NI64) ((NI32)(((NU8)((*R_86098).S->data[I_87127])) - 48))));
break;
case 97 ... 122:
Result_87126 = (NI64)((NI64)(Result_87126 * 190) - ((NI64) ((NI32)((NI32)(((NU8)((*R_86098).S->data[I_87127])) - 97) + 10))));
break;
case 65 ... 90:
Result_87126 = (NI64)((NI64)(Result_87126 * 190) - ((NI64) ((NI32)((NI32)(((NU8)((*R_86098).S->data[I_87127])) - 65) + 36))));
break;
case 128 ... 255:
Result_87126 = (NI64)((NI64)(Result_87126 * 190) - ((NI64) ((NI32)((NI32)(((NU8)((*R_86098).S->data[I_87127])) - 128) + 62))));
break;
default:
goto LA4;
break;
}
I_87127 += 1;
} LA4: ;
Result_87126 = (NI64)(Result_87126 * Sign_87128);
(*R_86098).Pos = I_87127;
return Result_87126;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010) {
(*Dest_17009).data[((*Dest_17009).Sup.len)-0] = C_17010;
(*Dest_17009).data[((NI32)((*Dest_17009).Sup.len + 1))-0] = 0;
(*Dest_17009).Sup.len += 1;
}
N_NIMCALL(TY49523*, Decodenode_86225)(TY86031* R_86227, TY41532 Finfo_86228) {
TY49523* Result_86229;
NI Id_86230;
NimStringDesc* Fl_86231;
NI LOC7;
NI LOC11;
NF LOC21;
TY49523* LOC32;
NimStringDesc* LOC36;
Result_86229 = 0;
Id_86230 = 0;
Fl_86231 = 0;
Result_86229 = NIM_NIL;
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(40))) goto LA2;
(*R_86227).Pos += 1;
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(41))) goto LA5;
(*R_86227).Pos += 1;
goto BeforeRet;
LA5: ;
LOC7 = Decodeint_86093(R_86227);
Result_86229 = Newnodei_49735(((NU8) (LOC7)), Finfo_86228);
Decodelineinfo_86174(R_86227, &(*Result_86229).Info);
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(36))) goto LA9;
(*R_86227).Pos += 1;
LOC11 = Decodeint_86093(R_86227);
(*Result_86229).Flags = ((NU8) (((NI32) (LOC11))));
LA9: ;
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(94))) goto LA13;
(*R_86227).Pos += 1;
Id_86230 = Decodeint_86093(R_86227);
asgnRef((void**) &(*Result_86229).Typ, Rrgettype_86085(R_86227, Id_86230, (*Result_86229).Info));
LA13: ;
switch ((*Result_86229).Kind) {
case ((NU8) 5) ... ((NU8) 10):
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(33))) goto LA16;
(*R_86227).Pos += 1;
(*Result_86229).KindU.S1.Intval = Decodebint_86096(R_86227);
LA16: ;
break;
case ((NU8) 11) ... ((NU8) 13):
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(33))) goto LA19;
(*R_86227).Pos += 1;
Fl_86231 = Decode_86090(R_86227);
LOC21 = nsuParseFloat(Fl_86231);
(*Result_86229).KindU.S2.Floatval = ((NF64) (LOC21));
LA19: ;
break;
case ((NU8) 14) ... ((NU8) 16):
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(33))) goto LA23;
(*R_86227).Pos += 1;
asgnRefNoCycle((void**) &(*Result_86229).KindU.S3.Strval, Decode_86090(R_86227));
goto LA22;
LA23: ;
asgnRefNoCycle((void**) &(*Result_86229).KindU.S3.Strval, copyString(((NimStringDesc*) &TMP86019)));
LA22: ;
break;
case ((NU8) 2):
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(33))) goto LA26;
(*R_86227).Pos += 1;
Fl_86231 = Decode_86090(R_86227);
asgnRefNoCycle((void**) &(*Result_86229).KindU.S5.Ident, Getident_48016(Fl_86231));
goto LA25;
LA26: ;
Internalerror_41567((*Result_86229).Info, ((NimStringDesc*) &TMP190906));
LA25: ;
break;
case ((NU8) 3):
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(33))) goto LA29;
(*R_86227).Pos += 1;
Id_86230 = Decodeint_86093(R_86227);
asgnRef((void**) &(*Result_86229).KindU.S4.Sym, Rrgetsym_86080(R_86227, Id_86230, (*Result_86229).Info));
goto LA28;
LA29: ;
Internalerror_41567((*Result_86229).Info, ((NimStringDesc*) &TMP190907));
LA28: ;
break;
default:
while (1) {
if (!!(((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(41)))) goto LA31;
LOC32 = Decodenode_86225(R_86227, (*Result_86229).Info);
Addson_49821(Result_86229, LOC32);
} LA31: ;
break;
}
if (!((NU8)((*R_86227).S->data[(*R_86227).Pos]) == (NU8)(41))) goto LA34;
(*R_86227).Pos += 1;
goto LA33;
LA34: ;
Internalerror_41567((*Result_86229).Info, ((NimStringDesc*) &TMP190908));
LA33: ;
goto LA1;
LA2: ;
LOC36 = rawNewString(12);
appendString(LOC36, ((NimStringDesc*) &TMP190909));
appendChar(LOC36, (*R_86227).S->data[(*R_86227).Pos]);
Internalerror_41567((*Result_86229).Info, LOC36);
LA1: ;
BeforeRet: ;
return Result_86229;
}
N_NIMCALL(void, Decodeloc_86452)(TY86031* R_86454, TY49537* Loc_86456, TY41532 Info_86457) {
NI LOC7;
NI LOC11;
NI LOC15;
NI LOC19;
NimStringDesc* LOC23;
NimStringDesc* LOC30;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(60))) goto LA2;
(*R_86454).Pos += 1;
if (!(((NU8)((*R_86454).S->data[(*R_86454).Pos])) >= ((NU8)(48)) && ((NU8)((*R_86454).S->data[(*R_86454).Pos])) <= ((NU8)(57)) || ((NU8)((*R_86454).S->data[(*R_86454).Pos])) >= ((NU8)(97)) && ((NU8)((*R_86454).S->data[(*R_86454).Pos])) <= ((NU8)(122)) || ((NU8)((*R_86454).S->data[(*R_86454).Pos])) >= ((NU8)(65)) && ((NU8)((*R_86454).S->data[(*R_86454).Pos])) <= ((NU8)(90)))) goto LA5;
LOC7 = Decodeint_86093(R_86454);
(*Loc_86456).K = ((NU8) (LOC7));
goto LA4;
LA5: ;
(*Loc_86456).K = ((NU8) 0);
LA4: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(42))) goto LA9;
(*R_86454).Pos += 1;
LOC11 = Decodeint_86093(R_86454);
(*Loc_86456).S = ((NU8) (LOC11));
goto LA8;
LA9: ;
(*Loc_86456).S = ((NU8) 0);
LA8: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(36))) goto LA13;
(*R_86454).Pos += 1;
LOC15 = Decodeint_86093(R_86454);
(*Loc_86456).Flags = ((NU8) (((NI32) (LOC15))));
goto LA12;
LA13: ;
(*Loc_86456).Flags = 0;
LA12: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(94))) goto LA17;
(*R_86454).Pos += 1;
LOC19 = Decodeint_86093(R_86454);
unsureAsgnRef((void**) &(*Loc_86456).T, Rrgettype_86085(R_86454, LOC19, Info_86457));
goto LA16;
LA17: ;
unsureAsgnRef((void**) &(*Loc_86456).T, NIM_NIL);
LA16: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(33))) goto LA21;
(*R_86454).Pos += 1;
LOC23 = Decode_86090(R_86454);
unsureAsgnRef((void**) &(*Loc_86456).R, Torope_46046(LOC23));
goto LA20;
LA21: ;
unsureAsgnRef((void**) &(*Loc_86456).R, NIM_NIL);
LA20: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(63))) goto LA25;
(*R_86454).Pos += 1;
(*Loc_86456).A = Decodeint_86093(R_86454);
goto LA24;
LA25: ;
(*Loc_86456).A = 0;
LA24: ;
if (!((NU8)((*R_86454).S->data[(*R_86454).Pos]) == (NU8)(62))) goto LA28;
(*R_86454).Pos += 1;
goto LA27;
LA28: ;
LOC30 = rawNewString(11);
appendString(LOC30, ((NimStringDesc*) &TMP190910));
appendChar(LOC30, (*R_86454).S->data[(*R_86454).Pos]);
Internalerror_41567(Info_86457, LOC30);
LA27: ;
LA2: ;
}
N_NIMCALL(TY49549*, Decodetype_86574)(TY86031* R_86576, TY41532 Info_86577) {
TY49549* Result_86578;
NI D_86579;
NI LOC7;
TY41532 LOC17;
NI LOC21;
NI LOC25;
NI LOC29;
NI LOC33;
NI LOC37;
NimStringDesc* LOC51;
TY49549* LOC52;
Result_86578 = 0;
D_86579 = 0;
Result_86578 = NIM_NIL;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(91))) goto LA2;
(*R_86576).Pos += 1;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(93))) goto LA5;
(*R_86576).Pos += 1;
goto BeforeRet;
LA5: ;
LA2: ;
Result_86578 = (TY49549*) newObj(NTI49519, sizeof(TY49549));
(*Result_86578).Sup.Sup.m_type = NTI49549;
LOC7 = Decodeint_86093(R_86576);
(*Result_86578).Kind = ((NU8) (LOC7));
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(43))) goto LA9;
(*R_86576).Pos += 1;
(*Result_86578).Sup.Id = Decodeint_86093(R_86576);
Setid_49693((*Result_86578).Sup.Id);
if (!NIM_FALSE) goto LA12;
Registerid_49932(&Result_86578->Sup);
LA12: ;
goto LA8;
LA9: ;
Internalerror_41567(Info_86577, ((NimStringDesc*) &TMP190905));
LA8: ;
Idtableput_53174(&Gtypetable_86079, &Result_86578->Sup, &Result_86578->Sup.Sup);
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(40))) goto LA15;
LOC17 = Unknownlineinfo_41536();
asgnRefNoCycle((void**) &(*Result_86578).N, Decodenode_86225(R_86576, LOC17));
LA15: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(36))) goto LA19;
(*R_86576).Pos += 1;
LOC21 = Decodeint_86093(R_86576);
(*Result_86578).Flags = ((NU8) (((NI32) (LOC21))));
LA19: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(63))) goto LA23;
(*R_86576).Pos += 1;
LOC25 = Decodeint_86093(R_86576);
(*Result_86578).Callconv = ((NU8) (LOC25));
LA23: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(42))) goto LA27;
(*R_86576).Pos += 1;
LOC29 = Decodeint_86093(R_86576);
asgnRef((void**) &(*Result_86578).Owner, Rrgetsym_86080(R_86576, LOC29, Info_86577));
LA27: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(38))) goto LA31;
(*R_86576).Pos += 1;
LOC33 = Decodeint_86093(R_86576);
asgnRef((void**) &(*Result_86578).Sym, Rrgetsym_86080(R_86576, LOC33, Info_86577));
LA31: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(47))) goto LA35;
(*R_86576).Pos += 1;
LOC37 = Decodeint_86093(R_86576);
(*Result_86578).Size = ((NI64) (LOC37));
goto LA34;
LA35: ;
(*Result_86578).Size = -1;
LA34: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(61))) goto LA39;
(*R_86576).Pos += 1;
(*Result_86578).Align = Decodeint_86093(R_86576);
goto LA38;
LA39: ;
(*Result_86578).Align = 2;
LA38: ;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(64))) goto LA42;
(*R_86576).Pos += 1;
(*Result_86578).Containerid = Decodeint_86093(R_86576);
LA42: ;
Decodeloc_86452(R_86576, &(*Result_86578).Loc, Info_86577);
while (1) {
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(94))) goto LA44;
(*R_86576).Pos += 1;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(40))) goto LA46;
(*R_86576).Pos += 1;
if (!((NU8)((*R_86576).S->data[(*R_86576).Pos]) == (NU8)(41))) goto LA49;
(*R_86576).Pos += 1;
goto LA48;
LA49: ;
LOC51 = rawNewString(14);
appendString(LOC51, ((NimStringDesc*) &TMP190911));
appendChar(LOC51, (*R_86576).S->data[(*R_86576).Pos]);
Internalerror_41567(Info_86577, LOC51);
LA48: ;
Addson_49825(Result_86578, NIM_NIL);
goto LA45;
LA46: ;
D_86579 = Decodeint_86093(R_86576);
LOC52 = Rrgettype_86085(R_86576, D_86579, Info_86577);
Addson_49825(Result_86578, LOC52);
LA45: ;
} LA44: ;
BeforeRet: ;
return Result_86578;
}
N_NIMCALL(TY49549*, Rrgettype_86085)(TY86031* R_86087, NI Id_86088, TY41532 Info_86089) {
TY49549* Result_88113;
TNimObject* LOC1;
NI Oldpos_88125;
NI D_88126;
Result_88113 = 0;
LOC1 = Idtableget_53170(Gtypetable_86079, Id_86088);
Result_88113 = ((TY49549*) (LOC1));
if (!(Result_88113 == NIM_NIL)) goto LA3;
Oldpos_88125 = 0;
Oldpos_88125 = (*R_86087).Pos;
D_88126 = 0;
D_88126 = Iitableget_53232((*R_86087).Index.Tab, Id_86088);
if (!(D_88126 == (-2147483647 -1))) goto LA6;
Internalerror_41567(Info_86089, ((NimStringDesc*) &TMP190904));
LA6: ;
(*R_86087).Pos = (NI32)(D_88126 + (*R_86087).Dataidx);
Result_88113 = Decodetype_86574(R_86087, Info_86089);
(*R_86087).Pos = Oldpos_88125;
LA3: ;
return Result_88113;
}
N_NIMCALL(TY49541*, Decodelib_86786)(TY86031* R_86788, TY41532 Info_86789) {
TY49541* Result_86790;
NI LOC4;
NimStringDesc* LOC8;
Result_86790 = 0;
Result_86790 = NIM_NIL;
if (!((NU8)((*R_86788).S->data[(*R_86788).Pos]) == (NU8)(124))) goto LA2;
Result_86790 = (TY49541*) newObj(NTI49543, sizeof(TY49541));
(*Result_86790).Sup.Sup.m_type = NTI49541;
(*R_86788).Pos += 1;
LOC4 = Decodeint_86093(R_86788);
(*Result_86790).Kind = ((NU8) (LOC4));
if (!!(((NU8)((*R_86788).S->data[(*R_86788).Pos]) == (NU8)(124)))) goto LA6;
Internalerror_41571(((NimStringDesc*) &TMP190912));
LA6: ;
(*R_86788).Pos += 1;
LOC8 = Decode_86090(R_86788);
asgnRefNoCycle((void**) &(*Result_86790).Name, Torope_46046(LOC8));
if (!!(((NU8)((*R_86788).S->data[(*R_86788).Pos]) == (NU8)(124)))) goto LA10;
Internalerror_41571(((NimStringDesc*) &TMP190913));
LA10: ;
(*R_86788).Pos += 1;
asgnRefNoCycle((void**) &(*Result_86790).Path, Decodenode_86225(R_86788, Info_86789));
LA2: ;
return Result_86790;
}
N_NIMCALL(TY49545*, Decodesym_86848)(TY86031* R_86850, TY41532 Info_86851) {
TY49545* Result_86852;
NI Id_86853;
TY48011* Ident_86854;
NU8 K_86883;
NI LOC7;
NimStringDesc* LOC14;
TNimObject* LOC15;
NI LOC27;
NI LOC31;
NI LOC35;
NI LOC39;
NI LOC46;
Result_86852 = 0;
Id_86853 = 0;
Ident_86854 = 0;
Result_86852 = NIM_NIL;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(123))) goto LA2;
(*R_86850).Pos += 1;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(125))) goto LA5;
(*R_86850).Pos += 1;
goto BeforeRet;
LA5: ;
LA2: ;
K_86883 = 0;
LOC7 = Decodeint_86093(R_86850);
K_86883 = ((NU8) (LOC7));
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(43))) goto LA9;
(*R_86850).Pos += 1;
Id_86853 = Decodeint_86093(R_86850);
Setid_49693(Id_86853);
goto LA8;
LA9: ;
Internalerror_41567(Info_86851, ((NimStringDesc*) &TMP190901));
LA8: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(38))) goto LA12;
(*R_86850).Pos += 1;
LOC14 = Decode_86090(R_86850);
Ident_86854 = Getident_48016(LOC14);
goto LA11;
LA12: ;
Internalerror_41567(Info_86851, ((NimStringDesc*) &TMP190902));
LA11: ;
LOC15 = Idtableget_53170((*R_86850).Syms, Id_86853);
Result_86852 = ((TY49545*) (LOC15));
if (!(Result_86852 == NIM_NIL)) goto LA17;
Result_86852 = (TY49545*) newObj(NTI49521, sizeof(TY49545));
objectInit(Result_86852, NTI49545);
(*Result_86852).Sup.Id = Id_86853;
Idtableput_53174(&(*R_86850).Syms, &Result_86852->Sup, &Result_86852->Sup.Sup);
if (!NIM_FALSE) goto LA20;
Registerid_49932(&Result_86852->Sup);
LA20: ;
goto LA16;
LA17: ;
if (!!(((*Result_86852).Sup.Id == Id_86853))) goto LA22;
Internalerror_41567(Info_86851, ((NimStringDesc*) &TMP190903));
goto LA16;
LA22: ;
LA16: ;
(*Result_86852).Kind = K_86883;
asgnRefNoCycle((void**) &(*Result_86852).Name, Ident_86854);
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(94))) goto LA25;
(*R_86850).Pos += 1;
LOC27 = Decodeint_86093(R_86850);
asgnRef((void**) &(*Result_86852).Typ, Rrgettype_86085(R_86850, LOC27, Info_86851));
LA25: ;
Decodelineinfo_86174(R_86850, &(*Result_86852).Info);
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(42))) goto LA29;
(*R_86850).Pos += 1;
LOC31 = Decodeint_86093(R_86850);
asgnRef((void**) &(*Result_86852).Owner, Rrgetsym_86080(R_86850, LOC31, (*Result_86852).Info));
LA29: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(36))) goto LA33;
(*R_86850).Pos += 1;
LOC35 = Decodeint_86093(R_86850);
(*Result_86852).Flags = ((NU32) (((NI32) (LOC35))));
LA33: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(64))) goto LA37;
(*R_86850).Pos += 1;
LOC39 = Decodeint_86093(R_86850);
(*Result_86852).Magic = ((NU8) (LOC39));
LA37: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(40))) goto LA41;
asgnRefNoCycle((void**) &(*Result_86852).Ast, Decodenode_86225(R_86850, (*Result_86852).Info));
LA41: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(33))) goto LA44;
(*R_86850).Pos += 1;
LOC46 = Decodeint_86093(R_86850);
(*Result_86852).Options = ((NU32) (((NI32) (LOC46))));
goto LA43;
LA44: ;
(*Result_86852).Options = (*R_86850).Options;
LA43: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(37))) goto LA48;
(*R_86850).Pos += 1;
(*Result_86852).Position = Decodeint_86093(R_86850);
goto LA47;
LA48: ;
(*Result_86852).Position = 0;
LA47: ;
if (!((NU8)((*R_86850).S->data[(*R_86850).Pos]) == (NU8)(96))) goto LA51;
(*R_86850).Pos += 1;
(*Result_86852).Offset = Decodeint_86093(R_86850);
goto LA50;
LA51: ;
(*Result_86852).Offset = -1;
LA50: ;
Decodeloc_86452(R_86850, &(*Result_86852).Loc, (*Result_86852).Info);
asgnRefNoCycle((void**) &(*Result_86852).Annex, Decodelib_86786(R_86850, Info_86851));
BeforeRet: ;
return Result_86852;
}
N_NIMCALL(TY49545*, Decodesymsafepos_88164)(TY86031* Rd_88166, NI Offset_88167, TY41532 Info_88168) {
TY49545* Result_88169;
NI Oldpos_88172;
Result_88169 = 0;
if (!((*Rd_88166).Dataidx == 0)) goto LA2;
Internalerror_41567(Info_88168, ((NimStringDesc*) &TMP190900));
LA2: ;
Oldpos_88172 = 0;
Oldpos_88172 = (*Rd_88166).Pos;
(*Rd_88166).Pos = (NI32)(Offset_88167 + (*Rd_88166).Dataidx);
Result_88169 = Decodesym_86848(Rd_88166, Info_88168);
(*Rd_88166).Pos = Oldpos_88172;
return Result_88169;
}
N_NIMCALL(void, Loadstub_86070)(TY49545* S_86072) {
TY86031* Rd_88515;
NI Theid_88516;
NI D_88517;
TY49545* Rs_88520;
TY41532 LOC7;
if (!!(((*S_86072).Kind == ((NU8) 20)))) goto LA2;
Internalerror_41571(((NimStringDesc*) &TMP190915));
LA2: ;
Rd_88515 = 0;
Rd_88515 = Gmods_88153->data[(*S_86072).Position].Rd;
Theid_88516 = 0;
Theid_88516 = (*S_86072).Sup.Id;
D_88517 = 0;
D_88517 = Iitableget_53232((*Rd_88515).Index.Tab, (*S_86072).Sup.Id);
if (!(D_88517 == (-2147483647 -1))) goto LA5;
Internalerror_41571(((NimStringDesc*) &TMP190916));
LA5: ;
Rs_88520 = 0;
LOC7 = Unknownlineinfo_41536();
Rs_88520 = Decodesymsafepos_88164(Rd_88515, D_88517, LOC7);
if (!!((Rs_88520 == S_86072))) goto LA9;
Internalerror_41567((*Rs_88520).Info, ((NimStringDesc*) &TMP190917));
goto LA8;
LA9: ;
if (!!(((*Rs_88520).Sup.Id == Theid_88516))) goto LA11;
Internalerror_41567((*Rs_88520).Info, ((NimStringDesc*) &TMP190918));
goto LA8;
LA11: ;
LA8: ;
}
N_NIMCALL(TY49545*, Rrgetsym_86080)(TY86031* R_86082, NI Id_86083, TY41532 Info_86084) {
TY49545* Result_88178;
TNimObject* LOC1;
NI D_88190;
NI Moduleid_88193;
NimStringDesc* LOC11;
TY46008* LOC12;
NimStringDesc* LOC13;
NI I_88211;
NI HEX3Atmp_88257;
NI Res_88259;
TY86031* Rd_88212;
NimStringDesc* LOC24;
TY46008* LOC25;
NimStringDesc* LOC26;
NIM_BOOL LOC28;
Result_88178 = 0;
LOC1 = Idtableget_53170((*R_86082).Syms, Id_86083);
Result_88178 = ((TY49545*) (LOC1));
if (!(Result_88178 == NIM_NIL)) goto LA3;
D_88190 = 0;
D_88190 = Iitableget_53232((*R_86082).Index.Tab, Id_86083);
if (!(D_88190 == (-2147483647 -1))) goto LA6;
Moduleid_88193 = 0;
Moduleid_88193 = Iitableget_53232((*R_86082).Imports.Tab, Id_86083);
if (!(Moduleid_88193 < 0)) goto LA9;
LOC12 = Encodeint_86073(((NI64) (Id_86083)));
LOC13 = Ropetostr_46066(LOC12);
LOC11 = rawNewString(LOC13->Sup.len + 28);
appendString(LOC11, ((NimStringDesc*) &TMP190897));
appendString(LOC11, LOC13);
Internalerror_41567(Info_86084, LOC11);
LA9: ;
I_88211 = 0;
HEX3Atmp_88257 = 0;
HEX3Atmp_88257 = (Gmods_88153->Sup.len-1);
Res_88259 = 0;
Res_88259 = 0;
while (1) {
if (!(Res_88259 <= HEX3Atmp_88257)) goto LA14;
I_88211 = Res_88259;
Rd_88212 = 0;
Rd_88212 = Gmods_88153->data[I_88211].Rd;
if (!!((Rd_88212 == NIM_NIL))) goto LA16;
if (!((*Rd_88212).Moduleid == Moduleid_88193)) goto LA19;
D_88190 = Iitableget_53232((*Rd_88212).Index.Tab, Id_86083);
if (!!((D_88190 == (-2147483647 -1)))) goto LA22;
Result_88178 = Decodesymsafepos_88164(Rd_88212, D_88190, Info_86084);
goto LA14;
goto LA21;
LA22: ;
LOC25 = Encodeint_86073(((NI64) (Id_86083)));
LOC26 = Ropetostr_46066(LOC25);
LOC24 = rawNewString(LOC26->Sup.len + 28);
appendString(LOC24, ((NimStringDesc*) &TMP190914));
appendString(LOC24, LOC26);
Internalerror_41567(Info_86084, LOC24);
LA21: ;
goto LA18;
LA19: ;
LA18: ;
LA16: ;
Res_88259 += 1;
} LA14: ;
goto LA5;
LA6: ;
Result_88178 = Decodesymsafepos_88164(R_86082, D_88190, Info_86084);
LA5: ;
LA3: ;
LOC28 = !((Result_88178 == NIM_NIL));
if (!(LOC28)) goto LA29;
LOC28 = ((*Result_88178).Kind == ((NU8) 20));
LA29: ;
if (!LOC28) goto LA30;
Loadstub_86070(Result_88178);
LA30: ;
return Result_88178;
}
N_NIMCALL(void, Loadconverters_88290)(TY86031* R_88292) {
NIM_BOOL LOC2;
NI D_88299;
TY41532 LOC7;
TY49545* LOC8;
LOC2 = ((*R_88292).Convertersidx == 0);
if (LOC2) goto LA3;
LOC2 = ((*R_88292).Dataidx == 0);
LA3: ;
if (!LOC2) goto LA4;
Internalerror_41571(((NimStringDesc*) &TMP190896));
LA4: ;
(*R_88292).Pos = (*R_88292).Convertersidx;
while (1) {
if (!((NU8)(10) < (NU8)((*R_88292).S->data[(*R_88292).Pos]))) goto LA6;
D_88299 = 0;
D_88299 = Decodeint_86093(R_88292);
LOC7 = Unknownlineinfo_41536();
LOC8 = Rrgetsym_86080(R_88292, D_88299, LOC7);
if (!((NU8)((*R_88292).S->data[(*R_88292).Pos]) == (NU8)(32))) goto LA10;
(*R_88292).Pos += 1;
LA10: ;
} LA6: ;
}
N_NIMCALL(TY86031*, Handlesymbolfile_86060)(TY49545* Module_86062, NimStringDesc* Filename_86063) {
TY86031* Result_88464;
NU8 LOC4;
NI Idx_88476;
Result_88464 = 0;
if (!!(((Gglobaloptions_40077 &(1<<((((NU8) 15))&31)))!=0))) goto LA2;
(*Module_86062).Sup.Id = Getid_49691();
Result_88464 = NIM_NIL;
goto BeforeRet;
LA2: ;
LOC4 = Checkdep_88355(Filename_86063);
Idx_88476 = 0;
Idx_88476 = Getmoduleidx_88315(Filename_86063);
if (!(Gmods_88153->data[Idx_88476].Reason == ((NU8) 0))) goto LA6;
Internalerror_41571(((NimStringDesc*) &TMP190892));
LA6: ;
Result_88464 = Gmods_88153->data[Idx_88476].Rd;
if (!!((Result_88464 == NIM_NIL))) goto LA9;
(*Module_86062).Sup.Id = (*Result_88464).Moduleid;
Idtableput_53174(&(*Result_88464).Syms, &Module_86062->Sup, &Module_86062->Sup.Sup);
Processinterf_87431(Result_88464, Module_86062);
Processcompilerprocs_87471(Result_88464, Module_86062);
Loadconverters_88290(Result_88464);
goto LA8;
LA9: ;
(*Module_86062).Sup.Id = Getid_49691();
LA8: ;
BeforeRet: ;
return Result_88464;
}
N_NIMCALL(TY49523*, Loadinitsection_86067)(TY86031* R_86069) {
TY49523* Result_88265;
NIM_BOOL LOC2;
NI Oldpos_88270;
NIM_BOOL LOC7;
NI D_88275;
NI P_88288;
TY41532 LOC9;
TY49523* LOC10;
Result_88265 = 0;
LOC2 = ((*R_86069).Initidx == 0);
if (LOC2) goto LA3;
LOC2 = ((*R_86069).Dataidx == 0);
LA3: ;
if (!LOC2) goto LA4;
Internalerror_41571(((NimStringDesc*) &TMP190920));
LA4: ;
Oldpos_88270 = 0;
Oldpos_88270 = (*R_86069).Pos;
(*R_86069).Pos = (*R_86069).Initidx;
Result_88265 = Newnode_49708(((NU8) 101));
while (1) {
LOC7 = ((NU8)(10) < (NU8)((*R_86069).S->data[(*R_86069).Pos]));
if (!(LOC7)) goto LA8;
LOC7 = !(((NU8)((*R_86069).S->data[(*R_86069).Pos]) == (NU8)(41)));
LA8: ;
if (!LOC7) goto LA6;
D_88275 = 0;
D_88275 = Decodeint_86093(R_86069);
(*R_86069).Pos += 1;
P_88288 = 0;
P_88288 = (*R_86069).Pos;
(*R_86069).Pos = (NI32)(D_88275 + (*R_86069).Dataidx);
LOC9 = Unknownlineinfo_41536();
LOC10 = Decodenode_86225(R_86069, LOC9);
Addson_49821(Result_88265, LOC10);
(*R_86069).Pos = P_88288;
} LA6: ;
(*R_86069).Pos = Oldpos_88270;
return Result_88265;
}
N_NIMCALL(NI32, Getcrc_86064)(NimStringDesc* Filename_86066) {
NI32 Result_88501;
NI Idx_88502;
Result_88501 = 0;
Idx_88502 = 0;
Idx_88502 = Getmoduleidx_88315(Filename_86066);
Result_88501 = Gmods_88153->data[Idx_88502].Crc;
return Result_88501;
}
N_NIMCALL(TY46008*, Encode_86076)(NimStringDesc* S_86078) {
TY46008* Result_86102;
NimStringDesc* Res_86103;
NI I_86128;
NI HEX3Atmp_86147;
NI Res_86149;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
Result_86102 = 0;
Res_86103 = 0;
Res_86103 = copyString(((NimStringDesc*) &TMP86019));
I_86128 = 0;
HEX3Atmp_86147 = 0;
HEX3Atmp_86147 = (NI32)((NI32)(S_86078->Sup.len + 0) - 1);
Res_86149 = 0;
Res_86149 = 0;
while (1) {
if (!(Res_86149 <= HEX3Atmp_86147)) goto LA1;
I_86128 = Res_86149;
switch (((NU8)(S_86078->data[I_86128]))) {
case 97 ... 122:
case 65 ... 90:
case 48 ... 57:
case 95:
Res_86103 = addChar(Res_86103, S_86078->data[I_86128]);
break;
default:
LOC3 = nsuToHex(((NI64) (((NU8)(S_86078->data[I_86128])))), 2);
LOC2 = rawNewString(Res_86103->Sup.len + LOC3->Sup.len + 1);
appendString(LOC2, Res_86103);
appendChar(LOC2, 92);
appendString(LOC2, LOC3);
Res_86103 = LOC2;
break;
}
Res_86149 += 1;
} LA1: ;
Result_86102 = Torope_46046(Res_86103);
return Result_86102;
}
N_NOINLINE(void, rodreadInit)(void) {
Rodcompilerprocs_86059.m_type = NTI49527;
asgnRefNoCycle((void**) &Gmods_88153, (TY88132*) newSeq(NTI88132, 0));
Initidtable_49752(&Gtypetable_86079);
Initstrtable_49744(&Rodcompilerprocs_86059);
}

