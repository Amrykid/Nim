/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY51547 TY51547;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY51525 TY51525;
typedef struct TY101006 TY101006;
typedef struct TY101002 TY101002;
typedef struct TY89031 TY89031;
typedef struct TY71013 TY71013;
typedef struct TY88028 TY88028;
typedef struct TY77011 TY77011;
typedef struct TY73267 TY73267;
typedef struct TY73263 TY73263;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY51551 TY51551;
typedef struct TY43532 TY43532;
typedef struct TY50011 TY50011;
typedef struct TY51519 TY51519;
typedef struct TY50005 TY50005;
typedef struct TY51529 TY51529;
typedef struct TY51527 TY51527;
typedef struct TY51539 TY51539;
typedef struct TY48008 TY48008;
typedef struct TY51543 TY51543;
typedef struct TY51549 TY51549;
typedef struct TY35221 TY35221;
typedef struct TY89029 TY89029;
typedef struct TY55223 TY55223;
typedef struct TY55221 TY55221;
typedef struct TY55219 TY55219;
typedef struct TY51563 TY51563;
typedef struct TY51561 TY51561;
typedef struct TY51559 TY51559;
typedef struct TY72015 TY72015;
typedef struct TY73281 TY73281;
typedef struct TY39013 TY39013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef N_NIMCALL_PTR(TY51547*, TY101044) (NimStringDesc* Filename_101045);
typedef N_NIMCALL_PTR(TY51525*, TY101048) (NimStringDesc* Filename_101049);
typedef N_NIMCALL_PTR(TY101002*, TY101007) (TY51547* Module_101008, NimStringDesc* Filename_101009);
typedef N_NIMCALL_PTR(TY101002*, TY101012) (TY51547* Module_101013, NimStringDesc* Filename_101014, TY89031* Rd_101015);
typedef N_NIMCALL_PTR(TY51525*, TY101018) (TY101002* P_101019, TY51525* N_101020);
typedef N_NIMCALL_PTR(TY51525*, TY101023) (TY101002* P_101024, TY51525* Toplevelstmt_101025);
struct TY101006 {
TY101007 Open;
TY101012 Opencached;
TY101018 Close;
TY101023 Process;
};
typedef TY101006 TY101128[10];
struct TY77011 {
TY73267* Lex;
TY73263* Tok;
};
struct TY88028 {
NU8 Skin;
TY77011 Parser;
};
typedef TY101002* TY101126[10];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY71013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TY43532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51525 {
TY51551* Typ;
NimStringDesc* Comment;
TY43532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51547* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51519* Sons;
} S6;
} KindU;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
struct TY51529 {
TNimType* m_type;
NI Counter;
TY51527* Data;
};
struct TY51539 {
NU8 K;
NU8 S;
NU8 Flags;
TY51551* T;
TY48008* R;
NI A;
};
struct TY51547 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51551* Typ;
TY50011* Name;
TY43532 Info;
TY51547* Owner;
NU32 Flags;
TY51529 Tab;
TY51525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51539 Loc;
TY51543* Annex;
};
struct TY51551 {
  TY50005 Sup;
NU8 Kind;
TY51549* Sons;
TY51525* N;
NU8 Flags;
NU8 Callconv;
TY51547* Owner;
TY51547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51539 Loc;
};
struct TY101002 {
  TNimObject Sup;
};
struct TY55219 {
NI Key;
NI Val;
};
struct TY55223 {
NI Counter;
TY55221* Data;
};
struct TY89029 {
NI Lastidxkey;
NI Lastidxval;
TY55223 Tab;
TY48008* R;
NI Offset;
};
struct TY51559 {
TY50005* Key;
TNimObject* Val;
};
struct TY51563 {
NI Counter;
TY51561* Data;
};
struct TY89031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY35221* Moddeps;
TY35221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY89029 Index;
TY89029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY51563 Syms;
};
struct TY72015 {
  TNimObject Sup;
NI Bufpos;
NCSTRING Buf;
NI Buflen;
TY71013* Stream;
NI Linenumber;
NI Sentinel;
NI Linestart;
};
struct TY73267 {
  TY72015 Sup;
NimStringDesc* Filename;
TY73281* Indentstack;
NI Dedent;
NI Indentahead;
};
struct TY73263 {
TNimType* m_type;
NU8 Toktype;
NI Indent;
TY50011* Ident;
NI64 Inumber;
NF64 Fnumber;
NU8 Base;
NimStringDesc* Literal;
TY73263* Next;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51543 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51525* Path;
};
struct TY51519 {
  TGenericSeq Sup;
  TY51525* data[SEQ_DECL_SIZE];
};
struct TY51527 {
  TGenericSeq Sup;
  TY51547* data[SEQ_DECL_SIZE];
};
struct TY51549 {
  TGenericSeq Sup;
  TY51551* data[SEQ_DECL_SIZE];
};
struct TY35221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY55221 {
  TGenericSeq Sup;
  TY55219 data[SEQ_DECL_SIZE];
};
struct TY51561 {
  TGenericSeq Sup;
  TY51559 data[SEQ_DECL_SIZE];
};
struct TY73281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Openpasses_101147)(TY101002** A_101150, TY51547* Module_101151, NimStringDesc* Filename_101152);
N_NIMCALL(TY71013*, Llstreamopen_71032)(NimStringDesc* Filename_71034, NU8 Mode_71035);
N_NIMCALL(void, Rawmessage_43553)(NU8 Msg_43555, NimStringDesc* Arg_43556);
N_NIMCALL(void, Openparsers_88034)(TY88028* P_88037, NimStringDesc* Filename_88038, TY71013* Inputstream_88039);
N_NIMCALL(TY51525*, Parsetoplevelstmt_88048)(TY88028* P_88051);
N_NIMCALL(void, Processtoplevelstmt_101222)(TY51525* N_101224, TY101002** A_101226);
N_NIMCALL(void, Closeparsers_88040)(TY88028* P_88043);
N_NIMCALL(void, Closepasses_101203)(TY101002** A_101206);
N_NIMCALL(void, Idsynchronizationpoint_51698)(NI Idrange_51700);
N_NIMCALL(void, Openpassescached_101182)(TY101002** A_101185, TY51547* Module_101186, NimStringDesc* Filename_101187, TY89031* Rd_101188);
N_NIMCALL(TY51525*, Loadinitsection_89067)(TY89031* R_89069);
N_NIMCALL(NI, Sonslen_51803)(TY51525* N_51805);
N_NIMCALL(void, Processtoplevelstmtcached_101242)(TY51525* N_101244, TY101002** A_101246);
N_NIMCALL(void, Closepassescached_101262)(TY101002** A_101265);
TY101044 Gimportmodule_101047;
TY101048 Gincludefile_101051;
TY101128 Gpasses_101130;
NI Gpasseslen_101131;
N_NIMCALL(void, Openpasses_101147)(TY101002** A_101150, TY51547* Module_101151, NimStringDesc* Filename_101152) {
NI I_101175;
NI HEX3Atmp_101177;
NI Res_101179;
I_101175 = 0;
HEX3Atmp_101177 = 0;
HEX3Atmp_101177 = (NI32)(Gpasseslen_101131 - 1);
Res_101179 = 0;
Res_101179 = 0;
while (1) {
if (!(Res_101179 <= HEX3Atmp_101177)) goto LA1;
I_101175 = Res_101179;
if (!!(((void*) (Gpasses_101130[(I_101175)-0].Open)) == 0)) goto LA3;
A_101150[(I_101175)-0] = Gpasses_101130[(I_101175)-0].Open(Module_101151, Filename_101152);
goto LA2;
LA3: ;
A_101150[(I_101175)-0] = NIM_NIL;
LA2: ;
Res_101179 += 1;
} LA1: ;
}
N_NIMCALL(void, Processtoplevelstmt_101222)(TY51525* N_101224, TY101002** A_101226) {
TY51525* M_101227;
NI I_101235;
NI HEX3Atmp_101237;
NI Res_101239;
M_101227 = 0;
M_101227 = N_101224;
I_101235 = 0;
HEX3Atmp_101237 = 0;
HEX3Atmp_101237 = (NI32)(Gpasseslen_101131 - 1);
Res_101239 = 0;
Res_101239 = 0;
while (1) {
if (!(Res_101239 <= HEX3Atmp_101237)) goto LA1;
I_101235 = Res_101239;
if (!!(((void*) (Gpasses_101130[(I_101235)-0].Process)) == 0)) goto LA3;
M_101227 = Gpasses_101130[(I_101235)-0].Process(A_101226[(I_101235)-0], M_101227);
LA3: ;
Res_101239 += 1;
} LA1: ;
}
N_NIMCALL(void, Closepasses_101203)(TY101002** A_101206) {
TY51525* M_101207;
NI I_101215;
NI HEX3Atmp_101217;
NI Res_101219;
M_101207 = 0;
M_101207 = NIM_NIL;
I_101215 = 0;
HEX3Atmp_101217 = 0;
HEX3Atmp_101217 = (NI32)(Gpasseslen_101131 - 1);
Res_101219 = 0;
Res_101219 = 0;
while (1) {
if (!(Res_101219 <= HEX3Atmp_101217)) goto LA1;
I_101215 = Res_101219;
if (!!(((void*) (Gpasses_101130[(I_101215)-0].Close)) == 0)) goto LA3;
M_101207 = Gpasses_101130[(I_101215)-0].Close(A_101206[(I_101215)-0], M_101207);
LA3: ;
A_101206[(I_101215)-0] = NIM_NIL;
Res_101219 += 1;
} LA1: ;
}
N_NIMCALL(void, Openpassescached_101182)(TY101002** A_101185, TY51547* Module_101186, NimStringDesc* Filename_101187, TY89031* Rd_101188) {
NI I_101196;
NI HEX3Atmp_101198;
NI Res_101200;
I_101196 = 0;
HEX3Atmp_101198 = 0;
HEX3Atmp_101198 = (NI32)(Gpasseslen_101131 - 1);
Res_101200 = 0;
Res_101200 = 0;
while (1) {
if (!(Res_101200 <= HEX3Atmp_101198)) goto LA1;
I_101196 = Res_101200;
if (!!(((void*) (Gpasses_101130[(I_101196)-0].Opencached)) == 0)) goto LA3;
A_101185[(I_101196)-0] = Gpasses_101130[(I_101196)-0].Opencached(Module_101186, Filename_101187, Rd_101188);
goto LA2;
LA3: ;
A_101185[(I_101196)-0] = NIM_NIL;
LA2: ;
Res_101200 += 1;
} LA1: ;
}
N_NIMCALL(void, Processtoplevelstmtcached_101242)(TY51525* N_101244, TY101002** A_101246) {
TY51525* M_101247;
NI I_101255;
NI HEX3Atmp_101257;
NI Res_101259;
M_101247 = 0;
M_101247 = N_101244;
I_101255 = 0;
HEX3Atmp_101257 = 0;
HEX3Atmp_101257 = (NI32)(Gpasseslen_101131 - 1);
Res_101259 = 0;
Res_101259 = 0;
while (1) {
if (!(Res_101259 <= HEX3Atmp_101257)) goto LA1;
I_101255 = Res_101259;
if (!!(((void*) (Gpasses_101130[(I_101255)-0].Opencached)) == 0)) goto LA3;
M_101247 = Gpasses_101130[(I_101255)-0].Process(A_101246[(I_101255)-0], M_101247);
LA3: ;
Res_101259 += 1;
} LA1: ;
}
N_NIMCALL(void, Closepassescached_101262)(TY101002** A_101265) {
TY51525* M_101266;
NI I_101274;
NI HEX3Atmp_101276;
NI Res_101278;
NIM_BOOL LOC3;
M_101266 = 0;
M_101266 = NIM_NIL;
I_101274 = 0;
HEX3Atmp_101276 = 0;
HEX3Atmp_101276 = (NI32)(Gpasseslen_101131 - 1);
Res_101278 = 0;
Res_101278 = 0;
while (1) {
if (!(Res_101278 <= HEX3Atmp_101276)) goto LA1;
I_101274 = Res_101278;
LOC3 = !(((void*) (Gpasses_101130[(I_101274)-0].Opencached)) == 0);
if (!(LOC3)) goto LA4;
LOC3 = !(((void*) (Gpasses_101130[(I_101274)-0].Close)) == 0);
LA4: ;
if (!LOC3) goto LA5;
M_101266 = Gpasses_101130[(I_101274)-0].Close(A_101265[(I_101274)-0], M_101266);
LA5: ;
A_101265[(I_101274)-0] = NIM_NIL;
Res_101278 += 1;
} LA1: ;
}
N_NIMCALL(void, Processmodule_101035)(TY51547* Module_101037, NimStringDesc* Filename_101038, TY71013* Stream_101039, TY89031* Rd_101040) {
TY88028 P_101287;
TY51525* N_101288;
TY101126 A_101289;
TY71013* S_101290;
NI I_101358;
NI HEX3Atmp_101376;
NI LOC18;
NI Res_101378;
memset((void*)&P_101287, 0, sizeof(P_101287));
N_101288 = 0;
memset((void*)&A_101289, 0, sizeof(A_101289));
S_101290 = 0;
if (!(Rd_101040 == NIM_NIL)) goto LA2;
Openpasses_101147(A_101289, Module_101037, Filename_101038);
if (!(Stream_101039 == NIM_NIL)) goto LA5;
S_101290 = Llstreamopen_71032(Filename_101038, ((NU8) 0));
if (!(S_101290 == NIM_NIL)) goto LA8;
Rawmessage_43553(((NU8) 2), Filename_101038);
goto BeforeRet;
LA8: ;
goto LA4;
LA5: ;
S_101290 = Stream_101039;
LA4: ;
while (1) {
Openparsers_88034(&P_101287, Filename_101038, S_101290);
while (1) {
N_101288 = Parsetoplevelstmt_88048(&P_101287);
if (!(N_101288 == NIM_NIL)) goto LA13;
goto LA11;
LA13: ;
Processtoplevelstmt_101222(N_101288, A_101289);
} LA11: ;
Closeparsers_88040(&P_101287);
if (!!(((*S_101290).Kind == ((NU8) 3)))) goto LA16;
goto LA10;
LA16: ;
} LA10: ;
Closepasses_101203(A_101289);
Idsynchronizationpoint_51698(1000);
goto LA1;
LA2: ;
Openpassescached_101182(A_101289, Module_101037, Filename_101038, Rd_101040);
N_101288 = Loadinitsection_89067(Rd_101040);
I_101358 = 0;
HEX3Atmp_101376 = 0;
LOC18 = Sonslen_51803(N_101288);
HEX3Atmp_101376 = (NI32)(LOC18 - 1);
Res_101378 = 0;
Res_101378 = 0;
while (1) {
if (!(Res_101378 <= HEX3Atmp_101376)) goto LA19;
I_101358 = Res_101378;
Processtoplevelstmtcached_101242((*N_101288).KindU.S6.Sons->data[I_101358], A_101289);
Res_101378 += 1;
} LA19: ;
Closepassescached_101262(A_101289);
LA1: ;
BeforeRet: ;
}
N_NIMCALL(void, Registerpass_101028)(TY101006* P_101030) {
Gpasses_101130[(Gpasseslen_101131)-0] = (*P_101030);
Gpasseslen_101131 += 1;
}
N_NIMCALL(void, Initpass_101031)(TY101006* P_101034) {
(*P_101034).Open = NIM_NIL;
(*P_101034).Opencached = NIM_NIL;
(*P_101034).Close = NIM_NIL;
(*P_101034).Process = NIM_NIL;
}
N_NIMCALL(NIM_BOOL, Astneeded_101041)(TY51547* S_101043) {
NIM_BOOL Result_101055;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
Result_101055 = 0;
LOC4 = ((1536 &(1<<(((*S_101043).Kind)&31)))!=0);
if (!(LOC4)) goto LA5;
LOC4 = ((34078720 & (*S_101043).Flags) == 0);
LA5: ;
LOC3 = LOC4;
if (!(LOC3)) goto LA6;
LOC3 = !(((*(*S_101043).Typ).Callconv == ((NU8) 5)));
LA6: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA7;
LOC2 = ((*(*S_101043).Ast).KindU.S6.Sons->data[1] == NIM_NIL);
LA7: ;
if (!LOC2) goto LA8;
Result_101055 = NIM_FALSE;
goto LA1;
LA8: ;
Result_101055 = NIM_TRUE;
LA1: ;
return Result_101055;
}
N_NOINLINE(void, passesInit)(void) {
}

