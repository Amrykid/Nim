/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY143077 TY143077;
typedef struct TY143690 TY143690;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY143137 TY143137;
typedef struct TY143135 TY143135;
typedef struct TY143686 TY143686;
typedef struct TY73281 TY73281;
typedef struct TY143695 TY143695;
typedef struct TY143684 TY143684;
typedef struct TY10602 TY10602;
typedef struct TY10618 TY10618;
typedef struct TY10990 TY10990;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY8004 TY8004;
typedef struct TY10988 TY10988;
typedef struct TY143139 TY143139;
typedef struct TY143075 TY143075;
typedef struct TY43532 TY43532;
typedef struct TY35221 TY35221;
typedef NU8 TY22602[32];
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef NimStringDesc* TY145479[12];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY143135 {
NU8 Kind;
NI Ival;
NimStringDesc* Symbol;
NI Line;
NI Col;
};
struct TY143690 {
  TNimObject Sup;
NI Idx;
TY143137* Tok;
TY143686* S;
TY73281* Indentstack;
NimStringDesc* Filename;
NI Line;
NI Col;
NIM_BOOL Hastoc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY143684 {
NimStringDesc* Key;
TY143077* Value;
};
typedef NI TY26135[256];
struct TY143686 {
NI Ulevel;
NI Olevel;
TY143695* Subs;
TY143695* Refs;
TY26135 Underlinetolevel;
TY26135 Overlinetolevel;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
struct TY143139 {
  TNimObject Sup;
NCSTRING Buf;
NI Bufpos;
NI Line;
NI Col;
NI Baseindent;
NIM_BOOL Skippounds;
};
struct TY143077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY143075* Sons;
};
struct TY43532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
typedef N_NIMCALL_PTR(TY143077*, TY147071) (TY143690* P_147077);
typedef NimStringDesc* TY146839[3];
typedef NI TY146844[3];
typedef NI TY8614[16];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY143137 {
  TGenericSeq Sup;
  TY143135 data[SEQ_DECL_SIZE];
};
struct TY73281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY143695 {
  TGenericSeq Sup;
  TY143684 data[SEQ_DECL_SIZE];
};
struct TY143075 {
  TGenericSeq Sup;
  TY143077* data[SEQ_DECL_SIZE];
};
struct TY35221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Rawmessage_43553)(NU8 Msg_43555, NimStringDesc* Arg_43556);
N_NIMCALL(void, Initparser_143839)(TY143690* P_143842, TY143686* Sharedstate_143843);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508);
N_NIMCALL(TY143686*, Newsharedstate_143710)(void);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(void, Gettokens_143438)(NimStringDesc* Buffer_143440, NIM_BOOL Skippounds_143441, TY143137** Tokens_143443);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
N_NIMCALL(void, Rawgettok_143386)(TY143139* L_143389, TY143135* Tok_143391);
N_NIMCALL(void, Getthing_143158)(TY143139* L_143161, TY143135* Tok_143163, TY22602 S_143164);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Getindent_143358)(TY143139* L_143361, TY143135* Tok_143363);
N_NIMCALL(NI, Getindentaux_143237)(TY143139* L_143240, NI Start_143241);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_25750, NIM_CHAR C_25751);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487);
N_NIMCALL(void, Getadornment_143202)(TY143139* L_143205, TY143135* Tok_143207);
N_NIMCALL(TY143077*, Resolvesubs_147494)(TY143690* P_147497, TY143077* N_147498);
N_NIMCALL(NI, Findsub_143998)(TY143690* P_144001, TY143077* N_144002);
N_NIMCALL(NimStringDesc*, Addnodes_143108)(TY143077* N_143110);
N_NIMCALL(void, Addnodesaux_143874)(TY143077* N_143876, NimStringDesc** Result_143878);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18582, NI Addlen_18583);
N_NIMCALL(NI, Rsonslen_143091)(TY143077* N_143093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_24638, NimStringDesc* B_24639);
N_NIMCALL(NimStringDesc*, Getenv_35425)(NimStringDesc* Key_35427);
N_NIMCALL(TY143077*, Newrstnode_143097)(NU8 Kind_143099, NimStringDesc* S_143100);
N_NIMCALL(TY143077*, Newrstnode_143094)(NU8 Kind_143096);
N_NIMCALL(void, Rstmessage_143765)(TY143690* P_143767, NU8 Msgkind_143768, NimStringDesc* Arg_143769);
N_NIMCALL(void, Limessage_43562)(TY43532 Info_43564, NU8 Msg_43565, NimStringDesc* Arg_43566);
N_NIMCALL(TY43532, Tokinfo_143760)(TY143690* P_143762, TY143135* Tok_143763);
N_NIMCALL(TY43532, Newlineinfo_43574)(NimStringDesc* Filename_43576, NI Line_43577, NI Col_43578);
N_NIMCALL(TY143077*, Findref_144121)(TY143690* P_144124, NimStringDesc* Key_144125);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_143105)(TY143077* N_143107);
N_NIMCALL(void, Rstnodetorefnameaux_143922)(TY143077* N_143924, NimStringDesc** R_143926, NIM_BOOL* B_143928);
N_NIMCALL(void, Addson_143101)(TY143077* Father_143103, TY143077* Son_143104);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18635, NI Elemsize_18636);
N_NIMCALL(TY143077*, Parsedoc_146155)(TY143690* P_146158);
N_NIMCALL(TY143077*, Parsesectionwrapper_147035)(TY143690* P_147038);
N_NIMCALL(void, Parsesection_145508)(TY143690* P_145511, TY143077* Result_145512);
N_NIMCALL(NI, Currind_143774)(TY143690* P_143776);
N_NIMCALL(void, Pushind_143778)(TY143690* P_143781, NI Ind_143782);
N_NIMCALL(void, Popind_143801)(TY143690* P_143804);
N_NIMCALL(NU8, Whichsection_145862)(TY143690* P_145864);
N_NIMCALL(NIM_BOOL, Match_144762)(TY143690* P_144764, NI Start_144765, NimStringDesc* Expr_144766);
N_NIMCALL(NIM_BOOL, Allcharsinset_25830)(NimStringDesc* S_25832, TY22602 Theset_25833);
N_NIMCALL(NI, Tokenafternewline_145784)(TY143690* P_145786);
N_NIMCALL(NIM_BOOL, Prednl_145822)(TY143690* P_145824);
N_NIMCALL(NIM_BOOL, Islineblock_145813)(TY143690* P_145815);
N_NIMCALL(void, Rstmessage_143770)(TY143690* P_143772, NU8 Msgkind_143773);
N_NIMCALL(NIM_BOOL, Isdeflist_145839)(TY143690* P_145841);
N_NIMCALL(NIM_BOOL, Isoptionlist_145858)(TY143690* P_145860);
N_NIMCALL(TY143077*, Parseliteralblock_145682)(TY143690* P_145685);
N_NIMCALL(TY143077*, Parsebulletlist_146571)(TY143690* P_146574);
N_NIMCALL(TY143077*, Parselineblock_145875)(TY143690* P_145878);
N_NIMCALL(TY143077*, Parsedotdot_145678)(TY143690* P_145681);
N_NIMCALL(NimStringDesc*, Getdirective_145270)(TY143690* P_145273);
N_NIMCALL(NU8, Getdirkind_145495)(NimStringDesc* S_145497);
N_NIMCALL(NI, Binarystrsearch_42147)(NimStringDesc** X_42150, NI X_42150Len0, NimStringDesc* Y_42151);
N_NIMCALL(TY143077*, Dirinclude_147227)(TY143690* P_147230);
N_NIMCALL(TY143077*, Parsedirective_147213)(TY143690* P_147216, NU8 Flags_147217, TY147071 Contentparser_147218);
N_NIMCALL(TY143077*, Parsedirective_147079)(TY143690* P_147082, NU8 Flags_147083);
N_NIMCALL(TY143077*, Newleaf_144513)(TY143690* P_144516);
N_NIMCALL(void, Parseline_145502)(TY143690* P_145505, TY143077* Father_145506);
N_NIMCALL(void, Parseinline_145188)(TY143690* P_145191, TY143077* Father_145192);
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_144640)(TY143690* P_144642, NimStringDesc* Markup_144643);
N_NIMCALL(void, Parseuntil_145111)(TY143690* P_145114, TY143077* Father_145115, NimStringDesc* Postfix_145116, NIM_BOOL Interpretbackslash_145117);
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_144597)(TY143690* P_144599, NimStringDesc* Markup_144600);
N_NIMCALL(void, Parsebackslash_144691)(TY143690* P_144694, TY143077* Father_144695);
N_NIMCALL(TY143077*, Parsepostfix_145010)(TY143690* P_145013, TY143077* N_145014);
N_NIMCALL(void, Fixupembeddedref_144941)(TY143077* N_144943, TY143077* A_144944, TY143077* B_144945);
N_NIMCALL(void, Setref_144078)(TY143690* P_144081, NimStringDesc* Key_144082, TY143077* Value_144083);
N_NIMCALL(void, Parseurl_145067)(TY143690* P_145070, TY143077* Father_145071);
N_NIMCALL(NIM_BOOL, Isurl_145053)(TY143690* P_145055, NI I_145056);
N_NIMCALL(TY143077*, Parsefields_145554)(TY143690* P_145557);
N_NIMCALL(TY143077*, Parsefield_145513)(TY143690* P_145516);
N_NIMCALL(NIM_BOOL, Indfollows_147198)(TY143690* P_147200);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24981, NIM_BOOL Leading_24982, NIM_BOOL Trailing_24983);
N_NIMCALL(NimStringDesc*, Findfile_42088)(NimStringDesc* F_42090);
N_NIMCALL(NimStringDesc*, Getfieldvalue_143111)(TY143077* N_143113, NimStringDesc* Fieldname_143114);
N_NIMCALL(void, Internalerror_43571)(NimStringDesc* Errmsg_43573);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19579, TNimType* Typ_19580);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(NI, nsuFindStr)(NimStringDesc* S_26219, NimStringDesc* Sub_26220, NI Start_26221);
N_NIMCALL(TY143077*, Dirimage_147268)(TY143690* P_147271);
N_NIMCALL(TY143077*, Dirfigure_147274)(TY143690* P_147277);
N_NIMCALL(TY143077*, Dirtitle_147280)(TY143690* P_147283);
N_NIMCALL(TY143077*, Dircontainer_147251)(TY143690* P_147254);
N_NIMCALL(TY143077*, Dircontents_147286)(TY143690* P_147289);
N_NIMCALL(TY143077*, Dirraw_147318)(TY143690* P_147321);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_24595, NimStringDesc* B_24596);
N_NIMCALL(void, Dirrawaux_147299)(TY143690* P_147302, TY143077** Result_147304, NU8 Kind_147305, TY147071 Contentparser_147306);
N_NIMCALL(TY143077*, Parsedirbody_147221)(TY143690* P_147224, TY147071 Contentparser_147225);
N_NIMCALL(TY143077*, Dircodeblock_147242)(TY143690* P_147245);
N_NIMCALL(TY143077*, Dirindex_147292)(TY143690* P_147295);
N_NIMCALL(TY143077*, Getreferencename_144518)(TY143690* P_144521, NimStringDesc* Endstr_144522);
N_NIMCALL(TY143077*, Untileol_144550)(TY143690* P_144553);
N_NIMCALL(void, Expect_144580)(TY143690* P_144583, NimStringDesc* Tok_144584);
N_NIMCALL(void, Setsub_144035)(TY143690* P_144038, NimStringDesc* Key_144039, TY143077* Value_144040);
N_NIMCALL(TY143077*, Parsecomment_145397)(TY143690* P_145400);
N_NIMCALL(TY143077*, Parseenumlist_146833)(TY143690* P_146836);
N_NIMCALL(TY143077*, Parsedefinitionlist_146739)(TY143690* P_146742);
N_NIMCALL(TY143077*, Parsetransition_146426)(TY143690* P_146429);
N_NIMCALL(TY143077*, Parseheadline_146005)(TY143690* P_146008);
N_NIMCALL(NI, Getlevel_145762)(NI* Map_145765, NI* Lvl_145767, NIM_CHAR C_145768);
N_NIMCALL(TY143077*, Parseoverline_146485)(TY143690* P_146488);
N_NIMCALL(TY143077*, Parsesimpletable_146159)(TY143690* P_146162);
N_NIMCALL(void, Getcolumns_146051)(TY143690* P_146054, TY73281** Cols_146056);
N_NIMCALL(NI, Tokend_146045)(TY143690* P_146047);
N_NIMCALL(TY143077*, Parseoptionlist_146633)(TY143690* P_146636);
N_NIMCALL(void, Parseparagraph_145936)(TY143690* P_145939, TY143077* Result_145940);
N_NIMCALL(void, Addsonifnotnil_143598)(TY143077* Father_143600, TY143077* Son_143601);
N_NIMCALL(NU8, Sonkind_146919)(TY143077* Father_146921, NI I_146922);
N_NIMCALL(NIM_BOOL, Matcheshyperlink_144250)(TY143077* H_144252, NimStringDesc* Filename_144253);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25769, NimStringDesc* Prefix_25770);
N_NIMCALL(NIM_BOOL, Eqrstnodes_144211)(TY143077* A_144213, TY143077* B_144214);
N_NIMCALL(NI, Cmpnodes_144141)(TY143077* A_144143, TY143077* B_144144);
NIM_CONST TY22602 Symchars_143130 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP145483, "", 0);
STRING_LITERAL(TMP145484, "author", 6);
STRING_LITERAL(TMP145485, "authors", 7);
STRING_LITERAL(TMP145486, "code-block", 10);
STRING_LITERAL(TMP145487, "container", 9);
STRING_LITERAL(TMP145488, "contents", 8);
STRING_LITERAL(TMP145489, "figure", 6);
STRING_LITERAL(TMP145490, "image", 5);
STRING_LITERAL(TMP145491, "include", 7);
STRING_LITERAL(TMP145492, "index", 5);
STRING_LITERAL(TMP145493, "raw", 3);
STRING_LITERAL(TMP145494, "title", 5);
NIM_CONST TY145479 Dirids_145478 = {((NimStringDesc*) &TMP145483),
((NimStringDesc*) &TMP145484),
((NimStringDesc*) &TMP145485),
((NimStringDesc*) &TMP145486),
((NimStringDesc*) &TMP145487),
((NimStringDesc*) &TMP145488),
((NimStringDesc*) &TMP145489),
((NimStringDesc*) &TMP145490),
((NimStringDesc*) &TMP145491),
((NimStringDesc*) &TMP145492),
((NimStringDesc*) &TMP145493),
((NimStringDesc*) &TMP145494)}
;
static NIM_CONST TY22602 TMP195108 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;static NIM_CONST TY22602 TMP195109 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195110, "\015\012", 2);
STRING_LITERAL(TMP195111, "#", 1);
static NIM_CONST TY22602 TMP195112 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195113, "ii", 2);
STRING_LITERAL(TMP195114, " a", 2);
STRING_LITERAL(TMP195115, "i", 1);
STRING_LITERAL(TMP195116, "ai", 2);
STRING_LITERAL(TMP195117, "::", 2);
STRING_LITERAL(TMP195118, "+", 1);
STRING_LITERAL(TMP195119, "*", 1);
STRING_LITERAL(TMP195120, "-", 1);
STRING_LITERAL(TMP195121, "|", 1);
STRING_LITERAL(TMP195122, "..", 2);
STRING_LITERAL(TMP195123, ":", 1);
STRING_LITERAL(TMP195124, "(e) ", 4);
STRING_LITERAL(TMP195125, "+a+", 3);
STRING_LITERAL(TMP195126, "-w", 2);
STRING_LITERAL(TMP195127, "--w", 3);
STRING_LITERAL(TMP195128, "/w", 2);
STRING_LITERAL(TMP195129, "//w", 3);
STRING_LITERAL(TMP195130, "e) ", 3);
STRING_LITERAL(TMP195131, "e. ", 3);
static NIM_CONST TY22602 TMP195132 = {
0x00, 0x00, 0x00, 0x00, 0x84, 0xA1, 0x00, 0x14,
0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x08,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195133, "\\", 1);
STRING_LITERAL(TMP195134, "**", 2);
static NIM_CONST TY22602 TMP195135 = {
0x00, 0x00, 0x00, 0x00, 0x86, 0xF2, 0x00, 0xCC,
0x00, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0x20,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195136, "``", 2);
STRING_LITERAL(TMP195137, "\\\\", 2);
STRING_LITERAL(TMP195138, " ", 1);
STRING_LITERAL(TMP195139, "`", 1);
STRING_LITERAL(TMP195140, "_", 1);
STRING_LITERAL(TMP195141, ">", 1);
STRING_LITERAL(TMP195142, "<", 1);
STRING_LITERAL(TMP195143, ":w:", 3);
STRING_LITERAL(TMP195144, "idx", 3);
STRING_LITERAL(TMP195145, "literal", 7);
STRING_LITERAL(TMP195146, "strong", 6);
STRING_LITERAL(TMP195147, "emphasis", 8);
STRING_LITERAL(TMP195148, "sub", 3);
STRING_LITERAL(TMP195149, "subscript", 9);
STRING_LITERAL(TMP195150, "sup", 3);
STRING_LITERAL(TMP195151, "supscript", 9);
STRING_LITERAL(TMP195152, "//", 2);
STRING_LITERAL(TMP195153, ".", 1);
STRING_LITERAL(TMP195154, "getFieldValue (2): ", 19);
STRING_LITERAL(TMP195155, "\001\001", 2);
STRING_LITERAL(TMP195156, "\000\001\002", 3);
STRING_LITERAL(TMP195157, "Too many binary zeros in include file", 37);
STRING_LITERAL(TMP195158, "html", 4);
STRING_LITERAL(TMP195159, "file", 4);
STRING_LITERAL(TMP195160, "latex", 5);
STRING_LITERAL(TMP195161, " _", 2);
STRING_LITERAL(TMP195162, " |", 2);
STRING_LITERAL(TMP195163, "replace", 7);
STRING_LITERAL(TMP195164, " [", 2);
STRING_LITERAL(TMP195165, "]", 1);
NIM_CONST TY146839 Wildcards_146838 = {((NimStringDesc*) &TMP195124),
((NimStringDesc*) &TMP195130),
((NimStringDesc*) &TMP195131)}
;
NIM_CONST TY146844 Wildpos_146843 = {1,
0,
0}
;
extern NIM_CONST TY146839 Wildcards_146838;
extern NIM_CONST TY146844 Wildpos_146843;
STRING_LITERAL(TMP195166, "rst.parseSection()", 18);
extern TNimType* NTI143690; /* TRstParser */
extern TNimType* NTI73281; /* seq[int] */
extern TNimType* NTI143137; /* TTokenSeq */
extern TNimType* NTI143688; /* PSharedState */
extern TNimType* NTI143695; /* seq[TSubstitution] */
extern TY10990 Gch_11010;
extern TNimType* NTI143139; /* TLexer */
extern TNimType* NTI143073; /* PRSTNode */
extern TNimType* NTI143075; /* TRstNodeSeq */
extern TNimType* NTI143008; /* TRstNodeKind */
extern TNimType* NTI35221; /* seq[string] */
N_NIMCALL(void, Initparser_143839)(TY143690* P_143842, TY143686* Sharedstate_143843) {
unsureAsgnRef((void**) &(*P_143842).Indentstack, (TY73281*) newSeq(NTI73281, 1));
(*P_143842).Indentstack->data[0] = 0;
unsureAsgnRef((void**) &(*P_143842).Tok, (TY143137*) newSeq(NTI143137, 0));
(*P_143842).Idx = 0;
unsureAsgnRef((void**) &(*P_143842).Filename, copyString(((NimStringDesc*) &TMP145483)));
(*P_143842).Hastoc = NIM_FALSE;
(*P_143842).Col = 0;
(*P_143842).Line = 1;
unsureAsgnRef((void**) &(*P_143842).S, Sharedstate_143843);
}
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11414))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11010.Zct, C_12403);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3001(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3006(&(*C_13022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(TY143686*, Newsharedstate_143710)(void) {
TY143686* Result_143712;
Result_143712 = 0;
Result_143712 = (TY143686*) newObj(NTI143688, sizeof(TY143686));
asgnRefNoCycle((void**) &(*Result_143712).Subs, (TY143695*) newSeq(NTI143695, 0));
asgnRefNoCycle((void**) &(*Result_143712).Refs, (TY143695*) newSeq(NTI143695, 0));
return Result_143712;
}
N_NIMCALL(void, Getthing_143158)(TY143139* L_143161, TY143135* Tok_143163, TY22602 S_143164) {
NI Pos_143165;
(*Tok_143163).Kind = ((NU8) 3);
(*Tok_143163).Line = (*L_143161).Line;
(*Tok_143163).Col = (*L_143161).Col;
Pos_143165 = 0;
Pos_143165 = (*L_143161).Bufpos;
while (1) {
(*Tok_143163).Symbol = addChar((*Tok_143163).Symbol, (*L_143161).Buf[Pos_143165]);
Pos_143165 += 1;
if (!!(((S_143164[((NU8)((*L_143161).Buf[Pos_143165]))/8] &(1<<(((NU8)((*L_143161).Buf[Pos_143165]))%8)))!=0))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_143161).Col += (NI32)(Pos_143165 - (*L_143161).Bufpos);
(*L_143161).Bufpos = Pos_143165;
}
N_NIMCALL(NI, Getindentaux_143237)(TY143139* L_143240, NI Start_143241) {
NI Result_143242;
NI Pos_143243;
NCSTRING Buf_143244;
NIM_BOOL LOC22;
Result_143242 = 0;
Pos_143243 = 0;
Pos_143243 = Start_143241;
Buf_143244 = 0;
Buf_143244 = (*L_143240).Buf;
if (!((NU8)(Buf_143244[Pos_143243]) == (NU8)(13))) goto LA2;
if (!((NU8)(Buf_143244[(NI32)(Pos_143243 + 1)]) == (NU8)(10))) goto LA5;
Pos_143243 += 2;
goto LA4;
LA5: ;
Pos_143243 += 1;
LA4: ;
goto LA1;
LA2: ;
if (!((NU8)(Buf_143244[Pos_143243]) == (NU8)(10))) goto LA7;
Pos_143243 += 1;
goto LA1;
LA7: ;
LA1: ;
if (!(*L_143240).Skippounds) goto LA10;
if (!((NU8)(Buf_143244[Pos_143243]) == (NU8)(35))) goto LA13;
Pos_143243 += 1;
LA13: ;
if (!((NU8)(Buf_143244[Pos_143243]) == (NU8)(35))) goto LA16;
Pos_143243 += 1;
LA16: ;
LA10: ;
while (1) {
switch (((NU8)(Buf_143244[Pos_143243]))) {
case 32:
case 11:
case 12:
Pos_143243 += 1;
Result_143242 += 1;
break;
case 9:
Pos_143243 += 1;
Result_143242 = (NI32)((NI32)(Result_143242 - (NI32)(Result_143242 % 8)) + 8);
break;
default:
goto LA18;
break;
}
} LA18: ;
if (!((NU8)(Buf_143244[Pos_143243]) == (NU8)(0))) goto LA20;
Result_143242 = 0;
goto LA19;
LA20: ;
LOC22 = ((NU8)(Buf_143244[Pos_143243]) == (NU8)(10));
if (LOC22) goto LA23;
LOC22 = ((NU8)(Buf_143244[Pos_143243]) == (NU8)(13));
LA23: ;
if (!LOC22) goto LA24;
Result_143242 = Getindentaux_143237(L_143240, Pos_143243);
goto LA19;
LA24: ;
LA19: ;
(*L_143240).Bufpos = Pos_143243;
return Result_143242;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593) {
memcpy(((NCSTRING) (&(*Dest_18592).data[((*Dest_18592).Sup.len)-0])), ((NCSTRING) ((*Src_18593).data)), ((NI32) ((NI32)((NI32)((*Src_18593).Sup.len + 1) * 1))));
(*Dest_18592).Sup.len += (*Src_18593).Sup.len;
}
N_NIMCALL(void, Getindent_143358)(TY143139* L_143361, TY143135* Tok_143363) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
(*L_143361).Line += 1;
(*Tok_143363).Line = (*L_143361).Line;
(*Tok_143363).Col = 0;
(*Tok_143363).Kind = ((NU8) 1);
(*Tok_143363).Ival = Getindentaux_143237(L_143361, (*L_143361).Bufpos);
(*L_143361).Col = (*Tok_143363).Ival;
(*Tok_143363).Ival = (((NI32)((*Tok_143363).Ival - (*L_143361).Baseindent) >= 0) ? (NI32)((*Tok_143363).Ival - (*L_143361).Baseindent) : 0);
LOC1 = 0;
LOC2 = 0;
LOC2 = nsuRepeatChar((*Tok_143363).Ival, 32);
LOC1 = rawNewString(LOC2->Sup.len + 2);
appendString(LOC1, ((NimStringDesc*) &TMP195110));
appendString(LOC1, LOC2);
unsureAsgnRef((void**) &(*Tok_143363).Symbol, LOC1);
}
N_NIMCALL(void, Getadornment_143202)(TY143139* L_143205, TY143135* Tok_143207) {
NI Pos_143208;
NIM_CHAR C_143209;
(*Tok_143207).Kind = ((NU8) 4);
(*Tok_143207).Line = (*L_143205).Line;
(*Tok_143207).Col = (*L_143205).Col;
Pos_143208 = 0;
Pos_143208 = (*L_143205).Bufpos;
C_143209 = 0;
C_143209 = (*L_143205).Buf[Pos_143208];
while (1) {
(*Tok_143207).Symbol = addChar((*Tok_143207).Symbol, (*L_143205).Buf[Pos_143208]);
Pos_143208 += 1;
if (!!(((NU8)((*L_143205).Buf[Pos_143208]) == (NU8)(C_143209)))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_143205).Col += (NI32)(Pos_143208 - (*L_143205).Bufpos);
(*L_143205).Bufpos = Pos_143208;
}
N_NIMCALL(void, Rawgettok_143386)(TY143139* L_143389, TY143135* Tok_143391) {
NIM_CHAR C_143392;
unsureAsgnRef((void**) &(*Tok_143391).Symbol, copyString(((NimStringDesc*) &TMP145483)));
(*Tok_143391).Ival = 0;
C_143392 = 0;
C_143392 = (*L_143389).Buf[(*L_143389).Bufpos];
switch (((NU8)(C_143392))) {
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 48 ... 57:
Getthing_143158(L_143389, Tok_143391, TMP195108);
break;
case 32:
case 9:
case 11:
case 12:
Getthing_143158(L_143389, Tok_143391, TMP195109);
(*Tok_143391).Kind = ((NU8) 2);
if (!(((NU8)((*L_143389).Buf[(*L_143389).Bufpos])) == ((NU8)(13)) || ((NU8)((*L_143389).Buf[(*L_143389).Bufpos])) == ((NU8)(10)))) goto LA2;
Rawgettok_143386(L_143389, Tok_143391);
LA2: ;
break;
case 13:
case 10:
Getindent_143358(L_143389, Tok_143391);
break;
case 33:
case 34:
case 35:
case 36:
case 37:
case 38:
case 39:
case 40:
case 41:
case 42:
case 43:
case 44:
case 45:
case 46:
case 47:
case 58:
case 59:
case 60:
case 61:
case 62:
case 63:
case 64:
case 91:
case 92:
case 93:
case 94:
case 95:
case 96:
case 123:
case 124:
case 125:
case 126:
Getadornment_143202(L_143389, Tok_143391);
if (!((*Tok_143391).Symbol->Sup.len <= 3)) goto LA5;
(*Tok_143391).Kind = ((NU8) 5);
LA5: ;
break;
default:
(*Tok_143391).Line = (*L_143389).Line;
(*Tok_143391).Col = (*L_143389).Col;
if (!((NU8)(C_143392) == (NU8)(0))) goto LA8;
(*Tok_143391).Kind = ((NU8) 0);
goto LA7;
LA8: ;
(*Tok_143391).Kind = ((NU8) 6);
(*Tok_143391).Symbol = addChar((*Tok_143391).Symbol, C_143392);
(*L_143389).Bufpos += 1;
(*L_143389).Col += 1;
LA7: ;
break;
}
(*Tok_143391).Col = (((NI32)((*Tok_143391).Col - (*L_143389).Baseindent) >= 0) ? (NI32)((*Tok_143391).Col - (*L_143389).Baseindent) : 0);
}
N_NIMCALL(void, Gettokens_143438)(NimStringDesc* Buffer_143440, NIM_BOOL Skippounds_143441, TY143137** Tokens_143443) {
TY143139 L_143444;
NI Length_143455;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
memset((void*)&L_143444, 0, sizeof(L_143444));
L_143444.Sup.m_type = NTI143139;
Length_143455 = 0;
Length_143455 = (*Tokens_143443)->Sup.len;
L_143444.Buf = Buffer_143440->data;
L_143444.Line = 1;
LOC3 = ((NU8)(L_143444.Buf[0]) == (NU8)(239));
if (!(LOC3)) goto LA4;
LOC3 = ((NU8)(L_143444.Buf[1]) == (NU8)(187));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((NU8)(L_143444.Buf[2]) == (NU8)(191));
LA5: ;
if (!LOC2) goto LA6;
L_143444.Bufpos += 3;
LA6: ;
L_143444.Skippounds = Skippounds_143441;
if (!Skippounds_143441) goto LA9;
if (!((NU8)(L_143444.Buf[L_143444.Bufpos]) == (NU8)(35))) goto LA12;
L_143444.Bufpos += 1;
LA12: ;
if (!((NU8)(L_143444.Buf[L_143444.Bufpos]) == (NU8)(35))) goto LA15;
L_143444.Bufpos += 1;
LA15: ;
L_143444.Baseindent = 0;
while (1) {
if (!((NU8)(L_143444.Buf[L_143444.Bufpos]) == (NU8)(32))) goto LA17;
L_143444.Bufpos += 1;
L_143444.Baseindent += 1;
} LA17: ;
LA9: ;
while (1) {
Length_143455 += 1;
(*Tokens_143443) = (TY143137*) setLengthSeq(&((*Tokens_143443))->Sup, sizeof(TY143135), Length_143455);
Rawgettok_143386(&L_143444, &(*Tokens_143443)->data[(NI32)(Length_143455 - 1)]);
if (!((*Tokens_143443)->data[(NI32)(Length_143455 - 1)].Kind == ((NU8) 0))) goto LA20;
goto LA18;
LA20: ;
} LA18: ;
if (!((*Tokens_143443)->data[0].Kind == ((NU8) 2))) goto LA23;
(*Tokens_143443)->data[0].Ival = (*Tokens_143443)->data[0].Symbol->Sup.len;
(*Tokens_143443)->data[0].Kind = ((NU8) 1);
LA23: ;
}
N_NIMCALL(NI, Rsonslen_143091)(TY143077* N_143093) {
NI Result_143616;
Result_143616 = 0;
Result_143616 = (*N_143093).Sons->Sup.len;
return Result_143616;
}
N_NIMCALL(void, Addnodesaux_143874)(TY143077* N_143876, NimStringDesc** Result_143878) {
NI I_143910;
NI HEX3Atmp_143912;
NI LOC4;
NI Res_143914;
if (!((*N_143876).Kind == ((NU8) 62))) goto LA2;
(*Result_143878) = resizeString((*Result_143878), (*N_143876).Text->Sup.len + 0);
appendString((*Result_143878), (*N_143876).Text);
goto LA1;
LA2: ;
I_143910 = 0;
HEX3Atmp_143912 = 0;
LOC4 = Rsonslen_143091(N_143876);
HEX3Atmp_143912 = (NI32)(LOC4 - 1);
Res_143914 = 0;
Res_143914 = 0;
while (1) {
if (!(Res_143914 <= HEX3Atmp_143912)) goto LA5;
I_143910 = Res_143914;
Addnodesaux_143874((*N_143876).Sons->data[I_143910], Result_143878);
Res_143914 += 1;
} LA5: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Addnodes_143108)(TY143077* N_143110) {
NimStringDesc* Result_143920;
Result_143920 = 0;
Result_143920 = copyString(((NimStringDesc*) &TMP145483));
Addnodesaux_143874(N_143110, &Result_143920);
return Result_143920;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448) {
NIM_BOOL Result_18449;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_18449 = 0;
if (!(A_18447 == B_18448)) goto LA2;
Result_18449 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18447 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18448 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18449 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18447).Sup.len == (*B_18448).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18447).data)), ((NCSTRING) ((*B_18448).data)), ((NI32) ((NI32)((*A_18447).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18449 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18449;
}
N_NIMCALL(NI, Findsub_143998)(TY143690* P_144001, TY143077* N_144002) {
NI Result_144003;
NimStringDesc* Key_144004;
NI I_144012;
NI HEX3Atmp_144024;
NI Res_144026;
NI I_144020;
NI HEX3Atmp_144030;
NI Res_144032;
NI LOC7;
Result_144003 = 0;
Key_144004 = 0;
Key_144004 = Addnodes_143108(N_144002);
I_144012 = 0;
HEX3Atmp_144024 = 0;
HEX3Atmp_144024 = ((*(*P_144001).S).Subs->Sup.len-1);
Res_144026 = 0;
Res_144026 = 0;
while (1) {
if (!(Res_144026 <= HEX3Atmp_144024)) goto LA1;
I_144012 = Res_144026;
if (!eqStrings(Key_144004, (*(*P_144001).S).Subs->data[I_144012].Key)) goto LA3;
Result_144003 = I_144012;
goto BeforeRet;
LA3: ;
Res_144026 += 1;
} LA1: ;
I_144020 = 0;
HEX3Atmp_144030 = 0;
HEX3Atmp_144030 = ((*(*P_144001).S).Subs->Sup.len-1);
Res_144032 = 0;
Res_144032 = 0;
while (1) {
if (!(Res_144032 <= HEX3Atmp_144030)) goto LA5;
I_144020 = Res_144032;
LOC7 = nsuCmpIgnoreStyle(Key_144004, (*(*P_144001).S).Subs->data[I_144020].Key);
if (!(LOC7 == 0)) goto LA8;
Result_144003 = I_144020;
goto BeforeRet;
LA8: ;
Res_144032 += 1;
} LA5: ;
Result_144003 = -1;
BeforeRet: ;
return Result_144003;
}
N_NIMCALL(TY143077*, Newrstnode_143094)(NU8 Kind_143096) {
TY143077* Result_143630;
Result_143630 = 0;
Result_143630 = (TY143077*) newObj(NTI143073, sizeof(TY143077));
asgnRefNoCycle((void**) &(*Result_143630).Sons, (TY143075*) newSeq(NTI143075, 0));
(*Result_143630).Kind = Kind_143096;
return Result_143630;
}
N_NIMCALL(TY143077*, Newrstnode_143097)(NU8 Kind_143099, NimStringDesc* S_143100) {
TY143077* Result_143666;
Result_143666 = 0;
Result_143666 = Newrstnode_143094(Kind_143099);
asgnRefNoCycle((void**) &(*Result_143666).Text, copyString(S_143100));
return Result_143666;
}
N_NIMCALL(TY43532, Tokinfo_143760)(TY143690* P_143762, TY143135* Tok_143763) {
TY43532 Result_143764;
memset((void*)&Result_143764, 0, sizeof(Result_143764));
Result_143764 = Newlineinfo_43574((*P_143762).Filename, (NI32)((*P_143762).Line + (*Tok_143763).Line), (NI32)((*P_143762).Col + (*Tok_143763).Col));
return Result_143764;
}
N_NIMCALL(void, Rstmessage_143765)(TY143690* P_143767, NU8 Msgkind_143768, NimStringDesc* Arg_143769) {
TY43532 LOC1;
LOC1 = Tokinfo_143760(P_143767, &(*P_143767).Tok->data[(*P_143767).Idx]);
Limessage_43562(LOC1, Msgkind_143768, Arg_143769);
}
N_NIMCALL(TY143077*, Findref_144121)(TY143690* P_144124, NimStringDesc* Key_144125) {
TY143077* Result_144126;
NI I_144134;
NI HEX3Atmp_144136;
NI Res_144138;
Result_144126 = 0;
I_144134 = 0;
HEX3Atmp_144136 = 0;
HEX3Atmp_144136 = ((*(*P_144124).S).Refs->Sup.len-1);
Res_144138 = 0;
Res_144138 = 0;
while (1) {
if (!(Res_144138 <= HEX3Atmp_144136)) goto LA1;
I_144134 = Res_144138;
if (!eqStrings(Key_144125, (*(*P_144124).S).Refs->data[I_144134].Key)) goto LA3;
Result_144126 = (*(*P_144124).S).Refs->data[I_144134].Value;
goto BeforeRet;
LA3: ;
Res_144138 += 1;
} LA1: ;
BeforeRet: ;
return Result_144126;
}
N_NIMCALL(void, Rstnodetorefnameaux_143922)(TY143077* N_143924, NimStringDesc** R_143926, NIM_BOOL* B_143928) {
NI I_143947;
NI HEX3Atmp_143980;
NI Res_143982;
NI I_143978;
NI HEX3Atmp_143986;
NI LOC20;
NI Res_143988;
if (!((*N_143924).Kind == ((NU8) 62))) goto LA2;
I_143947 = 0;
HEX3Atmp_143980 = 0;
HEX3Atmp_143980 = (NI32)((NI32)((*N_143924).Text->Sup.len + 0) - 1);
Res_143982 = 0;
Res_143982 = 0;
while (1) {
if (!(Res_143982 <= HEX3Atmp_143980)) goto LA4;
I_143947 = Res_143982;
switch (((NU8)((*N_143924).Text->data[I_143947]))) {
case 48 ... 57:
if (!(*B_143928)) goto LA6;
(*R_143926) = addChar((*R_143926), 45);
(*B_143928) = NIM_FALSE;
LA6: ;
if (!((*R_143926)->Sup.len == 0)) goto LA9;
(*R_143926) = addChar((*R_143926), 90);
LA9: ;
(*R_143926) = addChar((*R_143926), (*N_143924).Text->data[I_143947]);
break;
case 97 ... 122:
if (!(*B_143928)) goto LA12;
(*R_143926) = addChar((*R_143926), 45);
(*B_143928) = NIM_FALSE;
LA12: ;
(*R_143926) = addChar((*R_143926), (*N_143924).Text->data[I_143947]);
break;
case 65 ... 90:
if (!(*B_143928)) goto LA15;
(*R_143926) = addChar((*R_143926), 45);
(*B_143928) = NIM_FALSE;
LA15: ;
(*R_143926) = addChar((*R_143926), ((NIM_CHAR) (((NI) ((NI32)((NI32)(((NU8)((*N_143924).Text->data[I_143947])) - 65) + 97))))));
break;
default:
if (!(0 < (*R_143926)->Sup.len)) goto LA18;
(*B_143928) = NIM_TRUE;
LA18: ;
break;
}
Res_143982 += 1;
} LA4: ;
goto LA1;
LA2: ;
I_143978 = 0;
HEX3Atmp_143986 = 0;
LOC20 = Rsonslen_143091(N_143924);
HEX3Atmp_143986 = (NI32)(LOC20 - 1);
Res_143988 = 0;
Res_143988 = 0;
while (1) {
if (!(Res_143988 <= HEX3Atmp_143986)) goto LA21;
I_143978 = Res_143988;
Rstnodetorefnameaux_143922((*N_143924).Sons->data[I_143978], R_143926, B_143928);
Res_143988 += 1;
} LA21: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Rstnodetorefname_143105)(TY143077* N_143107) {
NimStringDesc* Result_143994;
NIM_BOOL B_143995;
Result_143994 = 0;
Result_143994 = copyString(((NimStringDesc*) &TMP145483));
B_143995 = 0;
B_143995 = NIM_FALSE;
Rstnodetorefnameaux_143922(N_143107, &Result_143994, &B_143995);
return Result_143994;
}
N_NIMCALL(void, Addson_143101)(TY143077* Father_143103, TY143077* Son_143104) {
(*Father_143103).Sons = (TY143075*) incrSeq(&((*Father_143103).Sons)->Sup, sizeof(TY143077*));
asgnRefNoCycle((void**) &(*Father_143103).Sons->data[(*Father_143103).Sons->Sup.len-1], Son_143104);
}
N_NIMCALL(TY143077*, Resolvesubs_147494)(TY143690* P_147497, TY143077* N_147498) {
TY143077* Result_147499;
NI X_147511;
NimStringDesc* Key_147514;
NimStringDesc* E_147515;
TY143077* Y_147516;
NimStringDesc* LOC10;
NI I_147535;
NI HEX3Atmp_147537;
NI LOC14;
NI Res_147539;
Result_147499 = 0;
Result_147499 = N_147498;
if (!(N_147498 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_147498).Kind) {
case ((NU8) 61):
X_147511 = 0;
X_147511 = Findsub_143998(P_147497, N_147498);
if (!(0 <= X_147511)) goto LA5;
Result_147499 = (*(*P_147497).S).Subs->data[X_147511].Value;
goto LA4;
LA5: ;
Key_147514 = 0;
Key_147514 = Addnodes_143108(N_147498);
E_147515 = 0;
E_147515 = Getenv_35425(Key_147514);
if (!!(((E_147515) && (E_147515)->Sup.len == 0))) goto LA8;
Result_147499 = Newrstnode_143097(((NU8) 62), E_147515);
goto LA7;
LA8: ;
Rstmessage_143765(&(*P_147497), ((NU8) 217), Key_147514);
LA7: ;
LA4: ;
break;
case ((NU8) 39):
Y_147516 = 0;
LOC10 = 0;
LOC10 = Rstnodetorefname_143105(N_147498);
Y_147516 = Findref_144121(P_147497, LOC10);
if (!!((Y_147516 == NIM_NIL))) goto LA12;
Result_147499 = Newrstnode_143094(((NU8) 38));
(*N_147498).Kind = ((NU8) 0);
Addson_143101(Result_147499, N_147498);
Addson_143101(Result_147499, Y_147516);
LA12: ;
break;
case ((NU8) 62):
break;
case ((NU8) 44):
(*P_147497).Hastoc = NIM_TRUE;
break;
default:
I_147535 = 0;
HEX3Atmp_147537 = 0;
LOC14 = Rsonslen_143091(N_147498);
HEX3Atmp_147537 = (NI32)(LOC14 - 1);
Res_147539 = 0;
Res_147539 = 0;
while (1) {
if (!(Res_147539 <= HEX3Atmp_147537)) goto LA15;
I_147535 = Res_147539;
asgnRefNoCycle((void**) &(*N_147498).Sons->data[I_147535], Resolvesubs_147494(P_147497, (*N_147498).Sons->data[I_147535]));
Res_147539 += 1;
} LA15: ;
break;
}
BeforeRet: ;
return Result_147499;
}
N_NIMCALL(NI, Currind_143774)(TY143690* P_143776) {
NI Result_143777;
Result_143777 = 0;
Result_143777 = (*P_143776).Indentstack->data[((*P_143776).Indentstack->Sup.len-1)];
return Result_143777;
}
N_NIMCALL(void, Pushind_143778)(TY143690* P_143781, NI Ind_143782) {
(*P_143781).Indentstack = (TY73281*) incrSeq(&((*P_143781).Indentstack)->Sup, sizeof(NI));
(*P_143781).Indentstack->data[(*P_143781).Indentstack->Sup.len-1] = Ind_143782;
}
N_NIMCALL(void, Popind_143801)(TY143690* P_143804) {
if (!(1 < (*P_143804).Indentstack->Sup.len)) goto LA2;
(*P_143804).Indentstack = (TY73281*) setLengthSeq(&((*P_143804).Indentstack)->Sup, sizeof(NI), (NI32)((*P_143804).Indentstack->Sup.len - 1));
LA2: ;
}
N_NIMCALL(NIM_BOOL, Match_144762)(TY143690* P_144764, NI Start_144765, NimStringDesc* Expr_144766) {
NIM_BOOL Result_144767;
NI I_144768;
NI J_144769;
NI Last_144772;
NIM_BOOL LOC2;
NIM_CHAR C_144855;
NI Length_144856;
NIM_BOOL LOC8;
NIM_BOOL LOC10;
NIM_BOOL LOC11;
Result_144767 = 0;
I_144768 = 0;
I_144768 = 0;
J_144769 = 0;
J_144769 = Start_144765;
Last_144772 = 0;
Last_144772 = (NI32)((NI32)(Expr_144766->Sup.len + 0) - 1);
while (1) {
if (!(I_144768 <= Last_144772)) goto LA1;
switch (((NU8)(Expr_144766->data[I_144768]))) {
case 119:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 3));
break;
case 32:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 2));
break;
case 105:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 1));
break;
case 112:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 5));
break;
case 97:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 4));
break;
case 111:
Result_144767 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 6));
break;
case 84:
Result_144767 = NIM_TRUE;
break;
case 69:
Result_144767 = ((7 &(1<<(((*P_144764).Tok->data[J_144769].Kind)&7)))!=0);
break;
case 101:
LOC2 = ((*P_144764).Tok->data[J_144769].Kind == ((NU8) 3));
if (LOC2) goto LA3;
LOC2 = eqStrings((*P_144764).Tok->data[J_144769].Symbol, ((NimStringDesc*) &TMP195111));
LA3: ;
Result_144767 = LOC2;
if (!Result_144767) goto LA5;
switch (((NU8)((*P_144764).Tok->data[J_144769].Symbol->data[0]))) {
case 97 ... 122:
case 65 ... 90:
Result_144767 = ((*P_144764).Tok->data[J_144769].Symbol->Sup.len == 1);
break;
case 48 ... 57:
Result_144767 = Allcharsinset_25830((*P_144764).Tok->data[J_144769].Symbol, TMP195112);
break;
default:
break;
}
LA5: ;
break;
default:
C_144855 = 0;
C_144855 = Expr_144766->data[I_144768];
Length_144856 = 0;
Length_144856 = 0;
while (1) {
LOC8 = (I_144768 <= Last_144772);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)(Expr_144766->data[I_144768]) == (NU8)(C_144855));
LA9: ;
if (!LOC8) goto LA7;
I_144768 += 1;
Length_144856 += 1;
} LA7: ;
I_144768 -= 1;
LOC11 = ((48 &(1<<(((*P_144764).Tok->data[J_144769].Kind)&7)))!=0);
if (!(LOC11)) goto LA12;
LOC11 = ((*P_144764).Tok->data[J_144769].Symbol->Sup.len == Length_144856);
LA12: ;
LOC10 = LOC11;
if (!(LOC10)) goto LA13;
LOC10 = ((NU8)((*P_144764).Tok->data[J_144769].Symbol->data[0]) == (NU8)(C_144855));
LA13: ;
Result_144767 = LOC10;
break;
}
if (!!(Result_144767)) goto LA15;
goto BeforeRet;
LA15: ;
J_144769 += 1;
I_144768 += 1;
} LA1: ;
Result_144767 = NIM_TRUE;
BeforeRet: ;
return Result_144767;
}
N_NIMCALL(NI, Tokenafternewline_145784)(TY143690* P_145786) {
NI Result_145787;
Result_145787 = 0;
Result_145787 = (*P_145786).Idx;
while (1) {
switch ((*P_145786).Tok->data[Result_145787].Kind) {
case ((NU8) 0):
goto LA1;
break;
case ((NU8) 1):
Result_145787 += 1;
goto LA1;
break;
default:
Result_145787 += 1;
break;
}
} LA1: ;
return Result_145787;
}
N_NIMCALL(NIM_BOOL, Prednl_145822)(TY143690* P_145824) {
NIM_BOOL Result_145825;
NIM_BOOL LOC4;
NI LOC6;
Result_145825 = 0;
Result_145825 = NIM_TRUE;
if (!(0 < (*P_145824).Idx)) goto LA2;
LOC4 = ((*P_145824).Tok->data[(NI32)((*P_145824).Idx - 1)].Kind == ((NU8) 1));
if (!(LOC4)) goto LA5;
LOC6 = Currind_143774(P_145824);
LOC4 = ((*P_145824).Tok->data[(NI32)((*P_145824).Idx - 1)].Ival == LOC6);
LA5: ;
Result_145825 = LOC4;
LA2: ;
return Result_145825;
}
N_NIMCALL(NIM_BOOL, Islineblock_145813)(TY143690* P_145815) {
NIM_BOOL Result_145816;
NI J_145817;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_145816 = 0;
J_145817 = 0;
J_145817 = Tokenafternewline_145784(P_145815);
LOC2 = ((*P_145815).Tok->data[(*P_145815).Idx].Col == (*P_145815).Tok->data[J_145817].Col);
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_145815).Tok->data[J_145817].Symbol, ((NimStringDesc*) &TMP195121));
LA3: ;
LOC1 = LOC2;
if (LOC1) goto LA4;
LOC1 = ((*P_145815).Tok->data[(*P_145815).Idx].Col < (*P_145815).Tok->data[J_145817].Col);
LA4: ;
Result_145816 = LOC1;
return Result_145816;
}
N_NIMCALL(void, Rstmessage_143770)(TY143690* P_143772, NU8 Msgkind_143773) {
TY43532 LOC1;
LOC1 = Tokinfo_143760(P_143772, &(*P_143772).Tok->data[(*P_143772).Idx]);
Limessage_43562(LOC1, Msgkind_143773, (*P_143772).Tok->data[(*P_143772).Idx].Symbol);
}
N_NIMCALL(NIM_BOOL, Isdeflist_145839)(TY143690* P_145841) {
NIM_BOOL Result_145842;
NI J_145843;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_145842 = 0;
J_145843 = 0;
J_145843 = Tokenafternewline_145784(P_145841);
LOC2 = ((*P_145841).Tok->data[(*P_145841).Idx].Col < (*P_145841).Tok->data[J_145843].Col);
if (!(LOC2)) goto LA3;
LOC2 = ((104 &(1<<(((*P_145841).Tok->data[J_145843].Kind)&7)))!=0);
LA3: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA4;
LOC1 = !(eqStrings((*P_145841).Tok->data[(NI32)(J_145843 - 2)].Symbol, ((NimStringDesc*) &TMP195117)));
LA4: ;
Result_145842 = LOC1;
return Result_145842;
}
N_NIMCALL(NIM_BOOL, Isoptionlist_145858)(TY143690* P_145860) {
NIM_BOOL Result_145861;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_145861 = 0;
LOC3 = Match_144762(P_145860, (*P_145860).Idx, ((NimStringDesc*) &TMP195126));
if (LOC3) goto LA4;
LOC3 = Match_144762(P_145860, (*P_145860).Idx, ((NimStringDesc*) &TMP195127));
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA5;
LOC2 = Match_144762(P_145860, (*P_145860).Idx, ((NimStringDesc*) &TMP195128));
LA5: ;
LOC1 = LOC2;
if (LOC1) goto LA6;
LOC1 = Match_144762(P_145860, (*P_145860).Idx, ((NimStringDesc*) &TMP195129));
LA6: ;
Result_145861 = LOC1;
return Result_145861;
}
N_NIMCALL(NU8, Whichsection_145862)(TY143690* P_145864) {
NU8 Result_145865;
NIM_BOOL LOC2;
NIM_BOOL LOC5;
NIM_BOOL LOC8;
NI LOC12;
NIM_BOOL LOC13;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NIM_BOOL LOC21;
NIM_BOOL LOC22;
NIM_BOOL LOC28;
NIM_BOOL LOC32;
NIM_BOOL LOC36;
NIM_BOOL LOC40;
NIM_BOOL LOC43;
NIM_BOOL LOC46;
NIM_BOOL LOC49;
NI LOC53;
NIM_BOOL LOC54;
NIM_BOOL LOC57;
NIM_BOOL LOC60;
Result_145865 = 0;
switch ((*P_145864).Tok->data[(*P_145864).Idx].Kind) {
case ((NU8) 4):
LOC2 = Match_144762(P_145864, (NI32)((*P_145864).Idx + 1), ((NimStringDesc*) &TMP195113));
if (!LOC2) goto LA3;
Result_145865 = ((NU8) 3);
goto LA1;
LA3: ;
LOC5 = Match_144762(P_145864, (NI32)((*P_145864).Idx + 1), ((NimStringDesc*) &TMP195114));
if (!LOC5) goto LA6;
Result_145865 = ((NU8) 29);
goto LA1;
LA6: ;
LOC8 = Match_144762(P_145864, (NI32)((*P_145864).Idx + 1), ((NimStringDesc*) &TMP195115));
if (!LOC8) goto LA9;
Result_145865 = ((NU8) 2);
goto LA1;
LA9: ;
Result_145865 = ((NU8) 62);
LA1: ;
break;
case ((NU8) 5):
LOC12 = Tokenafternewline_145784(P_145864);
LOC13 = Match_144762(P_145864, LOC12, ((NimStringDesc*) &TMP195116));
if (!LOC13) goto LA14;
Result_145865 = ((NU8) 1);
goto LA11;
LA14: ;
if (!eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195117))) goto LA16;
Result_145865 = ((NU8) 24);
goto LA11;
LA16: ;
LOC19 = Prednl_145822(P_145864);
if (!(LOC19)) goto LA20;
LOC22 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195118));
if (LOC22) goto LA23;
LOC22 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195119));
LA23: ;
LOC21 = LOC22;
if (LOC21) goto LA24;
LOC21 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195120));
LA24: ;
LOC19 = LOC21;
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA25;
LOC18 = ((*P_145864).Tok->data[(NI32)((*P_145864).Idx + 1)].Kind == ((NU8) 2));
LA25: ;
if (!LOC18) goto LA26;
Result_145865 = ((NU8) 5);
goto LA11;
LA26: ;
LOC28 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195121));
if (!(LOC28)) goto LA29;
LOC28 = Islineblock_145813(P_145864);
LA29: ;
if (!LOC28) goto LA30;
Result_145865 = ((NU8) 26);
goto LA11;
LA30: ;
LOC32 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195122));
if (!(LOC32)) goto LA33;
LOC32 = Prednl_145822(P_145864);
LA33: ;
if (!LOC32) goto LA34;
Result_145865 = ((NU8) 40);
goto LA11;
LA34: ;
LOC36 = eqStrings((*P_145864).Tok->data[(*P_145864).Idx].Symbol, ((NimStringDesc*) &TMP195123));
if (!(LOC36)) goto LA37;
LOC36 = Prednl_145822(P_145864);
LA37: ;
if (!LOC36) goto LA38;
Result_145865 = ((NU8) 13);
goto LA11;
LA38: ;
LOC40 = Match_144762(P_145864, (*P_145864).Idx, ((NimStringDesc*) &TMP195124));
if (!LOC40) goto LA41;
Result_145865 = ((NU8) 7);
goto LA11;
LA41: ;
LOC43 = Match_144762(P_145864, (*P_145864).Idx, ((NimStringDesc*) &TMP195125));
if (!LOC43) goto LA44;
Result_145865 = ((NU8) 30);
Rstmessage_143770(P_145864, ((NU8) 184));
goto LA11;
LA44: ;
LOC46 = Isdeflist_145839(P_145864);
if (!LOC46) goto LA47;
Result_145865 = ((NU8) 9);
goto LA11;
LA47: ;
LOC49 = Isoptionlist_145858(P_145864);
if (!LOC49) goto LA50;
Result_145865 = ((NU8) 17);
goto LA11;
LA50: ;
Result_145865 = ((NU8) 4);
LA11: ;
break;
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC53 = Tokenafternewline_145784(P_145864);
LOC54 = Match_144762(P_145864, LOC53, ((NimStringDesc*) &TMP195116));
if (!LOC54) goto LA55;
Result_145865 = ((NU8) 1);
goto LA52;
LA55: ;
LOC57 = Isdeflist_145839(P_145864);
if (!LOC57) goto LA58;
Result_145865 = ((NU8) 9);
goto LA52;
LA58: ;
LOC60 = Match_144762(P_145864, (*P_145864).Idx, ((NimStringDesc*) &TMP195130));
if (LOC60) goto LA61;
LOC60 = Match_144762(P_145864, (*P_145864).Idx, ((NimStringDesc*) &TMP195131));
LA61: ;
if (!LOC60) goto LA62;
Result_145865 = ((NU8) 7);
goto LA52;
LA62: ;
Result_145865 = ((NU8) 4);
LA52: ;
break;
default:
Result_145865 = ((NU8) 62);
break;
}
return Result_145865;
}
N_NIMCALL(TY143077*, Parseliteralblock_145682)(TY143690* P_145685) {
TY143077* Result_145686;
TY143077* N_145687;
NI Indent_145697;
NimStringDesc* LOC8;
Result_145686 = 0;
Result_145686 = Newrstnode_143094(((NU8) 24));
N_145687 = 0;
N_145687 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP145483));
if (!((*P_145685).Tok->data[(*P_145685).Idx].Kind == ((NU8) 1))) goto LA2;
Indent_145697 = 0;
Indent_145697 = (*P_145685).Tok->data[(*P_145685).Idx].Ival;
(*P_145685).Idx += 1;
while (1) {
switch ((*P_145685).Tok->data[(*P_145685).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_145685).Tok->data[(*P_145685).Idx].Ival < Indent_145697)) goto LA6;
goto LA4;
goto LA5;
LA6: ;
(*N_145687).Text = resizeString((*N_145687).Text, 2);
appendString((*N_145687).Text, ((NimStringDesc*) &TMP195110));
LOC8 = 0;
LOC8 = nsuRepeatChar((NI32)((*P_145685).Tok->data[(*P_145685).Idx].Ival - Indent_145697), 32);
(*N_145687).Text = resizeString((*N_145687).Text, LOC8->Sup.len + 0);
appendString((*N_145687).Text, LOC8);
(*P_145685).Idx += 1;
LA5: ;
break;
default:
(*N_145687).Text = resizeString((*N_145687).Text, (*P_145685).Tok->data[(*P_145685).Idx].Symbol->Sup.len + 0);
appendString((*N_145687).Text, (*P_145685).Tok->data[(*P_145685).Idx].Symbol);
(*P_145685).Idx += 1;
break;
}
} LA4: ;
goto LA1;
LA2: ;
while (1) {
if (!!(((3 &(1<<(((*P_145685).Tok->data[(*P_145685).Idx].Kind)&7)))!=0))) goto LA9;
(*N_145687).Text = resizeString((*N_145687).Text, (*P_145685).Tok->data[(*P_145685).Idx].Symbol->Sup.len + 0);
appendString((*N_145687).Text, (*P_145685).Tok->data[(*P_145685).Idx].Symbol);
(*P_145685).Idx += 1;
} LA9: ;
LA1: ;
Addson_143101(Result_145686, N_145687);
return Result_145686;
}
N_NIMCALL(TY143077*, Parsebulletlist_146571)(TY143690* P_146574) {
TY143077* Result_146575;
NimStringDesc* Bullet_146585;
NI Col_146586;
TY143077* Item_146599;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_146575 = 0;
Result_146575 = NIM_NIL;
if (!((*P_146574).Tok->data[(NI32)((*P_146574).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Bullet_146585 = 0;
Bullet_146585 = copyString((*P_146574).Tok->data[(*P_146574).Idx].Symbol);
Col_146586 = 0;
Col_146586 = (*P_146574).Tok->data[(*P_146574).Idx].Col;
Result_146575 = Newrstnode_143094(((NU8) 5));
Pushind_143778(P_146574, (*P_146574).Tok->data[(NI32)((*P_146574).Idx + 2)].Col);
(*P_146574).Idx += 2;
while (1) {
Item_146599 = 0;
Item_146599 = Newrstnode_143094(((NU8) 6));
Parsesection_145508(P_146574, Item_146599);
Addson_143101(Result_146575, Item_146599);
LOC8 = ((*P_146574).Tok->data[(*P_146574).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_146574).Tok->data[(*P_146574).Idx].Ival == Col_146586);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_146574).Tok->data[(NI32)((*P_146574).Idx + 1)].Symbol, Bullet_146585);
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_146574).Tok->data[(NI32)((*P_146574).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_146574).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_143801(P_146574);
LA2: ;
return Result_146575;
}
N_NIMCALL(TY143077*, Parselineblock_145875)(TY143690* P_145878) {
TY143077* Result_145879;
NI Col_145889;
TY143077* Item_145902;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_145879 = 0;
Result_145879 = NIM_NIL;
if (!((*P_145878).Tok->data[(NI32)((*P_145878).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Col_145889 = 0;
Col_145889 = (*P_145878).Tok->data[(*P_145878).Idx].Col;
Result_145879 = Newrstnode_143094(((NU8) 26));
Pushind_143778(P_145878, (*P_145878).Tok->data[(NI32)((*P_145878).Idx + 2)].Col);
(*P_145878).Idx += 2;
while (1) {
Item_145902 = 0;
Item_145902 = Newrstnode_143094(((NU8) 27));
Parsesection_145508(P_145878, Item_145902);
Addson_143101(Result_145879, Item_145902);
LOC8 = ((*P_145878).Tok->data[(*P_145878).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_145878).Tok->data[(*P_145878).Idx].Ival == Col_145889);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_145878).Tok->data[(NI32)((*P_145878).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195121));
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_145878).Tok->data[(NI32)((*P_145878).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_145878).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_143801(P_145878);
LA2: ;
return Result_145879;
}
N_NIMCALL(NimStringDesc*, Getdirective_145270)(TY143690* P_145273) {
NimStringDesc* Result_145274;
NIM_BOOL LOC2;
NI J_145293;
Result_145274 = 0;
LOC2 = ((*P_145273).Tok->data[(*P_145273).Idx].Kind == ((NU8) 2));
if (!(LOC2)) goto LA3;
LOC2 = ((*P_145273).Tok->data[(NI32)((*P_145273).Idx + 1)].Kind == ((NU8) 3));
LA3: ;
if (!LOC2) goto LA4;
J_145293 = 0;
J_145293 = (*P_145273).Idx;
(*P_145273).Idx += 1;
Result_145274 = copyString((*P_145273).Tok->data[(*P_145273).Idx].Symbol);
(*P_145273).Idx += 1;
while (1) {
if (!((120 &(1<<(((*P_145273).Tok->data[(*P_145273).Idx].Kind)&7)))!=0)) goto LA6;
if (!eqStrings((*P_145273).Tok->data[(*P_145273).Idx].Symbol, ((NimStringDesc*) &TMP195117))) goto LA8;
goto LA6;
LA8: ;
Result_145274 = resizeString(Result_145274, (*P_145273).Tok->data[(*P_145273).Idx].Symbol->Sup.len + 0);
appendString(Result_145274, (*P_145273).Tok->data[(*P_145273).Idx].Symbol);
(*P_145273).Idx += 1;
} LA6: ;
if (!((*P_145273).Tok->data[(*P_145273).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_145273).Idx += 1;
LA11: ;
if (!eqStrings((*P_145273).Tok->data[(*P_145273).Idx].Symbol, ((NimStringDesc*) &TMP195117))) goto LA14;
(*P_145273).Idx += 1;
if (!((*P_145273).Tok->data[(*P_145273).Idx].Kind == ((NU8) 2))) goto LA17;
(*P_145273).Idx += 1;
LA17: ;
goto LA13;
LA14: ;
(*P_145273).Idx = J_145293;
Result_145274 = copyString(((NimStringDesc*) &TMP145483));
LA13: ;
goto LA1;
LA4: ;
Result_145274 = copyString(((NimStringDesc*) &TMP145483));
LA1: ;
return Result_145274;
}
N_NIMCALL(NU8, Getdirkind_145495)(NimStringDesc* S_145497) {
NU8 Result_145498;
NI I_145499;
Result_145498 = 0;
I_145499 = 0;
I_145499 = Binarystrsearch_42147(Dirids_145478, 12, S_145497);
if (!(0 <= I_145499)) goto LA2;
Result_145498 = ((NU8) (I_145499));
goto LA1;
LA2: ;
Result_145498 = ((NU8) 0);
LA1: ;
return Result_145498;
}
N_NIMCALL(TY143077*, Newleaf_144513)(TY143690* P_144516) {
TY143077* Result_144517;
Result_144517 = 0;
Result_144517 = Newrstnode_143097(((NU8) 62), (*P_144516).Tok->data[(*P_144516).Idx].Symbol);
return Result_144517;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_144640)(TY143690* P_144642, NimStringDesc* Markup_144643) {
NIM_BOOL Result_144644;
NIM_CHAR D_144645;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NIM_CHAR C_144686;
Result_144644 = 0;
D_144645 = 0;
Result_144644 = eqStrings((*P_144642).Tok->data[(*P_144642).Idx].Symbol, Markup_144643);
if (!!(Result_144644)) goto LA2;
goto BeforeRet;
LA2: ;
LOC5 = ((*P_144642).Idx == 0);
if (LOC5) goto LA6;
LOC5 = ((6 &(1<<(((*P_144642).Tok->data[(NI32)((*P_144642).Idx - 1)].Kind)&7)))!=0);
LA6: ;
LOC4 = LOC5;
if (LOC4) goto LA7;
LOC4 = ((TMP195132[((NU8)((*P_144642).Tok->data[(NI32)((*P_144642).Idx - 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_144642).Tok->data[(NI32)((*P_144642).Idx - 1)].Symbol->data[0]))%8)))!=0);
LA7: ;
Result_144644 = LOC4;
if (!!(Result_144644)) goto LA9;
goto BeforeRet;
LA9: ;
Result_144644 = !(((7 &(1<<(((*P_144642).Tok->data[(NI32)((*P_144642).Idx + 1)].Kind)&7)))!=0));
if (!!(Result_144644)) goto LA12;
goto BeforeRet;
LA12: ;
if (!(0 < (*P_144642).Idx)) goto LA15;
if (!eqStrings((*P_144642).Tok->data[(NI32)((*P_144642).Idx - 1)].Symbol, ((NimStringDesc*) &TMP195133))) goto LA18;
Result_144644 = NIM_FALSE;
goto LA17;
LA18: ;
C_144686 = 0;
C_144686 = (*P_144642).Tok->data[(NI32)((*P_144642).Idx - 1)].Symbol->data[0];
switch (((NU8)(C_144686))) {
case 39:
case 34:
D_144645 = C_144686;
break;
case 40:
D_144645 = 41;
break;
case 91:
D_144645 = 93;
break;
case 123:
D_144645 = 125;
break;
case 60:
D_144645 = 62;
break;
default:
D_144645 = 0;
break;
}
if (!!(((NU8)(D_144645) == (NU8)(0)))) goto LA21;
Result_144644 = !(((NU8)((*P_144642).Tok->data[(NI32)((*P_144642).Idx + 1)].Symbol->data[0]) == (NU8)(D_144645)));
LA21: ;
LA17: ;
LA15: ;
BeforeRet: ;
return Result_144644;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_144597)(TY143690* P_144599, NimStringDesc* Markup_144600) {
NIM_BOOL Result_144601;
NIM_BOOL LOC7;
NIM_BOOL LOC16;
Result_144601 = 0;
Result_144601 = eqStrings((*P_144599).Tok->data[(*P_144599).Idx].Symbol, Markup_144600);
if (!!(Result_144601)) goto LA2;
goto BeforeRet;
LA2: ;
Result_144601 = !(((6 &(1<<(((*P_144599).Tok->data[(NI32)((*P_144599).Idx - 1)].Kind)&7)))!=0));
if (!!(Result_144601)) goto LA5;
goto BeforeRet;
LA5: ;
LOC7 = ((7 &(1<<(((*P_144599).Tok->data[(NI32)((*P_144599).Idx + 1)].Kind)&7)))!=0);
if (LOC7) goto LA8;
LOC7 = ((TMP195135[((NU8)((*P_144599).Tok->data[(NI32)((*P_144599).Idx + 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_144599).Tok->data[(NI32)((*P_144599).Idx + 1)].Symbol->data[0]))%8)))!=0);
LA8: ;
Result_144601 = LOC7;
if (!!(Result_144601)) goto LA10;
goto BeforeRet;
LA10: ;
if (!(0 < (*P_144599).Idx)) goto LA13;
LOC16 = !(eqStrings(Markup_144600, ((NimStringDesc*) &TMP195136)));
if (!(LOC16)) goto LA17;
LOC16 = eqStrings((*P_144599).Tok->data[(NI32)((*P_144599).Idx - 1)].Symbol, ((NimStringDesc*) &TMP195133));
LA17: ;
if (!LOC16) goto LA18;
Result_144601 = NIM_FALSE;
LA18: ;
LA13: ;
BeforeRet: ;
return Result_144601;
}
N_NIMCALL(void, Parsebackslash_144691)(TY143690* P_144694, TY143077* Father_144695) {
TY143077* LOC4;
TY143077* LOC10;
TY143077* LOC11;
if (!eqStrings((*P_144694).Tok->data[(*P_144694).Idx].Symbol, ((NimStringDesc*) &TMP195137))) goto LA2;
LOC4 = 0;
LOC4 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195133));
Addson_143101(Father_144695, LOC4);
(*P_144694).Idx += 1;
goto LA1;
LA2: ;
if (!eqStrings((*P_144694).Tok->data[(*P_144694).Idx].Symbol, ((NimStringDesc*) &TMP195133))) goto LA5;
(*P_144694).Idx += 1;
if (!!(((*P_144694).Tok->data[(*P_144694).Idx].Kind == ((NU8) 2)))) goto LA8;
LOC10 = 0;
LOC10 = Newleaf_144513(P_144694);
Addson_143101(Father_144695, LOC10);
LA8: ;
(*P_144694).Idx += 1;
goto LA1;
LA5: ;
LOC11 = 0;
LOC11 = Newleaf_144513(P_144694);
Addson_143101(Father_144695, LOC11);
(*P_144694).Idx += 1;
LA1: ;
}
N_NIMCALL(void, Parseuntil_145111)(TY143690* P_145114, TY143077* Father_145115, NimStringDesc* Postfix_145116, NIM_BOOL Interpretbackslash_145117) {
NIM_BOOL LOC3;
TY143077* LOC8;
TY143077* LOC9;
TY143077* LOC10;
TY143077* LOC14;
while (1) {
switch ((*P_145114).Tok->data[(*P_145114).Idx].Kind) {
case ((NU8) 5):
LOC3 = Isinlinemarkupend_144597(&(*P_145114), Postfix_145116);
if (!LOC3) goto LA4;
(*P_145114).Idx += 1;
goto LA1;
goto LA2;
LA4: ;
if (!Interpretbackslash_145117) goto LA6;
Parsebackslash_144691(P_145114, Father_145115);
goto LA2;
LA6: ;
LOC8 = 0;
LOC8 = Newleaf_144513(P_145114);
Addson_143101(Father_145115, LOC8);
(*P_145114).Idx += 1;
LA2: ;
break;
case ((NU8) 4):
case ((NU8) 3):
case ((NU8) 6):
LOC9 = 0;
LOC9 = Newleaf_144513(P_145114);
Addson_143101(Father_145115, LOC9);
(*P_145114).Idx += 1;
break;
case ((NU8) 1):
LOC10 = 0;
LOC10 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195138));
Addson_143101(Father_145115, LOC10);
(*P_145114).Idx += 1;
if (!((*P_145114).Tok->data[(*P_145114).Idx].Kind == ((NU8) 1))) goto LA12;
Rstmessage_143765(&(*P_145114), ((NU8) 182), Postfix_145116);
goto LA1;
LA12: ;
break;
case ((NU8) 2):
LOC14 = 0;
LOC14 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195138));
Addson_143101(Father_145115, LOC14);
(*P_145114).Idx += 1;
break;
default:
Rstmessage_143765(&(*P_145114), ((NU8) 182), Postfix_145116);
break;
}
} LA1: ;
}
N_NIMCALL(void, Fixupembeddedref_144941)(TY143077* N_144943, TY143077* A_144944, TY143077* B_144945) {
NI Sep_144946;
NI I_144969;
NI HEX3Atmp_144992;
NI LOC1;
NI Res_144994;
NI Incr_144974;
NI LOC6;
NIM_BOOL LOC8;
NI I_144982;
NI HEX3Atmp_144998;
NI Res_145000;
NI I_144990;
NI HEX3Atmp_145004;
NI HEX3Atmp_145005;
NI LOC12;
NI Res_145007;
Sep_144946 = 0;
Sep_144946 = -1;
I_144969 = 0;
HEX3Atmp_144992 = 0;
LOC1 = Rsonslen_143091(N_144943);
HEX3Atmp_144992 = (NI32)(LOC1 - 2);
Res_144994 = 0;
Res_144994 = HEX3Atmp_144992;
while (1) {
if (!(0 <= Res_144994)) goto LA2;
I_144969 = Res_144994;
if (!eqStrings((*(*N_144943).Sons->data[I_144969]).Text, ((NimStringDesc*) &TMP195142))) goto LA4;
Sep_144946 = I_144969;
goto LA2;
LA4: ;
Res_144994 -= 1;
} LA2: ;
Incr_144974 = 0;
LOC8 = (0 < Sep_144946);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)((*(*N_144943).Sons->data[(NI32)(Sep_144946 - 1)]).Text->data[0]) == (NU8)(32));
LA9: ;
if (!LOC8) goto LA10;
LOC6 = 2;
goto LA7;
LA10: ;
LOC6 = 1;
LA7: ;
Incr_144974 = LOC6;
I_144982 = 0;
HEX3Atmp_144998 = 0;
HEX3Atmp_144998 = (NI32)(Sep_144946 - Incr_144974);
Res_145000 = 0;
Res_145000 = 0;
while (1) {
if (!(Res_145000 <= HEX3Atmp_144998)) goto LA11;
I_144982 = Res_145000;
Addson_143101(A_144944, (*N_144943).Sons->data[I_144982]);
Res_145000 += 1;
} LA11: ;
I_144990 = 0;
HEX3Atmp_145004 = 0;
HEX3Atmp_145005 = 0;
HEX3Atmp_145004 = (NI32)(Sep_144946 + 1);
LOC12 = Rsonslen_143091(N_144943);
HEX3Atmp_145005 = (NI32)(LOC12 - 2);
Res_145007 = 0;
Res_145007 = HEX3Atmp_145004;
while (1) {
if (!(Res_145007 <= HEX3Atmp_145005)) goto LA13;
I_144990 = Res_145007;
Addson_143101(B_144945, (*N_144943).Sons->data[I_144990]);
Res_145007 += 1;
} LA13: ;
}
N_NIMCALL(void, Setref_144078)(TY143690* P_144081, NimStringDesc* Key_144082, TY143077* Value_144083) {
NI Length_144094;
NI I_144102;
NI HEX3Atmp_144116;
NI Res_144118;
Length_144094 = 0;
Length_144094 = (*(*P_144081).S).Refs->Sup.len;
I_144102 = 0;
HEX3Atmp_144116 = 0;
HEX3Atmp_144116 = (NI32)(Length_144094 - 1);
Res_144118 = 0;
Res_144118 = 0;
while (1) {
if (!(Res_144118 <= HEX3Atmp_144116)) goto LA1;
I_144102 = Res_144118;
if (!eqStrings(Key_144082, (*(*P_144081).S).Refs->data[I_144102].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_144081).S).Refs->data[I_144102].Value, Value_144083);
Rstmessage_143765(&(*P_144081), ((NU8) 216), Key_144082);
goto BeforeRet;
LA3: ;
Res_144118 += 1;
} LA1: ;
(*(*P_144081).S).Refs = (TY143695*) setLengthSeq(&((*(*P_144081).S).Refs)->Sup, sizeof(TY143684), (NI32)(Length_144094 + 1));
asgnRefNoCycle((void**) &(*(*P_144081).S).Refs->data[Length_144094].Key, copyString(Key_144082));
asgnRefNoCycle((void**) &(*(*P_144081).S).Refs->data[Length_144094].Value, Value_144083);
BeforeRet: ;
}
N_NIMCALL(TY143077*, Parsepostfix_145010)(TY143690* P_145013, TY143077* N_145014) {
TY143077* Result_145015;
NIM_BOOL LOC2;
NIM_BOOL LOC6;
TY143077* A_145028;
TY143077* B_145029;
NI LOC11;
NimStringDesc* LOC14;
NIM_BOOL LOC17;
NIM_BOOL LOC29;
NIM_BOOL LOC33;
TY143077* LOC37;
Result_145015 = 0;
Result_145015 = N_145014;
LOC2 = Isinlinemarkupend_144597(&(*P_145013), ((NimStringDesc*) &TMP195140));
if (!LOC2) goto LA3;
(*P_145013).Idx += 1;
LOC6 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx - 2)].Symbol, ((NimStringDesc*) &TMP195139));
if (!(LOC6)) goto LA7;
LOC6 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx - 3)].Symbol, ((NimStringDesc*) &TMP195141));
LA7: ;
if (!LOC6) goto LA8;
A_145028 = 0;
A_145028 = Newrstnode_143094(((NU8) 0));
B_145029 = 0;
B_145029 = Newrstnode_143094(((NU8) 0));
Fixupembeddedref_144941(N_145014, A_145028, B_145029);
LOC11 = Rsonslen_143091(A_145028);
if (!(LOC11 == 0)) goto LA12;
Result_145015 = Newrstnode_143094(((NU8) 37));
Addson_143101(Result_145015, B_145029);
goto LA10;
LA12: ;
Result_145015 = Newrstnode_143094(((NU8) 38));
Addson_143101(Result_145015, A_145028);
Addson_143101(Result_145015, B_145029);
LOC14 = 0;
LOC14 = Rstnodetorefname_143105(A_145028);
Setref_144078(P_145013, LOC14, B_145029);
LA10: ;
goto LA5;
LA8: ;
if (!((*N_145014).Kind == ((NU8) 59))) goto LA15;
(*N_145014).Kind = ((NU8) 39);
goto LA5;
LA15: ;
Result_145015 = Newrstnode_143094(((NU8) 39));
Addson_143101(Result_145015, N_145014);
LA5: ;
goto LA1;
LA3: ;
LOC17 = Match_144762(&(*P_145013), (*P_145013).Idx, ((NimStringDesc*) &TMP195143));
if (!LOC17) goto LA18;
if (!eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195144))) goto LA21;
(*N_145014).Kind = ((NU8) 56);
goto LA20;
LA21: ;
if (!eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195145))) goto LA23;
(*N_145014).Kind = ((NU8) 60);
goto LA20;
LA23: ;
if (!eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195146))) goto LA25;
(*N_145014).Kind = ((NU8) 58);
goto LA20;
LA25: ;
if (!eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195147))) goto LA27;
(*N_145014).Kind = ((NU8) 57);
goto LA20;
LA27: ;
LOC29 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195148));
if (LOC29) goto LA30;
LOC29 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195149));
LA30: ;
if (!LOC29) goto LA31;
(*N_145014).Kind = ((NU8) 54);
goto LA20;
LA31: ;
LOC33 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195150));
if (LOC33) goto LA34;
LOC33 = eqStrings((*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195151));
LA34: ;
if (!LOC33) goto LA35;
(*N_145014).Kind = ((NU8) 55);
goto LA20;
LA35: ;
Result_145015 = Newrstnode_143094(((NU8) 53));
(*N_145014).Kind = ((NU8) 0);
Addson_143101(Result_145015, N_145014);
LOC37 = 0;
LOC37 = Newrstnode_143097(((NU8) 62), (*P_145013).Tok->data[(NI32)((*P_145013).Idx + 1)].Symbol);
Addson_143101(Result_145015, LOC37);
LA20: ;
(*P_145013).Idx += 3;
goto LA1;
LA18: ;
LA1: ;
return Result_145015;
}
N_NIMCALL(NIM_BOOL, Isurl_145053)(TY143690* P_145055, NI I_145056) {
NIM_BOOL Result_145057;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_145057 = 0;
LOC3 = eqStrings((*P_145055).Tok->data[(NI32)(I_145056 + 1)].Symbol, ((NimStringDesc*) &TMP195123));
if (!(LOC3)) goto LA4;
LOC3 = eqStrings((*P_145055).Tok->data[(NI32)(I_145056 + 2)].Symbol, ((NimStringDesc*) &TMP195152));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((*P_145055).Tok->data[(NI32)(I_145056 + 3)].Kind == ((NU8) 3));
LA5: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA6;
LOC1 = eqStrings((*P_145055).Tok->data[(NI32)(I_145056 + 4)].Symbol, ((NimStringDesc*) &TMP195153));
LA6: ;
Result_145057 = LOC1;
return Result_145057;
}
N_NIMCALL(void, Parseurl_145067)(TY143690* P_145070, TY143077* Father_145071) {
NIM_BOOL LOC2;
TY143077* N_145072;
TY143077* LOC9;
TY143077* N_145097;
LOC2 = Isurl_145053(&(*P_145070), (*P_145070).Idx);
if (!LOC2) goto LA3;
N_145072 = 0;
N_145072 = Newrstnode_143094(((NU8) 37));
while (1) {
switch ((*P_145070).Tok->data[(*P_145070).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
break;
case ((NU8) 5):
if (!!(((120 &(1<<(((*P_145070).Tok->data[(NI32)((*P_145070).Idx + 1)].Kind)&7)))!=0))) goto LA7;
goto LA5;
LA7: ;
break;
default:
goto LA5;
break;
}
LOC9 = 0;
LOC9 = Newleaf_144513(P_145070);
Addson_143101(N_145072, LOC9);
(*P_145070).Idx += 1;
} LA5: ;
Addson_143101(Father_145071, N_145072);
goto LA1;
LA3: ;
N_145097 = 0;
N_145097 = Newleaf_144513(P_145070);
(*P_145070).Idx += 1;
if (!eqStrings((*P_145070).Tok->data[(*P_145070).Idx].Symbol, ((NimStringDesc*) &TMP195140))) goto LA11;
N_145097 = Parsepostfix_145010(P_145070, N_145097);
LA11: ;
Addson_143101(Father_145071, N_145097);
LA1: ;
}
N_NIMCALL(void, Parseinline_145188)(TY143690* P_145191, TY143077* Father_145192) {
NIM_BOOL LOC2;
TY143077* N_145205;
NIM_BOOL LOC5;
TY143077* N_145218;
NIM_BOOL LOC8;
TY143077* N_145231;
NIM_BOOL LOC11;
TY143077* N_145244;
NIM_BOOL LOC14;
TY143077* N_145257;
TY143077* LOC17;
switch ((*P_145191).Tok->data[(*P_145191).Idx].Kind) {
case ((NU8) 5):
LOC2 = Isinlinemarkupstart_144640(&(*P_145191), ((NimStringDesc*) &TMP195134));
if (!LOC2) goto LA3;
(*P_145191).Idx += 1;
N_145205 = 0;
N_145205 = Newrstnode_143094(((NU8) 58));
Parseuntil_145111(P_145191, N_145205, ((NimStringDesc*) &TMP195134), NIM_TRUE);
Addson_143101(Father_145192, N_145205);
goto LA1;
LA3: ;
LOC5 = Isinlinemarkupstart_144640(&(*P_145191), ((NimStringDesc*) &TMP195119));
if (!LOC5) goto LA6;
(*P_145191).Idx += 1;
N_145218 = 0;
N_145218 = Newrstnode_143094(((NU8) 57));
Parseuntil_145111(P_145191, N_145218, ((NimStringDesc*) &TMP195119), NIM_TRUE);
Addson_143101(Father_145192, N_145218);
goto LA1;
LA6: ;
LOC8 = Isinlinemarkupstart_144640(&(*P_145191), ((NimStringDesc*) &TMP195136));
if (!LOC8) goto LA9;
(*P_145191).Idx += 1;
N_145231 = 0;
N_145231 = Newrstnode_143094(((NU8) 60));
Parseuntil_145111(P_145191, N_145231, ((NimStringDesc*) &TMP195136), NIM_FALSE);
Addson_143101(Father_145192, N_145231);
goto LA1;
LA9: ;
LOC11 = Isinlinemarkupstart_144640(&(*P_145191), ((NimStringDesc*) &TMP195139));
if (!LOC11) goto LA12;
(*P_145191).Idx += 1;
N_145244 = 0;
N_145244 = Newrstnode_143094(((NU8) 59));
Parseuntil_145111(P_145191, N_145244, ((NimStringDesc*) &TMP195139), NIM_TRUE);
N_145244 = Parsepostfix_145010(P_145191, N_145244);
Addson_143101(Father_145192, N_145244);
goto LA1;
LA12: ;
LOC14 = Isinlinemarkupstart_144640(&(*P_145191), ((NimStringDesc*) &TMP195121));
if (!LOC14) goto LA15;
(*P_145191).Idx += 1;
N_145257 = 0;
N_145257 = Newrstnode_143094(((NU8) 61));
Parseuntil_145111(P_145191, N_145257, ((NimStringDesc*) &TMP195121), NIM_FALSE);
Addson_143101(Father_145192, N_145257);
goto LA1;
LA15: ;
Parsebackslash_144691(P_145191, Father_145192);
LA1: ;
break;
case ((NU8) 3):
Parseurl_145067(P_145191, Father_145192);
break;
case ((NU8) 4):
case ((NU8) 6):
case ((NU8) 2):
LOC17 = 0;
LOC17 = Newleaf_144513(P_145191);
Addson_143101(Father_145192, LOC17);
(*P_145191).Idx += 1;
break;
default:
break;
}
}
N_NIMCALL(void, Parseline_145502)(TY143690* P_145505, TY143077* Father_145506) {
while (1) {
switch ((*P_145505).Tok->data[(*P_145505).Idx].Kind) {
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
Parseinline_145188(P_145505, Father_145506);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(TY143077*, Parsefield_145513)(TY143690* P_145516) {
TY143077* Result_145517;
NI Col_145518;
TY143077* Fieldname_145531;
TY143077* Fieldbody_145532;
NI Indent_145551;
Result_145517 = 0;
Result_145517 = Newrstnode_143094(((NU8) 14));
Col_145518 = 0;
Col_145518 = (*P_145516).Tok->data[(*P_145516).Idx].Col;
(*P_145516).Idx += 1;
Fieldname_145531 = 0;
Fieldname_145531 = Newrstnode_143094(((NU8) 15));
Parseuntil_145111(P_145516, Fieldname_145531, ((NimStringDesc*) &TMP195123), NIM_FALSE);
Fieldbody_145532 = 0;
Fieldbody_145532 = Newrstnode_143094(((NU8) 16));
if (!!(((*P_145516).Tok->data[(*P_145516).Idx].Kind == ((NU8) 1)))) goto LA2;
Parseline_145502(P_145516, Fieldbody_145532);
LA2: ;
if (!((*P_145516).Tok->data[(*P_145516).Idx].Kind == ((NU8) 1))) goto LA5;
Indent_145551 = 0;
Indent_145551 = (*P_145516).Tok->data[(*P_145516).Idx].Ival;
if (!(Col_145518 < Indent_145551)) goto LA8;
Pushind_143778(P_145516, Indent_145551);
Parsesection_145508(P_145516, Fieldbody_145532);
Popind_143801(P_145516);
LA8: ;
LA5: ;
Addson_143101(Result_145517, Fieldname_145531);
Addson_143101(Result_145517, Fieldbody_145532);
return Result_145517;
}
N_NIMCALL(TY143077*, Parsefields_145554)(TY143690* P_145557) {
TY143077* Result_145558;
NIM_BOOL LOC2;
NI Col_145568;
TY143077* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC10;
Result_145558 = 0;
Result_145558 = NIM_NIL;
LOC2 = ((*P_145557).Tok->data[(*P_145557).Idx].Kind == ((NU8) 1));
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_145557).Tok->data[(NI32)((*P_145557).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195123));
LA3: ;
if (!LOC2) goto LA4;
Col_145568 = 0;
Col_145568 = (*P_145557).Tok->data[(*P_145557).Idx].Ival;
Result_145558 = Newrstnode_143094(((NU8) 13));
(*P_145557).Idx += 1;
while (1) {
LOC7 = 0;
LOC7 = Parsefield_145513(P_145557);
Addson_143101(Result_145558, LOC7);
LOC10 = ((*P_145557).Tok->data[(*P_145557).Idx].Kind == ((NU8) 1));
if (!(LOC10)) goto LA11;
LOC10 = ((*P_145557).Tok->data[(*P_145557).Idx].Ival == Col_145568);
LA11: ;
LOC9 = LOC10;
if (!(LOC9)) goto LA12;
LOC9 = eqStrings((*P_145557).Tok->data[(NI32)((*P_145557).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195123));
LA12: ;
if (!LOC9) goto LA13;
(*P_145557).Idx += 1;
goto LA8;
LA13: ;
goto LA6;
LA8: ;
} LA6: ;
LA4: ;
return Result_145558;
}
N_NIMCALL(TY143077*, Parsedirective_147079)(TY143690* P_147082, NU8 Flags_147083) {
TY143077* Result_147084;
TY143077* Args_147085;
TY143077* Options_147086;
TY143077* LOC8;
TY143077* LOC15;
NIM_BOOL LOC20;
NIM_BOOL LOC21;
Result_147084 = 0;
Result_147084 = Newrstnode_143094(((NU8) 40));
Args_147085 = 0;
Args_147085 = NIM_NIL;
Options_147086 = 0;
Options_147086 = NIM_NIL;
if (!((Flags_147083 &(1<<((((NU8) 0))&7)))!=0)) goto LA2;
Args_147085 = Newrstnode_143094(((NU8) 41));
if (!((Flags_147083 &(1<<((((NU8) 2))&7)))!=0)) goto LA5;
while (1) {
switch ((*P_147082).Tok->data[(*P_147082).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
case ((NU8) 4):
LOC8 = 0;
LOC8 = Newleaf_144513(P_147082);
Addson_143101(Args_147085, LOC8);
(*P_147082).Idx += 1;
break;
default:
goto LA7;
break;
}
} LA7: ;
goto LA4;
LA5: ;
if (!((Flags_147083 &(1<<((((NU8) 3))&7)))!=0)) goto LA9;
while (1) {
if (!((*P_147082).Tok->data[(*P_147082).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_147082).Idx += 1;
} LA11: ;
if (!((*P_147082).Tok->data[(*P_147082).Idx].Kind == ((NU8) 3))) goto LA13;
LOC15 = 0;
LOC15 = Newleaf_144513(P_147082);
Addson_143101(Args_147085, LOC15);
(*P_147082).Idx += 1;
goto LA12;
LA13: ;
Args_147085 = NIM_NIL;
LA12: ;
goto LA4;
LA9: ;
Parseline_145502(P_147082, Args_147085);
LA4: ;
LA2: ;
Addson_143101(Result_147084, Args_147085);
if (!((Flags_147083 &(1<<((((NU8) 1))&7)))!=0)) goto LA17;
LOC21 = ((*P_147082).Tok->data[(*P_147082).Idx].Kind == ((NU8) 1));
if (!(LOC21)) goto LA22;
LOC21 = (3 <= (*P_147082).Tok->data[(*P_147082).Idx].Ival);
LA22: ;
LOC20 = LOC21;
if (!(LOC20)) goto LA23;
LOC20 = eqStrings((*P_147082).Tok->data[(NI32)((*P_147082).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195123));
LA23: ;
if (!LOC20) goto LA24;
Options_147086 = Parsefields_145554(P_147082);
LA24: ;
LA17: ;
Addson_143101(Result_147084, Options_147086);
return Result_147084;
}
N_NIMCALL(NIM_BOOL, Indfollows_147198)(TY143690* P_147200) {
NIM_BOOL Result_147201;
NIM_BOOL LOC1;
NI LOC3;
Result_147201 = 0;
LOC1 = ((*P_147200).Tok->data[(*P_147200).Idx].Kind == ((NU8) 1));
if (!(LOC1)) goto LA2;
LOC3 = Currind_143774(P_147200);
LOC1 = (LOC3 < (*P_147200).Tok->data[(*P_147200).Idx].Ival);
LA2: ;
Result_147201 = LOC1;
return Result_147201;
}
N_NIMCALL(TY143077*, Parsedirective_147213)(TY143690* P_147216, NU8 Flags_147217, TY147071 Contentparser_147218) {
TY143077* Result_147219;
NIM_BOOL LOC2;
TY143077* Content_147220;
Result_147219 = 0;
Result_147219 = Parsedirective_147079(P_147216, Flags_147217);
LOC2 = !(((void*) (Contentparser_147218)) == 0);
if (!(LOC2)) goto LA3;
LOC2 = Indfollows_147198(&(*P_147216));
LA3: ;
if (!LOC2) goto LA4;
Pushind_143778(P_147216, (*P_147216).Tok->data[(*P_147216).Idx].Ival);
Content_147220 = 0;
Content_147220 = Contentparser_147218(P_147216);
Popind_143801(P_147216);
Addson_143101(Result_147219, Content_147220);
goto LA1;
LA4: ;
Addson_143101(Result_147219, NIM_NIL);
LA1: ;
return Result_147219;
}
N_NIMCALL(NimStringDesc*, Getfieldvalue_143111)(TY143077* N_143113, NimStringDesc* Fieldname_143114) {
NimStringDesc* Result_145609;
NimStringDesc* LOC7;
NI I_145653;
NI HEX3Atmp_145658;
NI LOC8;
NI Res_145660;
TY143077* F_145654;
NimStringDesc* LOC11;
NI LOC12;
Result_145609 = 0;
Result_145609 = copyString(((NimStringDesc*) &TMP145483));
if (!((*N_143113).Sons->data[1] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((*(*N_143113).Sons->data[1]).Kind == ((NU8) 13)))) goto LA5;
LOC7 = 0;
LOC7 = rawNewString(reprEnum((*(*N_143113).Sons->data[1]).Kind, NTI143008)->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP195154));
appendString(LOC7, reprEnum((*(*N_143113).Sons->data[1]).Kind, NTI143008));
Internalerror_43571(LOC7);
LA5: ;
I_145653 = 0;
HEX3Atmp_145658 = 0;
LOC8 = Rsonslen_143091((*N_143113).Sons->data[1]);
HEX3Atmp_145658 = (NI32)(LOC8 - 1);
Res_145660 = 0;
Res_145660 = 0;
while (1) {
if (!(Res_145660 <= HEX3Atmp_145658)) goto LA9;
I_145653 = Res_145660;
F_145654 = 0;
F_145654 = (*(*N_143113).Sons->data[1]).Sons->data[I_145653];
LOC11 = 0;
LOC11 = Addnodes_143108((*F_145654).Sons->data[0]);
LOC12 = nsuCmpIgnoreStyle(LOC11, Fieldname_143114);
if (!(LOC12 == 0)) goto LA13;
Result_145609 = Addnodes_143108((*F_145654).Sons->data[1]);
if (!((Result_145609) && (Result_145609)->Sup.len == 0)) goto LA16;
Result_145609 = copyString(((NimStringDesc*) &TMP195155));
LA16: ;
goto BeforeRet;
LA13: ;
Res_145660 += 1;
} LA9: ;
BeforeRet: ;
return Result_145609;
}
N_NIMCALL(TY143077*, Dirinclude_147227)(TY143690* P_147230) {
TY143077* Result_147231;
TY143077* N_147233;
NimStringDesc* Filename_147234;
NimStringDesc* LOC1;
NimStringDesc* Path_147235;
NimStringDesc* LOC6;
NimStringDesc* LOC9;
TY143077* LOC10;
TY143690 Q_147236;
NimStringDesc* LOC11;
NI LOC13;
Result_147231 = 0;
Result_147231 = NIM_NIL;
N_147233 = 0;
N_147233 = Parsedirective_147213(P_147230, 7, NIM_NIL);
Filename_147234 = 0;
LOC1 = 0;
LOC1 = Addnodes_143108((*N_147233).Sons->data[0]);
Filename_147234 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Path_147235 = 0;
Path_147235 = Findfile_42088(Filename_147234);
if (!((Path_147235) && (Path_147235)->Sup.len == 0)) goto LA3;
Rstmessage_143765(&(*P_147230), ((NU8) 2), Filename_147234);
goto LA2;
LA3: ;
LOC6 = 0;
LOC6 = Getfieldvalue_143111(N_147233, ((NimStringDesc*) &TMP195145));
if (!!(((LOC6) && (LOC6)->Sup.len == 0))) goto LA7;
Result_147231 = Newrstnode_143094(((NU8) 24));
LOC9 = 0;
LOC9 = Readfile_3647(Path_147235);
LOC10 = 0;
LOC10 = Newrstnode_143097(((NU8) 62), LOC9);
Addson_143101(Result_147231, LOC10);
goto LA5;
LA7: ;
memset((void*)&Q_147236, 0, sizeof(Q_147236));
Q_147236.Sup.m_type = NTI143690;
Initparser_143839(&Q_147236, (*P_147230).S);
Q_147236.Filename = copyString(Filename_147234);
LOC11 = 0;
LOC11 = Readfile_3647(Path_147235);
Gettokens_143438(LOC11, NIM_FALSE, &Q_147236.Tok);
LOC13 = nsuFindStr(Q_147236.Tok->data[(Q_147236.Tok->Sup.len-1)].Symbol, ((NimStringDesc*) &TMP195156), 0);
if (!(0 < LOC13)) goto LA14;
Internalerror_43571(((NimStringDesc*) &TMP195157));
LA14: ;
Result_147231 = Parsedoc_146155(&Q_147236);
LA5: ;
LA2: ;
return Result_147231;
}
N_NIMCALL(TY143077*, Dirimage_147268)(TY143690* P_147271) {
TY143077* Result_147272;
Result_147272 = 0;
Result_147272 = Parsedirective_147213(P_147271, 7, NIM_NIL);
(*Result_147272).Kind = ((NU8) 45);
return Result_147272;
}
N_NIMCALL(TY143077*, Dirfigure_147274)(TY143690* P_147277) {
TY143077* Result_147278;
Result_147278 = 0;
Result_147278 = Parsedirective_147213(P_147277, 7, Parsesectionwrapper_147035);
(*Result_147278).Kind = ((NU8) 46);
return Result_147278;
}
N_NIMCALL(TY143077*, Dirtitle_147280)(TY143690* P_147283) {
TY143077* Result_147284;
Result_147284 = 0;
Result_147284 = Parsedirective_147213(P_147283, 1, NIM_NIL);
(*Result_147284).Kind = ((NU8) 43);
return Result_147284;
}
N_NIMCALL(TY143077*, Dircontainer_147251)(TY143690* P_147254) {
TY143077* Result_147255;
Result_147255 = 0;
Result_147255 = Parsedirective_147213(P_147254, 1, Parsesectionwrapper_147035);
(*Result_147255).Kind = ((NU8) 50);
return Result_147255;
}
N_NIMCALL(TY143077*, Dircontents_147286)(TY143690* P_147289) {
TY143077* Result_147290;
Result_147290 = 0;
Result_147290 = Parsedirective_147213(P_147289, 1, NIM_NIL);
(*Result_147290).Kind = ((NU8) 44);
return Result_147290;
}
N_NIMCALL(TY143077*, Parsedirbody_147221)(TY143690* P_147224, TY147071 Contentparser_147225) {
TY143077* Result_147226;
NIM_BOOL LOC2;
Result_147226 = 0;
LOC2 = Indfollows_147198(&(*P_147224));
if (!LOC2) goto LA3;
Pushind_143778(P_147224, (*P_147224).Tok->data[(*P_147224).Idx].Ival);
Result_147226 = Contentparser_147225(P_147224);
Popind_143801(P_147224);
LA3: ;
return Result_147226;
}
N_NIMCALL(void, Dirrawaux_147299)(TY143690* P_147302, TY143077** Result_147304, NU8 Kind_147305, TY147071 Contentparser_147306) {
NimStringDesc* Filename_147307;
NimStringDesc* Path_147312;
NimStringDesc* F_147317;
TY143077* LOC7;
TY143077* LOC8;
Filename_147307 = 0;
Filename_147307 = Getfieldvalue_143111((*Result_147304), ((NimStringDesc*) &TMP195159));
if (!(0 < Filename_147307->Sup.len)) goto LA2;
Path_147312 = 0;
Path_147312 = Findfile_42088(Filename_147307);
if (!(Path_147312->Sup.len == 0)) goto LA5;
Rstmessage_143765(&(*P_147302), ((NU8) 2), Filename_147307);
goto LA4;
LA5: ;
F_147317 = 0;
F_147317 = Readfile_3647(Path_147312);
unsureAsgnRef((void**) &(*Result_147304), Newrstnode_143094(Kind_147305));
LOC7 = 0;
LOC7 = Newrstnode_143097(((NU8) 62), F_147317);
Addson_143101((*Result_147304), LOC7);
LA4: ;
goto LA1;
LA2: ;
(*(*Result_147304)).Kind = Kind_147305;
LOC8 = 0;
LOC8 = Parsedirbody_147221(P_147302, Contentparser_147306);
Addson_143101((*Result_147304), LOC8);
LA1: ;
}
N_NIMCALL(TY143077*, Dirraw_147318)(TY143690* P_147321) {
TY143077* Result_147322;
NI LOC5;
NI LOC8;
Result_147322 = 0;
Result_147322 = Parsedirective_147079(P_147321, 11);
if (!!(((*Result_147322).Sons->data[0] == NIM_NIL))) goto LA2;
LOC5 = nsuCmpIgnoreCase((*(*(*Result_147322).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP195158));
if (!(LOC5 == 0)) goto LA6;
Dirrawaux_147299(P_147321, &Result_147322, ((NU8) 48), Parseliteralblock_145682);
goto LA4;
LA6: ;
LOC8 = nsuCmpIgnoreCase((*(*(*Result_147322).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP195160));
if (!(LOC8 == 0)) goto LA9;
Dirrawaux_147299(P_147321, &Result_147322, ((NU8) 49), Parseliteralblock_145682);
goto LA4;
LA9: ;
Rstmessage_143765(&(*P_147321), ((NU8) 28), (*(*Result_147322).Sons->data[0]).Text);
LA4: ;
goto LA1;
LA2: ;
Dirrawaux_147299(P_147321, &Result_147322, ((NU8) 42), Parsesectionwrapper_147035);
LA1: ;
return Result_147322;
}
N_NIMCALL(TY143077*, Dircodeblock_147242)(TY143690* P_147245) {
TY143077* Result_147246;
NimStringDesc* Filename_147248;
NimStringDesc* LOC1;
NimStringDesc* Path_147249;
TY143077* N_147250;
NimStringDesc* LOC8;
TY143077* LOC9;
Result_147246 = 0;
Result_147246 = Parsedirective_147213(P_147245, 3, Parseliteralblock_145682);
Filename_147248 = 0;
LOC1 = 0;
LOC1 = Getfieldvalue_143111(Result_147246, ((NimStringDesc*) &TMP195159));
Filename_147248 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
if (!!(((Filename_147248) && (Filename_147248)->Sup.len == 0))) goto LA3;
Path_147249 = 0;
Path_147249 = Findfile_42088(Filename_147248);
if (!((Path_147249) && (Path_147249)->Sup.len == 0)) goto LA6;
Rstmessage_143765(&(*P_147245), ((NU8) 2), Filename_147248);
LA6: ;
N_147250 = 0;
N_147250 = Newrstnode_143094(((NU8) 24));
LOC8 = 0;
LOC8 = Readfile_3647(Path_147249);
LOC9 = 0;
LOC9 = Newrstnode_143097(((NU8) 62), LOC8);
Addson_143101(N_147250, LOC9);
asgnRefNoCycle((void**) &(*Result_147246).Sons->data[2], N_147250);
LA3: ;
(*Result_147246).Kind = ((NU8) 47);
return Result_147246;
}
N_NIMCALL(TY143077*, Dirindex_147292)(TY143690* P_147295) {
TY143077* Result_147296;
Result_147296 = 0;
Result_147296 = Parsedirective_147213(P_147295, 0, Parsesectionwrapper_147035);
(*Result_147296).Kind = ((NU8) 51);
return Result_147296;
}
N_NIMCALL(TY143077*, Getreferencename_144518)(TY143690* P_144521, NimStringDesc* Endstr_144522) {
TY143077* Result_144523;
TY143077* Res_144524;
TY143077* LOC2;
TY143077* LOC6;
Result_144523 = 0;
Res_144524 = 0;
Res_144524 = Newrstnode_143094(((NU8) 0));
while (1) {
switch ((*P_144521).Tok->data[(*P_144521).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC2 = 0;
LOC2 = Newleaf_144513(P_144521);
Addson_143101(Res_144524, LOC2);
break;
case ((NU8) 5):
if (!eqStrings((*P_144521).Tok->data[(*P_144521).Idx].Symbol, Endstr_144522)) goto LA4;
(*P_144521).Idx += 1;
goto LA1;
goto LA3;
LA4: ;
LOC6 = 0;
LOC6 = Newleaf_144513(P_144521);
Addson_143101(Res_144524, LOC6);
LA3: ;
break;
default:
Rstmessage_143765(&(*P_144521), ((NU8) 182), Endstr_144522);
goto LA1;
break;
}
(*P_144521).Idx += 1;
} LA1: ;
Result_144523 = Res_144524;
return Result_144523;
}
N_NIMCALL(TY143077*, Untileol_144550)(TY143690* P_144553) {
TY143077* Result_144554;
TY143077* LOC2;
Result_144554 = 0;
Result_144554 = Newrstnode_143094(((NU8) 0));
while (1) {
if (!!(((3 &(1<<(((*P_144553).Tok->data[(*P_144553).Idx].Kind)&7)))!=0))) goto LA1;
LOC2 = 0;
LOC2 = Newleaf_144513(P_144553);
Addson_143101(Result_144554, LOC2);
(*P_144553).Idx += 1;
} LA1: ;
return Result_144554;
}
N_NIMCALL(void, Expect_144580)(TY143690* P_144583, NimStringDesc* Tok_144584) {
if (!eqStrings((*P_144583).Tok->data[(*P_144583).Idx].Symbol, Tok_144584)) goto LA2;
(*P_144583).Idx += 1;
goto LA1;
LA2: ;
Rstmessage_143765(&(*P_144583), ((NU8) 182), Tok_144584);
LA1: ;
}
N_NIMCALL(void, Setsub_144035)(TY143690* P_144038, NimStringDesc* Key_144039, TY143077* Value_144040) {
NI Length_144051;
NI I_144059;
NI HEX3Atmp_144073;
NI Res_144075;
Length_144051 = 0;
Length_144051 = (*(*P_144038).S).Subs->Sup.len;
I_144059 = 0;
HEX3Atmp_144073 = 0;
HEX3Atmp_144073 = (NI32)(Length_144051 - 1);
Res_144075 = 0;
Res_144075 = 0;
while (1) {
if (!(Res_144075 <= HEX3Atmp_144073)) goto LA1;
I_144059 = Res_144075;
if (!eqStrings(Key_144039, (*(*P_144038).S).Subs->data[I_144059].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_144038).S).Subs->data[I_144059].Value, Value_144040);
goto BeforeRet;
LA3: ;
Res_144075 += 1;
} LA1: ;
(*(*P_144038).S).Subs = (TY143695*) setLengthSeq(&((*(*P_144038).S).Subs)->Sup, sizeof(TY143684), (NI32)(Length_144051 + 1));
asgnRefNoCycle((void**) &(*(*P_144038).S).Subs->data[Length_144051].Key, copyString(Key_144039));
asgnRefNoCycle((void**) &(*(*P_144038).S).Subs->data[Length_144051].Value, Value_144040);
BeforeRet: ;
}
N_NIMCALL(TY143077*, Parsecomment_145397)(TY143690* P_145400) {
TY143077* Result_145401;
NI Indent_145423;
Result_145401 = 0;
switch ((*P_145400).Tok->data[(*P_145400).Idx].Kind) {
case ((NU8) 1):
case ((NU8) 0):
if (!((*P_145400).Tok->data[(NI32)((*P_145400).Idx + 1)].Kind == ((NU8) 1))) goto LA2;
(*P_145400).Idx += 1;
goto LA1;
LA2: ;
Indent_145423 = 0;
Indent_145423 = (*P_145400).Tok->data[(*P_145400).Idx].Ival;
while (1) {
switch ((*P_145400).Tok->data[(*P_145400).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_145400).Tok->data[(*P_145400).Idx].Ival < Indent_145423)) goto LA6;
goto LA4;
LA6: ;
break;
default:
break;
}
(*P_145400).Idx += 1;
} LA4: ;
LA1: ;
break;
default:
while (1) {
if (!!(((3 &(1<<(((*P_145400).Tok->data[(*P_145400).Idx].Kind)&7)))!=0))) goto LA8;
(*P_145400).Idx += 1;
} LA8: ;
break;
}
Result_145401 = NIM_NIL;
return Result_145401;
}
N_NIMCALL(TY143077*, Parsedotdot_145678)(TY143690* P_145681) {
TY143077* Result_147346;
NI Col_147347;
NimStringDesc* D_147360;
NU8 LOC4;
NIM_BOOL LOC5;
TY143077* A_147373;
TY143077* B_147395;
NimStringDesc* LOC11;
NIM_BOOL LOC12;
TY143077* A_147408;
TY143077* B_147409;
NI LOC19;
NI LOC22;
NimStringDesc* LOC25;
NIM_BOOL LOC26;
TY143077* A_147471;
TY143077* B_147493;
NimStringDesc* LOC32;
Result_147346 = 0;
Result_147346 = NIM_NIL;
Col_147347 = 0;
Col_147347 = (*P_145681).Tok->data[(*P_145681).Idx].Col;
(*P_145681).Idx += 1;
D_147360 = 0;
D_147360 = Getdirective_145270(P_145681);
if (!!(((D_147360) && (D_147360)->Sup.len == 0))) goto LA2;
Pushind_143778(P_145681, Col_147347);
LOC4 = Getdirkind_145495(D_147360);
switch (LOC4) {
case ((NU8) 8):
Result_147346 = Dirinclude_147227(P_145681);
break;
case ((NU8) 7):
Result_147346 = Dirimage_147268(P_145681);
break;
case ((NU8) 6):
Result_147346 = Dirfigure_147274(P_145681);
break;
case ((NU8) 11):
Result_147346 = Dirtitle_147280(P_145681);
break;
case ((NU8) 4):
Result_147346 = Dircontainer_147251(P_145681);
break;
case ((NU8) 5):
Result_147346 = Dircontents_147286(P_145681);
break;
case ((NU8) 10):
Result_147346 = Dirraw_147318(P_145681);
break;
case ((NU8) 3):
Result_147346 = Dircodeblock_147242(P_145681);
break;
case ((NU8) 9):
Result_147346 = Dirindex_147292(P_145681);
break;
default:
Rstmessage_143765(&(*P_145681), ((NU8) 28), D_147360);
break;
}
Popind_143801(P_145681);
goto LA1;
LA2: ;
LOC5 = Match_144762(&(*P_145681), (*P_145681).Idx, ((NimStringDesc*) &TMP195161));
if (!LOC5) goto LA6;
(*P_145681).Idx += 2;
A_147373 = 0;
A_147373 = Getreferencename_144518(P_145681, ((NimStringDesc*) &TMP195123));
if (!((*P_145681).Tok->data[(*P_145681).Idx].Kind == ((NU8) 2))) goto LA9;
(*P_145681).Idx += 1;
LA9: ;
B_147395 = 0;
B_147395 = Untileol_144550(P_145681);
LOC11 = 0;
LOC11 = Rstnodetorefname_143105(A_147373);
Setref_144078(P_145681, LOC11, B_147395);
goto LA1;
LA6: ;
LOC12 = Match_144762(&(*P_145681), (*P_145681).Idx, ((NimStringDesc*) &TMP195162));
if (!LOC12) goto LA13;
(*P_145681).Idx += 2;
A_147408 = 0;
A_147408 = Getreferencename_144518(P_145681, ((NimStringDesc*) &TMP195121));
B_147409 = 0;
if (!((*P_145681).Tok->data[(*P_145681).Idx].Kind == ((NU8) 2))) goto LA16;
(*P_145681).Idx += 1;
LA16: ;
LOC19 = nsuCmpIgnoreStyle((*P_145681).Tok->data[(*P_145681).Idx].Symbol, ((NimStringDesc*) &TMP195163));
if (!(LOC19 == 0)) goto LA20;
(*P_145681).Idx += 1;
Expect_144580(P_145681, ((NimStringDesc*) &TMP195117));
B_147409 = Untileol_144550(P_145681);
goto LA18;
LA20: ;
LOC22 = nsuCmpIgnoreStyle((*P_145681).Tok->data[(*P_145681).Idx].Symbol, ((NimStringDesc*) &TMP145490));
if (!(LOC22 == 0)) goto LA23;
(*P_145681).Idx += 1;
B_147409 = Dirimage_147268(P_145681);
goto LA18;
LA23: ;
Rstmessage_143765(&(*P_145681), ((NU8) 28), (*P_145681).Tok->data[(*P_145681).Idx].Symbol);
LA18: ;
LOC25 = 0;
LOC25 = Addnodes_143108(A_147408);
Setsub_144035(P_145681, LOC25, B_147409);
goto LA1;
LA13: ;
LOC26 = Match_144762(&(*P_145681), (*P_145681).Idx, ((NimStringDesc*) &TMP195164));
if (!LOC26) goto LA27;
(*P_145681).Idx += 2;
A_147471 = 0;
A_147471 = Getreferencename_144518(P_145681, ((NimStringDesc*) &TMP195165));
if (!((*P_145681).Tok->data[(*P_145681).Idx].Kind == ((NU8) 2))) goto LA30;
(*P_145681).Idx += 1;
LA30: ;
B_147493 = 0;
B_147493 = Untileol_144550(P_145681);
LOC32 = 0;
LOC32 = Rstnodetorefname_143105(A_147471);
Setref_144078(P_145681, LOC32, B_147493);
goto LA1;
LA27: ;
Result_147346 = Parsecomment_145397(P_145681);
LA1: ;
return Result_147346;
}
N_NIMCALL(TY143077*, Parseenumlist_146833)(TY143690* P_146836) {
TY143077* Result_146837;
NI W_146848;
NIM_BOOL LOC3;
NI Col_146865;
NI J_146878;
NIM_BOOL LOC10;
TY143077* Item_146881;
NIM_BOOL LOC16;
NIM_BOOL LOC17;
Result_146837 = 0;
Result_146837 = NIM_NIL;
W_146848 = 0;
W_146848 = 0;
while (1) {
if (!(W_146848 <= 2)) goto LA1;
LOC3 = Match_144762(&(*P_146836), (*P_146836).Idx, Wildcards_146838[(W_146848)-0]);
if (!LOC3) goto LA4;
goto LA1;
LA4: ;
W_146848 += 1;
} LA1: ;
if (!(W_146848 <= 2)) goto LA7;
Col_146865 = 0;
Col_146865 = (*P_146836).Tok->data[(*P_146836).Idx].Col;
Result_146837 = Newrstnode_143094(((NU8) 7));
(*P_146836).Idx += (NI32)(Wildpos_146843[(W_146848)-0] + 3);
J_146878 = 0;
J_146878 = Tokenafternewline_145784(&(*P_146836));
LOC10 = ((*P_146836).Tok->data[J_146878].Col == (*P_146836).Tok->data[(*P_146836).Idx].Col);
if (LOC10) goto LA11;
LOC10 = Match_144762(&(*P_146836), J_146878, Wildcards_146838[(W_146848)-0]);
LA11: ;
if (!LOC10) goto LA12;
Pushind_143778(P_146836, (*P_146836).Tok->data[(*P_146836).Idx].Col);
while (1) {
Item_146881 = 0;
Item_146881 = Newrstnode_143094(((NU8) 8));
Parsesection_145508(P_146836, Item_146881);
Addson_143101(Result_146837, Item_146881);
LOC17 = ((*P_146836).Tok->data[(*P_146836).Idx].Kind == ((NU8) 1));
if (!(LOC17)) goto LA18;
LOC17 = ((*P_146836).Tok->data[(*P_146836).Idx].Ival == Col_146865);
LA18: ;
LOC16 = LOC17;
if (!(LOC16)) goto LA19;
LOC16 = Match_144762(&(*P_146836), (NI32)((*P_146836).Idx + 1), Wildcards_146838[(W_146848)-0]);
LA19: ;
if (!LOC16) goto LA20;
(*P_146836).Idx += (NI32)(Wildpos_146843[(W_146848)-0] + 4);
goto LA15;
LA20: ;
goto LA14;
LA15: ;
} LA14: ;
Popind_143801(P_146836);
goto LA9;
LA12: ;
(*P_146836).Idx -= (NI32)(Wildpos_146843[(W_146848)-0] + 3);
Result_146837 = NIM_NIL;
LA9: ;
LA7: ;
return Result_146837;
}
N_NIMCALL(TY143077*, Parsedefinitionlist_146739)(TY143690* P_146742) {
TY143077* Result_146743;
NI J_146744;
NI LOC1;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NI LOC8;
NI Col_146758;
TY143077* A_146759;
NIM_BOOL LOC14;
NIM_BOOL LOC15;
NIM_BOOL LOC16;
NI LOC18;
TY143077* B_146783;
TY143077* C_146784;
NIM_BOOL LOC24;
NI LOC28;
NIM_BOOL LOC30;
NIM_BOOL LOC31;
NIM_BOOL LOC32;
NIM_BOOL LOC33;
NI LOC41;
Result_146743 = 0;
Result_146743 = NIM_NIL;
J_146744 = 0;
LOC1 = Tokenafternewline_145784(&(*P_146742));
J_146744 = (NI32)(LOC1 - 1);
LOC5 = (1 <= J_146744);
if (!(LOC5)) goto LA6;
LOC5 = ((*P_146742).Tok->data[J_146744].Kind == ((NU8) 1));
LA6: ;
LOC4 = LOC5;
if (!(LOC4)) goto LA7;
LOC8 = Currind_143774(&(*P_146742));
LOC4 = (LOC8 < (*P_146742).Tok->data[J_146744].Ival);
LA7: ;
LOC3 = LOC4;
if (!(LOC3)) goto LA9;
LOC3 = !(eqStrings((*P_146742).Tok->data[(NI32)(J_146744 - 1)].Symbol, ((NimStringDesc*) &TMP195117)));
LA9: ;
if (!LOC3) goto LA10;
Col_146758 = 0;
Col_146758 = (*P_146742).Tok->data[(*P_146742).Idx].Col;
Result_146743 = Newrstnode_143094(((NU8) 9));
while (1) {
J_146744 = (*P_146742).Idx;
A_146759 = 0;
A_146759 = Newrstnode_143094(((NU8) 11));
Parseline_145502(P_146742, A_146759);
LOC16 = ((*P_146742).Tok->data[(*P_146742).Idx].Kind == ((NU8) 1));
if (!(LOC16)) goto LA17;
LOC18 = Currind_143774(&(*P_146742));
LOC16 = (LOC18 < (*P_146742).Tok->data[(*P_146742).Idx].Ival);
LA17: ;
LOC15 = LOC16;
if (!(LOC15)) goto LA19;
LOC15 = !(eqStrings((*P_146742).Tok->data[(NI32)((*P_146742).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195117)));
LA19: ;
LOC14 = LOC15;
if (!(LOC14)) goto LA20;
LOC14 = !(((3 &(1<<(((*P_146742).Tok->data[(NI32)((*P_146742).Idx + 1)].Kind)&7)))!=0));
LA20: ;
if (!LOC14) goto LA21;
Pushind_143778(P_146742, (*P_146742).Tok->data[(*P_146742).Idx].Ival);
B_146783 = 0;
B_146783 = Newrstnode_143094(((NU8) 12));
Parsesection_145508(P_146742, B_146783);
C_146784 = 0;
C_146784 = Newrstnode_143094(((NU8) 10));
Addson_143101(C_146784, A_146759);
Addson_143101(C_146784, B_146783);
Addson_143101(Result_146743, C_146784);
Popind_143801(P_146742);
goto LA13;
LA21: ;
(*P_146742).Idx = J_146744;
goto LA12;
LA13: ;
LOC24 = ((*P_146742).Tok->data[(*P_146742).Idx].Kind == ((NU8) 1));
if (!(LOC24)) goto LA25;
LOC24 = ((*P_146742).Tok->data[(*P_146742).Idx].Ival == Col_146758);
LA25: ;
if (!LOC24) goto LA26;
(*P_146742).Idx += 1;
LOC28 = Tokenafternewline_145784(&(*P_146742));
J_146744 = (NI32)(LOC28 - 1);
LOC33 = (1 <= J_146744);
if (!(LOC33)) goto LA34;
LOC33 = ((*P_146742).Tok->data[J_146744].Kind == ((NU8) 1));
LA34: ;
LOC32 = LOC33;
if (!(LOC32)) goto LA35;
LOC32 = (Col_146758 < (*P_146742).Tok->data[J_146744].Ival);
LA35: ;
LOC31 = LOC32;
if (!(LOC31)) goto LA36;
LOC31 = !(eqStrings((*P_146742).Tok->data[(NI32)(J_146744 - 1)].Symbol, ((NimStringDesc*) &TMP195117)));
LA36: ;
LOC30 = LOC31;
if (!(LOC30)) goto LA37;
LOC30 = !(((*P_146742).Tok->data[(NI32)(J_146744 + 1)].Kind == ((NU8) 1)));
LA37: ;
if (!LOC30) goto LA38;
goto LA29;
LA38: ;
goto LA12;
LA29: ;
LA26: ;
} LA12: ;
LOC41 = Rsonslen_143091(Result_146743);
if (!(LOC41 == 0)) goto LA42;
Result_146743 = NIM_NIL;
LA42: ;
LA10: ;
return Result_146743;
}
N_NIMCALL(TY143077*, Parsetransition_146426)(TY143690* P_146429) {
TY143077* Result_146430;
Result_146430 = 0;
Result_146430 = Newrstnode_143094(((NU8) 3));
(*P_146429).Idx += 1;
if (!((*P_146429).Tok->data[(*P_146429).Idx].Kind == ((NU8) 1))) goto LA2;
(*P_146429).Idx += 1;
LA2: ;
if (!((*P_146429).Tok->data[(*P_146429).Idx].Kind == ((NU8) 1))) goto LA5;
(*P_146429).Idx += 1;
LA5: ;
return Result_146430;
}
N_NIMCALL(NI, Getlevel_145762)(NI* Map_145765, NI* Lvl_145767, NIM_CHAR C_145768) {
NI Result_145769;
Result_145769 = 0;
if (!(Map_145765[(((NU8)(C_145768)))-0] == 0)) goto LA2;
(*Lvl_145767) += 1;
Map_145765[(((NU8)(C_145768)))-0] = (*Lvl_145767);
LA2: ;
Result_145769 = Map_145765[(((NU8)(C_145768)))-0];
return Result_145769;
}
N_NIMCALL(TY143077*, Parseheadline_146005)(TY143690* P_146008) {
TY143077* Result_146009;
NIM_CHAR C_146028;
Result_146009 = 0;
Result_146009 = Newrstnode_143094(((NU8) 1));
Parseline_145502(P_146008, Result_146009);
C_146028 = 0;
C_146028 = (*P_146008).Tok->data[(NI32)((*P_146008).Idx + 1)].Symbol->data[0];
(*P_146008).Idx += 2;
(*Result_146009).Level = Getlevel_145762((*(*P_146008).S).Underlinetolevel, &(*(*P_146008).S).Ulevel, C_146028);
return Result_146009;
}
N_NIMCALL(TY143077*, Parseoverline_146485)(TY143690* P_146488) {
TY143077* Result_146489;
NIM_CHAR C_146490;
NI LOC6;
TY143077* LOC9;
Result_146489 = 0;
C_146490 = 0;
C_146490 = (*P_146488).Tok->data[(*P_146488).Idx].Symbol->data[0];
(*P_146488).Idx += 2;
Result_146489 = Newrstnode_143094(((NU8) 2));
while (1) {
Parseline_145502(P_146488, Result_146489);
if (!((*P_146488).Tok->data[(*P_146488).Idx].Kind == ((NU8) 1))) goto LA3;
(*P_146488).Idx += 1;
LOC6 = Currind_143774(&(*P_146488));
if (!(LOC6 < (*P_146488).Tok->data[(NI32)((*P_146488).Idx - 1)].Ival)) goto LA7;
LOC9 = 0;
LOC9 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195138));
Addson_143101(Result_146489, LOC9);
goto LA5;
LA7: ;
goto LA1;
LA5: ;
goto LA2;
LA3: ;
goto LA1;
LA2: ;
} LA1: ;
(*Result_146489).Level = Getlevel_145762((*(*P_146488).S).Overlinetolevel, &(*(*P_146488).S).Olevel, C_146490);
if (!((*P_146488).Tok->data[(*P_146488).Idx].Kind == ((NU8) 4))) goto LA11;
(*P_146488).Idx += 1;
if (!((*P_146488).Tok->data[(*P_146488).Idx].Kind == ((NU8) 1))) goto LA14;
(*P_146488).Idx += 1;
LA14: ;
LA11: ;
return Result_146489;
}
N_NIMCALL(NI, Tokend_146045)(TY143690* P_146047) {
NI Result_146048;
Result_146048 = 0;
Result_146048 = (NI32)((NI32)((*P_146047).Tok->data[(*P_146047).Idx].Col + (*P_146047).Tok->data[(*P_146047).Idx].Symbol->Sup.len) - 1);
return Result_146048;
}
N_NIMCALL(void, Getcolumns_146051)(TY143690* P_146054, TY73281** Cols_146056) {
NI L_146057;
L_146057 = 0;
L_146057 = 0;
while (1) {
L_146057 += 1;
(*Cols_146056) = (TY73281*) setLengthSeq(&((*Cols_146056))->Sup, sizeof(NI), L_146057);
(*Cols_146056)->data[(NI32)(L_146057 - 1)] = Tokend_146045(&(*P_146054));
(*P_146054).Idx += 1;
if (!!(((*P_146054).Tok->data[(*P_146054).Idx].Kind == ((NU8) 2)))) goto LA3;
goto LA1;
LA3: ;
(*P_146054).Idx += 1;
if (!!(((*P_146054).Tok->data[(*P_146054).Idx].Kind == ((NU8) 4)))) goto LA6;
goto LA1;
LA6: ;
} LA1: ;
if (!((*P_146054).Tok->data[(*P_146054).Idx].Kind == ((NU8) 1))) goto LA9;
(*P_146054).Idx += 1;
LA9: ;
(*Cols_146056)->data[(NI32)(L_146057 - 1)] = 32000;
}
N_NIMCALL(TY143077*, Parsesimpletable_146159)(TY143690* P_146162) {
TY143077* Result_146163;
TY73281* Cols_146164;
TY35221* Row_146166;
NI I_146167;
NI Last_146168;
NI Line_146169;
NIM_CHAR C_146170;
TY143690 Q_146171;
TY143077* A_146172;
TY143077* B_146173;
NI J_146268;
NI HEX3Atmp_146400;
NI LOC11;
NI Res_146402;
NI J_146285;
NI HEX3Atmp_146406;
NI Res_146408;
NI LOC20;
NI LOC30;
NI J_146387;
NI HEX3Atmp_146413;
NI Res_146415;
NI J_146395;
NI HEX3Atmp_146420;
NI Res_146422;
TY143077* LOC38;
Result_146163 = 0;
Cols_146164 = 0;
Row_146166 = 0;
I_146167 = 0;
Last_146168 = 0;
Line_146169 = 0;
C_146170 = 0;
memset((void*)&Q_146171, 0, sizeof(Q_146171));
Q_146171.Sup.m_type = NTI143690;
A_146172 = 0;
B_146173 = 0;
Result_146163 = Newrstnode_143094(((NU8) 29));
Cols_146164 = (TY73281*) newSeq(NTI73281, 0);
Row_146166 = (TY35221*) newSeq(NTI35221, 0);
A_146172 = NIM_NIL;
C_146170 = (*P_146162).Tok->data[(*P_146162).Idx].Symbol->data[0];
while (1) {
if (!((*P_146162).Tok->data[(*P_146162).Idx].Kind == ((NU8) 4))) goto LA3;
Last_146168 = Tokenafternewline_145784(&(*P_146162));
if (!((3 &(1<<(((*P_146162).Tok->data[Last_146168].Kind)&7)))!=0)) goto LA6;
(*P_146162).Idx = Last_146168;
goto LA1;
LA6: ;
Getcolumns_146051(P_146162, &Cols_146164);
Row_146166 = (TY35221*) setLengthSeq(&(Row_146166)->Sup, sizeof(NimStringDesc*), Cols_146164->Sup.len);
if (!!((A_146172 == NIM_NIL))) goto LA9;
J_146268 = 0;
HEX3Atmp_146400 = 0;
LOC11 = Rsonslen_143091(A_146172);
HEX3Atmp_146400 = (NI32)(LOC11 - 1);
Res_146402 = 0;
Res_146402 = 0;
while (1) {
if (!(Res_146402 <= HEX3Atmp_146400)) goto LA12;
J_146268 = Res_146402;
(*(*A_146172).Sons->data[J_146268]).Kind = ((NU8) 32);
Res_146402 += 1;
} LA12: ;
LA9: ;
LA3: ;
if (!((*P_146162).Tok->data[(*P_146162).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
J_146285 = 0;
HEX3Atmp_146406 = 0;
HEX3Atmp_146406 = (Row_146166->Sup.len-1);
Res_146408 = 0;
Res_146408 = 0;
while (1) {
if (!(Res_146408 <= HEX3Atmp_146406)) goto LA16;
J_146285 = Res_146408;
asgnRefNoCycle((void**) &Row_146166->data[J_146285], copyString(((NimStringDesc*) &TMP145483)));
Res_146408 += 1;
} LA16: ;
Line_146169 = (*P_146162).Tok->data[(*P_146162).Idx].Line;
while (1) {
I_146167 = 0;
while (1) {
if (!!(((3 &(1<<(((*P_146162).Tok->data[(*P_146162).Idx].Kind)&7)))!=0))) goto LA18;
LOC20 = Tokend_146045(&(*P_146162));
if (!(LOC20 <= Cols_146164->data[I_146167])) goto LA21;
Row_146166->data[I_146167] = resizeString(Row_146166->data[I_146167], (*P_146162).Tok->data[(*P_146162).Idx].Symbol->Sup.len + 0);
appendString(Row_146166->data[I_146167], (*P_146162).Tok->data[(*P_146162).Idx].Symbol);
(*P_146162).Idx += 1;
goto LA19;
LA21: ;
if (!((*P_146162).Tok->data[(*P_146162).Idx].Kind == ((NU8) 2))) goto LA24;
(*P_146162).Idx += 1;
LA24: ;
I_146167 += 1;
LA19: ;
} LA18: ;
if (!((*P_146162).Tok->data[(*P_146162).Idx].Kind == ((NU8) 1))) goto LA27;
(*P_146162).Idx += 1;
LA27: ;
LOC30 = Tokend_146045(&(*P_146162));
if (!(LOC30 <= Cols_146164->data[0])) goto LA31;
goto LA17;
LA31: ;
if (!((17 &(1<<(((*P_146162).Tok->data[(*P_146162).Idx].Kind)&7)))!=0)) goto LA34;
goto LA17;
LA34: ;
J_146387 = 0;
HEX3Atmp_146413 = 0;
HEX3Atmp_146413 = (Row_146166->Sup.len-1);
Res_146415 = 0;
Res_146415 = 1;
while (1) {
if (!(Res_146415 <= HEX3Atmp_146413)) goto LA36;
J_146387 = Res_146415;
Row_146166->data[J_146387] = addChar(Row_146166->data[J_146387], 10);
Res_146415 += 1;
} LA36: ;
} LA17: ;
A_146172 = Newrstnode_143094(((NU8) 31));
J_146395 = 0;
HEX3Atmp_146420 = 0;
HEX3Atmp_146420 = (Row_146166->Sup.len-1);
Res_146422 = 0;
Res_146422 = 0;
while (1) {
if (!(Res_146422 <= HEX3Atmp_146420)) goto LA37;
J_146395 = Res_146422;
Initparser_143839(&Q_146171, (*P_146162).S);
Q_146171.Col = Cols_146164->data[J_146395];
Q_146171.Line = (NI32)(Line_146169 - 1);
Q_146171.Filename = copyString((*P_146162).Filename);
Gettokens_143438(Row_146166->data[J_146395], NIM_FALSE, &Q_146171.Tok);
B_146173 = Newrstnode_143094(((NU8) 33));
LOC38 = 0;
LOC38 = Parsedoc_146155(&Q_146171);
Addson_143101(B_146173, LOC38);
Addson_143101(A_146172, B_146173);
Res_146422 += 1;
} LA37: ;
Addson_143101(Result_146163, A_146172);
} LA1: ;
return Result_146163;
}
N_NIMCALL(TY143077*, Parseoptionlist_146633)(TY143690* P_146636) {
TY143077* Result_146637;
NIM_BOOL LOC3;
TY143077* A_146638;
TY143077* B_146639;
TY143077* C_146640;
NIM_BOOL LOC7;
NIM_BOOL LOC12;
TY143077* LOC16;
NI J_146702;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NI LOC22;
Result_146637 = 0;
Result_146637 = Newrstnode_143094(((NU8) 17));
while (1) {
LOC3 = Isoptionlist_145858(&(*P_146636));
if (!LOC3) goto LA4;
A_146638 = 0;
A_146638 = Newrstnode_143094(((NU8) 19));
B_146639 = 0;
B_146639 = Newrstnode_143094(((NU8) 23));
C_146640 = 0;
C_146640 = Newrstnode_143094(((NU8) 18));
LOC7 = Match_144762(&(*P_146636), (*P_146636).Idx, ((NimStringDesc*) &TMP195129));
if (!LOC7) goto LA8;
(*P_146636).Idx += 1;
LA8: ;
while (1) {
if (!!(((3 &(1<<(((*P_146636).Tok->data[(*P_146636).Idx].Kind)&7)))!=0))) goto LA10;
LOC12 = ((*P_146636).Tok->data[(*P_146636).Idx].Kind == ((NU8) 2));
if (!(LOC12)) goto LA13;
LOC12 = (1 < (*P_146636).Tok->data[(*P_146636).Idx].Symbol->Sup.len);
LA13: ;
if (!LOC12) goto LA14;
(*P_146636).Idx += 1;
goto LA10;
LA14: ;
LOC16 = 0;
LOC16 = Newleaf_144513(P_146636);
Addson_143101(A_146638, LOC16);
(*P_146636).Idx += 1;
} LA10: ;
J_146702 = 0;
J_146702 = Tokenafternewline_145784(&(*P_146636));
LOC19 = (0 < J_146702);
if (!(LOC19)) goto LA20;
LOC19 = ((*P_146636).Tok->data[(NI32)(J_146702 - 1)].Kind == ((NU8) 1));
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA21;
LOC22 = Currind_143774(&(*P_146636));
LOC18 = (LOC22 < (*P_146636).Tok->data[(NI32)(J_146702 - 1)].Ival);
LA21: ;
if (!LOC18) goto LA23;
Pushind_143778(P_146636, (*P_146636).Tok->data[(NI32)(J_146702 - 1)].Ival);
Parsesection_145508(P_146636, B_146639);
Popind_143801(P_146636);
goto LA17;
LA23: ;
Parseline_145502(P_146636, B_146639);
LA17: ;
if (!((*P_146636).Tok->data[(*P_146636).Idx].Kind == ((NU8) 1))) goto LA26;
(*P_146636).Idx += 1;
LA26: ;
Addson_143101(C_146640, A_146638);
Addson_143101(C_146640, B_146639);
Addson_143101(Result_146637, C_146640);
goto LA2;
LA4: ;
goto LA1;
LA2: ;
} LA1: ;
return Result_146637;
}
N_NIMCALL(void, Addsonifnotnil_143598)(TY143077* Father_143600, TY143077* Son_143601) {
if (!!((Son_143601 == NIM_NIL))) goto LA2;
Addson_143101(Father_143600, Son_143601);
LA2: ;
}
N_NIMCALL(void, Parseparagraph_145936)(TY143690* P_145939, TY143077* Result_145940) {
NI LOC5;
NU8 LOC8;
TY143077* LOC9;
TY143077* LOC10;
NIM_BOOL LOC12;
NIM_BOOL LOC13;
NI LOC16;
TY143077* LOC19;
TY143077* LOC20;
while (1) {
switch ((*P_145939).Tok->data[(*P_145939).Idx].Kind) {
case ((NU8) 1):
if (!((*P_145939).Tok->data[(NI32)((*P_145939).Idx + 1)].Kind == ((NU8) 1))) goto LA3;
(*P_145939).Idx += 1;
goto LA1;
goto LA2;
LA3: ;
LOC5 = Currind_143774(&(*P_145939));
if (!((*P_145939).Tok->data[(*P_145939).Idx].Ival == LOC5)) goto LA6;
(*P_145939).Idx += 1;
LOC8 = Whichsection_145862(&(*P_145939));
switch (LOC8) {
case ((NU8) 4):
case ((NU8) 62):
case ((NU8) 1):
case ((NU8) 2):
case ((NU8) 40):
LOC9 = 0;
LOC9 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195138));
Addson_143101(Result_145940, LOC9);
break;
case ((NU8) 26):
LOC10 = 0;
LOC10 = Parselineblock_145875(P_145939);
Addsonifnotnil_143598(Result_145940, LOC10);
break;
default:
goto LA1;
break;
}
goto LA2;
LA6: ;
goto LA1;
LA2: ;
break;
case ((NU8) 5):
LOC13 = eqStrings((*P_145939).Tok->data[(*P_145939).Idx].Symbol, ((NimStringDesc*) &TMP195117));
if (!(LOC13)) goto LA14;
LOC13 = ((*P_145939).Tok->data[(NI32)((*P_145939).Idx + 1)].Kind == ((NU8) 1));
LA14: ;
LOC12 = LOC13;
if (!(LOC12)) goto LA15;
LOC16 = Currind_143774(&(*P_145939));
LOC12 = (LOC16 < (*P_145939).Tok->data[(NI32)((*P_145939).Idx + 1)].Ival);
LA15: ;
if (!LOC12) goto LA17;
LOC19 = 0;
LOC19 = Newrstnode_143097(((NU8) 62), ((NimStringDesc*) &TMP195123));
Addson_143101(Result_145940, LOC19);
(*P_145939).Idx += 1;
LOC20 = 0;
LOC20 = Parseliteralblock_145682(P_145939);
Addson_143101(Result_145940, LOC20);
goto LA1;
goto LA11;
LA17: ;
Parseinline_145188(P_145939, Result_145940);
LA11: ;
break;
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
Parseinline_145188(P_145939, Result_145940);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(NU8, Sonkind_146919)(TY143077* Father_146921, NI I_146922) {
NU8 Result_146923;
NI LOC2;
Result_146923 = 0;
Result_146923 = ((NU8) 62);
LOC2 = Rsonslen_143091(Father_146921);
if (!(I_146922 < LOC2)) goto LA3;
Result_146923 = (*(*Father_146921).Sons->data[I_146922]).Kind;
LA3: ;
return Result_146923;
}
N_NIMCALL(void, Parsesection_145508)(TY143690* P_145511, TY143077* Result_145512) {
NIM_BOOL Leave_146931;
NI LOC4;
NI LOC7;
TY143077* A_146959;
TY143077* A_146969;
NU8 K_146970;
NIM_BOOL LOC17;
NIM_BOOL LOC22;
NU8 LOC23;
NU8 LOC25;
while (1) {
Leave_146931 = 0;
Leave_146931 = NIM_FALSE;
while (1) {
if (!((*P_145511).Tok->data[(*P_145511).Idx].Kind == ((NU8) 1))) goto LA2;
LOC4 = Currind_143774(&(*P_145511));
if (!(LOC4 == (*P_145511).Tok->data[(*P_145511).Idx].Ival)) goto LA5;
(*P_145511).Idx += 1;
goto LA3;
LA5: ;
LOC7 = Currind_143774(&(*P_145511));
if (!(LOC7 < (*P_145511).Tok->data[(*P_145511).Idx].Ival)) goto LA8;
Pushind_143778(P_145511, (*P_145511).Tok->data[(*P_145511).Idx].Ival);
A_146959 = 0;
A_146959 = Newrstnode_143094(((NU8) 28));
Parsesection_145508(P_145511, A_146959);
Addson_143101(Result_145512, A_146959);
Popind_143801(P_145511);
goto LA3;
LA8: ;
Leave_146931 = NIM_TRUE;
goto LA2;
LA3: ;
} LA2: ;
if (!Leave_146931) goto LA11;
goto LA1;
LA11: ;
if (!((*P_145511).Tok->data[(*P_145511).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
A_146969 = 0;
A_146969 = NIM_NIL;
K_146970 = 0;
K_146970 = Whichsection_145862(&(*P_145511));
switch (K_146970) {
case ((NU8) 24):
(*P_145511).Idx += 1;
A_146969 = Parseliteralblock_145682(P_145511);
break;
case ((NU8) 5):
A_146969 = Parsebulletlist_146571(P_145511);
break;
case ((NU8) 26):
A_146969 = Parselineblock_145875(P_145511);
break;
case ((NU8) 40):
A_146969 = Parsedotdot_145678(P_145511);
break;
case ((NU8) 7):
A_146969 = Parseenumlist_146833(P_145511);
break;
case ((NU8) 62):
Rstmessage_143770(&(*P_145511), ((NU8) 186));
break;
case ((NU8) 4):
break;
case ((NU8) 9):
A_146969 = Parsedefinitionlist_146739(P_145511);
break;
case ((NU8) 13):
(*P_145511).Idx -= 1;
A_146969 = Parsefields_145554(P_145511);
break;
case ((NU8) 3):
A_146969 = Parsetransition_146426(P_145511);
break;
case ((NU8) 1):
A_146969 = Parseheadline_146005(P_145511);
break;
case ((NU8) 2):
A_146969 = Parseoverline_146485(P_145511);
break;
case ((NU8) 29):
A_146969 = Parsesimpletable_146159(P_145511);
break;
case ((NU8) 17):
A_146969 = Parseoptionlist_146633(P_145511);
break;
default:
Internalerror_43571(((NimStringDesc*) &TMP195166));
break;
}
LOC17 = (A_146969 == NIM_NIL);
if (!(LOC17)) goto LA18;
LOC17 = !((K_146970 == ((NU8) 40)));
LA18: ;
if (!LOC17) goto LA19;
A_146969 = Newrstnode_143094(((NU8) 4));
Parseparagraph_145936(P_145511, A_146969);
LA19: ;
Addsonifnotnil_143598(Result_145512, A_146969);
} LA1: ;
LOC23 = Sonkind_146919(Result_145512, 0);
LOC22 = (LOC23 == ((NU8) 4));
if (!(LOC22)) goto LA24;
LOC25 = Sonkind_146919(Result_145512, 1);
LOC22 = !((LOC25 == ((NU8) 4)));
LA24: ;
if (!LOC22) goto LA26;
(*(*Result_145512).Sons->data[0]).Kind = ((NU8) 0);
LA26: ;
}
N_NIMCALL(TY143077*, Parsesectionwrapper_147035)(TY143690* P_147038) {
TY143077* Result_147039;
NIM_BOOL LOC2;
NI LOC4;
Result_147039 = 0;
Result_147039 = Newrstnode_143094(((NU8) 0));
Parsesection_145508(P_147038, Result_147039);
while (1) {
LOC2 = ((*Result_147039).Kind == ((NU8) 0));
if (!(LOC2)) goto LA3;
LOC4 = Rsonslen_143091(Result_147039);
LOC2 = (LOC4 == 1);
LA3: ;
if (!LOC2) goto LA1;
Result_147039 = (*Result_147039).Sons->data[0];
} LA1: ;
return Result_147039;
}
N_NIMCALL(TY143077*, Parsedoc_146155)(TY143690* P_146158) {
TY143077* Result_147056;
Result_147056 = 0;
Result_147056 = Parsesectionwrapper_147035(P_146158);
if (!!(((*P_146158).Tok->data[(*P_146158).Idx].Kind == ((NU8) 0)))) goto LA2;
Rstmessage_143770(&(*P_146158), ((NU8) 185));
LA2: ;
return Result_147056;
}
N_NIMCALL(TY143077*, Rstparse_143082)(NimStringDesc* Text_143084, NIM_BOOL Skippounds_143085, NimStringDesc* Filename_143086, NI Line_143087, NI Column_143088, NIM_BOOL* Hastoc_143090) {
TY143077* Result_147551;
TY143690 P_147552;
TY143686* LOC4;
TY143077* LOC5;
Result_147551 = 0;
memset((void*)&P_147552, 0, sizeof(P_147552));
P_147552.Sup.m_type = NTI143690;
if (!Text_143084 == 0) goto LA2;
Rawmessage_43553(((NU8) 2), Filename_143086);
LA2: ;
LOC4 = 0;
LOC4 = Newsharedstate_143710();
Initparser_143839(&P_147552, LOC4);
P_147552.Filename = copyString(Filename_143086);
P_147552.Line = Line_143087;
P_147552.Col = Column_143088;
Gettokens_143438(Text_143084, Skippounds_143085, &P_147552.Tok);
LOC5 = 0;
LOC5 = Parsedoc_146155(&P_147552);
Result_147551 = Resolvesubs_147494(&P_147552, LOC5);
(*Hastoc_143090) = P_147552.Hastoc;
return Result_147551;
}
N_NIMCALL(NIM_BOOL, Matcheshyperlink_144250)(TY143077* H_144252, NimStringDesc* Filename_144253) {
NIM_BOOL Result_144254;
NimStringDesc* S_144275;
NIM_BOOL LOC7;
Result_144254 = 0;
if (!((*H_144252).Kind == ((NU8) 0))) goto LA2;
Result_144254 = Matcheshyperlink_144250((*H_144252).Sons->data[0], Filename_144253);
goto LA1;
LA2: ;
if (!((*H_144252).Kind == ((NU8) 38))) goto LA4;
S_144275 = 0;
S_144275 = Addnodes_143108((*H_144252).Sons->data[1]);
LOC7 = nsuStartsWith(S_144275, Filename_144253);
if (!(LOC7)) goto LA8;
LOC7 = ((NU8)(S_144275->data[(NI32)(Filename_144253->Sup.len + 0)]) == (NU8)(35));
LA8: ;
if (!LOC7) goto LA9;
Result_144254 = NIM_TRUE;
goto LA6;
LA9: ;
Result_144254 = NIM_FALSE;
LA6: ;
goto LA1;
LA4: ;
Result_144254 = NIM_FALSE;
LA1: ;
return Result_144254;
}
N_NIMCALL(void, Clearindex_143126)(TY143077* Index_143128, NimStringDesc* Filename_143129) {
NI K_144284;
NI Items_144285;
NI Lastitem_144286;
TY143077* Val_144287;
NI I_144304;
NI HEX3Atmp_144431;
NI LOC1;
NI Res_144433;
NI J_144339;
NI HEX3Atmp_144425;
NI LOC9;
NI Res_144427;
NIM_BOOL LOC14;
NIM_BOOL LOC22;
NI I_144386;
NI HEX3Atmp_144441;
NI LOC25;
NI Res_144443;
K_144284 = 0;
Items_144285 = 0;
Lastitem_144286 = 0;
Val_144287 = 0;
I_144304 = 0;
HEX3Atmp_144431 = 0;
LOC1 = Rsonslen_143091(Index_143128);
HEX3Atmp_144431 = (NI32)(LOC1 - 1);
Res_144433 = 0;
Res_144433 = 0;
while (1) {
if (!(Res_144433 <= HEX3Atmp_144431)) goto LA2;
I_144304 = Res_144433;
Val_144287 = (*(*(*Index_143128).Sons->data[I_144304]).Sons->data[1]).Sons->data[0];
if (!((*Val_144287).Kind == ((NU8) 0))) goto LA4;
Val_144287 = (*Val_144287).Sons->data[0];
LA4: ;
if (!((*Val_144287).Kind == ((NU8) 5))) goto LA7;
Items_144285 = Rsonslen_143091(Val_144287);
Lastitem_144286 = -1;
J_144339 = 0;
HEX3Atmp_144425 = 0;
LOC9 = Rsonslen_143091(Val_144287);
HEX3Atmp_144425 = (NI32)(LOC9 - 1);
Res_144427 = 0;
Res_144427 = 0;
while (1) {
if (!(Res_144427 <= HEX3Atmp_144425)) goto LA10;
J_144339 = Res_144427;
if (!((*Val_144287).Sons->data[J_144339] == NIM_NIL)) goto LA12;
Items_144285 -= 1;
goto LA11;
LA12: ;
LOC14 = Matcheshyperlink_144250((*(*Val_144287).Sons->data[J_144339]).Sons->data[0], Filename_143129);
if (!LOC14) goto LA15;
asgnRefNoCycle((void**) &(*Val_144287).Sons->data[J_144339], NIM_NIL);
Items_144285 -= 1;
goto LA11;
LA15: ;
Lastitem_144286 = J_144339;
LA11: ;
Res_144427 += 1;
} LA10: ;
if (!(Items_144285 == 1)) goto LA18;
asgnRefNoCycle((void**) &(*(*(*Index_143128).Sons->data[I_144304]).Sons->data[1]).Sons->data[0], (*(*Val_144287).Sons->data[Lastitem_144286]).Sons->data[0]);
goto LA17;
LA18: ;
if (!(Items_144285 == 0)) goto LA20;
asgnRefNoCycle((void**) &(*Index_143128).Sons->data[I_144304], NIM_NIL);
goto LA17;
LA20: ;
LA17: ;
goto LA6;
LA7: ;
LOC22 = Matcheshyperlink_144250(Val_144287, Filename_143129);
if (!LOC22) goto LA23;
asgnRefNoCycle((void**) &(*Index_143128).Sons->data[I_144304], NIM_NIL);
goto LA6;
LA23: ;
LA6: ;
Res_144433 += 1;
} LA2: ;
K_144284 = 0;
I_144386 = 0;
HEX3Atmp_144441 = 0;
LOC25 = Rsonslen_143091(Index_143128);
HEX3Atmp_144441 = (NI32)(LOC25 - 1);
Res_144443 = 0;
Res_144443 = 0;
while (1) {
if (!(Res_144443 <= HEX3Atmp_144441)) goto LA26;
I_144386 = Res_144443;
if (!!(((*Index_143128).Sons->data[I_144386] == NIM_NIL))) goto LA28;
if (!!((K_144284 == I_144386))) goto LA31;
asgnRefNoCycle((void**) &(*Index_143128).Sons->data[K_144284], (*Index_143128).Sons->data[I_144386]);
LA31: ;
K_144284 += 1;
LA28: ;
Res_144443 += 1;
} LA26: ;
(*Index_143128).Sons = (TY143075*) setLengthSeq(&((*Index_143128).Sons)->Sup, sizeof(TY143077*), K_144284);
}
N_NIMCALL(TY143077*, Lastson_143667)(TY143077* N_143669) {
TY143077* Result_143670;
Result_143670 = 0;
Result_143670 = (*N_143669).Sons->data[(NI32)((*N_143669).Sons->Sup.len - 1)];
return Result_143670;
}
N_NIMCALL(NimStringDesc*, Getargument_143115)(TY143077* N_143117) {
NimStringDesc* Result_145666;
Result_145666 = 0;
if (!((*N_143117).Sons->data[0] == NIM_NIL)) goto LA2;
Result_145666 = copyString(((NimStringDesc*) &TMP145483));
goto LA1;
LA2: ;
Result_145666 = Addnodes_143108((*N_143117).Sons->data[0]);
LA1: ;
return Result_145666;
}
N_NIMCALL(NIM_BOOL, Eqrstnodes_144211)(TY143077* A_144213, TY143077* B_144214) {
NIM_BOOL Result_144215;
NI LOC8;
NI LOC9;
NI I_144243;
NI HEX3Atmp_144245;
NI LOC12;
NI Res_144247;
NIM_BOOL LOC15;
Result_144215 = 0;
if (!!(((*A_144213).Kind == (*B_144214).Kind))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((*A_144213).Kind == ((NU8) 62))) goto LA5;
Result_144215 = eqStrings((*A_144213).Text, (*B_144214).Text);
goto LA4;
LA5: ;
LOC8 = Rsonslen_143091(A_144213);
LOC9 = Rsonslen_143091(B_144214);
if (!!((LOC8 == LOC9))) goto LA10;
goto BeforeRet;
LA10: ;
I_144243 = 0;
HEX3Atmp_144245 = 0;
LOC12 = Rsonslen_143091(A_144213);
HEX3Atmp_144245 = (NI32)(LOC12 - 1);
Res_144247 = 0;
Res_144247 = 0;
while (1) {
if (!(Res_144247 <= HEX3Atmp_144245)) goto LA13;
I_144243 = Res_144247;
LOC15 = Eqrstnodes_144211((*A_144213).Sons->data[I_144243], (*B_144214).Sons->data[I_144243]);
if (!!(LOC15)) goto LA16;
goto BeforeRet;
LA16: ;
Res_144247 += 1;
} LA13: ;
Result_144215 = NIM_TRUE;
LA4: ;
BeforeRet: ;
return Result_144215;
}
N_NIMCALL(void, Setindexpair_143118)(TY143077* Index_143120, TY143077* Key_143121, TY143077* Val_143122) {
TY143077* E_144451;
TY143077* A_144452;
TY143077* B_144453;
NI I_144479;
NI HEX3Atmp_144508;
NI LOC1;
NI Res_144510;
NIM_BOOL LOC4;
E_144451 = 0;
A_144452 = 0;
B_144453 = 0;
A_144452 = Newrstnode_143094(((NU8) 11));
Addson_143101(A_144452, Key_143121);
I_144479 = 0;
HEX3Atmp_144508 = 0;
LOC1 = Rsonslen_143091(Index_143120);
HEX3Atmp_144508 = (NI32)(LOC1 - 1);
Res_144510 = 0;
Res_144510 = 0;
while (1) {
if (!(Res_144510 <= HEX3Atmp_144508)) goto LA2;
I_144479 = Res_144510;
LOC4 = Eqrstnodes_144211((*(*Index_143120).Sons->data[I_144479]).Sons->data[0], A_144452);
if (!LOC4) goto LA5;
E_144451 = (*(*(*Index_143120).Sons->data[I_144479]).Sons->data[1]).Sons->data[0];
if (!!(((*E_144451).Kind == ((NU8) 5)))) goto LA8;
E_144451 = Newrstnode_143094(((NU8) 5));
B_144453 = Newrstnode_143094(((NU8) 6));
Addson_143101(B_144453, (*(*(*Index_143120).Sons->data[I_144479]).Sons->data[1]).Sons->data[0]);
Addson_143101(E_144451, B_144453);
asgnRefNoCycle((void**) &(*(*(*Index_143120).Sons->data[I_144479]).Sons->data[1]).Sons->data[0], E_144451);
LA8: ;
B_144453 = Newrstnode_143094(((NU8) 6));
Addson_143101(B_144453, Val_143122);
Addson_143101(E_144451, B_144453);
goto BeforeRet;
LA5: ;
Res_144510 += 1;
} LA2: ;
E_144451 = Newrstnode_143094(((NU8) 10));
B_144453 = Newrstnode_143094(((NU8) 12));
Addson_143101(B_144453, Val_143122);
Addson_143101(E_144451, A_144452);
Addson_143101(E_144451, B_144453);
Addson_143101(Index_143120, E_144451);
BeforeRet: ;
}
N_NIMCALL(NI, Cmpnodes_144141)(TY143077* A_144143, TY143077* B_144144) {
NI Result_144145;
TY143077* X_144164;
TY143077* Y_144165;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
Result_144145 = 0;
X_144164 = 0;
X_144164 = (*A_144143).Sons->data[0];
Y_144165 = 0;
Y_144165 = (*B_144144).Sons->data[0];
LOC1 = 0;
LOC1 = Addnodes_143108(X_144164);
LOC2 = 0;
LOC2 = Addnodes_143108(Y_144165);
Result_144145 = nsuCmpIgnoreStyle(LOC1, LOC2);
return Result_144145;
}
N_NIMCALL(void, Sortindex_143123)(TY143077* A_143125) {
NI N_144178;
NI H_144179;
NI I_144189;
NI HEX3Atmp_144201;
NI Res_144203;
TY143077* V_144190;
NI J_144191;
NI LOC8;
N_144178 = 0;
N_144178 = Rsonslen_143091(A_143125);
H_144179 = 0;
H_144179 = 1;
while (1) {
H_144179 = (NI32)((NI32)(3 * H_144179) + 1);
if (!(N_144178 < H_144179)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
while (1) {
H_144179 = (NI32)(H_144179 / 3);
I_144189 = 0;
HEX3Atmp_144201 = 0;
HEX3Atmp_144201 = (NI32)(N_144178 - 1);
Res_144203 = 0;
Res_144203 = H_144179;
while (1) {
if (!(Res_144203 <= HEX3Atmp_144201)) goto LA6;
I_144189 = Res_144203;
V_144190 = 0;
V_144190 = (*A_143125).Sons->data[I_144189];
J_144191 = 0;
J_144191 = I_144189;
while (1) {
LOC8 = Cmpnodes_144141((*A_143125).Sons->data[(NI32)(J_144191 - H_144179)], V_144190);
if (!(0 <= LOC8)) goto LA7;
asgnRefNoCycle((void**) &(*A_143125).Sons->data[J_144191], (*A_143125).Sons->data[(NI32)(J_144191 - H_144179)]);
J_144191 = (NI32)(J_144191 - H_144179);
if (!(J_144191 < H_144179)) goto LA10;
goto LA7;
LA10: ;
} LA7: ;
asgnRefNoCycle((void**) &(*A_143125).Sons->data[J_144191], V_144190);
Res_144203 += 1;
} LA6: ;
if (!(H_144179 == 1)) goto LA13;
goto LA5;
LA13: ;
} LA5: ;
}
N_NOINLINE(void, rstInit)(void) {
}

