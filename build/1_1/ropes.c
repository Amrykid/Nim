/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY46008 TY46008;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10202 TY10202;
typedef struct TY10218 TY10218;
typedef struct TY10590 TY10590;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY46445 TY46445;
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
typedef TY46008* TY46446[1];
typedef NI TY8214[16];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY46445 {
  TGenericSeq Sup;
  TY46008* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1347);
N_NIMCALL(void, Newrecropetostr_46427)(NimStringDesc** Result_46430, NI* Resultlen_46432, TY46008* R_46433);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17035, NI Elemsize_17036);
N_NIMCALL(TY46008*, Insertincache_46241)(NimStringDesc* S_46243, TY46008* Tree_46244);
N_NIMCALL(TY46008*, Newrope_46105)(NimStringDesc* Data_46107);
N_NIMCALL(TY46008*, Splay_46179)(NimStringDesc* S_46181, TY46008* Tree_46182, NI* Cmpres_46184);
N_NIMCALL(NI, Cmp_1319)(NimStringDesc* X_1321, NimStringDesc* Y_1322);
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_16811, NimStringDesc* B_16812);
N_NIMCALL(TY46008*, Con_46019)(TY46008* A_46021, NimStringDesc* B_46022);
N_NIMCALL(TY46008*, Con_46015)(TY46008* A_46017, TY46008* B_46018);
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11422, void* Src_11423);
N_NIMCALL(void, App_46036)(TY46008** A_46039, NimStringDesc* B_46040);
N_NIMCALL(void, App_46031)(TY46008** A_46034, TY46008* B_46035);
N_NIMCALL(void, Internalerror_41571)(NimStringDesc* Errmsg_41573);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17603);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1752, NI First_1753, NI Last_1754);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_17667);
N_NIMCALL(TY46008*, Ropef_46069)(NimStringDesc* Frmt_46071, TY46008** Args_46073, NI Args_46073Len0);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_17660);
N_NIMCALL(NI32, Crcfromfile_44029)(NimStringDesc* Filename_44031);
N_NIMCALL(NI32, Crcfromrope_47052)(TY46008* R_47054);
N_NIMCALL(NI32, Newcrcfromropeaux_46968)(TY46008* R_46970, NI32 Startval_46971);
N_NIMCALL(NI32, Updatecrc32_44018)(NIM_CHAR Val_44020, NI32 Crc_44021);
N_NIMCALL(void, Writerope_46058)(TY46008* Head_46060, NimStringDesc* Filename_46061);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(void, Newwriteroperec_46666)(FILE** F_46669, TY46008* C_46670);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
N_NIMCALL(void, Rawmessage_41553)(NU8 Msg_41555, NimStringDesc* Arg_41556);
N_NIMCALL(TY46008*, Pop_46466)(TY46445** S_46471);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
STRING_LITERAL(TMP190898, "", 0);
STRING_LITERAL(TMP191238, "$", 1);
STRING_LITERAL(TMP191239, "ropes: invalid format string $", 30);
TY46008* Cache_46126;
NI Misses_46127;
NI Hits_46128;
TY46008* N_46129;
extern TNimType* NTI46006; /* PRope */
extern TY10590 Gch_10608;
extern TNimType* NTI46008; /* TRope */
extern TNimType* NTI46445; /* seq[PRope] */
extern NimStringDesc* Tnl_45573;
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_10624))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI32)((NU32)((*C_11418).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI32)((NU32)((*C_11419).Refcount) - (NU32)(8));
if (!((NU32)((*C_11419).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(void, Newrecropetostr_46427)(NimStringDesc** Result_46430, NI* Resultlen_46432, TY46008* R_46433) {
TY46445* Stack_46448;
TY46446 LOC1;
TY46008* It_46497;
Stack_46448 = 0;
Stack_46448 = (TY46445*) newSeq(NTI46445, 1);
LOC1[0] = R_46433;
asgnRefNoCycle((void**) &Stack_46448->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_46448->Sup.len)) goto LA2;
It_46497 = 0;
It_46497 = Pop_46466(&Stack_46448);
while (1) {
if (!((*It_46497).Data == NIM_NIL)) goto LA3;
Stack_46448 = (TY46445*) incrSeq(&(Stack_46448)->Sup, sizeof(TY46008*));
asgnRefNoCycle((void**) &Stack_46448->data[Stack_46448->Sup.len-1], (*It_46497).Right);
It_46497 = (*It_46497).Left;
} LA3: ;
memcpy(((void*) (&(*Result_46430)->data[(*Resultlen_46432)])), ((void*) (&(*It_46497).Data->data[0])), (*It_46497).Length);
(*Resultlen_46432) += (*It_46497).Length;
} LA2: ;
}
N_NIMCALL(NimStringDesc*, Ropetostr_46066)(TY46008* P_46068) {
NimStringDesc* Result_46539;
NI Resultlen_46551;
Result_46539 = 0;
if (!(P_46068 == NIM_NIL)) goto LA2;
Result_46539 = copyString(((NimStringDesc*) &TMP190898));
goto LA1;
LA2: ;
Result_46539 = mnewString((*P_46068).Length);
Resultlen_46551 = 0;
Resultlen_46551 = 0;
Newrecropetostr_46427(&Result_46539, &Resultlen_46551, P_46068);
LA1: ;
return Result_46539;
}
N_NIMCALL(TY46008*, Newrope_46105)(NimStringDesc* Data_46107) {
TY46008* Result_46108;
Result_46108 = 0;
Result_46108 = (TY46008*) newObj(NTI46006, sizeof(TY46008));
(*Result_46108).Sup.m_type = NTI46008;
if (!!((Data_46107 == NIM_NIL))) goto LA2;
(*Result_46108).Length = Data_46107->Sup.len;
asgnRefNoCycle((void**) &(*Result_46108).Data, copyString(Data_46107));
LA2: ;
return Result_46108;
}
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_16811, NimStringDesc* B_16812) {
NI Result_16813;
NI32 LOC10;
Result_16813 = 0;
if (!(A_16811 == B_16812)) goto LA2;
Result_16813 = 0;
goto BeforeRet;
LA2: ;
if (!(A_16811 == NIM_NIL)) goto LA5;
Result_16813 = -1;
goto BeforeRet;
LA5: ;
if (!(B_16812 == NIM_NIL)) goto LA8;
Result_16813 = 1;
goto BeforeRet;
LA8: ;
LOC10 = strcmp(((NCSTRING) ((*A_16811).data)), ((NCSTRING) ((*B_16812).data)));
Result_16813 = ((NI) (LOC10));
goto BeforeRet;
BeforeRet: ;
return Result_16813;
}
N_NIMCALL(TY46008*, Splay_46179)(NimStringDesc* S_46181, TY46008* Tree_46182, NI* Cmpres_46184) {
TY46008* Result_46185;
NI C_46186;
TY46008* T_46187;
TY46008* Le_46188;
TY46008* R_46189;
NIM_BOOL LOC6;
TY46008* Y_46203;
NIM_BOOL LOC16;
TY46008* Y_46228;
Result_46185 = 0;
C_46186 = 0;
T_46187 = 0;
T_46187 = Tree_46182;
asgnRefNoCycle((void**) &(*N_46129).Left, NIM_NIL);
asgnRefNoCycle((void**) &(*N_46129).Right, NIM_NIL);
Le_46188 = 0;
Le_46188 = N_46129;
R_46189 = 0;
R_46189 = N_46129;
while (1) {
C_46186 = Cmp_1319(S_46181, (*T_46187).Data);
if (!(C_46186 < 0)) goto LA3;
LOC6 = !(((*T_46187).Left == NIM_NIL));
if (!(LOC6)) goto LA7;
LOC6 = (cmpStrings(S_46181, (*(*T_46187).Left).Data) < 0);
LA7: ;
if (!LOC6) goto LA8;
Y_46203 = 0;
Y_46203 = (*T_46187).Left;
asgnRefNoCycle((void**) &(*T_46187).Left, (*Y_46203).Right);
asgnRefNoCycle((void**) &(*Y_46203).Right, T_46187);
T_46187 = Y_46203;
LA8: ;
if (!((*T_46187).Left == NIM_NIL)) goto LA11;
goto LA1;
LA11: ;
asgnRefNoCycle((void**) &(*R_46189).Left, T_46187);
R_46189 = T_46187;
T_46187 = (*T_46187).Left;
goto LA2;
LA3: ;
if (!(0 < C_46186)) goto LA13;
LOC16 = !(((*T_46187).Right == NIM_NIL));
if (!(LOC16)) goto LA17;
LOC16 = (cmpStrings((*(*T_46187).Right).Data, S_46181) < 0);
LA17: ;
if (!LOC16) goto LA18;
Y_46228 = 0;
Y_46228 = (*T_46187).Right;
asgnRefNoCycle((void**) &(*T_46187).Right, (*Y_46228).Left);
asgnRefNoCycle((void**) &(*Y_46228).Left, T_46187);
T_46187 = Y_46228;
LA18: ;
if (!((*T_46187).Right == NIM_NIL)) goto LA21;
goto LA1;
LA21: ;
asgnRefNoCycle((void**) &(*Le_46188).Right, T_46187);
Le_46188 = T_46187;
T_46187 = (*T_46187).Right;
goto LA2;
LA13: ;
goto LA1;
LA2: ;
} LA1: ;
(*Cmpres_46184) = C_46186;
asgnRefNoCycle((void**) &(*Le_46188).Right, (*T_46187).Left);
asgnRefNoCycle((void**) &(*R_46189).Left, (*T_46187).Right);
asgnRefNoCycle((void**) &(*T_46187).Left, (*N_46129).Right);
asgnRefNoCycle((void**) &(*T_46187).Right, (*N_46129).Left);
Result_46185 = T_46187;
return Result_46185;
}
N_NIMCALL(TY46008*, Insertincache_46241)(NimStringDesc* S_46243, TY46008* Tree_46244) {
TY46008* Result_46245;
TY46008* T_46246;
NI Cmp_46270;
Result_46245 = 0;
T_46246 = 0;
T_46246 = Tree_46244;
if (!(T_46246 == NIM_NIL)) goto LA2;
Result_46245 = Newrope_46105(S_46243);
if (!NIM_FALSE) goto LA5;
Misses_46127 += 1;
LA5: ;
goto BeforeRet;
LA2: ;
Cmp_46270 = 0;
T_46246 = Splay_46179(S_46243, T_46246, &Cmp_46270);
if (!(Cmp_46270 == 0)) goto LA8;
Result_46245 = T_46246;
if (!NIM_FALSE) goto LA11;
Hits_46128 += 1;
LA11: ;
goto LA7;
LA8: ;
if (!NIM_FALSE) goto LA14;
Misses_46127 += 1;
LA14: ;
Result_46245 = Newrope_46105(S_46243);
if (!(Cmp_46270 < 0)) goto LA17;
asgnRefNoCycle((void**) &(*Result_46245).Left, (*T_46246).Left);
asgnRefNoCycle((void**) &(*Result_46245).Right, T_46246);
asgnRefNoCycle((void**) &(*T_46246).Left, NIM_NIL);
goto LA16;
LA17: ;
asgnRefNoCycle((void**) &(*Result_46245).Right, (*T_46246).Right);
asgnRefNoCycle((void**) &(*Result_46245).Left, T_46246);
asgnRefNoCycle((void**) &(*T_46246).Right, NIM_NIL);
LA16: ;
LA7: ;
BeforeRet: ;
return Result_46245;
}
N_NIMCALL(TY46008*, Torope_46046)(NimStringDesc* S_46048) {
TY46008* Result_46318;
Result_46318 = 0;
if (!((S_46048) && (S_46048)->Sup.len == 0)) goto LA2;
Result_46318 = NIM_NIL;
goto LA1;
LA2: ;
if (!NIM_TRUE) goto LA4;
Result_46318 = Insertincache_46241(S_46048, Cache_46126);
asgnRefNoCycle((void**) &Cache_46126, Result_46318);
goto LA1;
LA4: ;
Result_46318 = Newrope_46105(S_46048);
LA1: ;
return Result_46318;
}
N_NIMCALL(TY46008*, Con_46015)(TY46008* A_46017, TY46008* B_46018) {
TY46008* Result_46558;
Result_46558 = 0;
if (!(A_46017 == NIM_NIL)) goto LA2;
Result_46558 = B_46018;
goto LA1;
LA2: ;
if (!(B_46018 == NIM_NIL)) goto LA4;
Result_46558 = A_46017;
goto LA1;
LA4: ;
Result_46558 = Newrope_46105(NIM_NIL);
(*Result_46558).Length = (NI32)((*A_46017).Length + (*B_46018).Length);
asgnRefNoCycle((void**) &(*Result_46558).Left, A_46017);
asgnRefNoCycle((void**) &(*Result_46558).Right, B_46018);
LA1: ;
return Result_46558;
}
N_NIMCALL(TY46008*, Con_46019)(TY46008* A_46021, NimStringDesc* B_46022) {
TY46008* Result_46585;
TY46008* LOC1;
Result_46585 = 0;
LOC1 = Torope_46046(B_46022);
Result_46585 = Con_46015(A_46021, LOC1);
return Result_46585;
}
N_NIMCALL(void, App_46036)(TY46008** A_46039, NimStringDesc* B_46040) {
unsureAsgnRef((void**) &(*A_46039), Con_46019((*A_46039), B_46040));
}
N_NIMCALL(void, App_46031)(TY46008** A_46034, TY46008* B_46035) {
unsureAsgnRef((void**) &(*A_46034), Con_46015((*A_46034), B_46035));
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI32)((NI32)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010) {
(*Dest_17009).data[((*Dest_17009).Sup.len)-0] = C_17010;
(*Dest_17009).data[((NI32)((*Dest_17009).Sup.len + 1))-0] = 0;
(*Dest_17009).Sup.len += 1;
}
N_NIMCALL(TY46008*, Ropef_46069)(NimStringDesc* Frmt_46071, TY46008** Args_46073, NI Args_46073Len0) {
TY46008* Result_46765;
NI I_46766;
NI J_46767;
NI Length_46768;
NI Start_46769;
NI Num_46770;
NIM_BOOL LOC7;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NimStringDesc* LOC16;
NimStringDesc* LOC24;
Result_46765 = 0;
I_46766 = 0;
J_46767 = 0;
Length_46768 = 0;
Start_46769 = 0;
Num_46770 = 0;
I_46766 = 0;
Length_46768 = Frmt_46071->Sup.len;
Result_46765 = NIM_NIL;
Num_46770 = 0;
while (1) {
if (!(I_46766 <= (NI32)(Length_46768 - 1))) goto LA1;
if (!((NU8)(Frmt_46071->data[I_46766]) == (NU8)(36))) goto LA3;
I_46766 += 1;
switch (((NU8)(Frmt_46071->data[I_46766]))) {
case 36:
App_46036(&Result_46765, ((NimStringDesc*) &TMP191238));
I_46766 += 1;
break;
case 35:
I_46766 += 1;
App_46031(&Result_46765, Args_46073[Num_46770]);
Num_46770 += 1;
break;
case 48 ... 57:
J_46767 = 0;
while (1) {
J_46767 = (NI32)((NI32)((NI32)(J_46767 * 10) + ((NU8)(Frmt_46071->data[I_46766]))) - 48);
I_46766 += 1;
LOC7 = ((NI32)((NI32)(Length_46768 + 0) - 1) < I_46766);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_46071->data[I_46766])) >= ((NU8)(48)) && ((NU8)(Frmt_46071->data[I_46766])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
Num_46770 = J_46767;
if (!((NI32)((Args_46073Len0-1) + 1) < J_46767)) goto LA12;
LOC15 = nimIntToStr(J_46767);
LOC14 = rawNewString(LOC15->Sup.len + 30);
appendString(LOC14, ((NimStringDesc*) &TMP191239));
appendString(LOC14, LOC15);
Internalerror_41571(LOC14);
LA12: ;
App_46031(&Result_46765, Args_46073[(NI32)(J_46767 - 1)]);
break;
case 78:
case 110:
App_46036(&Result_46765, Tnl_45573);
I_46766 += 1;
break;
default:
LOC16 = rawNewString(31);
appendString(LOC16, ((NimStringDesc*) &TMP191239));
appendChar(LOC16, Frmt_46071->data[I_46766]);
Internalerror_41571(LOC16);
break;
}
LA3: ;
Start_46769 = I_46766;
while (1) {
if (!(I_46766 <= (NI32)(Length_46768 - 1))) goto LA17;
if (!!(((NU8)(Frmt_46071->data[I_46766]) == (NU8)(36)))) goto LA19;
I_46766 += 1;
goto LA18;
LA19: ;
goto LA17;
LA18: ;
} LA17: ;
if (!(Start_46769 <= (NI32)(I_46766 - 1))) goto LA22;
LOC24 = copyStrLast(Frmt_46071, Start_46769, (NI32)(I_46766 - 1));
App_46036(&Result_46765, LOC24);
LA22: ;
} LA1: ;
return Result_46765;
}
N_NIMCALL(TY46008*, Torope_46052)(NI64 I_46054) {
TY46008* Result_46628;
NimStringDesc* LOC1;
Result_46628 = 0;
LOC1 = nimInt64ToStr(I_46054);
Result_46628 = Torope_46046(LOC1);
return Result_46628;
}
N_NIMCALL(void, Appf_46074)(TY46008** C_46077, NimStringDesc* Frmt_46078, TY46008** Args_46080, NI Args_46080Len0) {
TY46008* LOC1;
LOC1 = Ropef_46069(Frmt_46078, Args_46080, Args_46080Len0);
App_46031(C_46077, LOC1);
}
N_NIMCALL(TY46008*, Con_46023)(NimStringDesc* A_46025, TY46008* B_46026) {
TY46008* Result_46590;
TY46008* LOC1;
Result_46590 = 0;
LOC1 = Torope_46046(A_46025);
Result_46590 = Con_46015(LOC1, B_46026);
return Result_46590;
}
N_NIMCALL(void, Prepend_46041)(TY46008** A_46044, TY46008* B_46045) {
unsureAsgnRef((void**) &(*A_46044), Con_46015(B_46045, (*A_46044)));
}
N_NIMCALL(TY46008*, Toropef_46049)(NF64 R_46051) {
TY46008* Result_46634;
NimStringDesc* LOC1;
Result_46634 = 0;
LOC1 = nimFloatToStr(((NF) (R_46051)));
Result_46634 = Torope_46046(LOC1);
return Result_46634;
}
N_NIMCALL(NI32, Newcrcfromropeaux_46968)(TY46008* R_46970, NI32 Startval_46971) {
NI32 Result_46972;
TY46445* Stack_46987;
TY46446 LOC1;
TY46008* It_47012;
NI I_47031;
NI L_47034;
Result_46972 = 0;
Stack_46987 = 0;
Stack_46987 = (TY46445*) newSeq(NTI46445, 1);
LOC1[0] = R_46970;
asgnRefNoCycle((void**) &Stack_46987->data[0], LOC1[0]);
Result_46972 = Startval_46971;
while (1) {
if (!(0 < Stack_46987->Sup.len)) goto LA2;
It_47012 = 0;
It_47012 = Pop_46466(&Stack_46987);
while (1) {
if (!((*It_47012).Data == NIM_NIL)) goto LA3;
Stack_46987 = (TY46445*) incrSeq(&(Stack_46987)->Sup, sizeof(TY46008*));
asgnRefNoCycle((void**) &Stack_46987->data[Stack_46987->Sup.len-1], (*It_47012).Right);
It_47012 = (*It_47012).Left;
} LA3: ;
I_47031 = 0;
I_47031 = 0;
L_47034 = 0;
L_47034 = (*It_47012).Data->Sup.len;
while (1) {
if (!(I_47031 < L_47034)) goto LA4;
Result_46972 = Updatecrc32_44018((*It_47012).Data->data[I_47031], Result_46972);
I_47031 += 1;
} LA4: ;
} LA2: ;
return Result_46972;
}
N_NIMCALL(NI32, Crcfromrope_47052)(TY46008* R_47054) {
NI32 Result_47055;
Result_47055 = 0;
Result_47055 = Newcrcfromropeaux_46968(R_47054, ((NI32) -1));
return Result_47055;
}
N_NIMCALL(void, Newwriteroperec_46666)(FILE** F_46669, TY46008* C_46670) {
TY46445* Stack_46685;
TY46446 LOC1;
TY46008* It_46710;
Stack_46685 = 0;
Stack_46685 = (TY46445*) newSeq(NTI46445, 1);
LOC1[0] = C_46670;
asgnRefNoCycle((void**) &Stack_46685->data[0], LOC1[0]);
while (1) {
if (!(0 < Stack_46685->Sup.len)) goto LA2;
It_46710 = 0;
It_46710 = Pop_46466(&Stack_46685);
while (1) {
if (!((*It_46710).Data == NIM_NIL)) goto LA3;
Stack_46685 = (TY46445*) incrSeq(&(Stack_46685)->Sup, sizeof(TY46008*));
asgnRefNoCycle((void**) &Stack_46685->data[Stack_46685->Sup.len-1], (*It_46710).Right);
It_46710 = (*It_46710).Left;
} LA3: ;
Write_3658((*F_46669), (*It_46710).Data);
} LA2: ;
}
N_NIMCALL(void, Writerope_46058)(TY46008* Head_46060, NimStringDesc* Filename_46061) {
FILE* F_46746;
NIM_BOOL LOC2;
F_46746 = 0;
LOC2 = Open_3617(&F_46746, Filename_46061, ((NU8) 1), -1);
if (!LOC2) goto LA3;
if (!!((Head_46060 == NIM_NIL))) goto LA6;
Newwriteroperec_46666(&F_46746, Head_46060);
LA6: ;
fclose(F_46746);
goto LA1;
LA3: ;
Rawmessage_41553(((NU8) 2), Filename_46061);
LA1: ;
}
N_NIMCALL(NIM_BOOL, Writeropeifnotequal_46062)(TY46008* R_46064, NimStringDesc* Filename_46065) {
NIM_BOOL Result_47060;
NI32 C_47061;
NI32 LOC2;
Result_47060 = 0;
C_47061 = 0;
C_47061 = Crcfromfile_44029(Filename_46065);
LOC2 = Crcfromrope_47052(R_46064);
if (!!((C_47061 == LOC2))) goto LA3;
Writerope_46058(R_46064, Filename_46065);
Result_47060 = NIM_TRUE;
goto LA1;
LA3: ;
Result_47060 = NIM_FALSE;
LA1: ;
return Result_47060;
}
N_NIMCALL(NI, Ropelen_46055)(TY46008* A_46057) {
NI Result_46093;
Result_46093 = 0;
if (!(A_46057 == NIM_NIL)) goto LA2;
Result_46093 = 0;
goto LA1;
LA2: ;
Result_46093 = (*A_46057).Length;
LA1: ;
return Result_46093;
}
N_NIMCALL(TY46008*, Pop_46466)(TY46445** S_46471) {
TY46008* Result_46472;
NI L_46483;
Result_46472 = 0;
L_46483 = 0;
L_46483 = (NI32)((*S_46471)->Sup.len - 1);
Result_46472 = (*S_46471)->data[L_46483];
(*S_46471) = (TY46445*) setLengthSeq(&((*S_46471))->Sup, sizeof(TY46008*), L_46483);
return Result_46472;
}
N_NOINLINE(void, ropesInit)(void) {
asgnRefNoCycle((void**) &N_46129, (TY46008*) newObj(NTI46006, sizeof(TY46008)));
(*N_46129).Sup.m_type = NTI46008;
}

