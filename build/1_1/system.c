/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

#include <windows.h>
#include <errno.h>
#include <io.h>
#include <fcntl.h>
#include <signal.h>
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10590 TY10590;
typedef struct TY10218 TY10218;
typedef struct TY10202 TY10202;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY8274 TY8274;
typedef struct TY8232 TY8232;
typedef struct TY8230 TY8230;
typedef struct TY8222 TY8222;
typedef struct TY8272 TY8272;
typedef struct TY8234 TY8234;
typedef struct TY8211 TY8211;
typedef struct TY8207 TY8207;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY420 TY420;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct TY442 TY442;
typedef struct EAssertionFailed EAssertionFailed;
typedef struct EOverflow EOverflow;
typedef struct TY428 TY428;
typedef N_NIMCALL_PTR(void, TY2718) (void);
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TY8230 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct TY8232 {
  TY8230 Sup;
TY8232* Next;
TY8232* Prev;
TY8222* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
typedef TY8232* TY8281[512];
typedef TY8207* TY8209[1024];
struct TY8211 {
TY8209 Data;
};
struct TY8274 {
TY8272* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
TY8281 Freesmallchunks;
TY8234* Freechunkslist;
TY8211 Chunkstarts;
};
struct TY8234 {
  TY8230 Sup;
TY8234* Next;
TY8234* Prev;
NI Align;
NF64 Data;
};
typedef NI TY8214[16];
struct TY8207 {
TY8207* Next;
NI Key;
TY8214 Bits;
};
struct TY8272 {
NI Size;
NI Acc;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
typedef void* TY15004[2];
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY8222 {
TY8222* Next;
NI Zerofield;
};
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
typedef N_NIMCALL_PTR(void, TFinalizer) (void* Self_10594);
struct TSafePoint {
TSafePoint* prev;
E_Base* exc;
NI status;
jmp_buf context;
};
struct TY442 {
  TY418 Sup;
};
typedef NimStringDesc* TY4102[5];
typedef TFrame* TY4680[128];
struct EAssertionFailed {
  TY416 Sup;
};
struct TY428 {
  TY416 Sup;
};
struct EOverflow {
  TY428 Sup;
};
typedef NIM_CHAR TY17662[60];
static N_INLINE(void, Initstackbottom_3013)(void);
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624);
N_NIMCALL(void, Initgc_3011)(void);
N_NIMCALL(void, Init_10278)(TY10218* S_10281, NI Cap_10282);
N_NOCONV(void*, Alloc0_1777)(NI Size_1779);
N_NOCONV(void*, Alloc_1774)(NI Size_1776);
N_NIMCALL(void*, Rawalloc_9195)(TY8274* A_9198, NI Requestedsize_9199);
static N_INLINE(NI, Roundup_8256)(NI X_8258, NI V_8259);
N_NIMCALL(TY8232*, Getsmallchunk_9162)(TY8274* A_9165);
N_NIMCALL(TY8234*, Getbigchunk_9092)(TY8274* A_9095, NI Size_9096);
N_NIMCALL(void, Splitchunk_9066)(TY8274* A_9069, TY8234* C_9070, NI Size_9071);
static N_INLINE(void, Updateprevsize_8611)(TY8274* A_8614, TY8234* C_8615, NI Prevsize_8616);
static N_INLINE(NIM_BOOL, Isaccessible_8552)(void* P_8554);
N_NIMCALL(NIM_BOOL, Contains_8411)(TY8211* S_8413, NI Key_8414);
N_NIMCALL(TY8207*, Intsetget_8374)(TY8211* T_8376, NI Key_8377);
static N_INLINE(NI, Pageindex_8481)(void* P_8483);
N_NIMCALL(void, Incl_8431)(TY8211* S_8434, NI Key_8435);
N_NIMCALL(TY8207*, Intsetput_8393)(TY8211* T_8396, NI Key_8397);
N_NIMCALL(void*, Llalloc_8330)(TY8274* A_8333, NI Size_8334);
static N_INLINE(void*, Osallocpages_7888)(NI Size_7890);
N_NIMCALL(void, Raiseoutofmem_7858)(void);
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824);
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
static N_INLINE(void, Checkcollection_11900)(void);
N_NIMCALL(void, Collectct_11205)(TY10590* Gch_11208);
N_NIMCALL(NI, Getoccupiedmem_2004)(void);
N_NIMCALL(NI, Gettotalmem_2008)(void);
N_NIMCALL(NI, Getfreemem_2006)(void);
N_NOINLINE(NI, Stacksize_15001)(void);
N_CDECL(void, Markstackandregisters_15019)(TY10590* Gch_15022);
static N_INLINE(void, Gcmark_14203)(void* P_14205);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
N_NIMCALL(NIM_BOOL, Isallocatedptr_9801)(TY8274* A_9803, void* P_9804);
static N_INLINE(TY8230*, Pageaddr_8485)(void* P_8487);
static N_INLINE(NIM_BOOL, Chunkunused_8607)(TY8230* C_8609);
static N_INLINE(NIM_BOOL, Issmallchunk_8601)(TY8230* C_8603);
static N_INLINE(void, Add_10258)(TY10218* S_10261, TY10202* C_10262);
N_NOCONV(void, Dealloc_1784)(void* P_1786);
N_NIMCALL(void, Rawdealloc_9464)(TY8274* A_9467, void* P_9468);
N_NIMCALL(void, Freebigchunk_8620)(TY8274* A_8623, TY8234* C_8624);
N_NIMCALL(void, Excl_8438)(TY8211* S_8441, NI Key_8442);
static N_INLINE(NI, Pageindex_8477)(TY8230* C_8479);
N_NIMCALL(void, Freeoschunks_8526)(TY8274* A_8529, void* P_8530, NI Size_8531);
static N_INLINE(void, Osdeallocpages_7892)(void* P_7894, NI Size_7895);
static N_INLINE(void, Deccurrmem_8303)(TY8274* A_8306, NI Bytes_8307);
N_NIMCALL(void, Markthreadstacks_14211)(TY10590* Gch_14214);
N_NIMCALL(void, Collectzct_15201)(TY10590* Gch_15204);
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628);
N_NIMCALL(void, Excl_10481)(TY10214* S_10484, TY10202* Cell_10485);
N_NIMCALL(TY10210*, Cellsetget_10314)(TY10214 T_10316, NI Key_10317);
static N_INLINE(NI, Nexttry_10309)(NI H_10311, NI Maxhash_10312);
N_NIMCALL(void, Preparedealloc_11225)(TY10202* Cell_11227);
static N_INLINE(void*, Celltousr_10618)(TY10202* Cell_10620);
N_NIMCALL(void, Forallchildren_11212)(TY10202* Cell_11214, NU8 Op_11215);
N_NIMCALL(void, Forallchildrenaux_11220)(void* Dest_11222, TNimType* Mt_11223, NU8 Op_11224);
N_NIMCALL(void, Dooperation_11216)(void* P_11218, NU8 Op_11219);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(void, Forallslotsaux_11801)(void* Dest_11803, TNimNode* N_11805, NU8 Op_11806);
N_NIMCALL(TNimNode*, Selectbranch_7063)(void* Aa_7065, TNimNode* N_7067);
N_NIMCALL(NI, Getdiscriminant_7043)(void* Aa_7045, TNimNode* N_7047);
N_NIMCALL(void, Collectcycles_13403)(TY10590* Gch_13406);
N_NIMCALL(void, Init_10288)(TY10214* S_10291);
N_NIMCALL(NIM_BOOL, Containsorincl_10499)(TY10214* S_10502, TY10202* Cell_10503);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
N_NIMCALL(TY10210*, Cellsetput_10395)(TY10214* T_10398, NI Key_10399);
N_NIMCALL(void, Cellsetenlarge_10370)(TY10214* T_10373);
N_NIMCALL(void, Cellsetrawinsert_10333)(TY10214 T_10335, TY10210** Data_10336, TY10210* Desc_10337);
N_NIMCALL(NIM_BOOL, Contains_10454)(TY10214 S_10456, TY10202* Cell_10457);
N_NIMCALL(void, Deinit_10292)(TY10214* S_10295);
N_NIMCALL(void, Unmarkstackandregisters_15801)(TY10590* Gch_15804);
static N_INLINE(void, Decref_11260)(TY10202* C_11262);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(void, raiseException)(E_Base* E_4604, NCSTRING Ename_4605);
N_NIMCALL(void, Gcdisable_2663)(void);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11422, void* Src_11423);
N_NOINLINE(NIM_BOOL, Isonstack_11209)(void* P_11211);
static N_INLINE(void, Incref_11401)(TY10202* C_11403);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17025, NI Newlen_17026);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_16982, NI Addlen_16983);
static N_INLINE(NI, Resize_16801)(NI Old_16803);
N_NIMCALL(void*, Growobj_12406)(void* Old_12408, NI Newsize_12409);
N_NIMCALL(void, Rawwritestacktrace_4867)(NimStringDesc** S_4870);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
N_NIMCALL(void, Auxwritestacktrace_4684)(TFrame* F_4686, NimStringDesc** S_4688);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17603);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1347);
N_NIMCALL(void, Add_2722)(NimStringDesc** X_2725, NCSTRING Y_2726);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_16904);
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_16899, NI Len_16900);
N_NIMCALL(void, Writetostderr_4432)(NCSTRING Msg_4434);
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673);
static N_INLINE(void, Quitordebug_4882)(void);
N_NIMCALL(void, Gcenable_2665)(void);
static N_INLINE(void, rawEchoNL)(void);
static N_INLINE(void, Inccurrmem_8286)(TY8274* A_8289, NI Bytes_8290);
N_NIMCALL(TY8234*, Requestoschunks_8492)(TY8274* A_8495, NI Size_8496);
N_NOCONV(void, signalHandler)(NI32 Sig_5048);
N_NIMCALL(void, registerSignalHandler)(void);
N_NIMCALL(NI, getRefcount)(void* P_10647);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_16895);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_16943, NI Start_16944, NI Last_16945);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_16958, NI Start_16959);
N_NIMCALL(NimStringDesc*, getCurrentExceptionMsg)(void);
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, mulInt)(NI A_6603, NI B_6604);
N_NIMCALL(TNimType*, extGetCellType)(void* C_10643);
N_NIMCALL(void, Objectinitaux_17864)(void* Dest_17866, TNimNode* N_17868);
N_NIMCALL(void, objectInit)(void* Dest_17862, TNimType* Typ_17863);
N_NIMCALL(void, Rawwrite_6864)(FILE* F_6866, NimStringDesc* S_6867);
N_NOINLINE(void, Procaddrerror_6873)(NCSTRING Name_6875);
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793);
N_NIMCALL(NI, Ptrsize_9833)(void* P_9835);
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623);
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697);
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744);
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741);
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718);
N_NIMCALL(void, genericAssign)(void* Dest_17765, void* Src_17766, TNimType* Mt_17767);
N_NIMCALL(void, Genericassignaux_17768)(void* Dest_17770, void* Src_17771, TNimNode* N_17773);
N_NIMCALL(void, Listremove_8646)(TY8234** Head_8650, TY8234* C_8651);
N_NIMCALL(void, Listadd_9226)(TY8232** Head_9230, TY8232* C_9231);
N_NIMCALL(void, Listremove_9368)(TY8232** Head_9372, TY8232* C_9373);
N_NIMCALL(void, Listadd_9007)(TY8234** Head_9011, TY8234* C_9012);
STRING_LITERAL(TMP19708, "cannot write string to file", 27);
STRING_LITERAL(TMP19709, "No stack traceback available", 28);
STRING_LITERAL(TMP19710, "Traceback (most recent call last)", 33);
STRING_LITERAL(TMP19711, "(", 1);
STRING_LITERAL(TMP19712, " calls omitted) ...", 19);
STRING_LITERAL(TMP19713, "Error: unhandled exception: ", 28);
STRING_LITERAL(TMP19714, "Error: unhandled exception", 26);
STRING_LITERAL(TMP19715, " [", 2);
STRING_LITERAL(TMP19716, "]\015\012", 3);
STRING_LITERAL(TMP19717, "\015\012", 2);
STRING_LITERAL(TMP19718, "out of memory; cannot even throw an exception", 45);
STRING_LITERAL(TMP19719, "out of memory", 13);
STRING_LITERAL(TMP19720, "rb", 2);
STRING_LITERAL(TMP19721, "wb", 2);
STRING_LITERAL(TMP19722, "w+b", 3);
STRING_LITERAL(TMP19723, "r+b", 3);
STRING_LITERAL(TMP19724, "ab", 2);
NIM_CONST TY4102 Formatopen_4101 = {((NimStringDesc*) &TMP19720),
((NimStringDesc*) &TMP19721),
((NimStringDesc*) &TMP19722),
((NimStringDesc*) &TMP19723),
((NimStringDesc*) &TMP19724)}
;
STRING_LITERAL(TMP19725, "SIGINT: Interrupted by Ctrl-C.\015\012", 32);
STRING_LITERAL(TMP19726, "SIGSEGV: Illegal storage access. (Attempt to read from nil?)\015\012", 62);
STRING_LITERAL(TMP19727, "SIGABRT: Abnormal termination.\015\012", 32);
STRING_LITERAL(TMP19728, "SIGFPE: Arithmetic error.\015\012", 27);
STRING_LITERAL(TMP19729, "SIGILL: Illegal operation.\015\012", 28);
STRING_LITERAL(TMP19730, "SIGBUS: Illegal storage access. (Attempt to read from nil?)\015\012", 61);
STRING_LITERAL(TMP19731, "unknown signal\015\012", 16);
STRING_LITERAL(TMP19732, "", 0);
STRING_LITERAL(TMP33239, "over- or underflow", 18);
STRING_LITERAL(TMP190639, "could not load: ", 16);
STRING_LITERAL(TMP190640, "could not import: ", 18);
STRING_LITERAL(TMP190766, " (invalid data!)", 16);
STRING_LITERAL(TMP190869, "cannot retrieve file position", 29);
STRING_LITERAL(TMP190870, "cannot set file position", 24);
STRING_LITERAL(TMP192483, "[GC] total memory: ", 19);
STRING_LITERAL(TMP192484, "\015\012[GC] occupied memory: ", 24);
STRING_LITERAL(TMP192485, "\015\012[GC] stack scans: ", 20);
STRING_LITERAL(TMP192486, "\015\012[GC] stack cells: ", 20);
STRING_LITERAL(TMP192487, "\015\012[GC] cycle collections: ", 26);
STRING_LITERAL(TMP192488, "\015\012[GC] max threshold: ", 22);
STRING_LITERAL(TMP192489, "\015\012[GC] zct capacity: ", 21);
STRING_LITERAL(TMP192490, "\015\012[GC] max cycle table size: ", 29);
STRING_LITERAL(TMP192491, "\015\012[GC] max stack size: ", 23);
TY2718 Dbglinehook_2721;
TNimType Strdesc_3017;
extern TNimType* NTI4262; /* ref EIO */
extern TNimType* NTI420; /* EIO */
extern TNimType* NTI7861; /* ref EOutOfMemory */
extern TNimType* NTI442; /* EOutOfMemory */
TSafePoint* excHandler;
NimStringDesc* Buf_4677;
NimStringDesc* Assertbuf_4678;
TFrame* framePtr;
TY4680 Tempframes_4682;
NimStringDesc* Stacktracenewline_4683;
EAssertionFailed* Gassertionfailed_5021;
NIM_BOOL Dbgaborting_5045;
extern TNimType* NTI5020; /* ref EAssertionFailed */
extern TNimType* NTI436; /* EAssertionFailed */
TY442* Goutofmem_7857;
TY8274 Allocator_8329;
NI Lastsize_8491;
void* Stackbottom_10607;
TY10590 Gch_10608;
NI Cyclethreshold_10609;
NI Recgclock_10610;
extern TNimType* NTI5491; /* ref EOverflow */
extern TNimType* NTI432; /* EOverflow */
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624) {
NI A_14604;
NI B_14605;
if (!(Stackbottom_10607 == NIM_NIL)) goto LA2;
Stackbottom_10607 = Thestackbottom_1624;
goto LA1;
LA2: ;
A_14604 = 0;
A_14604 = ((NI) (Thestackbottom_1624));
B_14605 = 0;
B_14605 = ((NI) (Stackbottom_10607));
Stackbottom_10607 = ((void*) (((A_14604 >= B_14605) ? A_14604 : B_14605)));
LA1: ;
}
static N_INLINE(void, Initstackbottom_3013)(void) {
void* volatile Locals_3015;
Locals_3015 = 0;
setStackBottom(((void*) (&Locals_3015)));
}
static N_INLINE(NI, Roundup_8256)(NI X_8258, NI V_8259) {
NI Result_8260;
Result_8260 = 0;
Result_8260 = (NI32)((NI32)(X_8258 + (NI32)(V_8259 - 1)) & (NI32)((NU32) ~((NI32)(V_8259 - 1))));
return Result_8260;
}
N_NIMCALL(TY8207*, Intsetget_8374)(TY8211* T_8376, NI Key_8377) {
TY8207* Result_8378;
TY8207* It_8379;
Result_8378 = 0;
It_8379 = 0;
It_8379 = (*T_8376).Data[((NI32)(Key_8377 & 1023))-0];
while (1) {
if (!!((It_8379 == NIM_NIL))) goto LA1;
if (!((*It_8379).Key == Key_8377)) goto LA3;
Result_8378 = It_8379;
goto BeforeRet;
LA3: ;
It_8379 = (*It_8379).Next;
} LA1: ;
Result_8378 = NIM_NIL;
BeforeRet: ;
return Result_8378;
}
N_NIMCALL(NIM_BOOL, Contains_8411)(TY8211* S_8413, NI Key_8414) {
NIM_BOOL Result_8415;
TY8207* T_8416;
NI U_8428;
Result_8415 = 0;
T_8416 = 0;
T_8416 = Intsetget_8374(S_8413, (NI32)((NU32)(Key_8414) >> (NU32)(9)));
if (!!((T_8416 == NIM_NIL))) goto LA2;
U_8428 = 0;
U_8428 = (NI32)(Key_8414 & 511);
Result_8415 = !(((NI32)((*T_8416).Bits[((NI32)((NU32)(U_8428) >> (NU32)(5)))-0] & (NI32)((NU32)(1) << (NU32)((NI32)(U_8428 & 31)))) == 0));
goto LA1;
LA2: ;
Result_8415 = NIM_FALSE;
LA1: ;
return Result_8415;
}
static N_INLINE(NI, Pageindex_8481)(void* P_8483) {
NI Result_8484;
Result_8484 = 0;
Result_8484 = (NI32)((NU32)(((NI) (P_8483))) >> (NU32)(12));
return Result_8484;
}
static N_INLINE(NIM_BOOL, Isaccessible_8552)(void* P_8554) {
NIM_BOOL Result_8555;
NI LOC1;
Result_8555 = 0;
LOC1 = Pageindex_8481(P_8554);
Result_8555 = Contains_8411(&Allocator_8329.Chunkstarts, LOC1);
return Result_8555;
}
static N_INLINE(void, Updateprevsize_8611)(TY8274* A_8614, TY8234* C_8615, NI Prevsize_8616) {
TY8230* Ri_8617;
NIM_BOOL LOC2;
Ri_8617 = 0;
Ri_8617 = ((TY8230*) ((NI32)((NU32)(((NI) (C_8615))) + (NU32)((*C_8615).Sup.Size))));
LOC2 = Isaccessible_8552(((void*) (Ri_8617)));
if (!LOC2) goto LA3;
(*Ri_8617).Prevsize = Prevsize_8616;
LA3: ;
}
N_NIMCALL(NI, Writebuffer_3733)(FILE* F_3735, void* Buffer_3736, NI Len_3737) {
NI Result_4251;
Result_4251 = 0;
Result_4251 = fwrite(Buffer_3736, 1, Len_3737, F_3735);
return Result_4251;
}
N_NIMCALL(NI, Gettotalmem_2008)(void) {
NI Result_9877;
Result_9877 = 0;
Result_9877 = Allocator_8329.Currmem;
goto BeforeRet;
BeforeRet: ;
return Result_9877;
}
N_NIMCALL(NI, Getfreemem_2006)(void) {
NI Result_9874;
Result_9874 = 0;
Result_9874 = Allocator_8329.Freemem;
return Result_9874;
}
N_NIMCALL(NI, Getoccupiedmem_2004)(void) {
NI Result_9880;
NI LOC1;
NI LOC2;
Result_9880 = 0;
LOC1 = Gettotalmem_2008();
LOC2 = Getfreemem_2006();
Result_9880 = (NI32)(LOC1 - LOC2);
goto BeforeRet;
BeforeRet: ;
return Result_9880;
}
N_NOINLINE(NI, Stacksize_15001)(void) {
NI Result_15003;
TY15004 Stacktop_15006;
Result_15003 = 0;
memset((void*)&Stacktop_15006, 0, sizeof(Stacktop_15006));
Result_15003 = (NI32)abs((NI32)(((NI) (&Stacktop_15006[(0)-0])) - ((NI) (Stackbottom_10607))));
return Result_15003;
}
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_10624))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(TY8230*, Pageaddr_8485)(void* P_8487) {
TY8230* Result_8488;
Result_8488 = 0;
Result_8488 = ((TY8230*) ((NI32)(((NI) (P_8487)) & -4096)));
return Result_8488;
}
static N_INLINE(NIM_BOOL, Chunkunused_8607)(TY8230* C_8609) {
NIM_BOOL Result_8610;
Result_8610 = 0;
Result_8610 = !((*C_8609).Used);
return Result_8610;
}
static N_INLINE(NIM_BOOL, Issmallchunk_8601)(TY8230* C_8603) {
NIM_BOOL Result_8604;
Result_8604 = 0;
Result_8604 = ((*C_8603).Size <= (NI32)(4096 - (NI32)(((NI)sizeof(TY8232)) - 8)));
goto BeforeRet;
BeforeRet: ;
return Result_8604;
}
N_NIMCALL(NIM_BOOL, Isallocatedptr_9801)(TY8274* A_9803, void* P_9804) {
NIM_BOOL Result_9805;
NIM_BOOL LOC2;
TY8230* C_9806;
NIM_BOOL LOC6;
NIM_BOOL LOC10;
TY8232* C_9807;
NI Offset_9808;
NIM_BOOL LOC13;
NIM_BOOL LOC14;
TY8234* C_9812;
NIM_BOOL LOC17;
Result_9805 = 0;
LOC2 = Isaccessible_8552(P_9804);
if (!LOC2) goto LA3;
C_9806 = 0;
C_9806 = Pageaddr_8485(P_9804);
LOC6 = Chunkunused_8607(C_9806);
if (!!(LOC6)) goto LA7;
LOC10 = Issmallchunk_8601(C_9806);
if (!LOC10) goto LA11;
C_9807 = 0;
C_9807 = ((TY8232*) (C_9806));
Offset_9808 = 0;
Offset_9808 = (NI32)((NU32)((NI32)(((NI) (P_9804)) & 4095)) - (NU32)((NI32)(((NI)sizeof(TY8232)) - 8)));
LOC14 = ((NU32)(Offset_9808) < (NU32)((*C_9807).Acc));
if (!(LOC14)) goto LA15;
LOC14 = ((NI32)((NU32)(Offset_9808) % (NU32)((*C_9807).Sup.Size)) == 0);
LA15: ;
LOC13 = LOC14;
if (!(LOC13)) goto LA16;
LOC13 = ((NU32)(1) < (NU32)((*((TY8222*) (P_9804))).Zerofield));
LA16: ;
Result_9805 = LOC13;
goto LA9;
LA11: ;
C_9812 = 0;
C_9812 = ((TY8234*) (C_9806));
LOC17 = (P_9804 == ((void*) (&(*C_9812).Data)));
if (!(LOC17)) goto LA18;
LOC17 = ((NU32)(1) < (NU32)((*((TY8222*) (P_9804))).Zerofield));
LA18: ;
Result_9805 = LOC17;
LA9: ;
LA7: ;
LA3: ;
return Result_9805;
}
N_NIMCALL(void, Excl_8438)(TY8211* S_8441, NI Key_8442) {
TY8207* T_8443;
NI U_8455;
T_8443 = 0;
T_8443 = Intsetget_8374(&(*S_8441), (NI32)((NU32)(Key_8442) >> (NU32)(9)));
if (!!((T_8443 == NIM_NIL))) goto LA2;
U_8455 = 0;
U_8455 = (NI32)(Key_8442 & 511);
(*T_8443).Bits[((NI32)((NU32)(U_8455) >> (NU32)(5)))-0] = (NI32)((*T_8443).Bits[((NI32)((NU32)(U_8455) >> (NU32)(5)))-0] & (NI32)((NU32) ~((NI32)((NU32)(1) << (NU32)((NI32)(U_8455 & 31))))));
LA2: ;
}
static N_INLINE(NI, Pageindex_8477)(TY8230* C_8479) {
NI Result_8480;
Result_8480 = 0;
Result_8480 = (NI32)((NU32)(((NI) (C_8479))) >> (NU32)(12));
return Result_8480;
}
static N_INLINE(void, Osdeallocpages_7892)(void* P_7894, NI Size_7895) {
VirtualFree(P_7894, 0, ((NI32) 32768));
}
static N_INLINE(void, Deccurrmem_8303)(TY8274* A_8306, NI Bytes_8307) {
(*A_8306).Maxmem = (((*A_8306).Maxmem >= (*A_8306).Currmem) ? (*A_8306).Maxmem : (*A_8306).Currmem);
(*A_8306).Currmem -= Bytes_8307;
}
N_NIMCALL(void, Freeoschunks_8526)(TY8274* A_8529, void* P_8530, NI Size_8531) {
TY8230* C_8532;
NI Nxt_8533;
TY8230* Next_8536;
NI LOC2;
NIM_BOOL LOC3;
NI LOC6;
C_8532 = 0;
C_8532 = ((TY8230*) (P_8530));
Nxt_8533 = 0;
Nxt_8533 = (NI32)((NU32)(((NI) (P_8530))) + (NU32)((*C_8532).Size));
Next_8536 = 0;
Next_8536 = ((TY8230*) (Nxt_8533));
LOC2 = Pageindex_8477(Next_8536);
LOC3 = Contains_8411(&(*A_8529).Chunkstarts, LOC2);
if (!LOC3) goto LA4;
(*Next_8536).Prevsize = 0;
LA4: ;
LOC6 = Pageindex_8481(P_8530);
Excl_8438(&(*A_8529).Chunkstarts, LOC6);
Osdeallocpages_7892(P_8530, Size_8531);
Deccurrmem_8303(A_8529, Size_8531);
(*A_8529).Freemem -= Size_8531;
}
N_NIMCALL(void, Freebigchunk_8620)(TY8274* A_8623, TY8234* C_8624) {
TY8234* C_8625;
TY8230* Ri_8640;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
NI LOC10;
TY8230* Le_8803;
NIM_BOOL LOC15;
NIM_BOOL LOC20;
NI LOC23;
NI LOC27;
C_8625 = 0;
C_8625 = C_8624;
(*A_8623).Freemem += (*C_8625).Sup.Size;
Ri_8640 = 0;
Ri_8640 = ((TY8230*) ((NI32)((NU32)(((NI) (C_8625))) + (NU32)((*C_8625).Sup.Size))));
LOC2 = Isaccessible_8552(((void*) (Ri_8640)));
if (!(LOC2)) goto LA3;
LOC2 = Chunkunused_8607(Ri_8640);
LA3: ;
if (!LOC2) goto LA4;
LOC7 = Issmallchunk_8601(Ri_8640);
if (!!(LOC7)) goto LA8;
Listremove_8646(&(*A_8623).Freechunkslist, ((TY8234*) (Ri_8640)));
(*C_8625).Sup.Size += (*Ri_8640).Size;
LOC10 = Pageindex_8477(Ri_8640);
Excl_8438(&(*A_8623).Chunkstarts, LOC10);
LA8: ;
LA4: ;
if (!!(((*C_8625).Sup.Prevsize == 0))) goto LA12;
Le_8803 = 0;
Le_8803 = ((TY8230*) ((NI32)((NU32)(((NI) (C_8625))) - (NU32)((*C_8625).Sup.Prevsize))));
LOC15 = Isaccessible_8552(((void*) (Le_8803)));
if (!(LOC15)) goto LA16;
LOC15 = Chunkunused_8607(Le_8803);
LA16: ;
if (!LOC15) goto LA17;
LOC20 = Issmallchunk_8601(Le_8803);
if (!!(LOC20)) goto LA21;
Listremove_8646(&(*A_8623).Freechunkslist, ((TY8234*) (Le_8803)));
(*Le_8803).Size += (*C_8625).Sup.Size;
LOC23 = Pageindex_8477(&C_8625->Sup);
Excl_8438(&(*A_8623).Chunkstarts, LOC23);
C_8625 = ((TY8234*) (Le_8803));
LA21: ;
LA17: ;
LA12: ;
if (!((*C_8625).Sup.Size < 1048576)) goto LA25;
LOC27 = Pageindex_8477(&C_8625->Sup);
Incl_8431(&(*A_8623).Chunkstarts, LOC27);
Updateprevsize_8611(A_8623, C_8625, (*C_8625).Sup.Size);
Listadd_9007(&(*A_8623).Freechunkslist, C_8625);
(*C_8625).Sup.Used = NIM_FALSE;
goto LA24;
LA25: ;
Freeoschunks_8526(A_8623, ((void*) (C_8625)), (*C_8625).Sup.Size);
LA24: ;
}
N_NIMCALL(void, Rawdealloc_9464)(TY8274* A_9467, void* P_9468) {
TY8230* C_9469;
NIM_BOOL LOC2;
TY8232* C_9470;
NI S_9471;
TY8222* F_9473;
C_9469 = 0;
C_9469 = Pageaddr_8485(P_9468);
LOC2 = Issmallchunk_8601(C_9469);
if (!LOC2) goto LA3;
C_9470 = 0;
C_9470 = ((TY8232*) (C_9469));
S_9471 = 0;
S_9471 = (*C_9470).Sup.Size;
F_9473 = 0;
F_9473 = ((TY8222*) (P_9468));
(*F_9473).Zerofield = 0;
(*F_9473).Next = (*C_9470).Freelist;
(*C_9470).Freelist = F_9473;
if (!((*C_9470).Free < S_9471)) goto LA6;
Listadd_9226(&(*A_9467).Freesmallchunks[((NI32)(S_9471 / 8))-0], C_9470);
(*C_9470).Free += S_9471;
goto LA5;
LA6: ;
(*C_9470).Free += S_9471;
if (!((*C_9470).Free == (NI32)(4096 - (NI32)(((NI)sizeof(TY8232)) - 8)))) goto LA9;
Listremove_9368(&(*A_9467).Freesmallchunks[((NI32)(S_9471 / 8))-0], C_9470);
(*C_9470).Sup.Size = 4096;
Freebigchunk_8620(A_9467, ((TY8234*) (C_9470)));
LA9: ;
LA5: ;
goto LA1;
LA3: ;
Freebigchunk_8620(A_9467, ((TY8234*) (C_9469)));
LA1: ;
}
N_NOCONV(void, Dealloc_1784)(void* P_1786) {
void* X_9828;
X_9828 = 0;
X_9828 = ((void*) ((NI32)((NU32)(((NI) (P_1786))) - (NU32)(((NI)sizeof(TY8222))))));
Rawdealloc_9464(&Allocator_8329, X_9828);
}
static N_INLINE(void, Add_10258)(TY10218* S_10261, TY10202* C_10262) {
TY10202** D_10265;
void* LOC4;
if (!((*S_10261).Cap <= (*S_10261).Len)) goto LA2;
(*S_10261).Cap = (NI32)((NI32)((*S_10261).Cap * 3) / 2);
D_10265 = 0;
LOC4 = Alloc_1774((NI32)((*S_10261).Cap * 4));
D_10265 = ((TY10202**) (LOC4));
memcpy(((void*) (D_10265)), ((void*) ((*S_10261).D)), (NI32)((*S_10261).Len * 4));
Dealloc_1784(((void*) ((*S_10261).D)));
(*S_10261).D = D_10265;
LA2: ;
(*S_10261).D[((*S_10261).Len)-0] = C_10262;
(*S_10261).Len += 1;
}
static N_INLINE(void, Gcmark_14203)(void* P_14205) {
TY10202* Cell_14206;
NI C_14207;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
Cell_14206 = 0;
Cell_14206 = Usrtocell_10622(P_14205);
C_14207 = 0;
C_14207 = ((NI) (Cell_14206));
LOC2 = ((NU32)(4096) < (NU32)(C_14207));
if (!(LOC2)) goto LA3;
LOC2 = ((NI32)(C_14207 & 7) == 0);
LA3: ;
if (!LOC2) goto LA4;
LOC7 = Isallocatedptr_9801(&Allocator_8329, ((void*) (Cell_14206)));
if (!LOC7) goto LA8;
(*Cell_14206).Refcount = (NI32)((NU32)((*Cell_14206).Refcount) + (NU32)(8));
Add_10258(&Gch_10608.Decstack, Cell_14206);
LA8: ;
LA4: ;
}
N_CDECL(void, Markstackandregisters_15019)(TY10590* Gch_15022) {
jmp_buf Registers_15023;
NI32 LOC2;
NI Max_15027;
NI Sp_15029;
memset((void*)&Registers_15023, 0, sizeof(Registers_15023));
LOC2 = setjmp(Registers_15023);
if (!(LOC2 == ((NI32) 0))) goto LA3;
Max_15027 = 0;
Max_15027 = ((NI) (Stackbottom_10607));
Sp_15029 = 0;
Sp_15029 = ((NI) (Registers_15023));
while (1) {
if (!((NU32)(Sp_15029) <= (NU32)(Max_15027))) goto LA5;
Gcmark_14203((*((void**) (Sp_15029))));
Sp_15029 = (NI32)((NU32)(Sp_15029) + (NU32)(4));
} LA5: ;
LA3: ;
}
N_NIMCALL(void, Markthreadstacks_14211)(TY10590* Gch_14214) {
}
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628) {
NIM_BOOL Result_10629;
Result_10629 = 0;
Result_10629 = !((((*(*C_10628).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_10629;
}
static N_INLINE(NI, Nexttry_10309)(NI H_10311, NI Maxhash_10312) {
NI Result_10313;
Result_10313 = 0;
Result_10313 = (NI32)((NI32)((NI32)(5 * H_10311) + 1) & Maxhash_10312);
return Result_10313;
}
N_NIMCALL(TY10210*, Cellsetget_10314)(TY10214 T_10316, NI Key_10317) {
TY10210* Result_10318;
NI H_10319;
Result_10318 = 0;
H_10319 = 0;
H_10319 = (NI32)(((NI) (Key_10317)) & T_10316.Max);
while (1) {
if (!!((T_10316.Data[(H_10319)-0] == NIM_NIL))) goto LA1;
if (!((*T_10316.Data[(H_10319)-0]).Key == Key_10317)) goto LA3;
Result_10318 = T_10316.Data[(H_10319)-0];
goto BeforeRet;
LA3: ;
H_10319 = Nexttry_10309(H_10319, T_10316.Max);
} LA1: ;
Result_10318 = NIM_NIL;
goto BeforeRet;
BeforeRet: ;
return Result_10318;
}
N_NIMCALL(void, Excl_10481)(TY10214* S_10484, TY10202* Cell_10485) {
NI U_10486;
TY10210* T_10487;
U_10486 = 0;
U_10486 = ((NI) (Cell_10485));
T_10487 = 0;
T_10487 = Cellsetget_10314((*S_10484), (NI32)((NU32)(U_10486) >> (NU32)(12)));
if (!!((T_10487 == NIM_NIL))) goto LA2;
U_10486 = (NI32)((NU32)((NI32)((NU32)(U_10486) % (NU32)(4096))) / (NU32)(8));
(*T_10487).Bits[((NI32)((NU32)(U_10486) >> (NU32)(5)))-0] = (NI32)((*T_10487).Bits[((NI32)((NU32)(U_10486) >> (NU32)(5)))-0] & (NI32)((NU32) ~((NI32)((NU32)(1) << (NU32)((NI32)(U_10486 & 31))))));
LA2: ;
}
static N_INLINE(void*, Celltousr_10618)(TY10202* Cell_10620) {
void* Result_10621;
Result_10621 = 0;
Result_10621 = ((void*) ((NI32)((NU32)(((NI) (Cell_10620))) + (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10621;
}
N_NIMCALL(void, Preparedealloc_11225)(TY10202* Cell_11227) {
void* LOC4;
if (!!(((*(*Cell_11227).Typ).finalizer == NIM_NIL))) goto LA2;
Recgclock_10610 += 1;
LOC4 = Celltousr_10618(Cell_11227);
((TFinalizer) ((*(*Cell_11227).Typ).finalizer))(LOC4);
Recgclock_10610 -= 1;
LA2: ;
}
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615) {
if (!((NI32)((*C_10615).Refcount & 4) == 0)) goto LA2;
(*C_10615).Refcount = (NI32)((NI32)((*C_10615).Refcount & -8) | 4);
Add_10258(S_10614, C_10615);
LA2: ;
}
N_NIMCALL(void, Dooperation_11216)(void* P_11218, NU8 Op_11219) {
TY10202* C_13205;
if (!(P_11218 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
C_13205 = 0;
C_13205 = Usrtocell_10622(P_11218);
switch (Op_11219) {
case ((NU8) 0):
(*C_13205).Refcount = (NI32)((NU32)((*C_13205).Refcount) - (NU32)(8));
if (!((NU32)((*C_13205).Refcount) < (NU32)(8))) goto LA5;
Addzct_10611(&Gch_10608.Zct, C_13205);
LA5: ;
break;
case ((NU8) 1):
Add_10258(&Gch_10608.Tempstack, C_13205);
break;
case ((NU8) 2):
(*C_13205).Refcount = (NI32)((NU32)((*C_13205).Refcount) - (NU32)(8));
break;
}
BeforeRet: ;
}
N_NIMCALL(NI, Getdiscriminant_7043)(void* Aa_7045, TNimNode* N_7047) {
NI Result_7048;
NI D_7058;
NI A_7059;
Result_7048 = 0;
D_7058 = 0;
A_7059 = 0;
A_7059 = ((NI) (Aa_7045));
switch ((*(*N_7047).typ).size) {
case 1:
D_7058 = ((NI)(NU)(NU8)((*((NI8*) ((NI32)((NU32)(A_7059) + (NU32)((*N_7047).offset)))))));
break;
case 2:
D_7058 = ((NI)(NU)(NU16)((*((NI16*) ((NI32)((NU32)(A_7059) + (NU32)((*N_7047).offset)))))));
break;
case 4:
D_7058 = ((NI) ((*((NI32*) ((NI32)((NU32)(A_7059) + (NU32)((*N_7047).offset)))))));
break;
default:
break;
}
Result_7048 = D_7058;
goto BeforeRet;
BeforeRet: ;
return Result_7048;
}
N_NIMCALL(TNimNode*, Selectbranch_7063)(void* Aa_7065, TNimNode* N_7067) {
TNimNode* Result_7069;
NI Discr_7070;
Result_7069 = 0;
Discr_7070 = 0;
Discr_7070 = Getdiscriminant_7043(Aa_7065, N_7067);
if (!((NU32)(Discr_7070) < (NU32)((*N_7067).len))) goto LA2;
Result_7069 = (*N_7067).sons[(Discr_7070)-0];
if (!(Result_7069 == NIM_NIL)) goto LA5;
Result_7069 = (*N_7067).sons[((*N_7067).len)-0];
LA5: ;
goto LA1;
LA2: ;
Result_7069 = (*N_7067).sons[((*N_7067).len)-0];
LA1: ;
return Result_7069;
}
N_NIMCALL(void, Forallslotsaux_11801)(void* Dest_11803, TNimNode* N_11805, NU8 Op_11806) {
NI D_11807;
NI I_11815;
NI HEX3Atmp_19475;
NI Res_19477;
TNimNode* M_11816;
D_11807 = 0;
D_11807 = ((NI) (Dest_11803));
switch ((*N_11805).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
Forallchildrenaux_11220(((void*) ((NI32)((NU32)(D_11807) + (NU32)((*N_11805).offset)))), (*N_11805).typ, Op_11806);
break;
case ((NU8) 2):
I_11815 = 0;
HEX3Atmp_19475 = 0;
HEX3Atmp_19475 = (NI32)((*N_11805).len - 1);
Res_19477 = 0;
Res_19477 = 0;
while (1) {
if (!(Res_19477 <= HEX3Atmp_19475)) goto LA1;
I_11815 = Res_19477;
Forallslotsaux_11801(Dest_11803, (*N_11805).sons[(I_11815)-0], Op_11806);
Res_19477 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_11816 = 0;
M_11816 = Selectbranch_7063(Dest_11803, N_11805);
if (!!((M_11816 == NIM_NIL))) goto LA3;
Forallslotsaux_11801(Dest_11803, M_11816, Op_11806);
LA3: ;
break;
}
}
N_NIMCALL(void, Forallchildrenaux_11220)(void* Dest_11222, TNimType* Mt_11223, NU8 Op_11224) {
NI D_11833;
NI I_11852;
NI HEX3Atmp_19481;
NI Res_19483;
D_11833 = 0;
D_11833 = ((NI) (Dest_11222));
if (!(Dest_11222 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!((((*Mt_11223).flags &(1<<((((NU8) 0))&7)))!=0))) goto LA5;
switch ((*Mt_11223).kind) {
case ((NU8) 16):
case ((NU8) 4):
case ((NU8) 27):
I_11852 = 0;
HEX3Atmp_19481 = 0;
HEX3Atmp_19481 = (NI32)((NI32)((*Mt_11223).size / (*(*Mt_11223).base).size) - 1);
Res_19483 = 0;
Res_19483 = 0;
while (1) {
if (!(Res_19483 <= HEX3Atmp_19481)) goto LA7;
I_11852 = Res_19483;
Forallchildrenaux_11220(((void*) ((NI32)((NU32)(D_11833) + (NU32)((NI32)((NU32)(I_11852) * (NU32)((*(*Mt_11223).base).size)))))), (*Mt_11223).base, Op_11224);
Res_19483 += 1;
} LA7: ;
break;
case ((NU8) 22):
case ((NU8) 28):
case ((NU8) 24):
Dooperation_11216((*((void**) (D_11833))), Op_11224);
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
Forallslotsaux_11801(Dest_11222, (*Mt_11223).node, Op_11224);
break;
default:
break;
}
LA5: ;
BeforeRet: ;
}
N_NIMCALL(void, Forallchildren_11212)(TY10202* Cell_11214, NU8 Op_11215) {
void* LOC1;
NI D_11879;
void* LOC2;
TGenericSeq* S_11880;
NI I_11899;
NI HEX3Atmp_19487;
NI Res_19489;
switch ((*(*Cell_11214).Typ).kind) {
case ((NU8) 22):
LOC1 = Celltousr_10618(Cell_11214);
Forallchildrenaux_11220(LOC1, (*(*Cell_11214).Typ).base, Op_11215);
break;
case ((NU8) 24):
D_11879 = 0;
LOC2 = Celltousr_10618(Cell_11214);
D_11879 = ((NI) (LOC2));
S_11880 = 0;
S_11880 = ((TGenericSeq*) (D_11879));
if (!!((S_11880 == NIM_NIL))) goto LA4;
I_11899 = 0;
HEX3Atmp_19487 = 0;
HEX3Atmp_19487 = (NI32)((*S_11880).len - 1);
Res_19489 = 0;
Res_19489 = 0;
while (1) {
if (!(Res_19489 <= HEX3Atmp_19487)) goto LA6;
I_11899 = Res_19489;
Forallchildrenaux_11220(((void*) ((NI32)((NU32)((NI32)((NU32)(D_11879) + (NU32)((NI32)((NU32)(I_11899) * (NU32)((*(*(*Cell_11214).Typ).base).size))))) + (NU32)(8)))), (*(*Cell_11214).Typ).base, Op_11215);
Res_19489 += 1;
} LA6: ;
LA4: ;
break;
case ((NU8) 28):
break;
default:
break;
}
}
N_NIMCALL(void, Collectzct_15201)(TY10590* Gch_15204) {
NI* L_15206;
TY10202* C_15209;
NIM_BOOL LOC6;
L_15206 = 0;
L_15206 = &(*Gch_15204).Zct.Len;
while (1) {
if (!(0 < (*L_15206))) goto LA1;
C_15209 = 0;
C_15209 = (*Gch_15204).Zct.D[(0)-0];
(*C_15209).Refcount = (NI32)((*C_15209).Refcount & -8);
(*Gch_15204).Zct.D[(0)-0] = (*Gch_15204).Zct.D[((NI32)((*L_15206) - 1))-0];
(*L_15206) -= 1;
if (!((NU32)((*C_15209).Refcount) < (NU32)(8))) goto LA3;
LOC6 = Canbecycleroot_10626(C_15209);
if (!LOC6) goto LA7;
Excl_10481(&(*Gch_15204).Cycleroots, C_15209);
LA7: ;
Preparedealloc_11225(C_15209);
Forallchildren_11212(C_15209, ((NU8) 0));
Rawdealloc_9464(&Allocator_8329, ((void*) (C_15209)));
LA3: ;
} LA1: ;
}
N_NIMCALL(void, Init_10288)(TY10214* S_10291) {
void* LOC1;
LOC1 = Alloc0_1777(4096);
(*S_10291).Data = ((TY10210**) (LOC1));
(*S_10291).Max = 1023;
(*S_10291).Counter = 0;
(*S_10291).Head = NIM_NIL;
}
N_NIMCALL(void, Cellsetrawinsert_10333)(TY10214 T_10335, TY10210** Data_10336, TY10210* Desc_10337) {
NI H_10338;
H_10338 = 0;
H_10338 = (NI32)(((NI) ((*Desc_10337).Key)) & T_10335.Max);
while (1) {
if (!!((Data_10336[(H_10338)-0] == NIM_NIL))) goto LA1;
H_10338 = Nexttry_10309(H_10338, T_10335.Max);
} LA1: ;
Data_10336[(H_10338)-0] = Desc_10337;
}
N_NIMCALL(void, Cellsetenlarge_10370)(TY10214* T_10373) {
NI Oldmax_10374;
TY10210** N_10375;
void* LOC1;
NI I_10383;
NI Res_19466;
Oldmax_10374 = 0;
Oldmax_10374 = (*T_10373).Max;
(*T_10373).Max = (NI32)((NI32)((NI32)((*T_10373).Max + 1) * 2) - 1);
N_10375 = 0;
LOC1 = Alloc0_1777((NI32)((NI32)((*T_10373).Max + 1) * 4));
N_10375 = ((TY10210**) (LOC1));
I_10383 = 0;
Res_19466 = 0;
Res_19466 = 0;
while (1) {
if (!(Res_19466 <= Oldmax_10374)) goto LA2;
I_10383 = Res_19466;
if (!!(((*T_10373).Data[(I_10383)-0] == NIM_NIL))) goto LA4;
Cellsetrawinsert_10333((*T_10373), N_10375, (*T_10373).Data[(I_10383)-0]);
LA4: ;
Res_19466 += 1;
} LA2: ;
Dealloc_1784(((void*) ((*T_10373).Data)));
(*T_10373).Data = N_10375;
}
N_NIMCALL(TY10210*, Cellsetput_10395)(TY10214* T_10398, NI Key_10399) {
TY10210* Result_10400;
NI H_10401;
TY10210* X_10402;
NIM_BOOL LOC9;
void* LOC14;
Result_10400 = 0;
H_10401 = 0;
H_10401 = (NI32)(((NI) (Key_10399)) & (*T_10398).Max);
while (1) {
X_10402 = 0;
X_10402 = (*T_10398).Data[(H_10401)-0];
if (!(X_10402 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*X_10402).Key == Key_10399)) goto LA6;
Result_10400 = X_10402;
goto BeforeRet;
LA6: ;
H_10401 = Nexttry_10309(H_10401, (*T_10398).Max);
} LA1: ;
LOC9 = ((NI32)((NI32)((*T_10398).Max + 1) * 2) < (NI32)((*T_10398).Counter * 3));
if (LOC9) goto LA10;
LOC9 = ((NI32)((NI32)((*T_10398).Max + 1) - (*T_10398).Counter) < 4);
LA10: ;
if (!LOC9) goto LA11;
Cellsetenlarge_10370(T_10398);
LA11: ;
(*T_10398).Counter += 1;
H_10401 = (NI32)(((NI) (Key_10399)) & (*T_10398).Max);
while (1) {
if (!!(((*T_10398).Data[(H_10401)-0] == NIM_NIL))) goto LA13;
H_10401 = Nexttry_10309(H_10401, (*T_10398).Max);
} LA13: ;
LOC14 = Alloc0_1777(((NI)sizeof(TY10210)));
Result_10400 = ((TY10210*) (LOC14));
(*Result_10400).Next = (*T_10398).Head;
(*Result_10400).Key = Key_10399;
(*T_10398).Head = Result_10400;
(*T_10398).Data[(H_10401)-0] = Result_10400;
BeforeRet: ;
return Result_10400;
}
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478) {
NI U_10479;
TY10210* T_10480;
U_10479 = 0;
U_10479 = ((NI) (Cell_10478));
T_10480 = 0;
T_10480 = Cellsetput_10395(S_10477, (NI32)((NU32)(U_10479) >> (NU32)(12)));
U_10479 = (NI32)((NU32)((NI32)((NU32)(U_10479) % (NU32)(4096))) / (NU32)(8));
(*T_10480).Bits[((NI32)((NU32)(U_10479) >> (NU32)(5)))-0] = (NI32)((*T_10480).Bits[((NI32)((NU32)(U_10479) >> (NU32)(5)))-0] | (NI32)((NU32)(1) << (NU32)((NI32)(U_10479 & 31))));
}
N_NIMCALL(NIM_BOOL, Containsorincl_10499)(TY10214* S_10502, TY10202* Cell_10503) {
NIM_BOOL Result_10504;
NI U_10505;
TY10210* T_10506;
Result_10504 = 0;
U_10505 = 0;
U_10505 = ((NI) (Cell_10503));
T_10506 = 0;
T_10506 = Cellsetget_10314((*S_10502), (NI32)((NU32)(U_10505) >> (NU32)(12)));
if (!!((T_10506 == NIM_NIL))) goto LA2;
U_10505 = (NI32)((NU32)((NI32)((NU32)(U_10505) % (NU32)(4096))) / (NU32)(8));
Result_10504 = !(((NI32)((*T_10506).Bits[((NI32)((NU32)(U_10505) >> (NU32)(5)))-0] & (NI32)((NU32)(1) << (NU32)((NI32)(U_10505 & 31)))) == 0));
if (!!(Result_10504)) goto LA5;
(*T_10506).Bits[((NI32)((NU32)(U_10505) >> (NU32)(5)))-0] = (NI32)((*T_10506).Bits[((NI32)((NU32)(U_10505) >> (NU32)(5)))-0] | (NI32)((NU32)(1) << (NU32)((NI32)(U_10505 & 31))));
LA5: ;
goto LA1;
LA2: ;
Incl_10474(S_10502, Cell_10503);
Result_10504 = NIM_FALSE;
LA1: ;
return Result_10504;
}
N_NIMCALL(NIM_BOOL, Contains_10454)(TY10214 S_10456, TY10202* Cell_10457) {
NIM_BOOL Result_10458;
NI U_10459;
TY10210* T_10460;
Result_10458 = 0;
U_10459 = 0;
U_10459 = ((NI) (Cell_10457));
T_10460 = 0;
T_10460 = Cellsetget_10314(S_10456, (NI32)((NU32)(U_10459) >> (NU32)(12)));
if (!!((T_10460 == NIM_NIL))) goto LA2;
U_10459 = (NI32)((NU32)((NI32)((NU32)(U_10459) % (NU32)(4096))) / (NU32)(8));
Result_10458 = !(((NI32)((*T_10460).Bits[((NI32)((NU32)(U_10459) >> (NU32)(5)))-0] & (NI32)((NU32)(1) << (NU32)((NI32)(U_10459 & 31)))) == 0));
goto LA1;
LA2: ;
Result_10458 = NIM_FALSE;
LA1: ;
return Result_10458;
}
N_NIMCALL(void, Deinit_10292)(TY10214* S_10295) {
TY10210* It_10296;
TY10210* N_10308;
It_10296 = 0;
It_10296 = (*S_10295).Head;
while (1) {
if (!!((It_10296 == NIM_NIL))) goto LA1;
N_10308 = 0;
N_10308 = (*It_10296).Next;
Dealloc_1784(((void*) (It_10296)));
It_10296 = N_10308;
} LA1: ;
(*S_10295).Head = NIM_NIL;
Dealloc_1784(((void*) ((*S_10295).Data)));
(*S_10295).Data = NIM_NIL;
(*S_10295).Counter = 0;
}
N_NIMCALL(void, Collectcycles_13403)(TY10590* Gch_13406) {
NI Tabsize_13407;
TY10202* C_13408;
TY10214 HEX3Atmp_19501;
TY10210* R_19503;
NI I_19505;
NI W_19507;
NI J_19509;
TY10214 Marker_13423;
TY10202* C_13425;
TY10214 HEX3Atmp_19524;
TY10210* R_19526;
NI I_19528;
NI W_19530;
NI J_19532;
NIM_BOOL LOC17;
TY10202* D_13441;
NIM_BOOL LOC22;
NIM_BOOL LOC24;
TY10202* C_13445;
TY10214 HEX3Atmp_19558;
TY10210* R_19560;
NI I_19562;
NI W_19564;
NI J_19566;
TY10202* D_13460;
NIM_BOOL LOC41;
Tabsize_13407 = 0;
Tabsize_13407 = 0;
C_13408 = 0;
memset((void*)&HEX3Atmp_19501, 0, sizeof(HEX3Atmp_19501));
HEX3Atmp_19501 = (*Gch_13406).Cycleroots;
R_19503 = 0;
R_19503 = HEX3Atmp_19501.Head;
while (1) {
if (!!((R_19503 == NIM_NIL))) goto LA1;
I_19505 = 0;
I_19505 = 0;
while (1) {
if (!(I_19505 <= 15)) goto LA2;
W_19507 = 0;
W_19507 = (*R_19503).Bits[(I_19505)-0];
J_19509 = 0;
J_19509 = 0;
while (1) {
if (!!((W_19507 == 0))) goto LA3;
if (!!(((NI32)(W_19507 & 1) == 0))) goto LA5;
C_13408 = ((TY10202*) ((NI32)((NI32)((NU32)((*R_19503).Key) << (NU32)(12)) | (NI32)((NU32)((NI32)((NU32)((NI32)((NU32)(I_19505) << (NU32)(5))) + (NU32)(J_19509))) * (NU32)(8)))));
Tabsize_13407 += 1;
Forallchildren_11212(C_13408, ((NU8) 2));
LA5: ;
J_19509 += 1;
W_19507 = (NI32)((NU32)(W_19507) >> (NU32)(1));
} LA3: ;
I_19505 += 1;
} LA2: ;
R_19503 = (*R_19503).Next;
} LA1: ;
(*Gch_13406).Stat.Cycletablesize = (((*Gch_13406).Stat.Cycletablesize >= Tabsize_13407) ? (*Gch_13406).Stat.Cycletablesize : Tabsize_13407);
memset((void*)&Marker_13423, 0, sizeof(Marker_13423));
Init_10288(&Marker_13423);
C_13425 = 0;
memset((void*)&HEX3Atmp_19524, 0, sizeof(HEX3Atmp_19524));
HEX3Atmp_19524 = (*Gch_13406).Cycleroots;
R_19526 = 0;
R_19526 = HEX3Atmp_19524.Head;
while (1) {
if (!!((R_19526 == NIM_NIL))) goto LA7;
I_19528 = 0;
I_19528 = 0;
while (1) {
if (!(I_19528 <= 15)) goto LA8;
W_19530 = 0;
W_19530 = (*R_19526).Bits[(I_19528)-0];
J_19532 = 0;
J_19532 = 0;
while (1) {
if (!!((W_19530 == 0))) goto LA9;
if (!!(((NI32)(W_19530 & 1) == 0))) goto LA11;
C_13425 = ((TY10202*) ((NI32)((NI32)((NU32)((*R_19526).Key) << (NU32)(12)) | (NI32)((NU32)((NI32)((NU32)((NI32)((NU32)(I_19528) << (NU32)(5))) + (NU32)(J_19532))) * (NU32)(8)))));
if (!((NU32)(8) <= (NU32)((*C_13425).Refcount))) goto LA14;
LOC17 = Containsorincl_10499(&Marker_13423, C_13425);
if (!!(LOC17)) goto LA18;
(*Gch_13406).Tempstack.Len = 0;
Forallchildren_11212(C_13425, ((NU8) 1));
while (1) {
if (!(0 < (*Gch_13406).Tempstack.Len)) goto LA20;
(*Gch_13406).Tempstack.Len -= 1;
D_13441 = 0;
D_13441 = (*Gch_13406).Tempstack.D[((*Gch_13406).Tempstack.Len)-0];
(*D_13441).Refcount = (NI32)((NU32)((*D_13441).Refcount) + (NU32)(8));
LOC22 = Contains_10454((*Gch_13406).Cycleroots, D_13441);
if (!(LOC22)) goto LA23;
LOC24 = Containsorincl_10499(&Marker_13423, D_13441);
LOC22 = !(LOC24);
LA23: ;
if (!LOC22) goto LA25;
Forallchildren_11212(D_13441, ((NU8) 1));
LA25: ;
} LA20: ;
LA18: ;
LA14: ;
LA11: ;
J_19532 += 1;
W_19530 = (NI32)((NU32)(W_19530) >> (NU32)(1));
} LA9: ;
I_19528 += 1;
} LA8: ;
R_19526 = (*R_19526).Next;
} LA7: ;
C_13445 = 0;
memset((void*)&HEX3Atmp_19558, 0, sizeof(HEX3Atmp_19558));
HEX3Atmp_19558 = (*Gch_13406).Cycleroots;
R_19560 = 0;
R_19560 = HEX3Atmp_19558.Head;
while (1) {
if (!!((R_19560 == NIM_NIL))) goto LA27;
I_19562 = 0;
I_19562 = 0;
while (1) {
if (!(I_19562 <= 15)) goto LA28;
W_19564 = 0;
W_19564 = (*R_19560).Bits[(I_19562)-0];
J_19566 = 0;
J_19566 = 0;
while (1) {
if (!!((W_19564 == 0))) goto LA29;
if (!!(((NI32)(W_19564 & 1) == 0))) goto LA31;
C_13445 = ((TY10202*) ((NI32)((NI32)((NU32)((*R_19560).Key) << (NU32)(12)) | (NI32)((NU32)((NI32)((NU32)((NI32)((NU32)(I_19562) << (NU32)(5))) + (NU32)(J_19566))) * (NU32)(8)))));
if (!((NU32)((*C_13445).Refcount) < (NU32)(8))) goto LA34;
(*Gch_13406).Tempstack.Len = 0;
Forallchildren_11212(C_13445, ((NU8) 1));
while (1) {
if (!(0 < (*Gch_13406).Tempstack.Len)) goto LA36;
(*Gch_13406).Tempstack.Len -= 1;
D_13460 = 0;
D_13460 = (*Gch_13406).Tempstack.D[((*Gch_13406).Tempstack.Len)-0];
if (!((NU32)((*D_13460).Refcount) < (NU32)(8))) goto LA38;
LOC41 = Contains_10454((*Gch_13406).Cycleroots, D_13460);
if (!!(LOC41)) goto LA42;
Addzct_10611(&(*Gch_13406).Zct, D_13460);
LA42: ;
LA38: ;
} LA36: ;
Preparedealloc_11225(C_13445);
Rawdealloc_9464(&Allocator_8329, ((void*) (C_13445)));
LA34: ;
LA31: ;
J_19566 += 1;
W_19564 = (NI32)((NU32)(W_19564) >> (NU32)(1));
} LA29: ;
I_19562 += 1;
} LA28: ;
R_19560 = (*R_19560).Next;
} LA27: ;
Deinit_10292(&(*Gch_13406).Cycleroots);
Init_10288(&(*Gch_13406).Cycleroots);
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254) {
Incl_10474(&Gch_10608.Cycleroots, C_11254);
}
static N_INLINE(void, Decref_11260)(TY10202* C_11262) {
NIM_BOOL LOC4;
(*C_11262).Refcount = (NI32)((NU32)((*C_11262).Refcount) - (NU32)(8));
if (!((NU32)((*C_11262).Refcount) < (NU32)(8))) goto LA2;
Rtladdzct_11256(C_11262);
goto LA1;
LA2: ;
LOC4 = Canbecycleroot_10626(C_11262);
if (!LOC4) goto LA5;
Rtladdcycleroot_11252(C_11262);
goto LA1;
LA5: ;
LA1: ;
}
N_NIMCALL(void, Unmarkstackandregisters_15801)(TY10590* Gch_15804) {
TY10202** D_15805;
NI I_15813;
NI HEX3Atmp_19593;
NI Res_19595;
D_15805 = 0;
D_15805 = (*Gch_15804).Decstack.D;
I_15813 = 0;
HEX3Atmp_19593 = 0;
HEX3Atmp_19593 = (NI32)((*Gch_15804).Decstack.Len - 1);
Res_19595 = 0;
Res_19595 = 0;
while (1) {
if (!(Res_19595 <= HEX3Atmp_19593)) goto LA1;
I_15813 = Res_19595;
Decref_11260(D_15805[(I_15813)-0]);
Res_19595 += 1;
} LA1: ;
(*Gch_15804).Decstack.Len = 0;
}
N_NIMCALL(void, Collectct_11205)(TY10590* Gch_11208) {
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC5;
NI LOC7;
NI LOC11;
NIM_BOOL LOC13;
NI LOC14;
NI LOC18;
LOC3 = (256 <= (*Gch_11208).Zct.Len);
if (LOC3) goto LA4;
LOC5 = NIM_TRUE;
if (!(LOC5)) goto LA6;
LOC7 = Getoccupiedmem_2004();
LOC5 = (Cyclethreshold_10609 <= LOC7);
LA6: ;
LOC3 = LOC5;
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA8;
LOC2 = NIM_FALSE;
LA8: ;
if (!LOC2) goto LA9;
LOC11 = Stacksize_15001();
(*Gch_11208).Stat.Maxstacksize = (((*Gch_11208).Stat.Maxstacksize >= LOC11) ? (*Gch_11208).Stat.Maxstacksize : LOC11);
Markstackandregisters_15019(Gch_11208);
Markthreadstacks_14211(Gch_11208);
(*Gch_11208).Stat.Maxstackcells = (((*Gch_11208).Stat.Maxstackcells >= (*Gch_11208).Decstack.Len) ? (*Gch_11208).Stat.Maxstackcells : (*Gch_11208).Decstack.Len);
(*Gch_11208).Stat.Stackscans += 1;
Collectzct_15201(Gch_11208);
LOC14 = Getoccupiedmem_2004();
LOC13 = (Cyclethreshold_10609 <= LOC14);
if (LOC13) goto LA15;
LOC13 = NIM_FALSE;
LA15: ;
if (!LOC13) goto LA16;
Collectcycles_13403(Gch_11208);
Collectzct_15201(Gch_11208);
(*Gch_11208).Stat.Cyclecollections += 1;
LOC18 = Getoccupiedmem_2004();
Cyclethreshold_10609 = ((4194304 >= (NI32)(LOC18 * 2)) ? 4194304 : (NI32)(LOC18 * 2));
(*Gch_11208).Stat.Maxthreshold = (((*Gch_11208).Stat.Maxthreshold >= Cyclethreshold_10609) ? (*Gch_11208).Stat.Maxthreshold : Cyclethreshold_10609);
LA16: ;
Unmarkstackandregisters_15801(Gch_11208);
LA9: ;
}
static N_INLINE(void, Checkcollection_11900)(void) {
if (!(Recgclock_10610 == 0)) goto LA2;
Collectct_11205(&Gch_10608);
LA2: ;
}
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908) {
void* Result_11909;
TY10202* Res_11923;
void* LOC1;
NI L_12002;
TY10202** D_12003;
NI I_12013;
NI HEX3Atmp_19493;
NI HEX3Atmp_19494;
NI Res_19496;
TY10202* C_12014;
Result_11909 = 0;
Checkcollection_11900();
Res_11923 = 0;
LOC1 = Rawalloc_9195(&Allocator_8329, (NI32)(Size_11908 + ((NI)sizeof(TY10202))));
Res_11923 = ((TY10202*) (LOC1));
zeroMem(((void*) (Res_11923)), (NI32)(Size_11908 + ((NI)sizeof(TY10202))));
(*Res_11923).Typ = Typ_11907;
(*Res_11923).Refcount = 4;
L_12002 = 0;
L_12002 = Gch_10608.Zct.Len;
D_12003 = 0;
D_12003 = Gch_10608.Zct.D;
I_12013 = 0;
HEX3Atmp_19493 = 0;
HEX3Atmp_19494 = 0;
HEX3Atmp_19493 = (NI32)(L_12002 - 1);
HEX3Atmp_19494 = ((0 >= (NI32)(L_12002 - 8)) ? 0 : (NI32)(L_12002 - 8));
Res_19496 = 0;
Res_19496 = HEX3Atmp_19493;
while (1) {
if (!(HEX3Atmp_19494 <= Res_19496)) goto LA3;
I_12013 = Res_19496;
C_12014 = 0;
C_12014 = D_12003[(I_12013)-0];
if (!((NU32)(8) <= (NU32)((*C_12014).Refcount))) goto LA5;
(*C_12014).Refcount = (NI32)((*C_12014).Refcount & -8);
D_12003[(I_12013)-0] = Res_11923;
goto LA2;
LA5: ;
Res_19496 -= 1;
} LA3: ;
Add_10258(&Gch_10608.Zct, Res_11923);
LA2: ;
Result_11909 = Celltousr_10618(Res_11923);
return Result_11909;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI32)((NU32)((*C_11418).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI32)((NU32)((*C_11419).Refcount) - (NU32)(8));
if (!((NU32)((*C_11419).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887) {
NimStringDesc* Result_16888;
NI S_16889;
void* LOC4;
Result_16888 = 0;
S_16889 = 0;
S_16889 = Space_16887;
if (!(S_16889 < 8)) goto LA2;
S_16889 = 7;
LA2: ;
LOC4 = newObj(&Strdesc_3017, (NI32)(((NI)sizeof(TGenericSeq)) + (NI32)((NI32)(S_16889 + 1) * 1)));
Result_16888 = ((NimStringDesc*) (LOC4));
(*Result_16888).Sup.space = S_16889;
return Result_16888;
}
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908) {
NimStringDesc* Result_16909;
Result_16909 = 0;
if (!(Src_16908 == NIM_NIL)) goto LA2;
Result_16909 = NIM_NIL;
goto BeforeRet;
LA2: ;
Result_16909 = rawNewString((*Src_16908).Sup.space);
(*Result_16909).Sup.len = (*Src_16908).Sup.len;
memcpy(((NCSTRING) ((*Result_16909).data)), ((NCSTRING) ((*Src_16908).data)), ((NI32) ((NI32)((NI32)((*Src_16908).Sup.len + 1) * 1))));
BeforeRet: ;
return Result_16909;
}
N_NIMCALL(void, Gcdisable_2663)(void) {
Recgclock_10610 += 1;
}
N_NOINLINE(NIM_BOOL, Isonstack_11209)(void* P_11211) {
NIM_BOOL Result_15011;
TY15004 Stacktop_15014;
NI B_15015;
NI A_15017;
NI X_15018;
NIM_BOOL LOC1;
Result_15011 = 0;
memset((void*)&Stacktop_15014, 0, sizeof(Stacktop_15014));
B_15015 = 0;
B_15015 = ((NI) (Stackbottom_10607));
A_15017 = 0;
A_15017 = ((NI) (&Stacktop_15014[(0)-0]));
X_15018 = 0;
X_15018 = ((NI) (P_11211));
LOC1 = ((NU32)(A_15017) <= (NU32)(X_15018));
if (!(LOC1)) goto LA2;
LOC1 = ((NU32)(X_15018) <= (NU32)(B_15015));
LA2: ;
Result_15011 = LOC1;
return Result_15011;
}
static N_INLINE(void, Incref_11401)(TY10202* C_11403) {
NIM_BOOL LOC2;
(*C_11403).Refcount = (NI32)((NU32)((*C_11403).Refcount) + (NU32)(8));
LOC2 = Canbecycleroot_10626(C_11403);
if (!LOC2) goto LA3;
Rtladdcycleroot_11252(C_11403);
LA3: ;
}
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11422, void* Src_11423) {
NIM_BOOL LOC2;
TY10202* LOC8;
TY10202* LOC12;
LOC2 = Isonstack_11209(((void*) (Dest_11422)));
if (!!(LOC2)) goto LA3;
if (!!((Src_11423 == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_10622(Src_11423);
Incref_11401(LOC8);
LA6: ;
if (!!(((*Dest_11422) == NIM_NIL))) goto LA10;
LOC12 = Usrtocell_10622((*Dest_11422));
Decref_11260(LOC12);
LA10: ;
LA3: ;
(*Dest_11422) = Src_11423;
}
static N_INLINE(NI, Resize_16801)(NI Old_16803) {
NI Result_16804;
Result_16804 = 0;
if (!(Old_16803 <= 0)) goto LA2;
Result_16804 = 4;
goto BeforeRet;
goto LA1;
LA2: ;
if (!(Old_16803 < 65536)) goto LA4;
Result_16804 = (NI32)(Old_16803 * 2);
goto BeforeRet;
goto LA1;
LA4: ;
Result_16804 = (NI32)((NI32)(Old_16803 * 3) / 2);
goto BeforeRet;
LA1: ;
BeforeRet: ;
return Result_16804;
}
N_NIMCALL(void*, Growobj_12406)(void* Old_12408, NI Newsize_12409) {
void* Result_12410;
TY10202* Ol_12411;
TY10202* Res_12436;
void* LOC1;
NI Elemsize_12437;
NI Oldsize_12447;
NI J_12452;
TY10202** D_12453;
NIM_BOOL LOC13;
Result_12410 = 0;
Checkcollection_11900();
Ol_12411 = 0;
Ol_12411 = Usrtocell_10622(Old_12408);
Res_12436 = 0;
LOC1 = Rawalloc_9195(&Allocator_8329, (NI32)(Newsize_12409 + ((NI)sizeof(TY10202))));
Res_12436 = ((TY10202*) (LOC1));
Elemsize_12437 = 0;
Elemsize_12437 = 1;
if (!!(((*(*Ol_12411).Typ).kind == ((NU8) 28)))) goto LA3;
Elemsize_12437 = (*(*(*Ol_12411).Typ).base).size;
LA3: ;
Oldsize_12447 = 0;
Oldsize_12447 = (NI32)((NI32)((*((TGenericSeq*) (Old_12408))).len * Elemsize_12437) + 8);
memcpy(((void*) (Res_12436)), ((void*) (Ol_12411)), (NI32)(Oldsize_12447 + ((NI)sizeof(TY10202))));
zeroMem(((void*) ((NI32)((NU32)((NI32)((NU32)(((NI) (Res_12436))) + (NU32)(Oldsize_12447))) + (NU32)(((NI)sizeof(TY10202)))))), (NI32)(Newsize_12409 - Oldsize_12447));
if (!((NI32)((*Ol_12411).Refcount & 7) == 4)) goto LA6;
J_12452 = 0;
J_12452 = (NI32)(Gch_10608.Zct.Len - 1);
D_12453 = 0;
D_12453 = Gch_10608.Zct.D;
while (1) {
if (!(0 <= J_12452)) goto LA8;
if (!(D_12453[(J_12452)-0] == Ol_12411)) goto LA10;
D_12453[(J_12452)-0] = Res_12436;
goto LA8;
LA10: ;
J_12452 -= 1;
} LA8: ;
LA6: ;
LOC13 = Canbecycleroot_10626(Ol_12411);
if (!LOC13) goto LA14;
Excl_10481(&Gch_10608.Cycleroots, Ol_12411);
LA14: ;
Rawdealloc_9464(&Allocator_8329, ((void*) (Ol_12411)));
Result_12410 = Celltousr_10618(Res_12436);
return Result_12410;
}
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_16982, NI Addlen_16983) {
NimStringDesc* Result_16984;
NI Sp_16989;
NI LOC4;
void* LOC5;
Result_16984 = 0;
if (!((NI32)((NI32)((*Dest_16982).Sup.len + Addlen_16983) + 1) <= (*Dest_16982).Sup.space)) goto LA2;
Result_16984 = Dest_16982;
goto LA1;
LA2: ;
Sp_16989 = 0;
LOC4 = Resize_16801((*Dest_16982).Sup.space);
Sp_16989 = ((LOC4 >= (NI32)((NI32)((*Dest_16982).Sup.len + Addlen_16983) + 1)) ? LOC4 : (NI32)((NI32)((*Dest_16982).Sup.len + Addlen_16983) + 1));
LOC5 = Growobj_12406(((void*) (Dest_16982)), (NI32)(((NI)sizeof(TGenericSeq)) + (NI32)((NI32)(Sp_16989 + 1) * 1)));
Result_16984 = ((NimStringDesc*) (LOC5));
(*Result_16984).Sup.space = Sp_16989;
LA1: ;
return Result_16984;
}
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17025, NI Newlen_17026) {
NimStringDesc* Result_17027;
NI N_17030;
Result_17027 = 0;
N_17030 = 0;
N_17030 = ((Newlen_17026 >= 0) ? Newlen_17026 : 0);
if (!(N_17030 <= (*S_17025).Sup.space)) goto LA2;
Result_17027 = S_17025;
goto LA1;
LA2: ;
Result_17027 = resizeString(S_17025, N_17030);
LA1: ;
(*Result_17027).Sup.len = N_17030;
(*Result_17027).data[(N_17030)-0] = 0;
return Result_17027;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI32)((NI32)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17603) {
NimStringDesc* Result_17604;
NI I_17605;
NI Y_17606;
NI D_17607;
NI J_17648;
NI HEX3Atmp_19612;
NI Res_19614;
NIM_CHAR LOC9;
Result_17604 = 0;
Result_17604 = mnewString(16);
I_17605 = 0;
I_17605 = 0;
Y_17606 = 0;
Y_17606 = X_17603;
while (1) {
D_17607 = 0;
D_17607 = (NI32)(Y_17606 / 10);
Result_17604->data[I_17605] = ((NIM_CHAR) (((NI) ((NI32)((NI32)abs(((NI) ((NI32)(Y_17606 - (NI32)(D_17607 * 10))))) + 48)))));
I_17605 += 1;
Y_17606 = D_17607;
if (!(Y_17606 == 0)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
if (!(X_17603 < 0)) goto LA6;
Result_17604->data[I_17605] = 45;
I_17605 += 1;
LA6: ;
Result_17604 = setLengthStr(Result_17604, I_17605);
J_17648 = 0;
HEX3Atmp_19612 = 0;
HEX3Atmp_19612 = (NI32)((NI32)(I_17605 / 2) - 1);
Res_19614 = 0;
Res_19614 = 0;
while (1) {
if (!(Res_19614 <= HEX3Atmp_19612)) goto LA8;
J_17648 = Res_19614;
LOC9 = Result_17604->data[J_17648];
Result_17604->data[J_17648] = Result_17604->data[(NI32)((NI32)(I_17605 - J_17648) - 1)];
Result_17604->data[(NI32)((NI32)(I_17605 - J_17648) - 1)] = LOC9;
Res_19614 += 1;
} LA8: ;
return Result_17604;
}
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604) {
NimStringDesc* Result_16965;
void* LOC4;
Result_16965 = 0;
Result_16965 = S_1603;
if (!((*Result_16965).Sup.space <= (*Result_16965).Sup.len)) goto LA2;
(*Result_16965).Sup.space = Resize_16801((*Result_16965).Sup.space);
LOC4 = Growobj_12406(((void*) (Result_16965)), (NI32)(((NI)sizeof(TGenericSeq)) + (NI32)((NI32)((*Result_16965).Sup.space + 1) * 1)));
Result_16965 = ((NimStringDesc*) (LOC4));
LA2: ;
(*Result_16965).data[((*Result_16965).Sup.len)-0] = C_1604;
(*Result_16965).data[((NI32)((*Result_16965).Sup.len + 1))-0] = 0;
(*Result_16965).Sup.len += 1;
return Result_16965;
}
N_NIMCALL(void, Add_2722)(NimStringDesc** X_2725, NCSTRING Y_2726) {
NI I_2727;
I_2727 = 0;
I_2727 = 0;
while (1) {
if (!!(((NU8)(Y_2726[I_2727]) == (NU8)(0)))) goto LA1;
(*X_2725) = addChar((*X_2725), Y_2726[I_2727]);
I_2727 += 1;
} LA1: ;
}
N_NIMCALL(void, Auxwritestacktrace_4684)(TFrame* F_4686, NimStringDesc** S_4688) {
TFrame* It_4690;
NI I_4691;
NI Total_4692;
NIM_BOOL LOC2;
TFrame* B_4730;
NI J_4761;
NI HEX3Atmp_19421;
NI Res_19423;
NIM_BOOL LOC13;
NI J_4834;
NI HEX3Atmp_19434;
NI Res_19436;
NimStringDesc* LOC19;
NI Oldlen_4850;
NimStringDesc* LOC23;
NI K_4866;
NI HEX3Atmp_19428;
NI Res_19430;
It_4690 = 0;
It_4690 = F_4686;
I_4691 = 0;
I_4691 = 0;
Total_4692 = 0;
Total_4692 = 0;
while (1) {
LOC2 = !((It_4690 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = (I_4691 <= 96);
LA3: ;
if (!LOC2) goto LA1;
Tempframes_4682[(I_4691)-0] = It_4690;
I_4691 += 1;
Total_4692 += 1;
It_4690 = (*It_4690).prev;
} LA1: ;
B_4730 = 0;
B_4730 = It_4690;
while (1) {
if (!!((It_4690 == NIM_NIL))) goto LA4;
Total_4692 += 1;
It_4690 = (*It_4690).prev;
} LA4: ;
J_4761 = 0;
HEX3Atmp_19421 = 0;
HEX3Atmp_19421 = (NI32)((NI32)(Total_4692 - I_4691) - 31);
Res_19423 = 0;
Res_19423 = 1;
while (1) {
if (!(Res_19423 <= HEX3Atmp_19421)) goto LA5;
J_4761 = Res_19423;
if (!!((B_4730 == NIM_NIL))) goto LA7;
B_4730 = (*B_4730).prev;
LA7: ;
Res_19423 += 1;
} LA5: ;
if (!!((Total_4692 == I_4691))) goto LA10;
Tempframes_4682[(I_4691)-0] = NIM_NIL;
I_4691 += 1;
LA10: ;
while (1) {
LOC13 = !((B_4730 == NIM_NIL));
if (!(LOC13)) goto LA14;
LOC13 = (I_4691 <= 127);
LA14: ;
if (!LOC13) goto LA12;
Tempframes_4682[(I_4691)-0] = B_4730;
I_4691 += 1;
B_4730 = (*B_4730).prev;
} LA12: ;
J_4834 = 0;
HEX3Atmp_19434 = 0;
HEX3Atmp_19434 = (NI32)(I_4691 - 1);
Res_19436 = 0;
Res_19436 = HEX3Atmp_19434;
while (1) {
if (!(0 <= Res_19436)) goto LA15;
J_4834 = Res_19436;
if (!(Tempframes_4682[(J_4834)-0] == NIM_NIL)) goto LA17;
(*S_4688) = resizeString((*S_4688), 1);
appendString((*S_4688), ((NimStringDesc*) &TMP19711));
LOC19 = nimIntToStr((NI32)((NI32)(Total_4692 - I_4691) - 1));
(*S_4688) = resizeString((*S_4688), LOC19->Sup.len + 0);
appendString((*S_4688), LOC19);
(*S_4688) = resizeString((*S_4688), 19);
appendString((*S_4688), ((NimStringDesc*) &TMP19712));
goto LA16;
LA17: ;
Oldlen_4850 = 0;
Oldlen_4850 = (*S_4688)->Sup.len;
Add_2722(S_4688, (*Tempframes_4682[(J_4834)-0]).filename);
if (!(0 < (*Tempframes_4682[(J_4834)-0]).line)) goto LA21;
(*S_4688) = addChar((*S_4688), 40);
LOC23 = nimIntToStr((*Tempframes_4682[(J_4834)-0]).line);
(*S_4688) = resizeString((*S_4688), LOC23->Sup.len + 0);
appendString((*S_4688), LOC23);
(*S_4688) = addChar((*S_4688), 41);
LA21: ;
K_4866 = 0;
HEX3Atmp_19428 = 0;
HEX3Atmp_19428 = ((1 >= (NI32)(25 - (NI32)((*S_4688)->Sup.len - Oldlen_4850))) ? 1 : (NI32)(25 - (NI32)((*S_4688)->Sup.len - Oldlen_4850)));
Res_19430 = 0;
Res_19430 = 1;
while (1) {
if (!(Res_19430 <= HEX3Atmp_19428)) goto LA24;
K_4866 = Res_19430;
(*S_4688) = addChar((*S_4688), 32);
Res_19430 += 1;
} LA24: ;
Add_2722(S_4688, (*Tempframes_4682[(J_4834)-0]).procname);
LA16: ;
(*S_4688) = resizeString((*S_4688), Stacktracenewline_4683->Sup.len + 0);
appendString((*S_4688), Stacktracenewline_4683);
Res_19436 -= 1;
} LA15: ;
}
N_NIMCALL(void, Rawwritestacktrace_4867)(NimStringDesc** S_4870) {
if (!(framePtr == NIM_NIL)) goto LA2;
(*S_4870) = resizeString((*S_4870), 28);
appendString((*S_4870), ((NimStringDesc*) &TMP19709));
(*S_4870) = resizeString((*S_4870), Stacktracenewline_4683->Sup.len + 0);
appendString((*S_4870), Stacktracenewline_4683);
goto LA1;
LA2: ;
(*S_4870) = resizeString((*S_4870), 33);
appendString((*S_4870), ((NimStringDesc*) &TMP19710));
(*S_4870) = resizeString((*S_4870), Stacktracenewline_4683->Sup.len + 0);
appendString((*S_4870), Stacktracenewline_4683);
Auxwritestacktrace_4684(framePtr, S_4870);
LA1: ;
}
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_16899, NI Len_16900) {
NimStringDesc* Result_16901;
Result_16901 = 0;
Result_16901 = rawNewString(Len_16900);
(*Result_16901).Sup.len = Len_16900;
memcpy(((NCSTRING) ((*Result_16901).data)), Str_16899, ((NI32) ((NI32)((NI32)(Len_16900 + 1) * 1))));
(*Result_16901).data[(Len_16900)-0] = 0;
return Result_16901;
}
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_16904) {
NimStringDesc* Result_16905;
NI LOC1;
Result_16905 = 0;
LOC1 = strlen(Str_16904);
Result_16905 = toNimStr(Str_16904, LOC1);
goto BeforeRet;
BeforeRet: ;
return Result_16905;
}
N_NIMCALL(void, Write_3670)(FILE* F_3672, NCSTRING C_3673) {
fputs(C_3673, F_3672);
}
N_NIMCALL(void, Writetostderr_4432)(NCSTRING Msg_4434) {
Write_3670(stdout, Msg_4434);
}
static N_INLINE(void, Quitordebug_4882)(void) {
exit(1);
}
N_NIMCALL(void, Gcenable_2665)(void) {
if (!(0 < Recgclock_10610)) goto LA2;
Recgclock_10610 -= 1;
LA2: ;
}
N_NIMCALL(void, raiseException)(E_Base* E_4604, NCSTRING Ename_4605) {
NIM_BOOL LOC8;
NimStringDesc* LOC12;
Gcdisable_2663();
(*E_4604).name = Ename_4605;
if (!!((excHandler == NIM_NIL))) goto LA2;
unsureAsgnRef((void**) &(*excHandler).exc, E_4604);
longjmp((*excHandler).context, ((NI32) 1));
goto LA1;
LA2: ;
if (!!(Buf_4677 == 0)) goto LA5;
Buf_4677 = setLengthStr(Buf_4677, 0);
Rawwritestacktrace_4867(&Buf_4677);
LOC8 = !(((*E_4604).message == NIM_NIL));
if (!(LOC8)) goto LA9;
LOC8 = !(((NU8)((*E_4604).message->data[0]) == (NU8)(0)));
LA9: ;
if (!LOC8) goto LA10;
Buf_4677 = resizeString(Buf_4677, 28);
appendString(Buf_4677, ((NimStringDesc*) &TMP19713));
Buf_4677 = resizeString(Buf_4677, (*E_4604).message->Sup.len + 0);
appendString(Buf_4677, (*E_4604).message);
goto LA7;
LA10: ;
Buf_4677 = resizeString(Buf_4677, 26);
appendString(Buf_4677, ((NimStringDesc*) &TMP19714));
LA7: ;
Buf_4677 = resizeString(Buf_4677, 2);
appendString(Buf_4677, ((NimStringDesc*) &TMP19715));
LOC12 = cstrToNimstr(Ename_4605);
Buf_4677 = resizeString(Buf_4677, LOC12->Sup.len + 0);
appendString(Buf_4677, LOC12);
Buf_4677 = resizeString(Buf_4677, 3);
appendString(Buf_4677, ((NimStringDesc*) &TMP19716));
Writetostderr_4432(Buf_4677->data);
goto LA4;
LA5: ;
Writetostderr_4432(Ename_4605);
LA4: ;
Quitordebug_4882();
LA1: ;
Gcenable_2665();
}
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661) {
NI LOC2;
TY420* E_4263;
LOC2 = Writebuffer_3733(F_3660, ((void*) (S_3661->data)), S_3661->Sup.len);
if (!!((LOC2 == S_3661->Sup.len))) goto LA3;
E_4263 = 0;
E_4263 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4263).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4263).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP19708)));
raiseException((E_Base*)E_4263, "EIO");
LA3: ;
}
static N_INLINE(void, rawEcho)(NimStringDesc* X_4094) {
Write_3658(stdout, X_4094);
}
static N_INLINE(void, rawEchoNL)(void) {
Write_3658(stdout, ((NimStringDesc*) &TMP19717));
}
N_NIMCALL(void, Quit_2822)(NimStringDesc* Errormsg_2824) {
rawEcho(Errormsg_2824);
rawEchoNL();
exit(1);
}
N_NIMCALL(void, Raiseoutofmem_7858)(void) {
if (!(Goutofmem_7857 == NIM_NIL)) goto LA2;
Quit_2822(((NimStringDesc*) &TMP19718));
LA2: ;
asgnRefNoCycle((void**) &(*Goutofmem_7857).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP19719)));
raiseException((E_Base*)Goutofmem_7857, "EOutOfMemory");
}
static N_INLINE(void*, Osallocpages_7888)(NI Size_7890) {
void* Result_7891;
Result_7891 = 0;
Result_7891 = VirtualAlloc(NIM_NIL, Size_7890, ((NI32) 12288), ((NI32) 4));
if (!(Result_7891 == NIM_NIL)) goto LA2;
Raiseoutofmem_7858();
LA2: ;
return Result_7891;
}
static N_INLINE(void, Inccurrmem_8286)(TY8274* A_8289, NI Bytes_8290) {
(*A_8289).Currmem += Bytes_8290;
}
N_NIMCALL(void*, Llalloc_8330)(TY8274* A_8333, NI Size_8334) {
void* Result_8335;
NIM_BOOL LOC2;
NI Request_8349;
void* LOC6;
Result_8335 = 0;
LOC2 = ((*A_8333).Llmem == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = ((*(*A_8333).Llmem).Size < Size_8334);
LA3: ;
if (!LOC2) goto LA4;
Request_8349 = 0;
Request_8349 = Roundup_8256((NI32)(Size_8334 + ((NI)sizeof(TY8272))), 4096);
LOC6 = Osallocpages_7888(Request_8349);
(*A_8333).Llmem = ((TY8272*) (LOC6));
Inccurrmem_8286(A_8333, Request_8349);
(*(*A_8333).Llmem).Size = (NI32)(Request_8349 - ((NI)sizeof(TY8272)));
(*(*A_8333).Llmem).Acc = ((NI)sizeof(TY8272));
LA4: ;
Result_8335 = ((void*) ((NI32)(((NI) ((*A_8333).Llmem)) + (*(*A_8333).Llmem).Acc)));
(*(*A_8333).Llmem).Size -= Size_8334;
(*(*A_8333).Llmem).Acc += Size_8334;
zeroMem(Result_8335, Size_8334);
return Result_8335;
}
N_NIMCALL(TY8207*, Intsetput_8393)(TY8211* T_8396, NI Key_8397) {
TY8207* Result_8398;
void* LOC4;
Result_8398 = 0;
Result_8398 = Intsetget_8374(&(*T_8396), Key_8397);
if (!(Result_8398 == NIM_NIL)) goto LA2;
LOC4 = Llalloc_8330(&Allocator_8329, ((NI)sizeof(TY8207)));
Result_8398 = ((TY8207*) (LOC4));
(*Result_8398).Next = (*T_8396).Data[((NI32)(Key_8397 & 1023))-0];
(*T_8396).Data[((NI32)(Key_8397 & 1023))-0] = Result_8398;
(*Result_8398).Key = Key_8397;
LA2: ;
return Result_8398;
}
N_NIMCALL(void, Incl_8431)(TY8211* S_8434, NI Key_8435) {
TY8207* T_8436;
NI U_8437;
T_8436 = 0;
T_8436 = Intsetput_8393(S_8434, (NI32)((NU32)(Key_8435) >> (NU32)(9)));
U_8437 = 0;
U_8437 = (NI32)(Key_8435 & 511);
(*T_8436).Bits[((NI32)((NU32)(U_8437) >> (NU32)(5)))-0] = (NI32)((*T_8436).Bits[((NI32)((NU32)(U_8437) >> (NU32)(5)))-0] | (NI32)((NU32)(1) << (NU32)((NI32)(U_8437 & 31))));
}
N_NIMCALL(void, Splitchunk_9066)(TY8274* A_9069, TY8234* C_9070, NI Size_9071) {
TY8234* Rest_9072;
NI LOC1;
Rest_9072 = 0;
Rest_9072 = ((TY8234*) ((NI32)((NU32)(((NI) (C_9070))) + (NU32)(Size_9071))));
(*Rest_9072).Sup.Size = (NI32)((*C_9070).Sup.Size - Size_9071);
(*Rest_9072).Sup.Used = NIM_FALSE;
(*Rest_9072).Next = NIM_NIL;
(*Rest_9072).Prev = NIM_NIL;
(*Rest_9072).Sup.Prevsize = Size_9071;
Updateprevsize_8611(A_9069, C_9070, (*Rest_9072).Sup.Size);
(*C_9070).Sup.Size = Size_9071;
LOC1 = Pageindex_8477(&Rest_9072->Sup);
Incl_8431(&(*A_9069).Chunkstarts, LOC1);
Listadd_9007(&(*A_9069).Freechunkslist, Rest_9072);
}
N_NIMCALL(TY8234*, Requestoschunks_8492)(TY8274* A_8495, NI Size_8496) {
TY8234* Result_8497;
void* LOC1;
NI Nxt_8512;
TY8230* Next_8515;
NI LOC3;
NIM_BOOL LOC4;
NI Prv_8518;
TY8230* Prev_8521;
NIM_BOOL LOC8;
NI LOC9;
Result_8497 = 0;
Inccurrmem_8286(A_8495, Size_8496);
(*A_8495).Freemem += Size_8496;
LOC1 = Osallocpages_7888(Size_8496);
Result_8497 = ((TY8234*) (LOC1));
(*Result_8497).Next = NIM_NIL;
(*Result_8497).Prev = NIM_NIL;
(*Result_8497).Sup.Used = NIM_FALSE;
(*Result_8497).Sup.Size = Size_8496;
Nxt_8512 = 0;
Nxt_8512 = (NI32)((NU32)(((NI) (Result_8497))) + (NU32)(Size_8496));
Next_8515 = 0;
Next_8515 = ((TY8230*) (Nxt_8512));
LOC3 = Pageindex_8477(Next_8515);
LOC4 = Contains_8411(&(*A_8495).Chunkstarts, LOC3);
if (!LOC4) goto LA5;
(*Next_8515).Prevsize = Size_8496;
LA5: ;
Prv_8518 = 0;
Prv_8518 = (NI32)((NU32)(((NI) (Result_8497))) - (NU32)(Lastsize_8491));
Prev_8521 = 0;
Prev_8521 = ((TY8230*) (Prv_8518));
LOC9 = Pageindex_8477(Prev_8521);
LOC8 = Contains_8411(&(*A_8495).Chunkstarts, LOC9);
if (!(LOC8)) goto LA10;
LOC8 = ((*Prev_8521).Size == Lastsize_8491);
LA10: ;
if (!LOC8) goto LA11;
(*Result_8497).Sup.Prevsize = Lastsize_8491;
goto LA7;
LA11: ;
(*Result_8497).Sup.Prevsize = 0;
LA7: ;
Lastsize_8491 = Size_8496;
return Result_8497;
}
N_NIMCALL(TY8234*, Getbigchunk_9092)(TY8274* A_9095, NI Size_9096) {
TY8234* Result_9097;
NI LOC11;
Result_9097 = 0;
Result_9097 = (*A_9095).Freechunkslist;
while (1) {
if (!!((Result_9097 == NIM_NIL))) goto LA2;
if (!((*Result_9097).Sup.Size == Size_9096)) goto LA4;
Listremove_8646(&(*A_9095).Freechunkslist, Result_9097);
goto LA1;
goto LA3;
LA4: ;
if (!(Size_9096 < (*Result_9097).Sup.Size)) goto LA6;
Listremove_8646(&(*A_9095).Freechunkslist, Result_9097);
Splitchunk_9066(A_9095, Result_9097, Size_9096);
goto LA1;
goto LA3;
LA6: ;
LA3: ;
Result_9097 = (*Result_9097).Next;
} LA2: ;
if (!(Size_9096 < 524288)) goto LA9;
Result_9097 = Requestoschunks_8492(A_9095, 524288);
Splitchunk_9066(A_9095, Result_9097, Size_9096);
goto LA8;
LA9: ;
Result_9097 = Requestoschunks_8492(A_9095, Size_9096);
LA8: ;
LA1: ;
(*Result_9097).Sup.Prevsize = 0;
(*Result_9097).Sup.Used = NIM_TRUE;
LOC11 = Pageindex_8477(&Result_9097->Sup);
Incl_8431(&(*A_9095).Chunkstarts, LOC11);
(*A_9095).Freemem -= Size_9096;
return Result_9097;
}
N_NIMCALL(TY8232*, Getsmallchunk_9162)(TY8274* A_9165) {
TY8232* Result_9166;
TY8234* Res_9167;
Result_9166 = 0;
Res_9167 = 0;
Res_9167 = Getbigchunk_9092(A_9165, 4096);
Result_9166 = ((TY8232*) (Res_9167));
return Result_9166;
}
N_NIMCALL(void*, Rawalloc_9195)(TY8274* A_9198, NI Requestedsize_9199) {
void* Result_9200;
NI Size_9205;
NI S_9208;
TY8232* C_9209;
TY8234* C_9436;
Result_9200 = 0;
Size_9205 = 0;
Size_9205 = Roundup_8256(Requestedsize_9199, 8);
if (!(Size_9205 <= (NI32)(4096 - (NI32)(((NI)sizeof(TY8232)) - 8)))) goto LA2;
S_9208 = 0;
S_9208 = (NI32)(Size_9205 / 8);
C_9209 = 0;
C_9209 = (*A_9198).Freesmallchunks[(S_9208)-0];
if (!(C_9209 == NIM_NIL)) goto LA5;
C_9209 = Getsmallchunk_9162(A_9198);
(*C_9209).Freelist = NIM_NIL;
(*C_9209).Sup.Size = Size_9205;
(*C_9209).Acc = Size_9205;
(*C_9209).Free = (NI32)((NI32)(4096 - (NI32)(((NI)sizeof(TY8232)) - 8)) - Size_9205);
(*C_9209).Next = NIM_NIL;
(*C_9209).Prev = NIM_NIL;
Listadd_9226(&(*A_9198).Freesmallchunks[(S_9208)-0], C_9209);
Result_9200 = ((void*) (&(*C_9209).Data));
goto LA4;
LA5: ;
if (!((*C_9209).Freelist == NIM_NIL)) goto LA8;
Result_9200 = ((void*) ((NI32)((NU32)(((NI) (&(*C_9209).Data))) + (NU32)((*C_9209).Acc))));
(*C_9209).Acc += Size_9205;
goto LA7;
LA8: ;
Result_9200 = ((void*) ((*C_9209).Freelist));
(*C_9209).Freelist = (*(*C_9209).Freelist).Next;
LA7: ;
(*C_9209).Free -= Size_9205;
LA4: ;
if (!((*C_9209).Free < Size_9205)) goto LA11;
Listremove_9368(&(*A_9198).Freesmallchunks[(S_9208)-0], C_9209);
LA11: ;
goto LA1;
LA2: ;
Size_9205 = Roundup_8256((NI32)(Requestedsize_9199 + (NI32)(((NI)sizeof(TY8234)) - 8)), 4096);
C_9436 = 0;
C_9436 = Getbigchunk_9092(A_9198, Size_9205);
Result_9200 = ((void*) (&(*C_9436).Data));
LA1: ;
return Result_9200;
}
N_NOCONV(void*, Alloc_1774)(NI Size_1776) {
void* Result_9818;
Result_9818 = 0;
Result_9818 = Rawalloc_9195(&Allocator_8329, (NI32)(Size_1776 + ((NI)sizeof(TY8222))));
(*((TY8222*) (Result_9818))).Zerofield = 1;
Result_9818 = ((void*) ((NI32)((NU32)(((NI) (Result_9818))) + (NU32)(((NI)sizeof(TY8222))))));
return Result_9818;
}
N_NOCONV(void*, Alloc0_1777)(NI Size_1779) {
void* Result_9824;
Result_9824 = 0;
Result_9824 = Alloc_1774(Size_1779);
zeroMem(Result_9824, Size_1779);
return Result_9824;
}
N_NIMCALL(void, Init_10278)(TY10218* S_10281, NI Cap_10282) {
void* LOC1;
(*S_10281).Len = 0;
(*S_10281).Cap = Cap_10282;
LOC1 = Alloc0_1777((NI32)(Cap_10282 * 4));
(*S_10281).D = ((TY10202**) (LOC1));
}
N_NIMCALL(void, Initgc_3011)(void) {
Gch_10608.Stat.Stackscans = 0;
Gch_10608.Stat.Cyclecollections = 0;
Gch_10608.Stat.Maxthreshold = 0;
Gch_10608.Stat.Maxstacksize = 0;
Gch_10608.Stat.Maxstackcells = 0;
Gch_10608.Stat.Cycletablesize = 0;
Init_10278(&Gch_10608.Zct, 1024);
Init_10278(&Gch_10608.Tempstack, 1024);
Init_10288(&Gch_10608.Cycleroots);
Init_10278(&Gch_10608.Decstack, 1024);
asgnRefNoCycle((void**) &Goutofmem_7857, (TY442*) newObj(NTI7861, sizeof(TY442)));
(*Goutofmem_7857).Sup.Sup.Sup.Sup.m_type = NTI442;
}
N_NOCONV(void, signalHandler)(NI32 Sig_5048) {
NI32 S_5049;
S_5049 = 0;
S_5049 = Sig_5048;
Gcdisable_2663();
Buf_4677 = setLengthStr(Buf_4677, 0);
Rawwritestacktrace_4867(&Buf_4677);
if (!(S_5049 == SIGINT)) goto LA2;
Buf_4677 = resizeString(Buf_4677, 32);
appendString(Buf_4677, ((NimStringDesc*) &TMP19725));
goto LA1;
LA2: ;
if (!(S_5049 == SIGSEGV)) goto LA4;
Buf_4677 = resizeString(Buf_4677, 62);
appendString(Buf_4677, ((NimStringDesc*) &TMP19726));
goto LA1;
LA4: ;
if (!(S_5049 == SIGABRT)) goto LA6;
if (!Dbgaborting_5045) goto LA9;
goto BeforeRet;
LA9: ;
Buf_4677 = resizeString(Buf_4677, 32);
appendString(Buf_4677, ((NimStringDesc*) &TMP19727));
goto LA1;
LA6: ;
if (!(S_5049 == SIGFPE)) goto LA11;
Buf_4677 = resizeString(Buf_4677, 27);
appendString(Buf_4677, ((NimStringDesc*) &TMP19728));
goto LA1;
LA11: ;
if (!(S_5049 == SIGILL)) goto LA13;
Buf_4677 = resizeString(Buf_4677, 28);
appendString(Buf_4677, ((NimStringDesc*) &TMP19729));
goto LA1;
LA13: ;
if (!(S_5049 == SIGSEGV)) goto LA15;
Buf_4677 = resizeString(Buf_4677, 61);
appendString(Buf_4677, ((NimStringDesc*) &TMP19730));
goto LA1;
LA15: ;
Buf_4677 = resizeString(Buf_4677, 16);
appendString(Buf_4677, ((NimStringDesc*) &TMP19731));
LA1: ;
Writetostderr_4432(Buf_4677->data);
Dbgaborting_5045 = NIM_TRUE;
Gcenable_2665();
exit(1);
BeforeRet: ;
}
N_NIMCALL(void, registerSignalHandler)(void) {
signal(SIGINT, signalHandler);
signal(SIGSEGV, signalHandler);
signal(SIGABRT, signalHandler);
signal(SIGFPE, signalHandler);
signal(SIGILL, signalHandler);
signal(SIGSEGV, signalHandler);
}
N_NIMCALL(NI, getRefcount)(void* P_10647) {
NI Result_10648;
TY10202* LOC1;
Result_10648 = 0;
LOC1 = Usrtocell_10622(P_10647);
Result_10648 = (NI32)((NU32)(((NI) ((*LOC1).Refcount))) >> (NU32)(3));
return Result_10648;
}
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_16895) {
NimStringDesc* Result_16896;
Result_16896 = 0;
Result_16896 = rawNewString(Len_16895);
(*Result_16896).Sup.len = Len_16895;
return Result_16896;
}
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_16943, NI Start_16944, NI Last_16945) {
NimStringDesc* Result_16946;
NI Start_16949;
NI Len_16952;
Result_16946 = 0;
Start_16949 = 0;
Start_16949 = ((Start_16944 >= 0) ? Start_16944 : 0);
Len_16952 = 0;
Len_16952 = (NI32)((NI32)(((Last_16945 <= (NI32)((*S_16943).Sup.len - 1)) ? Last_16945 : (NI32)((*S_16943).Sup.len - 1)) - Start_16949) + 1);
if (!(0 < Len_16952)) goto LA2;
Result_16946 = rawNewString(Len_16952);
(*Result_16946).Sup.len = Len_16952;
memcpy(((NCSTRING) ((*Result_16946).data)), ((NCSTRING) (&(*S_16943).data[(Start_16949)-0])), ((NI32) ((NI32)(Len_16952 * 1))));
(*Result_16946).data[(Len_16952)-0] = 0;
goto LA1;
LA2: ;
Result_16946 = mnewString(0);
LA1: ;
return Result_16946;
}
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_16958, NI Start_16959) {
NimStringDesc* Result_16960;
Result_16960 = 0;
Result_16960 = copyStrLast(S_16958, Start_16959, (NI32)((*S_16958).Sup.len - 1));
goto BeforeRet;
BeforeRet: ;
return Result_16960;
}
N_NIMCALL(NimStringDesc*, getCurrentExceptionMsg)(void) {
NimStringDesc* Result_18803;
Result_18803 = 0;
if (!(excHandler == NIM_NIL)) goto LA2;
Result_18803 = copyString(((NimStringDesc*) &TMP19732));
goto BeforeRet;
LA2: ;
Result_18803 = copyString((*(*excHandler).exc).message);
goto BeforeRet;
BeforeRet: ;
return Result_18803;
}
N_NOINLINE(void, raiseOverflow)(void) {
EOverflow* E_5492;
E_5492 = 0;
E_5492 = (EOverflow*) newObj(NTI5491, sizeof(EOverflow));
(*E_5492).Sup.Sup.Sup.Sup.m_type = NTI432;
asgnRefNoCycle((void**) &(*E_5492).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP33239)));
raiseException((E_Base*)E_5492, "EOverflow");
}
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604) {
NI Result_5605;
NIM_BOOL LOC2;
Result_5605 = 0;
Result_5605 = (NI32)((NU32)(A_5603) + (NU32)(B_5604));
LOC2 = (0 <= (NI32)(Result_5605 ^ A_5603));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI32)(Result_5605 ^ B_5604));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5605;
}
N_NIMCALL(NI, mulInt)(NI A_6603, NI B_6604) {
NI Result_6605;
NF Resasfloat_6606;
NF Floatprod_6607;
Result_6605 = 0;
Resasfloat_6606 = 0;
Floatprod_6607 = 0;
Result_6605 = (NI32)((NU32)(A_6603) * (NU32)(B_6604));
Floatprod_6607 = (((double) (A_6603)) * ((double) (B_6604)));
Resasfloat_6606 = ((double) (Result_6605));
if (!(Resasfloat_6606 == Floatprod_6607)) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((Resasfloat_6606 - Floatprod_6607) > 0? ((Resasfloat_6606 - Floatprod_6607)) : -((Resasfloat_6606 - Floatprod_6607)))) <= (Floatprod_6607 > 0? (Floatprod_6607) : -(Floatprod_6607)))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_6605;
}
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404) {
void* Result_12405;
NI LOC1;
NI LOC2;
Result_12405 = 0;
LOC1 = mulInt(Len_12404, (*(*Typ_12403).base).size);
LOC2 = addInt(LOC1, 8);
Result_12405 = newObj(Typ_12403, LOC2);
(*((TGenericSeq*) (Result_12405))).len = Len_12404;
(*((TGenericSeq*) (Result_12405))).space = Len_12404;
return Result_12405;
}
N_NIMCALL(NI, Cmp_1319)(NimStringDesc* X_1321, NimStringDesc* Y_1322) {
NI Result_3319;
NI32 LOC1;
Result_3319 = 0;
LOC1 = strcmp(X_1321->data, Y_1322->data);
Result_3319 = ((NI) (LOC1));
goto BeforeRet;
BeforeRet: ;
return Result_3319;
}
N_NIMCALL(TNimType*, extGetCellType)(void* C_10643) {
TNimType* Result_10644;
TY10202* LOC1;
Result_10644 = 0;
LOC1 = Usrtocell_10622(C_10643);
Result_10644 = (*LOC1).Typ;
return Result_10644;
}
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205) {
TGenericSeq* Result_17206;
NI LOC4;
void* LOC5;
NI I_17220;
NI HEX3Atmp_19605;
NI Res_19607;
TNimType* LOC9;
Result_17206 = 0;
Result_17206 = Seq_17203;
if (!((*Result_17206).space < Newlen_17205)) goto LA2;
LOC4 = Resize_16801((*Result_17206).space);
(*Result_17206).space = ((LOC4 >= Newlen_17205) ? LOC4 : Newlen_17205);
LOC5 = Growobj_12406(((void*) (Result_17206)), (NI32)((NI32)(Elemsize_17204 * (*Result_17206).space) + 8));
Result_17206 = ((TGenericSeq*) (LOC5));
goto LA1;
LA2: ;
if (!(Newlen_17205 < (*Result_17206).len)) goto LA6;
I_17220 = 0;
HEX3Atmp_19605 = 0;
HEX3Atmp_19605 = (NI32)((*Result_17206).len - 1);
Res_19607 = 0;
Res_19607 = Newlen_17205;
while (1) {
if (!(Res_19607 <= HEX3Atmp_19605)) goto LA8;
I_17220 = Res_19607;
LOC9 = extGetCellType(((void*) (Result_17206)));
Forallchildrenaux_11220(((void*) ((NI32)((NU32)((NI32)((NU32)(((NI) (Result_17206))) + (NU32)(8))) + (NU32)((NI32)((NU32)(I_17220) * (NU32)(Elemsize_17204)))))), (*LOC9).base, ((NU8) 0));
Res_19607 += 1;
} LA8: ;
zeroMem(((void*) ((NI32)((NU32)((NI32)((NU32)(((NI) (Result_17206))) + (NU32)(8))) + (NU32)((NI32)((NU32)(Newlen_17205) * (NU32)(Elemsize_17204)))))), (NI32)((NU32)((NI32)((NU32)((*Result_17206).len) - (NU32)(Newlen_17205))) * (NU32)(Elemsize_17204)));
goto LA1;
LA6: ;
LA1: ;
(*Result_17206).len = Newlen_17205;
return Result_17206;
}
N_NIMCALL(void, Objectinitaux_17864)(void* Dest_17866, TNimNode* N_17868) {
NI D_17869;
NI I_17877;
NI HEX3Atmp_19650;
NI Res_19652;
TNimNode* M_17878;
D_17869 = 0;
D_17869 = ((NI) (Dest_17866));
switch ((*N_17868).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
objectInit(((void*) ((NI32)((NU32)(D_17869) + (NU32)((*N_17868).offset)))), (*N_17868).typ);
break;
case ((NU8) 2):
I_17877 = 0;
HEX3Atmp_19650 = 0;
HEX3Atmp_19650 = (NI32)((*N_17868).len - 1);
Res_19652 = 0;
Res_19652 = 0;
while (1) {
if (!(Res_19652 <= HEX3Atmp_19650)) goto LA1;
I_17877 = Res_19652;
Objectinitaux_17864(Dest_17866, (*N_17868).sons[(I_17877)-0]);
Res_19652 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_17878 = 0;
M_17878 = Selectbranch_7063(Dest_17866, N_17868);
if (!!((M_17878 == NIM_NIL))) goto LA3;
Objectinitaux_17864(Dest_17866, M_17878);
LA3: ;
break;
}
}
N_NIMCALL(void, objectInit)(void* Dest_17862, TNimType* Typ_17863) {
NI D_17894;
TNimType** Pint_17896;
NI I_17904;
NI HEX3Atmp_19656;
NI Res_19658;
D_17894 = 0;
D_17894 = ((NI) (Dest_17862));
switch ((*Typ_17863).kind) {
case ((NU8) 17):
Pint_17896 = 0;
Pint_17896 = ((TNimType**) (Dest_17862));
(*Pint_17896) = Typ_17863;
Objectinitaux_17864(Dest_17862, (*Typ_17863).node);
break;
case ((NU8) 18):
case ((NU8) 40):
Objectinitaux_17864(Dest_17862, (*Typ_17863).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_17904 = 0;
HEX3Atmp_19656 = 0;
HEX3Atmp_19656 = (NI32)((NI32)((*Typ_17863).size / (*(*Typ_17863).base).size) - 1);
Res_19658 = 0;
Res_19658 = 0;
while (1) {
if (!(Res_19658 <= HEX3Atmp_19656)) goto LA1;
I_17904 = Res_19658;
objectInit(((void*) ((NI32)((NU32)(D_17894) + (NU32)((NI32)(I_17904 * (*(*Typ_17863).base).size))))), (*Typ_17863).base);
Res_19658 += 1;
} LA1: ;
break;
default:
break;
}
}
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17035, NI Elemsize_17036) {
TGenericSeq* Result_17037;
void* LOC4;
Result_17037 = 0;
Result_17037 = Seq_17035;
if (!((*Result_17037).space <= (*Result_17037).len)) goto LA2;
(*Result_17037).space = Resize_16801((*Result_17037).space);
LOC4 = Growobj_12406(((void*) (Result_17037)), (NI32)((NI32)(Elemsize_17036 * (*Result_17037).space) + 8));
Result_17037 = ((TGenericSeq*) (LOC4));
LA2: ;
(*Result_17037).len += 1;
return Result_17037;
}
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611) {
void* Result_6894;
void* LOC1;
Result_6894 = 0;
LOC1 = LoadLibraryA(Path_1611->data);
Result_6894 = ((void*) (LOC1));
return Result_6894;
}
N_NIMCALL(void, Rawwrite_6864)(FILE* F_6866, NimStringDesc* S_6867) {
NI LOC1;
LOC1 = Writebuffer_3733(F_6866, ((void*) (S_6867->data)), S_6867->Sup.len);
}
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621) {
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP190639));
Rawwrite_6864(stdout, Path_1621);
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP19717));
exit(1);
}
N_NOINLINE(void, Procaddrerror_6873)(NCSTRING Name_6875) {
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP190640));
Write_3670(stdout, Name_6875);
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP19717));
exit(1);
}
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618) {
void* Result_6899;
Result_6899 = 0;
Result_6899 = GetProcAddress(((void*) (Lib_1617)), Name_1618);
if (!(Result_6899 == NIM_NIL)) goto LA2;
Procaddrerror_6873(Name_1618);
LA2: ;
return Result_6899;
}
N_NIMCALL(NIM_BOOL, Open_3617)(FILE** F_3620, NimStringDesc* Filename_3621, NU8 Mode_3622, NI Bufsize_3623) {
NIM_BOOL Result_4112;
void* P_4113;
NI32 LOC5;
TY442* E_4119;
NI32 LOC11;
Result_4112 = 0;
P_4113 = 0;
P_4113 = fopen(Filename_3621->data, Formatopen_4101[(Mode_3622)-0]->data);
Result_4112 = !((P_4113 == NIM_NIL));
(*F_3620) = ((FILE*) (P_4113));
if (!(0 < Bufsize_3623)) goto LA2;
LOC5 = setvbuf((*F_3620), NIM_NIL, _IOFBF, ((NI32) (Bufsize_3623)));
if (!!((LOC5 == ((NI32) 0)))) goto LA6;
E_4119 = 0;
E_4119 = (TY442*) newObj(NTI7861, sizeof(TY442));
(*E_4119).Sup.Sup.Sup.Sup.m_type = NTI442;
asgnRefNoCycle((void**) &(*E_4119).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP19719)));
raiseException((E_Base*)E_4119, "EOutOfMemory");
LA6: ;
goto LA1;
LA2: ;
if (!(Bufsize_3623 == 0)) goto LA9;
LOC11 = setvbuf((*F_3620), NIM_NIL, _IONBF, ((NI32) 0));
goto LA1;
LA9: ;
LA1: ;
return Result_4112;
}
N_NIMCALL(NI, Readbuffer_3714)(FILE* F_3716, void* Buffer_3717, NI Len_3718) {
NI Result_4199;
Result_4199 = 0;
Result_4199 = fread(Buffer_3717, 1, Len_3718, F_3716);
return Result_4199;
}
N_NIMCALL(void, Rawreadline_3789)(FILE* F_3791, NimStringDesc** Result_3793) {
NI32 C_3794;
(*Result_3793) = setLengthStr((*Result_3793), 0);
while (1) {
C_3794 = 0;
C_3794 = fgetc(F_3791);
if (!(C_3794 < ((NI32) 0))) goto LA3;
goto LA1;
LA3: ;
if (!(C_3794 == ((NI32) 10))) goto LA6;
goto LA1;
LA6: ;
if (!(C_3794 == ((NI32) 13))) goto LA9;
C_3794 = fgetc(F_3791);
if (!!((C_3794 == ((NI32) 10)))) goto LA12;
ungetc(C_3794, F_3791);
LA12: ;
goto LA1;
LA9: ;
(*Result_3793) = addChar((*Result_3793), ((NIM_CHAR) (((NI) (((NI) (C_3794)))))));
} LA1: ;
}
N_NIMCALL(NimStringDesc*, Readline_3679)(FILE* F_3681) {
NimStringDesc* Result_3806;
Result_3806 = 0;
Result_3806 = copyString(((NimStringDesc*) &TMP19732));
Rawreadline_3789(F_3681, &Result_3806);
return Result_3806;
}
N_NIMCALL(NI64, mulInt64)(NI64 A_5579, NI64 B_5580) {
NI64 Result_5581;
NF64 Resasfloat_5582;
NF64 Floatprod_5583;
Result_5581 = 0;
Resasfloat_5582 = 0;
Floatprod_5583 = 0;
Result_5581 = (NI64)((NU64)(A_5579) * (NU64)(B_5580));
Floatprod_5583 = ((double) (A_5579));
Floatprod_5583 = ((NF64) ((((NF) (Floatprod_5583)) * ((NF) (((double) (B_5580)))))));
Resasfloat_5582 = ((double) (Result_5581));
if (!(((NF) (Resasfloat_5582)) == ((NF) (Floatprod_5583)))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583))) > 0? ((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583)))) : -((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583)))))) <= (((NF) (Floatprod_5583)) > 0? (((NF) (Floatprod_5583))) : -(((NF) (Floatprod_5583)))))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_5581;
}
N_NIMCALL(NI, Ptrsize_9833)(void* P_9835) {
NI Result_9836;
void* X_9837;
TY8230* LOC1;
Result_9836 = 0;
X_9837 = 0;
X_9837 = ((void*) ((NI32)((NU32)(((NI) (P_9835))) - (NU32)(((NI)sizeof(TY8222))))));
LOC1 = Pageaddr_8485(X_9837);
Result_9836 = (NI32)((*LOC1).Size - ((NI)sizeof(TY8222)));
return Result_9836;
}
N_NOCONV(void*, Realloc_1780)(void* P_1782, NI Newsize_1783) {
void* Result_9842;
NI LOC7;
Result_9842 = 0;
if (!(0 < Newsize_1783)) goto LA2;
Result_9842 = Alloc_1774(Newsize_1783);
if (!!((P_1782 == NIM_NIL))) goto LA5;
LOC7 = Ptrsize_9833(P_1782);
memcpy(Result_9842, P_1782, LOC7);
Dealloc_1784(P_1782);
LA5: ;
goto LA1;
LA2: ;
if (!!((P_1782 == NIM_NIL))) goto LA8;
Dealloc_1784(P_1782);
goto LA1;
LA8: ;
LA1: ;
return Result_9842;
}
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_17728) {
NimStringDesc* Result_17729;
Result_17729 = 0;
Result_17729 = mnewString(1);
Result_17729->data[0] = X_17728;
return Result_17729;
}
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_17667) {
NimStringDesc* Result_17668;
NI I_17669;
NI64 Y_17670;
NI64 D_17671;
NI J_17712;
NI HEX3Atmp_19619;
NI Res_19621;
NIM_CHAR LOC9;
Result_17668 = 0;
Result_17668 = mnewString(32);
I_17669 = 0;
I_17669 = 0;
Y_17670 = 0;
Y_17670 = X_17667;
while (1) {
D_17671 = 0;
D_17671 = (NI64)(Y_17670 / 10);
Result_17668->data[I_17669] = ((NIM_CHAR) (((NI) ((NI32)((NI32)abs(((NI) ((NI64)(Y_17670 - (NI64)(D_17671 * 10))))) + 48)))));
I_17669 += 1;
Y_17670 = D_17671;
if (!(Y_17670 == 0)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
if (!(X_17667 < 0)) goto LA6;
Result_17668->data[I_17669] = 45;
I_17669 += 1;
LA6: ;
Result_17668 = setLengthStr(Result_17668, I_17669);
J_17712 = 0;
HEX3Atmp_19619 = 0;
HEX3Atmp_19619 = (NI32)((NI32)(I_17669 / 2) - 1);
Res_19621 = 0;
Res_19621 = 0;
while (1) {
if (!(Res_19621 <= HEX3Atmp_19619)) goto LA8;
J_17712 = Res_19621;
LOC9 = Result_17668->data[J_17712];
Result_17668->data[J_17712] = Result_17668->data[(NI32)((NI32)(I_17669 - J_17712) - 1)];
Result_17668->data[(NI32)((NI32)(I_17669 - J_17712) - 1)] = LOC9;
Res_19621 += 1;
} LA8: ;
return Result_17668;
}
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_17660) {
NimStringDesc* Result_17661;
TY17662 Buf_17664;
Result_17661 = 0;
memset((void*)&Buf_17664, 0, sizeof(Buf_17664));
sprintf(((NCSTRING) (Buf_17664)), "%#g", X_17660);
Result_17661 = cstrToNimstr(((NCSTRING) (Buf_17664)));
goto BeforeRet;
BeforeRet: ;
return Result_17661;
}
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_17979, TNimType* Typ_17980) {
NimStringDesc* Result_17981;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
Result_17981 = 0;
if (!((NU32)(E_17979) < (NU32)((*(*Typ_17980).node).len))) goto LA2;
Result_17981 = cstrToNimstr((*(*(*Typ_17980).node).sons[(E_17979)-0]).name);
goto LA1;
LA2: ;
LOC5 = nimIntToStr(E_17979);
LOC4 = rawNewString(LOC5->Sup.len + 16);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP190766));
Result_17981 = LOC4;
LA1: ;
return Result_17981;
}
N_NIMCALL(NIM_BOOL, Endoffile_3638)(FILE* F_3640) {
NIM_BOOL Result_4069;
NI32 C_4070;
Result_4069 = 0;
C_4070 = 0;
C_4070 = fgetc(F_3640);
ungetc(C_4070, F_3640);
Result_4069 = (C_4070 == ((NI32) -1));
goto BeforeRet;
BeforeRet: ;
return Result_4069;
}
N_NIMCALL(NI64, Getfilepos_3742)(FILE* F_3744) {
NI64 Result_4305;
NI LOC1;
TY420* E_4309;
Result_4305 = 0;
LOC1 = ftell(F_3744);
Result_4305 = ((NI64) (LOC1));
if (!(Result_4305 < 0)) goto LA3;
E_4309 = 0;
E_4309 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4309).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4309).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP190869)));
raiseException((E_Base*)E_4309, "EIO");
LA3: ;
return Result_4305;
}
N_NIMCALL(void, Setfilepos_3738)(FILE* F_3740, NI64 Pos_3741) {
NI LOC2;
TY420* E_4286;
LOC2 = fseek(F_3740, ((NI) (Pos_3741)), 0);
if (!!((LOC2 == 0))) goto LA3;
E_4286 = 0;
E_4286 = (TY420*) newObj(NTI4262, sizeof(TY420));
(*E_4286).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4286).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP190870)));
raiseException((E_Base*)E_4286, "EIO");
LA3: ;
}
N_NIMCALL(NI64, Getfilesize_3695)(FILE* F_3697) {
NI64 Result_4328;
NI64 Oldpos_4329;
NI LOC1;
Result_4328 = 0;
Oldpos_4329 = 0;
Oldpos_4329 = Getfilepos_3742(F_3697);
LOC1 = fseek(F_3697, 0, 2);
Result_4328 = Getfilepos_3742(F_3697);
Setfilepos_3738(F_3697, Oldpos_4329);
return Result_4328;
}
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649) {
NimStringDesc* Result_4057;
FILE* F_4058;
TSafePoint TMP190868;
NIM_BOOL LOC2;
NI64 volatile Len_4060;
NI LOC9;
Result_4057 = 0;
F_4058 = 0;
TMP190868.prev = excHandler;
excHandler = &TMP190868;
TMP190868.status = setjmp(TMP190868.context);
if (TMP190868.status == 0) {
LOC2 = Open_3617(&F_4058, Filename_3649, ((NU8) 0), -1);
if (!LOC2) goto LA3;
Len_4060 = 0;
Len_4060 = Getfilesize_3695(F_4058);
if (!(Len_4060 < 2147483647)) goto LA6;
Result_4057 = mnewString(((NI) (Len_4060)));
LOC9 = Readbuffer_3714(F_4058, ((void*) (&Result_4057->data[0])), ((NI) (Len_4060)));
if (!!((((NI64) (LOC9)) == Len_4060))) goto LA10;
Result_4057 = copyString(NIM_NIL);
LA10: ;
LA6: ;
fclose(F_4058);
goto LA1;
LA3: ;
Result_4057 = copyString(NIM_NIL);
LA1: ;
} else {
if ((TMP190868.exc->Sup.m_type == NTI420)) {
Result_4057 = copyString(NIM_NIL);
TMP190868.status = 0;}
}
excHandler = excHandler->prev;
if (TMP190868.status != 0) { raiseException(TMP190868.exc, TMP190868.exc->name); }
return Result_4057;
}
N_NIMCALL(void, Genericassignaux_17768)(void* Dest_17770, void* Src_17771, TNimNode* N_17773) {
NI D_17774;
NI S_17775;
NI I_17783;
NI HEX3Atmp_19626;
NI Res_19628;
TNimNode* M_17784;
D_17774 = 0;
D_17774 = ((NI) (Dest_17770));
S_17775 = 0;
S_17775 = ((NI) (Src_17771));
switch ((*N_17773).kind) {
case ((NU8) 0):
break;
case ((NU8) 1):
genericAssign(((void*) ((NI32)((NU32)(D_17774) + (NU32)((*N_17773).offset)))), ((void*) ((NI32)((NU32)(S_17775) + (NU32)((*N_17773).offset)))), (*N_17773).typ);
break;
case ((NU8) 2):
I_17783 = 0;
HEX3Atmp_19626 = 0;
HEX3Atmp_19626 = (NI32)((*N_17773).len - 1);
Res_19628 = 0;
Res_19628 = 0;
while (1) {
if (!(Res_19628 <= HEX3Atmp_19626)) goto LA1;
I_17783 = Res_19628;
Genericassignaux_17768(Dest_17770, Src_17771, (*N_17773).sons[(I_17783)-0]);
Res_19628 += 1;
} LA1: ;
break;
case ((NU8) 3):
memcpy(((void*) ((NI32)((NU32)(D_17774) + (NU32)((*N_17773).offset)))), ((void*) ((NI32)((NU32)(S_17775) + (NU32)((*N_17773).offset)))), (*(*N_17773).typ).size);
M_17784 = 0;
M_17784 = Selectbranch_7063(Src_17771, N_17773);
if (!!((M_17784 == NIM_NIL))) goto LA3;
Genericassignaux_17768(Dest_17770, Src_17771, M_17784);
LA3: ;
break;
}
}
N_NIMCALL(void, genericAssign)(void* Dest_17765, void* Src_17766, TNimType* Mt_17767) {
NI D_17801;
NI S_17802;
void* S2_17814;
TGenericSeq* Seq_17815;
void** X_17816;
void* LOC4;
NI Dst_17817;
NI I_17825;
NI HEX3Atmp_19632;
NI Res_19634;
TGenericSeq* Dstseq_17826;
NI I_17834;
NI HEX3Atmp_19638;
NI Res_19640;
void* S2_17835;
NimStringDesc* LOC10;
void** X_17836;
D_17801 = 0;
D_17801 = ((NI) (Dest_17765));
S_17802 = 0;
S_17802 = ((NI) (Src_17766));
switch ((*Mt_17767).kind) {
case ((NU8) 24):
S2_17814 = 0;
S2_17814 = (*((void**) (Src_17766)));
Seq_17815 = 0;
Seq_17815 = ((TGenericSeq*) (S2_17814));
if (!(S2_17814 == NIM_NIL)) goto LA2;
X_17816 = 0;
X_17816 = ((void**) (Dest_17765));
(*X_17816) = NIM_NIL;
goto BeforeRet;
LA2: ;
LOC4 = newObj(Mt_17767, (NI32)((NI32)((*Seq_17815).len * (*(*Mt_17767).base).size) + 8));
unsureAsgnRef(((void**) (Dest_17765)), LOC4);
Dst_17817 = 0;
Dst_17817 = ((NI) ((*((void**) (Dest_17765)))));
I_17825 = 0;
HEX3Atmp_19632 = 0;
HEX3Atmp_19632 = (NI32)((*Seq_17815).len - 1);
Res_19634 = 0;
Res_19634 = 0;
while (1) {
if (!(Res_19634 <= HEX3Atmp_19632)) goto LA5;
I_17825 = Res_19634;
genericAssign(((void*) ((NI32)((NU32)((NI32)((NU32)(Dst_17817) + (NU32)((NI32)((NU32)(I_17825) * (NU32)((*(*Mt_17767).base).size))))) + (NU32)(8)))), ((void*) ((NI32)((NU32)((NI32)((NU32)(((NI) (S2_17814))) + (NU32)((NI32)((NU32)(I_17825) * (NU32)((*(*Mt_17767).base).size))))) + (NU32)(8)))), (*Mt_17767).base);
Res_19634 += 1;
} LA5: ;
Dstseq_17826 = 0;
Dstseq_17826 = ((TGenericSeq*) (Dst_17817));
(*Dstseq_17826).len = (*Seq_17815).len;
(*Dstseq_17826).space = (*Seq_17815).len;
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
Genericassignaux_17768(Dest_17765, Src_17766, (*Mt_17767).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_17834 = 0;
HEX3Atmp_19638 = 0;
HEX3Atmp_19638 = (NI32)((NI32)((*Mt_17767).size / (*(*Mt_17767).base).size) - 1);
Res_19640 = 0;
Res_19640 = 0;
while (1) {
if (!(Res_19640 <= HEX3Atmp_19638)) goto LA6;
I_17834 = Res_19640;
genericAssign(((void*) ((NI32)((NU32)(D_17801) + (NU32)((NI32)((NU32)(I_17834) * (NU32)((*(*Mt_17767).base).size)))))), ((void*) ((NI32)((NU32)(S_17802) + (NU32)((NI32)((NU32)(I_17834) * (NU32)((*(*Mt_17767).base).size)))))), (*Mt_17767).base);
Res_19640 += 1;
} LA6: ;
break;
case ((NU8) 28):
S2_17835 = 0;
S2_17835 = (*((void**) (S_17802)));
if (!!((S2_17835 == NIM_NIL))) goto LA8;
LOC10 = copyString(((NimStringDesc*) (S2_17835)));
unsureAsgnRef(((void**) (Dest_17765)), ((void*) (LOC10)));
goto LA7;
LA8: ;
X_17836 = 0;
X_17836 = ((void**) (Dest_17765));
(*X_17836) = NIM_NIL;
goto BeforeRet;
LA7: ;
break;
case ((NU8) 22):
unsureAsgnRef(((void**) (Dest_17765)), (*((void**) (S_17802))));
break;
default:
memcpy(Dest_17765, Src_17766, (*Mt_17767).size);
break;
}
BeforeRet: ;
}
N_NIMCALL(void, genericSeqAssign)(void* Dest_17839, void* Src_17840, TNimType* Mt_17841) {
void* Src_17842;
Src_17842 = 0;
Src_17842 = Src_17840;
genericAssign(Dest_17839, ((void*) (&Src_17842)), Mt_17841);
}
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2682)(void) {
NimStringDesc* Result_16044;
NimStringDesc* LOC1;
NI LOC2;
NimStringDesc* LOC3;
NI LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
Result_16044 = 0;
Gcdisable_2663();
LOC2 = Gettotalmem_2008();
LOC3 = nimIntToStr(LOC2);
LOC4 = Getoccupiedmem_2004();
LOC5 = nimIntToStr(LOC4);
LOC6 = nimIntToStr(Gch_10608.Stat.Stackscans);
LOC7 = nimIntToStr(Gch_10608.Stat.Maxstackcells);
LOC8 = nimIntToStr(Gch_10608.Stat.Cyclecollections);
LOC9 = nimIntToStr(Gch_10608.Stat.Maxthreshold);
LOC10 = nimIntToStr(Gch_10608.Zct.Cap);
LOC11 = nimIntToStr(Gch_10608.Stat.Cycletablesize);
LOC12 = nimIntToStr(Gch_10608.Stat.Maxstacksize);
LOC1 = rawNewString(LOC3->Sup.len + LOC5->Sup.len + LOC6->Sup.len + LOC7->Sup.len + LOC8->Sup.len + LOC9->Sup.len + LOC10->Sup.len + LOC11->Sup.len + LOC12->Sup.len + 204);
appendString(LOC1, ((NimStringDesc*) &TMP192483));
appendString(LOC1, LOC3);
appendString(LOC1, ((NimStringDesc*) &TMP192484));
appendString(LOC1, LOC5);
appendString(LOC1, ((NimStringDesc*) &TMP192485));
appendString(LOC1, LOC6);
appendString(LOC1, ((NimStringDesc*) &TMP192486));
appendString(LOC1, LOC7);
appendString(LOC1, ((NimStringDesc*) &TMP192487));
appendString(LOC1, LOC8);
appendString(LOC1, ((NimStringDesc*) &TMP192488));
appendString(LOC1, LOC9);
appendString(LOC1, ((NimStringDesc*) &TMP192489));
appendString(LOC1, LOC10);
appendString(LOC1, ((NimStringDesc*) &TMP192490));
appendString(LOC1, LOC11);
appendString(LOC1, ((NimStringDesc*) &TMP192491));
appendString(LOC1, LOC12);
Result_16044 = LOC1;
Gcenable_2665();
return Result_16044;
}
N_NIMCALL(void, Listremove_8646)(TY8234** Head_8650, TY8234* C_8651) {
if (!(C_8651 == (*Head_8650))) goto LA2;
(*Head_8650) = (*C_8651).Next;
if (!!(((*Head_8650) == NIM_NIL))) goto LA5;
(*(*Head_8650)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
(*(*C_8651).Prev).Next = (*C_8651).Next;
if (!!(((*C_8651).Next == NIM_NIL))) goto LA8;
(*(*C_8651).Next).Prev = (*C_8651).Prev;
LA8: ;
LA1: ;
(*C_8651).Next = NIM_NIL;
(*C_8651).Prev = NIM_NIL;
}
N_NIMCALL(void, Listadd_9226)(TY8232** Head_9230, TY8232* C_9231) {
(*C_9231).Next = (*Head_9230);
if (!!(((*Head_9230) == NIM_NIL))) goto LA2;
(*(*Head_9230)).Prev = C_9231;
LA2: ;
(*Head_9230) = C_9231;
}
N_NIMCALL(void, Listremove_9368)(TY8232** Head_9372, TY8232* C_9373) {
if (!(C_9373 == (*Head_9372))) goto LA2;
(*Head_9372) = (*C_9373).Next;
if (!!(((*Head_9372) == NIM_NIL))) goto LA5;
(*(*Head_9372)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
(*(*C_9373).Prev).Next = (*C_9373).Next;
if (!!(((*C_9373).Next == NIM_NIL))) goto LA8;
(*(*C_9373).Next).Prev = (*C_9373).Prev;
LA8: ;
LA1: ;
(*C_9373).Next = NIM_NIL;
(*C_9373).Prev = NIM_NIL;
}
N_NIMCALL(void, Listadd_9007)(TY8234** Head_9011, TY8234* C_9012) {
(*C_9012).Next = (*Head_9011);
if (!!(((*Head_9011) == NIM_NIL))) goto LA2;
(*(*Head_9011)).Prev = C_9012;
LA2: ;
(*Head_9011) = C_9012;
}
N_NOINLINE(void, systemInit)(void) {
NI LOC1;
NI LOC2;
Dbglinehook_2721 = ((TY2718) (NIM_NIL));
Strdesc_3017.size = 4;
Strdesc_3017.kind = ((NU8) 28);
Strdesc_3017.flags = 2;
Initstackbottom_3013();
Initgc_3011();
LOC1 = fileno(stdin);
setmode(LOC1, O_BINARY);
LOC2 = fileno(stdout);
setmode(LOC2, O_BINARY);
excHandler = NIM_NIL;
asgnRefNoCycle((void**) &Stacktracenewline_4683, copyString(((NimStringDesc*) &TMP19717)));
registerSignalHandler();
asgnRefNoCycle((void**) &Gassertionfailed_5021, (EAssertionFailed*) newObj(NTI5020, sizeof(EAssertionFailed)));
(*Gassertionfailed_5021).Sup.Sup.Sup.m_type = NTI436;
asgnRefNoCycle((void**) &Buf_4677, mnewString(2048));
asgnRefNoCycle((void**) &Assertbuf_4678, mnewString(2048));
Buf_4677 = setLengthStr(Buf_4677, 0);
Assertbuf_4678 = setLengthStr(Assertbuf_4678, 0);
Lastsize_8491 = 4096;
Cyclethreshold_10609 = 4194304;
Recgclock_10610 = 0;
}

