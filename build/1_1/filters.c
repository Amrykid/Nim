/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY49523 TY49523;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY49549 TY49549;
typedef struct TY41532 TY41532;
typedef struct TY49545 TY49545;
typedef struct TY48011 TY48011;
typedef struct TY49517 TY49517;
typedef struct TY68013 TY68013;
typedef struct TY48005 TY48005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY49547 TY49547;
typedef struct TY49537 TY49537;
typedef struct TY46008 TY46008;
typedef struct TY49527 TY49527;
typedef struct TY49525 TY49525;
typedef struct TY49541 TY49541;
typedef struct TY37013 TY37013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
struct TY68013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
N_NIMCALL(TY49523*, Getarg_83036)(TY49523* N_83038, NimStringDesc* Name_83039, NI Pos_83040);
N_NIMCALL(NI, Sonslen_49801)(TY49523* N_49803);
N_NIMCALL(void, Invalidpragma_83032)(TY49523* N_83034);
N_NIMCALL(void, Limessage_41562)(TY41532 Info_41564, NU8 Msg_41565, NimStringDesc* Arg_41566);
N_NIMCALL(NimStringDesc*, Rendertree_78042)(TY49523* N_78044, NU8 Renderflags_78047);
N_NIMCALL(NIM_BOOL, Identeq_48028)(TY48011* Id_48030, NimStringDesc* Name_48031);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(NimStringDesc*, Strarg_83020)(TY49523* N_83022, NimStringDesc* Name_83023, NI Pos_83024, NimStringDesc* Default_83025);
N_NIMCALL(NIM_BOOL, Boolarg_83026)(TY49523* N_83028, NimStringDesc* Name_83029, NI Pos_83030, NIM_BOOL Default_83031);
N_NIMCALL(TY68013*, Llstreamopen_68025)(NimStringDesc* Data_68027);
N_NIMCALL(NIM_BOOL, Llstreamatend_68071)(TY68013* S_68073);
N_NIMCALL(NimStringDesc*, Llstreamreadline_68048)(TY68013* S_68050);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_22981, NIM_BOOL Leading_22982, NIM_BOOL Trailing_22983);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_23769, NimStringDesc* Prefix_23770);
N_NIMCALL(void, Llstreamwriteln_68067)(TY68013* S_68069, NimStringDesc* Data_68070);
N_NIMCALL(void, Llstreamclose_68040)(TY68013* S_68042);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* S_24324, NimStringDesc* Sub_24325, NimStringDesc* By_24326);
STRING_LITERAL(TMP190853, "startswith", 10);
STRING_LITERAL(TMP190854, "", 0);
STRING_LITERAL(TMP190855, "true", 4);
STRING_LITERAL(TMP190856, "false", 5);
STRING_LITERAL(TMP190857, "leading", 7);
STRING_LITERAL(TMP190858, "trailing", 8);
STRING_LITERAL(TMP190859, "sub", 3);
STRING_LITERAL(TMP190860, "by", 2);
N_NIMCALL(void, Invalidpragma_83032)(TY49523* N_83034) {
NimStringDesc* LOC1;
LOC1 = Rendertree_78042(N_83034, 4);
Limessage_41562((*N_83034).Info, ((NU8) 159), LOC1);
}
N_NIMCALL(TY49523*, Getarg_83036)(TY49523* N_83038, NimStringDesc* Name_83039, NI Pos_83040) {
TY49523* Result_83041;
NI I_83076;
NI HEX3Atmp_83206;
NI LOC4;
NI Res_83208;
NIM_BOOL LOC13;
Result_83041 = 0;
Result_83041 = NIM_NIL;
if (!((*N_83038).Kind >= ((NU8) 1) && (*N_83038).Kind <= ((NU8) 18))) goto LA2;
goto BeforeRet;
LA2: ;
I_83076 = 0;
HEX3Atmp_83206 = 0;
LOC4 = Sonslen_49801(N_83038);
HEX3Atmp_83206 = (NI32)(LOC4 - 1);
Res_83208 = 0;
Res_83208 = 1;
while (1) {
if (!(Res_83208 <= HEX3Atmp_83206)) goto LA5;
I_83076 = Res_83208;
if (!((*(*N_83038).KindU.S6.Sons->data[I_83076]).Kind == ((NU8) 23))) goto LA7;
if (!!(((*(*(*N_83038).KindU.S6.Sons->data[I_83076]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA10;
Invalidpragma_83032(N_83038);
LA10: ;
LOC13 = Identeq_48028((*(*(*N_83038).KindU.S6.Sons->data[I_83076]).KindU.S6.Sons->data[0]).KindU.S5.Ident, Name_83039);
if (!LOC13) goto LA14;
Result_83041 = (*(*N_83038).KindU.S6.Sons->data[I_83076]).KindU.S6.Sons->data[1];
goto BeforeRet;
LA14: ;
goto LA6;
LA7: ;
if (!(I_83076 == Pos_83040)) goto LA16;
Result_83041 = (*N_83038).KindU.S6.Sons->data[I_83076];
goto BeforeRet;
goto LA6;
LA16: ;
LA6: ;
Res_83208 += 1;
} LA5: ;
BeforeRet: ;
return Result_83041;
}
N_NIMCALL(NIM_CHAR, Chararg_83014)(TY49523* N_83016, NimStringDesc* Name_83017, NI Pos_83018, NIM_CHAR Default_83019) {
NIM_CHAR Result_83217;
TY49523* X_83218;
Result_83217 = 0;
X_83218 = 0;
X_83218 = Getarg_83036(N_83016, Name_83017, Pos_83018);
if (!(X_83218 == NIM_NIL)) goto LA2;
Result_83217 = Default_83019;
goto LA1;
LA2: ;
if (!((*X_83218).Kind == ((NU8) 5))) goto LA4;
Result_83217 = ((NIM_CHAR) (((NI) (((NI) ((*X_83218).KindU.S1.Intval))))));
goto LA1;
LA4: ;
Invalidpragma_83032(N_83016);
LA1: ;
return Result_83217;
}
N_NIMCALL(NimStringDesc*, Strarg_83020)(TY49523* N_83022, NimStringDesc* Name_83023, NI Pos_83024, NimStringDesc* Default_83025) {
NimStringDesc* Result_83257;
TY49523* X_83258;
Result_83257 = 0;
X_83258 = 0;
X_83258 = Getarg_83036(N_83022, Name_83023, Pos_83024);
if (!(X_83258 == NIM_NIL)) goto LA2;
Result_83257 = copyString(Default_83025);
goto LA1;
LA2: ;
if (!((*X_83258).Kind >= ((NU8) 14) && (*X_83258).Kind <= ((NU8) 16))) goto LA4;
Result_83257 = copyString((*X_83258).KindU.S3.Strval);
goto LA1;
LA4: ;
Invalidpragma_83032(N_83022);
LA1: ;
return Result_83257;
}
N_NIMCALL(NIM_BOOL, Boolarg_83026)(TY49523* N_83028, NimStringDesc* Name_83029, NI Pos_83030, NIM_BOOL Default_83031) {
NIM_BOOL Result_83300;
TY49523* X_83301;
NIM_BOOL LOC4;
NIM_BOOL LOC8;
Result_83300 = 0;
X_83301 = 0;
X_83301 = Getarg_83036(N_83028, Name_83029, Pos_83030);
if (!(X_83301 == NIM_NIL)) goto LA2;
Result_83300 = Default_83031;
goto LA1;
LA2: ;
LOC4 = ((*X_83301).Kind == ((NU8) 2));
if (!(LOC4)) goto LA5;
LOC4 = Identeq_48028((*X_83301).KindU.S5.Ident, ((NimStringDesc*) &TMP190855));
LA5: ;
if (!LOC4) goto LA6;
Result_83300 = NIM_TRUE;
goto LA1;
LA6: ;
LOC8 = ((*X_83301).Kind == ((NU8) 2));
if (!(LOC8)) goto LA9;
LOC8 = Identeq_48028((*X_83301).KindU.S5.Ident, ((NimStringDesc*) &TMP190856));
LA9: ;
if (!LOC8) goto LA10;
Result_83300 = NIM_FALSE;
goto LA1;
LA10: ;
Invalidpragma_83032(N_83028);
LA1: ;
return Result_83300;
}
N_NIMCALL(TY68013*, Filterstrip_83009)(TY68013* Stdin_83011, NimStringDesc* Filename_83012, TY49523* Call_83013) {
TY68013* Result_83360;
NimStringDesc* Pattern_83361;
NIM_BOOL Leading_83362;
NIM_BOOL Trailing_83363;
NIM_BOOL LOC2;
NimStringDesc* Line_83364;
NimStringDesc* Stripped_83365;
NIM_BOOL LOC4;
Result_83360 = 0;
Pattern_83361 = 0;
Pattern_83361 = Strarg_83020(Call_83013, ((NimStringDesc*) &TMP190853), 1, ((NimStringDesc*) &TMP190854));
Leading_83362 = 0;
Leading_83362 = Boolarg_83026(Call_83013, ((NimStringDesc*) &TMP190857), 2, NIM_TRUE);
Trailing_83363 = 0;
Trailing_83363 = Boolarg_83026(Call_83013, ((NimStringDesc*) &TMP190858), 3, NIM_TRUE);
Result_83360 = Llstreamopen_68025(((NimStringDesc*) &TMP190854));
while (1) {
LOC2 = Llstreamatend_68071(Stdin_83011);
if (!!(LOC2)) goto LA1;
Line_83364 = 0;
Line_83364 = Llstreamreadline_68048(Stdin_83011);
Stripped_83365 = 0;
Stripped_83365 = nsuStrip(Line_83364, Leading_83362, Trailing_83363);
LOC4 = (Pattern_83361->Sup.len == 0);
if (LOC4) goto LA5;
LOC4 = nsuStartsWith(Stripped_83365, Pattern_83361);
LA5: ;
if (!LOC4) goto LA6;
Llstreamwriteln_68067(Result_83360, Stripped_83365);
goto LA3;
LA6: ;
Llstreamwriteln_68067(Result_83360, Line_83364);
LA3: ;
} LA1: ;
Llstreamclose_68040(Stdin_83011);
return Result_83360;
}
N_NIMCALL(TY68013*, Filterreplace_83004)(TY68013* Stdin_83006, NimStringDesc* Filename_83007, TY49523* Call_83008) {
TY68013* Result_83376;
NimStringDesc* Sub_83377;
NimStringDesc* By_83382;
NIM_BOOL LOC5;
NimStringDesc* Line_83383;
NimStringDesc* LOC6;
Result_83376 = 0;
Sub_83377 = 0;
Sub_83377 = Strarg_83020(Call_83008, ((NimStringDesc*) &TMP190859), 1, ((NimStringDesc*) &TMP190854));
if (!(Sub_83377->Sup.len == 0)) goto LA2;
Invalidpragma_83032(Call_83008);
LA2: ;
By_83382 = 0;
By_83382 = Strarg_83020(Call_83008, ((NimStringDesc*) &TMP190860), 2, ((NimStringDesc*) &TMP190854));
Result_83376 = Llstreamopen_68025(((NimStringDesc*) &TMP190854));
while (1) {
LOC5 = Llstreamatend_68071(Stdin_83006);
if (!!(LOC5)) goto LA4;
Line_83383 = 0;
Line_83383 = Llstreamreadline_68048(Stdin_83006);
LOC6 = nsuReplaceStr(Line_83383, Sub_83377, By_83382);
Llstreamwriteln_68067(Result_83376, LOC6);
} LA4: ;
Llstreamclose_68040(Stdin_83006);
return Result_83376;
}
N_NOINLINE(void, filtersInit)(void) {
}

