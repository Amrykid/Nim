/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY186208 TY186208;
typedef struct TY186206 TY186206;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY49545 TY49545;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10202 TY10202;
typedef struct TY10218 TY10218;
typedef struct TY10590 TY10590;
typedef struct TY10214 TY10214;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY37019 TY37019;
typedef struct TY37013 TY37013;
typedef struct TY32515 TY32515;
typedef struct TY49523 TY49523;
typedef struct TY86031 TY86031;
typedef struct TY48005 TY48005;
typedef struct TNimObject TNimObject;
typedef struct TY49549 TY49549;
typedef struct TY48011 TY48011;
typedef struct TY41532 TY41532;
typedef struct TY49527 TY49527;
typedef struct TY49525 TY49525;
typedef struct TY49537 TY49537;
typedef struct TY46008 TY46008;
typedef struct TY49541 TY49541;
typedef struct TY68013 TY68013;
typedef struct TY98006 TY98006;
typedef struct TY98002 TY98002;
typedef struct TY70267 TY70267;
typedef struct TY69015 TY69015;
typedef struct TY70281 TY70281;
typedef struct TY70263 TY70263;
typedef struct TY49517 TY49517;
typedef struct TY33221 TY33221;
typedef struct TY86029 TY86029;
typedef struct TY53223 TY53223;
typedef struct TY53221 TY53221;
typedef struct TY53219 TY53219;
typedef struct TY49561 TY49561;
typedef struct TY49559 TY49559;
typedef struct TY49557 TY49557;
typedef struct TY49547 TY49547;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY186206 {
NimStringDesc* Filename;
TY49545* Module;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TY37019 {
TNimType* m_type;
TY37013* Head;
TY37013* Tail;
NI Counter;
};
struct TY32515 {
NimStringDesc* Dir;
NimStringDesc* Name;
NimStringDesc* Ext;
};
typedef N_NIMCALL_PTR(TY49523*, TY98048) (NimStringDesc* Filename_98049);
typedef N_NIMCALL_PTR(TY49545*, TY98044) (NimStringDesc* Filename_98045);
struct TNimObject {
TNimType* m_type;
};
struct TY48005 {
  TNimObject Sup;
NI Id;
};
struct TY41532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY49527 {
TNimType* m_type;
NI Counter;
TY49525* Data;
};
struct TY49537 {
NU8 K;
NU8 S;
NU8 Flags;
TY49549* T;
TY46008* R;
NI A;
};
struct TY49545 {
  TY48005 Sup;
NU8 Kind;
NU8 Magic;
TY49549* Typ;
TY48011* Name;
TY41532 Info;
TY49545* Owner;
NU32 Flags;
TY49527 Tab;
TY49523* Ast;
NU32 Options;
NI Position;
NI Offset;
TY49537 Loc;
TY49541* Annex;
};
struct TY48011 {
  TY48005 Sup;
NimStringDesc* S;
TY48011* Next;
NI H;
};
typedef N_NIMCALL_PTR(TY98002*, TY98007) (TY49545* Module_98008, NimStringDesc* Filename_98009);
typedef N_NIMCALL_PTR(TY98002*, TY98012) (TY49545* Module_98013, NimStringDesc* Filename_98014, TY86031* Rd_98015);
typedef N_NIMCALL_PTR(TY49523*, TY98018) (TY98002* P_98019, TY49523* N_98020);
typedef N_NIMCALL_PTR(TY49523*, TY98023) (TY98002* P_98024, TY49523* Toplevelstmt_98025);
struct TY98006 {
TY98007 Open;
TY98012 Opencached;
TY98018 Close;
TY98023 Process;
};
struct TY69015 {
  TNimObject Sup;
NI Bufpos;
NCSTRING Buf;
NI Buflen;
TY68013* Stream;
NI Linenumber;
NI Sentinel;
NI Linestart;
};
struct TY70267 {
  TY69015 Sup;
NimStringDesc* Filename;
TY70281* Indentstack;
NI Dedent;
NI Indentahead;
};
struct TY70263 {
TNimType* m_type;
NU8 Toktype;
NI Indent;
TY48011* Ident;
NI64 Inumber;
NF64 Fnumber;
NU8 Base;
NimStringDesc* Literal;
TY70263* Next;
};
typedef NI TY8214[16];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY37013 {
  TNimObject Sup;
TY37013* Prev;
TY37013* Next;
};
struct TY49523 {
TY49549* Typ;
NimStringDesc* Comment;
TY41532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY49545* Sym;
} S4;
struct {TY48011* Ident;
} S5;
struct {TY49517* Sons;
} S6;
} KindU;
};
struct TY53219 {
NI Key;
NI Val;
};
struct TY53223 {
NI Counter;
TY53221* Data;
};
struct TY86029 {
NI Lastidxkey;
NI Lastidxval;
TY53223 Tab;
TY46008* R;
NI Offset;
};
struct TY49557 {
TY48005* Key;
TNimObject* Val;
};
struct TY49561 {
NI Counter;
TY49559* Data;
};
struct TY86031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY33221* Moddeps;
TY33221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY86029 Index;
TY86029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY49561 Syms;
};
struct TY49549 {
  TY48005 Sup;
NU8 Kind;
TY49547* Sons;
TY49523* N;
NU8 Flags;
NU8 Callconv;
TY49545* Owner;
TY49545* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY49537 Loc;
};
struct TY46008 {
  TNimObject Sup;
TY46008* Left;
TY46008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY49541 {
  TY37013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY46008* Name;
TY49523* Path;
};
struct TY68013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TY98002 {
  TNimObject Sup;
};
struct TY186208 {
  TGenericSeq Sup;
  TY186206 data[SEQ_DECL_SIZE];
};
struct TY49525 {
  TGenericSeq Sup;
  TY49545* data[SEQ_DECL_SIZE];
};
struct TY70281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY49517 {
  TGenericSeq Sup;
  TY49523* data[SEQ_DECL_SIZE];
};
struct TY33221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY53221 {
  TGenericSeq Sup;
  TY53219 data[SEQ_DECL_SIZE];
};
struct TY49559 {
  TGenericSeq Sup;
  TY49557 data[SEQ_DECL_SIZE];
};
struct TY49547 {
  TGenericSeq Sup;
  TY49549* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_12403, NI Len_12404);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417);
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624);
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258);
N_NOINLINE(void, Addzct_10611)(TY10218* S_10614, TY10202* C_10615);
N_NIMCALL(void, Appendstr_37061)(TY37019* List_37064, NimStringDesc* Data_37065);
N_NIMCALL(void, Prependstr_37071)(TY37019* List_37074, NimStringDesc* Data_37075);
N_NIMCALL(void, nossplitFile)(NimStringDesc* Path_32514, TY32515* Result);
N_NIMCALL(void, Setid_49693)(NI Id_49695);
N_NIMCALL(TY49523*, Parsefile_85031)(NimStringDesc* Filename_85033);
N_NIMCALL(TY49545*, Importmodule_186327)(NimStringDesc* Filename_186329);
N_NIMCALL(TY49545*, Getmodule_186256)(NimStringDesc* Filename_186258);
N_NIMCALL(NIM_BOOL, nossameFile)(NimStringDesc* Path1_32870, NimStringDesc* Path2_32871);
N_NIMCALL(TY49545*, Compilemodule_186322)(NimStringDesc* Filename_186324, NIM_BOOL Ismainfile_186325, NIM_BOOL Issystemfile_186326);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_32844, NimStringDesc* Ext_32845);
N_NIMCALL(TY49545*, Newmodule_186289)(NimStringDesc* Filename_186291);
N_NIMCALL(void*, newObj)(TNimType* Typ_11907, NI Size_11908);
N_NIMCALL(void, objectInit)(void* Dest_17862, TNimType* Typ_17863);
N_NIMCALL(TY48011*, Getident_48016)(NimStringDesc* Identifier_48018);
N_NIMCALL(NIM_BOOL, Isnimrodidentifier_70357)(NimStringDesc* S_70359);
N_NIMCALL(void, Rawmessage_41553)(NU8 Msg_41555, NimStringDesc* Arg_41556);
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413);
static N_INLINE(void, Incref_11401)(TY10202* C_11403);
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628);
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
static N_INLINE(void, Decref_11260)(TY10202* C_11262);
N_NIMCALL(TY41532, Newlineinfo_41574)(NimStringDesc* Filename_41576, NI Line_41577, NI Col_41578);
N_NIMCALL(void, Initstrtable_49744)(TY49527* X_49747);
N_NIMCALL(void, Registermodule_186229)(NimStringDesc* Filename_186231, TY49545* Module_186232);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17203, NI Elemsize_17204, NI Newlen_17205);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_16908);
N_NIMCALL(void, Strtableadd_53064)(TY49527* T_53067, TY49545* N_53068);
N_NIMCALL(TY86031*, Handlesymbolfile_86060)(TY49545* Module_86062, NimStringDesc* Filename_86063);
N_NIMCALL(void, Internalerror_41571)(NimStringDesc* Errmsg_41573);
N_NIMCALL(NI, Getid_49691)(void);
N_NIMCALL(void, Processmodule_98035)(TY49545* Module_98037, NimStringDesc* Filename_98038, TY68013* Stream_98039, TY86031* Rd_98040);
N_NIMCALL(void, Limessage_41562)(TY41532 Info_41564, NU8 Msg_41565, NimStringDesc* Arg_41566);
N_NIMCALL(NU8, Whichkeyword_66468)(NimStringDesc* Id_66470);
N_NIMCALL(void, Wantfile_186713)(NimStringDesc* Filename_186715);
N_NIMCALL(void, Commandcompiletoc_186436)(NimStringDesc* Filename_186438);
N_NIMCALL(void, Semanticpasses_186408)(void);
N_NIMCALL(void, Registerpass_98028)(TY98006* P_98030);
N_NIMCALL(TY98006, Verbosepass_180004)(void);
N_NIMCALL(TY98006, Sempass_118001)(void);
N_NIMCALL(TY98006, Transfpass_182005)(void);
N_NIMCALL(TY98006, Cgenpass_153201)(void);
N_NIMCALL(TY98006, Rodwritepass_104001)(void);
N_NIMCALL(void, Compileproject_186405)(NimStringDesc* Filename_186407);
N_NIMCALL(NimStringDesc*, nosJoinPath)(NimStringDesc* Head_32203, NimStringDesc* Tail_32204);
N_NIMCALL(void, Callccompiler_64370)(NimStringDesc* Projectfile_64372);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_32820, NimStringDesc* Ext_32821);
N_NIMCALL(void, Commandcompiletoecmascript_186601)(NimStringDesc* Filename_186603);
N_NIMCALL(void, Settarget_45574)(NU8 O_45576, NU8 C_45577);
N_NIMCALL(void, Initdefines_57049)(void);
N_NIMCALL(TY98006, Ecmasgenpass_172004)(void);
N_NIMCALL(void, Commandpretty_186643)(NimStringDesc* Filename_186645);
N_NIMCALL(void, Rendermodule_78035)(TY49523* N_78037, NimStringDesc* Filename_78038, NU8 Renderflags_78041);
N_NIMCALL(NimStringDesc*, Getoutfile_40143)(NimStringDesc* Filename_40145, NimStringDesc* Ext_40146);
N_NIMCALL(void, Loadspecialconfig_73007)(NimStringDesc* Configfilename_73009);
N_NIMCALL(void, Commanddoc_148001)(NimStringDesc* Filename_148003);
N_NIMCALL(void, Commandrst2html_148004)(NimStringDesc* Filename_148006);
N_NIMCALL(void, Commandrst2tex_148007)(NimStringDesc* Filename_148009);
N_NIMCALL(void, Commandgendepend_186410)(NimStringDesc* Filename_186412);
N_NIMCALL(TY98006, Gendependpass_181004)(void);
N_NIMCALL(TY98006, Cleanuppass_180006)(void);
N_NIMCALL(void, Generatedot_181006)(NimStringDesc* Project_181008);
N_NIMCALL(void, Execexternalprogram_64373)(NimStringDesc* Cmd_64375);
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_16887);
N_NIMCALL(void, Listsymbols_57062)(void);
N_NIMCALL(void, Commandcheck_186433)(NimStringDesc* Filename_186435);
N_NIMCALL(void, Commandscan_186666)(NimStringDesc* Filename_186668);
N_NIMCALL(TY68013*, Llstreamopen_68032)(NimStringDesc* Filename_68034, NU8 Mode_68035);
N_NIMCALL(void, Openlexer_70298)(TY70267* Lex_70301, NimStringDesc* Filename_70302, TY68013* Inputstream_70303);
N_NIMCALL(void, Rawgettok_70304)(TY70267* L_70307, TY70263* Tok_70309);
N_NIMCALL(void, Printtok_70320)(TY70263* Tok_70322);
N_NIMCALL(void, Closelexer_70316)(TY70267* Lex_70319);
N_NIMCALL(void, Messageout_41550)(NimStringDesc* S_41552);
N_NIMCALL(void, Commandinteractive_186616)(void);
N_NIMCALL(TY98006, Evalpass_108046)(void);
N_NIMCALL(TY68013*, Llstreamopenstdin_68038)(void);
STRING_LITERAL(TMP190866, "nim", 3);
STRING_LITERAL(TMP190919, "handleSymbolFile should have set the module\'s ID", 48);
STRING_LITERAL(TMP190921, "command line", 12);
STRING_LITERAL(TMP190922, "", 0);
STRING_LITERAL(TMP191867, "system", 6);
STRING_LITERAL(TMP192081, "pretty.nim", 10);
STRING_LITERAL(TMP192082, "nimdoc.cfg", 10);
STRING_LITERAL(TMP192469, "nimdoc.tex.cfg", 14);
STRING_LITERAL(TMP192477, "dot -Tpng -o", 12);
STRING_LITERAL(TMP192478, "png", 3);
STRING_LITERAL(TMP192479, "dot", 3);
STRING_LITERAL(TMP192481, "Beware: Indentation tokens depend on the parser\'s state!", 56);
STRING_LITERAL(TMP192482, "stdin", 5);
TY186208* Compmods_186227;
extern TNimType* NTI186208; /* TFileModuleMap */
extern TY10590 Gch_10608;
extern TY37019 Searchpaths_40079;
extern NimStringDesc* Libpath_40110;
extern TY98048 Gincludefile_98051;
extern TY98044 Gimportmodule_98047;
extern TNimType* NTI49521; /* PSym */
extern TNimType* NTI49545; /* TSym */
extern NU8 Gcmd_40082;
extern NU32 Gglobaloptions_40077;
extern TNimType* NTI70267; /* TLexer */
extern TNimType* NTI70261; /* PToken */
extern TNimType* NTI70263; /* TToken */
static N_INLINE(TY10202*, Usrtocell_10622)(void* Usr_10624) {
TY10202* Result_10625;
Result_10625 = 0;
Result_10625 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_10624))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_10625;
}
static N_INLINE(void, Rtladdzct_11256)(TY10202* C_11258) {
Addzct_10611(&Gch_10608.Zct, C_11258);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11416, void* Src_11417) {
TY10202* C_11418;
TY10202* C_11419;
if (!!((Src_11417 == NIM_NIL))) goto LA2;
C_11418 = 0;
C_11418 = Usrtocell_10622(Src_11417);
(*C_11418).Refcount = (NI32)((NU32)((*C_11418).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11416) == NIM_NIL))) goto LA5;
C_11419 = 0;
C_11419 = Usrtocell_10622((*Dest_11416));
(*C_11419).Refcount = (NI32)((NU32)((*C_11419).Refcount) - (NU32)(8));
if (!((NU32)((*C_11419).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11256(C_11419);
LA8: ;
LA5: ;
(*Dest_11416) = Src_11417;
}
N_NIMCALL(TY49545*, Getmodule_186256)(NimStringDesc* Filename_186258) {
TY49545* Result_186259;
NI I_186282;
NI HEX3Atmp_186284;
NI Res_186286;
NIM_BOOL LOC3;
Result_186259 = 0;
I_186282 = 0;
HEX3Atmp_186284 = 0;
HEX3Atmp_186284 = (Compmods_186227->Sup.len-1);
Res_186286 = 0;
Res_186286 = 0;
while (1) {
if (!(Res_186286 <= HEX3Atmp_186284)) goto LA1;
I_186282 = Res_186286;
LOC3 = nossameFile(Compmods_186227->data[I_186282].Filename, Filename_186258);
if (!LOC3) goto LA4;
Result_186259 = Compmods_186227->data[I_186282].Module;
goto BeforeRet;
LA4: ;
Res_186286 += 1;
} LA1: ;
BeforeRet: ;
return Result_186259;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_10626)(TY10202* C_10628) {
NIM_BOOL Result_10629;
Result_10629 = 0;
Result_10629 = !((((*(*C_10628).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_10629;
}
static N_INLINE(void, Rtladdcycleroot_11252)(TY10202* C_11254) {
Incl_10474(&Gch_10608.Cycleroots, C_11254);
}
static N_INLINE(void, Incref_11401)(TY10202* C_11403) {
NIM_BOOL LOC2;
(*C_11403).Refcount = (NI32)((NU32)((*C_11403).Refcount) + (NU32)(8));
LOC2 = Canbecycleroot_10626(C_11403);
if (!LOC2) goto LA3;
Rtladdcycleroot_11252(C_11403);
LA3: ;
}
static N_INLINE(void, Decref_11260)(TY10202* C_11262) {
NIM_BOOL LOC4;
(*C_11262).Refcount = (NI32)((NU32)((*C_11262).Refcount) - (NU32)(8));
if (!((NU32)((*C_11262).Refcount) < (NU32)(8))) goto LA2;
Rtladdzct_11256(C_11262);
goto LA1;
LA2: ;
LOC4 = Canbecycleroot_10626(C_11262);
if (!LOC4) goto LA5;
Rtladdcycleroot_11252(C_11262);
goto LA1;
LA5: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_11412, void* Src_11413) {
TY10202* LOC4;
TY10202* LOC8;
if (!!((Src_11413 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_10622(Src_11413);
Incref_11401(LOC4);
LA2: ;
if (!!(((*Dest_11412) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_10622((*Dest_11412));
Decref_11260(LOC8);
LA6: ;
(*Dest_11412) = Src_11413;
}
N_NIMCALL(void, Registermodule_186229)(NimStringDesc* Filename_186231, TY49545* Module_186232) {
NI Length_186243;
Length_186243 = 0;
Length_186243 = Compmods_186227->Sup.len;
Compmods_186227 = (TY186208*) setLengthSeq(&(Compmods_186227)->Sup, sizeof(TY186206), (NI32)(Length_186243 + 1));
asgnRefNoCycle((void**) &Compmods_186227->data[Length_186243].Filename, copyString(Filename_186231));
asgnRef((void**) &Compmods_186227->data[Length_186243].Module, Module_186232);
}
N_NIMCALL(TY49545*, Newmodule_186289)(NimStringDesc* Filename_186291) {
TY49545* Result_186292;
TY32515 LOC1;
NIM_BOOL LOC3;
Result_186292 = 0;
Result_186292 = (TY49545*) newObj(NTI49521, sizeof(TY49545));
objectInit(Result_186292, NTI49545);
(*Result_186292).Sup.Id = -1;
(*Result_186292).Kind = ((NU8) 18);
nossplitFile(Filename_186291, &LOC1);
asgnRefNoCycle((void**) &(*Result_186292).Name, Getident_48016(LOC1.Name));
LOC3 = Isnimrodidentifier_70357((*(*Result_186292).Name).S);
if (!!(LOC3)) goto LA4;
Rawmessage_41553(((NU8) 19), (*(*Result_186292).Name).S);
LA4: ;
asgnRef((void**) &(*Result_186292).Owner, Result_186292);
(*Result_186292).Info = Newlineinfo_41574(Filename_186291, 1, 1);
(*Result_186292).Flags |=(1<<((NI32)(((NU8) 0))%(sizeof(NI32)*8)));
Initstrtable_49744(&(*Result_186292).Tab);
Registermodule_186229(Filename_186291, Result_186292);
Strtableadd_53064(&(*Result_186292).Tab, Result_186292);
return Result_186292;
}
N_NIMCALL(TY49545*, Compilemodule_186322)(NimStringDesc* Filename_186324, NIM_BOOL Ismainfile_186325, NIM_BOOL Issystemfile_186326) {
TY49545* Result_186358;
TY86031* Rd_186359;
NimStringDesc* F_186360;
NIM_BOOL LOC8;
Result_186358 = 0;
Rd_186359 = 0;
Rd_186359 = NIM_NIL;
F_186360 = 0;
F_186360 = nosaddFileExt(Filename_186324, ((NimStringDesc*) &TMP190866));
Result_186358 = Newmodule_186289(Filename_186324);
if (!Ismainfile_186325) goto LA2;
(*Result_186358).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LA2: ;
if (!Issystemfile_186326) goto LA5;
(*Result_186358).Flags |=(1<<((NI32)(((NU8) 16))%(sizeof(NI32)*8)));
LA5: ;
LOC8 = (Gcmd_40082 == ((NU8) 1));
if (LOC8) goto LA9;
LOC8 = (Gcmd_40082 == ((NU8) 2));
LA9: ;
if (!LOC8) goto LA10;
Rd_186359 = Handlesymbolfile_86060(Result_186358, F_186360);
if (!((*Result_186358).Sup.Id < 0)) goto LA13;
Internalerror_41571(((NimStringDesc*) &TMP190919));
LA13: ;
goto LA7;
LA10: ;
(*Result_186358).Sup.Id = Getid_49691();
LA7: ;
Processmodule_98035(Result_186358, F_186360, NIM_NIL, Rd_186359);
return Result_186358;
}
N_NIMCALL(TY49545*, Importmodule_186327)(NimStringDesc* Filename_186329) {
TY49545* Result_186330;
Result_186330 = 0;
Result_186330 = Getmodule_186256(Filename_186329);
if (!(Result_186330 == NIM_NIL)) goto LA2;
Result_186330 = Compilemodule_186322(Filename_186329, NIM_FALSE, NIM_FALSE);
goto LA1;
LA2: ;
if (!(((*Result_186330).Flags &(1<<((((NU8) 16))&31)))!=0)) goto LA4;
Limessage_41562((*Result_186330).Info, ((NU8) 37), (*(*Result_186330).Name).S);
goto LA1;
LA4: ;
LA1: ;
return Result_186330;
}
N_NIMCALL(void, Wantfile_186713)(NimStringDesc* Filename_186715) {
TY41532 LOC4;
if (!((Filename_186715) && (Filename_186715)->Sup.len == 0)) goto LA2;
LOC4 = Newlineinfo_41574(((NimStringDesc*) &TMP190921), 1, 1);
Limessage_41562(LOC4, ((NU8) 181), ((NimStringDesc*) &TMP190922));
LA2: ;
}
N_NIMCALL(void, Semanticpasses_186408)(void) {
TY98006 LOC1;
TY98006 LOC2;
TY98006 LOC3;
LOC1 = Verbosepass_180004();
Registerpass_98028(&LOC1);
LOC2 = Sempass_118001();
Registerpass_98028(&LOC2);
LOC3 = Transfpass_182005();
Registerpass_98028(&LOC3);
}
N_NIMCALL(void, Compileproject_186405)(NimStringDesc* Filename_186407) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY49545* LOC3;
NimStringDesc* LOC4;
TY49545* LOC5;
LOC1 = nosaddFileExt(((NimStringDesc*) &TMP191867), ((NimStringDesc*) &TMP190866));
LOC2 = nosJoinPath(Libpath_40110, LOC1);
LOC3 = Compilemodule_186322(LOC2, NIM_FALSE, NIM_TRUE);
LOC4 = nosaddFileExt(Filename_186407, ((NimStringDesc*) &TMP190866));
LOC5 = Compilemodule_186322(LOC4, NIM_TRUE, NIM_FALSE);
}
N_NIMCALL(void, Commandcompiletoc_186436)(NimStringDesc* Filename_186438) {
TY98006 LOC1;
TY98006 LOC2;
NimStringDesc* LOC6;
Semanticpasses_186408();
LOC1 = Cgenpass_153201();
Registerpass_98028(&LOC1);
LOC2 = Rodwritepass_104001();
Registerpass_98028(&LOC2);
Compileproject_186405(Filename_186438);
if (!!((Gcmd_40082 == ((NU8) 17)))) goto LA4;
LOC6 = nosChangeFileExt(Filename_186438, ((NimStringDesc*) &TMP190922));
Callccompiler_64370(LOC6);
LA4: ;
}
N_NIMCALL(void, Commandcompiletoecmascript_186601)(NimStringDesc* Filename_186603) {
TY98006 LOC1;
Gglobaloptions_40077 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_45574(((NU8) 20), ((NU8) 11));
Initdefines_57049();
Semanticpasses_186408();
LOC1 = Ecmasgenpass_172004();
Registerpass_98028(&LOC1);
Compileproject_186405(Filename_186603);
}
N_NIMCALL(void, Commandpretty_186643)(NimStringDesc* Filename_186645) {
TY49523* Module_186646;
NimStringDesc* LOC1;
NimStringDesc* LOC5;
Module_186646 = 0;
LOC1 = nosaddFileExt(Filename_186645, ((NimStringDesc*) &TMP190866));
Module_186646 = Parsefile_85031(LOC1);
if (!!((Module_186646 == NIM_NIL))) goto LA3;
LOC5 = Getoutfile_40143(Filename_186645, ((NimStringDesc*) &TMP192081));
Rendermodule_78035(Module_186646, LOC5, 0);
LA3: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_16992, NimStringDesc* Src_16993) {
memcpy(((NCSTRING) (&(*Dest_16992).data[((*Dest_16992).Sup.len)-0])), ((NCSTRING) ((*Src_16993).data)), ((NI32) ((NI32)((NI32)((*Src_16993).Sup.len + 1) * 1))));
(*Dest_16992).Sup.len += (*Src_16993).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17009, NIM_CHAR C_17010) {
(*Dest_17009).data[((*Dest_17009).Sup.len)-0] = C_17010;
(*Dest_17009).data[((NI32)((*Dest_17009).Sup.len + 1))-0] = 0;
(*Dest_17009).Sup.len += 1;
}
N_NIMCALL(void, Commandgendepend_186410)(NimStringDesc* Filename_186412) {
TY98006 LOC1;
TY98006 LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
Semanticpasses_186408();
LOC1 = Gendependpass_181004();
Registerpass_98028(&LOC1);
LOC2 = Cleanuppass_180006();
Registerpass_98028(&LOC2);
Compileproject_186405(Filename_186412);
Generatedot_181006(Filename_186412);
LOC4 = nosChangeFileExt(Filename_186412, ((NimStringDesc*) &TMP192478));
LOC5 = nosChangeFileExt(Filename_186412, ((NimStringDesc*) &TMP192479));
LOC3 = rawNewString(LOC4->Sup.len + LOC5->Sup.len + 13);
appendString(LOC3, ((NimStringDesc*) &TMP192477));
appendString(LOC3, LOC4);
appendChar(LOC3, 32);
appendString(LOC3, LOC5);
Execexternalprogram_64373(LOC3);
}
N_NIMCALL(void, Commandcheck_186433)(NimStringDesc* Filename_186435) {
Semanticpasses_186408();
Compileproject_186405(Filename_186435);
}
N_NIMCALL(void, Commandscan_186666)(NimStringDesc* Filename_186668) {
NimStringDesc* F_186669;
TY68013* Stream_186670;
TY70267 L_186682;
TY70263* Tok_186683;
F_186669 = 0;
F_186669 = nosaddFileExt(Filename_186668, ((NimStringDesc*) &TMP190866));
Stream_186670 = 0;
Stream_186670 = Llstreamopen_68032(F_186669, ((NU8) 0));
if (!!((Stream_186670 == NIM_NIL))) goto LA2;
memset((void*)&L_186682, 0, sizeof(L_186682));
L_186682.Sup.Sup.m_type = NTI70267;
Tok_186683 = 0;
Tok_186683 = (TY70263*) newObj(NTI70261, sizeof(TY70263));
(*Tok_186683).m_type = NTI70263;
Openlexer_70298(&L_186682, F_186669, Stream_186670);
while (1) {
Rawgettok_70304(&L_186682, Tok_186683);
Printtok_70320(Tok_186683);
if (!((*Tok_186683).Toktype == ((NU8) 1))) goto LA6;
goto LA4;
LA6: ;
} LA4: ;
Closelexer_70316(&L_186682);
goto LA1;
LA2: ;
Rawmessage_41553(((NU8) 2), F_186669);
LA1: ;
}
N_NIMCALL(void, Commandinteractive_186616)(void) {
TY98006 LOC1;
TY98006 LOC2;
TY98006 LOC3;
TY98006 LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY49545* LOC7;
TY49545* M_186630;
TY68013* LOC8;
Gglobaloptions_40077 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_45574(((NU8) 21), ((NU8) 12));
Initdefines_57049();
LOC1 = Verbosepass_180004();
Registerpass_98028(&LOC1);
LOC2 = Sempass_118001();
Registerpass_98028(&LOC2);
LOC3 = Transfpass_182005();
Registerpass_98028(&LOC3);
LOC4 = Evalpass_108046();
Registerpass_98028(&LOC4);
LOC5 = nosaddFileExt(((NimStringDesc*) &TMP191867), ((NimStringDesc*) &TMP190866));
LOC6 = nosJoinPath(Libpath_40110, LOC5);
LOC7 = Compilemodule_186322(LOC6, NIM_FALSE, NIM_TRUE);
M_186630 = 0;
M_186630 = Newmodule_186289(((NimStringDesc*) &TMP192482));
(*M_186630).Sup.Id = Getid_49691();
(*M_186630).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LOC8 = Llstreamopenstdin_68038();
Processmodule_98035(M_186630, ((NimStringDesc*) &TMP192482), LOC8, NIM_NIL);
}
N_NIMCALL(void, Maincommand_186201)(NimStringDesc* Cmd_186203, NimStringDesc* Filename_186204) {
TY32515 LOC4;
NU8 LOC5;
NimStringDesc* LOC6;
TY49523* LOC7;
Appendstr_37061(&Searchpaths_40079, Libpath_40110);
if (!!(((Filename_186204) && (Filename_186204)->Sup.len == 0))) goto LA2;
nossplitFile(Filename_186204, &LOC4);
Prependstr_37071(&Searchpaths_40079, LOC4.Dir);
LA2: ;
Setid_49693(100);
Gincludefile_98051 = Parsefile_85031;
Gimportmodule_98047 = Importmodule_186327;
LOC5 = Whichkeyword_66468(Cmd_186203);
switch (LOC5) {
case ((NU8) 107):
case ((NU8) 200):
case ((NU8) 176):
case ((NU8) 192):
Gcmd_40082 = ((NU8) 1);
Wantfile_186713(Filename_186204);
Commandcompiletoc_186436(Filename_186204);
break;
case ((NU8) 179):
Gcmd_40082 = ((NU8) 17);
Wantfile_186713(Filename_186204);
Rawmessage_41553(((NU8) 176), Cmd_186203);
break;
case ((NU8) 201):
Gcmd_40082 = ((NU8) 2);
Wantfile_186713(Filename_186204);
Commandcompiletoc_186436(Filename_186204);
break;
case ((NU8) 202):
Gcmd_40082 = ((NU8) 3);
Wantfile_186713(Filename_186204);
Commandcompiletoecmascript_186601(Filename_186204);
break;
case ((NU8) 203):
Gcmd_40082 = ((NU8) 4);
Wantfile_186713(Filename_186204);
Rawmessage_41553(((NU8) 176), Cmd_186203);
break;
case ((NU8) 204):
Gcmd_40082 = ((NU8) 6);
Wantfile_186713(Filename_186204);
Commandpretty_186643(Filename_186204);
break;
case ((NU8) 205):
Gcmd_40082 = ((NU8) 7);
Loadspecialconfig_73007(((NimStringDesc*) &TMP192082));
Wantfile_186713(Filename_186204);
Commanddoc_148001(Filename_186204);
break;
case ((NU8) 212):
Gcmd_40082 = ((NU8) 14);
Loadspecialconfig_73007(((NimStringDesc*) &TMP192082));
Wantfile_186713(Filename_186204);
Commandrst2html_148004(Filename_186204);
break;
case ((NU8) 213):
Gcmd_40082 = ((NU8) 15);
Loadspecialconfig_73007(((NimStringDesc*) &TMP192469));
Wantfile_186713(Filename_186204);
Commandrst2tex_148007(Filename_186204);
break;
case ((NU8) 206):
Gcmd_40082 = ((NU8) 8);
Wantfile_186713(Filename_186204);
Commandgendepend_186410(Filename_186204);
break;
case ((NU8) 207):
Gcmd_40082 = ((NU8) 9);
Listsymbols_57062();
break;
case ((NU8) 208):
Gcmd_40082 = ((NU8) 10);
Wantfile_186713(Filename_186204);
Commandcheck_186433(Filename_186204);
break;
case ((NU8) 209):
Gcmd_40082 = ((NU8) 11);
Wantfile_186713(Filename_186204);
LOC6 = nosaddFileExt(Filename_186204, ((NimStringDesc*) &TMP190866));
LOC7 = Parsefile_85031(LOC6);
break;
case ((NU8) 210):
Gcmd_40082 = ((NU8) 12);
Wantfile_186713(Filename_186204);
Commandscan_186666(Filename_186204);
Messageout_41550(((NimStringDesc*) &TMP192481));
break;
case ((NU8) 214):
Gcmd_40082 = ((NU8) 16);
Commandinteractive_186616();
break;
default:
Rawmessage_41553(((NU8) 176), Cmd_186203);
break;
}
}
N_NOINLINE(void, mainInit)(void) {
asgnRefNoCycle((void**) &Compmods_186227, (TY186208*) newSeq(NTI186208, 0));
}

