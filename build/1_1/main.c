/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY187208 TY187208;
typedef struct TY187206 TY187206;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY50548 TY50548;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10602 TY10602;
typedef struct TY10618 TY10618;
typedef struct TY10996 TY10996;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10994 TY10994;
typedef struct TY38019 TY38019;
typedef struct TY38013 TY38013;
typedef struct TY33461 TY33461;
typedef struct TY50526 TY50526;
typedef struct TY89031 TY89031;
typedef struct TY49005 TY49005;
typedef struct TNimObject TNimObject;
typedef struct TY50552 TY50552;
typedef struct TY49011 TY49011;
typedef struct TY42538 TY42538;
typedef struct TY50530 TY50530;
typedef struct TY50528 TY50528;
typedef struct TY50540 TY50540;
typedef struct TY47008 TY47008;
typedef struct TY50544 TY50544;
typedef struct TY71204 TY71204;
typedef struct TY101006 TY101006;
typedef struct TY101002 TY101002;
typedef struct TY73267 TY73267;
typedef struct TY72015 TY72015;
typedef struct TY73281 TY73281;
typedef struct TY73263 TY73263;
typedef struct TY50520 TY50520;
typedef struct TY34021 TY34021;
typedef struct TY89029 TY89029;
typedef struct TY55215 TY55215;
typedef struct TY55213 TY55213;
typedef struct TY55211 TY55211;
typedef struct TY50564 TY50564;
typedef struct TY50562 TY50562;
typedef struct TY50560 TY50560;
typedef struct TY50550 TY50550;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY187206 {
NimStringDesc* Filename;
TY50548* Module;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY10994 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10996 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY10994 Stat;
};
struct TY38019 {
TNimType* m_type;
TY38013* Head;
TY38013* Tail;
NI Counter;
};
struct TY33461 {
NimStringDesc* Dir;
NimStringDesc* Name;
NimStringDesc* Ext;
};
typedef N_NIMCALL_PTR(TY50526*, TY101045) (NimStringDesc* Filename_101046);
typedef N_NIMCALL_PTR(TY50548*, TY101041) (NimStringDesc* Filename_101042);
struct TNimObject {
TNimType* m_type;
};
struct TY49005 {
  TNimObject Sup;
NI Id;
};
struct TY42538 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY50530 {
TNimType* m_type;
NI Counter;
TY50528* Data;
};
struct TY50540 {
NU8 K;
NU8 S;
NU8 Flags;
TY50552* T;
TY47008* R;
NI A;
};
struct TY50548 {
  TY49005 Sup;
NU8 Kind;
NU8 Magic;
TY50552* Typ;
TY49011* Name;
TY42538 Info;
TY50548* Owner;
NU32 Flags;
TY50530 Tab;
TY50526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY50540 Loc;
TY50544* Annex;
};
struct TY49011 {
  TY49005 Sup;
NimStringDesc* S;
TY49011* Next;
NI H;
};
typedef N_NIMCALL_PTR(TY101002*, TY101007) (TY50548* Module_101008, NimStringDesc* Filename_101009);
typedef N_NIMCALL_PTR(TY101002*, TY101012) (TY50548* Module_101013, NimStringDesc* Filename_101014, TY89031* Rd_101015);
typedef N_NIMCALL_PTR(TY50526*, TY101018) (TY101002* P_101019, TY50526* N_101020);
typedef N_NIMCALL_PTR(TY50526*, TY101023) (TY101002* P_101024, TY50526* Toplevelstmt_101025);
struct TY101006 {
TY101007 Open;
TY101012 Opencached;
TY101018 Close;
TY101023 Process;
};
struct TY72015 {
  TNimObject Sup;
NI Bufpos;
NCSTRING Buf;
NI Buflen;
TY71204* Stream;
NI Linenumber;
NI Sentinel;
NI Linestart;
};
struct TY73267 {
  TY72015 Sup;
NimStringDesc* Filename;
TY73281* Indentstack;
NI Dedent;
NI Indentahead;
};
struct TY73263 {
TNimType* m_type;
NU8 Toktype;
NI Indent;
TY49011* Ident;
NI64 Inumber;
NF64 Fnumber;
NU8 Base;
NimStringDesc* Literal;
TY73263* Next;
};
typedef NI TY8614[16];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY38013 {
  TNimObject Sup;
TY38013* Prev;
TY38013* Next;
};
struct TY50526 {
TY50552* Typ;
NimStringDesc* Comment;
TY42538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY50548* Sym;
} S4;
struct {TY49011* Ident;
} S5;
struct {TY50520* Sons;
} S6;
} KindU;
};
struct TY55211 {
NI Key;
NI Val;
};
struct TY55215 {
NI Counter;
TY55213* Data;
};
struct TY89029 {
NI Lastidxkey;
NI Lastidxval;
TY55215 Tab;
TY47008* R;
NI Offset;
};
struct TY50560 {
TY49005* Key;
TNimObject* Val;
};
struct TY50564 {
NI Counter;
TY50562* Data;
};
struct TY89031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY34021* Moddeps;
TY34021* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY89029 Index;
TY89029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY50564 Syms;
};
struct TY50552 {
  TY49005 Sup;
NU8 Kind;
TY50550* Sons;
TY50526* N;
NU8 Flags;
NU8 Callconv;
TY50548* Owner;
TY50548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY50540 Loc;
};
struct TY47008 {
  TNimObject Sup;
TY47008* Left;
TY47008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY50544 {
  TY38013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY47008* Name;
TY50526* Path;
};
struct TY71204 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
NI Lineoffset;
};
struct TY101002 {
  TNimObject Sup;
};
struct TY187208 {
  TGenericSeq Sup;
  TY187206 data[SEQ_DECL_SIZE];
};
struct TY50528 {
  TGenericSeq Sup;
  TY50548* data[SEQ_DECL_SIZE];
};
struct TY73281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY50520 {
  TGenericSeq Sup;
  TY50526* data[SEQ_DECL_SIZE];
};
struct TY34021 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY55213 {
  TGenericSeq Sup;
  TY55211 data[SEQ_DECL_SIZE];
};
struct TY50562 {
  TGenericSeq Sup;
  TY50560 data[SEQ_DECL_SIZE];
};
struct TY50550 {
  TGenericSeq Sup;
  TY50552* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_14204, NI Len_14205);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(void, Appendstr_38061)(TY38019* List_38064, NimStringDesc* Data_38065);
N_NIMCALL(void, Prependstr_38071)(TY38019* List_38074, NimStringDesc* Data_38075);
N_NIMCALL(void, nossplitFile)(NimStringDesc* Path_33460, TY33461* Result);
static N_INLINE(void, Setid_50696)(NI Id_50698);
N_NIMCALL(TY50526*, Parsefile_88031)(NimStringDesc* Filename_88033);
N_NIMCALL(TY50548*, Importmodule_187325)(NimStringDesc* Filename_187327);
N_NIMCALL(TY50548*, Getmodule_187256)(NimStringDesc* Filename_187258);
N_NIMCALL(NIM_BOOL, nossameFile)(NimStringDesc* Path1_33650, NimStringDesc* Path2_33651);
N_NIMCALL(TY50548*, Compilemodule_187320)(NimStringDesc* Filename_187322, NIM_BOOL Ismainfile_187323, NIM_BOOL Issystemfile_187324);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_33630, NimStringDesc* Ext_33631);
N_NIMCALL(TY50548*, Newmodule_187287)(NimStringDesc* Filename_187289);
N_NIMCALL(void*, newObj)(TNimType* Typ_13710, NI Size_13711);
N_NIMCALL(void, objectInit)(void* Dest_19476, TNimType* Typ_19477);
N_NIMCALL(TY49011*, Getident_49016)(NimStringDesc* Identifier_49018);
N_NIMCALL(NIM_BOOL, Isnimrodidentifier_73357)(NimStringDesc* S_73359);
N_NIMCALL(void, Rawmessage_43045)(NU8 Msg_43047, NimStringDesc* Arg_43048);
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015);
static N_INLINE(void, Incref_13002)(TY10602* C_13004);
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418);
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054);
N_NOINLINE(void, Incl_10880)(TY10614* S_10883, TY10602* Cell_10884);
static N_INLINE(void, Decref_12801)(TY10602* C_12803);
N_NIMCALL(TY42538, Newlineinfo_42712)(NimStringDesc* Filename_42714, NI Line_42715, NI Col_42716);
N_NIMCALL(void, Initstrtable_50747)(TY50530* X_50750);
N_NIMCALL(void, Registermodule_187229)(NimStringDesc* Filename_187231, TY50548* Module_187232);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18512);
N_NIMCALL(void, Strtableadd_55061)(TY50530* T_55064, TY50548* N_55065);
N_NIMCALL(TY89031*, Handlesymbolfile_89060)(TY50548* Module_89062, NimStringDesc* Filename_89063);
N_NIMCALL(void, Internalerror_43163)(NimStringDesc* Errmsg_43165);
static N_INLINE(NI, Getid_50694)(void);
N_NIMCALL(void, Processmodule_101035)(TY50548* Module_101037, NimStringDesc* Filename_101038, TY71204* Stream_101039, TY89031* Rd_101040);
N_NIMCALL(void, Localerror_43144)(TY42538 Info_43146, NU8 Msg_43147, NimStringDesc* Arg_43148);
N_NIMCALL(NU8, Whichkeyword_68482)(NimStringDesc* Id_68484);
N_NIMCALL(void, Wantfile_187707)(NimStringDesc* Filename_187709);
N_NIMCALL(void, Fatal_43134)(TY42538 Info_43136, NU8 Msg_43137, NimStringDesc* Arg_43138);
N_NIMCALL(void, Commandcompiletoc_187416)(NimStringDesc* Filename_187418);
N_NIMCALL(void, Semanticpasses_187408)(void);
N_NIMCALL(void, Registerpass_101028)(TY101006* P_101030);
N_NIMCALL(TY101006, Verbosepass_182033)(void);
N_NIMCALL(TY101006, Sempass_122001)(void);
N_NIMCALL(TY101006, Transfpass_184005)(void);
N_NIMCALL(TY101006, Cgenpass_157201)(void);
N_NIMCALL(TY101006, Rodwritepass_107001)(void);
N_NIMCALL(void, Compileproject_187405)(NimStringDesc* Filename_187407);
N_NIMCALL(NimStringDesc*, nosJoinPath)(NimStringDesc* Head_33203, NimStringDesc* Tail_33204);
N_NIMCALL(void, Callccompiler_66806)(NimStringDesc* Projectfile_66808);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_33620, NimStringDesc* Ext_33621);
N_NIMCALL(void, Commandcompiletoecmascript_187601)(NimStringDesc* Filename_187603);
N_NIMCALL(void, Settarget_46582)(NU8 O_46584, NU8 C_46585);
N_NIMCALL(void, Initdefines_59049)(void);
N_NIMCALL(TY101006, Ecmasgenpass_174004)(void);
N_NIMCALL(void, Commandpretty_187643)(NimStringDesc* Filename_187645);
N_NIMCALL(void, Rendermodule_81035)(TY50526* N_81037, NimStringDesc* Filename_81038, NU8 Renderflags_81041);
N_NIMCALL(NimStringDesc*, Getoutfile_41145)(NimStringDesc* Filename_41147, NimStringDesc* Ext_41148);
N_NIMCALL(void, Loadspecialconfig_76007)(NimStringDesc* Configfilename_76009);
N_NIMCALL(void, Commanddoc_152001)(NimStringDesc* Filename_152003);
N_NIMCALL(void, Commandrst2html_152004)(NimStringDesc* Filename_152006);
N_NIMCALL(void, Commandrst2tex_152007)(NimStringDesc* Filename_152009);
N_NIMCALL(void, Commandgendepend_187410)(NimStringDesc* Filename_187412);
N_NIMCALL(TY101006, Gendependpass_183004)(void);
N_NIMCALL(TY101006, Cleanuppass_182161)(void);
N_NIMCALL(void, Generatedot_183006)(NimStringDesc* Project_183008);
N_NIMCALL(void, Execexternalprogram_66570)(NimStringDesc* Cmd_66572);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18616, NIM_CHAR C_18617);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18489);
N_NIMCALL(void, Listsymbols_59062)(void);
N_NIMCALL(void, Commandcheck_187413)(NimStringDesc* Filename_187415);
N_NIMCALL(void, Commandscan_187658)(NimStringDesc* Filename_187660);
N_NIMCALL(TY71204*, Llstreamopen_71224)(NimStringDesc* Filename_71226, NU8 Mode_71227);
N_NIMCALL(void, Openlexer_73298)(TY73267* Lex_73301, NimStringDesc* Filename_73302, TY71204* Inputstream_73303);
N_NIMCALL(void, Rawgettok_73304)(TY73267* L_73307, TY73263* Tok_73309);
N_NIMCALL(void, Printtok_73320)(TY73263* Tok_73322);
N_NIMCALL(void, Closelexer_73316)(TY73267* Lex_73319);
N_NIMCALL(void, Messageout_42775)(NimStringDesc* S_42777);
N_NIMCALL(void, Commandinteractive_187616)(void);
N_NIMCALL(TY101006, Evalpass_111046)(void);
N_NIMCALL(TY71204*, Llstreamopenstdin_71230)(void);
N_NIMCALL(void, Commandsuggest_187704)(NimStringDesc* Filename_187706);
STRING_LITERAL(TMP191869, "nim", 3);
STRING_LITERAL(TMP191922, "handleSymbolFile should have set the module\'s ID", 48);
STRING_LITERAL(TMP191924, "command line", 12);
STRING_LITERAL(TMP191925, "", 0);
STRING_LITERAL(TMP192865, "system", 6);
STRING_LITERAL(TMP192877, ".cpp", 4);
STRING_LITERAL(TMP192878, ".m", 2);
STRING_LITERAL(TMP193081, "pretty.nim", 10);
STRING_LITERAL(TMP193082, "nimdoc.cfg", 10);
STRING_LITERAL(TMP193485, "nimdoc.tex.cfg", 14);
STRING_LITERAL(TMP193493, "dot -Tpng -o", 12);
STRING_LITERAL(TMP193494, "png", 3);
STRING_LITERAL(TMP193495, "dot", 3);
STRING_LITERAL(TMP193497, "Beware: Indentation tokens depend on the parser\'s state!", 56);
STRING_LITERAL(TMP193498, "stdin", 5);
TY187208* Compmods_187227;
extern TNimType* NTI187208; /* TFileModuleMap */
extern TY10996 Gch_11014;
extern TY38019 Searchpaths_41081;
extern NimStringDesc* Libpath_41112;
extern NI Gid_50693;
extern TY101045 Gincludefile_101048;
extern TY101041 Gimportmodule_101044;
extern TNimType* NTI50524; /* PSym */
extern TNimType* NTI50548; /* TSym */
extern NU8 Gcmd_41084;
extern NimStringDesc* Cext_66342;
extern NU32 Gglobaloptions_41079;
extern NI Gerrormax_42568;
extern TNimType* NTI73267; /* TLexer */
extern TNimType* NTI73261; /* PToken */
extern TNimType* NTI73263; /* TToken */
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11414))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11014.Zct, C_12403);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3221(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3226(&(*C_13022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
static N_INLINE(void, Setid_50696)(NI Id_50698) {
Gid_50693 = ((Gid_50693 >= (NI32)(Id_50698 + 1)) ? Gid_50693 : (NI32)(Id_50698 + 1));
}
N_NIMCALL(TY50548*, Getmodule_187256)(NimStringDesc* Filename_187258) {
TY50548* Result_187259;
NI I_187283;
NI HEX3Atmp_187284;
NI Res_187286;
NIM_BOOL LOC3;
Result_187259 = 0;
I_187283 = 0;
HEX3Atmp_187284 = 0;
HEX3Atmp_187284 = (Compmods_187227->Sup.len-1);
Res_187286 = 0;
Res_187286 = 0;
while (1) {
if (!(Res_187286 <= HEX3Atmp_187284)) goto LA1;
I_187283 = Res_187286;
LOC3 = nossameFile(Compmods_187227->data[I_187283].Filename, Filename_187258);
if (!LOC3) goto LA4;
Result_187259 = Compmods_187227->data[I_187283].Module;
goto BeforeRet;
LA4: ;
Res_187286 += 1;
} LA1: ;
BeforeRet: ;
return Result_187259;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418) {
NIM_BOOL Result_11419;
Result_11419 = 0;
Result_11419 = !((((*(*C_11418).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11419;
}
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054) {
Incl_10880(&Gch_11014.Cycleroots, C_12054);
}
static N_INLINE(void, Incref_13002)(TY10602* C_13004) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3221(&(*C_13004).Refcount, 8);
LOC3 = Canbecycleroot_11416(C_13004);
if (!LOC3) goto LA4;
Rtladdcycleroot_12052(C_13004);
LA4: ;
}
static N_INLINE(void, Decref_12801)(TY10602* C_12803) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3226(&(*C_12803).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12401(C_12803);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11416(C_12803);
if (!LOC5) goto LA6;
Rtladdcycleroot_12052(C_12803);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015) {
TY10602* LOC4;
TY10602* LOC8;
if (!!((Src_13015 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11412(Src_13015);
Incref_13002(LOC4);
LA2: ;
if (!!(((*Dest_13014) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412((*Dest_13014));
Decref_12801(LOC8);
LA6: ;
(*Dest_13014) = Src_13015;
}
N_NIMCALL(void, Registermodule_187229)(NimStringDesc* Filename_187231, TY50548* Module_187232) {
NI Length_187243;
Length_187243 = 0;
Length_187243 = Compmods_187227->Sup.len;
Compmods_187227 = (TY187208*) setLengthSeq(&(Compmods_187227)->Sup, sizeof(TY187206), (NI32)(Length_187243 + 1));
asgnRefNoCycle((void**) &Compmods_187227->data[Length_187243].Filename, copyString(Filename_187231));
asgnRef((void**) &Compmods_187227->data[Length_187243].Module, Module_187232);
}
N_NIMCALL(TY50548*, Newmodule_187287)(NimStringDesc* Filename_187289) {
TY50548* Result_187290;
TY33461 LOC1;
NIM_BOOL LOC3;
Result_187290 = 0;
Result_187290 = (TY50548*) newObj(NTI50524, sizeof(TY50548));
objectInit(Result_187290, NTI50548);
(*Result_187290).Sup.Id = -1;
(*Result_187290).Kind = ((NU8) 6);
memset((void*)&LOC1, 0, sizeof(LOC1));
nossplitFile(Filename_187289, &LOC1);
asgnRefNoCycle((void**) &(*Result_187290).Name, Getident_49016(LOC1.Name));
LOC3 = Isnimrodidentifier_73357((*(*Result_187290).Name).S);
if (!!(LOC3)) goto LA4;
Rawmessage_43045(((NU8) 19), (*(*Result_187290).Name).S);
LA4: ;
asgnRef((void**) &(*Result_187290).Owner, Result_187290);
(*Result_187290).Info = Newlineinfo_42712(Filename_187289, 1, 1);
(*Result_187290).Flags |=(1<<((NI32)(((NU8) 0))%(sizeof(NI32)*8)));
Initstrtable_50747(&(*Result_187290).Tab);
Registermodule_187229(Filename_187289, Result_187290);
Strtableadd_55061(&(*Result_187290).Tab, Result_187290);
return Result_187290;
}
static N_INLINE(NI, Getid_50694)(void) {
NI Result_50943;
Result_50943 = 0;
Result_50943 = Gid_50693;
Gid_50693 += 1;
return Result_50943;
}
N_NIMCALL(TY50548*, Compilemodule_187320)(NimStringDesc* Filename_187322, NIM_BOOL Ismainfile_187323, NIM_BOOL Issystemfile_187324) {
TY50548* Result_187356;
TY89031* Rd_187357;
NimStringDesc* F_187358;
NIM_BOOL LOC8;
Result_187356 = 0;
Rd_187357 = 0;
Rd_187357 = NIM_NIL;
F_187358 = 0;
F_187358 = nosaddFileExt(Filename_187322, ((NimStringDesc*) &TMP191869));
Result_187356 = Newmodule_187287(Filename_187322);
if (!Ismainfile_187323) goto LA2;
(*Result_187356).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LA2: ;
if (!Issystemfile_187324) goto LA5;
(*Result_187356).Flags |=(1<<((NI32)(((NU8) 16))%(sizeof(NI32)*8)));
LA5: ;
LOC8 = (Gcmd_41084 == ((NU8) 1));
if (LOC8) goto LA9;
LOC8 = (Gcmd_41084 == ((NU8) 2));
LA9: ;
if (!LOC8) goto LA10;
Rd_187357 = Handlesymbolfile_89060(Result_187356, F_187358);
if (!((*Result_187356).Sup.Id < 0)) goto LA13;
Internalerror_43163(((NimStringDesc*) &TMP191922));
LA13: ;
goto LA7;
LA10: ;
(*Result_187356).Sup.Id = Getid_50694();
LA7: ;
Processmodule_101035(Result_187356, F_187358, NIM_NIL, Rd_187357);
return Result_187356;
}
N_NIMCALL(TY50548*, Importmodule_187325)(NimStringDesc* Filename_187327) {
TY50548* Result_187328;
Result_187328 = 0;
Result_187328 = Getmodule_187256(Filename_187327);
if (!(Result_187328 == NIM_NIL)) goto LA2;
Result_187328 = Compilemodule_187320(Filename_187327, NIM_FALSE, NIM_FALSE);
goto LA1;
LA2: ;
if (!(((*Result_187328).Flags &(1<<((((NU8) 16))&31)))!=0)) goto LA4;
Localerror_43144((*Result_187328).Info, ((NU8) 37), (*(*Result_187328).Name).S);
goto LA1;
LA4: ;
LA1: ;
return Result_187328;
}
N_NIMCALL(void, Wantfile_187707)(NimStringDesc* Filename_187709) {
TY42538 LOC4;
if (!((Filename_187709) && (Filename_187709)->Sup.len == 0)) goto LA2;
LOC4 = Newlineinfo_42712(((NimStringDesc*) &TMP191924), 1, 1);
Fatal_43134(LOC4, ((NU8) 182), ((NimStringDesc*) &TMP191925));
LA2: ;
}
N_NIMCALL(void, Semanticpasses_187408)(void) {
TY101006 LOC1;
TY101006 LOC2;
TY101006 LOC3;
LOC1 = Verbosepass_182033();
Registerpass_101028(&LOC1);
LOC2 = Sempass_122001();
Registerpass_101028(&LOC2);
LOC3 = Transfpass_184005();
Registerpass_101028(&LOC3);
}
N_NIMCALL(void, Compileproject_187405)(NimStringDesc* Filename_187407) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY50548* LOC3;
NimStringDesc* LOC4;
TY50548* LOC5;
LOC1 = 0;
LOC1 = nosaddFileExt(((NimStringDesc*) &TMP192865), ((NimStringDesc*) &TMP191869));
LOC2 = 0;
LOC2 = nosJoinPath(Libpath_41112, LOC1);
LOC3 = 0;
LOC3 = Compilemodule_187320(LOC2, NIM_FALSE, NIM_TRUE);
LOC4 = 0;
LOC4 = nosaddFileExt(Filename_187407, ((NimStringDesc*) &TMP191869));
LOC5 = 0;
LOC5 = Compilemodule_187320(LOC4, NIM_TRUE, NIM_FALSE);
}
N_NIMCALL(void, Commandcompiletoc_187416)(NimStringDesc* Filename_187418) {
TY101006 LOC1;
TY101006 LOC2;
NimStringDesc* LOC6;
Semanticpasses_187408();
LOC1 = Cgenpass_157201();
Registerpass_101028(&LOC1);
LOC2 = Rodwritepass_107001();
Registerpass_101028(&LOC2);
Compileproject_187405(Filename_187418);
if (!!((Gcmd_41084 == ((NU8) 18)))) goto LA4;
LOC6 = 0;
LOC6 = nosChangeFileExt(Filename_187418, ((NimStringDesc*) &TMP191925));
Callccompiler_66806(LOC6);
LA4: ;
}
N_NIMCALL(void, Commandcompiletoecmascript_187601)(NimStringDesc* Filename_187603) {
TY101006 LOC1;
Gglobaloptions_41079 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_46582(((NU8) 20), ((NU8) 12));
Initdefines_59049();
Semanticpasses_187408();
LOC1 = Ecmasgenpass_174004();
Registerpass_101028(&LOC1);
Compileproject_187405(Filename_187603);
}
N_NIMCALL(void, Commandpretty_187643)(NimStringDesc* Filename_187645) {
TY50526* Module_187646;
NimStringDesc* LOC1;
NimStringDesc* LOC5;
Module_187646 = 0;
LOC1 = 0;
LOC1 = nosaddFileExt(Filename_187645, ((NimStringDesc*) &TMP191869));
Module_187646 = Parsefile_88031(LOC1);
if (!!((Module_187646 == NIM_NIL))) goto LA3;
LOC5 = 0;
LOC5 = Getoutfile_41145(Filename_187645, ((NimStringDesc*) &TMP193081));
Rendermodule_81035(Module_187646, LOC5, 0);
LA3: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600) {
memcpy(((NCSTRING) (&(*Dest_18599).data[((*Dest_18599).Sup.len)-0])), ((NCSTRING) ((*Src_18600).data)), ((NI32) ((NI32)((NI32)((*Src_18600).Sup.len + 1) * 1))));
(*Dest_18599).Sup.len += (*Src_18600).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18616, NIM_CHAR C_18617) {
(*Dest_18616).data[((*Dest_18616).Sup.len)-0] = C_18617;
(*Dest_18616).data[((NI32)((*Dest_18616).Sup.len + 1))-0] = 0;
(*Dest_18616).Sup.len += 1;
}
N_NIMCALL(void, Commandgendepend_187410)(NimStringDesc* Filename_187412) {
TY101006 LOC1;
TY101006 LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
Semanticpasses_187408();
LOC1 = Gendependpass_183004();
Registerpass_101028(&LOC1);
LOC2 = Cleanuppass_182161();
Registerpass_101028(&LOC2);
Compileproject_187405(Filename_187412);
Generatedot_183006(Filename_187412);
LOC3 = 0;
LOC4 = 0;
LOC4 = nosChangeFileExt(Filename_187412, ((NimStringDesc*) &TMP193494));
LOC5 = 0;
LOC5 = nosChangeFileExt(Filename_187412, ((NimStringDesc*) &TMP193495));
LOC3 = rawNewString(LOC4->Sup.len + LOC5->Sup.len + 13);
appendString(LOC3, ((NimStringDesc*) &TMP193493));
appendString(LOC3, LOC4);
appendChar(LOC3, 32);
appendString(LOC3, LOC5);
Execexternalprogram_66570(LOC3);
}
N_NIMCALL(void, Commandcheck_187413)(NimStringDesc* Filename_187415) {
Gerrormax_42568 = 2147483647;
Semanticpasses_187408();
Compileproject_187405(Filename_187415);
}
N_NIMCALL(void, Commandscan_187658)(NimStringDesc* Filename_187660) {
NimStringDesc* F_187661;
TY71204* Stream_187662;
TY73267 L_187674;
TY73263* Tok_187675;
F_187661 = 0;
F_187661 = nosaddFileExt(Filename_187660, ((NimStringDesc*) &TMP191869));
Stream_187662 = 0;
Stream_187662 = Llstreamopen_71224(F_187661, ((NU8) 0));
if (!!((Stream_187662 == NIM_NIL))) goto LA2;
memset((void*)&L_187674, 0, sizeof(L_187674));
L_187674.Sup.Sup.m_type = NTI73267;
Tok_187675 = 0;
Tok_187675 = (TY73263*) newObj(NTI73261, sizeof(TY73263));
(*Tok_187675).m_type = NTI73263;
Openlexer_73298(&L_187674, F_187661, Stream_187662);
while (1) {
Rawgettok_73304(&L_187674, Tok_187675);
Printtok_73320(Tok_187675);
if (!((*Tok_187675).Toktype == ((NU8) 1))) goto LA6;
goto LA4;
LA6: ;
} LA4: ;
Closelexer_73316(&L_187674);
goto LA1;
LA2: ;
Rawmessage_43045(((NU8) 2), F_187661);
LA1: ;
}
N_NIMCALL(void, Commandinteractive_187616)(void) {
TY101006 LOC1;
TY101006 LOC2;
TY101006 LOC3;
TY101006 LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY50548* LOC7;
TY50548* M_187630;
TY71204* LOC8;
Gerrormax_42568 = 2147483647;
Gglobaloptions_41079 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_46582(((NU8) 21), ((NU8) 13));
Initdefines_59049();
LOC1 = Verbosepass_182033();
Registerpass_101028(&LOC1);
LOC2 = Sempass_122001();
Registerpass_101028(&LOC2);
LOC3 = Transfpass_184005();
Registerpass_101028(&LOC3);
LOC4 = Evalpass_111046();
Registerpass_101028(&LOC4);
LOC5 = 0;
LOC5 = nosaddFileExt(((NimStringDesc*) &TMP192865), ((NimStringDesc*) &TMP191869));
LOC6 = 0;
LOC6 = nosJoinPath(Libpath_41112, LOC5);
LOC7 = 0;
LOC7 = Compilemodule_187320(LOC6, NIM_FALSE, NIM_TRUE);
M_187630 = 0;
M_187630 = Newmodule_187287(((NimStringDesc*) &TMP193498));
(*M_187630).Sup.Id = Getid_50694();
(*M_187630).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LOC8 = 0;
LOC8 = Llstreamopenstdin_71230();
Processmodule_101035(M_187630, ((NimStringDesc*) &TMP193498), LOC8, NIM_NIL);
}
N_NIMCALL(void, Commandsuggest_187704)(NimStringDesc* Filename_187706) {
Gerrormax_42568 = 2147483647;
Semanticpasses_187408();
Compileproject_187405(Filename_187706);
}
N_NIMCALL(void, Maincommand_187201)(NimStringDesc* Cmd_187203, NimStringDesc* Filename_187204) {
TY33461 LOC4;
NU8 LOC5;
NimStringDesc* LOC6;
TY50526* LOC7;
Appendstr_38061(&Searchpaths_41081, Libpath_41112);
if (!!(((Filename_187204) && (Filename_187204)->Sup.len == 0))) goto LA2;
memset((void*)&LOC4, 0, sizeof(LOC4));
nossplitFile(Filename_187204, &LOC4);
Prependstr_38071(&Searchpaths_41081, LOC4.Dir);
LA2: ;
Setid_50696(100);
Gincludefile_101048 = Parsefile_88031;
Gimportmodule_101044 = Importmodule_187325;
LOC5 = Whichkeyword_68482(Cmd_187203);
switch (LOC5) {
case ((NU8) 107):
case ((NU8) 200):
case ((NU8) 176):
case ((NU8) 192):
Gcmd_41084 = ((NU8) 1);
Wantfile_187707(Filename_187204);
Commandcompiletoc_187416(Filename_187204);
break;
case ((NU8) 201):
asgnRefNoCycle((void**) &Cext_66342, copyString(((NimStringDesc*) &TMP192877)));
Gcmd_41084 = ((NU8) 2);
Wantfile_187707(Filename_187204);
Commandcompiletoc_187416(Filename_187204);
break;
case ((NU8) 204):
case ((NU8) 213):
asgnRefNoCycle((void**) &Cext_66342, copyString(((NimStringDesc*) &TMP192878)));
Gcmd_41084 = ((NU8) 3);
Wantfile_187707(Filename_187204);
Commandcompiletoc_187416(Filename_187204);
break;
case ((NU8) 179):
Gcmd_41084 = ((NU8) 18);
Wantfile_187707(Filename_187204);
Rawmessage_43045(((NU8) 176), Cmd_187203);
break;
case ((NU8) 202):
case ((NU8) 212):
Gcmd_41084 = ((NU8) 4);
Wantfile_187707(Filename_187204);
Commandcompiletoecmascript_187601(Filename_187204);
break;
case ((NU8) 203):
Gcmd_41084 = ((NU8) 5);
Wantfile_187707(Filename_187204);
Rawmessage_43045(((NU8) 176), Cmd_187203);
break;
case ((NU8) 205):
Gcmd_41084 = ((NU8) 7);
Wantfile_187707(Filename_187204);
Commandpretty_187643(Filename_187204);
break;
case ((NU8) 206):
Gcmd_41084 = ((NU8) 8);
Loadspecialconfig_76007(((NimStringDesc*) &TMP193082));
Wantfile_187707(Filename_187204);
Commanddoc_152001(Filename_187204);
break;
case ((NU8) 214):
Gcmd_41084 = ((NU8) 15);
Loadspecialconfig_76007(((NimStringDesc*) &TMP193082));
Wantfile_187707(Filename_187204);
Commandrst2html_152004(Filename_187204);
break;
case ((NU8) 215):
Gcmd_41084 = ((NU8) 16);
Loadspecialconfig_76007(((NimStringDesc*) &TMP193485));
Wantfile_187707(Filename_187204);
Commandrst2tex_152007(Filename_187204);
break;
case ((NU8) 207):
Gcmd_41084 = ((NU8) 9);
Wantfile_187707(Filename_187204);
Commandgendepend_187410(Filename_187204);
break;
case ((NU8) 208):
Gcmd_41084 = ((NU8) 10);
Listsymbols_59062();
break;
case ((NU8) 209):
Gcmd_41084 = ((NU8) 11);
Wantfile_187707(Filename_187204);
Commandcheck_187413(Filename_187204);
break;
case ((NU8) 210):
Gcmd_41084 = ((NU8) 12);
Wantfile_187707(Filename_187204);
LOC6 = 0;
LOC6 = nosaddFileExt(Filename_187204, ((NimStringDesc*) &TMP191869));
LOC7 = 0;
LOC7 = Parsefile_88031(LOC6);
break;
case ((NU8) 211):
Gcmd_41084 = ((NU8) 13);
Wantfile_187707(Filename_187204);
Commandscan_187658(Filename_187204);
Messageout_42775(((NimStringDesc*) &TMP193497));
break;
case ((NU8) 216):
Gcmd_41084 = ((NU8) 17);
Commandinteractive_187616();
break;
case ((NU8) 225):
Gcmd_41084 = ((NU8) 14);
Wantfile_187707(Filename_187204);
Commandsuggest_187704(Filename_187204);
break;
default:
Rawmessage_43045(((NU8) 176), Cmd_187203);
break;
}
}
N_NOINLINE(void, mainInit)(void) {
asgnRefNoCycle((void**) &Compmods_187227, (TY187208*) newSeq(NTI187208, 0));
}

