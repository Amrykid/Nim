/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY56215 TY56215;
typedef struct TY56213 TY56213;
typedef struct TY56211 TY56211;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY51548 TY51548;
typedef struct TY51530 TY51530;
typedef struct TY51528 TY51528;
typedef struct TY50011 TY50011;
typedef struct TY50005 TY50005;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY51552 TY51552;
typedef struct TY43538 TY43538;
typedef struct TY51526 TY51526;
typedef struct TY51540 TY51540;
typedef struct TY48008 TY48008;
typedef struct TY51544 TY51544;
typedef struct TY10602 TY10602;
typedef struct TY10614 TY10614;
typedef struct TY10996 TY10996;
typedef struct TY10618 TY10618;
typedef struct TY10610 TY10610;
typedef struct TY10994 TY10994;
typedef struct TY56071 TY56071;
typedef struct TY51564 TY51564;
typedef struct TY51562 TY51562;
typedef struct TY51560 TY51560;
typedef struct TY56099 TY56099;
typedef struct TY56101 TY56101;
typedef struct TY51520 TY51520;
typedef struct TY56084 TY56084;
typedef struct TY51570 TY51570;
typedef struct TY51568 TY51568;
typedef struct TY51566 TY51566;
typedef struct TY51550 TY51550;
typedef struct TY39013 TY39013;
struct TY56211 {
NI Key;
NI Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY56215 {
NI Counter;
TY56213* Data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY51530 {
TNimType* m_type;
NI Counter;
TY51528* Data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
typedef NIM_CHAR TY245[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY245 data;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY43538 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51540 {
NU8 K;
NU8 S;
NU8 Flags;
TY51552* T;
TY48008* R;
NI A;
};
struct TY51548 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51552* Typ;
TY50011* Name;
TY43538 Info;
TY51548* Owner;
NU32 Flags;
TY51530 Tab;
TY51526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51540 Loc;
TY51544* Annex;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY10994 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10996 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY10994 Stat;
};
struct TY56071 {
NI H;
};
struct TY51560 {
TY50005* Key;
TNimObject* Val;
};
struct TY51564 {
NI Counter;
TY51562* Data;
};
struct TY56099 {
NI Tos;
TY56101* Stack;
};
struct TY51526 {
TY51552* Typ;
NimStringDesc* Comment;
TY43538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51548* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51520* Sons;
} S6;
} KindU;
};
struct TY56084 {
NI H;
TY50011* Name;
};
struct TY51566 {
TY50005* Key;
TY51526* Val;
};
struct TY51570 {
NI Counter;
TY51568* Data;
};
struct TY51552 {
  TY50005 Sup;
NU8 Kind;
TY51550* Sons;
TY51526* N;
NU8 Flags;
NU8 Callconv;
TY51548* Owner;
TY51548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51540 Loc;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51544 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51526* Path;
};
typedef NI TY8614[16];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY56213 {
  TGenericSeq Sup;
  TY56211 data[SEQ_DECL_SIZE];
};
struct TY51528 {
  TGenericSeq Sup;
  TY51548* data[SEQ_DECL_SIZE];
};
struct TY51562 {
  TGenericSeq Sup;
  TY51560 data[SEQ_DECL_SIZE];
};
struct TY56101 {
  TGenericSeq Sup;
  TY51530 data[SEQ_DECL_SIZE];
};
struct TY51520 {
  TGenericSeq Sup;
  TY51526* data[SEQ_DECL_SIZE];
};
struct TY51568 {
  TGenericSeq Sup;
  TY51566 data[SEQ_DECL_SIZE];
};
struct TY51550 {
  TGenericSeq Sup;
  TY51552* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_14204, NI Len_14205);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13026, void* Src_13027);
N_NIMCALL(NI, Nexttry_56205)(NI H_56207, NI Maxhash_56208);
N_NIMCALL(NIM_BOOL, Mustrehash_56201)(NI Length_56203, NI Counter_56204);
N_NIMCALL(void, Strtableenlarge_58293)(TY51530* T_58296);
N_NIMCALL(void, Strtablerawinsert_58256)(TY51528** Data_58259, TY51548* N_58260);
N_NIMCALL(void, Internalerror_44208)(TY43538 Info_44210, NimStringDesc* Errmsg_44211);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18489);
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015);
static N_INLINE(void, Incref_13002)(TY10602* C_13004);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418);
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054);
N_NOINLINE(void, Incl_10880)(TY10614* S_10883, TY10602* Cell_10884);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(void, Decref_12801)(TY10602* C_12803);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(TY51548*, Nextiter_56078)(TY56071* Ti_56081, TY51530* Tab_56082);
N_NIMCALL(NI, Iitablerawget_59101)(TY56215 T_59103, NI Key_59104);
N_NIMCALL(void, Iitablerawinsert_59119)(TY56213** Data_59122, NI Key_59123, NI Val_59124);
N_NIMCALL(NI, Idtablerawget_58732)(TY51564 T_58734, NI Key_58735);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
N_NIMCALL(void, Idtablerawinsert_58784)(TY51562** Data_58787, TY50005* Key_58788, TNimObject* Val_58789);
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806);
N_NIMCALL(TY51548*, Strtableget_56066)(TY51530* T_56068, TY50011* Name_56069);
N_NIMCALL(TY51548*, Nextidentiter_56093)(TY56084* Ti_56096, TY51530* Tab_56097);
N_NIMCALL(NI, Idnodetablerawget_58917)(TY51570 T_58919, TY50005* Key_58920);
N_NIMCALL(void, Idnodetablerawinsert_58944)(TY51568** Data_58947, TY50005* Key_58948, TY51526* Val_58949);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
N_NIMCALL(void, Initstrtable_51747)(TY51530* X_51750);
N_NIMCALL(NU8, Symtabadduniqueat_56135)(TY56099* Tab_56138, TY51548* E_56139, NI At_56140);
N_NIMCALL(NIM_BOOL, Strtableincl_58381)(TY51530* T_58384, TY51548* N_58385);
N_NIMCALL(void, Strtableadd_56061)(TY51530* T_56064, TY51548* N_56065);
N_NIMCALL(TY51548*, Lookupinrecord_56194)(TY51526* N_56196, TY50011* Field_56197);
static N_INLINE(TY51526*, Lastson_51810)(TY51526* N_51812);
STRING_LITERAL(TMP193609, "StrTableRawInsert: ", 19);
STRING_LITERAL(TMP194055, "getSymFromList", 14);
STRING_LITERAL(TMP194733, "lookupInRecord", 14);
STRING_LITERAL(TMP194734, "lookupInRecord(record case branch)", 34);
STRING_LITERAL(TMP194735, "lookupInRecord()", 16);
extern TNimType* NTI56213; /* TIIPairSeq */
extern TNimType* NTI51528; /* TSymSeq */
extern TY10996 Gch_11014;
extern TNimType* NTI51562; /* TIdPairSeq */
extern TNimType* NTI56101; /* seq[TStrTable] */
extern TNimType* NTI51568; /* TIdNodePairSeq */
N_NIMCALL(void, Initiitable_56220)(TY56215* X_56223) {
NI I_59098;
NI Res_59100;
(*X_56223).Counter = 0;
unsureAsgnRef((void**) &(*X_56223).Data, (TY56213*) newSeq(NTI56213, 8));
I_59098 = 0;
Res_59100 = 0;
Res_59100 = 0;
while (1) {
if (!(Res_59100 <= 7)) goto LA1;
I_59098 = Res_59100;
(*X_56223).Data->data[I_59098].Key = (-2147483647 -1);
Res_59100 += 1;
} LA1: ;
}
N_NIMCALL(NI, Nexttry_56205)(NI H_56207, NI Maxhash_56208) {
NI Result_57824;
Result_57824 = 0;
Result_57824 = (NI32)((NI32)((NI32)(5 * H_56207) + 1) & Maxhash_56208);
return Result_57824;
}
N_NIMCALL(TY51548*, Strtableget_56066)(TY51530* T_56068, TY50011* Name_56069) {
TY51548* Result_58440;
NI H_58441;
Result_58440 = 0;
Result_58440 = NIM_NIL;
H_58441 = 0;
H_58441 = (NI32)((*Name_56069).H & ((*T_56068).Data->Sup.len-1));
while (1) {
Result_58440 = (*T_56068).Data->data[H_58441];
if (!(Result_58440 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*Result_58440).Name).Sup.Id == (*Name_56069).Sup.Id)) goto LA6;
goto LA1;
LA6: ;
H_58441 = Nexttry_56205(H_58441, ((*T_56068).Data->Sup.len-1));
} LA1: ;
return Result_58440;
}
N_NIMCALL(NIM_BOOL, Mustrehash_56201)(NI Length_56203, NI Counter_56204) {
NIM_BOOL Result_56521;
NIM_BOOL LOC1;
Result_56521 = 0;
LOC1 = ((NI32)(Length_56203 * 2) < (NI32)(Counter_56204 * 3));
if (LOC1) goto LA2;
LOC1 = ((NI32)(Length_56203 - Counter_56204) < 4);
LA2: ;
Result_56521 = LOC1;
return Result_56521;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18599, NimStringDesc* Src_18600) {
memcpy(((NCSTRING) (&(*Dest_18599).data[((*Dest_18599).Sup.len)-0])), ((NCSTRING) ((*Src_18600).data)), ((NI32) ((NI32)((NI32)((*Src_18600).Sup.len + 1) * 1))));
(*Dest_18599).Sup.len += (*Src_18600).Sup.len;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418) {
NIM_BOOL Result_11419;
Result_11419 = 0;
Result_11419 = !((((*(*C_11418).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11419;
}
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054) {
Incl_10880(&Gch_11014.Cycleroots, C_12054);
}
static N_INLINE(void, Incref_13002)(TY10602* C_13004) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3221(&(*C_13004).Refcount, 8);
LOC3 = Canbecycleroot_11416(C_13004);
if (!LOC3) goto LA4;
Rtladdcycleroot_12052(C_13004);
LA4: ;
}
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11414))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11014.Zct, C_12403);
}
static N_INLINE(void, Decref_12801)(TY10602* C_12803) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3226(&(*C_12803).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12401(C_12803);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11416(C_12803);
if (!LOC5) goto LA6;
Rtladdcycleroot_12052(C_12803);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015) {
TY10602* LOC4;
TY10602* LOC8;
if (!!((Src_13015 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11412(Src_13015);
Incref_13002(LOC4);
LA2: ;
if (!!(((*Dest_13014) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412((*Dest_13014));
Decref_12801(LOC8);
LA6: ;
(*Dest_13014) = Src_13015;
}
N_NIMCALL(void, Strtablerawinsert_58256)(TY51528** Data_58259, TY51548* N_58260) {
NI H_58261;
NimStringDesc* LOC5;
H_58261 = 0;
H_58261 = (NI32)((*(*N_58260).Name).H & ((*Data_58259)->Sup.len-1));
while (1) {
if (!!(((*Data_58259)->data[H_58261] == NIM_NIL))) goto LA1;
if (!((*Data_58259)->data[H_58261] == N_58260)) goto LA3;
LOC5 = 0;
LOC5 = rawNewString((*(*N_58260).Name).S->Sup.len + 19);
appendString(LOC5, ((NimStringDesc*) &TMP193609));
appendString(LOC5, (*(*N_58260).Name).S);
Internalerror_44208((*N_58260).Info, LOC5);
LA3: ;
H_58261 = Nexttry_56205(H_58261, ((*Data_58259)->Sup.len-1));
} LA1: ;
asgnRef((void**) &(*Data_58259)->data[H_58261], N_58260);
}
N_NIMCALL(void, Strtableenlarge_58293)(TY51530* T_58296) {
TY51528* N_58297;
NI I_58328;
NI HEX3Atmp_58350;
NI Res_58352;
TY51528* LOC5;
N_58297 = 0;
N_58297 = NIM_NIL;
N_58297 = (TY51528*) newSeq(NTI51528, (NI32)((*T_58296).Data->Sup.len * 2));
I_58328 = 0;
HEX3Atmp_58350 = 0;
HEX3Atmp_58350 = ((*T_58296).Data->Sup.len-1);
Res_58352 = 0;
Res_58352 = 0;
while (1) {
if (!(Res_58352 <= HEX3Atmp_58350)) goto LA1;
I_58328 = Res_58352;
if (!!(((*T_58296).Data->data[I_58328] == NIM_NIL))) goto LA3;
Strtablerawinsert_58256(&N_58297, (*T_58296).Data->data[I_58328]);
LA3: ;
Res_58352 += 1;
} LA1: ;
LOC5 = 0;
LOC5 = (*T_58296).Data;
unsureAsgnRef((void**) &(*T_58296).Data, N_58297);
N_58297 = LOC5;
}
N_NIMCALL(void, Strtableadd_56061)(TY51530* T_56064, TY51548* N_56065) {
NIM_BOOL LOC2;
LOC2 = Mustrehash_56201((*T_56064).Data->Sup.len, (*T_56064).Counter);
if (!LOC2) goto LA3;
Strtableenlarge_58293(T_56064);
LA3: ;
Strtablerawinsert_58256(&(*T_56064).Data, N_56065);
(*T_56064).Counter += 1;
}
N_NIMCALL(TY51548*, Nextiter_56078)(TY56071* Ti_56081, TY51530* Tab_56082) {
TY51548* Result_58500;
Result_58500 = 0;
Result_58500 = NIM_NIL;
Result_58500 = NIM_NIL;
while (1) {
if (!((*Ti_56081).H <= ((*Tab_56082).Data->Sup.len-1))) goto LA1;
Result_58500 = (*Tab_56082).Data->data[(*Ti_56081).H];
(*Ti_56081).H += 1;
if (!!((Result_58500 == NIM_NIL))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
return Result_58500;
}
N_NIMCALL(TY51548*, Inittabiter_56073)(TY56071* Ti_56076, TY51530* Tab_56077) {
TY51548* Result_58492;
Result_58492 = 0;
Result_58492 = NIM_NIL;
(*Ti_56076).H = 0;
if (!((*Tab_56077).Counter == 0)) goto LA2;
Result_58492 = NIM_NIL;
goto LA1;
LA2: ;
Result_58492 = Nextiter_56078(Ti_56076, Tab_56077);
LA1: ;
return Result_58492;
}
N_NIMCALL(NI, Iitablerawget_59101)(TY56215 T_59103, NI Key_59104) {
NI Result_59105;
NI H_59106;
Result_59105 = 0;
H_59106 = 0;
H_59106 = (NI32)(Key_59104 & (T_59103.Data->Sup.len-1));
while (1) {
if (!!((T_59103.Data->data[H_59106].Key == (-2147483647 -1)))) goto LA1;
if (!(T_59103.Data->data[H_59106].Key == Key_59104)) goto LA3;
Result_59105 = H_59106;
goto BeforeRet;
LA3: ;
H_59106 = Nexttry_56205(H_59106, (T_59103.Data->Sup.len-1));
} LA1: ;
Result_59105 = -1;
BeforeRet: ;
return Result_59105;
}
N_NIMCALL(void, Iitablerawinsert_59119)(TY56213** Data_59122, NI Key_59123, NI Val_59124) {
NI H_59125;
H_59125 = 0;
H_59125 = (NI32)(Key_59123 & ((*Data_59122)->Sup.len-1));
while (1) {
if (!!(((*Data_59122)->data[H_59125].Key == (-2147483647 -1)))) goto LA1;
H_59125 = Nexttry_56205(H_59125, ((*Data_59122)->Sup.len-1));
} LA1: ;
(*Data_59122)->data[H_59125].Key = Key_59123;
(*Data_59122)->data[H_59125].Val = Val_59124;
}
N_NIMCALL(void, Iitableput_56228)(TY56215* T_56231, NI Key_56232, NI Val_56233) {
NI Index_59138;
NIM_BOOL LOC5;
TY56213* N_59153;
NI I_59184;
NI HEX3Atmp_59219;
NI Res_59221;
NI I_59193;
NI HEX3Atmp_59222;
NI Res_59224;
TY56213* LOC13;
N_59153 = 0;
Index_59138 = 0;
Index_59138 = Iitablerawget_59101((*T_56231), Key_56232);
if (!(0 <= Index_59138)) goto LA2;
(*T_56231).Data->data[Index_59138].Val = Val_56233;
goto LA1;
LA2: ;
LOC5 = Mustrehash_56201((*T_56231).Data->Sup.len, (*T_56231).Counter);
if (!LOC5) goto LA6;
N_59153 = NIM_NIL;
N_59153 = (TY56213*) newSeq(NTI56213, (NI32)((*T_56231).Data->Sup.len * 2));
I_59184 = 0;
HEX3Atmp_59219 = 0;
HEX3Atmp_59219 = (N_59153->Sup.len-1);
Res_59221 = 0;
Res_59221 = 0;
while (1) {
if (!(Res_59221 <= HEX3Atmp_59219)) goto LA8;
I_59184 = Res_59221;
N_59153->data[I_59184].Key = (-2147483647 -1);
Res_59221 += 1;
} LA8: ;
I_59193 = 0;
HEX3Atmp_59222 = 0;
HEX3Atmp_59222 = ((*T_56231).Data->Sup.len-1);
Res_59224 = 0;
Res_59224 = 0;
while (1) {
if (!(Res_59224 <= HEX3Atmp_59222)) goto LA9;
I_59193 = Res_59224;
if (!!(((*T_56231).Data->data[I_59193].Key == (-2147483647 -1)))) goto LA11;
Iitablerawinsert_59119(&N_59153, (*T_56231).Data->data[I_59193].Key, (*T_56231).Data->data[I_59193].Val);
LA11: ;
Res_59224 += 1;
} LA9: ;
LOC13 = 0;
LOC13 = (*T_56231).Data;
unsureAsgnRef((void**) &(*T_56231).Data, N_59153);
N_59153 = LOC13;
LA6: ;
Iitablerawinsert_59119(&(*T_56231).Data, Key_56232, Val_56233);
(*T_56231).Counter += 1;
LA1: ;
}
N_NIMCALL(NI, Idtablerawget_58732)(TY51564 T_58734, NI Key_58735) {
NI Result_58736;
NI H_58737;
Result_58736 = 0;
H_58737 = 0;
H_58737 = (NI32)(Key_58735 & (T_58734.Data->Sup.len-1));
while (1) {
if (!!((T_58734.Data->data[H_58737].Key == NIM_NIL))) goto LA1;
if (!((*T_58734.Data->data[H_58737].Key).Id == Key_58735)) goto LA3;
Result_58736 = H_58737;
goto BeforeRet;
LA3: ;
H_58737 = Nexttry_56205(H_58737, (T_58734.Data->Sup.len-1));
} LA1: ;
Result_58736 = -1;
BeforeRet: ;
return Result_58736;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3221(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3226(&(*C_13022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(void, Idtablerawinsert_58784)(TY51562** Data_58787, TY50005* Key_58788, TNimObject* Val_58789) {
NI H_58790;
H_58790 = 0;
H_58790 = (NI32)((*Key_58788).Id & ((*Data_58787)->Sup.len-1));
while (1) {
if (!!(((*Data_58787)->data[H_58790].Key == NIM_NIL))) goto LA1;
H_58790 = Nexttry_56205(H_58790, ((*Data_58787)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_58787)->data[H_58790].Key, Key_58788);
asgnRefNoCycle((void**) &(*Data_58787)->data[H_58790].Val, Val_58789);
}
N_NIMCALL(void, Idtableput_56166)(TY51564* T_56169, TY50005* Key_56170, TNimObject* Val_56171) {
NI Index_58821;
TY51562* N_58822;
NIM_BOOL LOC5;
NI I_58876;
NI HEX3Atmp_58911;
NI Res_58913;
TY51562* LOC12;
N_58822 = 0;
Index_58821 = 0;
N_58822 = NIM_NIL;
Index_58821 = Idtablerawget_58732((*T_56169), (*Key_56170).Id);
if (!(0 <= Index_58821)) goto LA2;
asgnRefNoCycle((void**) &(*T_56169).Data->data[Index_58821].Val, Val_56171);
goto LA1;
LA2: ;
LOC5 = Mustrehash_56201((*T_56169).Data->Sup.len, (*T_56169).Counter);
if (!LOC5) goto LA6;
N_58822 = (TY51562*) newSeq(NTI51562, (NI32)((*T_56169).Data->Sup.len * 2));
I_58876 = 0;
HEX3Atmp_58911 = 0;
HEX3Atmp_58911 = ((*T_56169).Data->Sup.len-1);
Res_58913 = 0;
Res_58913 = 0;
while (1) {
if (!(Res_58913 <= HEX3Atmp_58911)) goto LA8;
I_58876 = Res_58913;
if (!!(((*T_56169).Data->data[I_58876].Key == NIM_NIL))) goto LA10;
Idtablerawinsert_58784(&N_58822, (*T_56169).Data->data[I_58876].Key, (*T_56169).Data->data[I_58876].Val);
LA10: ;
Res_58913 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_56169).Data;
unsureAsgnRef((void**) &(*T_56169).Data, N_58822);
N_58822 = LOC12;
LA6: ;
Idtablerawinsert_58784(&(*T_56169).Data, Key_56170, Val_56171);
(*T_56169).Counter += 1;
LA1: ;
}
N_NIMCALL(TNimObject*, Idtableget_56162)(TY51564 T_56164, NI Key_56165) {
TNimObject* Result_58780;
NI Index_58781;
Result_58780 = 0;
Result_58780 = NIM_NIL;
Index_58781 = 0;
Index_58781 = Idtablerawget_58732(T_56164, Key_56165);
if (!(0 <= Index_58781)) goto LA2;
Result_58780 = T_56164.Data->data[Index_58781].Val;
goto LA1;
LA2: ;
Result_58780 = NIM_NIL;
LA1: ;
return Result_58780;
}
N_NIMCALL(NI, Iitableget_56224)(TY56215 T_56226, NI Key_56227) {
NI Result_59115;
NI Index_59116;
Result_59115 = 0;
Index_59116 = 0;
Index_59116 = Iitablerawget_59101(T_56226, Key_56227);
if (!(0 <= Index_59116)) goto LA2;
Result_59115 = T_56226.Data->data[Index_59116].Val;
goto LA1;
LA2: ;
Result_59115 = (-2147483647 -1);
LA1: ;
return Result_59115;
}
N_NIMCALL(void, Initsymtab_56103)(TY56099* Tab_56106) {
(*Tab_56106).Tos = 0;
unsureAsgnRef((void**) &(*Tab_56106).Stack, (TY56101*) newSeq(NTI56101, 0));
}
N_NIMCALL(TNimObject*, Idtableget_56158)(TY51564 T_56160, TY50005* Key_56161) {
TNimObject* Result_58772;
NI Index_58773;
Result_58772 = 0;
Result_58772 = NIM_NIL;
Index_58773 = 0;
Index_58773 = Idtablerawget_58732(T_56160, (*Key_56161).Id);
if (!(0 <= Index_58773)) goto LA2;
Result_58772 = T_56160.Data->data[Index_58773].Val;
goto LA1;
LA2: ;
Result_58772 = NIM_NIL;
LA1: ;
return Result_58772;
}
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806) {
NI Result_52897;
Result_52897 = 0;
if (!(*N_51806).KindU.S6.Sons == 0) goto LA2;
Result_52897 = 0;
goto LA1;
LA2: ;
Result_52897 = (*N_51806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_52897;
}
N_NIMCALL(TY51548*, Getsymfromlist_56189)(TY51526* List_56191, TY50011* Ident_56192, NI Start_56193) {
TY51548* Result_56453;
NI I_56462;
NI HEX3Atmp_56510;
NI LOC1;
NI Res_56512;
Result_56453 = 0;
Result_56453 = NIM_NIL;
I_56462 = 0;
HEX3Atmp_56510 = 0;
LOC1 = Sonslen_51804(List_56191);
HEX3Atmp_56510 = (NI32)(LOC1 - 1);
Res_56512 = 0;
Res_56512 = Start_56193;
while (1) {
if (!(Res_56512 <= HEX3Atmp_56510)) goto LA2;
I_56462 = Res_56512;
if (!!(((*(*List_56191).KindU.S6.Sons->data[I_56462]).Kind == ((NU8) 3)))) goto LA4;
Internalerror_44208((*List_56191).Info, ((NimStringDesc*) &TMP194055));
LA4: ;
Result_56453 = (*(*List_56191).KindU.S6.Sons->data[I_56462]).KindU.S4.Sym;
if (!((*(*Result_56453).Name).Sup.Id == (*Ident_56192).Sup.Id)) goto LA7;
goto BeforeRet;
LA7: ;
Res_56512 += 1;
} LA2: ;
Result_56453 = NIM_NIL;
BeforeRet: ;
return Result_56453;
}
N_NIMCALL(TY51548*, Symtabget_56111)(TY56099 Tab_56113, TY50011* S_56114) {
TY51548* Result_58543;
NI I_58566;
NI HEX3Atmp_58578;
NI Res_58580;
Result_58543 = 0;
Result_58543 = NIM_NIL;
I_58566 = 0;
HEX3Atmp_58578 = 0;
HEX3Atmp_58578 = (NI32)(((NI) (Tab_56113.Tos)) - 1);
Res_58580 = 0;
Res_58580 = HEX3Atmp_58578;
while (1) {
if (!(0 <= Res_58580)) goto LA1;
I_58566 = Res_58580;
Result_58543 = Strtableget_56066(&Tab_56113.Stack->data[I_58566], S_56114);
if (!!((Result_58543 == NIM_NIL))) goto LA3;
goto BeforeRet;
LA3: ;
Res_58580 -= 1;
} LA1: ;
Result_58543 = NIM_NIL;
BeforeRet: ;
return Result_58543;
}
N_NIMCALL(TY51548*, Getmodule_56198)(TY51548* S_56200) {
TY51548* Result_56409;
NIM_BOOL LOC2;
Result_56409 = 0;
Result_56409 = NIM_NIL;
Result_56409 = S_56200;
while (1) {
LOC2 = !((Result_56409 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Result_56409).Kind == ((NU8) 6)));
LA3: ;
if (!LOC2) goto LA1;
Result_56409 = (*Result_56409).Owner;
} LA1: ;
return Result_56409;
}
N_NIMCALL(TY51548*, Nextidentiter_56093)(TY56084* Ti_56096, TY51530* Tab_56097) {
TY51548* Result_58469;
NI H_58470;
NI Start_58471;
Result_58469 = 0;
Result_58469 = NIM_NIL;
H_58470 = 0;
Start_58471 = 0;
H_58470 = (NI32)((*Ti_56096).H & ((*Tab_56097).Data->Sup.len-1));
Start_58471 = H_58470;
Result_58469 = (*Tab_56097).Data->data[H_58470];
while (1) {
if (!!((Result_58469 == NIM_NIL))) goto LA1;
if (!((*(*Result_58469).Name).Sup.Id == (*(*Ti_56096).Name).Sup.Id)) goto LA3;
goto LA1;
LA3: ;
H_58470 = Nexttry_56205(H_58470, ((*Tab_56097).Data->Sup.len-1));
if (!(H_58470 == Start_58471)) goto LA6;
Result_58469 = NIM_NIL;
goto LA1;
LA6: ;
Result_58469 = (*Tab_56097).Data->data[H_58470];
} LA1: ;
(*Ti_56096).H = Nexttry_56205(H_58470, ((*Tab_56097).Data->Sup.len-1));
return Result_58469;
}
N_NIMCALL(TY51548*, Initidentiter_56087)(TY56084* Ti_56090, TY51530* Tab_56091, TY50011* S_56092) {
TY51548* Result_58461;
Result_58461 = 0;
Result_58461 = NIM_NIL;
(*Ti_56090).H = (*S_56092).H;
unsureAsgnRef((void**) &(*Ti_56090).Name, S_56092);
if (!((*Tab_56091).Counter == 0)) goto LA2;
Result_58461 = NIM_NIL;
goto LA1;
LA2: ;
Result_58461 = Nextidentiter_56093(Ti_56090, Tab_56091);
LA1: ;
return Result_58461;
}
N_NIMCALL(NI, Idnodetablerawget_58917)(TY51570 T_58919, TY50005* Key_58920) {
NI Result_58921;
NI H_58922;
Result_58921 = 0;
H_58922 = 0;
H_58922 = (NI32)((*Key_58920).Id & (T_58919.Data->Sup.len-1));
while (1) {
if (!!((T_58919.Data->data[H_58922].Key == NIM_NIL))) goto LA1;
if (!((*T_58919.Data->data[H_58922].Key).Id == (*Key_58920).Id)) goto LA3;
Result_58921 = H_58922;
goto BeforeRet;
LA3: ;
H_58922 = Nexttry_56205(H_58922, (T_58919.Data->Sup.len-1));
} LA1: ;
Result_58921 = -1;
BeforeRet: ;
return Result_58921;
}
N_NIMCALL(TY51526*, Idnodetableget_56176)(TY51570 T_56178, TY50005* Key_56179) {
TY51526* Result_58940;
NI Index_58941;
Result_58940 = 0;
Result_58940 = NIM_NIL;
Index_58941 = 0;
Index_58941 = Idnodetablerawget_58917(T_56178, Key_56179);
if (!(0 <= Index_58941)) goto LA2;
Result_58940 = T_56178.Data->data[Index_58941].Val;
goto LA1;
LA2: ;
Result_58940 = NIM_NIL;
LA1: ;
return Result_58940;
}
N_NIMCALL(void, Idnodetablerawinsert_58944)(TY51568** Data_58947, TY50005* Key_58948, TY51526* Val_58949) {
NI H_58950;
H_58950 = 0;
H_58950 = (NI32)((*Key_58948).Id & ((*Data_58947)->Sup.len-1));
while (1) {
if (!!(((*Data_58947)->data[H_58950].Key == NIM_NIL))) goto LA1;
H_58950 = Nexttry_56205(H_58950, ((*Data_58947)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_58947)->data[H_58950].Key, Key_58948);
asgnRefNoCycle((void**) &(*Data_58947)->data[H_58950].Val, Val_58949);
}
N_NIMCALL(void, Idnodetableput_56180)(TY51570* T_56183, TY50005* Key_56184, TY51526* Val_56185) {
NI Index_58981;
NIM_BOOL LOC5;
TY51568* N_59005;
NI I_59036;
NI HEX3Atmp_59071;
NI Res_59073;
TY51568* LOC12;
N_59005 = 0;
Index_58981 = 0;
Index_58981 = Idnodetablerawget_58917((*T_56183), Key_56184);
if (!(0 <= Index_58981)) goto LA2;
asgnRefNoCycle((void**) &(*T_56183).Data->data[Index_58981].Val, Val_56185);
goto LA1;
LA2: ;
LOC5 = Mustrehash_56201((*T_56183).Data->Sup.len, (*T_56183).Counter);
if (!LOC5) goto LA6;
N_59005 = NIM_NIL;
N_59005 = (TY51568*) newSeq(NTI51568, (NI32)((*T_56183).Data->Sup.len * 2));
I_59036 = 0;
HEX3Atmp_59071 = 0;
HEX3Atmp_59071 = ((*T_56183).Data->Sup.len-1);
Res_59073 = 0;
Res_59073 = 0;
while (1) {
if (!(Res_59073 <= HEX3Atmp_59071)) goto LA8;
I_59036 = Res_59073;
if (!!(((*T_56183).Data->data[I_59036].Key == NIM_NIL))) goto LA10;
Idnodetablerawinsert_58944(&N_59005, (*T_56183).Data->data[I_59036].Key, (*T_56183).Data->data[I_59036].Val);
LA10: ;
Res_59073 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_56183).Data;
unsureAsgnRef((void**) &(*T_56183).Data, N_59005);
N_59005 = LOC12;
LA6: ;
Idnodetablerawinsert_58944(&(*T_56183).Data, Key_56184, Val_56185);
(*T_56183).Counter += 1;
LA1: ;
}
N_NIMCALL(void, Openscope_56141)(TY56099* Tab_56144) {
if (!((*Tab_56144).Stack->Sup.len <= ((NI) ((*Tab_56144).Tos)))) goto LA2;
(*Tab_56144).Stack = (TY56101*) setLengthSeq(&((*Tab_56144).Stack)->Sup, sizeof(TY51530), (NI32)(((NI) ((*Tab_56144).Tos)) + 1));
LA2: ;
Initstrtable_51747(&(*Tab_56144).Stack->data[(*Tab_56144).Tos]);
(*Tab_56144).Tos += 1;
}
N_NIMCALL(NIM_BOOL, Strtableincl_58381)(TY51530* T_58384, TY51548* N_58385) {
NIM_BOOL Result_58386;
NI H_58387;
TY51548* It_58388;
NIM_BOOL LOC9;
It_58388 = 0;
Result_58386 = 0;
H_58387 = 0;
It_58388 = NIM_NIL;
H_58387 = (NI32)((*(*N_58385).Name).H & ((*T_58384).Data->Sup.len-1));
while (1) {
It_58388 = (*T_58384).Data->data[H_58387];
if (!(It_58388 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*It_58388).Name).Sup.Id == (*(*N_58385).Name).Sup.Id)) goto LA6;
asgnRef((void**) &(*T_58384).Data->data[H_58387], N_58385);
Result_58386 = NIM_TRUE;
goto BeforeRet;
LA6: ;
H_58387 = Nexttry_56205(H_58387, ((*T_58384).Data->Sup.len-1));
} LA1: ;
LOC9 = Mustrehash_56201((*T_58384).Data->Sup.len, (*T_58384).Counter);
if (!LOC9) goto LA10;
Strtableenlarge_58293(T_58384);
Strtablerawinsert_58256(&(*T_58384).Data, N_58385);
goto LA8;
LA10: ;
asgnRef((void**) &(*T_58384).Data->data[H_58387], N_58385);
LA8: ;
(*T_58384).Counter += 1;
Result_58386 = NIM_FALSE;
BeforeRet: ;
return Result_58386;
}
N_NIMCALL(NU8, Symtabadduniqueat_56135)(TY56099* Tab_56138, TY51548* E_56139, NI At_56140) {
NU8 Result_58600;
NIM_BOOL LOC2;
Result_58600 = 0;
LOC2 = Strtableincl_58381(&(*Tab_56138).Stack->data[At_56140], E_56139);
if (!LOC2) goto LA3;
Result_58600 = ((NU8) 0);
goto LA1;
LA3: ;
Result_58600 = ((NU8) 1);
LA1: ;
return Result_58600;
}
N_NIMCALL(NU8, Symtabaddunique_56130)(TY56099* Tab_56133, TY51548* E_56134) {
NU8 Result_58607;
Result_58607 = 0;
Result_58607 = Symtabadduniqueat_56135(Tab_56133, E_56134, ((NI) ((NI32)(((NI) ((*Tab_56133).Tos)) - 1))));
return Result_58607;
}
N_NIMCALL(void, Rawclosescope_56145)(TY56099* Tab_56148) {
(*Tab_56148).Tos -= 1;
}
N_NIMCALL(void, Symtabaddat_56124)(TY56099* Tab_56127, TY51548* E_56128, NI At_56129) {
Strtableadd_56061(&(*Tab_56127).Stack->data[At_56129], E_56128);
}
N_NIMCALL(TY51548*, Symtablocalget_56115)(TY56099 Tab_56117, TY50011* S_56118) {
TY51548* Result_58538;
Result_58538 = 0;
Result_58538 = NIM_NIL;
Result_58538 = Strtableget_56066(&Tab_56117.Stack->data[(NI32)(((NI) (Tab_56117.Tos)) - 1)], S_56118);
return Result_58538;
}
N_NIMCALL(void, Symtabadd_56119)(TY56099* Tab_56122, TY51548* E_56123) {
Strtableadd_56061(&(*Tab_56122).Stack->data[(NI32)(((NI) ((*Tab_56122).Tos)) - 1)], E_56123);
}
N_NIMCALL(NIM_BOOL, Idtablehasobjectaskey_56172)(TY51564 T_56174, TY50005* Key_56175) {
NIM_BOOL Result_58755;
NI Index_58756;
Result_58755 = 0;
Index_58756 = 0;
Index_58756 = Idtablerawget_58732(T_56174, (*Key_56175).Id);
if (!(0 <= Index_58756)) goto LA2;
Result_58755 = (T_56174.Data->data[Index_58756].Key == Key_56175);
goto LA1;
LA2: ;
Result_58755 = NIM_FALSE;
LA1: ;
return Result_58755;
}
static N_INLINE(TY51526*, Lastson_51810)(TY51526* N_51812) {
TY51526* Result_53916;
NI LOC1;
Result_53916 = 0;
Result_53916 = NIM_NIL;
LOC1 = Sonslen_51804(N_51812);
Result_53916 = (*N_51812).KindU.S6.Sons->data[(NI32)(LOC1 - 1)];
return Result_53916;
}
N_NIMCALL(TY51548*, Lookupinrecord_56194)(TY51526* N_56196, TY50011* Field_56197) {
TY51548* Result_56238;
NI I_56262;
NI HEX3Atmp_56400;
NI LOC1;
NI Res_56402;
NI I_56338;
NI HEX3Atmp_56403;
NI LOC12;
NI Res_56405;
TY51526* LOC14;
Result_56238 = 0;
Result_56238 = NIM_NIL;
Result_56238 = NIM_NIL;
switch ((*N_56196).Kind) {
case ((NU8) 113):
I_56262 = 0;
HEX3Atmp_56400 = 0;
LOC1 = Sonslen_51804(N_56196);
HEX3Atmp_56400 = (NI32)(LOC1 - 1);
Res_56402 = 0;
Res_56402 = 0;
while (1) {
if (!(Res_56402 <= HEX3Atmp_56400)) goto LA2;
I_56262 = Res_56402;
Result_56238 = Lookupinrecord_56194((*N_56196).KindU.S6.Sons->data[I_56262], Field_56197);
if (!!((Result_56238 == NIM_NIL))) goto LA4;
goto BeforeRet;
LA4: ;
Res_56402 += 1;
} LA2: ;
break;
case ((NU8) 114):
if (!!(((*(*N_56196).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA7;
Internalerror_44208((*N_56196).Info, ((NimStringDesc*) &TMP194733));
LA7: ;
Result_56238 = Lookupinrecord_56194((*N_56196).KindU.S6.Sons->data[0], Field_56197);
if (!!((Result_56238 == NIM_NIL))) goto LA10;
goto BeforeRet;
LA10: ;
I_56338 = 0;
HEX3Atmp_56403 = 0;
LOC12 = Sonslen_51804(N_56196);
HEX3Atmp_56403 = (NI32)(LOC12 - 1);
Res_56405 = 0;
Res_56405 = 1;
while (1) {
if (!(Res_56405 <= HEX3Atmp_56403)) goto LA13;
I_56338 = Res_56405;
switch ((*(*N_56196).KindU.S6.Sons->data[I_56338]).Kind) {
case ((NU8) 75):
case ((NU8) 78):
LOC14 = 0;
LOC14 = Lastson_51810((*N_56196).KindU.S6.Sons->data[I_56338]);
Result_56238 = Lookupinrecord_56194(LOC14, Field_56197);
if (!!((Result_56238 == NIM_NIL))) goto LA16;
goto BeforeRet;
LA16: ;
break;
default:
Internalerror_44208((*N_56196).Info, ((NimStringDesc*) &TMP194734));
break;
}
Res_56405 += 1;
} LA13: ;
break;
case ((NU8) 3):
if (!((*(*(*N_56196).KindU.S4.Sym).Name).Sup.Id == (*Field_56197).Sup.Id)) goto LA19;
Result_56238 = (*N_56196).KindU.S4.Sym;
LA19: ;
break;
default:
Internalerror_44208((*N_56196).Info, ((NimStringDesc*) &TMP194735));
break;
}
BeforeRet: ;
return Result_56238;
}
N_NOINLINE(void, astalgoInit)(void) {
}

