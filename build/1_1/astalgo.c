/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY56220 TY56220;
typedef struct TY56218 TY56218;
typedef struct TY56216 TY56216;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY51548 TY51548;
typedef struct TY51530 TY51530;
typedef struct TY51528 TY51528;
typedef struct TY50011 TY50011;
typedef struct TY50005 TY50005;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY51552 TY51552;
typedef struct TY43539 TY43539;
typedef struct TY51526 TY51526;
typedef struct TY51540 TY51540;
typedef struct TY48008 TY48008;
typedef struct TY51544 TY51544;
typedef struct TY10802 TY10802;
typedef struct TY10814 TY10814;
typedef struct TY11196 TY11196;
typedef struct TY10818 TY10818;
typedef struct TY10810 TY10810;
typedef struct TY11194 TY11194;
typedef struct TY56076 TY56076;
typedef struct TY51564 TY51564;
typedef struct TY51562 TY51562;
typedef struct TY51560 TY51560;
typedef struct TY56104 TY56104;
typedef struct TY56106 TY56106;
typedef struct TY56089 TY56089;
typedef struct TY51570 TY51570;
typedef struct TY51568 TY51568;
typedef struct TY51566 TY51566;
typedef struct TY51520 TY51520;
typedef struct TY51550 TY51550;
typedef struct TY39013 TY39013;
struct TY56216 {
NI Key;
NI Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY56220 {
NI Counter;
TY56218* Data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY51530 {
TNimType* m_type;
NI Counter;
TY51528* Data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
struct TY43539 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51540 {
NU8 K;
NU8 S;
NU8 Flags;
TY51552* T;
TY48008* R;
NI A;
};
struct TY51548 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51552* Typ;
TY50011* Name;
TY43539 Info;
TY51548* Owner;
NU32 Flags;
TY51530 Tab;
TY51526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51540 Loc;
TY51544* Annex;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11194 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11196 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
TY11194 Stat;
};
struct TY56076 {
NI H;
};
struct TY51560 {
TY50005* Key;
TNimObject* Val;
};
struct TY51564 {
NI Counter;
TY51562* Data;
};
struct TY56104 {
NI Tos;
TY56106* Stack;
};
struct TY56089 {
NI H;
TY50011* Name;
};
struct TY51566 {
TY50005* Key;
TY51526* Val;
};
struct TY51570 {
NI Counter;
TY51568* Data;
};
struct TY51526 {
TY51552* Typ;
NimStringDesc* Comment;
TY43539 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51548* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51520* Sons;
} S6;
} KindU;
};
struct TY51552 {
  TY50005 Sup;
NU8 Kind;
TY51550* Sons;
TY51526* N;
NU8 Flags;
NU8 Callconv;
TY51548* Owner;
TY51548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51540 Loc;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51544 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51526* Path;
};
typedef NI TY8814[16];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY56218 {
  TGenericSeq Sup;
  TY56216 data[SEQ_DECL_SIZE];
};
struct TY51528 {
  TGenericSeq Sup;
  TY51548* data[SEQ_DECL_SIZE];
};
struct TY51562 {
  TGenericSeq Sup;
  TY51560 data[SEQ_DECL_SIZE];
};
struct TY56106 {
  TGenericSeq Sup;
  TY51530 data[SEQ_DECL_SIZE];
};
struct TY51568 {
  TGenericSeq Sup;
  TY51566 data[SEQ_DECL_SIZE];
};
struct TY51520 {
  TGenericSeq Sup;
  TY51526* data[SEQ_DECL_SIZE];
};
struct TY51550 {
  TGenericSeq Sup;
  TY51552* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_14404, NI Len_14405);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(NI, Nexttry_56210)(NI H_56212, NI Maxhash_56213);
N_NIMCALL(NIM_BOOL, Mustrehash_56206)(NI Length_56208, NI Counter_56209);
N_NIMCALL(void, Strtableenlarge_58298)(TY51530* T_58301);
N_NIMCALL(void, Strtablerawinsert_58261)(TY51528** Data_58264, TY51548* N_58265);
N_NIMCALL(void, Internalerror_43574)(TY43539 Info_43576, NimStringDesc* Errmsg_43577);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18689);
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215);
static N_INLINE(void, Incref_13202)(TY10802* C_13204);
static N_INLINE(NI, Atomicinc_3401)(NI* Memloc_3404, NI X_3405);
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618);
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254);
N_NOINLINE(void, Incl_11080)(TY10814* S_11083, TY10802* Cell_11084);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(void, Decref_13001)(TY10802* C_13003);
static N_INLINE(NI, Atomicdec_3406)(NI* Memloc_3409, NI X_3410);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(TY51548*, Nextiter_56083)(TY56076* Ti_56086, TY51530* Tab_56087);
N_NIMCALL(NI, Iitablerawget_59077)(TY56220 T_59079, NI Key_59080);
N_NIMCALL(void, Iitablerawinsert_59095)(TY56218** Data_59098, NI Key_59099, NI Val_59100);
N_NIMCALL(NI, Idtablerawget_58708)(TY51564 T_58710, NI Key_58711);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
N_NIMCALL(void, Idtablerawinsert_58760)(TY51562** Data_58763, TY50005* Key_58764, TNimObject* Val_58765);
N_NIMCALL(TY51548*, Strtableget_56066)(TY51530* T_56068, TY50011* Name_56069);
N_NIMCALL(TY51548*, Nextidentiter_56098)(TY56089* Ti_56101, TY51530* Tab_56102);
N_NIMCALL(NI, Idnodetablerawget_58893)(TY51570 T_58895, TY50005* Key_58896);
N_NIMCALL(void, Idnodetablerawinsert_58920)(TY51568** Data_58923, TY50005* Key_58924, TY51526* Val_58925);
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
N_NIMCALL(void, Initstrtable_51747)(TY51530* X_51750);
N_NIMCALL(NU8, Symtabadduniqueat_56140)(TY56104* Tab_56143, TY51548* E_56144, NI At_56145);
N_NIMCALL(void, Strtableadd_56061)(TY51530* T_56064, TY51548* N_56065);
N_NIMCALL(TY51548*, Lookupinrecord_56199)(TY51526* N_56201, TY50011* Field_56202);
static N_INLINE(TY51526*, Lastson_51810)(TY51526* N_51812);
STRING_LITERAL(TMP192609, "StrTableRawInsert: ", 19);
STRING_LITERAL(TMP193063, "getSymFromList", 14);
STRING_LITERAL(TMP193682, "lookupInRecord", 14);
STRING_LITERAL(TMP193683, "lookupInRecord(record case branch)", 34);
STRING_LITERAL(TMP193684, "lookupInRecord()", 16);
extern TNimType* NTI56218; /* TIIPairSeq */
extern TNimType* NTI51528; /* TSymSeq */
extern TY11196 Gch_11214;
extern TNimType* NTI51562; /* TIdPairSeq */
extern TNimType* NTI56106; /* seq[TStrTable] */
extern TNimType* NTI51568; /* TIdNodePairSeq */
N_NIMCALL(void, Initiitable_56225)(TY56220* X_56228) {
NI I_59074;
NI Res_59076;
(*X_56228).Counter = 0;
unsureAsgnRef((void**) &(*X_56228).Data, (TY56218*) newSeq(NTI56218, 8));
I_59074 = 0;
Res_59076 = 0;
Res_59076 = 0;
while (1) {
if (!(Res_59076 <= 7)) goto LA1;
I_59074 = Res_59076;
(*X_56228).Data->data[I_59074].Key = (-2147483647 -1);
Res_59076 += 1;
} LA1: ;
}
N_NIMCALL(NI, Nexttry_56210)(NI H_56212, NI Maxhash_56213) {
NI Result_57829;
Result_57829 = 0;
Result_57829 = (NI32)((NI32)((NI32)(5 * H_56212) + 1) & Maxhash_56213);
return Result_57829;
}
N_NIMCALL(TY51548*, Strtableget_56066)(TY51530* T_56068, TY50011* Name_56069) {
TY51548* Result_58445;
NI H_58446;
Result_58445 = 0;
H_58446 = 0;
H_58446 = (NI32)((*Name_56069).H & ((*T_56068).Data->Sup.len-1));
while (1) {
Result_58445 = (*T_56068).Data->data[H_58446];
if (!(Result_58445 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*Result_58445).Name).Sup.Id == (*Name_56069).Sup.Id)) goto LA6;
goto LA1;
LA6: ;
H_58446 = Nexttry_56210(H_58446, ((*T_56068).Data->Sup.len-1));
} LA1: ;
return Result_58445;
}
N_NIMCALL(NIM_BOOL, Mustrehash_56206)(NI Length_56208, NI Counter_56209) {
NIM_BOOL Result_56526;
NIM_BOOL LOC1;
Result_56526 = 0;
LOC1 = ((NI32)(Length_56208 * 2) < (NI32)(Counter_56209 * 3));
if (LOC1) goto LA2;
LOC1 = ((NI32)(Length_56208 - Counter_56209) < 4);
LA2: ;
Result_56526 = LOC1;
return Result_56526;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800) {
memcpy(((NCSTRING) (&(*Dest_18799).data[((*Dest_18799).Sup.len)-0])), ((NCSTRING) ((*Src_18800).data)), ((NI32) ((NI32)((NI32)((*Src_18800).Sup.len + 1) * 1))));
(*Dest_18799).Sup.len += (*Src_18800).Sup.len;
}
static N_INLINE(NI, Atomicinc_3401)(NI* Memloc_3404, NI X_3405) {
NI Result_8007;
Result_8007 = 0;
(*Memloc_3404) += X_3405;
Result_8007 = (*Memloc_3404);
return Result_8007;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618) {
NIM_BOOL Result_11619;
Result_11619 = 0;
Result_11619 = !((((*(*C_11618).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11619;
}
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254) {
Incl_11080(&Gch_11214.Cycleroots, C_12254);
}
static N_INLINE(void, Incref_13202)(TY10802* C_13204) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3401(&(*C_13204).Refcount, 8);
LOC3 = Canbecycleroot_11616(C_13204);
if (!LOC3) goto LA4;
Rtladdcycleroot_12252(C_13204);
LA4: ;
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI32)((NU32)(((NI) (Usr_11614))) - (NU32)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicdec_3406)(NI* Memloc_3409, NI X_3410) {
NI Result_8206;
Result_8206 = 0;
(*Memloc_3409) -= X_3410;
Result_8206 = (*Memloc_3409);
return Result_8206;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11214.Zct, C_12603);
}
static N_INLINE(void, Decref_13001)(TY10802* C_13003) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3406(&(*C_13003).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12601(C_13003);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11616(C_13003);
if (!LOC5) goto LA6;
Rtladdcycleroot_12252(C_13003);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215) {
TY10802* LOC4;
TY10802* LOC8;
if (!!((Src_13215 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11612(Src_13215);
Incref_13202(LOC4);
LA2: ;
if (!!(((*Dest_13214) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11612((*Dest_13214));
Decref_13001(LOC8);
LA6: ;
(*Dest_13214) = Src_13215;
}
N_NIMCALL(void, Strtablerawinsert_58261)(TY51528** Data_58264, TY51548* N_58265) {
NI H_58266;
NimStringDesc* LOC5;
H_58266 = 0;
H_58266 = (NI32)((*(*N_58265).Name).H & ((*Data_58264)->Sup.len-1));
while (1) {
if (!!(((*Data_58264)->data[H_58266] == NIM_NIL))) goto LA1;
if (!((*Data_58264)->data[H_58266] == N_58265)) goto LA3;
LOC5 = 0;
LOC5 = rawNewString((*(*N_58265).Name).S->Sup.len + 19);
appendString(LOC5, ((NimStringDesc*) &TMP192609));
appendString(LOC5, (*(*N_58265).Name).S);
Internalerror_43574((*N_58265).Info, LOC5);
LA3: ;
H_58266 = Nexttry_56210(H_58266, ((*Data_58264)->Sup.len-1));
} LA1: ;
asgnRef((void**) &(*Data_58264)->data[H_58266], N_58265);
}
N_NIMCALL(void, Strtableenlarge_58298)(TY51530* T_58301) {
TY51528* N_58302;
NI I_58333;
NI HEX3Atmp_58355;
NI Res_58357;
TY51528* LOC5;
N_58302 = 0;
N_58302 = (TY51528*) newSeq(NTI51528, (NI32)((*T_58301).Data->Sup.len * 2));
I_58333 = 0;
HEX3Atmp_58355 = 0;
HEX3Atmp_58355 = ((*T_58301).Data->Sup.len-1);
Res_58357 = 0;
Res_58357 = 0;
while (1) {
if (!(Res_58357 <= HEX3Atmp_58355)) goto LA1;
I_58333 = Res_58357;
if (!!(((*T_58301).Data->data[I_58333] == NIM_NIL))) goto LA3;
Strtablerawinsert_58261(&N_58302, (*T_58301).Data->data[I_58333]);
LA3: ;
Res_58357 += 1;
} LA1: ;
LOC5 = 0;
LOC5 = (*T_58301).Data;
unsureAsgnRef((void**) &(*T_58301).Data, N_58302);
N_58302 = LOC5;
}
N_NIMCALL(void, Strtableadd_56061)(TY51530* T_56064, TY51548* N_56065) {
NIM_BOOL LOC2;
LOC2 = Mustrehash_56206((*T_56064).Data->Sup.len, (*T_56064).Counter);
if (!LOC2) goto LA3;
Strtableenlarge_58298(T_56064);
LA3: ;
Strtablerawinsert_58261(&(*T_56064).Data, N_56065);
(*T_56064).Counter += 1;
}
N_NIMCALL(TY51548*, Nextiter_56083)(TY56076* Ti_56086, TY51530* Tab_56087) {
TY51548* Result_58505;
Result_58505 = 0;
Result_58505 = NIM_NIL;
while (1) {
if (!((*Ti_56086).H <= ((*Tab_56087).Data->Sup.len-1))) goto LA1;
Result_58505 = (*Tab_56087).Data->data[(*Ti_56086).H];
(*Ti_56086).H += 1;
if (!!((Result_58505 == NIM_NIL))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
return Result_58505;
}
N_NIMCALL(TY51548*, Inittabiter_56078)(TY56076* Ti_56081, TY51530* Tab_56082) {
TY51548* Result_58497;
Result_58497 = 0;
(*Ti_56081).H = 0;
if (!((*Tab_56082).Counter == 0)) goto LA2;
Result_58497 = NIM_NIL;
goto LA1;
LA2: ;
Result_58497 = Nextiter_56083(Ti_56081, Tab_56082);
LA1: ;
return Result_58497;
}
N_NIMCALL(NI, Iitablerawget_59077)(TY56220 T_59079, NI Key_59080) {
NI Result_59081;
NI H_59082;
Result_59081 = 0;
H_59082 = 0;
H_59082 = (NI32)(Key_59080 & (T_59079.Data->Sup.len-1));
while (1) {
if (!!((T_59079.Data->data[H_59082].Key == (-2147483647 -1)))) goto LA1;
if (!(T_59079.Data->data[H_59082].Key == Key_59080)) goto LA3;
Result_59081 = H_59082;
goto BeforeRet;
LA3: ;
H_59082 = Nexttry_56210(H_59082, (T_59079.Data->Sup.len-1));
} LA1: ;
Result_59081 = -1;
BeforeRet: ;
return Result_59081;
}
N_NIMCALL(void, Iitablerawinsert_59095)(TY56218** Data_59098, NI Key_59099, NI Val_59100) {
NI H_59101;
H_59101 = 0;
H_59101 = (NI32)(Key_59099 & ((*Data_59098)->Sup.len-1));
while (1) {
if (!!(((*Data_59098)->data[H_59101].Key == (-2147483647 -1)))) goto LA1;
H_59101 = Nexttry_56210(H_59101, ((*Data_59098)->Sup.len-1));
} LA1: ;
(*Data_59098)->data[H_59101].Key = Key_59099;
(*Data_59098)->data[H_59101].Val = Val_59100;
}
N_NIMCALL(void, Iitableput_56233)(TY56220* T_56236, NI Key_56237, NI Val_56238) {
NI Index_59114;
NIM_BOOL LOC5;
TY56218* N_59129;
NI I_59160;
NI HEX3Atmp_59195;
NI Res_59197;
NI I_59169;
NI HEX3Atmp_59198;
NI Res_59200;
TY56218* LOC13;
Index_59114 = 0;
Index_59114 = Iitablerawget_59077((*T_56236), Key_56237);
if (!(0 <= Index_59114)) goto LA2;
(*T_56236).Data->data[Index_59114].Val = Val_56238;
goto LA1;
LA2: ;
LOC5 = Mustrehash_56206((*T_56236).Data->Sup.len, (*T_56236).Counter);
if (!LOC5) goto LA6;
N_59129 = 0;
N_59129 = (TY56218*) newSeq(NTI56218, (NI32)((*T_56236).Data->Sup.len * 2));
I_59160 = 0;
HEX3Atmp_59195 = 0;
HEX3Atmp_59195 = (N_59129->Sup.len-1);
Res_59197 = 0;
Res_59197 = 0;
while (1) {
if (!(Res_59197 <= HEX3Atmp_59195)) goto LA8;
I_59160 = Res_59197;
N_59129->data[I_59160].Key = (-2147483647 -1);
Res_59197 += 1;
} LA8: ;
I_59169 = 0;
HEX3Atmp_59198 = 0;
HEX3Atmp_59198 = ((*T_56236).Data->Sup.len-1);
Res_59200 = 0;
Res_59200 = 0;
while (1) {
if (!(Res_59200 <= HEX3Atmp_59198)) goto LA9;
I_59169 = Res_59200;
if (!!(((*T_56236).Data->data[I_59169].Key == (-2147483647 -1)))) goto LA11;
Iitablerawinsert_59095(&N_59129, (*T_56236).Data->data[I_59169].Key, (*T_56236).Data->data[I_59169].Val);
LA11: ;
Res_59200 += 1;
} LA9: ;
LOC13 = 0;
LOC13 = (*T_56236).Data;
unsureAsgnRef((void**) &(*T_56236).Data, N_59129);
N_59129 = LOC13;
LA6: ;
Iitablerawinsert_59095(&(*T_56236).Data, Key_56237, Val_56238);
(*T_56236).Counter += 1;
LA1: ;
}
N_NIMCALL(NI, Idtablerawget_58708)(TY51564 T_58710, NI Key_58711) {
NI Result_58712;
NI H_58713;
Result_58712 = 0;
H_58713 = 0;
H_58713 = (NI32)(Key_58711 & (T_58710.Data->Sup.len-1));
while (1) {
if (!!((T_58710.Data->data[H_58713].Key == NIM_NIL))) goto LA1;
if (!((*T_58710.Data->data[H_58713].Key).Id == Key_58711)) goto LA3;
Result_58712 = H_58713;
goto BeforeRet;
LA3: ;
H_58713 = Nexttry_56210(H_58713, (T_58710.Data->Sup.len-1));
} LA1: ;
Result_58712 = -1;
BeforeRet: ;
return Result_58712;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3401(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3406(&(*C_13222).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(void, Idtablerawinsert_58760)(TY51562** Data_58763, TY50005* Key_58764, TNimObject* Val_58765) {
NI H_58766;
H_58766 = 0;
H_58766 = (NI32)((*Key_58764).Id & ((*Data_58763)->Sup.len-1));
while (1) {
if (!!(((*Data_58763)->data[H_58766].Key == NIM_NIL))) goto LA1;
H_58766 = Nexttry_56210(H_58766, ((*Data_58763)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_58763)->data[H_58766].Key, Key_58764);
asgnRefNoCycle((void**) &(*Data_58763)->data[H_58766].Val, Val_58765);
}
N_NIMCALL(void, Idtableput_56171)(TY51564* T_56174, TY50005* Key_56175, TNimObject* Val_56176) {
NI Index_58797;
TY51562* N_58798;
NIM_BOOL LOC5;
NI I_58852;
NI HEX3Atmp_58887;
NI Res_58889;
TY51562* LOC12;
Index_58797 = 0;
N_58798 = 0;
Index_58797 = Idtablerawget_58708((*T_56174), (*Key_56175).Id);
if (!(0 <= Index_58797)) goto LA2;
asgnRefNoCycle((void**) &(*T_56174).Data->data[Index_58797].Val, Val_56176);
goto LA1;
LA2: ;
LOC5 = Mustrehash_56206((*T_56174).Data->Sup.len, (*T_56174).Counter);
if (!LOC5) goto LA6;
N_58798 = (TY51562*) newSeq(NTI51562, (NI32)((*T_56174).Data->Sup.len * 2));
I_58852 = 0;
HEX3Atmp_58887 = 0;
HEX3Atmp_58887 = ((*T_56174).Data->Sup.len-1);
Res_58889 = 0;
Res_58889 = 0;
while (1) {
if (!(Res_58889 <= HEX3Atmp_58887)) goto LA8;
I_58852 = Res_58889;
if (!!(((*T_56174).Data->data[I_58852].Key == NIM_NIL))) goto LA10;
Idtablerawinsert_58760(&N_58798, (*T_56174).Data->data[I_58852].Key, (*T_56174).Data->data[I_58852].Val);
LA10: ;
Res_58889 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_56174).Data;
unsureAsgnRef((void**) &(*T_56174).Data, N_58798);
N_58798 = LOC12;
LA6: ;
Idtablerawinsert_58760(&(*T_56174).Data, Key_56175, Val_56176);
(*T_56174).Counter += 1;
LA1: ;
}
N_NIMCALL(TNimObject*, Idtableget_56167)(TY51564 T_56169, NI Key_56170) {
TNimObject* Result_58756;
NI Index_58757;
Result_58756 = 0;
Index_58757 = 0;
Index_58757 = Idtablerawget_58708(T_56169, Key_56170);
if (!(0 <= Index_58757)) goto LA2;
Result_58756 = T_56169.Data->data[Index_58757].Val;
goto LA1;
LA2: ;
Result_58756 = NIM_NIL;
LA1: ;
return Result_58756;
}
N_NIMCALL(NI, Iitableget_56229)(TY56220 T_56231, NI Key_56232) {
NI Result_59091;
NI Index_59092;
Result_59091 = 0;
Index_59092 = 0;
Index_59092 = Iitablerawget_59077(T_56231, Key_56232);
if (!(0 <= Index_59092)) goto LA2;
Result_59091 = T_56231.Data->data[Index_59092].Val;
goto LA1;
LA2: ;
Result_59091 = (-2147483647 -1);
LA1: ;
return Result_59091;
}
N_NIMCALL(void, Initsymtab_56108)(TY56104* Tab_56111) {
(*Tab_56111).Tos = 0;
unsureAsgnRef((void**) &(*Tab_56111).Stack, (TY56106*) newSeq(NTI56106, 0));
}
N_NIMCALL(TY51548*, Symtabget_56116)(TY56104 Tab_56118, TY50011* S_56119) {
TY51548* Result_58548;
NI I_58571;
NI HEX3Atmp_58583;
NI Res_58585;
Result_58548 = 0;
I_58571 = 0;
HEX3Atmp_58583 = 0;
HEX3Atmp_58583 = (NI32)(((NI) (Tab_56118.Tos)) - 1);
Res_58585 = 0;
Res_58585 = HEX3Atmp_58583;
while (1) {
if (!(0 <= Res_58585)) goto LA1;
I_58571 = Res_58585;
Result_58548 = Strtableget_56066(&Tab_56118.Stack->data[I_58571], S_56119);
if (!!((Result_58548 == NIM_NIL))) goto LA3;
goto BeforeRet;
LA3: ;
Res_58585 -= 1;
} LA1: ;
Result_58548 = NIM_NIL;
BeforeRet: ;
return Result_58548;
}
N_NIMCALL(TY51548*, Getmodule_56203)(TY51548* S_56205) {
TY51548* Result_56414;
NIM_BOOL LOC2;
Result_56414 = 0;
Result_56414 = S_56205;
while (1) {
LOC2 = !((Result_56414 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Result_56414).Kind == ((NU8) 6)));
LA3: ;
if (!LOC2) goto LA1;
Result_56414 = (*Result_56414).Owner;
} LA1: ;
return Result_56414;
}
N_NIMCALL(TY51548*, Nextidentiter_56098)(TY56089* Ti_56101, TY51530* Tab_56102) {
TY51548* Result_58474;
NI H_58475;
NI Start_58476;
Result_58474 = 0;
H_58475 = 0;
Start_58476 = 0;
H_58475 = (NI32)((*Ti_56101).H & ((*Tab_56102).Data->Sup.len-1));
Start_58476 = H_58475;
Result_58474 = (*Tab_56102).Data->data[H_58475];
while (1) {
if (!!((Result_58474 == NIM_NIL))) goto LA1;
if (!((*(*Result_58474).Name).Sup.Id == (*(*Ti_56101).Name).Sup.Id)) goto LA3;
goto LA1;
LA3: ;
H_58475 = Nexttry_56210(H_58475, ((*Tab_56102).Data->Sup.len-1));
if (!(H_58475 == Start_58476)) goto LA6;
Result_58474 = NIM_NIL;
goto LA1;
LA6: ;
Result_58474 = (*Tab_56102).Data->data[H_58475];
} LA1: ;
(*Ti_56101).H = Nexttry_56210(H_58475, ((*Tab_56102).Data->Sup.len-1));
return Result_58474;
}
N_NIMCALL(TY51548*, Initidentiter_56092)(TY56089* Ti_56095, TY51530* Tab_56096, TY50011* S_56097) {
TY51548* Result_58466;
Result_58466 = 0;
(*Ti_56095).H = (*S_56097).H;
unsureAsgnRef((void**) &(*Ti_56095).Name, S_56097);
if (!((*Tab_56096).Counter == 0)) goto LA2;
Result_58466 = NIM_NIL;
goto LA1;
LA2: ;
Result_58466 = Nextidentiter_56098(Ti_56095, Tab_56096);
LA1: ;
return Result_58466;
}
N_NIMCALL(NI, Idnodetablerawget_58893)(TY51570 T_58895, TY50005* Key_58896) {
NI Result_58897;
NI H_58898;
Result_58897 = 0;
H_58898 = 0;
H_58898 = (NI32)((*Key_58896).Id & (T_58895.Data->Sup.len-1));
while (1) {
if (!!((T_58895.Data->data[H_58898].Key == NIM_NIL))) goto LA1;
if (!((*T_58895.Data->data[H_58898].Key).Id == (*Key_58896).Id)) goto LA3;
Result_58897 = H_58898;
goto BeforeRet;
LA3: ;
H_58898 = Nexttry_56210(H_58898, (T_58895.Data->Sup.len-1));
} LA1: ;
Result_58897 = -1;
BeforeRet: ;
return Result_58897;
}
N_NIMCALL(TY51526*, Idnodetableget_56181)(TY51570 T_56183, TY50005* Key_56184) {
TY51526* Result_58916;
NI Index_58917;
Result_58916 = 0;
Index_58917 = 0;
Index_58917 = Idnodetablerawget_58893(T_56183, Key_56184);
if (!(0 <= Index_58917)) goto LA2;
Result_58916 = T_56183.Data->data[Index_58917].Val;
goto LA1;
LA2: ;
Result_58916 = NIM_NIL;
LA1: ;
return Result_58916;
}
N_NIMCALL(void, Idnodetablerawinsert_58920)(TY51568** Data_58923, TY50005* Key_58924, TY51526* Val_58925) {
NI H_58926;
H_58926 = 0;
H_58926 = (NI32)((*Key_58924).Id & ((*Data_58923)->Sup.len-1));
while (1) {
if (!!(((*Data_58923)->data[H_58926].Key == NIM_NIL))) goto LA1;
H_58926 = Nexttry_56210(H_58926, ((*Data_58923)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_58923)->data[H_58926].Key, Key_58924);
asgnRefNoCycle((void**) &(*Data_58923)->data[H_58926].Val, Val_58925);
}
N_NIMCALL(void, Idnodetableput_56185)(TY51570* T_56188, TY50005* Key_56189, TY51526* Val_56190) {
NI Index_58957;
NIM_BOOL LOC5;
TY51568* N_58981;
NI I_59012;
NI HEX3Atmp_59047;
NI Res_59049;
TY51568* LOC12;
Index_58957 = 0;
Index_58957 = Idnodetablerawget_58893((*T_56188), Key_56189);
if (!(0 <= Index_58957)) goto LA2;
asgnRefNoCycle((void**) &(*T_56188).Data->data[Index_58957].Val, Val_56190);
goto LA1;
LA2: ;
LOC5 = Mustrehash_56206((*T_56188).Data->Sup.len, (*T_56188).Counter);
if (!LOC5) goto LA6;
N_58981 = 0;
N_58981 = (TY51568*) newSeq(NTI51568, (NI32)((*T_56188).Data->Sup.len * 2));
I_59012 = 0;
HEX3Atmp_59047 = 0;
HEX3Atmp_59047 = ((*T_56188).Data->Sup.len-1);
Res_59049 = 0;
Res_59049 = 0;
while (1) {
if (!(Res_59049 <= HEX3Atmp_59047)) goto LA8;
I_59012 = Res_59049;
if (!!(((*T_56188).Data->data[I_59012].Key == NIM_NIL))) goto LA10;
Idnodetablerawinsert_58920(&N_58981, (*T_56188).Data->data[I_59012].Key, (*T_56188).Data->data[I_59012].Val);
LA10: ;
Res_59049 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_56188).Data;
unsureAsgnRef((void**) &(*T_56188).Data, N_58981);
N_58981 = LOC12;
LA6: ;
Idnodetablerawinsert_58920(&(*T_56188).Data, Key_56189, Val_56190);
(*T_56188).Counter += 1;
LA1: ;
}
static N_INLINE(NI, Sonslen_51804)(TY51526* N_51806) {
NI Result_52886;
Result_52886 = 0;
if (!(*N_51806).KindU.S6.Sons == 0) goto LA2;
Result_52886 = 0;
goto LA1;
LA2: ;
Result_52886 = (*N_51806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_52886;
}
N_NIMCALL(TY51548*, Getsymfromlist_56194)(TY51526* List_56196, TY50011* Ident_56197, NI Start_56198) {
TY51548* Result_56458;
NI I_56467;
NI HEX3Atmp_56515;
NI LOC1;
NI Res_56517;
Result_56458 = 0;
I_56467 = 0;
HEX3Atmp_56515 = 0;
LOC1 = Sonslen_51804(List_56196);
HEX3Atmp_56515 = (NI32)(LOC1 - 1);
Res_56517 = 0;
Res_56517 = Start_56198;
while (1) {
if (!(Res_56517 <= HEX3Atmp_56515)) goto LA2;
I_56467 = Res_56517;
if (!!(((*(*List_56196).KindU.S6.Sons->data[I_56467]).Kind == ((NU8) 3)))) goto LA4;
Internalerror_43574((*List_56196).Info, ((NimStringDesc*) &TMP193063));
LA4: ;
Result_56458 = (*(*List_56196).KindU.S6.Sons->data[I_56467]).KindU.S4.Sym;
if (!((*(*Result_56458).Name).Sup.Id == (*Ident_56197).Sup.Id)) goto LA7;
goto BeforeRet;
LA7: ;
Res_56517 += 1;
} LA2: ;
Result_56458 = NIM_NIL;
BeforeRet: ;
return Result_56458;
}
N_NIMCALL(TNimObject*, Idtableget_56163)(TY51564 T_56165, TY50005* Key_56166) {
TNimObject* Result_58748;
NI Index_58749;
Result_58748 = 0;
Index_58749 = 0;
Index_58749 = Idtablerawget_58708(T_56165, (*Key_56166).Id);
if (!(0 <= Index_58749)) goto LA2;
Result_58748 = T_56165.Data->data[Index_58749].Val;
goto LA1;
LA2: ;
Result_58748 = NIM_NIL;
LA1: ;
return Result_58748;
}
N_NIMCALL(void, Openscope_56146)(TY56104* Tab_56149) {
if (!((*Tab_56149).Stack->Sup.len <= ((NI) ((*Tab_56149).Tos)))) goto LA2;
(*Tab_56149).Stack = (TY56106*) setLengthSeq(&((*Tab_56149).Stack)->Sup, sizeof(TY51530), (NI32)(((NI) ((*Tab_56149).Tos)) + 1));
LA2: ;
Initstrtable_51747(&(*Tab_56149).Stack->data[(*Tab_56149).Tos]);
(*Tab_56149).Tos += 1;
}
N_NIMCALL(NU8, Symtabadduniqueat_56140)(TY56104* Tab_56143, TY51548* E_56144, NI At_56145) {
NU8 Result_58605;
TY51548* LOC2;
Result_58605 = 0;
LOC2 = 0;
LOC2 = Strtableget_56066(&(*Tab_56143).Stack->data[At_56145], (*E_56144).Name);
if (!!((LOC2 == NIM_NIL))) goto LA3;
Result_58605 = ((NU8) 0);
goto LA1;
LA3: ;
Strtableadd_56061(&(*Tab_56143).Stack->data[At_56145], E_56144);
Result_58605 = ((NU8) 1);
LA1: ;
return Result_58605;
}
N_NIMCALL(NU8, Symtabaddunique_56135)(TY56104* Tab_56138, TY51548* E_56139) {
NU8 Result_58623;
Result_58623 = 0;
Result_58623 = Symtabadduniqueat_56140(Tab_56138, E_56139, ((NI) ((NI32)(((NI) ((*Tab_56138).Tos)) - 1))));
return Result_58623;
}
N_NIMCALL(void, Rawclosescope_56150)(TY56104* Tab_56153) {
(*Tab_56153).Tos -= 1;
}
N_NIMCALL(void, Symtabaddat_56129)(TY56104* Tab_56132, TY51548* E_56133, NI At_56134) {
Strtableadd_56061(&(*Tab_56132).Stack->data[At_56134], E_56133);
}
N_NIMCALL(TY51548*, Symtablocalget_56120)(TY56104 Tab_56122, TY50011* S_56123) {
TY51548* Result_58543;
Result_58543 = 0;
Result_58543 = Strtableget_56066(&Tab_56122.Stack->data[(NI32)(((NI) (Tab_56122.Tos)) - 1)], S_56123);
return Result_58543;
}
N_NIMCALL(void, Symtabadd_56124)(TY56104* Tab_56127, TY51548* E_56128) {
Strtableadd_56061(&(*Tab_56127).Stack->data[(NI32)(((NI) ((*Tab_56127).Tos)) - 1)], E_56128);
}
N_NIMCALL(NIM_BOOL, Idtablehasobjectaskey_56177)(TY51564 T_56179, TY50005* Key_56180) {
NIM_BOOL Result_58731;
NI Index_58732;
Result_58731 = 0;
Index_58732 = 0;
Index_58732 = Idtablerawget_58708(T_56179, (*Key_56180).Id);
if (!(0 <= Index_58732)) goto LA2;
Result_58731 = (T_56179.Data->data[Index_58732].Key == Key_56180);
goto LA1;
LA2: ;
Result_58731 = NIM_FALSE;
LA1: ;
return Result_58731;
}
static N_INLINE(TY51526*, Lastson_51810)(TY51526* N_51812) {
TY51526* Result_53825;
NI LOC1;
Result_53825 = 0;
LOC1 = Sonslen_51804(N_51812);
Result_53825 = (*N_51812).KindU.S6.Sons->data[(NI32)(LOC1 - 1)];
return Result_53825;
}
N_NIMCALL(TY51548*, Lookupinrecord_56199)(TY51526* N_56201, TY50011* Field_56202) {
TY51548* Result_56243;
NI I_56267;
NI HEX3Atmp_56405;
NI LOC1;
NI Res_56407;
NI I_56343;
NI HEX3Atmp_56408;
NI LOC12;
NI Res_56410;
TY51526* LOC14;
Result_56243 = 0;
Result_56243 = NIM_NIL;
switch ((*N_56201).Kind) {
case ((NU8) 113):
I_56267 = 0;
HEX3Atmp_56405 = 0;
LOC1 = Sonslen_51804(N_56201);
HEX3Atmp_56405 = (NI32)(LOC1 - 1);
Res_56407 = 0;
Res_56407 = 0;
while (1) {
if (!(Res_56407 <= HEX3Atmp_56405)) goto LA2;
I_56267 = Res_56407;
Result_56243 = Lookupinrecord_56199((*N_56201).KindU.S6.Sons->data[I_56267], Field_56202);
if (!!((Result_56243 == NIM_NIL))) goto LA4;
goto BeforeRet;
LA4: ;
Res_56407 += 1;
} LA2: ;
break;
case ((NU8) 114):
if (!!(((*(*N_56201).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA7;
Internalerror_43574((*N_56201).Info, ((NimStringDesc*) &TMP193682));
LA7: ;
Result_56243 = Lookupinrecord_56199((*N_56201).KindU.S6.Sons->data[0], Field_56202);
if (!!((Result_56243 == NIM_NIL))) goto LA10;
goto BeforeRet;
LA10: ;
I_56343 = 0;
HEX3Atmp_56408 = 0;
LOC12 = Sonslen_51804(N_56201);
HEX3Atmp_56408 = (NI32)(LOC12 - 1);
Res_56410 = 0;
Res_56410 = 1;
while (1) {
if (!(Res_56410 <= HEX3Atmp_56408)) goto LA13;
I_56343 = Res_56410;
switch ((*(*N_56201).KindU.S6.Sons->data[I_56343]).Kind) {
case ((NU8) 75):
case ((NU8) 78):
LOC14 = 0;
LOC14 = Lastson_51810((*N_56201).KindU.S6.Sons->data[I_56343]);
Result_56243 = Lookupinrecord_56199(LOC14, Field_56202);
if (!!((Result_56243 == NIM_NIL))) goto LA16;
goto BeforeRet;
LA16: ;
break;
default:
Internalerror_43574((*N_56201).Info, ((NimStringDesc*) &TMP193683));
break;
}
Res_56410 += 1;
} LA13: ;
break;
case ((NU8) 3):
if (!((*(*(*N_56201).KindU.S4.Sym).Name).Sup.Id == (*Field_56202).Sup.Id)) goto LA19;
Result_56243 = (*N_56201).KindU.S4.Sym;
LA19: ;
break;
default:
Internalerror_43574((*N_56201).Info, ((NimStringDesc*) &TMP193684));
break;
}
BeforeRet: ;
return Result_56243;
}
N_NOINLINE(void, astalgoInit)(void) {
}

