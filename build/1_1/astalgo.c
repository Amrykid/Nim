/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY55220 TY55220;
typedef struct TY55218 TY55218;
typedef struct TY55216 TY55216;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY50547 TY50547;
typedef struct TY50529 TY50529;
typedef struct TY50527 TY50527;
typedef struct TY49011 TY49011;
typedef struct TY49005 TY49005;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY50551 TY50551;
typedef struct TY42536 TY42536;
typedef struct TY50525 TY50525;
typedef struct TY50539 TY50539;
typedef struct TY47008 TY47008;
typedef struct TY50543 TY50543;
typedef struct TY10202 TY10202;
typedef struct TY10214 TY10214;
typedef struct TY10590 TY10590;
typedef struct TY10218 TY10218;
typedef struct TY10210 TY10210;
typedef struct TY10588 TY10588;
typedef struct TY55076 TY55076;
typedef struct TY50563 TY50563;
typedef struct TY50561 TY50561;
typedef struct TY50559 TY50559;
typedef struct TY55104 TY55104;
typedef struct TY55106 TY55106;
typedef struct TY55089 TY55089;
typedef struct TY50569 TY50569;
typedef struct TY50567 TY50567;
typedef struct TY50565 TY50565;
typedef struct TY50519 TY50519;
typedef struct TY50549 TY50549;
typedef struct TY38013 TY38013;
struct TY55216 {
NI Key;
NI Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY55220 {
NI Counter;
TY55218* Data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY50529 {
TNimType* m_type;
NI Counter;
TY50527* Data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY49005 {
  TNimObject Sup;
NI Id;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY49011 {
  TY49005 Sup;
NimStringDesc* S;
TY49011* Next;
NI H;
};
struct TY42536 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY50539 {
NU8 K;
NU8 S;
NU8 Flags;
TY50551* T;
TY47008* R;
NI A;
};
struct TY50547 {
  TY49005 Sup;
NU8 Kind;
NU8 Magic;
TY50551* Typ;
TY49011* Name;
TY42536 Info;
TY50547* Owner;
NU32 Flags;
TY50529 Tab;
TY50525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY50539 Loc;
TY50543* Annex;
};
struct TY10202 {
NI Refcount;
TNimType* Typ;
};
struct TY10218 {
NI Len;
NI Cap;
TY10202** D;
};
struct TY10214 {
NI Counter;
NI Max;
TY10210* Head;
TY10210** Data;
};
struct TY10588 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10590 {
TY10218 Zct;
TY10218 Decstack;
TY10214 Cycleroots;
TY10218 Tempstack;
TY10588 Stat;
};
struct TY55076 {
NI H;
};
struct TY50559 {
TY49005* Key;
TNimObject* Val;
};
struct TY50563 {
NI Counter;
TY50561* Data;
};
struct TY55104 {
NI Tos;
TY55106* Stack;
};
struct TY55089 {
NI H;
TY49011* Name;
};
struct TY50565 {
TY49005* Key;
TY50525* Val;
};
struct TY50569 {
NI Counter;
TY50567* Data;
};
struct TY50525 {
TY50551* Typ;
NimStringDesc* Comment;
TY42536 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY50547* Sym;
} S4;
struct {TY49011* Ident;
} S5;
struct {TY50519* Sons;
} S6;
} KindU;
};
struct TY50551 {
  TY49005 Sup;
NU8 Kind;
TY50549* Sons;
TY50525* N;
NU8 Flags;
NU8 Callconv;
TY50547* Owner;
TY50547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY50539 Loc;
};
struct TY47008 {
  TNimObject Sup;
TY47008* Left;
TY47008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY38013 {
  TNimObject Sup;
TY38013* Prev;
TY38013* Next;
};
struct TY50543 {
  TY38013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY47008* Name;
TY50525* Path;
};
typedef NI TY8214[16];
struct TY10210 {
TY10210* Next;
NI Key;
TY8214 Bits;
};
struct TY55218 {
  TGenericSeq Sup;
  TY55216 data[SEQ_DECL_SIZE];
};
struct TY50527 {
  TGenericSeq Sup;
  TY50547* data[SEQ_DECL_SIZE];
};
struct TY50561 {
  TGenericSeq Sup;
  TY50559 data[SEQ_DECL_SIZE];
};
struct TY55106 {
  TGenericSeq Sup;
  TY50529 data[SEQ_DECL_SIZE];
};
struct TY50567 {
  TGenericSeq Sup;
  TY50565 data[SEQ_DECL_SIZE];
};
struct TY50519 {
  TGenericSeq Sup;
  TY50525* data[SEQ_DECL_SIZE];
};
struct TY50549 {
  TGenericSeq Sup;
  TY50551* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_13804, NI Len_13805);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_12626, void* Src_12627);
N_NIMCALL(NI, Nexttry_55210)(NI H_55212, NI Maxhash_55213);
N_NIMCALL(NIM_BOOL, Mustrehash_55206)(NI Length_55208, NI Counter_55209);
N_NIMCALL(void, Strtableenlarge_57259)(TY50529* T_57262);
N_NIMCALL(void, Strtablerawinsert_57222)(TY50527** Data_57225, TY50547* N_57226);
N_NIMCALL(void, Internalerror_42571)(TY42536 Info_42573, NimStringDesc* Errmsg_42574);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18192, NimStringDesc* Src_18193);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18087);
static N_INLINE(void, asgnRef)(void** Dest_12614, void* Src_12615);
static N_INLINE(void, Incref_12602)(TY10202* C_12604);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NIM_BOOL, Canbecycleroot_11016)(TY10202* C_11018);
static N_INLINE(void, Rtladdcycleroot_11652)(TY10202* C_11654);
N_NOINLINE(void, Incl_10474)(TY10214* S_10477, TY10202* Cell_10478);
static N_INLINE(TY10202*, Usrtocell_11012)(void* Usr_11014);
static N_INLINE(void, Decref_12401)(TY10202* C_12403);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12001)(TY10202* C_12003);
N_NOINLINE(void, Addzct_11001)(TY10218* S_11004, TY10202* C_11005);
N_NIMCALL(TY50547*, Nextiter_55083)(TY55076* Ti_55086, TY50529* Tab_55087);
N_NIMCALL(NI, Iitablerawget_58033)(TY55220 T_58035, NI Key_58036);
N_NIMCALL(void, Iitablerawinsert_58051)(TY55218** Data_58054, NI Key_58055, NI Val_58056);
N_NIMCALL(NI, Idtablerawget_57667)(TY50563 T_57669, NI Key_57670);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12618, void* Src_12619);
N_NIMCALL(void, Idtablerawinsert_57719)(TY50561** Data_57722, TY49005* Key_57723, TNimObject* Val_57724);
N_NIMCALL(TY50547*, Strtableget_55066)(TY50529* T_55068, TY49011* Name_55069);
N_NIMCALL(TY50547*, Nextidentiter_55098)(TY55089* Ti_55101, TY50529* Tab_55102);
N_NIMCALL(NI, Idnodetablerawget_57851)(TY50569 T_57853, TY49005* Key_57854);
N_NIMCALL(void, Idnodetablerawinsert_57878)(TY50567** Data_57881, TY49005* Key_57882, TY50525* Val_57883);
static N_INLINE(NI, Sonslen_50803)(TY50525* N_50805);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18403, NI Elemsize_18404, NI Newlen_18405);
N_NIMCALL(void, Initstrtable_50746)(TY50529* X_50749);
N_NIMCALL(NU8, Symtabadduniqueat_55140)(TY55104* Tab_55143, TY50547* E_55144, NI At_55145);
N_NIMCALL(void, Strtableadd_55061)(TY50529* T_55064, TY50547* N_55065);
N_NIMCALL(NimStringDesc*, Ropetostr_47063)(TY47008* P_47065);
N_NIMCALL(TY47008*, Debugtype_56347)(TY50551* N_56349);
N_NIMCALL(TY47008*, Torope_47046)(NimStringDesc* S_47048);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19155, TNimType* Typ_19156);
N_NIMCALL(void, App_47036)(TY47008** A_47039, NimStringDesc* B_47040);
static N_INLINE(NI, Sonslen_50806)(TY50551* N_50808);
N_NIMCALL(void, App_47031)(TY47008** A_47034, TY47008* B_47035);
N_NIMCALL(TY50547*, Lookupinrecord_55199)(TY50525* N_55201, TY49011* Field_55202);
static N_INLINE(TY50525*, Lastson_50809)(TY50525* N_50811);
N_NIMCALL(void, Writeln_56742)(FILE* F_56745, NimStringDesc* X_56746);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
STRING_LITERAL(TMP189609, "StrTableRawInsert: ", 19);
STRING_LITERAL(TMP190060, "getSymFromList", 14);
STRING_LITERAL(TMP190143, "null", 4);
STRING_LITERAL(TMP190144, " ", 1);
STRING_LITERAL(TMP190145, "(", 1);
STRING_LITERAL(TMP190146, ", ", 2);
STRING_LITERAL(TMP190147, ")", 1);
STRING_LITERAL(TMP190682, "lookupInRecord", 14);
STRING_LITERAL(TMP190683, "lookupInRecord(record case branch)", 34);
STRING_LITERAL(TMP190684, "lookupInRecord()", 16);
STRING_LITERAL(TMP191503, "\015\012", 2);
extern TNimType* NTI55218; /* TIIPairSeq */
extern TNimType* NTI50527; /* TSymSeq */
extern TY10590 Gch_10608;
extern TNimType* NTI50561; /* TIdPairSeq */
extern TNimType* NTI55106; /* seq[TStrTable] */
extern TNimType* NTI50567; /* TIdNodePairSeq */
extern TNimType* NTI50162; /* TTypeKind */
N_NIMCALL(void, Initiitable_55225)(TY55220* X_55228) {
NI I_58030;
NI Res_58032;
(*X_55228).Counter = 0;
unsureAsgnRef((void**) &(*X_55228).Data, (TY55218*) newSeq(NTI55218, 8));
I_58030 = 0;
Res_58032 = 0;
Res_58032 = 0;
while (1) {
if (!(Res_58032 <= 7)) goto LA1;
I_58030 = Res_58032;
(*X_55228).Data->data[I_58030].Key = (-2147483647 -1);
Res_58032 += 1;
} LA1: ;
}
N_NIMCALL(NI, Nexttry_55210)(NI H_55212, NI Maxhash_55213) {
NI Result_56792;
Result_56792 = 0;
Result_56792 = (NI32)((NI32)((NI32)(5 * H_55212) + 1) & Maxhash_55213);
return Result_56792;
}
N_NIMCALL(TY50547*, Strtableget_55066)(TY50529* T_55068, TY49011* Name_55069) {
TY50547* Result_57405;
NI H_57406;
Result_57405 = 0;
H_57406 = 0;
H_57406 = (NI32)((*Name_55069).H & ((*T_55068).Data->Sup.len-1));
while (1) {
Result_57405 = (*T_55068).Data->data[H_57406];
if (!(Result_57405 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*Result_57405).Name).Sup.Id == (*Name_55069).Sup.Id)) goto LA6;
goto LA1;
LA6: ;
H_57406 = Nexttry_55210(H_57406, ((*T_55068).Data->Sup.len-1));
} LA1: ;
return Result_57405;
}
N_NIMCALL(NIM_BOOL, Mustrehash_55206)(NI Length_55208, NI Counter_55209) {
NIM_BOOL Result_55523;
NIM_BOOL LOC1;
Result_55523 = 0;
LOC1 = ((NI32)(Length_55208 * 2) < (NI32)(Counter_55209 * 3));
if (LOC1) goto LA2;
LOC1 = ((NI32)(Length_55208 - Counter_55209) < 4);
LA2: ;
Result_55523 = LOC1;
return Result_55523;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18192, NimStringDesc* Src_18193) {
memcpy(((NCSTRING) (&(*Dest_18192).data[((*Dest_18192).Sup.len)-0])), ((NCSTRING) ((*Src_18193).data)), ((NI32) ((NI32)((NI32)((*Src_18193).Sup.len + 1) * 1))));
(*Dest_18192).Sup.len += (*Src_18193).Sup.len;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7407;
Result_7407 = 0;
(*Memloc_3004) += X_3005;
Result_7407 = (*Memloc_3004);
return Result_7407;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11016)(TY10202* C_11018) {
NIM_BOOL Result_11019;
Result_11019 = 0;
Result_11019 = !((((*(*C_11018).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11019;
}
static N_INLINE(void, Rtladdcycleroot_11652)(TY10202* C_11654) {
Incl_10474(&Gch_10608.Cycleroots, C_11654);
}
static N_INLINE(void, Incref_12602)(TY10202* C_12604) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3001(&(*C_12604).Refcount, 8);
LOC3 = Canbecycleroot_11016(C_12604);
if (!LOC3) goto LA4;
Rtladdcycleroot_11652(C_12604);
LA4: ;
}
static N_INLINE(TY10202*, Usrtocell_11012)(void* Usr_11014) {
TY10202* Result_11015;
Result_11015 = 0;
Result_11015 = ((TY10202*) ((NI32)((NU32)(((NI) (Usr_11014))) - (NU32)(((NI) (((NI)sizeof(TY10202))))))));
return Result_11015;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
Result_7606 = 0;
(*Memloc_3009) -= X_3010;
Result_7606 = (*Memloc_3009);
return Result_7606;
}
static N_INLINE(void, Rtladdzct_12001)(TY10202* C_12003) {
Addzct_11001(&Gch_10608.Zct, C_12003);
}
static N_INLINE(void, Decref_12401)(TY10202* C_12403) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3006(&(*C_12403).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12001(C_12403);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11016(C_12403);
if (!LOC5) goto LA6;
Rtladdcycleroot_11652(C_12403);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_12614, void* Src_12615) {
TY10202* LOC4;
TY10202* LOC8;
if (!!((Src_12615 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11012(Src_12615);
Incref_12602(LOC4);
LA2: ;
if (!!(((*Dest_12614) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11012((*Dest_12614));
Decref_12401(LOC8);
LA6: ;
(*Dest_12614) = Src_12615;
}
N_NIMCALL(void, Strtablerawinsert_57222)(TY50527** Data_57225, TY50547* N_57226) {
NI H_57227;
NimStringDesc* LOC5;
H_57227 = 0;
H_57227 = (NI32)((*(*N_57226).Name).H & ((*Data_57225)->Sup.len-1));
while (1) {
if (!!(((*Data_57225)->data[H_57227] == NIM_NIL))) goto LA1;
if (!((*Data_57225)->data[H_57227] == N_57226)) goto LA3;
LOC5 = 0;
LOC5 = rawNewString((*(*N_57226).Name).S->Sup.len + 19);
appendString(LOC5, ((NimStringDesc*) &TMP189609));
appendString(LOC5, (*(*N_57226).Name).S);
Internalerror_42571((*N_57226).Info, LOC5);
LA3: ;
H_57227 = Nexttry_55210(H_57227, ((*Data_57225)->Sup.len-1));
} LA1: ;
asgnRef((void**) &(*Data_57225)->data[H_57227], N_57226);
}
N_NIMCALL(void, Strtableenlarge_57259)(TY50529* T_57262) {
TY50527* N_57263;
NI I_57293;
NI HEX3Atmp_57315;
NI Res_57317;
TY50527* LOC5;
N_57263 = 0;
N_57263 = (TY50527*) newSeq(NTI50527, (NI32)((*T_57262).Data->Sup.len * 2));
I_57293 = 0;
HEX3Atmp_57315 = 0;
HEX3Atmp_57315 = ((*T_57262).Data->Sup.len-1);
Res_57317 = 0;
Res_57317 = 0;
while (1) {
if (!(Res_57317 <= HEX3Atmp_57315)) goto LA1;
I_57293 = Res_57317;
if (!!(((*T_57262).Data->data[I_57293] == NIM_NIL))) goto LA3;
Strtablerawinsert_57222(&N_57263, (*T_57262).Data->data[I_57293]);
LA3: ;
Res_57317 += 1;
} LA1: ;
LOC5 = 0;
LOC5 = (*T_57262).Data;
unsureAsgnRef((void**) &(*T_57262).Data, N_57263);
N_57263 = LOC5;
}
N_NIMCALL(void, Strtableadd_55061)(TY50529* T_55064, TY50547* N_55065) {
NIM_BOOL LOC2;
LOC2 = Mustrehash_55206((*T_55064).Data->Sup.len, (*T_55064).Counter);
if (!LOC2) goto LA3;
Strtableenlarge_57259(T_55064);
LA3: ;
Strtablerawinsert_57222(&(*T_55064).Data, N_55065);
(*T_55064).Counter += 1;
}
N_NIMCALL(TY50547*, Nextiter_55083)(TY55076* Ti_55086, TY50529* Tab_55087) {
TY50547* Result_57465;
Result_57465 = 0;
Result_57465 = NIM_NIL;
while (1) {
if (!((*Ti_55086).H <= ((*Tab_55087).Data->Sup.len-1))) goto LA1;
Result_57465 = (*Tab_55087).Data->data[(*Ti_55086).H];
(*Ti_55086).H += 1;
if (!!((Result_57465 == NIM_NIL))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
return Result_57465;
}
N_NIMCALL(TY50547*, Inittabiter_55078)(TY55076* Ti_55081, TY50529* Tab_55082) {
TY50547* Result_57457;
Result_57457 = 0;
(*Ti_55081).H = 0;
if (!((*Tab_55082).Counter == 0)) goto LA2;
Result_57457 = NIM_NIL;
goto LA1;
LA2: ;
Result_57457 = Nextiter_55083(Ti_55081, Tab_55082);
LA1: ;
return Result_57457;
}
N_NIMCALL(NI, Iitablerawget_58033)(TY55220 T_58035, NI Key_58036) {
NI Result_58037;
NI H_58038;
Result_58037 = 0;
H_58038 = 0;
H_58038 = (NI32)(Key_58036 & (T_58035.Data->Sup.len-1));
while (1) {
if (!!((T_58035.Data->data[H_58038].Key == (-2147483647 -1)))) goto LA1;
if (!(T_58035.Data->data[H_58038].Key == Key_58036)) goto LA3;
Result_58037 = H_58038;
goto BeforeRet;
LA3: ;
H_58038 = Nexttry_55210(H_58038, (T_58035.Data->Sup.len-1));
} LA1: ;
Result_58037 = -1;
BeforeRet: ;
return Result_58037;
}
N_NIMCALL(void, Iitablerawinsert_58051)(TY55218** Data_58054, NI Key_58055, NI Val_58056) {
NI H_58057;
H_58057 = 0;
H_58057 = (NI32)(Key_58055 & ((*Data_58054)->Sup.len-1));
while (1) {
if (!!(((*Data_58054)->data[H_58057].Key == (-2147483647 -1)))) goto LA1;
H_58057 = Nexttry_55210(H_58057, ((*Data_58054)->Sup.len-1));
} LA1: ;
(*Data_58054)->data[H_58057].Key = Key_58055;
(*Data_58054)->data[H_58057].Val = Val_58056;
}
N_NIMCALL(void, Iitableput_55233)(TY55220* T_55236, NI Key_55237, NI Val_55238) {
NI Index_58070;
NIM_BOOL LOC5;
TY55218* N_58085;
NI I_58115;
NI HEX3Atmp_58149;
NI Res_58151;
NI I_58123;
NI HEX3Atmp_58152;
NI Res_58154;
TY55218* LOC13;
Index_58070 = 0;
Index_58070 = Iitablerawget_58033((*T_55236), Key_55237);
if (!(0 <= Index_58070)) goto LA2;
(*T_55236).Data->data[Index_58070].Val = Val_55238;
goto LA1;
LA2: ;
LOC5 = Mustrehash_55206((*T_55236).Data->Sup.len, (*T_55236).Counter);
if (!LOC5) goto LA6;
N_58085 = 0;
N_58085 = (TY55218*) newSeq(NTI55218, (NI32)((*T_55236).Data->Sup.len * 2));
I_58115 = 0;
HEX3Atmp_58149 = 0;
HEX3Atmp_58149 = (N_58085->Sup.len-1);
Res_58151 = 0;
Res_58151 = 0;
while (1) {
if (!(Res_58151 <= HEX3Atmp_58149)) goto LA8;
I_58115 = Res_58151;
N_58085->data[I_58115].Key = (-2147483647 -1);
Res_58151 += 1;
} LA8: ;
I_58123 = 0;
HEX3Atmp_58152 = 0;
HEX3Atmp_58152 = ((*T_55236).Data->Sup.len-1);
Res_58154 = 0;
Res_58154 = 0;
while (1) {
if (!(Res_58154 <= HEX3Atmp_58152)) goto LA9;
I_58123 = Res_58154;
if (!!(((*T_55236).Data->data[I_58123].Key == (-2147483647 -1)))) goto LA11;
Iitablerawinsert_58051(&N_58085, (*T_55236).Data->data[I_58123].Key, (*T_55236).Data->data[I_58123].Val);
LA11: ;
Res_58154 += 1;
} LA9: ;
LOC13 = 0;
LOC13 = (*T_55236).Data;
unsureAsgnRef((void**) &(*T_55236).Data, N_58085);
N_58085 = LOC13;
LA6: ;
Iitablerawinsert_58051(&(*T_55236).Data, Key_55237, Val_55238);
(*T_55236).Counter += 1;
LA1: ;
}
N_NIMCALL(NI, Idtablerawget_57667)(TY50563 T_57669, NI Key_57670) {
NI Result_57671;
NI H_57672;
Result_57671 = 0;
H_57672 = 0;
H_57672 = (NI32)(Key_57670 & (T_57669.Data->Sup.len-1));
while (1) {
if (!!((T_57669.Data->data[H_57672].Key == NIM_NIL))) goto LA1;
if (!((*T_57669.Data->data[H_57672].Key).Id == Key_57670)) goto LA3;
Result_57671 = H_57672;
goto BeforeRet;
LA3: ;
H_57672 = Nexttry_55210(H_57672, (T_57669.Data->Sup.len-1));
} LA1: ;
Result_57671 = -1;
BeforeRet: ;
return Result_57671;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12618, void* Src_12619) {
TY10202* C_12620;
NI LOC4;
TY10202* C_12622;
NI LOC9;
if (!!((Src_12619 == NIM_NIL))) goto LA2;
C_12620 = 0;
C_12620 = Usrtocell_11012(Src_12619);
LOC4 = Atomicinc_3001(&(*C_12620).Refcount, 8);
LA2: ;
if (!!(((*Dest_12618) == NIM_NIL))) goto LA6;
C_12622 = 0;
C_12622 = Usrtocell_11012((*Dest_12618));
LOC9 = Atomicdec_3006(&(*C_12622).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12001(C_12622);
LA10: ;
LA6: ;
(*Dest_12618) = Src_12619;
}
N_NIMCALL(void, Idtablerawinsert_57719)(TY50561** Data_57722, TY49005* Key_57723, TNimObject* Val_57724) {
NI H_57725;
H_57725 = 0;
H_57725 = (NI32)((*Key_57723).Id & ((*Data_57722)->Sup.len-1));
while (1) {
if (!!(((*Data_57722)->data[H_57725].Key == NIM_NIL))) goto LA1;
H_57725 = Nexttry_55210(H_57725, ((*Data_57722)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_57722)->data[H_57725].Key, Key_57723);
asgnRefNoCycle((void**) &(*Data_57722)->data[H_57725].Val, Val_57724);
}
N_NIMCALL(void, Idtableput_55171)(TY50563* T_55174, TY49005* Key_55175, TNimObject* Val_55176) {
NI Index_57756;
TY50561* N_57757;
NIM_BOOL LOC5;
NI I_57810;
NI HEX3Atmp_57845;
NI Res_57847;
TY50561* LOC12;
Index_57756 = 0;
N_57757 = 0;
Index_57756 = Idtablerawget_57667((*T_55174), (*Key_55175).Id);
if (!(0 <= Index_57756)) goto LA2;
asgnRefNoCycle((void**) &(*T_55174).Data->data[Index_57756].Val, Val_55176);
goto LA1;
LA2: ;
LOC5 = Mustrehash_55206((*T_55174).Data->Sup.len, (*T_55174).Counter);
if (!LOC5) goto LA6;
N_57757 = (TY50561*) newSeq(NTI50561, (NI32)((*T_55174).Data->Sup.len * 2));
I_57810 = 0;
HEX3Atmp_57845 = 0;
HEX3Atmp_57845 = ((*T_55174).Data->Sup.len-1);
Res_57847 = 0;
Res_57847 = 0;
while (1) {
if (!(Res_57847 <= HEX3Atmp_57845)) goto LA8;
I_57810 = Res_57847;
if (!!(((*T_55174).Data->data[I_57810].Key == NIM_NIL))) goto LA10;
Idtablerawinsert_57719(&N_57757, (*T_55174).Data->data[I_57810].Key, (*T_55174).Data->data[I_57810].Val);
LA10: ;
Res_57847 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_55174).Data;
unsureAsgnRef((void**) &(*T_55174).Data, N_57757);
N_57757 = LOC12;
LA6: ;
Idtablerawinsert_57719(&(*T_55174).Data, Key_55175, Val_55176);
(*T_55174).Counter += 1;
LA1: ;
}
N_NIMCALL(TNimObject*, Idtableget_55167)(TY50563 T_55169, NI Key_55170) {
TNimObject* Result_57715;
NI Index_57716;
Result_57715 = 0;
Index_57716 = 0;
Index_57716 = Idtablerawget_57667(T_55169, Key_55170);
if (!(0 <= Index_57716)) goto LA2;
Result_57715 = T_55169.Data->data[Index_57716].Val;
goto LA1;
LA2: ;
Result_57715 = NIM_NIL;
LA1: ;
return Result_57715;
}
N_NIMCALL(NI, Iitableget_55229)(TY55220 T_55231, NI Key_55232) {
NI Result_58047;
NI Index_58048;
Result_58047 = 0;
Index_58048 = 0;
Index_58048 = Iitablerawget_58033(T_55231, Key_55232);
if (!(0 <= Index_58048)) goto LA2;
Result_58047 = T_55231.Data->data[Index_58048].Val;
goto LA1;
LA2: ;
Result_58047 = (-2147483647 -1);
LA1: ;
return Result_58047;
}
N_NIMCALL(void, Initsymtab_55108)(TY55104* Tab_55111) {
(*Tab_55111).Tos = 0;
unsureAsgnRef((void**) &(*Tab_55111).Stack, (TY55106*) newSeq(NTI55106, 0));
}
N_NIMCALL(TY50547*, Symtabget_55116)(TY55104 Tab_55118, TY49011* S_55119) {
TY50547* Result_57508;
NI I_57531;
NI HEX3Atmp_57543;
NI Res_57545;
Result_57508 = 0;
I_57531 = 0;
HEX3Atmp_57543 = 0;
HEX3Atmp_57543 = (NI32)(((NI) (Tab_55118.Tos)) - 1);
Res_57545 = 0;
Res_57545 = HEX3Atmp_57543;
while (1) {
if (!(0 <= Res_57545)) goto LA1;
I_57531 = Res_57545;
Result_57508 = Strtableget_55066(&Tab_55118.Stack->data[I_57531], S_55119);
if (!!((Result_57508 == NIM_NIL))) goto LA3;
goto BeforeRet;
LA3: ;
Res_57545 -= 1;
} LA1: ;
Result_57508 = NIM_NIL;
BeforeRet: ;
return Result_57508;
}
N_NIMCALL(TY50547*, Getmodule_55203)(TY50547* S_55205) {
TY50547* Result_55412;
NIM_BOOL LOC2;
Result_55412 = 0;
Result_55412 = S_55205;
while (1) {
LOC2 = !((Result_55412 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Result_55412).Kind == ((NU8) 6)));
LA3: ;
if (!LOC2) goto LA1;
Result_55412 = (*Result_55412).Owner;
} LA1: ;
return Result_55412;
}
N_NIMCALL(TY50547*, Nextidentiter_55098)(TY55089* Ti_55101, TY50529* Tab_55102) {
TY50547* Result_57434;
NI H_57435;
NI Start_57436;
Result_57434 = 0;
H_57435 = 0;
Start_57436 = 0;
H_57435 = (NI32)((*Ti_55101).H & ((*Tab_55102).Data->Sup.len-1));
Start_57436 = H_57435;
Result_57434 = (*Tab_55102).Data->data[H_57435];
while (1) {
if (!!((Result_57434 == NIM_NIL))) goto LA1;
if (!((*(*Result_57434).Name).Sup.Id == (*(*Ti_55101).Name).Sup.Id)) goto LA3;
goto LA1;
LA3: ;
H_57435 = Nexttry_55210(H_57435, ((*Tab_55102).Data->Sup.len-1));
if (!(H_57435 == Start_57436)) goto LA6;
Result_57434 = NIM_NIL;
goto LA1;
LA6: ;
Result_57434 = (*Tab_55102).Data->data[H_57435];
} LA1: ;
(*Ti_55101).H = Nexttry_55210(H_57435, ((*Tab_55102).Data->Sup.len-1));
return Result_57434;
}
N_NIMCALL(TY50547*, Initidentiter_55092)(TY55089* Ti_55095, TY50529* Tab_55096, TY49011* S_55097) {
TY50547* Result_57426;
Result_57426 = 0;
(*Ti_55095).H = (*S_55097).H;
unsureAsgnRef((void**) &(*Ti_55095).Name, S_55097);
if (!((*Tab_55096).Counter == 0)) goto LA2;
Result_57426 = NIM_NIL;
goto LA1;
LA2: ;
Result_57426 = Nextidentiter_55098(Ti_55095, Tab_55096);
LA1: ;
return Result_57426;
}
N_NIMCALL(NI, Idnodetablerawget_57851)(TY50569 T_57853, TY49005* Key_57854) {
NI Result_57855;
NI H_57856;
Result_57855 = 0;
H_57856 = 0;
H_57856 = (NI32)((*Key_57854).Id & (T_57853.Data->Sup.len-1));
while (1) {
if (!!((T_57853.Data->data[H_57856].Key == NIM_NIL))) goto LA1;
if (!((*T_57853.Data->data[H_57856].Key).Id == (*Key_57854).Id)) goto LA3;
Result_57855 = H_57856;
goto BeforeRet;
LA3: ;
H_57856 = Nexttry_55210(H_57856, (T_57853.Data->Sup.len-1));
} LA1: ;
Result_57855 = -1;
BeforeRet: ;
return Result_57855;
}
N_NIMCALL(TY50525*, Idnodetableget_55181)(TY50569 T_55183, TY49005* Key_55184) {
TY50525* Result_57874;
NI Index_57875;
Result_57874 = 0;
Index_57875 = 0;
Index_57875 = Idnodetablerawget_57851(T_55183, Key_55184);
if (!(0 <= Index_57875)) goto LA2;
Result_57874 = T_55183.Data->data[Index_57875].Val;
goto LA1;
LA2: ;
Result_57874 = NIM_NIL;
LA1: ;
return Result_57874;
}
N_NIMCALL(void, Idnodetablerawinsert_57878)(TY50567** Data_57881, TY49005* Key_57882, TY50525* Val_57883) {
NI H_57884;
H_57884 = 0;
H_57884 = (NI32)((*Key_57882).Id & ((*Data_57881)->Sup.len-1));
while (1) {
if (!!(((*Data_57881)->data[H_57884].Key == NIM_NIL))) goto LA1;
H_57884 = Nexttry_55210(H_57884, ((*Data_57881)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_57881)->data[H_57884].Key, Key_57882);
asgnRefNoCycle((void**) &(*Data_57881)->data[H_57884].Val, Val_57883);
}
N_NIMCALL(void, Idnodetableput_55185)(TY50569* T_55188, TY49005* Key_55189, TY50525* Val_55190) {
NI Index_57915;
NIM_BOOL LOC5;
TY50567* N_57939;
NI I_57969;
NI HEX3Atmp_58004;
NI Res_58006;
TY50567* LOC12;
Index_57915 = 0;
Index_57915 = Idnodetablerawget_57851((*T_55188), Key_55189);
if (!(0 <= Index_57915)) goto LA2;
asgnRefNoCycle((void**) &(*T_55188).Data->data[Index_57915].Val, Val_55190);
goto LA1;
LA2: ;
LOC5 = Mustrehash_55206((*T_55188).Data->Sup.len, (*T_55188).Counter);
if (!LOC5) goto LA6;
N_57939 = 0;
N_57939 = (TY50567*) newSeq(NTI50567, (NI32)((*T_55188).Data->Sup.len * 2));
I_57969 = 0;
HEX3Atmp_58004 = 0;
HEX3Atmp_58004 = ((*T_55188).Data->Sup.len-1);
Res_58006 = 0;
Res_58006 = 0;
while (1) {
if (!(Res_58006 <= HEX3Atmp_58004)) goto LA8;
I_57969 = Res_58006;
if (!!(((*T_55188).Data->data[I_57969].Key == NIM_NIL))) goto LA10;
Idnodetablerawinsert_57878(&N_57939, (*T_55188).Data->data[I_57969].Key, (*T_55188).Data->data[I_57969].Val);
LA10: ;
Res_58006 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_55188).Data;
unsureAsgnRef((void**) &(*T_55188).Data, N_57939);
N_57939 = LOC12;
LA6: ;
Idnodetablerawinsert_57878(&(*T_55188).Data, Key_55189, Val_55190);
(*T_55188).Counter += 1;
LA1: ;
}
static N_INLINE(NI, Sonslen_50803)(TY50525* N_50805) {
NI Result_51880;
Result_51880 = 0;
if (!(*N_50805).KindU.S6.Sons == 0) goto LA2;
Result_51880 = 0;
goto LA1;
LA2: ;
Result_51880 = (*N_50805).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_51880;
}
N_NIMCALL(TY50547*, Getsymfromlist_55194)(TY50525* List_55196, TY49011* Ident_55197, NI Start_55198) {
TY50547* Result_55456;
NI I_55464;
NI HEX3Atmp_55512;
NI LOC1;
NI Res_55514;
Result_55456 = 0;
I_55464 = 0;
HEX3Atmp_55512 = 0;
LOC1 = Sonslen_50803(List_55196);
HEX3Atmp_55512 = (NI32)(LOC1 - 1);
Res_55514 = 0;
Res_55514 = Start_55198;
while (1) {
if (!(Res_55514 <= HEX3Atmp_55512)) goto LA2;
I_55464 = Res_55514;
if (!!(((*(*List_55196).KindU.S6.Sons->data[I_55464]).Kind == ((NU8) 3)))) goto LA4;
Internalerror_42571((*List_55196).Info, ((NimStringDesc*) &TMP190060));
LA4: ;
Result_55456 = (*(*List_55196).KindU.S6.Sons->data[I_55464]).KindU.S4.Sym;
if (!((*(*Result_55456).Name).Sup.Id == (*Ident_55197).Sup.Id)) goto LA7;
goto BeforeRet;
LA7: ;
Res_55514 += 1;
} LA2: ;
Result_55456 = NIM_NIL;
BeforeRet: ;
return Result_55456;
}
N_NIMCALL(TNimObject*, Idtableget_55163)(TY50563 T_55165, TY49005* Key_55166) {
TNimObject* Result_57707;
NI Index_57708;
Result_57707 = 0;
Index_57708 = 0;
Index_57708 = Idtablerawget_57667(T_55165, (*Key_55166).Id);
if (!(0 <= Index_57708)) goto LA2;
Result_57707 = T_55165.Data->data[Index_57708].Val;
goto LA1;
LA2: ;
Result_57707 = NIM_NIL;
LA1: ;
return Result_57707;
}
N_NIMCALL(void, Openscope_55146)(TY55104* Tab_55149) {
if (!((*Tab_55149).Stack->Sup.len <= ((NI) ((*Tab_55149).Tos)))) goto LA2;
(*Tab_55149).Stack = (TY55106*) setLengthSeq(&((*Tab_55149).Stack)->Sup, sizeof(TY50529), (NI32)(((NI) ((*Tab_55149).Tos)) + 1));
LA2: ;
Initstrtable_50746(&(*Tab_55149).Stack->data[(*Tab_55149).Tos]);
(*Tab_55149).Tos += 1;
}
N_NIMCALL(NU8, Symtabadduniqueat_55140)(TY55104* Tab_55143, TY50547* E_55144, NI At_55145) {
NU8 Result_57565;
TY50547* LOC2;
Result_57565 = 0;
LOC2 = 0;
LOC2 = Strtableget_55066(&(*Tab_55143).Stack->data[At_55145], (*E_55144).Name);
if (!!((LOC2 == NIM_NIL))) goto LA3;
Result_57565 = ((NU8) 0);
goto LA1;
LA3: ;
Strtableadd_55061(&(*Tab_55143).Stack->data[At_55145], E_55144);
Result_57565 = ((NU8) 1);
LA1: ;
return Result_57565;
}
N_NIMCALL(NU8, Symtabaddunique_55135)(TY55104* Tab_55138, TY50547* E_55139) {
NU8 Result_57583;
Result_57583 = 0;
Result_57583 = Symtabadduniqueat_55140(Tab_55138, E_55139, ((NI) ((NI32)(((NI) ((*Tab_55138).Tos)) - 1))));
return Result_57583;
}
N_NIMCALL(void, Rawclosescope_55150)(TY55104* Tab_55153) {
(*Tab_55153).Tos -= 1;
}
static N_INLINE(NI, Sonslen_50806)(TY50551* N_50808) {
NI Result_51744;
Result_51744 = 0;
if (!(*N_50808).Sons == 0) goto LA2;
Result_51744 = 0;
goto LA1;
LA2: ;
Result_51744 = (*N_50808).Sons->Sup.len;
LA1: ;
return Result_51744;
}
N_NIMCALL(TY47008*, Debugtype_56347)(TY50551* N_56349) {
TY47008* Result_56350;
NIM_BOOL LOC8;
NI LOC10;
NI I_56402;
NI HEX3Atmp_56420;
NI LOC13;
NI Res_56422;
TY47008* LOC21;
Result_56350 = 0;
if (!(N_56349 == NIM_NIL)) goto LA2;
Result_56350 = Torope_47046(((NimStringDesc*) &TMP190143));
goto LA1;
LA2: ;
Result_56350 = Torope_47046(reprEnum((*N_56349).Kind, NTI50162));
if (!!(((*N_56349).Sym == NIM_NIL))) goto LA5;
App_47036(&Result_56350, ((NimStringDesc*) &TMP190144));
App_47036(&Result_56350, (*(*(*N_56349).Sym).Name).S);
LA5: ;
LOC8 = !(((*N_56349).Kind == ((NU8) 28)));
if (!(LOC8)) goto LA9;
LOC10 = Sonslen_50806(N_56349);
LOC8 = (0 < LOC10);
LA9: ;
if (!LOC8) goto LA11;
App_47036(&Result_56350, ((NimStringDesc*) &TMP190145));
I_56402 = 0;
HEX3Atmp_56420 = 0;
LOC13 = Sonslen_50806(N_56349);
HEX3Atmp_56420 = (NI32)(LOC13 - 1);
Res_56422 = 0;
Res_56422 = 0;
while (1) {
if (!(Res_56422 <= HEX3Atmp_56420)) goto LA14;
I_56402 = Res_56422;
if (!(0 < I_56402)) goto LA16;
App_47036(&Result_56350, ((NimStringDesc*) &TMP190146));
LA16: ;
if (!((*N_56349).Sons->data[I_56402] == NIM_NIL)) goto LA19;
App_47036(&Result_56350, ((NimStringDesc*) &TMP190143));
goto LA18;
LA19: ;
LOC21 = 0;
LOC21 = Debugtype_56347((*N_56349).Sons->data[I_56402]);
App_47031(&Result_56350, LOC21);
LA18: ;
Res_56422 += 1;
} LA14: ;
App_47036(&Result_56350, ((NimStringDesc*) &TMP190147));
LA11: ;
LA1: ;
return Result_56350;
}
N_NIMCALL(void, Debug_55157)(TY50551* N_55159) {
TY47008* LOC1;
NimStringDesc* LOC2;
LOC1 = 0;
LOC1 = Debugtype_56347(N_55159);
LOC2 = 0;
LOC2 = Ropetostr_47063(LOC1);
Writeln_56742(stdout, LOC2);
}
N_NIMCALL(void, Symtabaddat_55129)(TY55104* Tab_55132, TY50547* E_55133, NI At_55134) {
Strtableadd_55061(&(*Tab_55132).Stack->data[At_55134], E_55133);
}
N_NIMCALL(TY50547*, Symtablocalget_55120)(TY55104 Tab_55122, TY49011* S_55123) {
TY50547* Result_57503;
Result_57503 = 0;
Result_57503 = Strtableget_55066(&Tab_55122.Stack->data[(NI32)(((NI) (Tab_55122.Tos)) - 1)], S_55123);
return Result_57503;
}
N_NIMCALL(void, Symtabadd_55124)(TY55104* Tab_55127, TY50547* E_55128) {
Strtableadd_55061(&(*Tab_55127).Stack->data[(NI32)(((NI) ((*Tab_55127).Tos)) - 1)], E_55128);
}
N_NIMCALL(NIM_BOOL, Idtablehasobjectaskey_55177)(TY50563 T_55179, TY49005* Key_55180) {
NIM_BOOL Result_57690;
NI Index_57691;
Result_57690 = 0;
Index_57691 = 0;
Index_57691 = Idtablerawget_57667(T_55179, (*Key_55180).Id);
if (!(0 <= Index_57691)) goto LA2;
Result_57690 = (T_55179.Data->data[Index_57691].Key == Key_55180);
goto LA1;
LA2: ;
Result_57690 = NIM_FALSE;
LA1: ;
return Result_57690;
}
static N_INLINE(TY50525*, Lastson_50809)(TY50525* N_50811) {
TY50525* Result_52817;
NI LOC1;
Result_52817 = 0;
LOC1 = Sonslen_50803(N_50811);
Result_52817 = (*N_50811).KindU.S6.Sons->data[(NI32)(LOC1 - 1)];
return Result_52817;
}
N_NIMCALL(TY50547*, Lookupinrecord_55199)(TY50525* N_55201, TY49011* Field_55202) {
TY50547* Result_55243;
NI I_55266;
NI HEX3Atmp_55403;
NI LOC1;
NI Res_55405;
NI I_55341;
NI HEX3Atmp_55406;
NI LOC12;
NI Res_55408;
TY50525* LOC14;
Result_55243 = 0;
Result_55243 = NIM_NIL;
switch ((*N_55201).Kind) {
case ((NU8) 113):
I_55266 = 0;
HEX3Atmp_55403 = 0;
LOC1 = Sonslen_50803(N_55201);
HEX3Atmp_55403 = (NI32)(LOC1 - 1);
Res_55405 = 0;
Res_55405 = 0;
while (1) {
if (!(Res_55405 <= HEX3Atmp_55403)) goto LA2;
I_55266 = Res_55405;
Result_55243 = Lookupinrecord_55199((*N_55201).KindU.S6.Sons->data[I_55266], Field_55202);
if (!!((Result_55243 == NIM_NIL))) goto LA4;
goto BeforeRet;
LA4: ;
Res_55405 += 1;
} LA2: ;
break;
case ((NU8) 114):
if (!!(((*(*N_55201).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA7;
Internalerror_42571((*N_55201).Info, ((NimStringDesc*) &TMP190682));
LA7: ;
Result_55243 = Lookupinrecord_55199((*N_55201).KindU.S6.Sons->data[0], Field_55202);
if (!!((Result_55243 == NIM_NIL))) goto LA10;
goto BeforeRet;
LA10: ;
I_55341 = 0;
HEX3Atmp_55406 = 0;
LOC12 = Sonslen_50803(N_55201);
HEX3Atmp_55406 = (NI32)(LOC12 - 1);
Res_55408 = 0;
Res_55408 = 1;
while (1) {
if (!(Res_55408 <= HEX3Atmp_55406)) goto LA13;
I_55341 = Res_55408;
switch ((*(*N_55201).KindU.S6.Sons->data[I_55341]).Kind) {
case ((NU8) 75):
case ((NU8) 78):
LOC14 = 0;
LOC14 = Lastson_50809((*N_55201).KindU.S6.Sons->data[I_55341]);
Result_55243 = Lookupinrecord_55199(LOC14, Field_55202);
if (!!((Result_55243 == NIM_NIL))) goto LA16;
goto BeforeRet;
LA16: ;
break;
default:
Internalerror_42571((*N_55201).Info, ((NimStringDesc*) &TMP190683));
break;
}
Res_55408 += 1;
} LA13: ;
break;
case ((NU8) 3):
if (!((*(*(*N_55201).KindU.S4.Sym).Name).Sup.Id == (*Field_55202).Sup.Id)) goto LA19;
Result_55243 = (*N_55201).KindU.S4.Sym;
LA19: ;
break;
default:
Internalerror_42571((*N_55201).Info, ((NimStringDesc*) &TMP190684));
break;
}
BeforeRet: ;
return Result_55243;
}
N_NIMCALL(void, Writeln_56742)(FILE* F_56745, NimStringDesc* X_56746) {
Write_3658(F_56745, X_56746);
Write_3658(F_56745, ((NimStringDesc*) &TMP191503));
}
N_NOINLINE(void, astalgoInit)(void) {
}

