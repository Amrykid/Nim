/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct TY106006 TY106006;
typedef struct TY106002 TY106002;
typedef struct TY56548 TY56548;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY94031 TY94031;
typedef struct TY56526 TY56526;
typedef struct TY55005 TY55005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY56552 TY56552;
typedef struct TY55011 TY55011;
typedef struct TY48538 TY48538;
typedef struct TY56530 TY56530;
typedef struct TY56528 TY56528;
typedef struct TY56540 TY56540;
typedef struct TY53008 TY53008;
typedef struct TY56544 TY56544;
typedef struct TY56520 TY56520;
typedef struct TY10802 TY10802;
typedef struct TY10818 TY10818;
typedef struct TY11196 TY11196;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11194 TY11194;
typedef struct TY39221 TY39221;
typedef struct TY94029 TY94029;
typedef struct TY61215 TY61215;
typedef struct TY61213 TY61213;
typedef struct TY61211 TY61211;
typedef struct TY56564 TY56564;
typedef struct TY56562 TY56562;
typedef struct TY56560 TY56560;
typedef struct TY56550 TY56550;
typedef struct TY44013 TY44013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY245[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY245 data;
};
typedef N_NIMCALL_PTR(TY106002*, TY106007) (TY56548* Module_106008, NimStringDesc* Filename_106009);
typedef N_NIMCALL_PTR(TY106002*, TY106012) (TY56548* Module_106013, NimStringDesc* Filename_106014, TY94031* Rd_106015);
typedef N_NIMCALL_PTR(TY56526*, TY106018) (TY106002* P_106019, TY56526* N_106020);
typedef N_NIMCALL_PTR(TY56526*, TY106023) (TY106002* P_106024, TY56526* Toplevelstmt_106025);
struct TY106006 {
TY106007 Open;
TY106012 Opencached;
TY106018 Close;
TY106023 Process;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY55005 {
  TNimObject Sup;
NI Id;
};
struct TY48538 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY56530 {
TNimType* m_type;
NI Counter;
TY56528* Data;
};
struct TY56540 {
NU8 K;
NU8 S;
NU8 Flags;
TY56552* T;
TY53008* R;
NI A;
};
struct TY56548 {
  TY55005 Sup;
NU8 Kind;
NU8 Magic;
TY56552* Typ;
TY55011* Name;
TY48538 Info;
TY56548* Owner;
NU32 Flags;
TY56530 Tab;
TY56526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY56540 Loc;
TY56544* Annex;
};
struct TY55011 {
  TY55005 Sup;
NimStringDesc* S;
TY55011* Next;
NI H;
};
struct TY56526 {
TY56552* Typ;
NimStringDesc* Comment;
TY48538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY56548* Sym;
} S4;
struct {TY55011* Ident;
} S5;
struct {TY56520* Sons;
} S6;
} KindU;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11194 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11196 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
TY11194 Stat;
};
struct TY106002 {
  TNimObject Sup;
};
struct TY61211 {
NI Key;
NI Val;
};
struct TY61215 {
NI Counter;
TY61213* Data;
};
struct TY94029 {
NI Lastidxkey;
NI Lastidxval;
TY61215 Tab;
TY53008* R;
NI Offset;
};
struct TY56560 {
TY55005* Key;
TNimObject* Val;
};
struct TY56564 {
NI Counter;
TY56562* Data;
};
struct TY94031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY39221* Moddeps;
TY39221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY94029 Index;
TY94029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY56564 Syms;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY56552 {
  TY55005 Sup;
NU8 Kind;
TY56550* Sons;
TY56526* N;
NU8 Flags;
NU8 Callconv;
TY56548* Owner;
TY56548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY56540 Loc;
};
struct TY53008 {
  TNimObject Sup;
TY53008* Left;
TY53008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY44013 {
  TNimObject Sup;
TY44013* Prev;
TY44013* Next;
};
struct TY56544 {
  TY44013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY53008* Name;
TY56526* Path;
};
typedef NI TY8814[8];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY56528 {
  TGenericSeq Sup;
  TY56548* data[SEQ_DECL_SIZE];
};
struct TY56520 {
  TGenericSeq Sup;
  TY56526* data[SEQ_DECL_SIZE];
};
struct TY39221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY61213 {
  TGenericSeq Sup;
  TY61211 data[SEQ_DECL_SIZE];
};
struct TY56562 {
  TGenericSeq Sup;
  TY56560 data[SEQ_DECL_SIZE];
};
struct TY56550 {
  TGenericSeq Sup;
  TY56552* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Initpass_106031)(TY106006* P_106034);
N_NIMCALL(TY106002*, Verboseopen_188004)(TY56548* S_188006, NimStringDesc* Filename_188007);
N_NIMCALL(void, Rawmessage_49094)(NU8 Msg_49096, NimStringDesc* Arg_49097);
N_NIMCALL(TY56526*, Verboseprocess_188013)(TY106002* Context_188015, TY56526* N_188016);
N_NIMCALL(void, Internalerror_49212)(NimStringDesc* Errmsg_49214);
N_NIMCALL(void, Message_49198)(TY48538 Info_49200, NU8 Msg_49201, NimStringDesc* Arg_49202);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19403);
N_NIMCALL(TY56526*, Cleanup_188049)(TY106002* C_188051, TY56526* N_188052);
static N_INLINE(NI, Sonslen_56804)(TY56526* N_56806);
N_NIMCALL(TY56548*, Getmodule_61198)(TY56548* S_61200);
N_NIMCALL(NIM_BOOL, Astneeded_106057)(TY56548* S_106059);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
STRING_LITERAL(TMP197955, "logpass: context is not nil", 27);
extern NI Gverbosity_47090;
extern NU32 Gnotes_48564;
extern NI Gid_56693;
extern NU32 Gglobaloptions_47084;
extern TY56526* Emptynode_56858;
extern TY11196 Gch_11214;
N_NIMCALL(TY106002*, Verboseopen_188004)(TY56548* S_188006, NimStringDesc* Filename_188007) {
TY106002* Result_188008;
Result_188008 = 0;
Result_188008 = NIM_NIL;
Result_188008 = NIM_NIL;
if (!(0 < Gverbosity_47090)) goto LA2;
Rawmessage_49094(((NU8) 231), (*(*S_188006).Name).S);
LA2: ;
return Result_188008;
}
N_NIMCALL(TY56526*, Verboseprocess_188013)(TY106002* Context_188015, TY56526* N_188016) {
TY56526* Result_188017;
NimStringDesc* LOC7;
Result_188017 = 0;
Result_188017 = NIM_NIL;
Result_188017 = N_188016;
if (!!((Context_188015 == NIM_NIL))) goto LA2;
Internalerror_49212(((NimStringDesc*) &TMP197955));
LA2: ;
if (!(Gverbosity_47090 == 3)) goto LA5;
Gnotes_48564 |=(1<<((NI32)((((NU8) 231)-208))%(sizeof(NI32)*8)));
LOC7 = 0;
LOC7 = nimIntToStr(Gid_56693);
Message_49198((*N_188016).Info, ((NU8) 231), LOC7);
LA5: ;
return Result_188017;
}
N_NIMCALL(TY106006, Verbosepass_188045)(void) {
TY106006 Result_188047;
memset((void*)&Result_188047, 0, sizeof(Result_188047));
Initpass_106031(&Result_188047);
Result_188047.Open = Verboseopen_188004;
Result_188047.Process = Verboseprocess_188013;
return Result_188047;
}
static N_INLINE(NI, Sonslen_56804)(TY56526* N_56806) {
NI Result_57897;
Result_57897 = 0;
if (!(*N_56806).KindU.S6.Sons == 0) goto LA2;
Result_57897 = 0;
goto LA1;
LA2: ;
Result_57897 = (*N_56806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_57897;
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI64)((NU64)(((NI) (Usr_11614))) - (NU64)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11214.Zct, C_12603);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3221(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3226(&(*C_13222).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(TY56526*, Cleanup_188049)(TY106002* C_188051, TY56526* N_188052) {
TY56526* Result_188053;
NI I_188088;
NI HEX3Atmp_188170;
NI LOC4;
NI Res_188172;
TY56526* LOC6;
TY56548* S_188146;
NIM_BOOL LOC11;
TY56548* LOC12;
NIM_BOOL LOC14;
Result_188053 = 0;
S_188146 = 0;
Result_188053 = NIM_NIL;
Result_188053 = N_188052;
if (!((Gglobaloptions_47084 &(1<<((((NU8) 4))&31)))!=0)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_188052).Kind) {
case ((NU8) 101):
I_188088 = 0;
HEX3Atmp_188170 = 0;
LOC4 = Sonslen_56804(N_188052);
HEX3Atmp_188170 = (NI64)(LOC4 - 1);
Res_188172 = 0;
Res_188172 = 0;
while (1) {
if (!(Res_188172 <= HEX3Atmp_188170)) goto LA5;
I_188088 = Res_188172;
LOC6 = 0;
LOC6 = Cleanup_188049(C_188051, (*N_188052).KindU.S6.Sons->data[I_188088]);
Res_188172 += 1;
} LA5: ;
break;
case ((NU8) 69):
case ((NU8) 70):
if (!((*(*N_188052).KindU.S6.Sons->data[0]).Kind == ((NU8) 3))) goto LA8;
S_188146 = NIM_NIL;
S_188146 = (*(*N_188052).KindU.S6.Sons->data[0]).KindU.S4.Sym;
LOC12 = 0;
LOC12 = Getmodule_61198(S_188146);
LOC11 = !((((*LOC12).Flags &(1<<((((NU8) 28))&31)))!=0));
if (!(LOC11)) goto LA13;
LOC14 = Astneeded_106057(S_188146);
LOC11 = !(LOC14);
LA13: ;
if (!LOC11) goto LA15;
asgnRefNoCycle((void**) &(*(*S_188146).Ast).KindU.S6.Sons->data[4], Emptynode_56858);
LA15: ;
LA8: ;
break;
default:
break;
}
BeforeRet: ;
return Result_188053;
}
N_NIMCALL(TY106006, Cleanuppass_188173)(void) {
TY106006 Result_188175;
memset((void*)&Result_188175, 0, sizeof(Result_188175));
Initpass_106031(&Result_188175);
Result_188175.Process = Cleanup_188049;
Result_188175.Close = Cleanup_188049;
return Result_188175;
}
N_NOINLINE(void, passauxInit)(void) {
}

