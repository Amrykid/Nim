/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

#include <sys/mman.h>
#include <pthread.h>
#include <errno.h>
#include <stdio.h>
#include <signal.h>
#include <dlfcn.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10602 TY10602;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10988 TY10988;
typedef struct TY8674 TY8674;
typedef struct TY8632 TY8632;
typedef struct TY8630 TY8630;
typedef struct TY8622 TY8622;
typedef struct TY8672 TY8672;
typedef struct TY8634 TY8634;
typedef struct TY8611 TY8611;
typedef struct TY8607 TY8607;
typedef struct TY420 TY420;
typedef struct TY418 TY418;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct TY442 TY442;
typedef struct TY452 TY452;
typedef struct TY4177 TY4177;
typedef struct EOverflow EOverflow;
typedef struct TY428 TY428;
typedef struct EAssertionFailed EAssertionFailed;
typedef struct TY448 TY448;
typedef struct TY444 TY444;
typedef struct TY446 TY446;
typedef struct TY456 TY456;
typedef struct TY454 TY454;
typedef struct EDivByZero EDivByZero;
typedef struct EFloatInvalidOp EFloatInvalidOp;
typedef struct TY458 TY458;
typedef struct EFloatOverflow EFloatOverflow;
typedef struct EFloatUnderflow EFloatUnderflow;
typedef struct TY8002 TY8002;
typedef struct TY18472 TY18472;
typedef N_NIMCALL_PTR(void, TY2518) (void);
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY10988 Stat;
};
struct TY8630 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct TY8632 {
  TY8630 Sup;
TY8632* Next;
TY8632* Prev;
TY8622* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
typedef TY8632* TY8681[512];
typedef TY8607* TY8609[1024];
struct TY8611 {
TY8609 Data;
};
struct TY8674 {
TY8672* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
TY8681 Freesmallchunks;
TY8634* Freechunkslist;
TY8611 Chunkstarts;
};
struct TY8634 {
  TY8630 Sup;
TY8634* Next;
TY8634* Prev;
NI Align;
NF64 Data;
};
typedef NI TY8614[8];
struct TY8607 {
TY8607* Next;
NI Key;
TY8614 Bits;
};
struct TY8672 {
NI Size;
NI Acc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY418 {
  TY416 Sup;
};
struct TY420 {
  TY418 Sup;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY8622 {
TY8622* Next;
NI Zerofield;
};
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
typedef N_NIMCALL_PTR(void, TFinalizer) (void* Self_10994);
struct TSafePoint {
TSafePoint* prev;
NI status;
E_Base* exc;
jmp_buf context;
};
struct TY442 {
  TY418 Sup;
};
struct TY452 {
  TY416 Sup;
};
typedef NimStringDesc* TY3902[5];
struct TY428 {
  TY416 Sup;
};
struct EOverflow {
  TY428 Sup;
};
typedef TFrame* TY4456[128];
struct EAssertionFailed {
  TY416 Sup;
};
struct TY448 {
  TY416 Sup;
};
struct TY444 {
  TY416 Sup;
};
struct TY446 {
  TY416 Sup;
};
typedef NIM_CHAR TY18062[60];
struct TY456 {
  TY416 Sup;
};
struct TY454 {
  TY416 Sup;
};
struct EDivByZero {
  TY428 Sup;
};
struct TY458 {
  TY416 Sup;
};
struct EFloatInvalidOp {
  TY458 Sup;
};
struct EFloatOverflow {
  TY458 Sup;
};
struct EFloatUnderflow {
  TY458 Sup;
};
typedef NI8 TY7002[8192];
typedef N_CDECL_PTR(void, TY8004) (void* Closure_8008);
struct TY18472 {
TY10614 Marked;
NI Recdepth;
NI Indent;
};
struct TY8002 {
NI Id;
TY8002* Next;
};
struct TY4177 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Add_2522)(NimStringDesc** X_2525, NCSTRING Y_2526);
static N_INLINE(NF, HEX2F_2602)(NI X_2604, NI Y_2605);
static N_INLINE(void, Initstackbottom_2813)(void);
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624);
N_NIMCALL(void, Initgc_2811)(void);
N_NIMCALL(void, Init_10678)(TY10618* S_10681, NI Cap_10682);
N_NOCONV(void*, Alloc0_1777)(NI Size_1779);
N_NOCONV(void*, Alloc_1774)(NI Size_1776);
N_NIMCALL(void*, Rawalloc_9595)(TY8674* A_9598, NI Requestedsize_9599);
static N_INLINE(NI, Roundup_8656)(NI X_8658, NI V_8659);
N_NIMCALL(TY8632*, Getsmallchunk_9562)(TY8674* A_9565);
N_NIMCALL(TY8634*, Getbigchunk_9492)(TY8674* A_9495, NI Size_9496);
N_NIMCALL(void, Splitchunk_9466)(TY8674* A_9469, TY8634* C_9470, NI Size_9471);
static N_INLINE(void, Updateprevsize_9011)(TY8674* A_9014, TY8634* C_9015, NI Prevsize_9016);
static N_INLINE(NIM_BOOL, Isaccessible_8952)(void* P_8954);
N_NIMCALL(NIM_BOOL, Contains_8811)(TY8611* S_8813, NI Key_8814);
N_NIMCALL(TY8607*, Intsetget_8774)(TY8611* T_8776, NI Key_8777);
static N_INLINE(NI, Pageindex_8881)(void* P_8883);
N_NIMCALL(void, Incl_8831)(TY8611* S_8834, NI Key_8835);
N_NIMCALL(TY8607*, Intsetput_8793)(TY8611* T_8796, NI Key_8797);
N_NIMCALL(void*, Llalloc_8730)(TY8674* A_8733, NI Size_8734);
static N_INLINE(void*, Osallocpages_8213)(NI Size_8215);
N_NIMCALL(void, Raiseoutofmem_8059)(void);
N_NIMCALL(void, Quit_2622)(NimStringDesc* Errormsg_2624);
static N_INLINE(void, rawEcho)(NimStringDesc* X_3894);
N_NIMCALL(void, Write_3458)(FILE* F_3460, NimStringDesc* S_3461);
N_NIMCALL(NI, Writebuffer_3533)(FILE* F_3535, void* Buffer_3536, NI Len_3537);
N_NIMCALL(void*, newObj)(TNimType* Typ_12307, NI Size_12308);
static N_INLINE(void, Lock_11013)(TY10990* Gch_11016);
static N_INLINE(void, Checkcollection_12300)(void);
N_NIMCALL(void, Collectct_11605)(TY10990* Gch_11608);
N_NIMCALL(NI, Getoccupiedmem_1841)(void);
N_NIMCALL(NI, Gettotalmem_1845)(void);
N_NIMCALL(NI, Getfreemem_1843)(void);
N_NOINLINE(NI, Stacksize_15401)(void);
N_CDECL(void, Markstackandregisters_15415)(TY10990* Gch_15418);
static N_INLINE(void, Gcmark_14603)(void* P_14605);
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038);
N_NIMCALL(NIM_BOOL, Isallocatedptr_10201)(TY8674* A_10203, void* P_10204);
static N_INLINE(TY8630*, Pageaddr_8885)(void* P_8887);
static N_INLINE(NIM_BOOL, Chunkunused_9007)(TY8630* C_9009);
static N_INLINE(NIM_BOOL, Issmallchunk_9001)(TY8630* C_9003);
static N_INLINE(void, Add_10658)(TY10618* S_10661, TY10602* C_10662);
N_NOCONV(void, Dealloc_1784)(void* P_1786);
N_NIMCALL(void, Rawdealloc_9864)(TY8674* A_9867, void* P_9868);
N_NIMCALL(void, Freebigchunk_9020)(TY8674* A_9023, TY8634* C_9024);
N_NIMCALL(void, Excl_8838)(TY8611* S_8841, NI Key_8842);
static N_INLINE(NI, Pageindex_8877)(TY8630* C_8879);
N_NIMCALL(void, Freeoschunks_8926)(TY8674* A_8929, void* P_8930, NI Size_8931);
static N_INLINE(void, Osdeallocpages_8217)(void* P_8219, NI Size_8220);
static N_INLINE(void, Deccurrmem_8703)(TY8674* A_8706, NI Bytes_8707);
N_NIMCALL(void, Markthreadstacks_14611)(TY10990* Gch_14614);
N_NIMCALL(void, Collectzct_15601)(TY10990* Gch_15604);
static N_INLINE(NIM_BOOL, Canbecycleroot_11040)(TY10602* C_11042);
N_NIMCALL(void, Excl_10881)(TY10614* S_10884, TY10602* Cell_10885);
N_NIMCALL(TY10610*, Cellsetget_10714)(TY10614* T_10716, NI Key_10717);
static N_INLINE(NI, Nexttry_10709)(NI H_10711, NI Maxhash_10712);
N_NIMCALL(void, Preparedealloc_11625)(TY10602* Cell_11627);
static N_INLINE(void*, Celltousr_11032)(TY10602* Cell_11034);
N_NIMCALL(void, Forallchildren_11612)(TY10602* Cell_11614, NU8 Op_11615);
N_NIMCALL(void, Forallchildrenaux_11620)(void* Dest_11622, TNimType* Mt_11623, NU8 Op_11624);
N_NIMCALL(void, Dooperation_11616)(void* P_11618, NU8 Op_11619);
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029);
N_NIMCALL(void, Forallslotsaux_12201)(void* Dest_12203, TNimNode* N_12205, NU8 Op_12206);
N_NIMCALL(TNimNode*, Selectbranch_7063)(void* Aa_7065, TNimNode* N_7067);
N_NIMCALL(NI, Getdiscriminant_7043)(void* Aa_7045, TNimNode* N_7047);
N_NIMCALL(void, Collectcycles_13803)(TY10990* Gch_13806);
N_NIMCALL(void, Init_10688)(TY10614* S_10691);
N_NIMCALL(NIM_BOOL, Containsorincl_10899)(TY10614* S_10902, TY10602* Cell_10903);
N_NOINLINE(void, Incl_10874)(TY10614* S_10877, TY10602* Cell_10878);
N_NIMCALL(TY10610*, Cellsetput_10795)(TY10614* T_10798, NI Key_10799);
N_NIMCALL(void, Cellsetenlarge_10770)(TY10614* T_10773);
N_NIMCALL(void, Cellsetrawinsert_10733)(TY10614* T_10735, TY10610** Data_10736, TY10610* Desc_10737);
N_NIMCALL(NIM_BOOL, Contains_10854)(TY10614* S_10856, TY10602* Cell_10857);
N_NIMCALL(void, Deinit_10692)(TY10614* S_10695);
N_NIMCALL(void, Unmarkstackandregisters_16201)(TY10990* Gch_16204);
static N_INLINE(void, Decref_11664)(TY10602* C_11666);
static N_INLINE(NI, Atomicdec_2806)(NI* Memloc_2809, NI X_2810);
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660);
static N_INLINE(void, Rtladdcycleroot_11652)(TY10602* C_11654);
static N_INLINE(void, Unlock_11019)(TY10990* Gch_11022);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819);
static N_INLINE(NI, Atomicinc_2801)(NI* Memloc_2804, NI X_2805);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17287);
N_NIMCALL(void, raiseException)(E_Base* E_5004, NCSTRING Ename_5005);
N_NIMCALL(void, Gcdisable_2463)(void);
static N_INLINE(void, pushCurrentException)(E_Base* E_4441);
static N_INLINE(void, asgnRef)(void** Dest_11814, void* Src_11815);
static N_INLINE(void, Incref_11802)(TY10602* C_11804);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17425, NI Newlen_17426);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17382, NI Addlen_17383);
static N_INLINE(NI, Resize_17201)(NI Old_17203);
N_NIMCALL(void*, Growobj_12807)(void* Old_12809, NI Newsize_12810);
N_NIMCALL(void, Rawwritestacktrace_4643)(NimStringDesc** S_4646);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393);
N_NIMCALL(void, Auxwritestacktrace_4460)(TFrame* F_4462, NimStringDesc** S_4464);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_18003);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1349);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_17304);
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_17299, NI Len_17300);
N_NIMCALL(void, Writetostderr_4232)(NCSTRING Msg_4234);
N_NIMCALL(void, Write_3470)(FILE* F_3472, NCSTRING C_3473);
static N_INLINE(void, Quitordebug_4801)(void);
N_NIMCALL(void, Gcenable_2465)(void);
static N_INLINE(void, rawEchoNL)(void);
static N_INLINE(void, Inccurrmem_8686)(TY8674* A_8689, NI Bytes_8690);
N_NIMCALL(TY8634*, Requestoschunks_8892)(TY8674* A_8895, NI Size_8896);
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324);
N_NIMCALL(void, Rawreadline_3589)(FILE* F_3591, NimStringDesc** Result_3593);
N_NIMCALL(NimStringDesc*, Readline_3479)(FILE* F_3481);
N_NIMCALL(void, Write_3454)(FILE* F_3456, NI I_3457);
N_NIMCALL(void, Write_3462)(FILE* F_3464, NIM_BOOL B_3465);
N_NIMCALL(void, Write_3450)(FILE* F_3452, NF R_3453);
N_NIMCALL(void, Write_3466)(FILE* F_3468, NIM_CHAR C_3469);
N_NIMCALL(void, Write_3474)(FILE* F_3476, NimStringDesc** A_3478, NI A_3478Len0);
N_NIMCALL(NimStringDesc*, Readfile_3447)(NimStringDesc* Filename_3449);
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4435);
N_NIMCALL(NIM_BOOL, Open_3417)(FILE** F_3420, NimStringDesc* Filename_3421, NU8 Mode_3422, NI Bufsize_3423);
N_NIMCALL(NI64, Getfilesize_3495)(FILE* F_3497);
N_NIMCALL(NI64, Getfilepos_3542)(FILE* F_3544);
N_NIMCALL(void, Setfilepos_3538)(FILE* F_3540, NI64 Pos_3541);
N_NIMCALL(NI, Readbuffer_3514)(FILE* F_3516, void* Buffer_3517, NI Len_3518);
static N_INLINE(void, popSafePoint)(void);
static N_INLINE(E_Base*, getCurrentException)(void);
static N_INLINE(void, popCurrentException)(void);
N_NIMCALL(void, reraiseException)(void);
N_NIMCALL(NIM_BOOL, Endoffile_3438)(FILE* F_3440);
N_NIMCALL(NIM_BOOL, Reopen_3430)(FILE* F_3432, NimStringDesc* Filename_3433, NU8 Mode_3434);
N_NIMCALL(NIM_BOOL, Open_3424)(FILE** F_3427, int Filehandle_3428, NU8 Mode_3429);
N_NIMCALL(NI, Readbytes_3498)(FILE* F_3500, NI8* A_3503, NI A_3503Len0, NI Start_3504, NI Len_3505);
N_NIMCALL(NI, Readchars_3506)(FILE* F_3508, NIM_CHAR* A_3511, NI A_3511Len0, NI Start_3512, NI Len_3513);
N_NIMCALL(NI, Writebytes_3519)(FILE* F_3521, NI8* A_3523, NI A_3523Len0, NI Start_3524, NI Len_3525);
N_NIMCALL(NI, Writechars_3526)(FILE* F_3528, NIM_CHAR* A_3530, NI A_3530Len0, NI Start_3531, NI Len_3532);
N_NIMCALL(TY4177*, Cstringarraytoseq_4173)(NCSTRING* A_4175, NI Len_4176);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12804, NI Len_12805);
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(NI, mulInt)(NI A_6603, NI B_6604);
N_NIMCALL(TY4177*, Cstringarraytoseq_4214)(NCSTRING* A_4216);
N_NIMCALL(void, internalAssert)(NCSTRING File_5054, NI Line_5055, NIM_BOOL Cond_5056);
N_NIMCALL(void, Writestacktrace_5071)(void);
N_NOCONV(void, signalHandler)(int Sig_5078);
N_NIMCALL(void, registerSignalHandler)(void);
N_NOINLINE(void, raiseRangeError)(NI64 Val_5218);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_18067);
N_NOINLINE(void, raiseIndexError)(void);
N_NOINLINE(void, raiseFieldError)(NimStringDesc* F_5275);
static N_INLINE(NI, chckIndx)(NI I_4405, NI A_4406, NI B_4407);
static N_INLINE(NI, chckRange)(NI I_4410, NI A_4411, NI B_4412);
N_NIMCALL(NI64, chckRange64)(NI64 I_5323, NI64 A_5324, NI64 B_5325);
static N_INLINE(NF, chckRangeF)(NF X_4415, NF A_4416, NF B_4417);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_18060);
static N_INLINE(void, chckNil)(void* P_4420);
N_NIMCALL(void, chckObj)(TNimType* Obj_5375, TNimType* Subclass_5376);
static N_INLINE(void, chckObjAsgn)(TNimType* A_5426, TNimType* B_5427);
N_NIMCALL(NIM_BOOL, isObj)(TNimType* Obj_5456, TNimType* Subclass_5457);
N_NOINLINE(void, raiseDivByZero)(void);
static N_INLINE(NI64, addInt64)(NI64 A_5529, NI64 B_5530);
static N_INLINE(NI64, subInt64)(NI64 A_5538, NI64 B_5539);
static N_INLINE(NI64, negInt64)(NI64 A_5547);
static N_INLINE(NI64, absInt64)(NI64 A_5553);
static N_INLINE(NI64, divInt64)(NI64 A_5561, NI64 B_5562);
static N_INLINE(NI64, modInt64)(NI64 A_5572, NI64 B_5573);
N_NIMCALL(NI64, mulInt64)(NI64 A_5579, NI64 B_5580);
static N_INLINE(NI, absInt)(NI A_5586);
static N_INLINE(NI, subInt)(NI A_5803, NI B_5804);
static N_INLINE(NI, negInt)(NI A_6003);
static N_INLINE(NI, divInt)(NI A_6203, NI B_6204);
static N_INLINE(NI, modInt)(NI A_6403, NI B_6404);
N_NOINLINE(void, Raisefloatinvalidop_6801)(void);
static N_INLINE(void, nanCheck)(NF64 X_6822);
N_NOINLINE(void, Raisefloatoverflow_6823)(NF64 X_6825);
static N_INLINE(void, infCheck)(NF64 X_6862);
N_NIMCALL(void, Rawwrite_6864)(FILE* F_6866, NimStringDesc* S_6867);
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621);
N_NOINLINE(void, Procaddrerror_6873)(NCSTRING Name_6875);
N_NIMCALL(void, nimUnloadLibrary)(void* Lib_1614);
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611);
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618);
N_NIMCALL(NI, countBits32)(int N_7006);
N_NIMCALL(NI, countBits64)(NI64 N_7011);
N_NIMCALL(NI, cardSet)(TY7002 S_7015, NI Len_7016);
N_NIMCALL(void, Createthread_8010)(TY8002* T_8013, TY8004 Fn_8014);
N_NIMCALL(void, Destroythread_8015)(TY8002* T_8018);
N_NIMCALL(NI, Getmaxmem_8722)(TY8674* A_8725);
N_NIMCALL(NIM_BOOL, Containsorincl_8856)(TY8611* S_8859, NI Key_8860);
N_NIMCALL(void, Writefreelist_8967)(TY8674* A_8969);
static N_INLINE(NI, Getcellsize_9590)(void* P_9592);
N_NIMCALL(NI, Ptrsize_10233)(void* P_10235);
N_NOCONV(void*, Realloc_1780)(void* P_1782, NI Newsize_1783);
N_NIMCALL(NI, Countfreemem_10245)(void);
static N_INLINE(NIM_BOOL, Contains_10636)(TY10618* S_10638, TY10602* C_10639);
N_NIMCALL(void, Deinit_10683)(TY10618* S_10686);
N_NIMCALL(TNimType*, extGetCellType)(void* C_11057);
N_NIMCALL(NI, getRefcount)(void* P_11061);
static N_INLINE(void, nimGCref)(void* P_11808);
static N_INLINE(void, nimGCunref)(void* P_11811);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11826, void* Src_11827);
N_NOINLINE(NIM_BOOL, Isonstack_11609)(void* P_11611);
N_NIMCALL(void, Gcsetstrategy_2475)(NU8 Strategy_2477);
N_NIMCALL(void, Gcenablemarkandsweep_2478)(void);
N_NIMCALL(void, Gcdisablemarkandsweep_2480)(void);
N_NIMCALL(void, Gcfullcollect_2467)(void);
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2482)(void);
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_17211, NimStringDesc* B_17212);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_17247, NimStringDesc* B_17248);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_17295);
N_NIMCALL(NI, hashString)(NimStringDesc* S_17323);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_17343, NI Start_17344, NI Last_17345);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_17358, NI Start_17359);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17435, NI Elemsize_17436);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17603, NI Elemsize_17604, NI Newlen_17605);
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL X_18124);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_18128);
N_NIMCALL(NI, binaryStrSearch)(NimStringDesc** X_18133, NI X_18133Len0, NimStringDesc* Y_18134);
N_NIMCALL(void, Genericassignaux_18168)(void* Dest_18170, void* Src_18171, TNimNode* N_18173);
N_NIMCALL(void, genericAssign)(void* Dest_18165, void* Src_18166, TNimType* Mt_18167);
N_NIMCALL(void, genericSeqAssign)(void* Dest_18239, void* Src_18240, TNimType* Mt_18241);
N_NIMCALL(void, genericAssignOpenArray)(void* Dest_18246, void* Src_18247, NI Len_18248, TNimType* Mt_18249);
N_NIMCALL(void, Objectinitaux_18264)(void* Dest_18266, TNimNode* N_18268);
N_NIMCALL(void, objectInit)(void* Dest_18262, TNimType* Typ_18263);
N_NIMCALL(NimStringDesc*, reprInt)(NI64 X_18307);
N_NIMCALL(NimStringDesc*, reprFloat)(NF X_18313);
N_NIMCALL(NimStringDesc*, reprPointer)(void* X_18317);
N_NIMCALL(void, Reprstraux_18322)(NimStringDesc** Result_18325, NimStringDesc* S_18326);
N_NIMCALL(NimStringDesc*, reprStr)(NimStringDesc* S_18353);
N_NIMCALL(NimStringDesc*, reprBool)(NIM_BOOL X_18358);
N_NIMCALL(NimStringDesc*, reprChar)(NIM_CHAR X_18362);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_18379, TNimType* Typ_18380);
N_NIMCALL(void, Addsetelem_18396)(NimStringDesc** Result_18399, NI Elem_18400, TNimType* Typ_18401);
N_NIMCALL(void, Reprsetaux_18402)(NimStringDesc** Result_18405, void* P_18406, TNimType* Typ_18407);
N_NIMCALL(NimStringDesc*, reprSet)(void* P_18467, TNimType* Typ_18468);
N_NIMCALL(void, Initreprclosure_18476)(TY18472* Cl_18479);
N_NIMCALL(void, Deinitreprclosure_18481)(TY18472* Cl_18484);
N_NIMCALL(void, Reprbreak_18486)(NimStringDesc** Result_18489, TY18472* Cl_18490);
N_NIMCALL(void, Reprarray_18507)(NimStringDesc** Result_18510, void* P_18511, TNimType* Typ_18512, TY18472* Cl_18514);
N_NIMCALL(void, Repraux_18499)(NimStringDesc** Result_18502, void* P_18503, TNimType* Typ_18504, TY18472* Cl_18506);
N_NIMCALL(void, Reprrecord_18584)(NimStringDesc** Result_18587, void* P_18588, TNimType* Typ_18589, TY18472* Cl_18591);
N_NIMCALL(void, Reprrecordaux_18553)(NimStringDesc** Result_18556, void* P_18557, TNimNode* N_18559, TY18472* Cl_18561);
N_NIMCALL(void, Reprref_18592)(NimStringDesc** Result_18595, void* P_18596, TNimType* Typ_18597, TY18472* Cl_18599);
N_NIMCALL(void, Reprsequence_18526)(NimStringDesc** Result_18529, void* P_18530, TNimType* Typ_18531, TY18472* Cl_18533);
N_NIMCALL(NimStringDesc*, reprOpenArray)(void* P_19003, NI Length_19004, TNimType* Elemtyp_19005);
N_NIMCALL(NimStringDesc*, reprAny)(void* P_7041, TNimType* Typ_7042);
static N_INLINE(NimStringDesc*, Getcurrentexceptionmsg_19205)(void);
N_NIMCALL(void, Listremove_9046)(TY8634** Head_9050, TY8634* C_9051);
N_NIMCALL(NIM_BOOL, Contains_9055)(TY8634* List_9058, TY8634* X_9059);
N_NIMCALL(void, Listadd_9407)(TY8634** Head_9411, TY8634* C_9412);
N_NIMCALL(void, Listadd_9626)(TY8632** Head_9630, TY8632* C_9631);
N_NIMCALL(NIM_BOOL, Contains_9635)(TY8632* List_9638, TY8632* X_9639);
N_NIMCALL(void, Listremove_9768)(TY8632** Head_9772, TY8632* C_9773);
STRING_LITERAL(TMP20108, "cannot write string to file", 27);
STRING_LITERAL(TMP20109, "No stack traceback available", 28);
STRING_LITERAL(TMP20110, "Traceback (most recent call last)", 33);
STRING_LITERAL(TMP20111, "(", 1);
STRING_LITERAL(TMP20112, " calls omitted) ...", 19);
STRING_LITERAL(TMP20113, "Error: unhandled exception: ", 28);
STRING_LITERAL(TMP20114, "Error: unhandled exception", 26);
STRING_LITERAL(TMP20115, " [", 2);
STRING_LITERAL(TMP20116, "]\012", 2);
STRING_LITERAL(TMP20117, "\012", 1);
STRING_LITERAL(TMP20118, "out of memory; cannot even throw an exception", 45);
STRING_LITERAL(TMP20119, "out of memory", 13);
STRING_LITERAL(TMP20120, "", 0);
STRING_LITERAL(TMP20121, "true", 4);
STRING_LITERAL(TMP20122, "false", 5);
STRING_LITERAL(TMP20124, "cannot retrieve file position", 29);
STRING_LITERAL(TMP20125, "cannot set file position", 24);
STRING_LITERAL(TMP20126, "no exception to reraise", 23);
STRING_LITERAL(TMP20127, "rb", 2);
STRING_LITERAL(TMP20128, "wb", 2);
STRING_LITERAL(TMP20129, "w+b", 3);
STRING_LITERAL(TMP20130, "r+b", 3);
STRING_LITERAL(TMP20131, "ab", 2);
NIM_CONST TY3902 Formatopen_3901 = {((NimStringDesc*) &TMP20127),
((NimStringDesc*) &TMP20128),
((NimStringDesc*) &TMP20129),
((NimStringDesc*) &TMP20130),
((NimStringDesc*) &TMP20131)}
;
STRING_LITERAL(TMP20132, "over- or underflow", 18);
STRING_LITERAL(TMP20133, "[Assertion failure] file: ", 26);
STRING_LITERAL(TMP20134, " line: ", 7);
STRING_LITERAL(TMP20135, "SIGINT: Interrupted by Ctrl-C.\012", 31);
STRING_LITERAL(TMP20136, "SIGSEGV: Illegal storage access. (Attempt to read from nil?)\012", 61);
STRING_LITERAL(TMP20137, "SIGABRT: Abnormal termination.\012", 31);
STRING_LITERAL(TMP20138, "SIGFPE: Arithmetic error.\012", 26);
STRING_LITERAL(TMP20139, "SIGILL: Illegal operation.\012", 27);
STRING_LITERAL(TMP20140, "SIGBUS: Illegal storage access. (Attempt to read from nil?)\012", 60);
STRING_LITERAL(TMP20141, "unknown signal\012", 15);
STRING_LITERAL(TMP20142, "value ", 6);
STRING_LITERAL(TMP20143, " out of range", 13);
STRING_LITERAL(TMP20144, "index out of bounds", 19);
STRING_LITERAL(TMP20145, " is not accessible", 18);
STRING_LITERAL(TMP20146, "invalid object conversion", 25);
STRING_LITERAL(TMP20147, "invalid object assignment", 25);
STRING_LITERAL(TMP20148, "divison by zero", 15);
STRING_LITERAL(TMP20149, "FPU operation caused a NaN result", 33);
STRING_LITERAL(TMP20150, "FPU operation caused an overflow", 32);
STRING_LITERAL(TMP20151, "FPU operations caused an underflow", 34);
STRING_LITERAL(TMP20152, "could not load: ", 16);
STRING_LITERAL(TMP20153, "could not import: ", 18);
STRING_LITERAL(TMP20154, "[GC] total memory: ", 19);
STRING_LITERAL(TMP20155, "\012[GC] occupied memory: ", 23);
STRING_LITERAL(TMP20156, "\012[GC] stack scans: ", 19);
STRING_LITERAL(TMP20157, "\012[GC] stack cells: ", 19);
STRING_LITERAL(TMP20158, "\012[GC] cycle collections: ", 25);
STRING_LITERAL(TMP20159, "\012[GC] max threshold: ", 21);
STRING_LITERAL(TMP20160, "\012[GC] zct capacity: ", 20);
STRING_LITERAL(TMP20161, "\012[GC] max cycle table size: ", 28);
STRING_LITERAL(TMP20162, "\012[GC] max stack size: ", 22);
STRING_LITERAL(TMP20163, "nil", 3);
STRING_LITERAL(TMP20164, "\"", 1);
STRING_LITERAL(TMP20165, "\\\"", 2);
STRING_LITERAL(TMP20166, "\\\\", 2);
STRING_LITERAL(TMP20167, "\\10\"\012\"", 6);
STRING_LITERAL(TMP20168, "\\", 1);
STRING_LITERAL(TMP20169, "\'", 1);
STRING_LITERAL(TMP20170, " (invalid data!)", 16);
STRING_LITERAL(TMP20171, "{", 1);
STRING_LITERAL(TMP20172, ", ", 2);
STRING_LITERAL(TMP20173, "}", 1);
STRING_LITERAL(TMP20174, "[", 1);
STRING_LITERAL(TMP20175, "...", 3);
STRING_LITERAL(TMP20176, " = ", 3);
STRING_LITERAL(TMP20177, ",\012", 2);
STRING_LITERAL(TMP20178, "]", 1);
STRING_LITERAL(TMP20179, "ref ", 4);
STRING_LITERAL(TMP20180, " --> ", 5);
STRING_LITERAL(TMP20181, "(invalid data!)", 15);
TY2518 Dbglinehook_2521;
TNimType Strdesc_2817;
extern TNimType* NTI4062; /* ref EIO */
extern TNimType* NTI420; /* EIO */
extern TNimType* NTI8062; /* ref EOutOfMemory */
extern TNimType* NTI442; /* EOutOfMemory */
extern TNimType* NTI5033; /* ref ENoExceptionToReraise */
extern TNimType* NTI452; /* ENoExceptionToReraise */
extern TNimType* NTI4177; /* seq[string] */
extern TNimType* NTI5491; /* ref EOverflow */
extern TNimType* NTI432; /* EOverflow */
TSafePoint* excHandler;
E_Base* Currexception_4432;
NimStringDesc* Buf_4453;
NimStringDesc* Assertbuf_4454;
TFrame* framePtr;
TY4456 Tempframes_4458;
NimStringDesc* Stacktracenewline_4459;
EAssertionFailed* Gassertionfailed_5051;
NIM_BOOL Dbgaborting_5075;
extern TNimType* NTI5050; /* ref EAssertionFailed */
extern TNimType* NTI436; /* EAssertionFailed */
extern TNimType* NTI5219; /* ref EOutOfRange */
extern TNimType* NTI448; /* EOutOfRange */
extern TNimType* NTI5256; /* ref EInvalidIndex */
extern TNimType* NTI444; /* EInvalidIndex */
extern TNimType* NTI5276; /* ref EInvalidField */
extern TNimType* NTI446; /* EInvalidField */
extern TNimType* NTI5407; /* ref EInvalidObjectConversion */
extern TNimType* NTI456; /* EInvalidObjectConversion */
extern TNimType* NTI5437; /* ref EInvalidObjectAssignment */
extern TNimType* NTI454; /* EInvalidObjectAssignment */
extern TNimType* NTI5510; /* ref EDivByZero */
extern TNimType* NTI430; /* EDivByZero */
extern TNimType* NTI6803; /* ref EFloatInvalidOp */
extern TNimType* NTI460; /* EFloatInvalidOp */
extern TNimType* NTI6826; /* ref EFloatOverflow */
extern TNimType* NTI464; /* EFloatOverflow */
extern TNimType* NTI6843; /* ref EFloatUnderflow */
extern TNimType* NTI466; /* EFloatUnderflow */
TY442* Goutofmem_8058;
TY8674 Allocator_8729;
NI Lastsize_8891;
void* Stackbottom_11009;
TY10990 Gch_11010;
NI Cyclethreshold_11011;
NI Recgclock_11012;
N_NIMCALL(void, Add_2522)(NimStringDesc** X_2525, NCSTRING Y_2526) {
NI I_2527;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "add";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
I_2527 = 0;
F.line = 1248;F.filename = "system.nim";
I_2527 = 0;
F.line = 1249;F.filename = "system.nim";
while (1) {
if (!!(((NU8)(Y_2526[I_2527]) == (NU8)(0)))) goto LA1;
F.line = 1250;F.filename = "system.nim";
(*X_2525) = addChar((*X_2525), Y_2526[I_2527]);
F.line = 1251;F.filename = "system.nim";
I_2527 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(NF, HEX2F_2602)(NI X_2604, NI Y_2605) {
NF Result_2606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "/";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_2606 = 0;
F.line = 1266;F.filename = "system.nim";
Result_2606 = (((double) (X_2604)) / ((double) (Y_2605)));
framePtr = framePtr->prev;
return Result_2606;
}
N_NOINLINE(void, setStackBottom)(void* Thestackbottom_1624) {
NI A_15004;
NI B_15005;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setStackBottom";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 501;F.filename = "gc.nim";
if (!(Stackbottom_11009 == NIM_NIL)) goto LA2;
F.line = 501;F.filename = "gc.nim";
Stackbottom_11009 = Thestackbottom_1624;
goto LA1;
LA2: ;
A_15004 = 0;
F.line = 503;F.filename = "gc.nim";
A_15004 = ((NI) (Thestackbottom_1624));
B_15005 = 0;
F.line = 504;F.filename = "gc.nim";
B_15005 = ((NI) (Stackbottom_11009));
F.line = 508;F.filename = "gc.nim";
Stackbottom_11009 = ((void*) (((A_15004 >= B_15005) ? A_15004 : B_15005)));
LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Initstackbottom_2813)(void) {
void* volatile Locals_2815;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initStackBottom";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Locals_2815 = 0;
F.line = 1319;F.filename = "system.nim";
setStackBottom(((void*) (&Locals_2815)));
framePtr = framePtr->prev;
}
static N_INLINE(NI, Roundup_8656)(NI X_8658, NI V_8659) {
NI Result_8660;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "roundup";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8660 = 0;
F.line = 130;F.filename = "alloc.nim";
Result_8660 = (NI64)((NI64)(X_8658 + (NI64)(V_8659 - 1)) & (NI64)((NU64) ~((NI64)(V_8659 - 1))));
F.line = 131;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_8660;
}
N_NIMCALL(TY8607*, Intsetget_8774)(TY8611* T_8776, NI Key_8777) {
TY8607* Result_8778;
TY8607* It_8779;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IntSetGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8778 = 0;
It_8779 = 0;
F.line = 189;F.filename = "alloc.nim";
It_8779 = (*T_8776).Data[((NI64)(Key_8777 & 1023))-0];
F.line = 190;F.filename = "alloc.nim";
while (1) {
if (!!((It_8779 == NIM_NIL))) goto LA1;
F.line = 191;F.filename = "alloc.nim";
if (!((*It_8779).Key == Key_8777)) goto LA3;
F.line = 191;F.filename = "alloc.nim";
F.line = 191;F.filename = "alloc.nim";
Result_8778 = It_8779;
goto BeforeRet;
LA3: ;
F.line = 192;F.filename = "alloc.nim";
It_8779 = (*It_8779).Next;
} LA1: ;
F.line = 193;F.filename = "alloc.nim";
Result_8778 = NIM_NIL;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_8778;
}
N_NIMCALL(NIM_BOOL, Contains_8811)(TY8611* S_8813, NI Key_8814) {
NIM_BOOL Result_8815;
TY8607* T_8816;
NI U_8828;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8815 = 0;
T_8816 = 0;
F.line = 204;F.filename = "alloc.nim";
T_8816 = Intsetget_8774(S_8813, (NI64)((NU64)(Key_8814) >> (NU64)(9)));
F.line = 205;F.filename = "alloc.nim";
if (!!((T_8816 == NIM_NIL))) goto LA2;
U_8828 = 0;
F.line = 206;F.filename = "alloc.nim";
U_8828 = (NI64)(Key_8814 & 511);
F.line = 207;F.filename = "alloc.nim";
Result_8815 = !(((NI64)((*T_8816).Bits[((NI64)((NU64)(U_8828) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_8828 & 63)))) == 0));
goto LA1;
LA2: ;
F.line = 209;F.filename = "alloc.nim";
Result_8815 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_8815;
}
static N_INLINE(NI, Pageindex_8881)(void* P_8883) {
NI Result_8884;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageIndex";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8884 = 0;
F.line = 240;F.filename = "alloc.nim";
Result_8884 = (NI64)((NU64)(((NI) (P_8883))) >> (NU64)(12));
framePtr = framePtr->prev;
return Result_8884;
}
static N_INLINE(NIM_BOOL, Isaccessible_8952)(void* P_8954) {
NIM_BOOL Result_8955;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isAccessible";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8955 = 0;
F.line = 291;F.filename = "alloc.nim";
LOC1 = Pageindex_8881(P_8954);
Result_8955 = Contains_8811(&Allocator_8729.Chunkstarts, LOC1);
framePtr = framePtr->prev;
return Result_8955;
}
static N_INLINE(void, Updateprevsize_9011)(TY8674* A_9014, TY8634* C_9015, NI Prevsize_9016) {
TY8630* Ri_9017;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "updatePrevSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Ri_9017 = 0;
F.line = 339;F.filename = "alloc.nim";
Ri_9017 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9015))) + (NU64)((*C_9015).Sup.Size))));
F.line = 340;F.filename = "alloc.nim";
F.line = 341;F.filename = "alloc.nim";
LOC2 = Isaccessible_8952(((void*) (Ri_9017)));
if (!LOC2) goto LA3;
F.line = 342;F.filename = "alloc.nim";
(*Ri_9017).Prevsize = Prevsize_9016;
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Writebuffer_3533)(FILE* F_3535, void* Buffer_3536, NI Len_3537) {
NI Result_4051;
Result_4051 = 0;
Result_4051 = fwrite(Buffer_3536, 1, Len_3537, F_3535);
return Result_4051;
}
static N_INLINE(void, Lock_11013)(TY10990* Gch_11016) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "lock";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 80;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 81;F.filename = "gc.nim";
pthread_mutex_lock(&(*Gch_11016).Zctlock);
F.line = 82;F.filename = "gc.nim";
pthread_mutex_lock(&(*Gch_11016).Cyclerootslock);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Gettotalmem_1845)(void) {
NI Result_10277;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getTotalMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10277 = 0;
F.line = 575;F.filename = "alloc.nim";
F.line = 575;F.filename = "alloc.nim";
Result_10277 = Allocator_8729.Currmem;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10277;
}
N_NIMCALL(NI, Getfreemem_1843)(void) {
NI Result_10274;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getFreeMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10274 = 0;
F.line = 572;F.filename = "alloc.nim";
Result_10274 = Allocator_8729.Freemem;
framePtr = framePtr->prev;
return Result_10274;
}
N_NIMCALL(NI, Getoccupiedmem_1841)(void) {
NI Result_10280;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getOccupiedMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10280 = 0;
F.line = 576;F.filename = "alloc.nim";
F.line = 576;F.filename = "alloc.nim";
LOC1 = Gettotalmem_1845();
LOC2 = Getfreemem_1843();
Result_10280 = (NI64)(LOC1 - LOC2);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10280;
}
N_NOINLINE(NI, Stacksize_15401)(void) {
NI Result_15403;
void* volatile Stacktop_15404;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "stackSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_15403 = 0;
Stacktop_15404 = 0;
F.line = 512;F.filename = "gc.nim";
Result_15403 = (NI64)abs((NI64)(((NI) (&Stacktop_15404)) - ((NI) (Stackbottom_11009))));
framePtr = framePtr->prev;
return Result_15403;
}
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038) {
TY10602* Result_11039;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11039 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11039 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11038))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11039;
}
static N_INLINE(TY8630*, Pageaddr_8885)(void* P_8887) {
TY8630* Result_8888;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageAddr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8888 = 0;
F.line = 243;F.filename = "alloc.nim";
Result_8888 = ((TY8630*) ((NI64)(((NI) (P_8887)) & -4096)));
F.line = 244;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_8888;
}
static N_INLINE(NIM_BOOL, Chunkunused_9007)(TY8630* C_9009) {
NIM_BOOL Result_9010;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "chunkUnused";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9010 = 0;
F.line = 335;F.filename = "alloc.nim";
Result_9010 = !((*C_9009).Used);
framePtr = framePtr->prev;
return Result_9010;
}
static N_INLINE(NIM_BOOL, Issmallchunk_9001)(TY8630* C_9003) {
NIM_BOOL Result_9004;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isSmallChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9004 = 0;
F.line = 331;F.filename = "alloc.nim";
F.line = 331;F.filename = "alloc.nim";
Result_9004 = ((*C_9003).Size <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9004;
}
N_NIMCALL(NIM_BOOL, Isallocatedptr_10201)(TY8674* A_10203, void* P_10204) {
NIM_BOOL Result_10205;
NIM_BOOL LOC2;
TY8630* C_10206;
NIM_BOOL LOC6;
NIM_BOOL LOC10;
TY8632* C_10207;
NI Offset_10208;
NIM_BOOL LOC13;
NIM_BOOL LOC14;
TY8634* C_10212;
NIM_BOOL LOC17;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "isAllocatedPtr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10205 = 0;
F.line = 519;F.filename = "alloc.nim";
LOC2 = Isaccessible_8952(P_10204);
if (!LOC2) goto LA3;
C_10206 = 0;
F.line = 520;F.filename = "alloc.nim";
C_10206 = Pageaddr_8885(P_10204);
F.line = 521;F.filename = "alloc.nim";
LOC6 = Chunkunused_9007(C_10206);
if (!!(LOC6)) goto LA7;
F.line = 522;F.filename = "alloc.nim";
LOC10 = Issmallchunk_9001(C_10206);
if (!LOC10) goto LA11;
C_10207 = 0;
F.line = 523;F.filename = "alloc.nim";
C_10207 = ((TY8632*) (C_10206));
Offset_10208 = 0;
F.line = 524;F.filename = "alloc.nim";
Offset_10208 = (NI64)((NU64)((NI64)(((NI) (P_10204)) & 4095)) - (NU64)((NI64)(((NI)sizeof(TY8632)) - 8)));
F.line = 526;F.filename = "alloc.nim";
LOC14 = ((NU64)(Offset_10208) < (NU64)((*C_10207).Acc));
if (!(LOC14)) goto LA15;
LOC14 = ((NI64)((NU64)(Offset_10208) % (NU64)((*C_10207).Sup.Size)) == 0);
LA15: ;
LOC13 = LOC14;
if (!(LOC13)) goto LA16;
LOC13 = ((NU64)(1) < (NU64)((*((TY8622*) (P_10204))).Zerofield));
LA16: ;
Result_10205 = LOC13;
goto LA9;
LA11: ;
C_10212 = 0;
F.line = 529;F.filename = "alloc.nim";
C_10212 = ((TY8634*) (C_10206));
F.line = 530;F.filename = "alloc.nim";
LOC17 = (P_10204 == ((void*) (&(*C_10212).Data)));
if (!(LOC17)) goto LA18;
LOC17 = ((NU64)(1) < (NU64)((*((TY8622*) (P_10204))).Zerofield));
LA18: ;
Result_10205 = LOC17;
LA9: ;
LA7: ;
LA3: ;
framePtr = framePtr->prev;
return Result_10205;
}
N_NIMCALL(void, Excl_8838)(TY8611* S_8841, NI Key_8842) {
TY8607* T_8843;
NI U_8855;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Excl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
T_8843 = 0;
F.line = 217;F.filename = "alloc.nim";
T_8843 = Intsetget_8774(&(*S_8841), (NI64)((NU64)(Key_8842) >> (NU64)(9)));
F.line = 218;F.filename = "alloc.nim";
if (!!((T_8843 == NIM_NIL))) goto LA2;
U_8855 = 0;
F.line = 219;F.filename = "alloc.nim";
U_8855 = (NI64)(Key_8842 & 511);
F.line = 220;F.filename = "alloc.nim";
(*T_8843).Bits[((NI64)((NU64)(U_8855) >> (NU64)(6)))-0] = (NI64)((*T_8843).Bits[((NI64)((NU64)(U_8855) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_8855 & 63))))));
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(NI, Pageindex_8877)(TY8630* C_8879) {
NI Result_8880;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "pageIndex";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8880 = 0;
F.line = 237;F.filename = "alloc.nim";
Result_8880 = (NI64)((NU64)(((NI) (C_8879))) >> (NU64)(12));
framePtr = framePtr->prev;
return Result_8880;
}
static N_INLINE(void, Osdeallocpages_8217)(void* P_8219, NI Size_8220) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "osDeallocPages";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 44;F.filename = "alloc.nim";
munmap(P_8219, Size_8220);
framePtr = framePtr->prev;
}
static N_INLINE(void, Deccurrmem_8703)(TY8674* A_8706, NI Bytes_8707) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "decCurrMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 162;F.filename = "alloc.nim";
(*A_8706).Maxmem = (((*A_8706).Maxmem >= (*A_8706).Currmem) ? (*A_8706).Maxmem : (*A_8706).Currmem);
F.line = 163;F.filename = "alloc.nim";
(*A_8706).Currmem -= Bytes_8707;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Freeoschunks_8926)(TY8674* A_8929, void* P_8930, NI Size_8931) {
TY8630* C_8932;
NI Nxt_8933;
TY8630* Next_8936;
NI LOC2;
NIM_BOOL LOC3;
NI LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "freeOsChunks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_8932 = 0;
F.line = 278;F.filename = "alloc.nim";
C_8932 = ((TY8630*) (P_8930));
Nxt_8933 = 0;
F.line = 279;F.filename = "alloc.nim";
Nxt_8933 = (NI64)((NU64)(((NI) (P_8930))) + (NU64)((*C_8932).Size));
F.line = 280;F.filename = "alloc.nim";
Next_8936 = 0;
F.line = 281;F.filename = "alloc.nim";
Next_8936 = ((TY8630*) (Nxt_8933));
F.line = 282;F.filename = "alloc.nim";
LOC2 = Pageindex_8877(Next_8936);
LOC3 = Contains_8811(&(*A_8929).Chunkstarts, LOC2);
if (!LOC3) goto LA4;
F.line = 283;F.filename = "alloc.nim";
(*Next_8936).Prevsize = 0;
LA4: ;
F.line = 284;F.filename = "alloc.nim";
LOC6 = Pageindex_8881(P_8930);
Excl_8838(&(*A_8929).Chunkstarts, LOC6);
F.line = 285;F.filename = "alloc.nim";
Osdeallocpages_8217(P_8930, Size_8931);
F.line = 286;F.filename = "alloc.nim";
Deccurrmem_8703(A_8929, Size_8931);
F.line = 287;F.filename = "alloc.nim";
(*A_8929).Freemem -= Size_8931;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Freebigchunk_9020)(TY8674* A_9023, TY8634* C_9024) {
TY8634* C_9025;
TY8630* Ri_9040;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
NI LOC10;
TY8630* Le_9203;
NIM_BOOL LOC15;
NIM_BOOL LOC20;
NI LOC23;
NI LOC27;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "freeBigChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_9025 = 0;
F.line = 345;F.filename = "alloc.nim";
C_9025 = C_9024;
F.line = 346;F.filename = "alloc.nim";
F.line = 347;F.filename = "alloc.nim";
(*A_9023).Freemem += (*C_9025).Sup.Size;
Ri_9040 = 0;
F.line = 349;F.filename = "alloc.nim";
Ri_9040 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9025))) + (NU64)((*C_9025).Sup.Size))));
F.line = 350;F.filename = "alloc.nim";
F.line = 351;F.filename = "alloc.nim";
LOC2 = Isaccessible_8952(((void*) (Ri_9040)));
if (!(LOC2)) goto LA3;
LOC2 = Chunkunused_9007(Ri_9040);
LA3: ;
if (!LOC2) goto LA4;
F.line = 352;F.filename = "alloc.nim";
F.line = 353;F.filename = "alloc.nim";
LOC7 = Issmallchunk_9001(Ri_9040);
if (!!(LOC7)) goto LA8;
F.line = 354;F.filename = "alloc.nim";
Listremove_9046(&(*A_9023).Freechunkslist, ((TY8634*) (Ri_9040)));
F.line = 355;F.filename = "alloc.nim";
(*C_9025).Sup.Size += (*Ri_9040).Size;
F.line = 356;F.filename = "alloc.nim";
LOC10 = Pageindex_8877(Ri_9040);
Excl_8838(&(*A_9023).Chunkstarts, LOC10);
LA8: ;
LA4: ;
F.line = 358;F.filename = "alloc.nim";
if (!!(((*C_9025).Sup.Prevsize == 0))) goto LA12;
Le_9203 = 0;
F.line = 359;F.filename = "alloc.nim";
Le_9203 = ((TY8630*) ((NI64)((NU64)(((NI) (C_9025))) - (NU64)((*C_9025).Sup.Prevsize))));
F.line = 360;F.filename = "alloc.nim";
F.line = 361;F.filename = "alloc.nim";
LOC15 = Isaccessible_8952(((void*) (Le_9203)));
if (!(LOC15)) goto LA16;
LOC15 = Chunkunused_9007(Le_9203);
LA16: ;
if (!LOC15) goto LA17;
F.line = 362;F.filename = "alloc.nim";
F.line = 363;F.filename = "alloc.nim";
LOC20 = Issmallchunk_9001(Le_9203);
if (!!(LOC20)) goto LA21;
F.line = 364;F.filename = "alloc.nim";
Listremove_9046(&(*A_9023).Freechunkslist, ((TY8634*) (Le_9203)));
F.line = 365;F.filename = "alloc.nim";
(*Le_9203).Size += (*C_9025).Sup.Size;
F.line = 366;F.filename = "alloc.nim";
LOC23 = Pageindex_8877(&C_9025->Sup);
Excl_8838(&(*A_9023).Chunkstarts, LOC23);
F.line = 367;F.filename = "alloc.nim";
C_9025 = ((TY8634*) (Le_9203));
LA21: ;
LA17: ;
LA12: ;
F.line = 369;F.filename = "alloc.nim";
if (!((*C_9025).Sup.Size < 1048576)) goto LA25;
F.line = 370;F.filename = "alloc.nim";
LOC27 = Pageindex_8877(&C_9025->Sup);
Incl_8831(&(*A_9023).Chunkstarts, LOC27);
F.line = 371;F.filename = "alloc.nim";
Updateprevsize_9011(A_9023, C_9025, (*C_9025).Sup.Size);
F.line = 372;F.filename = "alloc.nim";
Listadd_9407(&(*A_9023).Freechunkslist, C_9025);
F.line = 373;F.filename = "alloc.nim";
(*C_9025).Sup.Used = NIM_FALSE;
goto LA24;
LA25: ;
F.line = 375;F.filename = "alloc.nim";
Freeoschunks_8926(A_9023, ((void*) (C_9025)), (*C_9025).Sup.Size);
LA24: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Rawdealloc_9864)(TY8674* A_9867, void* P_9868) {
TY8630* C_9869;
NIM_BOOL LOC2;
TY8632* C_9870;
NI S_9871;
TY8622* F_9873;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawDealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
C_9869 = 0;
F.line = 485;F.filename = "alloc.nim";
C_9869 = Pageaddr_8885(P_9868);
F.line = 486;F.filename = "alloc.nim";
LOC2 = Issmallchunk_9001(C_9869);
if (!LOC2) goto LA3;
C_9870 = 0;
F.line = 488;F.filename = "alloc.nim";
C_9870 = ((TY8632*) (C_9869));
S_9871 = 0;
F.line = 489;F.filename = "alloc.nim";
S_9871 = (*C_9870).Sup.Size;
F_9873 = 0;
F.line = 490;F.filename = "alloc.nim";
F_9873 = ((TY8622*) (P_9868));
F.line = 492;F.filename = "alloc.nim";
F.line = 493;F.filename = "alloc.nim";
(*F_9873).Zerofield = 0;
F.line = 494;F.filename = "alloc.nim";
(*F_9873).Next = (*C_9870).Freelist;
F.line = 495;F.filename = "alloc.nim";
(*C_9870).Freelist = F_9873;
F.line = 501;F.filename = "alloc.nim";
if (!((*C_9870).Free < S_9871)) goto LA6;
F.line = 502;F.filename = "alloc.nim";
F.line = 504;F.filename = "alloc.nim";
Listadd_9626(&(*A_9867).Freesmallchunks[((NI64)(S_9871 / 8))-0], C_9870);
F.line = 505;F.filename = "alloc.nim";
(*C_9870).Free += S_9871;
goto LA5;
LA6: ;
F.line = 507;F.filename = "alloc.nim";
(*C_9870).Free += S_9871;
F.line = 508;F.filename = "alloc.nim";
if (!((*C_9870).Free == (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)))) goto LA9;
F.line = 509;F.filename = "alloc.nim";
Listremove_9768(&(*A_9867).Freesmallchunks[((NI64)(S_9871 / 8))-0], C_9870);
F.line = 510;F.filename = "alloc.nim";
(*C_9870).Sup.Size = 4096;
F.line = 511;F.filename = "alloc.nim";
Freebigchunk_9020(A_9867, ((TY8634*) (C_9870)));
LA9: ;
LA5: ;
goto LA1;
LA3: ;
F.line = 516;F.filename = "alloc.nim";
Freebigchunk_9020(A_9867, ((TY8634*) (C_9869)));
LA1: ;
framePtr = framePtr->prev;
}
N_NOCONV(void, Dealloc_1784)(void* P_1786) {
void* X_10228;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "dealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
X_10228 = 0;
F.line = 546;F.filename = "alloc.nim";
X_10228 = ((void*) ((NI64)((NU64)(((NI) (P_1786))) - (NU64)(((NI)sizeof(TY8622))))));
F.line = 547;F.filename = "alloc.nim";
F.line = 548;F.filename = "alloc.nim";
Rawdealloc_9864(&Allocator_8729, X_10228);
F.line = 549;F.filename = "alloc.nim";
framePtr = framePtr->prev;
}
static N_INLINE(void, Add_10658)(TY10618* S_10661, TY10602* C_10662) {
TY10602** D_10665;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "add";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 48;F.filename = "cellsets.nim";
if (!((*S_10661).Cap <= (*S_10661).Len)) goto LA2;
F.line = 49;F.filename = "cellsets.nim";
(*S_10661).Cap = (NI64)((NI64)((*S_10661).Cap * 3) / 2);
D_10665 = 0;
F.line = 50;F.filename = "cellsets.nim";
LOC4 = Alloc_1774((NI64)((*S_10661).Cap * 8));
D_10665 = ((TY10602**) (LOC4));
F.line = 51;F.filename = "cellsets.nim";
memcpy(((void*) (D_10665)), ((void*) ((*S_10661).D)), (NI64)((*S_10661).Len * 8));
F.line = 52;F.filename = "cellsets.nim";
Dealloc_1784(((void*) ((*S_10661).D)));
F.line = 53;F.filename = "cellsets.nim";
(*S_10661).D = D_10665;
LA2: ;
F.line = 55;F.filename = "cellsets.nim";
(*S_10661).D[((*S_10661).Len)-0] = C_10662;
F.line = 56;F.filename = "cellsets.nim";
(*S_10661).Len += 1;
framePtr = framePtr->prev;
}
static N_INLINE(void, Gcmark_14603)(void* P_14605) {
TY10602* Cell_14606;
NI C_14607;
NIM_BOOL LOC2;
NIM_BOOL LOC7;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "gcMark";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Cell_14606 = 0;
F.line = 473;F.filename = "gc.nim";
Cell_14606 = Usrtocell_11036(P_14605);
C_14607 = 0;
F.line = 474;F.filename = "gc.nim";
C_14607 = ((NI) (Cell_14606));
F.line = 475;F.filename = "gc.nim";
LOC2 = ((NU64)(4096) < (NU64)(C_14607));
if (!(LOC2)) goto LA3;
LOC2 = ((NI64)(C_14607 & 7) == 0);
LA3: ;
if (!LOC2) goto LA4;
F.line = 477;F.filename = "gc.nim";
LOC7 = Isallocatedptr_10201(&Allocator_8729, ((void*) (Cell_14606)));
if (!LOC7) goto LA8;
F.line = 479;F.filename = "gc.nim";
(*Cell_14606).Refcount = (NI64)((NU64)((*Cell_14606).Refcount) + (NU64)(8));
F.line = 480;F.filename = "gc.nim";
Add_10658(&Gch_11010.Decstack, Cell_14606);
LA8: ;
LA4: ;
framePtr = framePtr->prev;
}
N_CDECL(void, Markstackandregisters_15415)(TY10990* Gch_15418) {
jmp_buf Registers_15419;
int LOC2;
NI Max_15423;
NI Sp_15425;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "markStackAndRegisters";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
memset((void*)&Registers_15419, 0, sizeof(Registers_15419));
F.line = 584;F.filename = "gc.nim";
LOC2 = setjmp(Registers_15419);
if (!(LOC2 == ((NI32) 0))) goto LA3;
Max_15423 = 0;
F.line = 585;F.filename = "gc.nim";
Max_15423 = ((NI) (Stackbottom_11009));
Sp_15425 = 0;
F.line = 586;F.filename = "gc.nim";
Sp_15425 = ((NI) (Registers_15419));
F.line = 587;F.filename = "gc.nim";
while (1) {
if (!((NU64)(Sp_15425) <= (NU64)(Max_15423))) goto LA5;
F.line = 588;F.filename = "gc.nim";
Gcmark_14603((*((void**) (Sp_15425))));
F.line = 589;F.filename = "gc.nim";
Sp_15425 = (NI64)((NU64)(Sp_15425) + (NU64)(8));
} LA5: ;
LA3: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Markthreadstacks_14611)(TY10990* Gch_14614) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "markThreadStacks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11040)(TY10602* C_11042) {
NIM_BOOL Result_11043;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "canbeCycleRoot";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11043 = 0;
F.line = 103;F.filename = "gc.nim";
Result_11043 = !((((*(*C_11042).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
framePtr = framePtr->prev;
return Result_11043;
}
static N_INLINE(NI, Nexttry_10709)(NI H_10711, NI Maxhash_10712) {
NI Result_10713;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nextTry";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10713 = 0;
F.line = 90;F.filename = "cellsets.nim";
Result_10713 = (NI64)((NI64)((NI64)(5 * H_10711) + 1) & Maxhash_10712);
framePtr = framePtr->prev;
return Result_10713;
}
N_NIMCALL(TY10610*, Cellsetget_10714)(TY10614* T_10716, NI Key_10717) {
TY10610* Result_10718;
NI H_10719;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10718 = 0;
H_10719 = 0;
F.line = 96;F.filename = "cellsets.nim";
H_10719 = (NI64)(((NI) (Key_10717)) & (*T_10716).Max);
F.line = 97;F.filename = "cellsets.nim";
while (1) {
if (!!(((*T_10716).Data[(H_10719)-0] == NIM_NIL))) goto LA1;
F.line = 98;F.filename = "cellsets.nim";
if (!((*(*T_10716).Data[(H_10719)-0]).Key == Key_10717)) goto LA3;
F.line = 98;F.filename = "cellsets.nim";
F.line = 98;F.filename = "cellsets.nim";
Result_10718 = (*T_10716).Data[(H_10719)-0];
goto BeforeRet;
LA3: ;
F.line = 99;F.filename = "cellsets.nim";
H_10719 = Nexttry_10709(H_10719, (*T_10716).Max);
} LA1: ;
F.line = 100;F.filename = "cellsets.nim";
F.line = 100;F.filename = "cellsets.nim";
Result_10718 = NIM_NIL;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10718;
}
N_NIMCALL(void, Excl_10881)(TY10614* S_10884, TY10602* Cell_10885) {
NI U_10886;
TY10610* T_10887;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "excl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
U_10886 = 0;
F.line = 159;F.filename = "cellsets.nim";
U_10886 = ((NI) (Cell_10885));
T_10887 = 0;
F.line = 160;F.filename = "cellsets.nim";
T_10887 = Cellsetget_10714(&(*S_10884), (NI64)((NU64)(U_10886) >> (NU64)(12)));
F.line = 161;F.filename = "cellsets.nim";
if (!!((T_10887 == NIM_NIL))) goto LA2;
F.line = 162;F.filename = "cellsets.nim";
U_10886 = (NI64)((NU64)((NI64)((NU64)(U_10886) % (NU64)(4096))) / (NU64)(8));
F.line = 163;F.filename = "cellsets.nim";
(*T_10887).Bits[((NI64)((NU64)(U_10886) >> (NU64)(6)))-0] = (NI64)((*T_10887).Bits[((NI64)((NU64)(U_10886) >> (NU64)(6)))-0] & (NI64)((NU64) ~((NI64)((NU64)(1) << (NU64)((NI64)(U_10886 & 63))))));
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(void*, Celltousr_11032)(TY10602* Cell_11034) {
void* Result_11035;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cellToUsr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11035 = 0;
F.line = 96;F.filename = "gc.nim";
Result_11035 = ((void*) ((NI64)((NU64)(((NI) (Cell_11034))) + (NU64)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11035;
}
N_NIMCALL(void, Preparedealloc_11625)(TY10602* Cell_11627) {
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "prepareDealloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 193;F.filename = "gc.nim";
if (!!(((*(*Cell_11627).Typ).finalizer == NIM_NIL))) goto LA2;
F.line = 199;F.filename = "gc.nim";
Recgclock_11012 += 1;
F.line = 200;F.filename = "gc.nim";
LOC4 = Celltousr_11032(Cell_11627);
((TFinalizer) ((*(*Cell_11627).Typ).finalizer))(LOC4);
F.line = 201;F.filename = "gc.nim";
Recgclock_11012 -= 1;
LA2: ;
framePtr = framePtr->prev;
}
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 90;F.filename = "gc.nim";
if (!((NI64)((*C_11029).Refcount & 4) == 0)) goto LA2;
F.line = 91;F.filename = "gc.nim";
(*C_11029).Refcount = (NI64)((NI64)((*C_11029).Refcount & -8) | 4);
F.line = 92;F.filename = "gc.nim";
Add_10658(S_11028, C_11029);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Dooperation_11616)(void* P_11618, NU8 Op_11619) {
TY10602* C_13606;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "doOperation";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 412;F.filename = "gc.nim";
if (!(P_11618 == NIM_NIL)) goto LA2;
F.line = 412;F.filename = "gc.nim";
goto BeforeRet;
LA2: ;
C_13606 = 0;
F.line = 413;F.filename = "gc.nim";
C_13606 = Usrtocell_11036(P_11618);
F.line = 414;F.filename = "gc.nim";
F.line = 415;F.filename = "gc.nim";
switch (Op_11619) {
case ((NU8) 0):
F.line = 417;F.filename = "gc.nim";
F.line = 418;F.filename = "gc.nim";
(*C_13606).Refcount = (NI64)((NU64)((*C_13606).Refcount) - (NU64)(8));
F.line = 420;F.filename = "gc.nim";
if (!((NU64)((*C_13606).Refcount) < (NU64)(8))) goto LA5;
F.line = 420;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_13606);
LA5: ;
break;
case ((NU8) 1):
F.line = 422;F.filename = "gc.nim";
Add_10658(&Gch_11010.Tempstack, C_13606);
break;
case ((NU8) 2):
F.line = 424;F.filename = "gc.nim";
F.line = 425;F.filename = "gc.nim";
(*C_13606).Refcount = (NI64)((NU64)((*C_13606).Refcount) - (NU64)(8));
break;
}
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Getdiscriminant_7043)(void* Aa_7045, TNimNode* N_7047) {
NI Result_7048;
NI D_7058;
NI A_7059;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getDiscriminant";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7048 = 0;
F.line = 1555;F.filename = "system.nim";
D_7058 = 0;
A_7059 = 0;
F.line = 1557;F.filename = "system.nim";
A_7059 = ((NI) (Aa_7045));
F.line = 1558;F.filename = "system.nim";
switch ((*(*N_7047).typ).size) {
case 1:
F.line = 1559;F.filename = "system.nim";
D_7058 = ((NI)(NU)(NU8)((*((NI8*) ((NI64)((NU64)(A_7059) + (NU64)((*N_7047).offset)))))));
break;
case 2:
F.line = 1560;F.filename = "system.nim";
D_7058 = ((NI)(NU)(NU16)((*((NI16*) ((NI64)((NU64)(A_7059) + (NU64)((*N_7047).offset)))))));
break;
case 4:
F.line = 1561;F.filename = "system.nim";
D_7058 = ((NI) ((*((int*) ((NI64)((NU64)(A_7059) + (NU64)((*N_7047).offset)))))));
break;
default:
F.line = 1562;F.filename = "system.nim";
break;
}
F.line = 1563;F.filename = "system.nim";
F.line = 1563;F.filename = "system.nim";
Result_7048 = D_7058;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_7048;
}
N_NIMCALL(TNimNode*, Selectbranch_7063)(void* Aa_7065, TNimNode* N_7067) {
TNimNode* Result_7069;
NI Discr_7070;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "selectBranch";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7069 = 0;
Discr_7070 = 0;
F.line = 1566;F.filename = "system.nim";
Discr_7070 = Getdiscriminant_7043(Aa_7065, N_7067);
F.line = 1567;F.filename = "system.nim";
if (!((NU64)(Discr_7070) < (NU64)((*N_7067).len))) goto LA2;
F.line = 1568;F.filename = "system.nim";
Result_7069 = (*N_7067).sons[(Discr_7070)-0];
F.line = 1569;F.filename = "system.nim";
if (!(Result_7069 == NIM_NIL)) goto LA5;
F.line = 1569;F.filename = "system.nim";
Result_7069 = (*N_7067).sons[((*N_7067).len)-0];
LA5: ;
goto LA1;
LA2: ;
F.line = 1572;F.filename = "system.nim";
Result_7069 = (*N_7067).sons[((*N_7067).len)-0];
LA1: ;
framePtr = framePtr->prev;
return Result_7069;
}
N_NIMCALL(void, Forallslotsaux_12201)(void* Dest_12203, TNimNode* N_12205, NU8 Op_12206) {
NI D_12207;
NI I_12215;
NI HEX3Atmp_19875;
NI Res_19877;
TNimNode* M_12216;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllSlotsAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_12207 = 0;
F.line = 282;F.filename = "gc.nim";
D_12207 = ((NI) (Dest_12203));
F.line = 283;F.filename = "gc.nim";
switch ((*N_12205).kind) {
case ((NU8) 0):
F.line = 284;F.filename = "gc.nim";
break;
case ((NU8) 1):
F.line = 285;F.filename = "gc.nim";
Forallchildrenaux_11620(((void*) ((NI64)((NU64)(D_12207) + (NU64)((*N_12205).offset)))), (*N_12205).typ, Op_12206);
break;
case ((NU8) 2):
I_12215 = 0;
HEX3Atmp_19875 = 0;
F.line = 287;F.filename = "gc.nim";
HEX3Atmp_19875 = (NI64)((*N_12205).len - 1);
Res_19877 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19877 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19877 <= HEX3Atmp_19875)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_12215 = Res_19877;
F.line = 287;F.filename = "gc.nim";
Forallslotsaux_12201(Dest_12203, (*N_12205).sons[(I_12215)-0], Op_12206);
F.line = 1022;F.filename = "system.nim";
Res_19877 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_12216 = 0;
F.line = 289;F.filename = "gc.nim";
M_12216 = Selectbranch_7063(Dest_12203, N_12205);
F.line = 290;F.filename = "gc.nim";
if (!!((M_12216 == NIM_NIL))) goto LA3;
F.line = 290;F.filename = "gc.nim";
Forallslotsaux_12201(Dest_12203, M_12216, Op_12206);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Forallchildrenaux_11620)(void* Dest_11622, TNimType* Mt_11623, NU8 Op_11624) {
NI D_12233;
NI I_12252;
NI HEX3Atmp_19881;
NI Res_19883;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllChildrenAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_12233 = 0;
F.line = 293;F.filename = "gc.nim";
D_12233 = ((NI) (Dest_11622));
F.line = 294;F.filename = "gc.nim";
if (!(Dest_11622 == NIM_NIL)) goto LA2;
F.line = 294;F.filename = "gc.nim";
goto BeforeRet;
LA2: ;
F.line = 295;F.filename = "gc.nim";
if (!!((((*Mt_11623).flags &(1<<((((NU8) 0))&7)))!=0))) goto LA5;
F.line = 296;F.filename = "gc.nim";
switch ((*Mt_11623).kind) {
case ((NU8) 16):
case ((NU8) 4):
case ((NU8) 27):
I_12252 = 0;
HEX3Atmp_19881 = 0;
F.line = 298;F.filename = "gc.nim";
HEX3Atmp_19881 = (NI64)((NI64)((*Mt_11623).size / (*(*Mt_11623).base).size) - 1);
Res_19883 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19883 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19883 <= HEX3Atmp_19881)) goto LA7;
F.line = 1019;F.filename = "system.nim";
I_12252 = Res_19883;
F.line = 299;F.filename = "gc.nim";
Forallchildrenaux_11620(((void*) ((NI64)((NU64)(D_12233) + (NU64)((NI64)((NU64)(I_12252) * (NU64)((*(*Mt_11623).base).size)))))), (*Mt_11623).base, Op_11624);
F.line = 1022;F.filename = "system.nim";
Res_19883 += 1;
} LA7: ;
break;
case ((NU8) 22):
case ((NU8) 28):
case ((NU8) 24):
F.line = 301;F.filename = "gc.nim";
Dooperation_11616((*((void**) (D_12233))), Op_11624);
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
F.line = 303;F.filename = "gc.nim";
Forallslotsaux_12201(Dest_11622, (*Mt_11623).node, Op_11624);
break;
default:
break;
}
LA5: ;
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Forallchildren_11612)(TY10602* Cell_11614, NU8 Op_11615) {
void* LOC1;
NI D_12279;
void* LOC2;
TGenericSeq* S_12280;
NI I_12299;
NI HEX3Atmp_19887;
NI Res_19889;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "forAllChildren";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 307;F.filename = "gc.nim";
F.line = 308;F.filename = "gc.nim";
F.line = 309;F.filename = "gc.nim";
switch ((*(*Cell_11614).Typ).kind) {
case ((NU8) 22):
F.line = 311;F.filename = "gc.nim";
LOC1 = Celltousr_11032(Cell_11614);
Forallchildrenaux_11620(LOC1, (*(*Cell_11614).Typ).base, Op_11615);
break;
case ((NU8) 24):
D_12279 = 0;
F.line = 313;F.filename = "gc.nim";
LOC2 = Celltousr_11032(Cell_11614);
D_12279 = ((NI) (LOC2));
S_12280 = 0;
F.line = 314;F.filename = "gc.nim";
S_12280 = ((TGenericSeq*) (D_12279));
F.line = 315;F.filename = "gc.nim";
if (!!((S_12280 == NIM_NIL))) goto LA4;
I_12299 = 0;
HEX3Atmp_19887 = 0;
F.line = 316;F.filename = "gc.nim";
HEX3Atmp_19887 = (NI64)((*S_12280).len - 1);
Res_19889 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19889 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19889 <= HEX3Atmp_19887)) goto LA6;
F.line = 1019;F.filename = "system.nim";
I_12299 = Res_19889;
F.line = 317;F.filename = "gc.nim";
Forallchildrenaux_11620(((void*) ((NI64)((NU64)((NI64)((NU64)(D_12279) + (NU64)((NI64)((NU64)(I_12299) * (NU64)((*(*(*Cell_11614).Typ).base).size))))) + (NU64)(16)))), (*(*Cell_11614).Typ).base, Op_11615);
F.line = 1022;F.filename = "system.nim";
Res_19889 += 1;
} LA6: ;
LA4: ;
break;
case ((NU8) 28):
break;
default:
F.line = 320;F.filename = "gc.nim";
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectzct_15601)(TY10990* Gch_15604) {
NI* L_15606;
TY10602* C_15609;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CollectZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
L_15606 = 0;
F.line = 600;F.filename = "gc.nim";
L_15606 = &(*Gch_15604).Zct.Len;
F.line = 601;F.filename = "gc.nim";
while (1) {
if (!(0 < (*L_15606))) goto LA1;
C_15609 = 0;
F.line = 602;F.filename = "gc.nim";
C_15609 = (*Gch_15604).Zct.D[(0)-0];
F.line = 604;F.filename = "gc.nim";
F.line = 605;F.filename = "gc.nim";
(*C_15609).Refcount = (NI64)((*C_15609).Refcount & -8);
F.line = 606;F.filename = "gc.nim";
(*Gch_15604).Zct.D[(0)-0] = (*Gch_15604).Zct.D[((NI64)((*L_15606) - 1))-0];
F.line = 607;F.filename = "gc.nim";
(*L_15606) -= 1;
F.line = 608;F.filename = "gc.nim";
if (!((NU64)((*C_15609).Refcount) < (NU64)(8))) goto LA3;
F.line = 615;F.filename = "gc.nim";
LOC6 = Canbecycleroot_11040(C_15609);
if (!LOC6) goto LA7;
F.line = 615;F.filename = "gc.nim";
Excl_10881(&(*Gch_15604).Cycleroots, C_15609);
LA7: ;
F.line = 621;F.filename = "gc.nim";
Preparedealloc_11625(C_15609);
F.line = 622;F.filename = "gc.nim";
Forallchildren_11612(C_15609, ((NU8) 0));
F.line = 623;F.filename = "gc.nim";
Rawdealloc_9864(&Allocator_8729, ((void*) (C_15609)));
LA3: ;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Init_10688)(TY10614* S_10691) {
void* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Init";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 73;F.filename = "cellsets.nim";
LOC1 = Alloc0_1777(8192);
(*S_10691).Data = ((TY10610**) (LOC1));
F.line = 74;F.filename = "cellsets.nim";
(*S_10691).Max = 1023;
F.line = 75;F.filename = "cellsets.nim";
(*S_10691).Counter = 0;
F.line = 76;F.filename = "cellsets.nim";
(*S_10691).Head = NIM_NIL;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Cellsetrawinsert_10733)(TY10614* T_10735, TY10610** Data_10736, TY10610* Desc_10737) {
NI H_10738;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetRawInsert";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
H_10738 = 0;
F.line = 103;F.filename = "cellsets.nim";
H_10738 = (NI64)(((NI) ((*Desc_10737).Key)) & (*T_10735).Max);
F.line = 104;F.filename = "cellsets.nim";
while (1) {
if (!!((Data_10736[(H_10738)-0] == NIM_NIL))) goto LA1;
F.line = 105;F.filename = "cellsets.nim";
F.line = 106;F.filename = "cellsets.nim";
H_10738 = Nexttry_10709(H_10738, (*T_10735).Max);
} LA1: ;
F.line = 107;F.filename = "cellsets.nim";
F.line = 108;F.filename = "cellsets.nim";
Data_10736[(H_10738)-0] = Desc_10737;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Cellsetenlarge_10770)(TY10614* T_10773) {
NI Oldmax_10774;
TY10610** N_10775;
void* LOC1;
NI I_10783;
NI Res_19866;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetEnlarge";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Oldmax_10774 = 0;
F.line = 111;F.filename = "cellsets.nim";
Oldmax_10774 = (*T_10773).Max;
F.line = 112;F.filename = "cellsets.nim";
(*T_10773).Max = (NI64)((NI64)((NI64)((*T_10773).Max + 1) * 2) - 1);
N_10775 = 0;
F.line = 113;F.filename = "cellsets.nim";
LOC1 = Alloc0_1777((NI64)((NI64)((*T_10773).Max + 1) * 8));
N_10775 = ((TY10610**) (LOC1));
I_10783 = 0;
Res_19866 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19866 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19866 <= Oldmax_10774)) goto LA2;
F.line = 1019;F.filename = "system.nim";
I_10783 = Res_19866;
F.line = 115;F.filename = "cellsets.nim";
if (!!(((*T_10773).Data[(I_10783)-0] == NIM_NIL))) goto LA4;
F.line = 116;F.filename = "cellsets.nim";
Cellsetrawinsert_10733(&(*T_10773), N_10775, (*T_10773).Data[(I_10783)-0]);
LA4: ;
F.line = 1022;F.filename = "system.nim";
Res_19866 += 1;
} LA2: ;
F.line = 117;F.filename = "cellsets.nim";
Dealloc_1784(((void*) ((*T_10773).Data)));
F.line = 118;F.filename = "cellsets.nim";
(*T_10773).Data = N_10775;
framePtr = framePtr->prev;
}
N_NIMCALL(TY10610*, Cellsetput_10795)(TY10614* T_10798, NI Key_10799) {
TY10610* Result_10800;
NI H_10801;
TY10610* X_10802;
NIM_BOOL LOC9;
void* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "CellSetPut";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10800 = 0;
H_10801 = 0;
F.line = 121;F.filename = "cellsets.nim";
H_10801 = (NI64)(((NI) (Key_10799)) & (*T_10798).Max);
F.line = 122;F.filename = "cellsets.nim";
while (1) {
X_10802 = 0;
F.line = 123;F.filename = "cellsets.nim";
X_10802 = (*T_10798).Data[(H_10801)-0];
F.line = 124;F.filename = "cellsets.nim";
if (!(X_10802 == NIM_NIL)) goto LA3;
F.line = 124;F.filename = "cellsets.nim";
goto LA1;
LA3: ;
F.line = 125;F.filename = "cellsets.nim";
if (!((*X_10802).Key == Key_10799)) goto LA6;
F.line = 125;F.filename = "cellsets.nim";
F.line = 125;F.filename = "cellsets.nim";
Result_10800 = X_10802;
goto BeforeRet;
LA6: ;
F.line = 126;F.filename = "cellsets.nim";
H_10801 = Nexttry_10709(H_10801, (*T_10798).Max);
} LA1: ;
F.line = 128;F.filename = "cellsets.nim";
LOC9 = ((NI64)((NI64)((*T_10798).Max + 1) * 2) < (NI64)((*T_10798).Counter * 3));
if (LOC9) goto LA10;
LOC9 = ((NI64)((NI64)((*T_10798).Max + 1) - (*T_10798).Counter) < 4);
LA10: ;
if (!LOC9) goto LA11;
F.line = 129;F.filename = "cellsets.nim";
Cellsetenlarge_10770(T_10798);
LA11: ;
F.line = 130;F.filename = "cellsets.nim";
(*T_10798).Counter += 1;
F.line = 131;F.filename = "cellsets.nim";
H_10801 = (NI64)(((NI) (Key_10799)) & (*T_10798).Max);
F.line = 132;F.filename = "cellsets.nim";
while (1) {
if (!!(((*T_10798).Data[(H_10801)-0] == NIM_NIL))) goto LA13;
F.line = 132;F.filename = "cellsets.nim";
H_10801 = Nexttry_10709(H_10801, (*T_10798).Max);
} LA13: ;
F.line = 133;F.filename = "cellsets.nim";
F.line = 135;F.filename = "cellsets.nim";
LOC14 = Alloc0_1777(((NI)sizeof(TY10610)));
Result_10800 = ((TY10610*) (LOC14));
F.line = 136;F.filename = "cellsets.nim";
(*Result_10800).Next = (*T_10798).Head;
F.line = 137;F.filename = "cellsets.nim";
(*Result_10800).Key = Key_10799;
F.line = 138;F.filename = "cellsets.nim";
(*T_10798).Head = Result_10800;
F.line = 139;F.filename = "cellsets.nim";
(*T_10798).Data[(H_10801)-0] = Result_10800;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10800;
}
N_NOINLINE(void, Incl_10874)(TY10614* S_10877, TY10602* Cell_10878) {
NI U_10879;
TY10610* T_10880;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
U_10879 = 0;
F.line = 153;F.filename = "cellsets.nim";
U_10879 = ((NI) (Cell_10878));
T_10880 = 0;
F.line = 154;F.filename = "cellsets.nim";
T_10880 = Cellsetput_10795(S_10877, (NI64)((NU64)(U_10879) >> (NU64)(12)));
F.line = 155;F.filename = "cellsets.nim";
U_10879 = (NI64)((NU64)((NI64)((NU64)(U_10879) % (NU64)(4096))) / (NU64)(8));
F.line = 156;F.filename = "cellsets.nim";
(*T_10880).Bits[((NI64)((NU64)(U_10879) >> (NU64)(6)))-0] = (NI64)((*T_10880).Bits[((NI64)((NU64)(U_10879) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_10879 & 63))));
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Containsorincl_10899)(TY10614* S_10902, TY10602* Cell_10903) {
NIM_BOOL Result_10904;
NI U_10905;
TY10610* T_10906;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "containsOrIncl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10904 = 0;
U_10905 = 0;
F.line = 167;F.filename = "cellsets.nim";
U_10905 = ((NI) (Cell_10903));
T_10906 = 0;
F.line = 168;F.filename = "cellsets.nim";
T_10906 = Cellsetget_10714(&(*S_10902), (NI64)((NU64)(U_10905) >> (NU64)(12)));
F.line = 169;F.filename = "cellsets.nim";
if (!!((T_10906 == NIM_NIL))) goto LA2;
F.line = 170;F.filename = "cellsets.nim";
U_10905 = (NI64)((NU64)((NI64)((NU64)(U_10905) % (NU64)(4096))) / (NU64)(8));
F.line = 171;F.filename = "cellsets.nim";
Result_10904 = !(((NI64)((*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_10905 & 63)))) == 0));
F.line = 172;F.filename = "cellsets.nim";
if (!!(Result_10904)) goto LA5;
F.line = 173;F.filename = "cellsets.nim";
(*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] = (NI64)((*T_10906).Bits[((NI64)((NU64)(U_10905) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_10905 & 63))));
LA5: ;
goto LA1;
LA2: ;
F.line = 176;F.filename = "cellsets.nim";
Incl_10874(S_10902, Cell_10903);
F.line = 177;F.filename = "cellsets.nim";
Result_10904 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_10904;
}
N_NIMCALL(NIM_BOOL, Contains_10854)(TY10614* S_10856, TY10602* Cell_10857) {
NIM_BOOL Result_10858;
NI U_10859;
TY10610* T_10860;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10858 = 0;
U_10859 = 0;
F.line = 144;F.filename = "cellsets.nim";
U_10859 = ((NI) (Cell_10857));
T_10860 = 0;
F.line = 145;F.filename = "cellsets.nim";
T_10860 = Cellsetget_10714(S_10856, (NI64)((NU64)(U_10859) >> (NU64)(12)));
F.line = 146;F.filename = "cellsets.nim";
if (!!((T_10860 == NIM_NIL))) goto LA2;
F.line = 147;F.filename = "cellsets.nim";
U_10859 = (NI64)((NU64)((NI64)((NU64)(U_10859) % (NU64)(4096))) / (NU64)(8));
F.line = 148;F.filename = "cellsets.nim";
Result_10858 = !(((NI64)((*T_10860).Bits[((NI64)((NU64)(U_10859) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_10859 & 63)))) == 0));
goto LA1;
LA2: ;
F.line = 150;F.filename = "cellsets.nim";
Result_10858 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_10858;
}
N_NIMCALL(void, Deinit_10692)(TY10614* S_10695) {
TY10610* It_10696;
TY10610* N_10708;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Deinit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
It_10696 = 0;
F.line = 79;F.filename = "cellsets.nim";
It_10696 = (*S_10695).Head;
F.line = 80;F.filename = "cellsets.nim";
while (1) {
if (!!((It_10696 == NIM_NIL))) goto LA1;
N_10708 = 0;
F.line = 81;F.filename = "cellsets.nim";
N_10708 = (*It_10696).Next;
F.line = 82;F.filename = "cellsets.nim";
Dealloc_1784(((void*) (It_10696)));
F.line = 83;F.filename = "cellsets.nim";
It_10696 = N_10708;
} LA1: ;
F.line = 84;F.filename = "cellsets.nim";
(*S_10695).Head = NIM_NIL;
F.line = 85;F.filename = "cellsets.nim";
Dealloc_1784(((void*) ((*S_10695).Data)));
F.line = 86;F.filename = "cellsets.nim";
(*S_10695).Data = NIM_NIL;
F.line = 87;F.filename = "cellsets.nim";
(*S_10695).Counter = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectcycles_13803)(TY10990* Gch_13806) {
NI Tabsize_13807;
TY10602* C_13808;
TY10614 HEX3Atmp_19901;
TY10610* R_19903;
NI I_19905;
NI W_19907;
NI J_19909;
TY10614 Marker_13823;
TY10602* C_13825;
TY10614 HEX3Atmp_19924;
TY10610* R_19926;
NI I_19928;
NI W_19930;
NI J_19932;
NIM_BOOL LOC17;
TY10602* D_13841;
NIM_BOOL LOC22;
NIM_BOOL LOC24;
TY10602* C_13845;
TY10614 HEX3Atmp_19958;
TY10610* R_19960;
NI I_19962;
NI W_19964;
NI J_19966;
TY10602* D_13860;
NIM_BOOL LOC41;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "collectCycles";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Tabsize_13807 = 0;
F.line = 429;F.filename = "gc.nim";
Tabsize_13807 = 0;
C_13808 = 0;
memset((void*)&HEX3Atmp_19901, 0, sizeof(HEX3Atmp_19901));
F.line = 430;F.filename = "gc.nim";
HEX3Atmp_19901 = (*Gch_13806).Cycleroots;
R_19903 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_19903 = HEX3Atmp_19901.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_19903 == NIM_NIL))) goto LA1;
I_19905 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_19905 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_19905 <= 7)) goto LA2;
W_19907 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_19907 = (*R_19903).Bits[(I_19905)-0];
J_19909 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_19909 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_19907 == 0))) goto LA3;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_19907 & 1) == 0))) goto LA5;
F.line = 190;F.filename = "cellsets.nim";
C_13808 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_19903).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_19905) << (NU64)(6))) + (NU64)(J_19909))) * (NU64)(8)))));
F.line = 431;F.filename = "gc.nim";
Tabsize_13807 += 1;
F.line = 432;F.filename = "gc.nim";
Forallchildren_11612(C_13808, ((NU8) 2));
LA5: ;
F.line = 192;F.filename = "cellsets.nim";
J_19909 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_19907 = (NI64)((NU64)(W_19907) >> (NU64)(1));
} LA3: ;
F.line = 194;F.filename = "cellsets.nim";
I_19905 += 1;
} LA2: ;
F.line = 195;F.filename = "cellsets.nim";
R_19903 = (*R_19903).Next;
} LA1: ;
F.line = 433;F.filename = "gc.nim";
(*Gch_13806).Stat.Cycletablesize = (((*Gch_13806).Stat.Cycletablesize >= Tabsize_13807) ? (*Gch_13806).Stat.Cycletablesize : Tabsize_13807);
memset((void*)&Marker_13823, 0, sizeof(Marker_13823));
F.line = 437;F.filename = "gc.nim";
Init_10688(&Marker_13823);
C_13825 = 0;
memset((void*)&HEX3Atmp_19924, 0, sizeof(HEX3Atmp_19924));
F.line = 438;F.filename = "gc.nim";
HEX3Atmp_19924 = (*Gch_13806).Cycleroots;
R_19926 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_19926 = HEX3Atmp_19924.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_19926 == NIM_NIL))) goto LA7;
I_19928 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_19928 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_19928 <= 7)) goto LA8;
W_19930 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_19930 = (*R_19926).Bits[(I_19928)-0];
J_19932 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_19932 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_19930 == 0))) goto LA9;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_19930 & 1) == 0))) goto LA11;
F.line = 190;F.filename = "cellsets.nim";
C_13825 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_19926).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_19928) << (NU64)(6))) + (NU64)(J_19932))) * (NU64)(8)))));
F.line = 439;F.filename = "gc.nim";
if (!((NU64)(8) <= (NU64)((*C_13825).Refcount))) goto LA14;
F.line = 440;F.filename = "gc.nim";
LOC17 = Containsorincl_10899(&Marker_13823, C_13825);
if (!!(LOC17)) goto LA18;
F.line = 441;F.filename = "gc.nim";
(*Gch_13806).Tempstack.Len = 0;
F.line = 442;F.filename = "gc.nim";
Forallchildren_11612(C_13825, ((NU8) 1));
F.line = 443;F.filename = "gc.nim";
while (1) {
if (!(0 < (*Gch_13806).Tempstack.Len)) goto LA20;
F.line = 444;F.filename = "gc.nim";
(*Gch_13806).Tempstack.Len -= 1;
D_13841 = 0;
F.line = 445;F.filename = "gc.nim";
D_13841 = (*Gch_13806).Tempstack.D[((*Gch_13806).Tempstack.Len)-0];
F.line = 446;F.filename = "gc.nim";
(*D_13841).Refcount = (NI64)((NU64)((*D_13841).Refcount) + (NU64)(8));
F.line = 447;F.filename = "gc.nim";
LOC22 = Contains_10854(&(*Gch_13806).Cycleroots, D_13841);
if (!(LOC22)) goto LA23;
LOC24 = Containsorincl_10899(&Marker_13823, D_13841);
LOC22 = !(LOC24);
LA23: ;
if (!LOC22) goto LA25;
F.line = 448;F.filename = "gc.nim";
Forallchildren_11612(D_13841, ((NU8) 1));
LA25: ;
} LA20: ;
LA18: ;
LA14: ;
LA11: ;
F.line = 192;F.filename = "cellsets.nim";
J_19932 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_19930 = (NI64)((NU64)(W_19930) >> (NU64)(1));
} LA9: ;
F.line = 194;F.filename = "cellsets.nim";
I_19928 += 1;
} LA8: ;
F.line = 195;F.filename = "cellsets.nim";
R_19926 = (*R_19926).Next;
} LA7: ;
C_13845 = 0;
memset((void*)&HEX3Atmp_19958, 0, sizeof(HEX3Atmp_19958));
F.line = 450;F.filename = "gc.nim";
HEX3Atmp_19958 = (*Gch_13806).Cycleroots;
R_19960 = 0;
F.line = 181;F.filename = "cellsets.nim";
R_19960 = HEX3Atmp_19958.Head;
F.line = 182;F.filename = "cellsets.nim";
while (1) {
if (!!((R_19960 == NIM_NIL))) goto LA27;
I_19962 = 0;
F.line = 183;F.filename = "cellsets.nim";
I_19962 = 0;
F.line = 184;F.filename = "cellsets.nim";
while (1) {
if (!(I_19962 <= 7)) goto LA28;
W_19964 = 0;
F.line = 185;F.filename = "cellsets.nim";
W_19964 = (*R_19960).Bits[(I_19962)-0];
J_19966 = 0;
F.line = 187;F.filename = "cellsets.nim";
J_19966 = 0;
F.line = 188;F.filename = "cellsets.nim";
while (1) {
if (!!((W_19964 == 0))) goto LA29;
F.line = 189;F.filename = "cellsets.nim";
if (!!(((NI64)(W_19964 & 1) == 0))) goto LA31;
F.line = 190;F.filename = "cellsets.nim";
C_13845 = ((TY10602*) ((NI64)((NI64)((NU64)((*R_19960).Key) << (NU64)(12)) | (NI64)((NU64)((NI64)((NU64)((NI64)((NU64)(I_19962) << (NU64)(6))) + (NU64)(J_19966))) * (NU64)(8)))));
F.line = 451;F.filename = "gc.nim";
if (!((NU64)((*C_13845).Refcount) < (NU64)(8))) goto LA34;
F.line = 452;F.filename = "gc.nim";
(*Gch_13806).Tempstack.Len = 0;
F.line = 453;F.filename = "gc.nim";
Forallchildren_11612(C_13845, ((NU8) 1));
F.line = 454;F.filename = "gc.nim";
while (1) {
if (!(0 < (*Gch_13806).Tempstack.Len)) goto LA36;
F.line = 455;F.filename = "gc.nim";
(*Gch_13806).Tempstack.Len -= 1;
D_13860 = 0;
F.line = 456;F.filename = "gc.nim";
D_13860 = (*Gch_13806).Tempstack.D[((*Gch_13806).Tempstack.Len)-0];
F.line = 457;F.filename = "gc.nim";
if (!((NU64)((*D_13860).Refcount) < (NU64)(8))) goto LA38;
F.line = 458;F.filename = "gc.nim";
LOC41 = Contains_10854(&(*Gch_13806).Cycleroots, D_13860);
if (!!(LOC41)) goto LA42;
F.line = 459;F.filename = "gc.nim";
Addzct_11025(&(*Gch_13806).Zct, D_13860);
LA42: ;
LA38: ;
} LA36: ;
F.line = 461;F.filename = "gc.nim";
Preparedealloc_11625(C_13845);
F.line = 464;F.filename = "gc.nim";
Rawdealloc_9864(&Allocator_8729, ((void*) (C_13845)));
LA34: ;
LA31: ;
F.line = 192;F.filename = "cellsets.nim";
J_19966 += 1;
F.line = 193;F.filename = "cellsets.nim";
W_19964 = (NI64)((NU64)(W_19964) >> (NU64)(1));
} LA29: ;
F.line = 194;F.filename = "cellsets.nim";
I_19962 += 1;
} LA28: ;
F.line = 195;F.filename = "cellsets.nim";
R_19960 = (*R_19960).Next;
} LA27: ;
F.line = 468;F.filename = "gc.nim";
Deinit_10692(&(*Gch_13806).Cycleroots);
F.line = 469;F.filename = "gc.nim";
Init_10688(&(*Gch_13806).Cycleroots);
framePtr = framePtr->prev;
}
static N_INLINE(NI, Atomicdec_2806)(NI* Memloc_2809, NI X_2810) {
NI Result_7406;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7406 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7406 = __sync_sub_and_fetch(Memloc_2809, X_2810);
framePtr = framePtr->prev;
return Result_7406;
}
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11010.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_11660);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11010.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Rtladdcycleroot_11652)(TY10602* C_11654) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddCycleRoot";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 205;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 205;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11010.Cyclerootslock);
LA2: ;
F.line = 206;F.filename = "gc.nim";
Incl_10874(&Gch_11010.Cycleroots, C_11654);
F.line = 207;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 207;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11010.Cyclerootslock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Decref_11664)(TY10602* C_11666) {
NI LOC2;
NIM_BOOL LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "decRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 219;F.filename = "gc.nim";
F.line = 220;F.filename = "gc.nim";
LOC2 = Atomicdec_2806(&(*C_11666).Refcount, 8);
if (!((NU64)(LOC2) < (NU64)(8))) goto LA3;
F.line = 221;F.filename = "gc.nim";
Rtladdzct_11658(C_11666);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11040(C_11666);
if (!LOC5) goto LA6;
F.line = 223;F.filename = "gc.nim";
Rtladdcycleroot_11652(C_11666);
goto LA1;
LA6: ;
LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Unmarkstackandregisters_16201)(TY10990* Gch_16204) {
TY10602** D_16205;
NI I_16213;
NI HEX3Atmp_19993;
NI Res_19995;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unmarkStackAndRegisters";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_16205 = 0;
F.line = 629;F.filename = "gc.nim";
D_16205 = (*Gch_16204).Decstack.D;
I_16213 = 0;
HEX3Atmp_19993 = 0;
F.line = 630;F.filename = "gc.nim";
HEX3Atmp_19993 = (NI64)((*Gch_16204).Decstack.Len - 1);
Res_19995 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19995 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19995 <= HEX3Atmp_19993)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_16213 = Res_19995;
F.line = 631;F.filename = "gc.nim";
F.line = 632;F.filename = "gc.nim";
Decref_11664(D_16205[(I_16213)-0]);
F.line = 1022;F.filename = "system.nim";
Res_19995 += 1;
} LA1: ;
F.line = 633;F.filename = "gc.nim";
(*Gch_16204).Decstack.Len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Collectct_11605)(TY10990* Gch_11608) {
NIM_BOOL LOC2;
NIM_BOOL LOC3;
NIM_BOOL LOC5;
NI LOC7;
NI LOC11;
NIM_BOOL LOC13;
NI LOC14;
NI LOC18;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "collectCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 636;F.filename = "gc.nim";
LOC3 = (256 <= (*Gch_11608).Zct.Len);
if (LOC3) goto LA4;
LOC5 = NIM_TRUE;
if (!(LOC5)) goto LA6;
LOC7 = Getoccupiedmem_1841();
LOC5 = (Cyclethreshold_11011 <= LOC7);
LA6: ;
LOC3 = LOC5;
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA8;
LOC2 = NIM_FALSE;
LA8: ;
if (!LOC2) goto LA9;
F.line = 638;F.filename = "gc.nim";
LOC11 = Stacksize_15401();
(*Gch_11608).Stat.Maxstacksize = (((*Gch_11608).Stat.Maxstacksize >= LOC11) ? (*Gch_11608).Stat.Maxstacksize : LOC11);
F.line = 639;F.filename = "gc.nim";
F.line = 640;F.filename = "gc.nim";
Markstackandregisters_15415(Gch_11608);
F.line = 641;F.filename = "gc.nim";
Markthreadstacks_14611(Gch_11608);
F.line = 642;F.filename = "gc.nim";
(*Gch_11608).Stat.Maxstackcells = (((*Gch_11608).Stat.Maxstackcells >= (*Gch_11608).Decstack.Len) ? (*Gch_11608).Stat.Maxstackcells : (*Gch_11608).Decstack.Len);
F.line = 643;F.filename = "gc.nim";
(*Gch_11608).Stat.Stackscans += 1;
F.line = 644;F.filename = "gc.nim";
Collectzct_15601(Gch_11608);
F.line = 646;F.filename = "gc.nim";
LOC14 = Getoccupiedmem_1841();
LOC13 = (Cyclethreshold_11011 <= LOC14);
if (LOC13) goto LA15;
LOC13 = NIM_FALSE;
LA15: ;
if (!LOC13) goto LA16;
F.line = 647;F.filename = "gc.nim";
Collectcycles_13803(Gch_11608);
F.line = 648;F.filename = "gc.nim";
Collectzct_15601(Gch_11608);
F.line = 649;F.filename = "gc.nim";
(*Gch_11608).Stat.Cyclecollections += 1;
F.line = 650;F.filename = "gc.nim";
LOC18 = Getoccupiedmem_1841();
Cyclethreshold_11011 = ((4194304 >= (NI64)(LOC18 * 2)) ? 4194304 : (NI64)(LOC18 * 2));
F.line = 652;F.filename = "gc.nim";
(*Gch_11608).Stat.Maxthreshold = (((*Gch_11608).Stat.Maxthreshold >= Cyclethreshold_11011) ? (*Gch_11608).Stat.Maxthreshold : Cyclethreshold_11011);
LA16: ;
F.line = 653;F.filename = "gc.nim";
Unmarkstackandregisters_16201(Gch_11608);
LA9: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Checkcollection_12300)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "checkCollection";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 324;F.filename = "gc.nim";
if (!(Recgclock_11012 == 0)) goto LA2;
F.line = 325;F.filename = "gc.nim";
Collectct_11605(&Gch_11010);
LA2: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, Unlock_11019)(TY10990* Gch_11022) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unlock";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 85;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 86;F.filename = "gc.nim";
pthread_mutex_unlock(&(*Gch_11022).Zctlock);
F.line = 87;F.filename = "gc.nim";
pthread_mutex_unlock(&(*Gch_11022).Cyclerootslock);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void*, newObj)(TNimType* Typ_12307, NI Size_12308) {
void* Result_12309;
TY10602* Res_12324;
void* LOC1;
NI L_12402;
TY10602** D_12403;
NI I_12413;
NI HEX3Atmp_19893;
NI HEX3Atmp_19894;
NI Res_19896;
TY10602* C_12414;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newObj";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_12309 = 0;
F.line = 329;F.filename = "gc.nim";
Lock_11013(&Gch_11010);
F.line = 330;F.filename = "gc.nim";
F.line = 331;F.filename = "gc.nim";
Checkcollection_12300();
Res_12324 = 0;
F.line = 332;F.filename = "gc.nim";
LOC1 = Rawalloc_9595(&Allocator_8729, (NI64)(Size_12308 + ((NI)sizeof(TY10602))));
Res_12324 = ((TY10602*) (LOC1));
F.line = 333;F.filename = "gc.nim";
zeroMem(((void*) (Res_12324)), (NI64)(Size_12308 + ((NI)sizeof(TY10602))));
F.line = 334;F.filename = "gc.nim";
F.line = 336;F.filename = "gc.nim";
(*Res_12324).Typ = Typ_12307;
F.line = 341;F.filename = "gc.nim";
(*Res_12324).Refcount = 4;
F.line = 342;F.filename = "gc.nim";
L_12402 = 0;
F.line = 347;F.filename = "gc.nim";
L_12402 = Gch_11010.Zct.Len;
D_12403 = 0;
F.line = 348;F.filename = "gc.nim";
D_12403 = Gch_11010.Zct.D;
I_12413 = 0;
HEX3Atmp_19893 = 0;
HEX3Atmp_19894 = 0;
F.line = 349;F.filename = "gc.nim";
HEX3Atmp_19893 = (NI64)(L_12402 - 1);
F.line = 349;F.filename = "gc.nim";
HEX3Atmp_19894 = ((0 >= (NI64)(L_12402 - 8)) ? 0 : (NI64)(L_12402 - 8));
Res_19896 = 0;
F.line = 1010;F.filename = "system.nim";
Res_19896 = HEX3Atmp_19893;
F.line = 1011;F.filename = "system.nim";
while (1) {
if (!(HEX3Atmp_19894 <= Res_19896)) goto LA3;
F.line = 1010;F.filename = "system.nim";
I_12413 = Res_19896;
C_12414 = 0;
F.line = 350;F.filename = "gc.nim";
C_12414 = D_12403[(I_12413)-0];
F.line = 351;F.filename = "gc.nim";
if (!((NU64)(8) <= (NU64)((*C_12414).Refcount))) goto LA5;
F.line = 352;F.filename = "gc.nim";
(*C_12414).Refcount = (NI64)((*C_12414).Refcount & -8);
F.line = 353;F.filename = "gc.nim";
D_12403[(I_12413)-0] = Res_12324;
F.line = 354;F.filename = "gc.nim";
goto LA2;
LA5: ;
F.line = 1013;F.filename = "system.nim";
Res_19896 -= 1;
} LA3: ;
F.line = 355;F.filename = "gc.nim";
Add_10658(&Gch_11010.Zct, Res_12324);
LA2: ;
F.line = 358;F.filename = "gc.nim";
Unlock_11019(&Gch_11010);
F.line = 359;F.filename = "gc.nim";
Result_12309 = Celltousr_11032(Res_12324);
framePtr = framePtr->prev;
return Result_12309;
}
static N_INLINE(NI, Atomicinc_2801)(NI* Memloc_2804, NI X_2805) {
NI Result_7208;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7208 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7208 = __sync_add_and_fetch(Memloc_2804, X_2805);
framePtr = framePtr->prev;
return Result_7208;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819) {
TY10602* C_11820;
NI LOC4;
TY10602* C_11822;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_11819 == NIM_NIL))) goto LA2;
C_11820 = 0;
F.line = 245;F.filename = "gc.nim";
C_11820 = Usrtocell_11036(Src_11819);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_2801(&(*C_11820).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_11818) == NIM_NIL))) goto LA6;
C_11822 = 0;
F.line = 248;F.filename = "gc.nim";
C_11822 = Usrtocell_11036((*Dest_11818));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_2806(&(*C_11822).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11658(C_11822);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_11818) = Src_11819;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17287) {
NimStringDesc* Result_17288;
NI S_17289;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawNewString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17288 = 0;
S_17289 = 0;
F.line = 38;F.filename = "sysstr.nim";
S_17289 = Space_17287;
F.line = 39;F.filename = "sysstr.nim";
if (!(S_17289 < 8)) goto LA2;
F.line = 39;F.filename = "sysstr.nim";
S_17289 = 7;
LA2: ;
F.line = 40;F.filename = "sysstr.nim";
LOC4 = newObj(&Strdesc_2817, (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(S_17289 + 1) * 1)));
Result_17288 = ((NimStringDesc*) (LOC4));
F.line = 42;F.filename = "sysstr.nim";
(*Result_17288).Sup.space = S_17289;
framePtr = framePtr->prev;
return Result_17288;
}
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308) {
NimStringDesc* Result_17309;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17309 = 0;
F.line = 59;F.filename = "sysstr.nim";
if (!(Src_17308 == NIM_NIL)) goto LA2;
F.line = 59;F.filename = "sysstr.nim";
F.line = 59;F.filename = "sysstr.nim";
Result_17309 = NIM_NIL;
goto BeforeRet;
LA2: ;
F.line = 60;F.filename = "sysstr.nim";
Result_17309 = rawNewString((*Src_17308).Sup.space);
F.line = 61;F.filename = "sysstr.nim";
(*Result_17309).Sup.len = (*Src_17308).Sup.len;
F.line = 62;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17309).data)), ((NCSTRING) ((*Src_17308).data)), ((int) ((NI64)((NI64)((*Src_17308).Sup.len + 1) * 1))));
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17309;
}
N_NIMCALL(void, Gcdisable_2463)(void) {
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_disable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 656;F.filename = "gc.nim";
LOC1 = Atomicinc_2801(&Recgclock_11012, 1);
framePtr = framePtr->prev;
}
static N_INLINE(void, Incref_11802)(TY10602* C_11804) {
NI LOC1;
NIM_BOOL LOC3;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 226;F.filename = "gc.nim";
LOC1 = Atomicinc_2801(&(*C_11804).Refcount, 8);
F.line = 227;F.filename = "gc.nim";
LOC3 = Canbecycleroot_11040(C_11804);
if (!LOC3) goto LA4;
F.line = 228;F.filename = "gc.nim";
Rtladdcycleroot_11652(C_11804);
LA4: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRef)(void** Dest_11814, void* Src_11815) {
TY10602* LOC4;
TY10602* LOC8;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 235;F.filename = "gc.nim";
F.line = 237;F.filename = "gc.nim";
if (!!((Src_11815 == NIM_NIL))) goto LA2;
F.line = 237;F.filename = "gc.nim";
LOC4 = Usrtocell_11036(Src_11815);
Incref_11802(LOC4);
LA2: ;
F.line = 238;F.filename = "gc.nim";
if (!!(((*Dest_11814) == NIM_NIL))) goto LA6;
F.line = 238;F.filename = "gc.nim";
LOC8 = Usrtocell_11036((*Dest_11814));
Decref_11664(LOC8);
LA6: ;
F.line = 239;F.filename = "gc.nim";
(*Dest_11814) = Src_11815;
framePtr = framePtr->prev;
}
static N_INLINE(void, pushCurrentException)(E_Base* E_4441) {
asgnRef((void**) &(*E_4441).parent, Currexception_4432);
asgnRef((void**) &Currexception_4432, E_4441);
}
static N_INLINE(NI, Resize_17201)(NI Old_17203) {
NI Result_17204;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "resize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17204 = 0;
F.line = 21;F.filename = "sysstr.nim";
if (!(Old_17203 <= 0)) goto LA2;
F.line = 21;F.filename = "sysstr.nim";
F.line = 21;F.filename = "sysstr.nim";
Result_17204 = 4;
goto BeforeRet;
goto LA1;
LA2: ;
if (!(Old_17203 < 65536)) goto LA4;
F.line = 22;F.filename = "sysstr.nim";
F.line = 22;F.filename = "sysstr.nim";
Result_17204 = (NI64)(Old_17203 * 2);
goto BeforeRet;
goto LA1;
LA4: ;
F.line = 23;F.filename = "sysstr.nim";
F.line = 23;F.filename = "sysstr.nim";
Result_17204 = (NI64)((NI64)(Old_17203 * 3) / 2);
goto BeforeRet;
LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17204;
}
N_NIMCALL(void*, Growobj_12807)(void* Old_12809, NI Newsize_12810) {
void* Result_12811;
TY10602* Ol_12813;
TY10602* Res_12838;
void* LOC1;
NI Elemsize_12839;
NI Oldsize_12849;
NI J_12854;
TY10602** D_12855;
NIM_BOOL LOC13;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "growObj";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_12811 = 0;
F.line = 368;F.filename = "gc.nim";
Lock_11013(&Gch_11010);
F.line = 369;F.filename = "gc.nim";
Checkcollection_12300();
Ol_12813 = 0;
F.line = 370;F.filename = "gc.nim";
Ol_12813 = Usrtocell_11036(Old_12809);
F.line = 371;F.filename = "gc.nim";
F.line = 372;F.filename = "gc.nim";
Res_12838 = 0;
F.line = 373;F.filename = "gc.nim";
LOC1 = Rawalloc_9595(&Allocator_8729, (NI64)(Newsize_12810 + ((NI)sizeof(TY10602))));
Res_12838 = ((TY10602*) (LOC1));
Elemsize_12839 = 0;
F.line = 374;F.filename = "gc.nim";
Elemsize_12839 = 1;
F.line = 375;F.filename = "gc.nim";
if (!!(((*(*Ol_12813).Typ).kind == ((NU8) 28)))) goto LA3;
F.line = 376;F.filename = "gc.nim";
Elemsize_12839 = (*(*(*Ol_12813).Typ).base).size;
LA3: ;
Oldsize_12849 = 0;
F.line = 378;F.filename = "gc.nim";
Oldsize_12849 = (NI64)((NI64)((*((TGenericSeq*) (Old_12809))).len * Elemsize_12839) + 16);
F.line = 379;F.filename = "gc.nim";
memcpy(((void*) (Res_12838)), ((void*) (Ol_12813)), (NI64)(Oldsize_12849 + ((NI)sizeof(TY10602))));
F.line = 380;F.filename = "gc.nim";
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Res_12838))) + (NU64)(Oldsize_12849))) + (NU64)(((NI)sizeof(TY10602)))))), (NI64)(Newsize_12810 - Oldsize_12849));
F.line = 382;F.filename = "gc.nim";
F.line = 383;F.filename = "gc.nim";
F.line = 388;F.filename = "gc.nim";
if (!((NI64)((*Ol_12813).Refcount & 7) == 4)) goto LA6;
J_12854 = 0;
F.line = 389;F.filename = "gc.nim";
J_12854 = (NI64)(Gch_11010.Zct.Len - 1);
D_12855 = 0;
F.line = 390;F.filename = "gc.nim";
D_12855 = Gch_11010.Zct.D;
F.line = 391;F.filename = "gc.nim";
while (1) {
if (!(0 <= J_12854)) goto LA8;
F.line = 392;F.filename = "gc.nim";
if (!(D_12855[(J_12854)-0] == Ol_12813)) goto LA10;
F.line = 393;F.filename = "gc.nim";
D_12855[(J_12854)-0] = Res_12838;
F.line = 394;F.filename = "gc.nim";
goto LA8;
LA10: ;
F.line = 395;F.filename = "gc.nim";
J_12854 -= 1;
} LA8: ;
LA6: ;
F.line = 396;F.filename = "gc.nim";
LOC13 = Canbecycleroot_11040(Ol_12813);
if (!LOC13) goto LA14;
F.line = 396;F.filename = "gc.nim";
Excl_10881(&Gch_11010.Cycleroots, Ol_12813);
LA14: ;
F.line = 402;F.filename = "gc.nim";
Rawdealloc_9864(&Allocator_8729, ((void*) (Ol_12813)));
F.line = 406;F.filename = "gc.nim";
Unlock_11019(&Gch_11010);
F.line = 407;F.filename = "gc.nim";
Result_12811 = Celltousr_11032(Res_12838);
framePtr = framePtr->prev;
return Result_12811;
}
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17382, NI Addlen_17383) {
NimStringDesc* Result_17384;
NI Sp_17389;
NI LOC4;
void* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "resizeString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17384 = 0;
F.line = 138;F.filename = "sysstr.nim";
if (!((NI64)((NI64)((*Dest_17382).Sup.len + Addlen_17383) + 1) <= (*Dest_17382).Sup.space)) goto LA2;
F.line = 139;F.filename = "sysstr.nim";
Result_17384 = Dest_17382;
goto LA1;
LA2: ;
Sp_17389 = 0;
F.line = 141;F.filename = "sysstr.nim";
LOC4 = Resize_17201((*Dest_17382).Sup.space);
Sp_17389 = ((LOC4 >= (NI64)((NI64)((*Dest_17382).Sup.len + Addlen_17383) + 1)) ? LOC4 : (NI64)((NI64)((*Dest_17382).Sup.len + Addlen_17383) + 1));
F.line = 142;F.filename = "sysstr.nim";
LOC5 = Growobj_12807(((void*) (Dest_17382)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)(Sp_17389 + 1) * 1)));
Result_17384 = ((NimStringDesc*) (LOC5));
F.line = 144;F.filename = "sysstr.nim";
(*Result_17384).Sup.space = Sp_17389;
LA1: ;
framePtr = framePtr->prev;
return Result_17384;
}
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17425, NI Newlen_17426) {
NimStringDesc* Result_17427;
NI N_17430;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setLengthStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17427 = 0;
N_17430 = 0;
F.line = 159;F.filename = "sysstr.nim";
N_17430 = ((Newlen_17426 >= 0) ? Newlen_17426 : 0);
F.line = 160;F.filename = "sysstr.nim";
if (!(N_17430 <= (*S_17425).Sup.space)) goto LA2;
F.line = 161;F.filename = "sysstr.nim";
Result_17427 = S_17425;
goto LA1;
LA2: ;
F.line = 163;F.filename = "sysstr.nim";
Result_17427 = resizeString(S_17425, N_17430);
LA1: ;
F.line = 164;F.filename = "sysstr.nim";
(*Result_17427).Sup.len = N_17430;
F.line = 165;F.filename = "sysstr.nim";
(*Result_17427).data[(N_17430)-0] = 0;
framePtr = framePtr->prev;
return Result_17427;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "sysstr.nim";
memcpy(((NCSTRING) (&(*Dest_17392).data[((*Dest_17392).Sup.len)-0])), ((NCSTRING) ((*Src_17393).data)), ((int) ((NI64)((NI64)((*Src_17393).Sup.len + 1) * 1))));
F.line = 151;F.filename = "sysstr.nim";
(*Dest_17392).Sup.len += (*Src_17393).Sup.len;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_18003) {
NimStringDesc* Result_18004;
NI I_18005;
NI Y_18006;
NI D_18007;
NI J_18048;
NI HEX3Atmp_20012;
NI Res_20014;
NIM_CHAR LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimIntToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18004 = 0;
F.line = 228;F.filename = "sysstr.nim";
Result_18004 = mnewString(32);
I_18005 = 0;
F.line = 229;F.filename = "sysstr.nim";
I_18005 = 0;
Y_18006 = 0;
F.line = 230;F.filename = "sysstr.nim";
Y_18006 = X_18003;
F.line = 231;F.filename = "sysstr.nim";
while (1) {
D_18007 = 0;
F.line = 232;F.filename = "sysstr.nim";
D_18007 = (NI64)(Y_18006 / 10);
F.line = 233;F.filename = "sysstr.nim";
Result_18004->data[I_18005] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_18006 - (NI64)(D_18007 * 10))))) + 48)))));
F.line = 234;F.filename = "sysstr.nim";
I_18005 += 1;
F.line = 235;F.filename = "sysstr.nim";
Y_18006 = D_18007;
F.line = 236;F.filename = "sysstr.nim";
if (!(Y_18006 == 0)) goto LA3;
F.line = 236;F.filename = "sysstr.nim";
goto LA1;
LA3: ;
} LA1: ;
F.line = 237;F.filename = "sysstr.nim";
if (!(X_18003 < 0)) goto LA6;
F.line = 238;F.filename = "sysstr.nim";
Result_18004->data[I_18005] = 45;
F.line = 239;F.filename = "sysstr.nim";
I_18005 += 1;
LA6: ;
F.line = 240;F.filename = "sysstr.nim";
Result_18004 = setLengthStr(Result_18004, I_18005);
J_18048 = 0;
HEX3Atmp_20012 = 0;
F.line = 242;F.filename = "sysstr.nim";
HEX3Atmp_20012 = (NI64)((NI64)(I_18005 / 2) - 1);
Res_20014 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20014 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20014 <= HEX3Atmp_20012)) goto LA8;
F.line = 1019;F.filename = "system.nim";
J_18048 = Res_20014;
F.line = 243;F.filename = "sysstr.nim";
LOC9 = Result_18004->data[J_18048];
Result_18004->data[J_18048] = Result_18004->data[(NI64)((NI64)(I_18005 - J_18048) - 1)];
Result_18004->data[(NI64)((NI64)(I_18005 - J_18048) - 1)] = LOC9;
F.line = 1022;F.filename = "system.nim";
Res_20014 += 1;
} LA8: ;
framePtr = framePtr->prev;
return Result_18004;
}
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604) {
NimStringDesc* Result_17365;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17365 = 0;
F.line = 93;F.filename = "sysstr.nim";
Result_17365 = S_1603;
F.line = 94;F.filename = "sysstr.nim";
if (!((*Result_17365).Sup.space <= (*Result_17365).Sup.len)) goto LA2;
F.line = 95;F.filename = "sysstr.nim";
(*Result_17365).Sup.space = Resize_17201((*Result_17365).Sup.space);
F.line = 96;F.filename = "sysstr.nim";
LOC4 = Growobj_12807(((void*) (Result_17365)), (NI64)(((NI)sizeof(TGenericSeq)) + (NI64)((NI64)((*Result_17365).Sup.space + 1) * 1)));
Result_17365 = ((NimStringDesc*) (LOC4));
LA2: ;
F.line = 102;F.filename = "sysstr.nim";
(*Result_17365).data[((*Result_17365).Sup.len)-0] = C_1604;
F.line = 103;F.filename = "sysstr.nim";
(*Result_17365).data[((NI64)((*Result_17365).Sup.len + 1))-0] = 0;
F.line = 104;F.filename = "sysstr.nim";
(*Result_17365).Sup.len += 1;
framePtr = framePtr->prev;
return Result_17365;
}
N_NIMCALL(void, Auxwritestacktrace_4460)(TFrame* F_4462, NimStringDesc** S_4464) {
TFrame* It_4466;
NI I_4467;
NI Total_4468;
NIM_BOOL LOC2;
TFrame* B_4506;
NI J_4537;
NI HEX3Atmp_19821;
NI Res_19823;
NIM_BOOL LOC13;
NI J_4610;
NI HEX3Atmp_19834;
NI Res_19836;
NimStringDesc* LOC19;
NI Oldlen_4626;
NimStringDesc* LOC23;
NI K_4642;
NI HEX3Atmp_19828;
NI Res_19830;
It_4466 = 0;
It_4466 = F_4462;
I_4467 = 0;
I_4467 = 0;
Total_4468 = 0;
Total_4468 = 0;
while (1) {
LOC2 = !((It_4466 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = (I_4467 <= 96);
LA3: ;
if (!LOC2) goto LA1;
Tempframes_4458[(I_4467)-0] = It_4466;
I_4467 += 1;
Total_4468 += 1;
It_4466 = (*It_4466).prev;
} LA1: ;
B_4506 = 0;
B_4506 = It_4466;
while (1) {
if (!!((It_4466 == NIM_NIL))) goto LA4;
Total_4468 += 1;
It_4466 = (*It_4466).prev;
} LA4: ;
J_4537 = 0;
HEX3Atmp_19821 = 0;
HEX3Atmp_19821 = (NI64)((NI64)(Total_4468 - I_4467) - 31);
Res_19823 = 0;
Res_19823 = 1;
while (1) {
if (!(Res_19823 <= HEX3Atmp_19821)) goto LA5;
J_4537 = Res_19823;
if (!!((B_4506 == NIM_NIL))) goto LA7;
B_4506 = (*B_4506).prev;
LA7: ;
Res_19823 += 1;
} LA5: ;
if (!!((Total_4468 == I_4467))) goto LA10;
Tempframes_4458[(I_4467)-0] = NIM_NIL;
I_4467 += 1;
LA10: ;
while (1) {
LOC13 = !((B_4506 == NIM_NIL));
if (!(LOC13)) goto LA14;
LOC13 = (I_4467 <= 127);
LA14: ;
if (!LOC13) goto LA12;
Tempframes_4458[(I_4467)-0] = B_4506;
I_4467 += 1;
B_4506 = (*B_4506).prev;
} LA12: ;
J_4610 = 0;
HEX3Atmp_19834 = 0;
HEX3Atmp_19834 = (NI64)(I_4467 - 1);
Res_19836 = 0;
Res_19836 = HEX3Atmp_19834;
while (1) {
if (!(0 <= Res_19836)) goto LA15;
J_4610 = Res_19836;
if (!(Tempframes_4458[(J_4610)-0] == NIM_NIL)) goto LA17;
(*S_4464) = resizeString((*S_4464), 1);
appendString((*S_4464), ((NimStringDesc*) &TMP20111));
LOC19 = 0;
LOC19 = nimIntToStr((NI64)((NI64)(Total_4468 - I_4467) - 1));
(*S_4464) = resizeString((*S_4464), LOC19->Sup.len + 0);
appendString((*S_4464), LOC19);
(*S_4464) = resizeString((*S_4464), 19);
appendString((*S_4464), ((NimStringDesc*) &TMP20112));
goto LA16;
LA17: ;
Oldlen_4626 = 0;
Oldlen_4626 = (*S_4464)->Sup.len;
Add_2522(S_4464, (*Tempframes_4458[(J_4610)-0]).filename);
if (!(0 < (*Tempframes_4458[(J_4610)-0]).line)) goto LA21;
(*S_4464) = addChar((*S_4464), 40);
LOC23 = 0;
LOC23 = nimIntToStr((*Tempframes_4458[(J_4610)-0]).line);
(*S_4464) = resizeString((*S_4464), LOC23->Sup.len + 0);
appendString((*S_4464), LOC23);
(*S_4464) = addChar((*S_4464), 41);
LA21: ;
K_4642 = 0;
HEX3Atmp_19828 = 0;
HEX3Atmp_19828 = ((1 >= (NI64)(25 - (NI64)((*S_4464)->Sup.len - Oldlen_4626))) ? 1 : (NI64)(25 - (NI64)((*S_4464)->Sup.len - Oldlen_4626)));
Res_19830 = 0;
Res_19830 = 1;
while (1) {
if (!(Res_19830 <= HEX3Atmp_19828)) goto LA24;
K_4642 = Res_19830;
(*S_4464) = addChar((*S_4464), 32);
Res_19830 += 1;
} LA24: ;
Add_2522(S_4464, (*Tempframes_4458[(J_4610)-0]).procname);
LA16: ;
(*S_4464) = resizeString((*S_4464), Stacktracenewline_4459->Sup.len + 0);
appendString((*S_4464), Stacktracenewline_4459);
Res_19836 -= 1;
} LA15: ;
}
N_NIMCALL(void, Rawwritestacktrace_4643)(NimStringDesc** S_4646) {
if (!(framePtr == NIM_NIL)) goto LA2;
(*S_4646) = resizeString((*S_4646), 28);
appendString((*S_4646), ((NimStringDesc*) &TMP20109));
(*S_4646) = resizeString((*S_4646), Stacktracenewline_4459->Sup.len + 0);
appendString((*S_4646), Stacktracenewline_4459);
goto LA1;
LA2: ;
(*S_4646) = resizeString((*S_4646), 33);
appendString((*S_4646), ((NimStringDesc*) &TMP20110));
(*S_4646) = resizeString((*S_4646), Stacktracenewline_4459->Sup.len + 0);
appendString((*S_4646), Stacktracenewline_4459);
Auxwritestacktrace_4460(framePtr, S_4646);
LA1: ;
}
N_NIMCALL(NimStringDesc*, toNimStr)(NCSTRING Str_17299, NI Len_17300) {
NimStringDesc* Result_17301;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "toNimStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17301 = 0;
F.line = 50;F.filename = "sysstr.nim";
Result_17301 = rawNewString(Len_17300);
F.line = 51;F.filename = "sysstr.nim";
(*Result_17301).Sup.len = Len_17300;
F.line = 52;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17301).data)), Str_17299, ((int) ((NI64)((NI64)(Len_17300 + 1) * 1))));
F.line = 53;F.filename = "sysstr.nim";
(*Result_17301).data[(Len_17300)-0] = 0;
framePtr = framePtr->prev;
return Result_17301;
}
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING Str_17304) {
NimStringDesc* Result_17305;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cstrToNimstr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17305 = 0;
F.line = 56;F.filename = "sysstr.nim";
F.line = 56;F.filename = "sysstr.nim";
LOC1 = strlen(Str_17304);
Result_17305 = toNimStr(Str_17304, LOC1);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17305;
}
N_NIMCALL(void, Write_3470)(FILE* F_3472, NCSTRING C_3473) {
fputs(C_3473, F_3472);
}
N_NIMCALL(void, Writetostderr_4232)(NCSTRING Msg_4234) {
Write_3470(stdout, Msg_4234);
}
static N_INLINE(void, Quitordebug_4801)(void) {
exit(1);
}
N_NIMCALL(void, Gcenable_2465)(void) {
NI LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_enable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 658;F.filename = "gc.nim";
if (!(0 < Recgclock_11012)) goto LA2;
F.line = 658;F.filename = "gc.nim";
LOC4 = Atomicdec_2806(&Recgclock_11012, 1);
LA2: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, raiseException)(E_Base* E_5004, NCSTRING Ename_5005) {
NIM_BOOL LOC8;
NimStringDesc* LOC12;
Gcdisable_2463();
(*E_5004).name = Ename_5005;
if (!!((excHandler == NIM_NIL))) goto LA2;
pushCurrentException(E_5004);
longjmp((*excHandler).context, ((NI32) 1));
goto LA1;
LA2: ;
if (!!(Buf_4453 == 0)) goto LA5;
Buf_4453 = setLengthStr(Buf_4453, 0);
Rawwritestacktrace_4643(&Buf_4453);
LOC8 = !(((*E_5004).message == NIM_NIL));
if (!(LOC8)) goto LA9;
LOC8 = !(((NU8)((*E_5004).message->data[0]) == (NU8)(0)));
LA9: ;
if (!LOC8) goto LA10;
Buf_4453 = resizeString(Buf_4453, 28);
appendString(Buf_4453, ((NimStringDesc*) &TMP20113));
Buf_4453 = resizeString(Buf_4453, (*E_5004).message->Sup.len + 0);
appendString(Buf_4453, (*E_5004).message);
goto LA7;
LA10: ;
Buf_4453 = resizeString(Buf_4453, 26);
appendString(Buf_4453, ((NimStringDesc*) &TMP20114));
LA7: ;
Buf_4453 = resizeString(Buf_4453, 2);
appendString(Buf_4453, ((NimStringDesc*) &TMP20115));
LOC12 = 0;
LOC12 = cstrToNimstr(Ename_5005);
Buf_4453 = resizeString(Buf_4453, LOC12->Sup.len + 0);
appendString(Buf_4453, LOC12);
Buf_4453 = resizeString(Buf_4453, 2);
appendString(Buf_4453, ((NimStringDesc*) &TMP20116));
Writetostderr_4232(Buf_4453->data);
goto LA4;
LA5: ;
Writetostderr_4232(Ename_5005);
LA4: ;
Quitordebug_4801();
LA1: ;
Gcenable_2465();
}
N_NIMCALL(void, Write_3458)(FILE* F_3460, NimStringDesc* S_3461) {
NI LOC2;
TY420* E_4063;
LOC2 = Writebuffer_3533(F_3460, ((void*) (S_3461->data)), S_3461->Sup.len);
if (!!((LOC2 == S_3461->Sup.len))) goto LA3;
E_4063 = 0;
E_4063 = (TY420*) newObj(NTI4062, sizeof(TY420));
(*E_4063).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4063).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20108)));
raiseException((E_Base*)E_4063, "EIO");
LA3: ;
}
static N_INLINE(void, rawEcho)(NimStringDesc* X_3894) {
Write_3458(stdout, X_3894);
}
static N_INLINE(void, rawEchoNL)(void) {
Write_3458(stdout, ((NimStringDesc*) &TMP20117));
}
N_NIMCALL(void, Quit_2622)(NimStringDesc* Errormsg_2624) {
rawEcho(Errormsg_2624);
rawEchoNL();
exit(1);
}
N_NIMCALL(void, Raiseoutofmem_8059)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "raiseOutOfMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/mmdisp.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 59;F.filename = "mmdisp.nim";
if (!(Goutofmem_8058 == NIM_NIL)) goto LA2;
F.line = 59;F.filename = "mmdisp.nim";
Quit_2622(((NimStringDesc*) &TMP20118));
LA2: ;
F.line = 60;F.filename = "mmdisp.nim";
asgnRefNoCycle((void**) &(*Goutofmem_8058).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20119)));
F.line = 61;F.filename = "mmdisp.nim";
raiseException((E_Base*)Goutofmem_8058, "EOutOfMemory");
framePtr = framePtr->prev;
}
static N_INLINE(void*, Osallocpages_8213)(NI Size_8215) {
void* Result_8216;
NIM_BOOL LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "osAllocPages";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8216 = 0;
F.line = 38;F.filename = "alloc.nim";
Result_8216 = mmap(NIM_NIL, Size_8215, ((NI32) 3), ((NI32) 258), ((NI32) -1), 0);
F.line = 40;F.filename = "alloc.nim";
LOC2 = (Result_8216 == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = (Result_8216 == ((void*) -1));
LA3: ;
if (!LOC2) goto LA4;
F.line = 41;F.filename = "alloc.nim";
Raiseoutofmem_8059();
LA4: ;
framePtr = framePtr->prev;
return Result_8216;
}
static N_INLINE(void, Inccurrmem_8686)(TY8674* A_8689, NI Bytes_8690) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incCurrMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 159;F.filename = "alloc.nim";
(*A_8689).Currmem += Bytes_8690;
framePtr = framePtr->prev;
}
N_NIMCALL(void*, Llalloc_8730)(TY8674* A_8733, NI Size_8734) {
void* Result_8735;
NIM_BOOL LOC2;
NI Request_8749;
void* LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "llAlloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8735 = 0;
F.line = 177;F.filename = "alloc.nim";
LOC2 = ((*A_8733).Llmem == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = ((*(*A_8733).Llmem).Size < Size_8734);
LA3: ;
if (!LOC2) goto LA4;
Request_8749 = 0;
F.line = 178;F.filename = "alloc.nim";
Request_8749 = Roundup_8656((NI64)(Size_8734 + ((NI)sizeof(TY8672))), 4096);
F.line = 179;F.filename = "alloc.nim";
LOC6 = Osallocpages_8213(Request_8749);
(*A_8733).Llmem = ((TY8672*) (LOC6));
F.line = 180;F.filename = "alloc.nim";
Inccurrmem_8686(A_8733, Request_8749);
F.line = 181;F.filename = "alloc.nim";
(*(*A_8733).Llmem).Size = (NI64)(Request_8749 - ((NI)sizeof(TY8672)));
F.line = 182;F.filename = "alloc.nim";
(*(*A_8733).Llmem).Acc = ((NI)sizeof(TY8672));
LA4: ;
F.line = 183;F.filename = "alloc.nim";
Result_8735 = ((void*) ((NI64)(((NI) ((*A_8733).Llmem)) + (*(*A_8733).Llmem).Acc)));
F.line = 184;F.filename = "alloc.nim";
(*(*A_8733).Llmem).Size -= Size_8734;
F.line = 185;F.filename = "alloc.nim";
(*(*A_8733).Llmem).Acc += Size_8734;
F.line = 186;F.filename = "alloc.nim";
zeroMem(Result_8735, Size_8734);
framePtr = framePtr->prev;
return Result_8735;
}
N_NIMCALL(TY8607*, Intsetput_8793)(TY8611* T_8796, NI Key_8797) {
TY8607* Result_8798;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IntSetPut";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8798 = 0;
F.line = 196;F.filename = "alloc.nim";
Result_8798 = Intsetget_8774(&(*T_8796), Key_8797);
F.line = 197;F.filename = "alloc.nim";
if (!(Result_8798 == NIM_NIL)) goto LA2;
F.line = 198;F.filename = "alloc.nim";
LOC4 = Llalloc_8730(&Allocator_8729, ((NI)sizeof(TY8607)));
Result_8798 = ((TY8607*) (LOC4));
F.line = 199;F.filename = "alloc.nim";
(*Result_8798).Next = (*T_8796).Data[((NI64)(Key_8797 & 1023))-0];
F.line = 200;F.filename = "alloc.nim";
(*T_8796).Data[((NI64)(Key_8797 & 1023))-0] = Result_8798;
F.line = 201;F.filename = "alloc.nim";
(*Result_8798).Key = Key_8797;
LA2: ;
framePtr = framePtr->prev;
return Result_8798;
}
N_NIMCALL(void, Incl_8831)(TY8611* S_8834, NI Key_8835) {
TY8607* T_8836;
NI U_8837;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Incl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
T_8836 = 0;
F.line = 212;F.filename = "alloc.nim";
T_8836 = Intsetput_8793(S_8834, (NI64)((NU64)(Key_8835) >> (NU64)(9)));
U_8837 = 0;
F.line = 213;F.filename = "alloc.nim";
U_8837 = (NI64)(Key_8835 & 511);
F.line = 214;F.filename = "alloc.nim";
(*T_8836).Bits[((NI64)((NU64)(U_8837) >> (NU64)(6)))-0] = (NI64)((*T_8836).Bits[((NI64)((NU64)(U_8837) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_8837 & 63))));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Splitchunk_9466)(TY8674* A_9469, TY8634* C_9470, NI Size_9471) {
TY8634* Rest_9472;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "splitChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Rest_9472 = 0;
F.line = 378;F.filename = "alloc.nim";
Rest_9472 = ((TY8634*) ((NI64)((NU64)(((NI) (C_9470))) + (NU64)(Size_9471))));
F.line = 379;F.filename = "alloc.nim";
F.line = 383;F.filename = "alloc.nim";
(*Rest_9472).Sup.Size = (NI64)((*C_9470).Sup.Size - Size_9471);
F.line = 384;F.filename = "alloc.nim";
(*Rest_9472).Sup.Used = NIM_FALSE;
F.line = 385;F.filename = "alloc.nim";
(*Rest_9472).Next = NIM_NIL;
F.line = 386;F.filename = "alloc.nim";
(*Rest_9472).Prev = NIM_NIL;
F.line = 387;F.filename = "alloc.nim";
(*Rest_9472).Sup.Prevsize = Size_9471;
F.line = 388;F.filename = "alloc.nim";
Updateprevsize_9011(A_9469, C_9470, (*Rest_9472).Sup.Size);
F.line = 389;F.filename = "alloc.nim";
(*C_9470).Sup.Size = Size_9471;
F.line = 390;F.filename = "alloc.nim";
LOC1 = Pageindex_8877(&Rest_9472->Sup);
Incl_8831(&(*A_9469).Chunkstarts, LOC1);
F.line = 391;F.filename = "alloc.nim";
Listadd_9407(&(*A_9469).Freechunkslist, Rest_9472);
framePtr = framePtr->prev;
}
N_NIMCALL(TY8634*, Requestoschunks_8892)(TY8674* A_8895, NI Size_8896) {
TY8634* Result_8897;
void* LOC1;
NI Nxt_8912;
TY8630* Next_8915;
NI LOC3;
NIM_BOOL LOC4;
NI Prv_8918;
TY8630* Prev_8921;
NIM_BOOL LOC8;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "requestOsChunks";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8897 = 0;
F.line = 249;F.filename = "alloc.nim";
Inccurrmem_8686(A_8895, Size_8896);
F.line = 250;F.filename = "alloc.nim";
(*A_8895).Freemem += Size_8896;
F.line = 251;F.filename = "alloc.nim";
LOC1 = Osallocpages_8213(Size_8896);
Result_8897 = ((TY8634*) (LOC1));
F.line = 252;F.filename = "alloc.nim";
F.line = 254;F.filename = "alloc.nim";
(*Result_8897).Next = NIM_NIL;
F.line = 255;F.filename = "alloc.nim";
(*Result_8897).Prev = NIM_NIL;
F.line = 256;F.filename = "alloc.nim";
(*Result_8897).Sup.Used = NIM_FALSE;
F.line = 257;F.filename = "alloc.nim";
(*Result_8897).Sup.Size = Size_8896;
Nxt_8912 = 0;
F.line = 259;F.filename = "alloc.nim";
Nxt_8912 = (NI64)((NU64)(((NI) (Result_8897))) + (NU64)(Size_8896));
F.line = 260;F.filename = "alloc.nim";
Next_8915 = 0;
F.line = 261;F.filename = "alloc.nim";
Next_8915 = ((TY8630*) (Nxt_8912));
F.line = 262;F.filename = "alloc.nim";
LOC3 = Pageindex_8877(Next_8915);
LOC4 = Contains_8811(&(*A_8895).Chunkstarts, LOC3);
if (!LOC4) goto LA5;
F.line = 264;F.filename = "alloc.nim";
(*Next_8915).Prevsize = Size_8896;
LA5: ;
Prv_8918 = 0;
F.line = 266;F.filename = "alloc.nim";
Prv_8918 = (NI64)((NU64)(((NI) (Result_8897))) - (NU64)(Lastsize_8891));
F.line = 267;F.filename = "alloc.nim";
Prev_8921 = 0;
F.line = 268;F.filename = "alloc.nim";
Prev_8921 = ((TY8630*) (Prv_8918));
F.line = 269;F.filename = "alloc.nim";
LOC9 = Pageindex_8877(Prev_8921);
LOC8 = Contains_8811(&(*A_8895).Chunkstarts, LOC9);
if (!(LOC8)) goto LA10;
LOC8 = ((*Prev_8921).Size == Lastsize_8891);
LA10: ;
if (!LOC8) goto LA11;
F.line = 271;F.filename = "alloc.nim";
(*Result_8897).Sup.Prevsize = Lastsize_8891;
goto LA7;
LA11: ;
F.line = 273;F.filename = "alloc.nim";
(*Result_8897).Sup.Prevsize = 0;
LA7: ;
F.line = 274;F.filename = "alloc.nim";
Lastsize_8891 = Size_8896;
framePtr = framePtr->prev;
return Result_8897;
}
N_NIMCALL(TY8634*, Getbigchunk_9492)(TY8674* A_9495, NI Size_9496) {
TY8634* Result_9497;
NI LOC11;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getBigChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9497 = 0;
F.line = 395;F.filename = "alloc.nim";
F.line = 396;F.filename = "alloc.nim";
F.line = 397;F.filename = "alloc.nim";
Result_9497 = (*A_9495).Freechunkslist;
F.line = 399;F.filename = "alloc.nim";
while (1) {
if (!!((Result_9497 == NIM_NIL))) goto LA2;
F.line = 402;F.filename = "alloc.nim";
F.line = 403;F.filename = "alloc.nim";
if (!((*Result_9497).Sup.Size == Size_9496)) goto LA4;
F.line = 404;F.filename = "alloc.nim";
Listremove_9046(&(*A_9495).Freechunkslist, Result_9497);
F.line = 405;F.filename = "alloc.nim";
goto LA1;
goto LA3;
LA4: ;
if (!(Size_9496 < (*Result_9497).Sup.Size)) goto LA6;
F.line = 408;F.filename = "alloc.nim";
Listremove_9046(&(*A_9495).Freechunkslist, Result_9497);
F.line = 409;F.filename = "alloc.nim";
Splitchunk_9466(A_9495, Result_9497, Size_9496);
F.line = 410;F.filename = "alloc.nim";
goto LA1;
goto LA3;
LA6: ;
LA3: ;
F.line = 411;F.filename = "alloc.nim";
Result_9497 = (*Result_9497).Next;
F.line = 412;F.filename = "alloc.nim";
} LA2: ;
F.line = 413;F.filename = "alloc.nim";
if (!(Size_9496 < 524288)) goto LA9;
F.line = 414;F.filename = "alloc.nim";
Result_9497 = Requestoschunks_8892(A_9495, 524288);
F.line = 415;F.filename = "alloc.nim";
Splitchunk_9466(A_9495, Result_9497, Size_9496);
goto LA8;
LA9: ;
F.line = 417;F.filename = "alloc.nim";
Result_9497 = Requestoschunks_8892(A_9495, Size_9496);
LA8: ;
LA1: ;
F.line = 418;F.filename = "alloc.nim";
(*Result_9497).Sup.Prevsize = 0;
F.line = 419;F.filename = "alloc.nim";
(*Result_9497).Sup.Used = NIM_TRUE;
F.line = 420;F.filename = "alloc.nim";
LOC11 = Pageindex_8877(&Result_9497->Sup);
Incl_8831(&(*A_9495).Chunkstarts, LOC11);
F.line = 421;F.filename = "alloc.nim";
(*A_9495).Freemem -= Size_9496;
framePtr = framePtr->prev;
return Result_9497;
}
N_NIMCALL(TY8632*, Getsmallchunk_9562)(TY8674* A_9565) {
TY8632* Result_9566;
TY8634* Res_9567;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getSmallChunk";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9566 = 0;
Res_9567 = 0;
F.line = 424;F.filename = "alloc.nim";
Res_9567 = Getbigchunk_9492(A_9565, 4096);
F.line = 425;F.filename = "alloc.nim";
F.line = 426;F.filename = "alloc.nim";
F.line = 427;F.filename = "alloc.nim";
Result_9566 = ((TY8632*) (Res_9567));
framePtr = framePtr->prev;
return Result_9566;
}
N_NIMCALL(void*, Rawalloc_9595)(TY8674* A_9598, NI Requestedsize_9599) {
void* Result_9600;
NI Size_9605;
NI S_9608;
TY8632* C_9609;
TY8634* C_9836;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawAlloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9600 = 0;
F.line = 436;F.filename = "alloc.nim";
F.line = 437;F.filename = "alloc.nim";
Size_9605 = 0;
F.line = 438;F.filename = "alloc.nim";
Size_9605 = Roundup_8656(Requestedsize_9599, 8);
F.line = 440;F.filename = "alloc.nim";
if (!(Size_9605 <= (NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)))) goto LA2;
S_9608 = 0;
F.line = 442;F.filename = "alloc.nim";
S_9608 = (NI64)(Size_9605 / 8);
C_9609 = 0;
F.line = 443;F.filename = "alloc.nim";
C_9609 = (*A_9598).Freesmallchunks[(S_9608)-0];
F.line = 444;F.filename = "alloc.nim";
if (!(C_9609 == NIM_NIL)) goto LA5;
F.line = 445;F.filename = "alloc.nim";
C_9609 = Getsmallchunk_9562(A_9598);
F.line = 446;F.filename = "alloc.nim";
(*C_9609).Freelist = NIM_NIL;
F.line = 447;F.filename = "alloc.nim";
F.line = 448;F.filename = "alloc.nim";
(*C_9609).Sup.Size = Size_9605;
F.line = 449;F.filename = "alloc.nim";
(*C_9609).Acc = Size_9605;
F.line = 450;F.filename = "alloc.nim";
(*C_9609).Free = (NI64)((NI64)(4096 - (NI64)(((NI)sizeof(TY8632)) - 8)) - Size_9605);
F.line = 451;F.filename = "alloc.nim";
(*C_9609).Next = NIM_NIL;
F.line = 452;F.filename = "alloc.nim";
(*C_9609).Prev = NIM_NIL;
F.line = 453;F.filename = "alloc.nim";
Listadd_9626(&(*A_9598).Freesmallchunks[(S_9608)-0], C_9609);
F.line = 454;F.filename = "alloc.nim";
Result_9600 = ((void*) (&(*C_9609).Data));
F.line = 455;F.filename = "alloc.nim";
goto LA4;
LA5: ;
F.line = 457;F.filename = "alloc.nim";
F.line = 460;F.filename = "alloc.nim";
F.line = 461;F.filename = "alloc.nim";
if (!((*C_9609).Freelist == NIM_NIL)) goto LA8;
F.line = 462;F.filename = "alloc.nim";
F.line = 463;F.filename = "alloc.nim";
Result_9600 = ((void*) ((NI64)((NU64)(((NI) (&(*C_9609).Data))) + (NU64)((*C_9609).Acc))));
F.line = 464;F.filename = "alloc.nim";
(*C_9609).Acc += Size_9605;
goto LA7;
LA8: ;
F.line = 466;F.filename = "alloc.nim";
Result_9600 = ((void*) ((*C_9609).Freelist));
F.line = 467;F.filename = "alloc.nim";
F.line = 468;F.filename = "alloc.nim";
(*C_9609).Freelist = (*(*C_9609).Freelist).Next;
LA7: ;
F.line = 469;F.filename = "alloc.nim";
(*C_9609).Free -= Size_9605;
F.line = 470;F.filename = "alloc.nim";
LA4: ;
F.line = 471;F.filename = "alloc.nim";
if (!((*C_9609).Free < Size_9605)) goto LA11;
F.line = 472;F.filename = "alloc.nim";
Listremove_9768(&(*A_9598).Freesmallchunks[(S_9608)-0], C_9609);
LA11: ;
goto LA1;
LA2: ;
F.line = 474;F.filename = "alloc.nim";
Size_9605 = Roundup_8656((NI64)(Requestedsize_9599 + (NI64)(((NI)sizeof(TY8634)) - 8)), 4096);
C_9836 = 0;
F.line = 476;F.filename = "alloc.nim";
C_9836 = Getbigchunk_9492(A_9598, Size_9605);
F.line = 477;F.filename = "alloc.nim";
F.line = 478;F.filename = "alloc.nim";
F.line = 479;F.filename = "alloc.nim";
F.line = 480;F.filename = "alloc.nim";
Result_9600 = ((void*) (&(*C_9836).Data));
F.line = 481;F.filename = "alloc.nim";
LA1: ;
F.line = 482;F.filename = "alloc.nim";
framePtr = framePtr->prev;
return Result_9600;
}
N_NOCONV(void*, Alloc_1774)(NI Size_1776) {
void* Result_10218;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "alloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10218 = 0;
F.line = 536;F.filename = "alloc.nim";
Result_10218 = Rawalloc_9595(&Allocator_8729, (NI64)(Size_1776 + ((NI)sizeof(TY8622))));
F.line = 537;F.filename = "alloc.nim";
(*((TY8622*) (Result_10218))).Zerofield = 1;
F.line = 538;F.filename = "alloc.nim";
F.line = 539;F.filename = "alloc.nim";
Result_10218 = ((void*) ((NI64)((NU64)(((NI) (Result_10218))) + (NU64)(((NI)sizeof(TY8622))))));
framePtr = framePtr->prev;
return Result_10218;
}
N_NOCONV(void*, Alloc0_1777)(NI Size_1779) {
void* Result_10224;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "alloc0";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10224 = 0;
F.line = 542;F.filename = "alloc.nim";
Result_10224 = Alloc_1774(Size_1779);
F.line = 543;F.filename = "alloc.nim";
zeroMem(Result_10224, Size_1779);
framePtr = framePtr->prev;
return Result_10224;
}
N_NIMCALL(void, Init_10678)(TY10618* S_10681, NI Cap_10682) {
void* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "init";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 59;F.filename = "cellsets.nim";
(*S_10681).Len = 0;
F.line = 60;F.filename = "cellsets.nim";
(*S_10681).Cap = Cap_10682;
F.line = 61;F.filename = "cellsets.nim";
LOC1 = Alloc0_1777((NI64)(Cap_10682 * 8));
(*S_10681).D = ((TY10602**) (LOC1));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Initgc_2811)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initGC";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 266;F.filename = "gc.nim";
Gch_11010.Stat.Stackscans = 0;
F.line = 267;F.filename = "gc.nim";
Gch_11010.Stat.Cyclecollections = 0;
F.line = 268;F.filename = "gc.nim";
Gch_11010.Stat.Maxthreshold = 0;
F.line = 269;F.filename = "gc.nim";
Gch_11010.Stat.Maxstacksize = 0;
F.line = 270;F.filename = "gc.nim";
Gch_11010.Stat.Maxstackcells = 0;
F.line = 271;F.filename = "gc.nim";
Gch_11010.Stat.Cycletablesize = 0;
F.line = 273;F.filename = "gc.nim";
Init_10678(&Gch_11010.Zct, 1024);
F.line = 274;F.filename = "gc.nim";
Init_10678(&Gch_11010.Tempstack, 1024);
F.line = 275;F.filename = "gc.nim";
Init_10688(&Gch_11010.Cycleroots);
F.line = 276;F.filename = "gc.nim";
Init_10678(&Gch_11010.Decstack, 1024);
F.line = 277;F.filename = "gc.nim";
pthread_mutex_init(&Gch_11010.Cyclerootslock, NIM_NIL);
F.line = 278;F.filename = "gc.nim";
pthread_mutex_init(&Gch_11010.Zctlock, NIM_NIL);
F.line = 279;F.filename = "gc.nim";
asgnRefNoCycle((void**) &Goutofmem_8058, (TY442*) newObj(NTI8062, sizeof(TY442)));
(*Goutofmem_8058).Sup.Sup.Sup.Sup.m_type = NTI442;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324) {
NI Result_3119;
int LOC1;
Result_3119 = 0;
LOC1 = strcmp(X_1323->data, Y_1324->data);
Result_3119 = ((NI) (LOC1));
goto BeforeRet;
BeforeRet: ;
return Result_3119;
}
N_NIMCALL(void, Rawreadline_3589)(FILE* F_3591, NimStringDesc** Result_3593) {
int C_3594;
(*Result_3593) = setLengthStr((*Result_3593), 0);
while (1) {
C_3594 = 0;
C_3594 = fgetc(F_3591);
if (!(C_3594 < ((NI32) 0))) goto LA3;
goto LA1;
LA3: ;
if (!(C_3594 == ((NI32) 10))) goto LA6;
goto LA1;
LA6: ;
if (!(C_3594 == ((NI32) 13))) goto LA9;
C_3594 = fgetc(F_3591);
if (!!((C_3594 == ((NI32) 10)))) goto LA12;
ungetc(C_3594, F_3591);
LA12: ;
goto LA1;
LA9: ;
(*Result_3593) = addChar((*Result_3593), ((NIM_CHAR) (((NI) (((NI) (C_3594)))))));
} LA1: ;
}
N_NIMCALL(NimStringDesc*, Readline_3479)(FILE* F_3481) {
NimStringDesc* Result_3606;
Result_3606 = 0;
Result_3606 = copyString(((NimStringDesc*) &TMP20120));
Rawreadline_3589(F_3481, &Result_3606);
return Result_3606;
}
N_NIMCALL(void, Write_3454)(FILE* F_3456, NI I_3457) {
fprintf(F_3456, "%lld", I_3457);
}
N_NIMCALL(void, Write_3462)(FILE* F_3464, NIM_BOOL B_3465) {
if (!B_3465) goto LA2;
Write_3458(F_3464, ((NimStringDesc*) &TMP20121));
goto LA1;
LA2: ;
Write_3458(F_3464, ((NimStringDesc*) &TMP20122));
LA1: ;
}
N_NIMCALL(void, Write_3450)(FILE* F_3452, NF R_3453) {
fprintf(F_3452, "%g", R_3453);
}
N_NIMCALL(void, Write_3466)(FILE* F_3468, NIM_CHAR C_3469) {
putc(C_3469, F_3468);
}
N_NIMCALL(void, Write_3474)(FILE* F_3476, NimStringDesc** A_3478, NI A_3478Len0) {
NimStringDesc* X_3853;
NI I_19806;
X_3853 = 0;
I_19806 = 0;
I_19806 = 0;
while (1) {
if (!(I_19806 < A_3478Len0)) goto LA1;
X_3853 = A_3478[I_19806];
Write_3458(F_3476, X_3853);
I_19806 += 1;
} LA1: ;
}
static N_INLINE(void, pushSafePoint)(TSafePoint* S_4435) {
(*S_4435).prev = excHandler;
excHandler = S_4435;
}
N_NIMCALL(NIM_BOOL, Open_3417)(FILE** F_3420, NimStringDesc* Filename_3421, NU8 Mode_3422, NI Bufsize_3423) {
NIM_BOOL Result_3912;
void* P_3913;
int LOC5;
TY442* E_3919;
int LOC11;
Result_3912 = 0;
P_3913 = 0;
P_3913 = fopen(Filename_3421->data, Formatopen_3901[(Mode_3422)-0]->data);
Result_3912 = !((P_3913 == NIM_NIL));
(*F_3420) = ((FILE*) (P_3913));
if (!(0 < Bufsize_3423)) goto LA2;
LOC5 = setvbuf((*F_3420), NIM_NIL, _IOFBF, ((int) (Bufsize_3423)));
if (!!((LOC5 == ((NI32) 0)))) goto LA6;
E_3919 = 0;
E_3919 = (TY442*) newObj(NTI8062, sizeof(TY442));
(*E_3919).Sup.Sup.Sup.Sup.m_type = NTI442;
asgnRefNoCycle((void**) &(*E_3919).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20119)));
raiseException((E_Base*)E_3919, "EOutOfMemory");
LA6: ;
goto LA1;
LA2: ;
if (!(Bufsize_3423 == 0)) goto LA9;
LOC11 = setvbuf((*F_3420), NIM_NIL, _IONBF, ((NI32) 0));
goto LA1;
LA9: ;
LA1: ;
return Result_3912;
}
N_NIMCALL(NI64, Getfilepos_3542)(FILE* F_3544) {
NI64 Result_4105;
NI LOC1;
TY420* E_4109;
Result_4105 = 0;
LOC1 = ftell(F_3544);
Result_4105 = ((NI64) (LOC1));
if (!(Result_4105 < 0)) goto LA3;
E_4109 = 0;
E_4109 = (TY420*) newObj(NTI4062, sizeof(TY420));
(*E_4109).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4109).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20124)));
raiseException((E_Base*)E_4109, "EIO");
LA3: ;
return Result_4105;
}
N_NIMCALL(void, Setfilepos_3538)(FILE* F_3540, NI64 Pos_3541) {
NI LOC2;
TY420* E_4086;
LOC2 = fseek(F_3540, ((NI) (Pos_3541)), 0);
if (!!((LOC2 == 0))) goto LA3;
E_4086 = 0;
E_4086 = (TY420*) newObj(NTI4062, sizeof(TY420));
(*E_4086).Sup.Sup.Sup.Sup.m_type = NTI420;
asgnRefNoCycle((void**) &(*E_4086).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20125)));
raiseException((E_Base*)E_4086, "EIO");
LA3: ;
}
N_NIMCALL(NI64, Getfilesize_3495)(FILE* F_3497) {
NI64 Result_4128;
NI64 Oldpos_4129;
NI LOC1;
Result_4128 = 0;
Oldpos_4129 = 0;
Oldpos_4129 = Getfilepos_3542(F_3497);
LOC1 = fseek(F_3497, 0, 2);
Result_4128 = Getfilepos_3542(F_3497);
Setfilepos_3538(F_3497, Oldpos_4129);
return Result_4128;
}
N_NIMCALL(NI, Readbuffer_3514)(FILE* F_3516, void* Buffer_3517, NI Len_3518) {
NI Result_3999;
Result_3999 = 0;
Result_3999 = fread(Buffer_3517, 1, Len_3518, F_3516);
return Result_3999;
}
static N_INLINE(void, popSafePoint)(void) {
excHandler = (*excHandler).prev;
}
static N_INLINE(E_Base*, getCurrentException)(void) {
E_Base* Result_19204;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCurrentException";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19204 = 0;
F.line = 1582;F.filename = "system.nim";
Result_19204 = Currexception_4432;
framePtr = framePtr->prev;
return Result_19204;
}
static N_INLINE(void, popCurrentException)(void) {
asgnRef((void**) &Currexception_4432, (*Currexception_4432).parent);
}
N_NIMCALL(void, reraiseException)(void) {
TY452* E_5034;
if (!(Currexception_4432 == NIM_NIL)) goto LA2;
E_5034 = 0;
E_5034 = (TY452*) newObj(NTI5033, sizeof(TY452));
(*E_5034).Sup.Sup.Sup.m_type = NTI452;
asgnRefNoCycle((void**) &(*E_5034).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20126)));
raiseException((E_Base*)E_5034, "ENoExceptionToReraise");
goto LA1;
LA2: ;
raiseException(Currexception_4432, (*Currexception_4432).name);
LA1: ;
}
N_NIMCALL(NimStringDesc*, Readfile_3447)(NimStringDesc* Filename_3449) {
NimStringDesc* Result_3857;
FILE* F_3858;
TSafePoint TMP20123;
NIM_BOOL LOC2;
NI64 volatile Len_3860;
NI LOC9;
Result_3857 = 0;
F_3858 = 0;
pushSafePoint(&TMP20123);
TMP20123.status = setjmp(TMP20123.context);
if (TMP20123.status == 0) {
LOC2 = Open_3417(&F_3858, Filename_3449, ((NU8) 0), -1);
if (!LOC2) goto LA3;
Len_3860 = 0;
Len_3860 = Getfilesize_3495(F_3858);
if (!(Len_3860 < IL64(9223372036854775807))) goto LA6;
Result_3857 = mnewString(((NI) (Len_3860)));
LOC9 = Readbuffer_3514(F_3858, ((void*) (&Result_3857->data[0])), ((NI) (Len_3860)));
if (!!((((NI64) (LOC9)) == Len_3860))) goto LA10;
Result_3857 = copyString(NIM_NIL);
LA10: ;
LA6: ;
fclose(F_3858);
goto LA1;
LA3: ;
Result_3857 = copyString(NIM_NIL);
LA1: ;
popSafePoint();
} else {
popSafePoint();
if (getCurrentException()->Sup.m_type == NTI420) {
Result_3857 = copyString(NIM_NIL);
TMP20123.status = 0;popCurrentException();}
}
if (TMP20123.status != 0) reraiseException();
return Result_3857;
}
N_NIMCALL(NIM_BOOL, Endoffile_3438)(FILE* F_3440) {
NIM_BOOL Result_3869;
int C_3870;
Result_3869 = 0;
C_3870 = 0;
C_3870 = fgetc(F_3440);
ungetc(C_3870, F_3440);
Result_3869 = (C_3870 == ((NI32) -1));
goto BeforeRet;
BeforeRet: ;
return Result_3869;
}
N_NIMCALL(NIM_BOOL, Reopen_3430)(FILE* F_3432, NimStringDesc* Filename_3433, NU8 Mode_3434) {
NIM_BOOL Result_3942;
void* P_3943;
FILE* LOC1;
Result_3942 = 0;
P_3943 = 0;
LOC1 = freopen(Filename_3433->data, Formatopen_3901[(Mode_3434)-0]->data, F_3432);
P_3943 = ((void*) (LOC1));
Result_3942 = !((P_3943 == NIM_NIL));
return Result_3942;
}
N_NIMCALL(NIM_BOOL, Open_3424)(FILE** F_3427, int Filehandle_3428, NU8 Mode_3429) {
NIM_BOOL Result_3962;
Result_3962 = 0;
(*F_3427) = fdopen(Filehandle_3428, Formatopen_3901[(Mode_3429)-0]->data);
Result_3962 = !(((*F_3427) == NIM_NIL));
return Result_3962;
}
N_NIMCALL(NI, Readbytes_3498)(FILE* F_3500, NI8* A_3503, NI A_3503Len0, NI Start_3504, NI Len_3505) {
NI Result_4008;
Result_4008 = 0;
Result_4008 = Readbuffer_3514(F_3500, ((void*) (&A_3503[Start_3504])), Len_3505);
return Result_4008;
}
N_NIMCALL(NI, Readchars_3506)(FILE* F_3508, NIM_CHAR* A_3511, NI A_3511Len0, NI Start_3512, NI Len_3513) {
NI Result_4018;
Result_4018 = 0;
Result_4018 = Readbuffer_3514(F_3508, ((void*) (&A_3511[Start_3512])), Len_3513);
return Result_4018;
}
N_NIMCALL(NI, Writebytes_3519)(FILE* F_3521, NI8* A_3523, NI A_3523Len0, NI Start_3524, NI Len_3525) {
NI Result_4027;
NI8* X_4031;
Result_4027 = 0;
X_4031 = 0;
X_4031 = ((NI8*) (A_3523));
Result_4027 = Writebuffer_3533(F_3521, ((void*) (&X_4031[(Start_3524)-0])), Len_3525);
return Result_4027;
}
N_NIMCALL(NI, Writechars_3526)(FILE* F_3528, NIM_CHAR* A_3530, NI A_3530Len0, NI Start_3531, NI Len_3532) {
NI Result_4040;
NI8* X_4044;
Result_4040 = 0;
X_4044 = 0;
X_4044 = ((NI8*) (A_3530));
Result_4040 = Writebuffer_3533(F_3528, ((void*) (&X_4044[(Start_3531)-0])), Len_3532);
return Result_4040;
}
N_NOINLINE(void, raiseOverflow)(void) {
EOverflow* E_5492;
E_5492 = 0;
E_5492 = (EOverflow*) newObj(NTI5491, sizeof(EOverflow));
(*E_5492).Sup.Sup.Sup.Sup.m_type = NTI432;
asgnRefNoCycle((void**) &(*E_5492).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20132)));
raiseException((E_Base*)E_5492, "EOverflow");
}
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604) {
NI Result_5605;
NIM_BOOL LOC2;
Result_5605 = 0;
Result_5605 = (NI64)((NU64)(A_5603) + (NU64)(B_5604));
LOC2 = (0 <= (NI64)(Result_5605 ^ A_5603));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5605 ^ B_5604));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5605;
}
N_NIMCALL(NI, mulInt)(NI A_6603, NI B_6604) {
NI Result_6605;
NF Resasfloat_6606;
NF Floatprod_6607;
Result_6605 = 0;
Resasfloat_6606 = 0;
Floatprod_6607 = 0;
Result_6605 = (NI64)((NU64)(A_6603) * (NU64)(B_6604));
Floatprod_6607 = (((double) (A_6603)) * ((double) (B_6604)));
Resasfloat_6606 = ((double) (Result_6605));
if (!(Resasfloat_6606 == Floatprod_6607)) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((Resasfloat_6606 - Floatprod_6607) > 0? ((Resasfloat_6606 - Floatprod_6607)) : -((Resasfloat_6606 - Floatprod_6607)))) <= (Floatprod_6607 > 0? (Floatprod_6607) : -(Floatprod_6607)))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_6605;
}
N_NIMCALL(void*, newSeq)(TNimType* Typ_12804, NI Len_12805) {
void* Result_12806;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_12806 = 0;
F.line = 363;F.filename = "gc.nim";
LOC1 = mulInt(Len_12805, (*(*Typ_12804).base).size);
LOC2 = addInt(LOC1, 16);
Result_12806 = newObj(Typ_12804, LOC2);
F.line = 364;F.filename = "gc.nim";
(*((TGenericSeq*) (Result_12806))).len = Len_12805;
F.line = 365;F.filename = "gc.nim";
(*((TGenericSeq*) (Result_12806))).space = Len_12805;
framePtr = framePtr->prev;
return Result_12806;
}
N_NIMCALL(TY4177*, Cstringarraytoseq_4173)(NCSTRING* A_4175, NI Len_4176) {
TY4177* Result_4178;
NI I_4213;
NI HEX3Atmp_19812;
NI Res_19814;
Result_4178 = 0;
Result_4178 = (TY4177*) newSeq(NTI4177, Len_4176);
I_4213 = 0;
HEX3Atmp_19812 = 0;
HEX3Atmp_19812 = (NI64)(Len_4176 - 1);
Res_19814 = 0;
Res_19814 = 0;
while (1) {
if (!(Res_19814 <= HEX3Atmp_19812)) goto LA1;
I_4213 = Res_19814;
asgnRefNoCycle((void**) &Result_4178->data[I_4213], cstrToNimstr(A_4175[(I_4213)-0]));
Res_19814 += 1;
} LA1: ;
return Result_4178;
}
N_NIMCALL(TY4177*, Cstringarraytoseq_4214)(NCSTRING* A_4216) {
TY4177* Result_4218;
NI L_4219;
Result_4218 = 0;
L_4219 = 0;
L_4219 = 0;
while (1) {
if (!!((A_4216[(L_4219)-0] == NIM_NIL))) goto LA1;
L_4219 += 1;
} LA1: ;
Result_4218 = Cstringarraytoseq_4173(A_4216, L_4219);
return Result_4218;
}
N_NIMCALL(void, internalAssert)(NCSTRING File_5054, NI Line_5055, NIM_BOOL Cond_5056) {
NimStringDesc* LOC7;
if (!!(Cond_5056)) goto LA2;
Gcdisable_2463();
if (!!(Assertbuf_4454 == 0)) goto LA5;
Assertbuf_4454 = setLengthStr(Assertbuf_4454, 0);
Assertbuf_4454 = resizeString(Assertbuf_4454, 26);
appendString(Assertbuf_4454, ((NimStringDesc*) &TMP20133));
Add_2522(&Assertbuf_4454, File_5054);
Assertbuf_4454 = resizeString(Assertbuf_4454, 7);
appendString(Assertbuf_4454, ((NimStringDesc*) &TMP20134));
LOC7 = 0;
LOC7 = nimIntToStr(Line_5055);
Assertbuf_4454 = resizeString(Assertbuf_4454, LOC7->Sup.len + 0);
appendString(Assertbuf_4454, LOC7);
Assertbuf_4454 = resizeString(Assertbuf_4454, 1);
appendString(Assertbuf_4454, ((NimStringDesc*) &TMP20117));
asgnRefNoCycle((void**) &(*Gassertionfailed_5051).Sup.Sup.message, copyString(Assertbuf_4454));
LA5: ;
Gcenable_2465();
if (!!((Gassertionfailed_5051 == NIM_NIL))) goto LA9;
raiseException((E_Base*)Gassertionfailed_5051, "EAssertionFailed");
goto LA8;
LA9: ;
fprintf(stdout, "Assertion failure: file %s line %ld\012", File_5054, Line_5055);
exit(1);
LA8: ;
LA2: ;
}
N_NIMCALL(void, Writestacktrace_5071)(void) {
NimStringDesc* S_5073;
S_5073 = 0;
S_5073 = copyString(((NimStringDesc*) &TMP20120));
Rawwritestacktrace_4643(&S_5073);
Writetostderr_4232(S_5073->data);
}
N_NOCONV(void, signalHandler)(int Sig_5078) {
int S_5079;
S_5079 = 0;
S_5079 = Sig_5078;
Gcdisable_2463();
Buf_4453 = setLengthStr(Buf_4453, 0);
Rawwritestacktrace_4643(&Buf_4453);
if (!(S_5079 == SIGINT)) goto LA2;
Buf_4453 = resizeString(Buf_4453, 31);
appendString(Buf_4453, ((NimStringDesc*) &TMP20135));
goto LA1;
LA2: ;
if (!(S_5079 == SIGSEGV)) goto LA4;
Buf_4453 = resizeString(Buf_4453, 61);
appendString(Buf_4453, ((NimStringDesc*) &TMP20136));
goto LA1;
LA4: ;
if (!(S_5079 == SIGABRT)) goto LA6;
if (!Dbgaborting_5075) goto LA9;
goto BeforeRet;
LA9: ;
Buf_4453 = resizeString(Buf_4453, 31);
appendString(Buf_4453, ((NimStringDesc*) &TMP20137));
goto LA1;
LA6: ;
if (!(S_5079 == SIGFPE)) goto LA11;
Buf_4453 = resizeString(Buf_4453, 26);
appendString(Buf_4453, ((NimStringDesc*) &TMP20138));
goto LA1;
LA11: ;
if (!(S_5079 == SIGILL)) goto LA13;
Buf_4453 = resizeString(Buf_4453, 27);
appendString(Buf_4453, ((NimStringDesc*) &TMP20139));
goto LA1;
LA13: ;
if (!(S_5079 == SIGSEGV)) goto LA15;
Buf_4453 = resizeString(Buf_4453, 60);
appendString(Buf_4453, ((NimStringDesc*) &TMP20140));
goto LA1;
LA15: ;
Buf_4453 = resizeString(Buf_4453, 15);
appendString(Buf_4453, ((NimStringDesc*) &TMP20141));
LA1: ;
Writetostderr_4232(Buf_4453->data);
Dbgaborting_5075 = NIM_TRUE;
Gcenable_2465();
exit(1);
BeforeRet: ;
}
N_NIMCALL(void, registerSignalHandler)(void) {
signal(SIGINT, signalHandler);
signal(SIGSEGV, signalHandler);
signal(SIGABRT, signalHandler);
signal(SIGFPE, signalHandler);
signal(SIGILL, signalHandler);
signal(SIGSEGV, signalHandler);
}
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 X_18067) {
NimStringDesc* Result_18068;
NI I_18069;
NI64 Y_18070;
NI64 D_18071;
NI J_18112;
NI HEX3Atmp_20019;
NI Res_20021;
NIM_CHAR LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimInt64ToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18068 = 0;
F.line = 253;F.filename = "sysstr.nim";
Result_18068 = mnewString(32);
I_18069 = 0;
F.line = 254;F.filename = "sysstr.nim";
I_18069 = 0;
Y_18070 = 0;
F.line = 255;F.filename = "sysstr.nim";
Y_18070 = X_18067;
F.line = 256;F.filename = "sysstr.nim";
while (1) {
D_18071 = 0;
F.line = 257;F.filename = "sysstr.nim";
D_18071 = (NI64)(Y_18070 / 10);
F.line = 258;F.filename = "sysstr.nim";
Result_18068->data[I_18069] = ((NIM_CHAR) (((NI) ((NI64)((NI64)abs(((NI) ((NI64)(Y_18070 - (NI64)(D_18071 * 10))))) + 48)))));
F.line = 259;F.filename = "sysstr.nim";
I_18069 += 1;
F.line = 260;F.filename = "sysstr.nim";
Y_18070 = D_18071;
F.line = 261;F.filename = "sysstr.nim";
if (!(Y_18070 == 0)) goto LA3;
F.line = 261;F.filename = "sysstr.nim";
goto LA1;
LA3: ;
} LA1: ;
F.line = 262;F.filename = "sysstr.nim";
if (!(X_18067 < 0)) goto LA6;
F.line = 263;F.filename = "sysstr.nim";
Result_18068->data[I_18069] = 45;
F.line = 264;F.filename = "sysstr.nim";
I_18069 += 1;
LA6: ;
F.line = 265;F.filename = "sysstr.nim";
Result_18068 = setLengthStr(Result_18068, I_18069);
J_18112 = 0;
HEX3Atmp_20019 = 0;
F.line = 267;F.filename = "sysstr.nim";
HEX3Atmp_20019 = (NI64)((NI64)(I_18069 / 2) - 1);
Res_20021 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20021 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20021 <= HEX3Atmp_20019)) goto LA8;
F.line = 1019;F.filename = "system.nim";
J_18112 = Res_20021;
F.line = 268;F.filename = "sysstr.nim";
LOC9 = Result_18068->data[J_18112];
Result_18068->data[J_18112] = Result_18068->data[(NI64)((NI64)(I_18069 - J_18112) - 1)];
Result_18068->data[(NI64)((NI64)(I_18069 - J_18112) - 1)] = LOC9;
F.line = 1022;F.filename = "system.nim";
Res_20021 += 1;
} LA8: ;
framePtr = framePtr->prev;
return Result_18068;
}
N_NOINLINE(void, raiseRangeError)(NI64 Val_5218) {
TY448* E_5220;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
E_5220 = 0;
E_5220 = (TY448*) newObj(NTI5219, sizeof(TY448));
(*E_5220).Sup.Sup.Sup.m_type = NTI448;
LOC2 = 0;
LOC3 = 0;
LOC3 = nimInt64ToStr(Val_5218);
LOC2 = rawNewString(LOC3->Sup.len + 19);
appendString(LOC2, ((NimStringDesc*) &TMP20142));
appendString(LOC2, LOC3);
appendString(LOC2, ((NimStringDesc*) &TMP20143));
asgnRefNoCycle((void**) &(*E_5220).Sup.Sup.message, LOC2);
raiseException((E_Base*)E_5220, "EOutOfRange");
}
N_NOINLINE(void, raiseIndexError)(void) {
TY444* E_5257;
E_5257 = 0;
E_5257 = (TY444*) newObj(NTI5256, sizeof(TY444));
(*E_5257).Sup.Sup.Sup.m_type = NTI444;
asgnRefNoCycle((void**) &(*E_5257).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20144)));
raiseException((E_Base*)E_5257, "EInvalidIndex");
}
N_NOINLINE(void, raiseFieldError)(NimStringDesc* F_5275) {
TY446* E_5277;
NimStringDesc* LOC2;
E_5277 = 0;
E_5277 = (TY446*) newObj(NTI5276, sizeof(TY446));
(*E_5277).Sup.Sup.Sup.m_type = NTI446;
LOC2 = 0;
LOC2 = rawNewString(F_5275->Sup.len + 18);
appendString(LOC2, F_5275);
appendString(LOC2, ((NimStringDesc*) &TMP20145));
asgnRefNoCycle((void**) &(*E_5277).Sup.Sup.message, LOC2);
raiseException((E_Base*)E_5277, "EInvalidField");
}
static N_INLINE(NI, chckIndx)(NI I_4405, NI A_4406, NI B_4407) {
NI Result_5306;
NIM_BOOL LOC2;
Result_5306 = 0;
LOC2 = (A_4406 <= I_4405);
if (!(LOC2)) goto LA3;
LOC2 = (I_4405 <= B_4407);
LA3: ;
if (!LOC2) goto LA4;
Result_5306 = I_4405;
goto BeforeRet;
goto LA1;
LA4: ;
raiseIndexError();
LA1: ;
BeforeRet: ;
return Result_5306;
}
static N_INLINE(NI, chckRange)(NI I_4410, NI A_4411, NI B_4412) {
NI Result_5316;
NIM_BOOL LOC2;
Result_5316 = 0;
LOC2 = (A_4411 <= I_4410);
if (!(LOC2)) goto LA3;
LOC2 = (I_4410 <= B_4412);
LA3: ;
if (!LOC2) goto LA4;
Result_5316 = I_4410;
goto BeforeRet;
goto LA1;
LA4: ;
raiseRangeError(((NI64) (I_4410)));
LA1: ;
BeforeRet: ;
return Result_5316;
}
N_NIMCALL(NI64, chckRange64)(NI64 I_5323, NI64 A_5324, NI64 B_5325) {
NI64 Result_5326;
NIM_BOOL LOC2;
Result_5326 = 0;
LOC2 = (A_5324 <= I_5323);
if (!(LOC2)) goto LA3;
LOC2 = (I_5323 <= B_5325);
LA3: ;
if (!LOC2) goto LA4;
Result_5326 = I_5323;
goto BeforeRet;
goto LA1;
LA4: ;
raiseRangeError(I_5323);
LA1: ;
BeforeRet: ;
return Result_5326;
}
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_18060) {
NimStringDesc* Result_18061;
TY18062 Buf_18064;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimFloatToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18061 = 0;
memset((void*)&Buf_18064, 0, sizeof(Buf_18064));
F.line = 247;F.filename = "sysstr.nim";
sprintf(((NCSTRING) (Buf_18064)), "%#g", X_18060);
F.line = 248;F.filename = "sysstr.nim";
F.line = 248;F.filename = "sysstr.nim";
Result_18061 = cstrToNimstr(((NCSTRING) (Buf_18064)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18061;
}
static N_INLINE(NF, chckRangeF)(NF X_4415, NF A_4416, NF B_4417) {
NF Result_5336;
NIM_BOOL LOC2;
TY448* E_5338;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
Result_5336 = 0;
LOC2 = (A_4416 <= X_4415);
if (!(LOC2)) goto LA3;
LOC2 = (X_4415 <= B_4417);
LA3: ;
if (!LOC2) goto LA4;
Result_5336 = X_4415;
goto BeforeRet;
goto LA1;
LA4: ;
E_5338 = 0;
E_5338 = (TY448*) newObj(NTI5219, sizeof(TY448));
(*E_5338).Sup.Sup.Sup.m_type = NTI448;
LOC7 = 0;
LOC8 = 0;
LOC8 = nimFloatToStr(X_4415);
LOC7 = rawNewString(LOC8->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP20142));
appendString(LOC7, LOC8);
appendString(LOC7, ((NimStringDesc*) &TMP20143));
asgnRefNoCycle((void**) &(*E_5338).Sup.Sup.message, LOC7);
raiseException((E_Base*)E_5338, "EOutOfRange");
LA1: ;
BeforeRet: ;
return Result_5336;
}
static N_INLINE(void, chckNil)(void* P_4420) {
if (!(P_4420 == NIM_NIL)) goto LA2;
raise(SIGSEGV);
LA2: ;
}
N_NIMCALL(void, chckObj)(TNimType* Obj_5375, TNimType* Subclass_5376) {
TNimType* X_5377;
TY456* E_5408;
X_5377 = 0;
X_5377 = Obj_5375;
if (!(X_5377 == Subclass_5376)) goto LA2;
goto BeforeRet;
LA2: ;
while (1) {
if (!!((X_5377 == Subclass_5376))) goto LA4;
if (!(X_5377 == NIM_NIL)) goto LA6;
E_5408 = 0;
E_5408 = (TY456*) newObj(NTI5407, sizeof(TY456));
(*E_5408).Sup.Sup.Sup.m_type = NTI456;
asgnRefNoCycle((void**) &(*E_5408).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20146)));
raiseException((E_Base*)E_5408, "EInvalidObjectConversion");
LA6: ;
X_5377 = (*X_5377).base;
} LA4: ;
BeforeRet: ;
}
static N_INLINE(void, chckObjAsgn)(TNimType* A_5426, TNimType* B_5427) {
TY454* E_5438;
if (!!((A_5426 == B_5427))) goto LA2;
E_5438 = 0;
E_5438 = (TY454*) newObj(NTI5437, sizeof(TY454));
(*E_5438).Sup.Sup.Sup.m_type = NTI454;
asgnRefNoCycle((void**) &(*E_5438).Sup.Sup.message, copyString(((NimStringDesc*) &TMP20147)));
raiseException((E_Base*)E_5438, "EInvalidObjectAssignment");
LA2: ;
}
N_NIMCALL(NIM_BOOL, isObj)(TNimType* Obj_5456, TNimType* Subclass_5457) {
NIM_BOOL Result_5458;
TNimType* X_5459;
Result_5458 = 0;
X_5459 = 0;
X_5459 = Obj_5456;
if (!(X_5459 == Subclass_5457)) goto LA2;
Result_5458 = NIM_TRUE;
goto BeforeRet;
LA2: ;
while (1) {
if (!!((X_5459 == Subclass_5457))) goto LA4;
if (!(X_5459 == NIM_NIL)) goto LA6;
Result_5458 = NIM_FALSE;
goto BeforeRet;
LA6: ;
X_5459 = (*X_5459).base;
} LA4: ;
Result_5458 = NIM_TRUE;
goto BeforeRet;
BeforeRet: ;
return Result_5458;
}
N_NOINLINE(void, raiseDivByZero)(void) {
EDivByZero* E_5511;
E_5511 = 0;
E_5511 = (EDivByZero*) newObj(NTI5510, sizeof(EDivByZero));
(*E_5511).Sup.Sup.Sup.Sup.m_type = NTI430;
asgnRefNoCycle((void**) &(*E_5511).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20148)));
raiseException((E_Base*)E_5511, "EDivByZero");
}
static N_INLINE(NI64, addInt64)(NI64 A_5529, NI64 B_5530) {
NI64 Result_5531;
NIM_BOOL LOC2;
Result_5531 = 0;
Result_5531 = (NI64)((NU64)(A_5529) + (NU64)(B_5530));
LOC2 = (0 <= (Result_5531 ^ A_5529));
if (LOC2) goto LA3;
LOC2 = (0 <= (Result_5531 ^ B_5530));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5531;
}
static N_INLINE(NI64, subInt64)(NI64 A_5538, NI64 B_5539) {
NI64 Result_5540;
NIM_BOOL LOC2;
Result_5540 = 0;
Result_5540 = (NI64)((NU64)(A_5538) - (NU64)(B_5539));
LOC2 = (0 <= (Result_5540 ^ A_5538));
if (LOC2) goto LA3;
LOC2 = (0 <= (Result_5540 ^ ~(B_5539)));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5540;
}
static N_INLINE(NI64, negInt64)(NI64 A_5547) {
NI64 Result_5548;
Result_5548 = 0;
if (!!((A_5547 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
Result_5548 = -(A_5547);
goto BeforeRet;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5548;
}
static N_INLINE(NI64, absInt64)(NI64 A_5553) {
NI64 Result_5554;
Result_5554 = 0;
if (!!((A_5553 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
if (!(0 <= A_5553)) goto LA5;
Result_5554 = A_5553;
goto BeforeRet;
goto LA4;
LA5: ;
Result_5554 = -(A_5553);
goto BeforeRet;
LA4: ;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5554;
}
static N_INLINE(NI64, divInt64)(NI64 A_5561, NI64 B_5562) {
NI64 Result_5563;
NIM_BOOL LOC5;
Result_5563 = 0;
if (!(B_5562 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
LOC5 = (A_5561 == (IL64(-9223372036854775807) - IL64(1)));
if (!(LOC5)) goto LA6;
LOC5 = (B_5562 == -1);
LA6: ;
if (!LOC5) goto LA7;
raiseOverflow();
LA7: ;
Result_5563 = (NI64)(A_5561 / B_5562);
goto BeforeRet;
BeforeRet: ;
return Result_5563;
}
static N_INLINE(NI64, modInt64)(NI64 A_5572, NI64 B_5573) {
NI64 Result_5574;
Result_5574 = 0;
if (!(B_5573 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
Result_5574 = (NI64)(A_5572 % B_5573);
goto BeforeRet;
BeforeRet: ;
return Result_5574;
}
N_NIMCALL(NI64, mulInt64)(NI64 A_5579, NI64 B_5580) {
NI64 Result_5581;
NF64 Resasfloat_5582;
NF64 Floatprod_5583;
Result_5581 = 0;
Resasfloat_5582 = 0;
Floatprod_5583 = 0;
Result_5581 = (NI64)((NU64)(A_5579) * (NU64)(B_5580));
Floatprod_5583 = ((double) (A_5579));
Floatprod_5583 = ((NF64) ((((NF) (Floatprod_5583)) * ((NF) (((double) (B_5580)))))));
Resasfloat_5582 = ((double) (Result_5581));
if (!(((NF) (Resasfloat_5582)) == ((NF) (Floatprod_5583)))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((32.0000 * ((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583))) > 0? ((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583)))) : -((((NF) (Resasfloat_5582)) - ((NF) (Floatprod_5583)))))) <= (((NF) (Floatprod_5583)) > 0? (((NF) (Floatprod_5583))) : -(((NF) (Floatprod_5583)))))) goto LA5;
goto BeforeRet;
LA5: ;
raiseOverflow();
BeforeRet: ;
return Result_5581;
}
static N_INLINE(NI, absInt)(NI A_5586) {
NI Result_5587;
Result_5587 = 0;
if (!!((A_5586 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
if (!(0 <= A_5586)) goto LA5;
Result_5587 = A_5586;
goto BeforeRet;
goto LA4;
LA5: ;
Result_5587 = ((NI64)-(A_5586));
goto BeforeRet;
LA4: ;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_5587;
}
static N_INLINE(NI, subInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI64)((NU64)(A_5803) - (NU64)(B_5804));
LOC2 = (0 <= (NI64)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5805 ^ (NI64)((NU64) ~(B_5804))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
static N_INLINE(NI, negInt)(NI A_6003) {
NI Result_6004;
Result_6004 = 0;
if (!!((A_6003 == (IL64(-9223372036854775807) - IL64(1))))) goto LA2;
Result_6004 = ((NI64)-(A_6003));
goto BeforeRet;
LA2: ;
raiseOverflow();
BeforeRet: ;
return Result_6004;
}
static N_INLINE(NI, divInt)(NI A_6203, NI B_6204) {
NI Result_6205;
NIM_BOOL LOC5;
Result_6205 = 0;
if (!(B_6204 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
LOC5 = (A_6203 == (IL64(-9223372036854775807) - IL64(1)));
if (!(LOC5)) goto LA6;
LOC5 = (B_6204 == -1);
LA6: ;
if (!LOC5) goto LA7;
raiseOverflow();
LA7: ;
Result_6205 = (NI64)(A_6203 / B_6204);
goto BeforeRet;
BeforeRet: ;
return Result_6205;
}
static N_INLINE(NI, modInt)(NI A_6403, NI B_6404) {
NI Result_6405;
Result_6405 = 0;
if (!(B_6404 == 0)) goto LA2;
raiseDivByZero();
LA2: ;
Result_6405 = (NI64)(A_6403 % B_6404);
goto BeforeRet;
BeforeRet: ;
return Result_6405;
}
N_NOINLINE(void, Raisefloatinvalidop_6801)(void) {
EFloatInvalidOp* E_6804;
E_6804 = 0;
E_6804 = (EFloatInvalidOp*) newObj(NTI6803, sizeof(EFloatInvalidOp));
(*E_6804).Sup.Sup.Sup.Sup.m_type = NTI460;
asgnRefNoCycle((void**) &(*E_6804).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20149)));
raiseException((E_Base*)E_6804, "EFloatInvalidOp");
}
static N_INLINE(void, nanCheck)(NF64 X_6822) {
if (!!((((NF) (X_6822)) == ((NF) (X_6822))))) goto LA2;
Raisefloatinvalidop_6801();
LA2: ;
}
N_NOINLINE(void, Raisefloatoverflow_6823)(NF64 X_6825) {
EFloatOverflow* E_6827;
EFloatUnderflow* E_6844;
if (!(0.00000 < ((NF) (X_6825)))) goto LA2;
E_6827 = 0;
E_6827 = (EFloatOverflow*) newObj(NTI6826, sizeof(EFloatOverflow));
(*E_6827).Sup.Sup.Sup.Sup.m_type = NTI464;
asgnRefNoCycle((void**) &(*E_6827).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20150)));
raiseException((E_Base*)E_6827, "EFloatOverflow");
goto LA1;
LA2: ;
E_6844 = 0;
E_6844 = (EFloatUnderflow*) newObj(NTI6843, sizeof(EFloatUnderflow));
(*E_6844).Sup.Sup.Sup.Sup.m_type = NTI466;
asgnRefNoCycle((void**) &(*E_6844).Sup.Sup.Sup.message, copyString(((NimStringDesc*) &TMP20151)));
raiseException((E_Base*)E_6844, "EFloatUnderflow");
LA1: ;
}
static N_INLINE(void, infCheck)(NF64 X_6862) {
NIM_BOOL LOC2;
LOC2 = !((((NF) (X_6862)) == 0.00000));
if (!(LOC2)) goto LA3;
LOC2 = ((((NF) (X_6862)) * 0.500000) == ((NF) (X_6862)));
LA3: ;
if (!LOC2) goto LA4;
Raisefloatoverflow_6823(X_6862);
LA4: ;
}
N_NIMCALL(void, Rawwrite_6864)(FILE* F_6866, NimStringDesc* S_6867) {
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rawWrite";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 20;F.filename = "dyncalls.nim";
LOC1 = Writebuffer_3533(F_6866, ((void*) (S_6867->data)), S_6867->Sup.len);
framePtr = framePtr->prev;
}
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* Path_1621) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimLoadLibraryError";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 26;F.filename = "dyncalls.nim";
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP20152));
F.line = 27;F.filename = "dyncalls.nim";
Rawwrite_6864(stdout, Path_1621);
F.line = 28;F.filename = "dyncalls.nim";
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP20117));
F.line = 29;F.filename = "dyncalls.nim";
exit(1);
framePtr = framePtr->prev;
}
N_NOINLINE(void, Procaddrerror_6873)(NCSTRING Name_6875) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ProcAddrError";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 33;F.filename = "dyncalls.nim";
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP20153));
F.line = 34;F.filename = "dyncalls.nim";
Write_3470(stdout, Name_6875);
F.line = 35;F.filename = "dyncalls.nim";
Rawwrite_6864(stdout, ((NimStringDesc*) &TMP20117));
F.line = 36;F.filename = "dyncalls.nim";
exit(1);
framePtr = framePtr->prev;
}
N_NIMCALL(void, nimUnloadLibrary)(void* Lib_1614) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimUnloadLibrary";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 67;F.filename = "dyncalls.nim";
dlclose(Lib_1614);
framePtr = framePtr->prev;
}
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* Path_1611) {
void* Result_6896;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimLoadLibrary";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_6896 = 0;
F.line = 70;F.filename = "dyncalls.nim";
Result_6896 = dlopen(Path_1611->data, RTLD_NOW);
framePtr = framePtr->prev;
return Result_6896;
}
N_NIMCALL(void*, nimGetProcAddr)(void* Lib_1617, NCSTRING Name_1618) {
void* Result_6901;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGetProcAddr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/dyncalls.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_6901 = 0;
F.line = 74;F.filename = "dyncalls.nim";
Result_6901 = dlsym(Lib_1617, Name_1618);
F.line = 75;F.filename = "dyncalls.nim";
if (!(Result_6901 == NIM_NIL)) goto LA2;
F.line = 75;F.filename = "dyncalls.nim";
Procaddrerror_6873(Name_1618);
LA2: ;
framePtr = framePtr->prev;
return Result_6901;
}
N_NIMCALL(NI, countBits32)(int N_7006) {
NI Result_7007;
int V_7008;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countBits32";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7007 = 0;
V_7008 = 0;
F.line = 16;F.filename = "sets.nim";
V_7008 = N_7006;
F.line = 17;F.filename = "sets.nim";
V_7008 = (NI32)((NU32)(V_7008) - (NU32)((NI32)((NI32)((NU32)(V_7008) >> (NU32)(((NI32) 1))) & ((NI32) 1431655765))));
F.line = 18;F.filename = "sets.nim";
V_7008 = (NI32)((NU32)((NI32)(V_7008 & ((NI32) 858993459))) + (NU32)((NI32)((NI32)((NU32)(V_7008) >> (NU32)(((NI32) 2))) & ((NI32) 858993459))));
F.line = 19;F.filename = "sets.nim";
Result_7007 = ((NI) ((NI32)((NU32)((NI32)((NU32)((NI32)((NI32)((NU32)(V_7008) + (NU32)((NI32)((NU32)(V_7008) >> (NU32)(((NI32) 4))))) & ((NI32) 252645135))) * (NU32)(((NI32) 16843009)))) >> (NU32)(((NI32) 24)))));
framePtr = framePtr->prev;
return Result_7007;
}
N_NIMCALL(NI, countBits64)(NI64 N_7011) {
NI Result_7012;
NI LOC1;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countBits64";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7012 = 0;
F.line = 22;F.filename = "sets.nim";
LOC1 = countBits32(((NI32)(NU32)(NU64)((N_7011 & 65535))));
LOC2 = countBits32(((NI32)(NU32)(NU64)((NI64)((NU64)(N_7011) >> (NU64)(16)))));
Result_7012 = (NI64)(LOC1 + LOC2);
framePtr = framePtr->prev;
return Result_7012;
}
N_NIMCALL(NI, cardSet)(TY7002 S_7015, NI Len_7016) {
NI Result_7017;
NI I_7025;
NI HEX3Atmp_19846;
NI Res_19848;
NI LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cardSet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7017 = 0;
F.line = 26;F.filename = "sets.nim";
Result_7017 = 0;
I_7025 = 0;
HEX3Atmp_19846 = 0;
F.line = 27;F.filename = "sets.nim";
HEX3Atmp_19846 = (NI64)(Len_7016 - 1);
Res_19848 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19848 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19848 <= HEX3Atmp_19846)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_7025 = Res_19848;
F.line = 28;F.filename = "sets.nim";
LOC2 = countBits32(((int) (((NI)(NU)(NU8)(S_7015[(I_7025)-0])))));
Result_7017 += LOC2;
F.line = 1022;F.filename = "system.nim";
Res_19848 += 1;
} LA1: ;
framePtr = framePtr->prev;
return Result_7017;
}
N_NIMCALL(void, Createthread_8010)(TY8002* T_8013, TY8004 Fn_8014) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "createThread";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Destroythread_8015)(TY8002* T_8018) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "destroyThread";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(NI, Getmaxmem_8722)(TY8674* A_8725) {
NI Result_8726;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getMaxMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8726 = 0;
F.line = 169;F.filename = "alloc.nim";
F.line = 169;F.filename = "alloc.nim";
Result_8726 = (((*A_8725).Currmem >= (*A_8725).Maxmem) ? (*A_8725).Currmem : (*A_8725).Maxmem);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_8726;
}
N_NIMCALL(NIM_BOOL, Containsorincl_8856)(TY8611* S_8859, NI Key_8860) {
NIM_BOOL Result_8861;
TY8607* T_8862;
NI U_8874;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ContainsOrIncl";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_8861 = 0;
T_8862 = 0;
F.line = 224;F.filename = "alloc.nim";
T_8862 = Intsetget_8774(&(*S_8859), (NI64)((NU64)(Key_8860) >> (NU64)(9)));
F.line = 225;F.filename = "alloc.nim";
if (!!((T_8862 == NIM_NIL))) goto LA2;
U_8874 = 0;
F.line = 226;F.filename = "alloc.nim";
U_8874 = (NI64)(Key_8860 & 511);
F.line = 227;F.filename = "alloc.nim";
Result_8861 = !(((NI64)((*T_8862).Bits[((NI64)((NU64)(U_8874) >> (NU64)(6)))-0] & (NI64)((NU64)(1) << (NU64)((NI64)(U_8874 & 63)))) == 0));
F.line = 228;F.filename = "alloc.nim";
if (!!(Result_8861)) goto LA5;
F.line = 229;F.filename = "alloc.nim";
(*T_8862).Bits[((NI64)((NU64)(U_8874) >> (NU64)(6)))-0] = (NI64)((*T_8862).Bits[((NI64)((NU64)(U_8874) >> (NU64)(6)))-0] | (NI64)((NU64)(1) << (NU64)((NI64)(U_8874 & 63))));
LA5: ;
goto LA1;
LA2: ;
F.line = 232;F.filename = "alloc.nim";
Incl_8831(S_8859, Key_8860);
F.line = 233;F.filename = "alloc.nim";
Result_8861 = NIM_FALSE;
LA1: ;
framePtr = framePtr->prev;
return Result_8861;
}
N_NIMCALL(void, Writefreelist_8967)(TY8674* A_8969) {
TY8634* It_8970;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "writeFreeList";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
It_8970 = 0;
F.line = 300;F.filename = "alloc.nim";
It_8970 = (*A_8969).Freechunkslist;
F.line = 301;F.filename = "alloc.nim";
fprintf(stdout, "freeChunksList: %p\012", It_8970);
F.line = 302;F.filename = "alloc.nim";
while (1) {
if (!!((It_8970 == NIM_NIL))) goto LA1;
F.line = 303;F.filename = "alloc.nim";
fprintf(stdout, "it: %p, next: %p, prev: %p\012", It_8970, (*It_8970).Next, (*It_8970).Prev);
F.line = 305;F.filename = "alloc.nim";
It_8970 = (*It_8970).Next;
} LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(NI, Getcellsize_9590)(void* P_9592) {
NI Result_9593;
TY8630* C_9594;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCellSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9593 = 0;
C_9594 = 0;
F.line = 432;F.filename = "alloc.nim";
C_9594 = Pageaddr_8885(P_9592);
F.line = 433;F.filename = "alloc.nim";
Result_9593 = (*C_9594).Size;
framePtr = framePtr->prev;
return Result_9593;
}
N_NIMCALL(NI, Ptrsize_10233)(void* P_10235) {
NI Result_10236;
void* X_10237;
TY8630* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ptrSize";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10236 = 0;
X_10237 = 0;
F.line = 552;F.filename = "alloc.nim";
X_10237 = ((void*) ((NI64)((NU64)(((NI) (P_10235))) - (NU64)(((NI)sizeof(TY8622))))));
F.line = 553;F.filename = "alloc.nim";
LOC1 = Pageaddr_8885(X_10237);
Result_10236 = (NI64)((*LOC1).Size - ((NI)sizeof(TY8622)));
framePtr = framePtr->prev;
return Result_10236;
}
N_NOCONV(void*, Realloc_1780)(void* P_1782, NI Newsize_1783) {
void* Result_10242;
NI LOC7;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "realloc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10242 = 0;
F.line = 556;F.filename = "alloc.nim";
if (!(0 < Newsize_1783)) goto LA2;
F.line = 557;F.filename = "alloc.nim";
Result_10242 = Alloc_1774(Newsize_1783);
F.line = 558;F.filename = "alloc.nim";
if (!!((P_1782 == NIM_NIL))) goto LA5;
F.line = 559;F.filename = "alloc.nim";
LOC7 = Ptrsize_10233(P_1782);
memcpy(Result_10242, P_1782, LOC7);
F.line = 560;F.filename = "alloc.nim";
Dealloc_1784(P_1782);
LA5: ;
goto LA1;
LA2: ;
if (!!((P_1782 == NIM_NIL))) goto LA8;
F.line = 562;F.filename = "alloc.nim";
Dealloc_1784(P_1782);
goto LA1;
LA8: ;
LA1: ;
framePtr = framePtr->prev;
return Result_10242;
}
N_NIMCALL(NI, Countfreemem_10245)(void) {
NI Result_10247;
TY8634* It_10248;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "countFreeMem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10247 = 0;
It_10248 = 0;
F.line = 566;F.filename = "alloc.nim";
It_10248 = Allocator_8729.Freechunkslist;
F.line = 567;F.filename = "alloc.nim";
while (1) {
if (!!((It_10248 == NIM_NIL))) goto LA1;
F.line = 568;F.filename = "alloc.nim";
Result_10247 += (*It_10248).Sup.Size;
F.line = 569;F.filename = "alloc.nim";
It_10248 = (*It_10248).Next;
} LA1: ;
framePtr = framePtr->prev;
return Result_10247;
}
static N_INLINE(NIM_BOOL, Contains_10636)(TY10618* S_10638, TY10602* C_10639) {
NIM_BOOL Result_10640;
NI I_10648;
NI HEX3Atmp_19856;
NI Res_19858;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_10640 = 0;
I_10648 = 0;
HEX3Atmp_19856 = 0;
F.line = 43;F.filename = "cellsets.nim";
HEX3Atmp_19856 = (NI64)((*S_10638).Len - 1);
Res_19858 = 0;
F.line = 1019;F.filename = "system.nim";
Res_19858 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_19858 <= HEX3Atmp_19856)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_10648 = Res_19858;
F.line = 44;F.filename = "cellsets.nim";
if (!((*S_10638).D[(I_10648)-0] == C_10639)) goto LA3;
F.line = 44;F.filename = "cellsets.nim";
F.line = 44;F.filename = "cellsets.nim";
Result_10640 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 1022;F.filename = "system.nim";
Res_19858 += 1;
} LA1: ;
F.line = 45;F.filename = "cellsets.nim";
F.line = 45;F.filename = "cellsets.nim";
Result_10640 = NIM_FALSE;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_10640;
}
N_NIMCALL(void, Deinit_10683)(TY10618* S_10686) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "deinit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/cellsets.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 64;F.filename = "cellsets.nim";
Dealloc_1784(((void*) ((*S_10686).D)));
F.line = 65;F.filename = "cellsets.nim";
(*S_10686).D = NIM_NIL;
F.line = 66;F.filename = "cellsets.nim";
(*S_10686).Len = 0;
F.line = 67;F.filename = "cellsets.nim";
(*S_10686).Cap = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(TNimType*, extGetCellType)(void* C_11057) {
TNimType* Result_11058;
TY10602* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "extGetCellType";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11058 = 0;
F.line = 107;F.filename = "gc.nim";
LOC1 = Usrtocell_11036(C_11057);
Result_11058 = (*LOC1).Typ;
framePtr = framePtr->prev;
return Result_11058;
}
N_NIMCALL(NI, getRefcount)(void* P_11061) {
NI Result_11062;
TY10602* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "internRefcount";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11062 = 0;
F.line = 110;F.filename = "gc.nim";
LOC1 = Usrtocell_11036(P_11061);
Result_11062 = (NI64)((NU64)(((NI) ((*LOC1).Refcount))) >> (NU64)(3));
framePtr = framePtr->prev;
return Result_11062;
}
static N_INLINE(void, nimGCref)(void* P_11808) {
TY10602* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGCref";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 230;F.filename = "gc.nim";
LOC1 = Usrtocell_11036(P_11808);
Incref_11802(LOC1);
framePtr = framePtr->prev;
}
static N_INLINE(void, nimGCunref)(void* P_11811) {
TY10602* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimGCunref";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 231;F.filename = "gc.nim";
LOC1 = Usrtocell_11036(P_11811);
Decref_11664(LOC1);
framePtr = framePtr->prev;
}
N_NOINLINE(NIM_BOOL, Isonstack_11609)(void* P_11611) {
NIM_BOOL Result_15409;
void* volatile Stacktop_15410;
NI B_15411;
NI A_15413;
NI X_15414;
NIM_BOOL LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "IsOnStack";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_15409 = 0;
Stacktop_15410 = 0;
B_15411 = 0;
F.line = 574;F.filename = "gc.nim";
B_15411 = ((NI) (Stackbottom_11009));
A_15413 = 0;
F.line = 575;F.filename = "gc.nim";
A_15413 = ((NI) (&Stacktop_15410));
X_15414 = 0;
F.line = 576;F.filename = "gc.nim";
X_15414 = ((NI) (P_11611));
F.line = 577;F.filename = "gc.nim";
LOC1 = ((NU64)(A_15413) <= (NU64)(X_15414));
if (!(LOC1)) goto LA2;
LOC1 = ((NU64)(X_15414) <= (NU64)(B_15411));
LA2: ;
Result_15409 = LOC1;
framePtr = framePtr->prev;
return Result_15409;
}
N_NIMCALL(void, unsureAsgnRef)(void** Dest_11826, void* Src_11827) {
NIM_BOOL LOC2;
TY10602* LOC8;
TY10602* LOC12;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "unsureAsgnRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 257;F.filename = "gc.nim";
LOC2 = Isonstack_11609(((void*) (Dest_11826)));
if (!!(LOC2)) goto LA3;
F.line = 258;F.filename = "gc.nim";
if (!!((Src_11827 == NIM_NIL))) goto LA6;
F.line = 258;F.filename = "gc.nim";
LOC8 = Usrtocell_11036(Src_11827);
Incref_11802(LOC8);
LA6: ;
F.line = 259;F.filename = "gc.nim";
if (!!(((*Dest_11826) == NIM_NIL))) goto LA10;
F.line = 259;F.filename = "gc.nim";
LOC12 = Usrtocell_11036((*Dest_11826));
Decref_11664(LOC12);
LA10: ;
LA3: ;
F.line = 260;F.filename = "gc.nim";
(*Dest_11826) = Src_11827;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcsetstrategy_2475)(NU8 Strategy_2477) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_setStrategy";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 661;F.filename = "gc.nim";
switch (Strategy_2477) {
case ((NU8) 0):
break;
case ((NU8) 1):
break;
case ((NU8) 3):
break;
case ((NU8) 2):
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcenablemarkandsweep_2478)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_enableMarkAndSweep";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 668;F.filename = "gc.nim";
Cyclethreshold_11011 = 4194304;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcdisablemarkandsweep_2480)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_disableMarkAndSweep";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 671;F.filename = "gc.nim";
Cyclethreshold_11011 = IL64(9223372036854775806);
framePtr = framePtr->prev;
}
N_NIMCALL(void, Gcfullcollect_2467)(void) {
NI Oldthreshold_16419;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_fullCollect";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 675;F.filename = "gc.nim";
Lock_11013(&Gch_11010);
Oldthreshold_16419 = 0;
F.line = 676;F.filename = "gc.nim";
Oldthreshold_16419 = Cyclethreshold_11011;
F.line = 677;F.filename = "gc.nim";
Cyclethreshold_11011 = 0;
F.line = 678;F.filename = "gc.nim";
Collectct_11605(&Gch_11010);
F.line = 679;F.filename = "gc.nim";
Cyclethreshold_11011 = Oldthreshold_16419;
F.line = 680;F.filename = "gc.nim";
Unlock_11019(&Gch_11010);
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, Gcgetstatistics_2482)(void) {
NimStringDesc* Result_16424;
NimStringDesc* LOC1;
NI LOC2;
NimStringDesc* LOC3;
NI LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "GC_getStatistics";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_16424 = 0;
F.line = 683;F.filename = "gc.nim";
Gcdisable_2463();
F.line = 684;F.filename = "gc.nim";
LOC1 = 0;
LOC2 = Gettotalmem_1845();
LOC3 = 0;
LOC3 = nimIntToStr(LOC2);
LOC4 = Getoccupiedmem_1841();
LOC5 = 0;
LOC5 = nimIntToStr(LOC4);
LOC6 = 0;
LOC6 = nimIntToStr(Gch_11010.Stat.Stackscans);
LOC7 = 0;
LOC7 = nimIntToStr(Gch_11010.Stat.Maxstackcells);
LOC8 = 0;
LOC8 = nimIntToStr(Gch_11010.Stat.Cyclecollections);
LOC9 = 0;
LOC9 = nimIntToStr(Gch_11010.Stat.Maxthreshold);
LOC10 = 0;
LOC10 = nimIntToStr(Gch_11010.Zct.Cap);
LOC11 = 0;
LOC11 = nimIntToStr(Gch_11010.Stat.Cycletablesize);
LOC12 = 0;
LOC12 = nimIntToStr(Gch_11010.Stat.Maxstacksize);
LOC1 = rawNewString(LOC3->Sup.len + LOC5->Sup.len + LOC6->Sup.len + LOC7->Sup.len + LOC8->Sup.len + LOC9->Sup.len + LOC10->Sup.len + LOC11->Sup.len + LOC12->Sup.len + 196);
appendString(LOC1, ((NimStringDesc*) &TMP20154));
appendString(LOC1, LOC3);
appendString(LOC1, ((NimStringDesc*) &TMP20155));
appendString(LOC1, LOC5);
appendString(LOC1, ((NimStringDesc*) &TMP20156));
appendString(LOC1, LOC6);
appendString(LOC1, ((NimStringDesc*) &TMP20157));
appendString(LOC1, LOC7);
appendString(LOC1, ((NimStringDesc*) &TMP20158));
appendString(LOC1, LOC8);
appendString(LOC1, ((NimStringDesc*) &TMP20159));
appendString(LOC1, LOC9);
appendString(LOC1, ((NimStringDesc*) &TMP20160));
appendString(LOC1, LOC10);
appendString(LOC1, ((NimStringDesc*) &TMP20161));
appendString(LOC1, LOC11);
appendString(LOC1, ((NimStringDesc*) &TMP20162));
appendString(LOC1, LOC12);
Result_16424 = LOC1;
F.line = 694;F.filename = "gc.nim";
Gcenable_2465();
framePtr = framePtr->prev;
return Result_16424;
}
static N_INLINE(NI, cmpStrings)(NimStringDesc* A_17211, NimStringDesc* B_17212) {
NI Result_17213;
int LOC10;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "cmpStrings";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17213 = 0;
F.line = 26;F.filename = "sysstr.nim";
if (!(A_17211 == B_17212)) goto LA2;
F.line = 26;F.filename = "sysstr.nim";
F.line = 26;F.filename = "sysstr.nim";
Result_17213 = 0;
goto BeforeRet;
LA2: ;
F.line = 27;F.filename = "sysstr.nim";
if (!(A_17211 == NIM_NIL)) goto LA5;
F.line = 27;F.filename = "sysstr.nim";
F.line = 27;F.filename = "sysstr.nim";
Result_17213 = -1;
goto BeforeRet;
LA5: ;
F.line = 28;F.filename = "sysstr.nim";
if (!(B_17212 == NIM_NIL)) goto LA8;
F.line = 28;F.filename = "sysstr.nim";
F.line = 28;F.filename = "sysstr.nim";
Result_17213 = 1;
goto BeforeRet;
LA8: ;
F.line = 29;F.filename = "sysstr.nim";
F.line = 29;F.filename = "sysstr.nim";
LOC10 = strcmp(((NCSTRING) ((*A_17211).data)), ((NCSTRING) ((*B_17212).data)));
Result_17213 = ((NI) (LOC10));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17213;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_17247, NimStringDesc* B_17248) {
NIM_BOOL Result_17249;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "eqStrings";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17249 = 0;
F.line = 32;F.filename = "sysstr.nim";
if (!(A_17247 == B_17248)) goto LA2;
F.line = 32;F.filename = "sysstr.nim";
F.line = 32;F.filename = "sysstr.nim";
Result_17249 = NIM_TRUE;
goto BeforeRet;
LA2: ;
F.line = 33;F.filename = "sysstr.nim";
LOC5 = (A_17247 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_17248 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
F.line = 33;F.filename = "sysstr.nim";
F.line = 33;F.filename = "sysstr.nim";
Result_17249 = NIM_FALSE;
goto BeforeRet;
LA7: ;
F.line = 34;F.filename = "sysstr.nim";
F.line = 34;F.filename = "sysstr.nim";
LOC9 = ((*A_17247).Sup.len == (*B_17248).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_17247).data)), ((NCSTRING) ((*B_17248).data)), ((int) ((NI64)((*A_17247).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_17249 = LOC9;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17249;
}
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_17295) {
NimStringDesc* Result_17296;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "mnewString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17296 = 0;
F.line = 46;F.filename = "sysstr.nim";
Result_17296 = rawNewString(Len_17295);
F.line = 47;F.filename = "sysstr.nim";
(*Result_17296).Sup.len = Len_17295;
framePtr = framePtr->prev;
return Result_17296;
}
N_NIMCALL(NI, hashString)(NimStringDesc* S_17323) {
NI Result_17324;
NI H_17325;
NI I_17335;
NI HEX3Atmp_19999;
NI Res_20001;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "hashString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17324 = 0;
H_17325 = 0;
F.line = 67;F.filename = "sysstr.nim";
H_17325 = 0;
I_17335 = 0;
HEX3Atmp_19999 = 0;
F.line = 68;F.filename = "sysstr.nim";
HEX3Atmp_19999 = (NI64)(S_17323->Sup.len - 1);
Res_20001 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20001 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20001 <= HEX3Atmp_19999)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_17335 = Res_20001;
F.line = 69;F.filename = "sysstr.nim";
H_17325 = (NI64)((NU64)(H_17325) + (NU64)(((NU8)(S_17323->data[I_17335]))));
F.line = 70;F.filename = "sysstr.nim";
H_17325 = (NI64)((NU64)(H_17325) + (NU64)((NI64)((NU64)(H_17325) << (NU64)(10))));
F.line = 71;F.filename = "sysstr.nim";
H_17325 = (NI64)(H_17325 ^ (NI64)((NU64)(H_17325) >> (NU64)(6)));
F.line = 1022;F.filename = "system.nim";
Res_20001 += 1;
} LA1: ;
F.line = 72;F.filename = "sysstr.nim";
H_17325 = (NI64)((NU64)(H_17325) + (NU64)((NI64)((NU64)(H_17325) << (NU64)(3))));
F.line = 73;F.filename = "sysstr.nim";
H_17325 = (NI64)(H_17325 ^ (NI64)((NU64)(H_17325) >> (NU64)(11)));
F.line = 74;F.filename = "sysstr.nim";
H_17325 = (NI64)((NU64)(H_17325) + (NU64)((NI64)((NU64)(H_17325) << (NU64)(15))));
F.line = 75;F.filename = "sysstr.nim";
Result_17324 = H_17325;
framePtr = framePtr->prev;
return Result_17324;
}
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_17343, NI Start_17344, NI Last_17345) {
NimStringDesc* Result_17346;
NI Start_17349;
NI Len_17352;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyStrLast";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17346 = 0;
Start_17349 = 0;
F.line = 78;F.filename = "sysstr.nim";
Start_17349 = ((Start_17344 >= 0) ? Start_17344 : 0);
Len_17352 = 0;
F.line = 79;F.filename = "sysstr.nim";
Len_17352 = (NI64)((NI64)(((Last_17345 <= (NI64)((*S_17343).Sup.len - 1)) ? Last_17345 : (NI64)((*S_17343).Sup.len - 1)) - Start_17349) + 1);
F.line = 80;F.filename = "sysstr.nim";
if (!(0 < Len_17352)) goto LA2;
F.line = 81;F.filename = "sysstr.nim";
Result_17346 = rawNewString(Len_17352);
F.line = 82;F.filename = "sysstr.nim";
(*Result_17346).Sup.len = Len_17352;
F.line = 83;F.filename = "sysstr.nim";
memcpy(((NCSTRING) ((*Result_17346).data)), ((NCSTRING) (&(*S_17343).data[(Start_17349)-0])), ((int) ((NI64)(Len_17352 * 1))));
F.line = 84;F.filename = "sysstr.nim";
(*Result_17346).data[(Len_17352)-0] = 0;
goto LA1;
LA2: ;
F.line = 86;F.filename = "sysstr.nim";
Result_17346 = mnewString(0);
LA1: ;
framePtr = framePtr->prev;
return Result_17346;
}
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_17358, NI Start_17359) {
NimStringDesc* Result_17360;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "copyStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17360 = 0;
F.line = 89;F.filename = "sysstr.nim";
F.line = 89;F.filename = "sysstr.nim";
Result_17360 = copyStrLast(S_17358, Start_17359, (NI64)((*S_17358).Sup.len - 1));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_17360;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 154;F.filename = "sysstr.nim";
(*Dest_17409).data[((*Dest_17409).Sup.len)-0] = C_17410;
F.line = 155;F.filename = "sysstr.nim";
(*Dest_17409).data[((NI64)((*Dest_17409).Sup.len + 1))-0] = 0;
F.line = 156;F.filename = "sysstr.nim";
(*Dest_17409).Sup.len += 1;
framePtr = framePtr->prev;
}
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_17435, NI Elemsize_17436) {
TGenericSeq* Result_17437;
void* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "incrSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17437 = 0;
F.line = 186;F.filename = "sysstr.nim";
Result_17437 = Seq_17435;
F.line = 187;F.filename = "sysstr.nim";
if (!((*Result_17437).space <= (*Result_17437).len)) goto LA2;
F.line = 188;F.filename = "sysstr.nim";
(*Result_17437).space = Resize_17201((*Result_17437).space);
F.line = 189;F.filename = "sysstr.nim";
LOC4 = Growobj_12807(((void*) (Result_17437)), (NI64)((NI64)(Elemsize_17436 * (*Result_17437).space) + 16));
Result_17437 = ((TGenericSeq*) (LOC4));
LA2: ;
F.line = 197;F.filename = "sysstr.nim";
(*Result_17437).len += 1;
framePtr = framePtr->prev;
return Result_17437;
}
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_17603, NI Elemsize_17604, NI Newlen_17605) {
TGenericSeq* Result_17606;
NI LOC4;
void* LOC5;
NI I_17620;
NI HEX3Atmp_20005;
NI Res_20007;
TNimType* LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "setLengthSeq";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_17606 = 0;
F.line = 209;F.filename = "sysstr.nim";
Result_17606 = Seq_17603;
F.line = 210;F.filename = "sysstr.nim";
if (!((*Result_17606).space < Newlen_17605)) goto LA2;
F.line = 211;F.filename = "sysstr.nim";
LOC4 = Resize_17201((*Result_17606).space);
(*Result_17606).space = ((LOC4 >= Newlen_17605) ? LOC4 : Newlen_17605);
F.line = 212;F.filename = "sysstr.nim";
LOC5 = Growobj_12807(((void*) (Result_17606)), (NI64)((NI64)(Elemsize_17604 * (*Result_17606).space) + 16));
Result_17606 = ((TGenericSeq*) (LOC5));
goto LA1;
LA2: ;
if (!(Newlen_17605 < (*Result_17606).len)) goto LA6;
I_17620 = 0;
HEX3Atmp_20005 = 0;
F.line = 217;F.filename = "sysstr.nim";
HEX3Atmp_20005 = (NI64)((*Result_17606).len - 1);
Res_20007 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20007 = Newlen_17605;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20007 <= HEX3Atmp_20005)) goto LA8;
F.line = 1019;F.filename = "system.nim";
I_17620 = Res_20007;
F.line = 218;F.filename = "sysstr.nim";
LOC9 = extGetCellType(((void*) (Result_17606)));
Forallchildrenaux_11620(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_17606))) + (NU64)(16))) + (NU64)((NI64)((NU64)(I_17620) * (NU64)(Elemsize_17604)))))), (*LOC9).base, ((NU8) 0));
F.line = 1022;F.filename = "system.nim";
Res_20007 += 1;
} LA8: ;
F.line = 222;F.filename = "sysstr.nim";
zeroMem(((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (Result_17606))) + (NU64)(16))) + (NU64)((NI64)((NU64)(Newlen_17605) * (NU64)(Elemsize_17604)))))), (NI64)((NU64)((NI64)((NU64)((*Result_17606).len) - (NU64)(Newlen_17605))) * (NU64)(Elemsize_17604)));
goto LA1;
LA6: ;
LA1: ;
F.line = 224;F.filename = "sysstr.nim";
(*Result_17606).len = Newlen_17605;
framePtr = framePtr->prev;
return Result_17606;
}
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL X_18124) {
NimStringDesc* Result_18125;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimBoolToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18125 = 0;
F.line = 271;F.filename = "sysstr.nim";
F.line = 271;F.filename = "sysstr.nim";
LOC1 = 0;
if (!X_18124) goto LA3;
LOC1 = copyString(((NimStringDesc*) &TMP20121));
goto LA2;
LA3: ;
LOC1 = copyString(((NimStringDesc*) &TMP20122));
LA2: ;
Result_18125 = LOC1;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18125;
}
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR X_18128) {
NimStringDesc* Result_18129;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nimCharToStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18129 = 0;
F.line = 274;F.filename = "sysstr.nim";
Result_18129 = mnewString(1);
F.line = 275;F.filename = "sysstr.nim";
Result_18129->data[0] = X_18128;
framePtr = framePtr->prev;
return Result_18129;
}
N_NIMCALL(NI, binaryStrSearch)(NimStringDesc** X_18133, NI X_18133Len0, NimStringDesc* Y_18134) {
NI Result_18135;
NI A_18136;
NI B_18147;
NI Mid_18150;
NIM_BOOL LOC6;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "binaryStrSearch";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18135 = 0;
A_18136 = 0;
F.line = 279;F.filename = "sysstr.nim";
A_18136 = 0;
B_18147 = 0;
F.line = 280;F.filename = "sysstr.nim";
B_18147 = X_18133Len0;
F.line = 281;F.filename = "sysstr.nim";
while (1) {
if (!(A_18136 < B_18147)) goto LA1;
Mid_18150 = 0;
F.line = 282;F.filename = "sysstr.nim";
Mid_18150 = (NI64)((NI64)(A_18136 + B_18147) / 2);
F.line = 283;F.filename = "sysstr.nim";
if (!(cmpStrings(X_18133[Mid_18150], Y_18134) < 0)) goto LA3;
F.line = 284;F.filename = "sysstr.nim";
A_18136 = (NI64)(Mid_18150 + 1);
goto LA2;
LA3: ;
F.line = 286;F.filename = "sysstr.nim";
B_18147 = Mid_18150;
LA2: ;
} LA1: ;
F.line = 287;F.filename = "sysstr.nim";
LOC6 = (A_18136 < X_18133Len0);
if (!(LOC6)) goto LA7;
LOC6 = eqStrings(X_18133[A_18136], Y_18134);
LA7: ;
if (!LOC6) goto LA8;
F.line = 288;F.filename = "sysstr.nim";
F.line = 288;F.filename = "sysstr.nim";
Result_18135 = A_18136;
goto BeforeRet;
goto LA5;
LA8: ;
F.line = 290;F.filename = "sysstr.nim";
F.line = 290;F.filename = "sysstr.nim";
Result_18135 = -1;
goto BeforeRet;
LA5: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18135;
}
N_NIMCALL(void, genericAssign)(void* Dest_18165, void* Src_18166, TNimType* Mt_18167) {
NI D_18201;
NI S_18202;
void* S2_18214;
TGenericSeq* Seq_18215;
void** X_18216;
void* LOC4;
NI Dst_18217;
NI I_18225;
NI HEX3Atmp_20032;
NI Res_20034;
TGenericSeq* Dstseq_18226;
NI I_18234;
NI HEX3Atmp_20038;
NI Res_20040;
void* S2_18235;
NimStringDesc* LOC10;
void** X_18236;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssign";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18201 = 0;
F.line = 33;F.filename = "assign.nim";
D_18201 = ((NI) (Dest_18165));
S_18202 = 0;
F.line = 34;F.filename = "assign.nim";
S_18202 = ((NI) (Src_18166));
F.line = 36;F.filename = "assign.nim";
F.line = 37;F.filename = "assign.nim";
switch ((*Mt_18167).kind) {
case ((NU8) 24):
S2_18214 = 0;
F.line = 39;F.filename = "assign.nim";
S2_18214 = (*((void**) (Src_18166)));
Seq_18215 = 0;
F.line = 40;F.filename = "assign.nim";
Seq_18215 = ((TGenericSeq*) (S2_18214));
F.line = 41;F.filename = "assign.nim";
if (!(S2_18214 == NIM_NIL)) goto LA2;
X_18216 = 0;
F.line = 42;F.filename = "assign.nim";
X_18216 = ((void**) (Dest_18165));
F.line = 43;F.filename = "assign.nim";
(*X_18216) = NIM_NIL;
F.line = 44;F.filename = "assign.nim";
goto BeforeRet;
LA2: ;
F.line = 45;F.filename = "assign.nim";
F.line = 46;F.filename = "assign.nim";
LOC4 = newObj(Mt_18167, (NI64)((NI64)((*Seq_18215).len * (*(*Mt_18167).base).size) + 16));
unsureAsgnRef(((void**) (Dest_18165)), LOC4);
Dst_18217 = 0;
F.line = 48;F.filename = "assign.nim";
Dst_18217 = ((NI) ((*((void**) (Dest_18165)))));
I_18225 = 0;
HEX3Atmp_20032 = 0;
F.line = 49;F.filename = "assign.nim";
HEX3Atmp_20032 = (NI64)((*Seq_18215).len - 1);
Res_20034 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20034 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20034 <= HEX3Atmp_20032)) goto LA5;
F.line = 1019;F.filename = "system.nim";
I_18225 = Res_20034;
F.line = 50;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)((NI64)((NU64)(Dst_18217) + (NU64)((NI64)((NU64)(I_18225) * (NU64)((*(*Mt_18167).base).size))))) + (NU64)(16)))), ((void*) ((NI64)((NU64)((NI64)((NU64)(((NI) (S2_18214))) + (NU64)((NI64)((NU64)(I_18225) * (NU64)((*(*Mt_18167).base).size))))) + (NU64)(16)))), (*Mt_18167).base);
F.line = 1022;F.filename = "system.nim";
Res_20034 += 1;
} LA5: ;
Dstseq_18226 = 0;
F.line = 55;F.filename = "assign.nim";
Dstseq_18226 = ((TGenericSeq*) (Dst_18217));
F.line = 56;F.filename = "assign.nim";
(*Dstseq_18226).len = (*Seq_18215).len;
F.line = 57;F.filename = "assign.nim";
(*Dstseq_18226).space = (*Seq_18215).len;
break;
case ((NU8) 17):
case ((NU8) 18):
case ((NU8) 40):
F.line = 60;F.filename = "assign.nim";
Genericassignaux_18168(Dest_18165, Src_18166, (*Mt_18167).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_18234 = 0;
HEX3Atmp_20038 = 0;
F.line = 62;F.filename = "assign.nim";
HEX3Atmp_20038 = (NI64)((NI64)((*Mt_18167).size / (*(*Mt_18167).base).size) - 1);
Res_20040 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20040 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20040 <= HEX3Atmp_20038)) goto LA6;
F.line = 1019;F.filename = "system.nim";
I_18234 = Res_20040;
F.line = 63;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18201) + (NU64)((NI64)((NU64)(I_18234) * (NU64)((*(*Mt_18167).base).size)))))), ((void*) ((NI64)((NU64)(S_18202) + (NU64)((NI64)((NU64)(I_18234) * (NU64)((*(*Mt_18167).base).size)))))), (*Mt_18167).base);
F.line = 1022;F.filename = "system.nim";
Res_20040 += 1;
} LA6: ;
break;
case ((NU8) 28):
S2_18235 = 0;
F.line = 66;F.filename = "assign.nim";
S2_18235 = (*((void**) (S_18202)));
F.line = 67;F.filename = "assign.nim";
if (!!((S2_18235 == NIM_NIL))) goto LA8;
F.line = 68;F.filename = "assign.nim";
LOC10 = copyString(((NimStringDesc*) (S2_18235)));
unsureAsgnRef(((void**) (Dest_18165)), ((void*) (LOC10)));
goto LA7;
LA8: ;
X_18236 = 0;
F.line = 70;F.filename = "assign.nim";
X_18236 = ((void**) (Dest_18165));
F.line = 71;F.filename = "assign.nim";
(*X_18236) = NIM_NIL;
F.line = 72;F.filename = "assign.nim";
goto BeforeRet;
LA7: ;
break;
case ((NU8) 22):
F.line = 74;F.filename = "assign.nim";
unsureAsgnRef(((void**) (Dest_18165)), (*((void**) (S_18202))));
break;
default:
F.line = 76;F.filename = "assign.nim";
memcpy(Dest_18165, Src_18166, (*Mt_18167).size);
break;
}
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Genericassignaux_18168)(void* Dest_18170, void* Src_18171, TNimNode* N_18173) {
NI D_18174;
NI S_18175;
NI I_18183;
NI HEX3Atmp_20026;
NI Res_20028;
TNimNode* M_18184;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssignAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18174 = 0;
F.line = 15;F.filename = "assign.nim";
D_18174 = ((NI) (Dest_18170));
S_18175 = 0;
F.line = 16;F.filename = "assign.nim";
S_18175 = ((NI) (Src_18171));
F.line = 17;F.filename = "assign.nim";
switch ((*N_18173).kind) {
case ((NU8) 0):
F.line = 18;F.filename = "assign.nim";
break;
case ((NU8) 1):
F.line = 20;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18174) + (NU64)((*N_18173).offset)))), ((void*) ((NI64)((NU64)(S_18175) + (NU64)((*N_18173).offset)))), (*N_18173).typ);
break;
case ((NU8) 2):
I_18183 = 0;
HEX3Atmp_20026 = 0;
F.line = 23;F.filename = "assign.nim";
HEX3Atmp_20026 = (NI64)((*N_18173).len - 1);
Res_20028 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20028 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20028 <= HEX3Atmp_20026)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18183 = Res_20028;
F.line = 24;F.filename = "assign.nim";
Genericassignaux_18168(Dest_18170, Src_18171, (*N_18173).sons[(I_18183)-0]);
F.line = 1022;F.filename = "system.nim";
Res_20028 += 1;
} LA1: ;
break;
case ((NU8) 3):
F.line = 26;F.filename = "assign.nim";
memcpy(((void*) ((NI64)((NU64)(D_18174) + (NU64)((*N_18173).offset)))), ((void*) ((NI64)((NU64)(S_18175) + (NU64)((*N_18173).offset)))), (*(*N_18173).typ).size);
M_18184 = 0;
F.line = 28;F.filename = "assign.nim";
M_18184 = Selectbranch_7063(Src_18171, N_18173);
F.line = 29;F.filename = "assign.nim";
if (!!((M_18184 == NIM_NIL))) goto LA3;
F.line = 29;F.filename = "assign.nim";
Genericassignaux_18168(Dest_18170, Src_18171, M_18184);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, genericSeqAssign)(void* Dest_18239, void* Src_18240, TNimType* Mt_18241) {
void* Src_18242;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericSeqAssign";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Src_18242 = 0;
F.line = 79;F.filename = "assign.nim";
Src_18242 = Src_18240;
F.line = 80;F.filename = "assign.nim";
genericAssign(Dest_18239, ((void*) (&Src_18242)), Mt_18241);
framePtr = framePtr->prev;
}
N_NIMCALL(void, genericAssignOpenArray)(void* Dest_18246, void* Src_18247, NI Len_18248, TNimType* Mt_18249) {
NI D_18250;
NI S_18251;
NI I_18259;
NI HEX3Atmp_20044;
NI Res_20046;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "genericAssignOpenArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18250 = 0;
F.line = 85;F.filename = "assign.nim";
D_18250 = ((NI) (Dest_18246));
S_18251 = 0;
F.line = 86;F.filename = "assign.nim";
S_18251 = ((NI) (Src_18247));
I_18259 = 0;
HEX3Atmp_20044 = 0;
F.line = 87;F.filename = "assign.nim";
HEX3Atmp_20044 = (NI64)(Len_18248 - 1);
Res_20046 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20046 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20046 <= HEX3Atmp_20044)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18259 = Res_20046;
F.line = 88;F.filename = "assign.nim";
genericAssign(((void*) ((NI64)((NU64)(D_18250) + (NU64)((NI64)((NU64)(I_18259) * (NU64)((*(*Mt_18249).base).size)))))), ((void*) ((NI64)((NU64)(S_18251) + (NU64)((NI64)((NU64)(I_18259) * (NU64)((*(*Mt_18249).base).size)))))), (*Mt_18249).base);
F.line = 1022;F.filename = "system.nim";
Res_20046 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, objectInit)(void* Dest_18262, TNimType* Typ_18263) {
NI D_18294;
TNimType** Pint_18296;
NI I_18304;
NI HEX3Atmp_20056;
NI Res_20058;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "objectInit";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18294 = 0;
F.line = 107;F.filename = "assign.nim";
D_18294 = ((NI) (Dest_18262));
F.line = 108;F.filename = "assign.nim";
switch ((*Typ_18263).kind) {
case ((NU8) 17):
Pint_18296 = 0;
F.line = 112;F.filename = "assign.nim";
Pint_18296 = ((TNimType**) (Dest_18262));
F.line = 113;F.filename = "assign.nim";
(*Pint_18296) = Typ_18263;
F.line = 114;F.filename = "assign.nim";
Objectinitaux_18264(Dest_18262, (*Typ_18263).node);
break;
case ((NU8) 18):
case ((NU8) 40):
F.line = 116;F.filename = "assign.nim";
Objectinitaux_18264(Dest_18262, (*Typ_18263).node);
break;
case ((NU8) 16):
case ((NU8) 4):
I_18304 = 0;
HEX3Atmp_20056 = 0;
F.line = 118;F.filename = "assign.nim";
HEX3Atmp_20056 = (NI64)((NI64)((*Typ_18263).size / (*(*Typ_18263).base).size) - 1);
Res_20058 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20058 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20058 <= HEX3Atmp_20056)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18304 = Res_20058;
F.line = 119;F.filename = "assign.nim";
objectInit(((void*) ((NI64)((NU64)(D_18294) + (NU64)((NI64)(I_18304 * (*(*Typ_18263).base).size))))), (*Typ_18263).base);
F.line = 1022;F.filename = "system.nim";
Res_20058 += 1;
} LA1: ;
break;
default:
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Objectinitaux_18264)(void* Dest_18266, TNimNode* N_18268) {
NI D_18269;
NI I_18277;
NI HEX3Atmp_20050;
NI Res_20052;
TNimNode* M_18278;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "objectInitAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/assign.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
D_18269 = 0;
F.line = 93;F.filename = "assign.nim";
D_18269 = ((NI) (Dest_18266));
F.line = 94;F.filename = "assign.nim";
switch ((*N_18268).kind) {
case ((NU8) 0):
F.line = 95;F.filename = "assign.nim";
break;
case ((NU8) 1):
F.line = 96;F.filename = "assign.nim";
objectInit(((void*) ((NI64)((NU64)(D_18269) + (NU64)((*N_18268).offset)))), (*N_18268).typ);
break;
case ((NU8) 2):
I_18277 = 0;
HEX3Atmp_20050 = 0;
F.line = 98;F.filename = "assign.nim";
HEX3Atmp_20050 = (NI64)((*N_18268).len - 1);
Res_20052 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20052 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20052 <= HEX3Atmp_20050)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18277 = Res_20052;
F.line = 99;F.filename = "assign.nim";
Objectinitaux_18264(Dest_18266, (*N_18268).sons[(I_18277)-0]);
F.line = 1022;F.filename = "system.nim";
Res_20052 += 1;
} LA1: ;
break;
case ((NU8) 3):
M_18278 = 0;
F.line = 101;F.filename = "assign.nim";
M_18278 = Selectbranch_7063(Dest_18266, N_18268);
F.line = 102;F.filename = "assign.nim";
if (!!((M_18278 == NIM_NIL))) goto LA3;
F.line = 102;F.filename = "assign.nim";
Objectinitaux_18264(Dest_18266, M_18278);
LA3: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprInt)(NI64 X_18307) {
NimStringDesc* Result_18308;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprInt";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18308 = 0;
F.line = 15;F.filename = "repr.nim";
F.line = 15;F.filename = "repr.nim";
Result_18308 = nimInt64ToStr(X_18307);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18308;
}
N_NIMCALL(NimStringDesc*, reprFloat)(NF X_18313) {
NimStringDesc* Result_18314;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprFloat";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18314 = 0;
F.line = 16;F.filename = "repr.nim";
F.line = 16;F.filename = "repr.nim";
Result_18314 = nimFloatToStr(X_18313);
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18314;
}
N_NIMCALL(NimStringDesc*, reprPointer)(void* X_18317) {
NimStringDesc* Result_18318;
TY18062 Buf_18321;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprPointer";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18318 = 0;
memset((void*)&Buf_18321, 0, sizeof(Buf_18321));
F.line = 20;F.filename = "repr.nim";
sprintf(((NCSTRING) (Buf_18321)), "%p", X_18317);
F.line = 21;F.filename = "repr.nim";
F.line = 21;F.filename = "repr.nim";
Result_18318 = cstrToNimstr(((NCSTRING) (Buf_18321)));
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_18318;
}
N_NIMCALL(void, Reprstraux_18322)(NimStringDesc** Result_18325, NimStringDesc* S_18326) {
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NIM_CHAR C_18337;
NI I_20063;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprStrAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 24;F.filename = "repr.nim";
if (!(((void*) (S_18326)) == NIM_NIL)) goto LA2;
F.line = 25;F.filename = "repr.nim";
(*Result_18325) = resizeString((*Result_18325), 3);
appendString((*Result_18325), ((NimStringDesc*) &TMP20163));
F.line = 26;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 27;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = reprPointer(((void*) (S_18326)));
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20164));
(*Result_18325) = resizeString((*Result_18325), LOC4->Sup.len + 0);
appendString((*Result_18325), LOC4);
C_18337 = 0;
I_20063 = 0;
F.line = 1077;F.filename = "system.nim";
I_20063 = 0;
F.line = 1078;F.filename = "system.nim";
while (1) {
if (!(I_20063 < S_18326->Sup.len)) goto LA6;
F.line = 1079;F.filename = "system.nim";
C_18337 = S_18326->data[I_20063];
F.line = 29;F.filename = "repr.nim";
switch (((NU8)(C_18337))) {
case 34:
F.line = 30;F.filename = "repr.nim";
(*Result_18325) = resizeString((*Result_18325), 2);
appendString((*Result_18325), ((NimStringDesc*) &TMP20165));
break;
case 92:
F.line = 31;F.filename = "repr.nim";
(*Result_18325) = resizeString((*Result_18325), 2);
appendString((*Result_18325), ((NimStringDesc*) &TMP20166));
break;
case 10:
F.line = 32;F.filename = "repr.nim";
(*Result_18325) = resizeString((*Result_18325), 6);
appendString((*Result_18325), ((NimStringDesc*) &TMP20167));
break;
case 128 ... 255:
case 0 ... 9:
case 11 ... 31:
F.line = 34;F.filename = "repr.nim";
LOC7 = 0;
LOC8 = 0;
LOC8 = reprInt(((NI64) (((NU8)(C_18337)))));
LOC7 = rawNewString(LOC8->Sup.len + 1);
appendString(LOC7, ((NimStringDesc*) &TMP20168));
appendString(LOC7, LOC8);
(*Result_18325) = resizeString((*Result_18325), LOC7->Sup.len + 0);
appendString((*Result_18325), LOC7);
break;
default:
F.line = 35;F.filename = "repr.nim";
(*Result_18325) = addChar((*Result_18325), C_18337);
break;
}
F.line = 1080;F.filename = "system.nim";
I_20063 += 1;
} LA6: ;
F.line = 36;F.filename = "repr.nim";
(*Result_18325) = resizeString((*Result_18325), 1);
appendString((*Result_18325), ((NimStringDesc*) &TMP20164));
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprStr)(NimStringDesc* S_18353) {
NimStringDesc* Result_18354;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprStr";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18354 = 0;
F.line = 39;F.filename = "repr.nim";
Result_18354 = copyString(((NimStringDesc*) &TMP20120));
F.line = 40;F.filename = "repr.nim";
Reprstraux_18322(&Result_18354, S_18353);
framePtr = framePtr->prev;
return Result_18354;
}
N_NIMCALL(NimStringDesc*, reprBool)(NIM_BOOL X_18358) {
NimStringDesc* Result_18359;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprBool";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18359 = 0;
F.line = 43;F.filename = "repr.nim";
if (!X_18358) goto LA2;
F.line = 43;F.filename = "repr.nim";
Result_18359 = copyString(((NimStringDesc*) &TMP20121));
goto LA1;
LA2: ;
F.line = 44;F.filename = "repr.nim";
Result_18359 = copyString(((NimStringDesc*) &TMP20122));
LA1: ;
framePtr = framePtr->prev;
return Result_18359;
}
N_NIMCALL(NimStringDesc*, reprChar)(NIM_CHAR X_18362) {
NimStringDesc* Result_18363;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18363 = 0;
F.line = 47;F.filename = "repr.nim";
Result_18363 = copyString(((NimStringDesc*) &TMP20169));
F.line = 48;F.filename = "repr.nim";
switch (((NU8)(X_18362))) {
case 34:
F.line = 49;F.filename = "repr.nim";
Result_18363 = resizeString(Result_18363, 2);
appendString(Result_18363, ((NimStringDesc*) &TMP20165));
break;
case 92:
F.line = 50;F.filename = "repr.nim";
Result_18363 = resizeString(Result_18363, 2);
appendString(Result_18363, ((NimStringDesc*) &TMP20166));
break;
case 128 ... 255:
case 0 ... 31:
F.line = 51;F.filename = "repr.nim";
LOC1 = 0;
LOC2 = 0;
LOC2 = reprInt(((NI64) (((NU8)(X_18362)))));
LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP20168));
appendString(LOC1, LOC2);
Result_18363 = resizeString(Result_18363, LOC1->Sup.len + 0);
appendString(Result_18363, LOC1);
break;
default:
F.line = 52;F.filename = "repr.nim";
Result_18363 = addChar(Result_18363, X_18362);
break;
}
F.line = 53;F.filename = "repr.nim";
Result_18363 = resizeString(Result_18363, 1);
appendString(Result_18363, ((NimStringDesc*) &TMP20169));
framePtr = framePtr->prev;
return Result_18363;
}
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_18379, TNimType* Typ_18380) {
NimStringDesc* Result_18381;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprEnum";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18381 = 0;
F.line = 56;F.filename = "repr.nim";
if (!((NU64)(E_18379) < (NU64)((*(*Typ_18380).node).len))) goto LA2;
F.line = 57;F.filename = "repr.nim";
Result_18381 = cstrToNimstr((*(*(*Typ_18380).node).sons[(E_18379)-0]).name);
goto LA1;
LA2: ;
F.line = 59;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = nimIntToStr(E_18379);
LOC4 = rawNewString(LOC5->Sup.len + 16);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20170));
Result_18381 = LOC4;
LA1: ;
framePtr = framePtr->prev;
return Result_18381;
}
N_NIMCALL(void, Addsetelem_18396)(NimStringDesc** Result_18399, NI Elem_18400, TNimType* Typ_18401) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "addSetElem";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 65;F.filename = "repr.nim";
switch ((*Typ_18401).kind) {
case ((NU8) 14):
F.line = 66;F.filename = "repr.nim";
LOC1 = 0;
LOC1 = reprEnum(Elem_18400, Typ_18401);
(*Result_18399) = resizeString((*Result_18399), LOC1->Sup.len + 0);
appendString((*Result_18399), LOC1);
break;
case ((NU8) 1):
F.line = 67;F.filename = "repr.nim";
LOC2 = 0;
LOC2 = reprBool(((NIM_BOOL) (Elem_18400)));
(*Result_18399) = resizeString((*Result_18399), LOC2->Sup.len + 0);
appendString((*Result_18399), LOC2);
break;
case ((NU8) 2):
F.line = 68;F.filename = "repr.nim";
LOC3 = 0;
LOC3 = reprChar(((NIM_CHAR) (((NI) (Elem_18400)))));
(*Result_18399) = resizeString((*Result_18399), LOC3->Sup.len + 0);
appendString((*Result_18399), LOC3);
break;
case ((NU8) 20):
F.line = 69;F.filename = "repr.nim";
Addsetelem_18396(Result_18399, Elem_18400, (*Typ_18401).base);
break;
case ((NU8) 31) ... ((NU8) 35):
F.line = 70;F.filename = "repr.nim";
LOC4 = 0;
LOC4 = reprInt(((NI64) (Elem_18400)));
(*Result_18399) = resizeString((*Result_18399), LOC4->Sup.len + 0);
appendString((*Result_18399), LOC4);
break;
default:
F.line = 72;F.filename = "repr.nim";
(*Result_18399) = resizeString((*Result_18399), 16);
appendString((*Result_18399), ((NimStringDesc*) &TMP20170));
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprsetaux_18402)(NimStringDesc** Result_18405, void* P_18406, TNimType* Typ_18407) {
NI Elemcounter_18408;
NI64 U_18409;
NI8* A_18414;
NI I_18422;
NI HEX3Atmp_20067;
NI Res_20069;
NI I_18448;
NI Res_20074;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSetAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Elemcounter_18408 = 0;
F.line = 76;F.filename = "repr.nim";
Elemcounter_18408 = 0;
F.line = 78;F.filename = "repr.nim";
(*Result_18405) = resizeString((*Result_18405), 1);
appendString((*Result_18405), ((NimStringDesc*) &TMP20171));
U_18409 = 0;
F.line = 80;F.filename = "repr.nim";
switch ((*Typ_18407).size) {
case 1:
F.line = 81;F.filename = "repr.nim";
U_18409 = ((NI64)(NU64)(NU8)((*((NI8*) (P_18406)))));
break;
case 2:
F.line = 82;F.filename = "repr.nim";
U_18409 = ((NI64)(NU64)(NU16)((*((NI16*) (P_18406)))));
break;
case 4:
F.line = 83;F.filename = "repr.nim";
U_18409 = ((NI64)(NU64)(NU32)((*((int*) (P_18406)))));
break;
case 8:
F.line = 84;F.filename = "repr.nim";
U_18409 = (*((NI64*) (P_18406)));
break;
default:
A_18414 = 0;
F.line = 86;F.filename = "repr.nim";
A_18414 = ((NI8*) (P_18406));
I_18422 = 0;
HEX3Atmp_20067 = 0;
F.line = 87;F.filename = "repr.nim";
HEX3Atmp_20067 = (NI64)((NI64)((*Typ_18407).size * 8) - 1);
Res_20069 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20069 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20069 <= HEX3Atmp_20067)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18422 = Res_20069;
F.line = 88;F.filename = "repr.nim";
if (!!(((NI64)(((NI)(NU)(NU8)(A_18414[((NI64)(I_18422 / 8))-0])) & (NI64)((NU64)(1) << (NU64)((NI64)(I_18422 % 8)))) == 0))) goto LA3;
F.line = 89;F.filename = "repr.nim";
if (!(0 < Elemcounter_18408)) goto LA6;
F.line = 89;F.filename = "repr.nim";
(*Result_18405) = resizeString((*Result_18405), 2);
appendString((*Result_18405), ((NimStringDesc*) &TMP20172));
LA6: ;
F.line = 90;F.filename = "repr.nim";
Addsetelem_18396(Result_18405, (NI64)(I_18422 + (*(*Typ_18407).node).len), (*Typ_18407).base);
F.line = 91;F.filename = "repr.nim";
Elemcounter_18408 += 1;
LA3: ;
F.line = 1022;F.filename = "system.nim";
Res_20069 += 1;
} LA1: ;
break;
}
F.line = 92;F.filename = "repr.nim";
if (!((*Typ_18407).size <= 8)) goto LA9;
I_18448 = 0;
Res_20074 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20074 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20074 <= 63)) goto LA11;
F.line = 1019;F.filename = "system.nim";
I_18448 = Res_20074;
F.line = 94;F.filename = "repr.nim";
if (!!(((U_18409 & ((NI64) ((NI64)((NU64)(1) << (NU64)(I_18448))))) == 0))) goto LA13;
F.line = 95;F.filename = "repr.nim";
if (!(0 < Elemcounter_18408)) goto LA16;
F.line = 95;F.filename = "repr.nim";
(*Result_18405) = resizeString((*Result_18405), 2);
appendString((*Result_18405), ((NimStringDesc*) &TMP20172));
LA16: ;
F.line = 96;F.filename = "repr.nim";
Addsetelem_18396(Result_18405, (NI64)(I_18448 + (*(*Typ_18407).node).len), (*Typ_18407).base);
F.line = 97;F.filename = "repr.nim";
Elemcounter_18408 += 1;
LA13: ;
F.line = 1022;F.filename = "system.nim";
Res_20074 += 1;
} LA11: ;
LA9: ;
F.line = 98;F.filename = "repr.nim";
(*Result_18405) = resizeString((*Result_18405), 1);
appendString((*Result_18405), ((NimStringDesc*) &TMP20173));
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprSet)(void* P_18467, TNimType* Typ_18468) {
NimStringDesc* Result_18469;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_18469 = 0;
F.line = 101;F.filename = "repr.nim";
Result_18469 = copyString(((NimStringDesc*) &TMP20120));
F.line = 102;F.filename = "repr.nim";
Reprsetaux_18402(&Result_18469, P_18467, Typ_18468);
framePtr = framePtr->prev;
return Result_18469;
}
N_NIMCALL(void, Initreprclosure_18476)(TY18472* Cl_18479) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "initReprClosure";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 113;F.filename = "repr.nim";
Init_10688(&(*Cl_18479).Marked);
F.line = 114;F.filename = "repr.nim";
(*Cl_18479).Recdepth = -1;
F.line = 115;F.filename = "repr.nim";
(*Cl_18479).Indent = 0;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Deinitreprclosure_18481)(TY18472* Cl_18484) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "deinitReprClosure";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 118;F.filename = "repr.nim";
Deinit_10692(&(*Cl_18484).Marked);
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprbreak_18486)(NimStringDesc** Result_18489, TY18472* Cl_18490) {
NI I_18498;
NI HEX3Atmp_20078;
NI Res_20080;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprBreak";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 121;F.filename = "repr.nim";
(*Result_18489) = resizeString((*Result_18489), 1);
appendString((*Result_18489), ((NimStringDesc*) &TMP20117));
I_18498 = 0;
HEX3Atmp_20078 = 0;
F.line = 122;F.filename = "repr.nim";
HEX3Atmp_20078 = (NI64)((*Cl_18490).Indent - 1);
Res_20080 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20080 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20080 <= HEX3Atmp_20078)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18498 = Res_20080;
F.line = 122;F.filename = "repr.nim";
(*Result_18489) = addChar((*Result_18489), 32);
F.line = 1022;F.filename = "system.nim";
Res_20080 += 1;
} LA1: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprrecordaux_18553)(NimStringDesc** Result_18556, void* P_18557, TNimNode* N_18559, TY18472* Cl_18561) {
NimStringDesc* LOC1;
NI I_18569;
NI HEX3Atmp_20096;
NI Res_20098;
TNimNode* M_18572;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRecordAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 151;F.filename = "repr.nim";
switch ((*N_18559).kind) {
case ((NU8) 0):
F.line = 152;F.filename = "repr.nim";
break;
case ((NU8) 1):
F.line = 154;F.filename = "repr.nim";
LOC1 = 0;
LOC1 = cstrToNimstr((*N_18559).name);
(*Result_18556) = resizeString((*Result_18556), LOC1->Sup.len + 0);
appendString((*Result_18556), LOC1);
F.line = 155;F.filename = "repr.nim";
(*Result_18556) = resizeString((*Result_18556), 3);
appendString((*Result_18556), ((NimStringDesc*) &TMP20176));
F.line = 156;F.filename = "repr.nim";
Repraux_18499(Result_18556, ((void*) ((NI64)(((NI) (P_18557)) + (*N_18559).offset))), (*N_18559).typ, Cl_18561);
break;
case ((NU8) 2):
I_18569 = 0;
HEX3Atmp_20096 = 0;
F.line = 158;F.filename = "repr.nim";
HEX3Atmp_20096 = (NI64)((*N_18559).len - 1);
Res_20098 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20098 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20098 <= HEX3Atmp_20096)) goto LA2;
F.line = 1019;F.filename = "system.nim";
I_18569 = Res_20098;
F.line = 159;F.filename = "repr.nim";
if (!(0 < I_18569)) goto LA4;
F.line = 159;F.filename = "repr.nim";
(*Result_18556) = resizeString((*Result_18556), 2);
appendString((*Result_18556), ((NimStringDesc*) &TMP20177));
LA4: ;
F.line = 160;F.filename = "repr.nim";
Reprrecordaux_18553(Result_18556, P_18557, (*N_18559).sons[(I_18569)-0], Cl_18561);
F.line = 1022;F.filename = "system.nim";
Res_20098 += 1;
} LA2: ;
break;
case ((NU8) 3):
M_18572 = 0;
F.line = 162;F.filename = "repr.nim";
M_18572 = Selectbranch_7063(P_18557, N_18559);
F.line = 163;F.filename = "repr.nim";
Repraux_18499(Result_18556, ((void*) ((NI64)(((NI) (P_18557)) + (*N_18559).offset))), (*N_18559).typ, Cl_18561);
F.line = 164;F.filename = "repr.nim";
if (!!((M_18572 == NIM_NIL))) goto LA7;
F.line = 164;F.filename = "repr.nim";
Reprrecordaux_18553(Result_18556, P_18557, M_18572, Cl_18561);
LA7: ;
break;
}
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprrecord_18584)(NimStringDesc** Result_18587, void* P_18588, TNimType* Typ_18589, TY18472* Cl_18591) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRecord";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 168;F.filename = "repr.nim";
(*Result_18587) = resizeString((*Result_18587), 1);
appendString((*Result_18587), ((NimStringDesc*) &TMP20174));
F.line = 169;F.filename = "repr.nim";
Reprrecordaux_18553(Result_18587, P_18588, (*Typ_18589).node, Cl_18591);
F.line = 170;F.filename = "repr.nim";
(*Result_18587) = resizeString((*Result_18587), 1);
appendString((*Result_18587), ((NimStringDesc*) &TMP20178));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprref_18592)(NimStringDesc** Result_18595, void* P_18596, TNimType* Typ_18597, TY18472* Cl_18599) {
TY10602* Cell_18600;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NIM_BOOL LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprRef";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Cell_18600 = 0;
F.line = 178;F.filename = "repr.nim";
Cell_18600 = Usrtocell_11036(P_18596);
F.line = 179;F.filename = "repr.nim";
LOC1 = 0;
LOC2 = 0;
LOC2 = reprPointer(P_18596);
LOC1 = rawNewString(LOC2->Sup.len + 4);
appendString(LOC1, ((NimStringDesc*) &TMP20179));
appendString(LOC1, LOC2);
(*Result_18595) = resizeString((*Result_18595), LOC1->Sup.len + 0);
appendString((*Result_18595), LOC1);
F.line = 180;F.filename = "repr.nim";
LOC4 = Contains_10854(&(*Cl_18599).Marked, Cell_18600);
if (!!(LOC4)) goto LA5;
F.line = 182;F.filename = "repr.nim";
Incl_10874(&(*Cl_18599).Marked, Cell_18600);
F.line = 183;F.filename = "repr.nim";
(*Result_18595) = resizeString((*Result_18595), 5);
appendString((*Result_18595), ((NimStringDesc*) &TMP20180));
F.line = 184;F.filename = "repr.nim";
Repraux_18499(Result_18595, P_18596, (*Typ_18597).base, Cl_18599);
LA5: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprsequence_18526)(NimStringDesc** Result_18529, void* P_18530, TNimType* Typ_18531, TY18472* Cl_18533) {
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NI Bs_18542;
NI I_18550;
NI HEX3Atmp_20090;
NI Res_20092;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprSequence";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 138;F.filename = "repr.nim";
if (!(P_18530 == NIM_NIL)) goto LA2;
F.line = 139;F.filename = "repr.nim";
(*Result_18529) = resizeString((*Result_18529), 3);
appendString((*Result_18529), ((NimStringDesc*) &TMP20163));
F.line = 140;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 141;F.filename = "repr.nim";
LOC4 = 0;
LOC5 = 0;
LOC5 = reprPointer(P_18530);
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendString(LOC4, ((NimStringDesc*) &TMP20174));
(*Result_18529) = resizeString((*Result_18529), LOC4->Sup.len + 0);
appendString((*Result_18529), LOC4);
Bs_18542 = 0;
F.line = 142;F.filename = "repr.nim";
Bs_18542 = (*(*Typ_18531).base).size;
I_18550 = 0;
HEX3Atmp_20090 = 0;
F.line = 143;F.filename = "repr.nim";
HEX3Atmp_20090 = (NI64)((*((TGenericSeq*) (P_18530))).len - 1);
Res_20092 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20092 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20092 <= HEX3Atmp_20090)) goto LA6;
F.line = 1019;F.filename = "system.nim";
I_18550 = Res_20092;
F.line = 144;F.filename = "repr.nim";
if (!(0 < I_18550)) goto LA8;
F.line = 144;F.filename = "repr.nim";
(*Result_18529) = resizeString((*Result_18529), 2);
appendString((*Result_18529), ((NimStringDesc*) &TMP20172));
LA8: ;
F.line = 145;F.filename = "repr.nim";
Repraux_18499(Result_18529, ((void*) ((NI64)((NI64)(((NI) (P_18530)) + 16) + (NI64)(I_18550 * Bs_18542)))), (*Typ_18531).base, Cl_18533);
F.line = 1022;F.filename = "system.nim";
Res_20092 += 1;
} LA6: ;
F.line = 147;F.filename = "repr.nim";
(*Result_18529) = resizeString((*Result_18529), 1);
appendString((*Result_18529), ((NimStringDesc*) &TMP20178));
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Repraux_18499)(NimStringDesc** Result_18502, void* P_18503, TNimType* Typ_18504, TY18472* Cl_18506) {
TNimType* T_18835;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
NimStringDesc* LOC14;
NimStringDesc* LOC15;
NimStringDesc* LOC16;
NimStringDesc* LOC17;
NimStringDesc* LOC18;
NimStringDesc* LOC22;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprAux";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 188;F.filename = "repr.nim";
if (!((*Cl_18506).Recdepth == 0)) goto LA2;
F.line = 189;F.filename = "repr.nim";
(*Result_18502) = resizeString((*Result_18502), 3);
appendString((*Result_18502), ((NimStringDesc*) &TMP20175));
F.line = 190;F.filename = "repr.nim";
goto BeforeRet;
LA2: ;
F.line = 191;F.filename = "repr.nim";
(*Cl_18506).Recdepth -= 1;
F.line = 192;F.filename = "repr.nim";
switch ((*Typ_18504).kind) {
case ((NU8) 19):
F.line = 193;F.filename = "repr.nim";
Reprsetaux_18402(Result_18502, P_18503, Typ_18504);
break;
case ((NU8) 16):
F.line = 194;F.filename = "repr.nim";
Reprarray_18507(Result_18502, P_18503, Typ_18504, Cl_18506);
break;
case ((NU8) 18):
case ((NU8) 40):
F.line = 195;F.filename = "repr.nim";
Reprrecord_18584(Result_18502, P_18503, Typ_18504, Cl_18506);
break;
case ((NU8) 17):
T_18835 = 0;
F.line = 197;F.filename = "repr.nim";
T_18835 = (*((TNimType**) (P_18503)));
F.line = 198;F.filename = "repr.nim";
Reprrecord_18584(Result_18502, P_18503, T_18835, Cl_18506);
break;
case ((NU8) 22):
case ((NU8) 21):
F.line = 200;F.filename = "repr.nim";
F.line = 201;F.filename = "repr.nim";
if (!((*((void**) (P_18503))) == NIM_NIL)) goto LA5;
F.line = 201;F.filename = "repr.nim";
(*Result_18502) = resizeString((*Result_18502), 3);
appendString((*Result_18502), ((NimStringDesc*) &TMP20163));
goto LA4;
LA5: ;
F.line = 202;F.filename = "repr.nim";
Reprref_18592(Result_18502, (*((void**) (P_18503))), Typ_18504, Cl_18506);
LA4: ;
break;
case ((NU8) 24):
F.line = 204;F.filename = "repr.nim";
Reprsequence_18526(Result_18502, (*((void**) (P_18503))), Typ_18504, Cl_18506);
break;
case ((NU8) 31):
F.line = 205;F.filename = "repr.nim";
LOC7 = 0;
LOC7 = nimIntToStr((*((NI*) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC7->Sup.len + 0);
appendString((*Result_18502), LOC7);
break;
case ((NU8) 32):
F.line = 206;F.filename = "repr.nim";
LOC8 = 0;
LOC8 = nimIntToStr(((NI) ((*((NI8*) (P_18503))))));
(*Result_18502) = resizeString((*Result_18502), LOC8->Sup.len + 0);
appendString((*Result_18502), LOC8);
break;
case ((NU8) 33):
F.line = 207;F.filename = "repr.nim";
LOC9 = 0;
LOC9 = nimIntToStr(((NI) ((*((NI16*) (P_18503))))));
(*Result_18502) = resizeString((*Result_18502), LOC9->Sup.len + 0);
appendString((*Result_18502), LOC9);
break;
case ((NU8) 34):
F.line = 208;F.filename = "repr.nim";
LOC10 = 0;
LOC10 = nimIntToStr(((NI) ((*((int*) (P_18503))))));
(*Result_18502) = resizeString((*Result_18502), LOC10->Sup.len + 0);
appendString((*Result_18502), LOC10);
break;
case ((NU8) 35):
F.line = 209;F.filename = "repr.nim";
LOC11 = 0;
LOC11 = nimInt64ToStr((*((NI64*) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC11->Sup.len + 0);
appendString((*Result_18502), LOC11);
break;
case ((NU8) 36):
F.line = 210;F.filename = "repr.nim";
LOC12 = 0;
LOC12 = nimFloatToStr((*((NF*) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC12->Sup.len + 0);
appendString((*Result_18502), LOC12);
break;
case ((NU8) 37):
F.line = 211;F.filename = "repr.nim";
LOC13 = 0;
LOC13 = nimFloatToStr(((NF) ((*((NF32*) (P_18503))))));
(*Result_18502) = resizeString((*Result_18502), LOC13->Sup.len + 0);
appendString((*Result_18502), LOC13);
break;
case ((NU8) 38):
F.line = 212;F.filename = "repr.nim";
LOC14 = 0;
LOC14 = nimFloatToStr(((NF) ((*((NF64*) (P_18503))))));
(*Result_18502) = resizeString((*Result_18502), LOC14->Sup.len + 0);
appendString((*Result_18502), LOC14);
break;
case ((NU8) 14):
F.line = 213;F.filename = "repr.nim";
LOC15 = 0;
LOC15 = reprEnum((*((NI*) (P_18503))), Typ_18504);
(*Result_18502) = resizeString((*Result_18502), LOC15->Sup.len + 0);
appendString((*Result_18502), LOC15);
break;
case ((NU8) 1):
F.line = 214;F.filename = "repr.nim";
LOC16 = 0;
LOC16 = reprBool((*((NIM_BOOL*) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC16->Sup.len + 0);
appendString((*Result_18502), LOC16);
break;
case ((NU8) 2):
F.line = 215;F.filename = "repr.nim";
LOC17 = 0;
LOC17 = reprChar((*((NIM_CHAR*) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC17->Sup.len + 0);
appendString((*Result_18502), LOC17);
break;
case ((NU8) 28):
F.line = 216;F.filename = "repr.nim";
Reprstraux_18322(Result_18502, (*((NimStringDesc**) (P_18503))));
break;
case ((NU8) 29):
F.line = 217;F.filename = "repr.nim";
LOC18 = 0;
LOC18 = cstrToNimstr((*((NCSTRING*) (P_18503))));
Reprstraux_18322(Result_18502, LOC18);
break;
case ((NU8) 20):
F.line = 218;F.filename = "repr.nim";
Repraux_18499(Result_18502, P_18503, (*Typ_18504).base, Cl_18506);
break;
case ((NU8) 25):
case ((NU8) 26):
F.line = 220;F.filename = "repr.nim";
if (!((*((void**) (P_18503))) == NIM_NIL)) goto LA20;
F.line = 220;F.filename = "repr.nim";
(*Result_18502) = resizeString((*Result_18502), 3);
appendString((*Result_18502), ((NimStringDesc*) &TMP20163));
goto LA19;
LA20: ;
F.line = 221;F.filename = "repr.nim";
LOC22 = 0;
LOC22 = reprPointer((*((void**) (P_18503))));
(*Result_18502) = resizeString((*Result_18502), LOC22->Sup.len + 0);
appendString((*Result_18502), LOC22);
LA19: ;
break;
default:
F.line = 223;F.filename = "repr.nim";
(*Result_18502) = resizeString((*Result_18502), 15);
appendString((*Result_18502), ((NimStringDesc*) &TMP20181));
break;
}
F.line = 224;F.filename = "repr.nim";
(*Cl_18506).Recdepth += 1;
BeforeRet: ;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Reprarray_18507)(NimStringDesc** Result_18510, void* P_18511, TNimType* Typ_18512, TY18472* Cl_18514) {
NI Bs_18515;
NI I_18523;
NI HEX3Atmp_20084;
NI Res_20086;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 129;F.filename = "repr.nim";
(*Result_18510) = resizeString((*Result_18510), 1);
appendString((*Result_18510), ((NimStringDesc*) &TMP20174));
Bs_18515 = 0;
F.line = 130;F.filename = "repr.nim";
Bs_18515 = (*(*Typ_18512).base).size;
I_18523 = 0;
HEX3Atmp_20084 = 0;
F.line = 131;F.filename = "repr.nim";
HEX3Atmp_20084 = (NI64)((NI64)((*Typ_18512).size / Bs_18515) - 1);
Res_20086 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20086 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20086 <= HEX3Atmp_20084)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_18523 = Res_20086;
F.line = 132;F.filename = "repr.nim";
if (!(0 < I_18523)) goto LA3;
F.line = 132;F.filename = "repr.nim";
(*Result_18510) = resizeString((*Result_18510), 2);
appendString((*Result_18510), ((NimStringDesc*) &TMP20172));
LA3: ;
F.line = 133;F.filename = "repr.nim";
Repraux_18499(Result_18510, ((void*) ((NI64)(((NI) (P_18511)) + (NI64)(I_18523 * Bs_18515)))), (*Typ_18512).base, Cl_18514);
F.line = 1022;F.filename = "system.nim";
Res_20086 += 1;
} LA1: ;
F.line = 134;F.filename = "repr.nim";
(*Result_18510) = resizeString((*Result_18510), 1);
appendString((*Result_18510), ((NimStringDesc*) &TMP20178));
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, reprOpenArray)(void* P_19003, NI Length_19004, TNimType* Elemtyp_19005) {
NimStringDesc* Result_19006;
TY18472 Cl_19007;
NI Bs_19009;
NI I_19017;
NI HEX3Atmp_20102;
NI Res_20104;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprOpenArray";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19006 = 0;
memset((void*)&Cl_19007, 0, sizeof(Cl_19007));
F.line = 230;F.filename = "repr.nim";
Initreprclosure_18476(&Cl_19007);
F.line = 231;F.filename = "repr.nim";
Result_19006 = copyString(((NimStringDesc*) &TMP20174));
Bs_19009 = 0;
F.line = 232;F.filename = "repr.nim";
Bs_19009 = (*Elemtyp_19005).size;
I_19017 = 0;
HEX3Atmp_20102 = 0;
F.line = 233;F.filename = "repr.nim";
HEX3Atmp_20102 = (NI64)(Length_19004 - 1);
Res_20104 = 0;
F.line = 1019;F.filename = "system.nim";
Res_20104 = 0;
F.line = 1020;F.filename = "system.nim";
while (1) {
if (!(Res_20104 <= HEX3Atmp_20102)) goto LA1;
F.line = 1019;F.filename = "system.nim";
I_19017 = Res_20104;
F.line = 234;F.filename = "repr.nim";
if (!(0 < I_19017)) goto LA3;
F.line = 234;F.filename = "repr.nim";
Result_19006 = resizeString(Result_19006, 2);
appendString(Result_19006, ((NimStringDesc*) &TMP20172));
LA3: ;
F.line = 235;F.filename = "repr.nim";
Repraux_18499(&Result_19006, ((void*) ((NI64)(((NI) (P_19003)) + (NI64)(I_19017 * Bs_19009)))), Elemtyp_19005, &Cl_19007);
F.line = 1022;F.filename = "system.nim";
Res_20104 += 1;
} LA1: ;
F.line = 236;F.filename = "repr.nim";
Result_19006 = resizeString(Result_19006, 1);
appendString(Result_19006, ((NimStringDesc*) &TMP20178));
F.line = 237;F.filename = "repr.nim";
Deinitreprclosure_18481(&Cl_19007);
framePtr = framePtr->prev;
return Result_19006;
}
N_NIMCALL(NimStringDesc*, reprAny)(void* P_7041, TNimType* Typ_7042) {
NimStringDesc* Result_19027;
TY18472 Cl_19028;
void* P_19044;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "reprAny";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/repr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19027 = 0;
memset((void*)&Cl_19028, 0, sizeof(Cl_19028));
F.line = 243;F.filename = "repr.nim";
Initreprclosure_18476(&Cl_19028);
F.line = 244;F.filename = "repr.nim";
Result_19027 = copyString(((NimStringDesc*) &TMP20120));
F.line = 245;F.filename = "repr.nim";
if (!((IL64(1099512610816) &(IL64(1)<<(((*Typ_7042).kind)&IL64(63))))!=0)) goto LA2;
F.line = 246;F.filename = "repr.nim";
Repraux_18499(&Result_19027, P_7041, Typ_7042, &Cl_19028);
goto LA1;
LA2: ;
P_19044 = 0;
F.line = 248;F.filename = "repr.nim";
P_19044 = P_7041;
F.line = 249;F.filename = "repr.nim";
Repraux_18499(&Result_19027, ((void*) (&P_19044)), Typ_7042, &Cl_19028);
LA1: ;
F.line = 250;F.filename = "repr.nim";
Result_19027 = resizeString(Result_19027, 1);
appendString(Result_19027, ((NimStringDesc*) &TMP20117));
F.line = 251;F.filename = "repr.nim";
Deinitreprclosure_18481(&Cl_19028);
framePtr = framePtr->prev;
return Result_19027;
}
static N_INLINE(NimStringDesc*, Getcurrentexceptionmsg_19205)(void) {
NimStringDesc* Result_19207;
E_Base* E_19208;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getCurrentExceptionMsg";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_19207 = 0;
E_19208 = 0;
F.line = 1587;F.filename = "system.nim";
E_19208 = getCurrentException();
F.line = 1588;F.filename = "system.nim";
F.line = 1588;F.filename = "system.nim";
LOC1 = 0;
if (!(E_19208 == NIM_NIL)) goto LA3;
LOC1 = copyString(((NimStringDesc*) &TMP20120));
goto LA2;
LA3: ;
LOC1 = copyString((*E_19208).message);
LA2: ;
Result_19207 = LOC1;
goto BeforeRet;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_19207;
}
N_NIMCALL(void, Listremove_9046)(TY8634** Head_9050, TY8634* C_9051) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListRemove";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 318;F.filename = "alloc.nim";
F.line = 319;F.filename = "alloc.nim";
if (!(C_9051 == (*Head_9050))) goto LA2;
F.line = 320;F.filename = "alloc.nim";
(*Head_9050) = (*C_9051).Next;
F.line = 321;F.filename = "alloc.nim";
F.line = 322;F.filename = "alloc.nim";
if (!!(((*Head_9050) == NIM_NIL))) goto LA5;
F.line = 322;F.filename = "alloc.nim";
(*(*Head_9050)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
F.line = 324;F.filename = "alloc.nim";
F.line = 325;F.filename = "alloc.nim";
(*(*C_9051).Prev).Next = (*C_9051).Next;
F.line = 326;F.filename = "alloc.nim";
if (!!(((*C_9051).Next == NIM_NIL))) goto LA8;
F.line = 326;F.filename = "alloc.nim";
(*(*C_9051).Next).Prev = (*C_9051).Prev;
LA8: ;
LA1: ;
F.line = 327;F.filename = "alloc.nim";
(*C_9051).Next = NIM_NIL;
F.line = 328;F.filename = "alloc.nim";
(*C_9051).Prev = NIM_NIL;
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Contains_9055)(TY8634* List_9058, TY8634* X_9059) {
NIM_BOOL Result_9060;
TY8634* It_9061;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9060 = 0;
It_9061 = 0;
F.line = 294;F.filename = "alloc.nim";
It_9061 = List_9058;
F.line = 295;F.filename = "alloc.nim";
while (1) {
if (!!((It_9061 == NIM_NIL))) goto LA1;
F.line = 296;F.filename = "alloc.nim";
if (!(It_9061 == X_9059)) goto LA3;
F.line = 296;F.filename = "alloc.nim";
F.line = 31;F.filename = "system.nim";
Result_9060 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 297;F.filename = "alloc.nim";
It_9061 = (*It_9061).Next;
} LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9060;
}
N_NIMCALL(void, Listadd_9407)(TY8634** Head_9411, TY8634* C_9412) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListAdd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 308;F.filename = "alloc.nim";
F.line = 309;F.filename = "alloc.nim";
F.line = 310;F.filename = "alloc.nim";
F.line = 311;F.filename = "alloc.nim";
(*C_9412).Next = (*Head_9411);
F.line = 312;F.filename = "alloc.nim";
if (!!(((*Head_9411) == NIM_NIL))) goto LA2;
F.line = 313;F.filename = "alloc.nim";
F.line = 314;F.filename = "alloc.nim";
(*(*Head_9411)).Prev = C_9412;
LA2: ;
F.line = 315;F.filename = "alloc.nim";
(*Head_9411) = C_9412;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Listadd_9626)(TY8632** Head_9630, TY8632* C_9631) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListAdd";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 308;F.filename = "alloc.nim";
F.line = 309;F.filename = "alloc.nim";
F.line = 310;F.filename = "alloc.nim";
F.line = 311;F.filename = "alloc.nim";
(*C_9631).Next = (*Head_9630);
F.line = 312;F.filename = "alloc.nim";
if (!!(((*Head_9630) == NIM_NIL))) goto LA2;
F.line = 313;F.filename = "alloc.nim";
F.line = 314;F.filename = "alloc.nim";
(*(*Head_9630)).Prev = C_9631;
LA2: ;
F.line = 315;F.filename = "alloc.nim";
(*Head_9630) = C_9631;
framePtr = framePtr->prev;
}
N_NIMCALL(NIM_BOOL, Contains_9635)(TY8632* List_9638, TY8632* X_9639) {
NIM_BOOL Result_9640;
TY8632* It_9641;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "contains";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_9640 = 0;
It_9641 = 0;
F.line = 294;F.filename = "alloc.nim";
It_9641 = List_9638;
F.line = 295;F.filename = "alloc.nim";
while (1) {
if (!!((It_9641 == NIM_NIL))) goto LA1;
F.line = 296;F.filename = "alloc.nim";
if (!(It_9641 == X_9639)) goto LA3;
F.line = 296;F.filename = "alloc.nim";
F.line = 31;F.filename = "system.nim";
Result_9640 = NIM_TRUE;
goto BeforeRet;
LA3: ;
F.line = 297;F.filename = "alloc.nim";
It_9641 = (*It_9641).Next;
} LA1: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_9640;
}
N_NIMCALL(void, Listremove_9768)(TY8632** Head_9772, TY8632* C_9773) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "ListRemove";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/alloc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 318;F.filename = "alloc.nim";
F.line = 319;F.filename = "alloc.nim";
if (!(C_9773 == (*Head_9772))) goto LA2;
F.line = 320;F.filename = "alloc.nim";
(*Head_9772) = (*C_9773).Next;
F.line = 321;F.filename = "alloc.nim";
F.line = 322;F.filename = "alloc.nim";
if (!!(((*Head_9772) == NIM_NIL))) goto LA5;
F.line = 322;F.filename = "alloc.nim";
(*(*Head_9772)).Prev = NIM_NIL;
LA5: ;
goto LA1;
LA2: ;
F.line = 324;F.filename = "alloc.nim";
F.line = 325;F.filename = "alloc.nim";
(*(*C_9773).Prev).Next = (*C_9773).Next;
F.line = 326;F.filename = "alloc.nim";
if (!!(((*C_9773).Next == NIM_NIL))) goto LA8;
F.line = 326;F.filename = "alloc.nim";
(*(*C_9773).Next).Prev = (*C_9773).Prev;
LA8: ;
LA1: ;
F.line = 327;F.filename = "alloc.nim";
(*C_9773).Next = NIM_NIL;
F.line = 328;F.filename = "alloc.nim";
(*C_9773).Prev = NIM_NIL;
framePtr = framePtr->prev;
}
N_NOINLINE(void, systemInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "system";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 1240;F.filename = "system.nim";
Dbglinehook_2521 = ((TY2518) (NIM_NIL));
F.line = 1324;F.filename = "system.nim";
Strdesc_2817.size = 8;
F.line = 1325;F.filename = "system.nim";
Strdesc_2817.kind = ((NU8) 28);
F.line = 1326;F.filename = "system.nim";
Strdesc_2817.flags = 2;
F.line = 1327;F.filename = "system.nim";
Initstackbottom_2813();
F.line = 1328;F.filename = "system.nim";
Initgc_2811();
F.line = 39;F.filename = "excpt.nim";
excHandler = NIM_NIL;
F.line = 77;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Stacktracenewline_4459, copyString(((NimStringDesc*) &TMP20117)));
F.line = 240;F.filename = "excpt.nim";
registerSignalHandler();
F.line = 243;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Gassertionfailed_5051, (EAssertionFailed*) newObj(NTI5050, sizeof(EAssertionFailed)));
(*Gassertionfailed_5051).Sup.Sup.Sup.m_type = NTI436;
F.line = 244;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Buf_4453, mnewString(2048));
F.line = 245;F.filename = "excpt.nim";
asgnRefNoCycle((void**) &Assertbuf_4454, mnewString(2048));
F.line = 246;F.filename = "excpt.nim";
Buf_4453 = setLengthStr(Buf_4453, 0);
F.line = 247;F.filename = "excpt.nim";
Assertbuf_4454 = setLengthStr(Assertbuf_4454, 0);
F.line = 134;F.filename = "alloc.nim";
F.line = 135;F.filename = "alloc.nim";
F.line = 136;F.filename = "alloc.nim";
F.line = 246;F.filename = "alloc.nim";
Lastsize_8891 = 4096;
F.line = 194;F.filename = "mmdisp.nim";
F.line = 71;F.filename = "gc.nim";
Cyclethreshold_11011 = 4194304;
F.line = 72;F.filename = "gc.nim";
Recgclock_11012 = 0;
framePtr = framePtr->prev;
}

