/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY146077 TY146077;
typedef struct TY146677 TY146677;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY146137 TY146137;
typedef struct TY146135 TY146135;
typedef struct TY146673 TY146673;
typedef struct TY76281 TY76281;
typedef struct TY146682 TY146682;
typedef struct TY146671 TY146671;
typedef struct TY10402 TY10402;
typedef struct TY10418 TY10418;
typedef struct TY10790 TY10790;
typedef struct TY10414 TY10414;
typedef struct TY10410 TY10410;
typedef struct TY10788 TY10788;
typedef struct TY146139 TY146139;
typedef struct TY146075 TY146075;
typedef struct TY46536 TY46536;
typedef struct TY38221 TY38221;
typedef NU8 TY21602[32];
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef NimStringDesc* TY148395[12];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY146135 {
NU8 Kind;
NI Ival;
NimStringDesc* Symbol;
NI Line;
NI Col;
};
struct TY146677 {
  TNimObject Sup;
NI Idx;
TY146137* Tok;
TY146673* S;
TY76281* Indentstack;
NimStringDesc* Filename;
NI Line;
NI Col;
NIM_BOOL Hastoc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY146671 {
NimStringDesc* Key;
TY146077* Value;
};
typedef NI TY25123[256];
struct TY146673 {
NI Ulevel;
NI Olevel;
TY146682* Subs;
TY146682* Refs;
TY25123 Underlinetolevel;
TY25123 Overlinetolevel;
};
struct TY10402 {
NI Refcount;
TNimType* Typ;
};
struct TY10418 {
NI Len;
NI Cap;
TY10402** D;
};
struct TY10414 {
NI Counter;
NI Max;
TY10410* Head;
TY10410** Data;
};
struct TY10788 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10790 {
TY10418 Zct;
TY10418 Decstack;
TY10414 Cycleroots;
TY10418 Tempstack;
TY10788 Stat;
};
struct TY146139 {
  TNimObject Sup;
NCSTRING Buf;
NI Bufpos;
NI Line;
NI Col;
NI Baseindent;
NIM_BOOL Skippounds;
};
struct TY146077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY146075* Sons;
};
struct TY46536 {
NI16 Line;
NI16 Col;
int Fileindex;
};
typedef N_NIMCALL_PTR(TY146077*, TY149943) (TY146677* P_149949);
typedef NimStringDesc* TY149716[3];
typedef NI TY149721[3];
typedef NI TY8414[8];
struct TY10410 {
TY10410* Next;
NI Key;
TY8414 Bits;
};
struct TY146137 {
  TGenericSeq Sup;
  TY146135 data[SEQ_DECL_SIZE];
};
struct TY76281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY146682 {
  TGenericSeq Sup;
  TY146671 data[SEQ_DECL_SIZE];
};
struct TY146075 {
  TGenericSeq Sup;
  TY146077* data[SEQ_DECL_SIZE];
};
struct TY38221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Rawmessage_46557)(NU8 Msg_46559, NimStringDesc* Arg_46560);
N_NIMCALL(void, Initparser_146826)(TY146677* P_146829, TY146673* Sharedstate_146830);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_12826, void* Src_12827);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18308);
N_NIMCALL(TY146673*, Newsharedstate_146697)(void);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12818, void* Src_12819);
static N_INLINE(TY10402*, Usrtocell_11212)(void* Usr_11214);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12201)(TY10402* C_12203);
N_NOINLINE(void, Addzct_11201)(TY10418* S_11204, TY10402* C_11205);
N_NIMCALL(void, Gettokens_146427)(NimStringDesc* Buffer_146429, NIM_BOOL Skippounds_146430, TY146137** Tokens_146432);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18603, NI Elemsize_18604, NI Newlen_18605);
N_NIMCALL(void, Rawgettok_146375)(TY146139* L_146378, TY146135* Tok_146380);
N_NIMCALL(void, Getthing_146158)(TY146139* L_146161, TY146135* Tok_146163, TY21602 S_146164);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Getindent_146355)(TY146139* L_146358, TY146135* Tok_146360);
N_NIMCALL(NI, Getindentaux_146235)(TY146139* L_146238, NI Start_146239);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18392, NimStringDesc* Src_18393);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_24638, NIM_CHAR C_24639);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18287);
N_NIMCALL(void, Getadornment_146201)(TY146139* L_146204, TY146135* Tok_146206);
N_NIMCALL(TY146077*, Resolvesubs_150364)(TY146677* P_150367, TY146077* N_150368);
N_NIMCALL(NI, Findsub_146976)(TY146677* P_146979, TY146077* N_146980);
N_NIMCALL(NimStringDesc*, Addnodes_146108)(TY146077* N_146110);
N_NIMCALL(void, Addnodesaux_146861)(TY146077* N_146863, NimStringDesc** Result_146865);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18382, NI Addlen_18383);
N_NIMCALL(NI, Rsonslen_146091)(TY146077* N_146093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18247, NimStringDesc* B_18248);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_23624, NimStringDesc* B_23625);
N_NIMCALL(NimStringDesc*, Getenv_38417)(NimStringDesc* Key_38419);
N_NIMCALL(TY146077*, Newrstnode_146097)(NU8 Kind_146099, NimStringDesc* S_146100);
N_NIMCALL(TY146077*, Newrstnode_146094)(NU8 Kind_146096);
N_NIMCALL(void, Rstmessage_146752)(TY146677* P_146754, NU8 Msgkind_146755, NimStringDesc* Arg_146756);
N_NIMCALL(void, Limessage_46566)(TY46536 Info_46568, NU8 Msg_46569, NimStringDesc* Arg_46570);
N_NIMCALL(TY46536, Tokinfo_146747)(TY146677* P_146749, TY146135* Tok_146750);
N_NIMCALL(TY46536, Newlineinfo_46578)(NimStringDesc* Filename_46580, NI Line_46581, NI Col_46582);
N_NIMCALL(TY146077*, Findref_147087)(TY146677* P_147090, NimStringDesc* Key_147091);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_146105)(TY146077* N_146107);
N_NIMCALL(void, Rstnodetorefnameaux_146906)(TY146077* N_146908, NimStringDesc** R_146910, NIM_BOOL* B_146912);
N_NIMCALL(void, Addson_146101)(TY146077* Father_146103, TY146077* Son_146104);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18435, NI Elemsize_18436);
N_NIMCALL(TY146077*, Parsedoc_149052)(TY146677* P_149055);
N_NIMCALL(TY146077*, Parsesectionwrapper_149908)(TY146677* P_149911);
N_NIMCALL(void, Parsesection_148423)(TY146677* P_148426, TY146077* Result_148427);
N_NIMCALL(NI, Currind_146761)(TY146677* P_146763);
N_NIMCALL(void, Pushind_146765)(TY146677* P_146768, NI Ind_146769);
N_NIMCALL(void, Popind_146788)(TY146677* P_146791);
N_NIMCALL(NU8, Whichsection_148762)(TY146677* P_148764);
N_NIMCALL(NIM_BOOL, Match_147694)(TY146677* P_147696, NI Start_147697, NimStringDesc* Expr_147698);
N_NIMCALL(NIM_BOOL, Allcharsinset_24864)(NimStringDesc* S_24866, TY21602 Theset_24867);
N_NIMCALL(NI, Tokenafternewline_148685)(TY146677* P_148687);
N_NIMCALL(NIM_BOOL, Prednl_148722)(TY146677* P_148724);
N_NIMCALL(NIM_BOOL, Islineblock_148713)(TY146677* P_148715);
N_NIMCALL(void, Rstmessage_146757)(TY146677* P_146759, NU8 Msgkind_146760);
N_NIMCALL(NIM_BOOL, Isdeflist_148739)(TY146677* P_148741);
N_NIMCALL(NIM_BOOL, Isoptionlist_148758)(TY146677* P_148760);
N_NIMCALL(TY146077*, Parseliteralblock_148585)(TY146677* P_148588);
N_NIMCALL(TY146077*, Parsebulletlist_149452)(TY146677* P_149455);
N_NIMCALL(TY146077*, Parselineblock_148775)(TY146677* P_148778);
N_NIMCALL(TY146077*, Parsedotdot_148581)(TY146677* P_148584);
N_NIMCALL(NimStringDesc*, Getdirective_148189)(TY146677* P_148192);
N_NIMCALL(NU8, Getdirkind_148411)(NimStringDesc* S_148413);
N_NIMCALL(NI, Binarystrsearch_45148)(NimStringDesc** X_45151, NI X_45151Len0, NimStringDesc* Y_45152);
N_NIMCALL(TY146077*, Dirinclude_150097)(TY146677* P_150100);
N_NIMCALL(TY146077*, Parsedirective_150083)(TY146677* P_150086, NU8 Flags_150087, TY149943 Contentparser_150088);
N_NIMCALL(TY146077*, Parsedirective_149951)(TY146677* P_149954, NU8 Flags_149955);
N_NIMCALL(TY146077*, Newleaf_147447)(TY146677* P_147450);
N_NIMCALL(void, Parseline_148418)(TY146677* P_148421, TY146077* Father_148422);
N_NIMCALL(void, Parseinline_148107)(TY146677* P_148110, TY146077* Father_148111);
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_147572)(TY146677* P_147574, NimStringDesc* Markup_147575);
N_NIMCALL(void, Parseuntil_148031)(TY146677* P_148034, TY146077* Father_148035, NimStringDesc* Postfix_148036, NIM_BOOL Interpretbackslash_148037);
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_147529)(TY146677* P_147531, NimStringDesc* Markup_147532);
N_NIMCALL(void, Parsebackslash_147623)(TY146677* P_147626, TY146077* Father_147627);
N_NIMCALL(TY146077*, Parsepostfix_147931)(TY146677* P_147934, TY146077* N_147935);
N_NIMCALL(void, Fixupembeddedref_147871)(TY146077* N_147873, TY146077* A_147874, TY146077* B_147875);
N_NIMCALL(void, Setref_147047)(TY146677* P_147050, NimStringDesc* Key_147051, TY146077* Value_147052);
N_NIMCALL(void, Parseurl_147988)(TY146677* P_147991, TY146077* Father_147992);
N_NIMCALL(NIM_BOOL, Isurl_147974)(TY146677* P_147976, NI I_147977);
N_NIMCALL(TY146077*, Parsefields_148469)(TY146677* P_148472);
N_NIMCALL(TY146077*, Parsefield_148428)(TY146677* P_148431);
N_NIMCALL(NIM_BOOL, Indfollows_150068)(TY146677* P_150070);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_23959, NIM_BOOL Leading_23960, NIM_BOOL Trailing_23961);
N_NIMCALL(NimStringDesc*, Findfile_45089)(NimStringDesc* F_45091);
N_NIMCALL(NimStringDesc*, Getfieldvalue_146111)(TY146077* N_146113, NimStringDesc* Fieldname_146114);
N_NIMCALL(void, Internalerror_46575)(NimStringDesc* Errmsg_46577);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19355, TNimType* Typ_19356);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(NI, nsuFindStr)(NimStringDesc* S_25197, NimStringDesc* Sub_25198, NI Start_25199);
N_NIMCALL(TY146077*, Dirimage_150138)(TY146677* P_150141);
N_NIMCALL(TY146077*, Dirfigure_150144)(TY146677* P_150147);
N_NIMCALL(TY146077*, Dirtitle_150150)(TY146677* P_150153);
N_NIMCALL(TY146077*, Dircontainer_150121)(TY146677* P_150124);
N_NIMCALL(TY146077*, Dircontents_150156)(TY146677* P_150159);
N_NIMCALL(TY146077*, Dirraw_150188)(TY146677* P_150191);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_23582, NimStringDesc* B_23583);
N_NIMCALL(void, Dirrawaux_150169)(TY146677* P_150172, TY146077** Result_150174, NU8 Kind_150175, TY149943 Contentparser_150176);
N_NIMCALL(TY146077*, Parsedirbody_150091)(TY146677* P_150094, TY149943 Contentparser_150095);
N_NIMCALL(TY146077*, Dircodeblock_150112)(TY146677* P_150115);
N_NIMCALL(TY146077*, Dirindex_150162)(TY146677* P_150165);
N_NIMCALL(TY146077*, Getreferencename_147452)(TY146677* P_147455, NimStringDesc* Endstr_147456);
N_NIMCALL(TY146077*, Untileol_147483)(TY146677* P_147486);
N_NIMCALL(void, Expect_147512)(TY146677* P_147515, NimStringDesc* Tok_147516);
N_NIMCALL(void, Setsub_147007)(TY146677* P_147010, NimStringDesc* Key_147011, TY146077* Value_147012);
N_NIMCALL(TY146077*, Parsecomment_148315)(TY146677* P_148318);
N_NIMCALL(TY146077*, Parseenumlist_149710)(TY146677* P_149713);
N_NIMCALL(TY146077*, Parsedefinitionlist_149617)(TY146677* P_149620);
N_NIMCALL(TY146077*, Parsetransition_149308)(TY146677* P_149311);
N_NIMCALL(TY146077*, Parseheadline_148903)(TY146677* P_148906);
N_NIMCALL(NI, Getlevel_148663)(NI* Map_148666, NI* Lvl_148668, NIM_CHAR C_148669);
N_NIMCALL(TY146077*, Parseoverline_149367)(TY146677* P_149370);
N_NIMCALL(TY146077*, Parsesimpletable_149056)(TY146677* P_149059);
N_NIMCALL(void, Getcolumns_148949)(TY146677* P_148952, TY76281** Cols_148954);
N_NIMCALL(NI, Tokend_148943)(TY146677* P_148945);
N_NIMCALL(TY146077*, Parseoptionlist_149513)(TY146677* P_149516);
N_NIMCALL(void, Parseparagraph_148835)(TY146677* P_148838, TY146077* Result_148839);
N_NIMCALL(void, Addsonifnotnil_146585)(TY146077* Father_146587, TY146077* Son_146588);
N_NIMCALL(NU8, Sonkind_149794)(TY146077* Father_149796, NI I_149797);
N_NIMCALL(NIM_BOOL, Matcheshyperlink_147200)(TY146077* H_147202, NimStringDesc* Filename_147203);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_24805, NimStringDesc* Prefix_24806);
N_NIMCALL(NIM_BOOL, Eqrstnodes_147164)(TY146077* A_147166, TY146077* B_147167);
N_NIMCALL(NI, Cmpnodes_147104)(TY146077* A_147106, TY146077* B_147107);
NIM_CONST TY21602 Symchars_146130 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP148399, "", 0);
STRING_LITERAL(TMP148400, "author", 6);
STRING_LITERAL(TMP148401, "authors", 7);
STRING_LITERAL(TMP148402, "code-block", 10);
STRING_LITERAL(TMP148403, "container", 9);
STRING_LITERAL(TMP148404, "contents", 8);
STRING_LITERAL(TMP148405, "figure", 6);
STRING_LITERAL(TMP148406, "image", 5);
STRING_LITERAL(TMP148407, "include", 7);
STRING_LITERAL(TMP148408, "index", 5);
STRING_LITERAL(TMP148409, "raw", 3);
STRING_LITERAL(TMP148410, "title", 5);
NIM_CONST TY148395 Dirids_148394 = {((NimStringDesc*) &TMP148399),
((NimStringDesc*) &TMP148400),
((NimStringDesc*) &TMP148401),
((NimStringDesc*) &TMP148402),
((NimStringDesc*) &TMP148403),
((NimStringDesc*) &TMP148404),
((NimStringDesc*) &TMP148405),
((NimStringDesc*) &TMP148406),
((NimStringDesc*) &TMP148407),
((NimStringDesc*) &TMP148408),
((NimStringDesc*) &TMP148409),
((NimStringDesc*) &TMP148410)}
;
static NIM_CONST TY21602 TMP195094 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;static NIM_CONST TY21602 TMP195095 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195096, "\012", 1);
STRING_LITERAL(TMP195097, "#", 1);
static NIM_CONST TY21602 TMP195098 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195099, "ii", 2);
STRING_LITERAL(TMP195100, " a", 2);
STRING_LITERAL(TMP195101, "i", 1);
STRING_LITERAL(TMP195102, "ai", 2);
STRING_LITERAL(TMP195103, "::", 2);
STRING_LITERAL(TMP195104, "+", 1);
STRING_LITERAL(TMP195105, "*", 1);
STRING_LITERAL(TMP195106, "-", 1);
STRING_LITERAL(TMP195107, "|", 1);
STRING_LITERAL(TMP195108, "..", 2);
STRING_LITERAL(TMP195109, ":", 1);
STRING_LITERAL(TMP195110, "(e) ", 4);
STRING_LITERAL(TMP195111, "+a+", 3);
STRING_LITERAL(TMP195112, "-w", 2);
STRING_LITERAL(TMP195113, "--w", 3);
STRING_LITERAL(TMP195114, "/w", 2);
STRING_LITERAL(TMP195115, "//w", 3);
STRING_LITERAL(TMP195116, "e) ", 3);
STRING_LITERAL(TMP195117, "e. ", 3);
static NIM_CONST TY21602 TMP195118 = {
0x00, 0x00, 0x00, 0x00, 0x84, 0xA1, 0x00, 0x14,
0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x08,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195119, "\\", 1);
STRING_LITERAL(TMP195120, "**", 2);
static NIM_CONST TY21602 TMP195121 = {
0x00, 0x00, 0x00, 0x00, 0x86, 0xF2, 0x00, 0xCC,
0x00, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0x20,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP195122, "``", 2);
STRING_LITERAL(TMP195123, "\\\\", 2);
STRING_LITERAL(TMP195124, " ", 1);
STRING_LITERAL(TMP195125, "`", 1);
STRING_LITERAL(TMP195126, "_", 1);
STRING_LITERAL(TMP195127, ">", 1);
STRING_LITERAL(TMP195128, "<", 1);
STRING_LITERAL(TMP195129, ":w:", 3);
STRING_LITERAL(TMP195130, "idx", 3);
STRING_LITERAL(TMP195131, "literal", 7);
STRING_LITERAL(TMP195132, "strong", 6);
STRING_LITERAL(TMP195133, "emphasis", 8);
STRING_LITERAL(TMP195134, "sub", 3);
STRING_LITERAL(TMP195135, "subscript", 9);
STRING_LITERAL(TMP195136, "sup", 3);
STRING_LITERAL(TMP195137, "supscript", 9);
STRING_LITERAL(TMP195138, "//", 2);
STRING_LITERAL(TMP195139, ".", 1);
STRING_LITERAL(TMP195140, "getFieldValue (2): ", 19);
STRING_LITERAL(TMP195141, "\001\001", 2);
STRING_LITERAL(TMP195142, "\000\001\002", 3);
STRING_LITERAL(TMP195143, "Too many binary zeros in include file", 37);
STRING_LITERAL(TMP195144, "html", 4);
STRING_LITERAL(TMP195145, "file", 4);
STRING_LITERAL(TMP195146, "latex", 5);
STRING_LITERAL(TMP195147, " _", 2);
STRING_LITERAL(TMP195148, " |", 2);
STRING_LITERAL(TMP195149, "replace", 7);
STRING_LITERAL(TMP195150, " [", 2);
STRING_LITERAL(TMP195151, "]", 1);
NIM_CONST TY149716 Wildcards_149715 = {((NimStringDesc*) &TMP195110),
((NimStringDesc*) &TMP195116),
((NimStringDesc*) &TMP195117)}
;
NIM_CONST TY149721 Wildpos_149720 = {1,
0,
0}
;
extern NIM_CONST TY149716 Wildcards_149715;
extern NIM_CONST TY149721 Wildpos_149720;
STRING_LITERAL(TMP195152, "rst.parseSection()", 18);
extern TNimType* NTI146677; /* TRstParser */
extern TNimType* NTI76281; /* seq[int] */
extern TNimType* NTI146137; /* TTokenSeq */
extern TNimType* NTI146675; /* PSharedState */
extern TNimType* NTI146682; /* seq[TSubstitution] */
extern TY10790 Gch_10808;
extern TNimType* NTI146139; /* TLexer */
extern TNimType* NTI146073; /* PRSTNode */
extern TNimType* NTI146075; /* TRstNodeSeq */
extern TNimType* NTI146008; /* TRstNodeKind */
extern TNimType* NTI38221; /* seq[string] */
N_NIMCALL(void, Initparser_146826)(TY146677* P_146829, TY146673* Sharedstate_146830) {
unsureAsgnRef((void**) &(*P_146829).Indentstack, (TY76281*) newSeq(NTI76281, 1));
(*P_146829).Indentstack->data[0] = 0;
unsureAsgnRef((void**) &(*P_146829).Tok, (TY146137*) newSeq(NTI146137, 0));
(*P_146829).Idx = 0;
unsureAsgnRef((void**) &(*P_146829).Filename, copyString(((NimStringDesc*) &TMP148399)));
(*P_146829).Hastoc = NIM_FALSE;
(*P_146829).Col = 0;
(*P_146829).Line = 1;
unsureAsgnRef((void**) &(*P_146829).S, Sharedstate_146830);
}
static N_INLINE(TY10402*, Usrtocell_11212)(void* Usr_11214) {
TY10402* Result_11215;
Result_11215 = 0;
Result_11215 = ((TY10402*) ((NI64)((NU64)(((NI) (Usr_11214))) - (NU64)(((NI) (((NI)sizeof(TY10402))))))));
return Result_11215;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7407;
Result_7407 = 0;
(*Memloc_3004) += X_3005;
Result_7407 = (*Memloc_3004);
return Result_7407;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
Result_7606 = 0;
(*Memloc_3009) -= X_3010;
Result_7606 = (*Memloc_3009);
return Result_7606;
}
static N_INLINE(void, Rtladdzct_12201)(TY10402* C_12203) {
Addzct_11201(&Gch_10808.Zct, C_12203);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12818, void* Src_12819) {
TY10402* C_12820;
NI LOC4;
TY10402* C_12822;
NI LOC9;
if (!!((Src_12819 == NIM_NIL))) goto LA2;
C_12820 = 0;
C_12820 = Usrtocell_11212(Src_12819);
LOC4 = Atomicinc_3001(&(*C_12820).Refcount, 8);
LA2: ;
if (!!(((*Dest_12818) == NIM_NIL))) goto LA6;
C_12822 = 0;
C_12822 = Usrtocell_11212((*Dest_12818));
LOC9 = Atomicdec_3006(&(*C_12822).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12201(C_12822);
LA10: ;
LA6: ;
(*Dest_12818) = Src_12819;
}
N_NIMCALL(TY146673*, Newsharedstate_146697)(void) {
TY146673* Result_146699;
Result_146699 = 0;
Result_146699 = (TY146673*) newObj(NTI146675, sizeof(TY146673));
asgnRefNoCycle((void**) &(*Result_146699).Subs, (TY146682*) newSeq(NTI146682, 0));
asgnRefNoCycle((void**) &(*Result_146699).Refs, (TY146682*) newSeq(NTI146682, 0));
return Result_146699;
}
N_NIMCALL(void, Getthing_146158)(TY146139* L_146161, TY146135* Tok_146163, TY21602 S_146164) {
NI Pos_146165;
(*Tok_146163).Kind = ((NU8) 3);
(*Tok_146163).Line = (*L_146161).Line;
(*Tok_146163).Col = (*L_146161).Col;
Pos_146165 = 0;
Pos_146165 = (*L_146161).Bufpos;
while (1) {
(*Tok_146163).Symbol = addChar((*Tok_146163).Symbol, (*L_146161).Buf[Pos_146165]);
Pos_146165 += 1;
if (!!(((S_146164[((NU8)((*L_146161).Buf[Pos_146165]))/8] &(1<<(((NU8)((*L_146161).Buf[Pos_146165]))%8)))!=0))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_146161).Col += (NI64)(Pos_146165 - (*L_146161).Bufpos);
(*L_146161).Bufpos = Pos_146165;
}
N_NIMCALL(NI, Getindentaux_146235)(TY146139* L_146238, NI Start_146239) {
NI Result_146240;
NI Pos_146241;
NCSTRING Buf_146242;
NIM_BOOL LOC22;
Result_146240 = 0;
Pos_146241 = 0;
Pos_146241 = Start_146239;
Buf_146242 = 0;
Buf_146242 = (*L_146238).Buf;
if (!((NU8)(Buf_146242[Pos_146241]) == (NU8)(13))) goto LA2;
if (!((NU8)(Buf_146242[(NI64)(Pos_146241 + 1)]) == (NU8)(10))) goto LA5;
Pos_146241 += 2;
goto LA4;
LA5: ;
Pos_146241 += 1;
LA4: ;
goto LA1;
LA2: ;
if (!((NU8)(Buf_146242[Pos_146241]) == (NU8)(10))) goto LA7;
Pos_146241 += 1;
goto LA1;
LA7: ;
LA1: ;
if (!(*L_146238).Skippounds) goto LA10;
if (!((NU8)(Buf_146242[Pos_146241]) == (NU8)(35))) goto LA13;
Pos_146241 += 1;
LA13: ;
if (!((NU8)(Buf_146242[Pos_146241]) == (NU8)(35))) goto LA16;
Pos_146241 += 1;
LA16: ;
LA10: ;
while (1) {
switch (((NU8)(Buf_146242[Pos_146241]))) {
case 32:
case 11:
case 12:
Pos_146241 += 1;
Result_146240 += 1;
break;
case 9:
Pos_146241 += 1;
Result_146240 = (NI64)((NI64)(Result_146240 - (NI64)(Result_146240 % 8)) + 8);
break;
default:
goto LA18;
break;
}
} LA18: ;
if (!((NU8)(Buf_146242[Pos_146241]) == (NU8)(0))) goto LA20;
Result_146240 = 0;
goto LA19;
LA20: ;
LOC22 = ((NU8)(Buf_146242[Pos_146241]) == (NU8)(10));
if (LOC22) goto LA23;
LOC22 = ((NU8)(Buf_146242[Pos_146241]) == (NU8)(13));
LA23: ;
if (!LOC22) goto LA24;
Result_146240 = Getindentaux_146235(L_146238, Pos_146241);
goto LA19;
LA24: ;
LA19: ;
(*L_146238).Bufpos = Pos_146241;
return Result_146240;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18392, NimStringDesc* Src_18393) {
memcpy(((NCSTRING) (&(*Dest_18392).data[((*Dest_18392).Sup.len)-0])), ((NCSTRING) ((*Src_18393).data)), ((int) ((NI64)((NI64)((*Src_18393).Sup.len + 1) * 1))));
(*Dest_18392).Sup.len += (*Src_18393).Sup.len;
}
N_NIMCALL(void, Getindent_146355)(TY146139* L_146358, TY146135* Tok_146360) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
(*L_146358).Line += 1;
(*Tok_146360).Line = (*L_146358).Line;
(*Tok_146360).Col = 0;
(*Tok_146360).Kind = ((NU8) 1);
(*Tok_146360).Ival = Getindentaux_146235(L_146358, (*L_146358).Bufpos);
(*L_146358).Col = (*Tok_146360).Ival;
(*Tok_146360).Ival = (((NI64)((*Tok_146360).Ival - (*L_146358).Baseindent) >= 0) ? (NI64)((*Tok_146360).Ival - (*L_146358).Baseindent) : 0);
LOC1 = 0;
LOC2 = 0;
LOC2 = nsuRepeatChar((*Tok_146360).Ival, 32);
LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP195096));
appendString(LOC1, LOC2);
unsureAsgnRef((void**) &(*Tok_146360).Symbol, LOC1);
}
N_NIMCALL(void, Getadornment_146201)(TY146139* L_146204, TY146135* Tok_146206) {
NI Pos_146207;
NIM_CHAR C_146208;
(*Tok_146206).Kind = ((NU8) 4);
(*Tok_146206).Line = (*L_146204).Line;
(*Tok_146206).Col = (*L_146204).Col;
Pos_146207 = 0;
Pos_146207 = (*L_146204).Bufpos;
C_146208 = 0;
C_146208 = (*L_146204).Buf[Pos_146207];
while (1) {
(*Tok_146206).Symbol = addChar((*Tok_146206).Symbol, (*L_146204).Buf[Pos_146207]);
Pos_146207 += 1;
if (!!(((NU8)((*L_146204).Buf[Pos_146207]) == (NU8)(C_146208)))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_146204).Col += (NI64)(Pos_146207 - (*L_146204).Bufpos);
(*L_146204).Bufpos = Pos_146207;
}
N_NIMCALL(void, Rawgettok_146375)(TY146139* L_146378, TY146135* Tok_146380) {
NIM_CHAR C_146381;
unsureAsgnRef((void**) &(*Tok_146380).Symbol, copyString(((NimStringDesc*) &TMP148399)));
(*Tok_146380).Ival = 0;
C_146381 = 0;
C_146381 = (*L_146378).Buf[(*L_146378).Bufpos];
switch (((NU8)(C_146381))) {
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 48 ... 57:
Getthing_146158(L_146378, Tok_146380, TMP195094);
break;
case 32:
case 9:
case 11:
case 12:
Getthing_146158(L_146378, Tok_146380, TMP195095);
(*Tok_146380).Kind = ((NU8) 2);
if (!(((NU8)((*L_146378).Buf[(*L_146378).Bufpos])) == ((NU8)(13)) || ((NU8)((*L_146378).Buf[(*L_146378).Bufpos])) == ((NU8)(10)))) goto LA2;
Rawgettok_146375(L_146378, Tok_146380);
LA2: ;
break;
case 13:
case 10:
Getindent_146355(L_146378, Tok_146380);
break;
case 33:
case 34:
case 35:
case 36:
case 37:
case 38:
case 39:
case 40:
case 41:
case 42:
case 43:
case 44:
case 45:
case 46:
case 47:
case 58:
case 59:
case 60:
case 61:
case 62:
case 63:
case 64:
case 91:
case 92:
case 93:
case 94:
case 95:
case 96:
case 123:
case 124:
case 125:
case 126:
Getadornment_146201(L_146378, Tok_146380);
if (!((*Tok_146380).Symbol->Sup.len <= 3)) goto LA5;
(*Tok_146380).Kind = ((NU8) 5);
LA5: ;
break;
default:
(*Tok_146380).Line = (*L_146378).Line;
(*Tok_146380).Col = (*L_146378).Col;
if (!((NU8)(C_146381) == (NU8)(0))) goto LA8;
(*Tok_146380).Kind = ((NU8) 0);
goto LA7;
LA8: ;
(*Tok_146380).Kind = ((NU8) 6);
(*Tok_146380).Symbol = addChar((*Tok_146380).Symbol, C_146381);
(*L_146378).Bufpos += 1;
(*L_146378).Col += 1;
LA7: ;
break;
}
(*Tok_146380).Col = (((NI64)((*Tok_146380).Col - (*L_146378).Baseindent) >= 0) ? (NI64)((*Tok_146380).Col - (*L_146378).Baseindent) : 0);
}
N_NIMCALL(void, Gettokens_146427)(NimStringDesc* Buffer_146429, NIM_BOOL Skippounds_146430, TY146137** Tokens_146432) {
TY146139 L_146433;
NI Length_146444;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
memset((void*)&L_146433, 0, sizeof(L_146433));
L_146433.Sup.m_type = NTI146139;
Length_146444 = 0;
Length_146444 = (*Tokens_146432)->Sup.len;
L_146433.Buf = Buffer_146429->data;
L_146433.Line = 1;
LOC3 = ((NU8)(L_146433.Buf[0]) == (NU8)(239));
if (!(LOC3)) goto LA4;
LOC3 = ((NU8)(L_146433.Buf[1]) == (NU8)(187));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((NU8)(L_146433.Buf[2]) == (NU8)(191));
LA5: ;
if (!LOC2) goto LA6;
L_146433.Bufpos += 3;
LA6: ;
L_146433.Skippounds = Skippounds_146430;
if (!Skippounds_146430) goto LA9;
if (!((NU8)(L_146433.Buf[L_146433.Bufpos]) == (NU8)(35))) goto LA12;
L_146433.Bufpos += 1;
LA12: ;
if (!((NU8)(L_146433.Buf[L_146433.Bufpos]) == (NU8)(35))) goto LA15;
L_146433.Bufpos += 1;
LA15: ;
L_146433.Baseindent = 0;
while (1) {
if (!((NU8)(L_146433.Buf[L_146433.Bufpos]) == (NU8)(32))) goto LA17;
L_146433.Bufpos += 1;
L_146433.Baseindent += 1;
} LA17: ;
LA9: ;
while (1) {
Length_146444 += 1;
(*Tokens_146432) = (TY146137*) setLengthSeq(&((*Tokens_146432))->Sup, sizeof(TY146135), Length_146444);
Rawgettok_146375(&L_146433, &(*Tokens_146432)->data[(NI64)(Length_146444 - 1)]);
if (!((*Tokens_146432)->data[(NI64)(Length_146444 - 1)].Kind == ((NU8) 0))) goto LA20;
goto LA18;
LA20: ;
} LA18: ;
if (!((*Tokens_146432)->data[0].Kind == ((NU8) 2))) goto LA23;
(*Tokens_146432)->data[0].Ival = (*Tokens_146432)->data[0].Symbol->Sup.len;
(*Tokens_146432)->data[0].Kind = ((NU8) 1);
LA23: ;
}
N_NIMCALL(NI, Rsonslen_146091)(TY146077* N_146093) {
NI Result_146603;
Result_146603 = 0;
Result_146603 = (*N_146093).Sons->Sup.len;
return Result_146603;
}
N_NIMCALL(void, Addnodesaux_146861)(TY146077* N_146863, NimStringDesc** Result_146865) {
NI I_146897;
NI HEX3Atmp_146898;
NI LOC4;
NI Res_146900;
if (!((*N_146863).Kind == ((NU8) 62))) goto LA2;
(*Result_146865) = resizeString((*Result_146865), (*N_146863).Text->Sup.len + 0);
appendString((*Result_146865), (*N_146863).Text);
goto LA1;
LA2: ;
I_146897 = 0;
HEX3Atmp_146898 = 0;
LOC4 = Rsonslen_146091(N_146863);
HEX3Atmp_146898 = (NI64)(LOC4 - 1);
Res_146900 = 0;
Res_146900 = 0;
while (1) {
if (!(Res_146900 <= HEX3Atmp_146898)) goto LA5;
I_146897 = Res_146900;
Addnodesaux_146861((*N_146863).Sons->data[I_146897], Result_146865);
Res_146900 += 1;
} LA5: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Addnodes_146108)(TY146077* N_146110) {
NimStringDesc* Result_146904;
Result_146904 = 0;
Result_146904 = copyString(((NimStringDesc*) &TMP148399));
Addnodesaux_146861(N_146110, &Result_146904);
return Result_146904;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18247, NimStringDesc* B_18248) {
NIM_BOOL Result_18249;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
Result_18249 = 0;
if (!(A_18247 == B_18248)) goto LA2;
Result_18249 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18247 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18248 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18249 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18247).Sup.len == (*B_18248).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18247).data)), ((NCSTRING) ((*B_18248).data)), ((int) ((NI64)((*A_18247).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18249 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18249;
}
N_NIMCALL(NI, Findsub_146976)(TY146677* P_146979, TY146077* N_146980) {
NI Result_146981;
NimStringDesc* Key_146982;
NI I_146990;
NI HEX3Atmp_147001;
NI Res_147003;
NI I_146998;
NI HEX3Atmp_147004;
NI Res_147006;
NI LOC7;
Result_146981 = 0;
Key_146982 = 0;
Key_146982 = Addnodes_146108(N_146980);
I_146990 = 0;
HEX3Atmp_147001 = 0;
HEX3Atmp_147001 = ((*(*P_146979).S).Subs->Sup.len-1);
Res_147003 = 0;
Res_147003 = 0;
while (1) {
if (!(Res_147003 <= HEX3Atmp_147001)) goto LA1;
I_146990 = Res_147003;
if (!eqStrings(Key_146982, (*(*P_146979).S).Subs->data[I_146990].Key)) goto LA3;
Result_146981 = I_146990;
goto BeforeRet;
LA3: ;
Res_147003 += 1;
} LA1: ;
I_146998 = 0;
HEX3Atmp_147004 = 0;
HEX3Atmp_147004 = ((*(*P_146979).S).Subs->Sup.len-1);
Res_147006 = 0;
Res_147006 = 0;
while (1) {
if (!(Res_147006 <= HEX3Atmp_147004)) goto LA5;
I_146998 = Res_147006;
LOC7 = nsuCmpIgnoreStyle(Key_146982, (*(*P_146979).S).Subs->data[I_146998].Key);
if (!(LOC7 == 0)) goto LA8;
Result_146981 = I_146998;
goto BeforeRet;
LA8: ;
Res_147006 += 1;
} LA5: ;
Result_146981 = -1;
BeforeRet: ;
return Result_146981;
}
N_NIMCALL(TY146077*, Newrstnode_146094)(NU8 Kind_146096) {
TY146077* Result_146617;
Result_146617 = 0;
Result_146617 = (TY146077*) newObj(NTI146073, sizeof(TY146077));
asgnRefNoCycle((void**) &(*Result_146617).Sons, (TY146075*) newSeq(NTI146075, 0));
(*Result_146617).Kind = Kind_146096;
return Result_146617;
}
N_NIMCALL(TY146077*, Newrstnode_146097)(NU8 Kind_146099, NimStringDesc* S_146100) {
TY146077* Result_146653;
Result_146653 = 0;
Result_146653 = Newrstnode_146094(Kind_146099);
asgnRefNoCycle((void**) &(*Result_146653).Text, copyString(S_146100));
return Result_146653;
}
N_NIMCALL(TY46536, Tokinfo_146747)(TY146677* P_146749, TY146135* Tok_146750) {
TY46536 Result_146751;
memset((void*)&Result_146751, 0, sizeof(Result_146751));
Result_146751 = Newlineinfo_46578((*P_146749).Filename, (NI64)((*P_146749).Line + (*Tok_146750).Line), (NI64)((*P_146749).Col + (*Tok_146750).Col));
return Result_146751;
}
N_NIMCALL(void, Rstmessage_146752)(TY146677* P_146754, NU8 Msgkind_146755, NimStringDesc* Arg_146756) {
TY46536 LOC1;
LOC1 = Tokinfo_146747(P_146754, &(*P_146754).Tok->data[(*P_146754).Idx]);
Limessage_46566(LOC1, Msgkind_146755, Arg_146756);
}
N_NIMCALL(TY146077*, Findref_147087)(TY146677* P_147090, NimStringDesc* Key_147091) {
TY146077* Result_147092;
NI I_147100;
NI HEX3Atmp_147101;
NI Res_147103;
Result_147092 = 0;
I_147100 = 0;
HEX3Atmp_147101 = 0;
HEX3Atmp_147101 = ((*(*P_147090).S).Refs->Sup.len-1);
Res_147103 = 0;
Res_147103 = 0;
while (1) {
if (!(Res_147103 <= HEX3Atmp_147101)) goto LA1;
I_147100 = Res_147103;
if (!eqStrings(Key_147091, (*(*P_147090).S).Refs->data[I_147100].Key)) goto LA3;
Result_147092 = (*(*P_147090).S).Refs->data[I_147100].Value;
goto BeforeRet;
LA3: ;
Res_147103 += 1;
} LA1: ;
BeforeRet: ;
return Result_147092;
}
N_NIMCALL(void, Rstnodetorefnameaux_146906)(TY146077* N_146908, NimStringDesc** R_146910, NIM_BOOL* B_146912) {
NI I_146931;
NI HEX3Atmp_146963;
NI Res_146965;
NI I_146962;
NI HEX3Atmp_146966;
NI LOC20;
NI Res_146968;
if (!((*N_146908).Kind == ((NU8) 62))) goto LA2;
I_146931 = 0;
HEX3Atmp_146963 = 0;
HEX3Atmp_146963 = (NI64)((NI64)((*N_146908).Text->Sup.len + 0) - 1);
Res_146965 = 0;
Res_146965 = 0;
while (1) {
if (!(Res_146965 <= HEX3Atmp_146963)) goto LA4;
I_146931 = Res_146965;
switch (((NU8)((*N_146908).Text->data[I_146931]))) {
case 48 ... 57:
if (!(*B_146912)) goto LA6;
(*R_146910) = addChar((*R_146910), 45);
(*B_146912) = NIM_FALSE;
LA6: ;
if (!((*R_146910)->Sup.len == 0)) goto LA9;
(*R_146910) = addChar((*R_146910), 90);
LA9: ;
(*R_146910) = addChar((*R_146910), (*N_146908).Text->data[I_146931]);
break;
case 97 ... 122:
if (!(*B_146912)) goto LA12;
(*R_146910) = addChar((*R_146910), 45);
(*B_146912) = NIM_FALSE;
LA12: ;
(*R_146910) = addChar((*R_146910), (*N_146908).Text->data[I_146931]);
break;
case 65 ... 90:
if (!(*B_146912)) goto LA15;
(*R_146910) = addChar((*R_146910), 45);
(*B_146912) = NIM_FALSE;
LA15: ;
(*R_146910) = addChar((*R_146910), ((NIM_CHAR) (((NI) ((NI64)((NI64)(((NU8)((*N_146908).Text->data[I_146931])) - 65) + 97))))));
break;
default:
if (!(0 < (*R_146910)->Sup.len)) goto LA18;
(*B_146912) = NIM_TRUE;
LA18: ;
break;
}
Res_146965 += 1;
} LA4: ;
goto LA1;
LA2: ;
I_146962 = 0;
HEX3Atmp_146966 = 0;
LOC20 = Rsonslen_146091(N_146908);
HEX3Atmp_146966 = (NI64)(LOC20 - 1);
Res_146968 = 0;
Res_146968 = 0;
while (1) {
if (!(Res_146968 <= HEX3Atmp_146966)) goto LA21;
I_146962 = Res_146968;
Rstnodetorefnameaux_146906((*N_146908).Sons->data[I_146962], R_146910, B_146912);
Res_146968 += 1;
} LA21: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Rstnodetorefname_146105)(TY146077* N_146107) {
NimStringDesc* Result_146972;
NIM_BOOL B_146973;
Result_146972 = 0;
Result_146972 = copyString(((NimStringDesc*) &TMP148399));
B_146973 = 0;
B_146973 = NIM_FALSE;
Rstnodetorefnameaux_146906(N_146107, &Result_146972, &B_146973);
return Result_146972;
}
N_NIMCALL(void, Addson_146101)(TY146077* Father_146103, TY146077* Son_146104) {
(*Father_146103).Sons = (TY146075*) incrSeq(&((*Father_146103).Sons)->Sup, sizeof(TY146077*));
asgnRefNoCycle((void**) &(*Father_146103).Sons->data[(*Father_146103).Sons->Sup.len-1], Son_146104);
}
N_NIMCALL(TY146077*, Resolvesubs_150364)(TY146677* P_150367, TY146077* N_150368) {
TY146077* Result_150369;
NI X_150381;
NimStringDesc* Key_150384;
NimStringDesc* E_150385;
TY146077* Y_150386;
NimStringDesc* LOC10;
NI I_150405;
NI HEX3Atmp_150406;
NI LOC14;
NI Res_150408;
Result_150369 = 0;
Result_150369 = N_150368;
if (!(N_150368 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_150368).Kind) {
case ((NU8) 61):
X_150381 = 0;
X_150381 = Findsub_146976(P_150367, N_150368);
if (!(0 <= X_150381)) goto LA5;
Result_150369 = (*(*P_150367).S).Subs->data[X_150381].Value;
goto LA4;
LA5: ;
Key_150384 = 0;
Key_150384 = Addnodes_146108(N_150368);
E_150385 = 0;
E_150385 = Getenv_38417(Key_150384);
if (!!(((E_150385) && (E_150385)->Sup.len == 0))) goto LA8;
Result_150369 = Newrstnode_146097(((NU8) 62), E_150385);
goto LA7;
LA8: ;
Rstmessage_146752(&(*P_150367), ((NU8) 219), Key_150384);
LA7: ;
LA4: ;
break;
case ((NU8) 39):
Y_150386 = 0;
LOC10 = 0;
LOC10 = Rstnodetorefname_146105(N_150368);
Y_150386 = Findref_147087(P_150367, LOC10);
if (!!((Y_150386 == NIM_NIL))) goto LA12;
Result_150369 = Newrstnode_146094(((NU8) 38));
(*N_150368).Kind = ((NU8) 0);
Addson_146101(Result_150369, N_150368);
Addson_146101(Result_150369, Y_150386);
LA12: ;
break;
case ((NU8) 62):
break;
case ((NU8) 44):
(*P_150367).Hastoc = NIM_TRUE;
break;
default:
I_150405 = 0;
HEX3Atmp_150406 = 0;
LOC14 = Rsonslen_146091(N_150368);
HEX3Atmp_150406 = (NI64)(LOC14 - 1);
Res_150408 = 0;
Res_150408 = 0;
while (1) {
if (!(Res_150408 <= HEX3Atmp_150406)) goto LA15;
I_150405 = Res_150408;
asgnRefNoCycle((void**) &(*N_150368).Sons->data[I_150405], Resolvesubs_150364(P_150367, (*N_150368).Sons->data[I_150405]));
Res_150408 += 1;
} LA15: ;
break;
}
BeforeRet: ;
return Result_150369;
}
N_NIMCALL(NI, Currind_146761)(TY146677* P_146763) {
NI Result_146764;
Result_146764 = 0;
Result_146764 = (*P_146763).Indentstack->data[((*P_146763).Indentstack->Sup.len-1)];
return Result_146764;
}
N_NIMCALL(void, Pushind_146765)(TY146677* P_146768, NI Ind_146769) {
(*P_146768).Indentstack = (TY76281*) incrSeq(&((*P_146768).Indentstack)->Sup, sizeof(NI));
(*P_146768).Indentstack->data[(*P_146768).Indentstack->Sup.len-1] = Ind_146769;
}
N_NIMCALL(void, Popind_146788)(TY146677* P_146791) {
if (!(1 < (*P_146791).Indentstack->Sup.len)) goto LA2;
(*P_146791).Indentstack = (TY76281*) setLengthSeq(&((*P_146791).Indentstack)->Sup, sizeof(NI), (NI64)((*P_146791).Indentstack->Sup.len - 1));
LA2: ;
}
N_NIMCALL(NIM_BOOL, Match_147694)(TY146677* P_147696, NI Start_147697, NimStringDesc* Expr_147698) {
NIM_BOOL Result_147699;
NI I_147700;
NI J_147701;
NI Last_147704;
NIM_BOOL LOC2;
NIM_CHAR C_147787;
NI Length_147788;
NIM_BOOL LOC8;
NIM_BOOL LOC10;
NIM_BOOL LOC11;
Result_147699 = 0;
I_147700 = 0;
I_147700 = 0;
J_147701 = 0;
J_147701 = Start_147697;
Last_147704 = 0;
Last_147704 = (NI64)((NI64)(Expr_147698->Sup.len + 0) - 1);
while (1) {
if (!(I_147700 <= Last_147704)) goto LA1;
switch (((NU8)(Expr_147698->data[I_147700]))) {
case 119:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 3));
break;
case 32:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 2));
break;
case 105:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 1));
break;
case 112:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 5));
break;
case 97:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 4));
break;
case 111:
Result_147699 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 6));
break;
case 84:
Result_147699 = NIM_TRUE;
break;
case 69:
Result_147699 = ((7 &(1<<(((*P_147696).Tok->data[J_147701].Kind)&7)))!=0);
break;
case 101:
LOC2 = ((*P_147696).Tok->data[J_147701].Kind == ((NU8) 3));
if (LOC2) goto LA3;
LOC2 = eqStrings((*P_147696).Tok->data[J_147701].Symbol, ((NimStringDesc*) &TMP195097));
LA3: ;
Result_147699 = LOC2;
if (!Result_147699) goto LA5;
switch (((NU8)((*P_147696).Tok->data[J_147701].Symbol->data[0]))) {
case 97 ... 122:
case 65 ... 90:
Result_147699 = ((*P_147696).Tok->data[J_147701].Symbol->Sup.len == 1);
break;
case 48 ... 57:
Result_147699 = Allcharsinset_24864((*P_147696).Tok->data[J_147701].Symbol, TMP195098);
break;
default:
break;
}
LA5: ;
break;
default:
C_147787 = 0;
C_147787 = Expr_147698->data[I_147700];
Length_147788 = 0;
Length_147788 = 0;
while (1) {
LOC8 = (I_147700 <= Last_147704);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)(Expr_147698->data[I_147700]) == (NU8)(C_147787));
LA9: ;
if (!LOC8) goto LA7;
I_147700 += 1;
Length_147788 += 1;
} LA7: ;
I_147700 -= 1;
LOC11 = ((48 &(1<<(((*P_147696).Tok->data[J_147701].Kind)&7)))!=0);
if (!(LOC11)) goto LA12;
LOC11 = ((*P_147696).Tok->data[J_147701].Symbol->Sup.len == Length_147788);
LA12: ;
LOC10 = LOC11;
if (!(LOC10)) goto LA13;
LOC10 = ((NU8)((*P_147696).Tok->data[J_147701].Symbol->data[0]) == (NU8)(C_147787));
LA13: ;
Result_147699 = LOC10;
break;
}
if (!!(Result_147699)) goto LA15;
goto BeforeRet;
LA15: ;
J_147701 += 1;
I_147700 += 1;
} LA1: ;
Result_147699 = NIM_TRUE;
BeforeRet: ;
return Result_147699;
}
N_NIMCALL(NI, Tokenafternewline_148685)(TY146677* P_148687) {
NI Result_148688;
Result_148688 = 0;
Result_148688 = (*P_148687).Idx;
while (1) {
switch ((*P_148687).Tok->data[Result_148688].Kind) {
case ((NU8) 0):
goto LA1;
break;
case ((NU8) 1):
Result_148688 += 1;
goto LA1;
break;
default:
Result_148688 += 1;
break;
}
} LA1: ;
return Result_148688;
}
N_NIMCALL(NIM_BOOL, Prednl_148722)(TY146677* P_148724) {
NIM_BOOL Result_148725;
NIM_BOOL LOC4;
NI LOC6;
Result_148725 = 0;
Result_148725 = NIM_TRUE;
if (!(0 < (*P_148724).Idx)) goto LA2;
LOC4 = ((*P_148724).Tok->data[(NI64)((*P_148724).Idx - 1)].Kind == ((NU8) 1));
if (!(LOC4)) goto LA5;
LOC6 = Currind_146761(P_148724);
LOC4 = ((*P_148724).Tok->data[(NI64)((*P_148724).Idx - 1)].Ival == LOC6);
LA5: ;
Result_148725 = LOC4;
LA2: ;
return Result_148725;
}
N_NIMCALL(NIM_BOOL, Islineblock_148713)(TY146677* P_148715) {
NIM_BOOL Result_148716;
NI J_148717;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_148716 = 0;
J_148717 = 0;
J_148717 = Tokenafternewline_148685(P_148715);
LOC2 = ((*P_148715).Tok->data[(*P_148715).Idx].Col == (*P_148715).Tok->data[J_148717].Col);
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_148715).Tok->data[J_148717].Symbol, ((NimStringDesc*) &TMP195107));
LA3: ;
LOC1 = LOC2;
if (LOC1) goto LA4;
LOC1 = ((*P_148715).Tok->data[(*P_148715).Idx].Col < (*P_148715).Tok->data[J_148717].Col);
LA4: ;
Result_148716 = LOC1;
return Result_148716;
}
N_NIMCALL(void, Rstmessage_146757)(TY146677* P_146759, NU8 Msgkind_146760) {
TY46536 LOC1;
LOC1 = Tokinfo_146747(P_146759, &(*P_146759).Tok->data[(*P_146759).Idx]);
Limessage_46566(LOC1, Msgkind_146760, (*P_146759).Tok->data[(*P_146759).Idx].Symbol);
}
N_NIMCALL(NIM_BOOL, Isdeflist_148739)(TY146677* P_148741) {
NIM_BOOL Result_148742;
NI J_148743;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_148742 = 0;
J_148743 = 0;
J_148743 = Tokenafternewline_148685(P_148741);
LOC2 = ((*P_148741).Tok->data[(*P_148741).Idx].Col < (*P_148741).Tok->data[J_148743].Col);
if (!(LOC2)) goto LA3;
LOC2 = ((104 &(1<<(((*P_148741).Tok->data[J_148743].Kind)&7)))!=0);
LA3: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA4;
LOC1 = !(eqStrings((*P_148741).Tok->data[(NI64)(J_148743 - 2)].Symbol, ((NimStringDesc*) &TMP195103)));
LA4: ;
Result_148742 = LOC1;
return Result_148742;
}
N_NIMCALL(NIM_BOOL, Isoptionlist_148758)(TY146677* P_148760) {
NIM_BOOL Result_148761;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_148761 = 0;
LOC3 = Match_147694(P_148760, (*P_148760).Idx, ((NimStringDesc*) &TMP195112));
if (LOC3) goto LA4;
LOC3 = Match_147694(P_148760, (*P_148760).Idx, ((NimStringDesc*) &TMP195113));
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA5;
LOC2 = Match_147694(P_148760, (*P_148760).Idx, ((NimStringDesc*) &TMP195114));
LA5: ;
LOC1 = LOC2;
if (LOC1) goto LA6;
LOC1 = Match_147694(P_148760, (*P_148760).Idx, ((NimStringDesc*) &TMP195115));
LA6: ;
Result_148761 = LOC1;
return Result_148761;
}
N_NIMCALL(NU8, Whichsection_148762)(TY146677* P_148764) {
NU8 Result_148765;
NIM_BOOL LOC2;
NIM_BOOL LOC5;
NIM_BOOL LOC8;
NI LOC12;
NIM_BOOL LOC13;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NIM_BOOL LOC21;
NIM_BOOL LOC22;
NIM_BOOL LOC28;
NIM_BOOL LOC32;
NIM_BOOL LOC36;
NIM_BOOL LOC40;
NIM_BOOL LOC43;
NIM_BOOL LOC46;
NIM_BOOL LOC49;
NI LOC53;
NIM_BOOL LOC54;
NIM_BOOL LOC57;
NIM_BOOL LOC60;
Result_148765 = 0;
switch ((*P_148764).Tok->data[(*P_148764).Idx].Kind) {
case ((NU8) 4):
LOC2 = Match_147694(P_148764, (NI64)((*P_148764).Idx + 1), ((NimStringDesc*) &TMP195099));
if (!LOC2) goto LA3;
Result_148765 = ((NU8) 3);
goto LA1;
LA3: ;
LOC5 = Match_147694(P_148764, (NI64)((*P_148764).Idx + 1), ((NimStringDesc*) &TMP195100));
if (!LOC5) goto LA6;
Result_148765 = ((NU8) 29);
goto LA1;
LA6: ;
LOC8 = Match_147694(P_148764, (NI64)((*P_148764).Idx + 1), ((NimStringDesc*) &TMP195101));
if (!LOC8) goto LA9;
Result_148765 = ((NU8) 2);
goto LA1;
LA9: ;
Result_148765 = ((NU8) 62);
LA1: ;
break;
case ((NU8) 5):
LOC12 = Tokenafternewline_148685(P_148764);
LOC13 = Match_147694(P_148764, LOC12, ((NimStringDesc*) &TMP195102));
if (!LOC13) goto LA14;
Result_148765 = ((NU8) 1);
goto LA11;
LA14: ;
if (!eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195103))) goto LA16;
Result_148765 = ((NU8) 24);
goto LA11;
LA16: ;
LOC19 = Prednl_148722(P_148764);
if (!(LOC19)) goto LA20;
LOC22 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195104));
if (LOC22) goto LA23;
LOC22 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195105));
LA23: ;
LOC21 = LOC22;
if (LOC21) goto LA24;
LOC21 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195106));
LA24: ;
LOC19 = LOC21;
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA25;
LOC18 = ((*P_148764).Tok->data[(NI64)((*P_148764).Idx + 1)].Kind == ((NU8) 2));
LA25: ;
if (!LOC18) goto LA26;
Result_148765 = ((NU8) 5);
goto LA11;
LA26: ;
LOC28 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195107));
if (!(LOC28)) goto LA29;
LOC28 = Islineblock_148713(P_148764);
LA29: ;
if (!LOC28) goto LA30;
Result_148765 = ((NU8) 26);
goto LA11;
LA30: ;
LOC32 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195108));
if (!(LOC32)) goto LA33;
LOC32 = Prednl_148722(P_148764);
LA33: ;
if (!LOC32) goto LA34;
Result_148765 = ((NU8) 40);
goto LA11;
LA34: ;
LOC36 = eqStrings((*P_148764).Tok->data[(*P_148764).Idx].Symbol, ((NimStringDesc*) &TMP195109));
if (!(LOC36)) goto LA37;
LOC36 = Prednl_148722(P_148764);
LA37: ;
if (!LOC36) goto LA38;
Result_148765 = ((NU8) 13);
goto LA11;
LA38: ;
LOC40 = Match_147694(P_148764, (*P_148764).Idx, ((NimStringDesc*) &TMP195110));
if (!LOC40) goto LA41;
Result_148765 = ((NU8) 7);
goto LA11;
LA41: ;
LOC43 = Match_147694(P_148764, (*P_148764).Idx, ((NimStringDesc*) &TMP195111));
if (!LOC43) goto LA44;
Result_148765 = ((NU8) 30);
Rstmessage_146757(P_148764, ((NU8) 186));
goto LA11;
LA44: ;
LOC46 = Isdeflist_148739(P_148764);
if (!LOC46) goto LA47;
Result_148765 = ((NU8) 9);
goto LA11;
LA47: ;
LOC49 = Isoptionlist_148758(P_148764);
if (!LOC49) goto LA50;
Result_148765 = ((NU8) 17);
goto LA11;
LA50: ;
Result_148765 = ((NU8) 4);
LA11: ;
break;
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC53 = Tokenafternewline_148685(P_148764);
LOC54 = Match_147694(P_148764, LOC53, ((NimStringDesc*) &TMP195102));
if (!LOC54) goto LA55;
Result_148765 = ((NU8) 1);
goto LA52;
LA55: ;
LOC57 = Isdeflist_148739(P_148764);
if (!LOC57) goto LA58;
Result_148765 = ((NU8) 9);
goto LA52;
LA58: ;
LOC60 = Match_147694(P_148764, (*P_148764).Idx, ((NimStringDesc*) &TMP195116));
if (LOC60) goto LA61;
LOC60 = Match_147694(P_148764, (*P_148764).Idx, ((NimStringDesc*) &TMP195117));
LA61: ;
if (!LOC60) goto LA62;
Result_148765 = ((NU8) 7);
goto LA52;
LA62: ;
Result_148765 = ((NU8) 4);
LA52: ;
break;
default:
Result_148765 = ((NU8) 62);
break;
}
return Result_148765;
}
N_NIMCALL(TY146077*, Parseliteralblock_148585)(TY146677* P_148588) {
TY146077* Result_148589;
TY146077* N_148590;
NI Indent_148600;
NimStringDesc* LOC8;
Result_148589 = 0;
Result_148589 = Newrstnode_146094(((NU8) 24));
N_148590 = 0;
N_148590 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP148399));
if (!((*P_148588).Tok->data[(*P_148588).Idx].Kind == ((NU8) 1))) goto LA2;
Indent_148600 = 0;
Indent_148600 = (*P_148588).Tok->data[(*P_148588).Idx].Ival;
(*P_148588).Idx += 1;
while (1) {
switch ((*P_148588).Tok->data[(*P_148588).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_148588).Tok->data[(*P_148588).Idx].Ival < Indent_148600)) goto LA6;
goto LA4;
goto LA5;
LA6: ;
(*N_148590).Text = resizeString((*N_148590).Text, 1);
appendString((*N_148590).Text, ((NimStringDesc*) &TMP195096));
LOC8 = 0;
LOC8 = nsuRepeatChar((NI64)((*P_148588).Tok->data[(*P_148588).Idx].Ival - Indent_148600), 32);
(*N_148590).Text = resizeString((*N_148590).Text, LOC8->Sup.len + 0);
appendString((*N_148590).Text, LOC8);
(*P_148588).Idx += 1;
LA5: ;
break;
default:
(*N_148590).Text = resizeString((*N_148590).Text, (*P_148588).Tok->data[(*P_148588).Idx].Symbol->Sup.len + 0);
appendString((*N_148590).Text, (*P_148588).Tok->data[(*P_148588).Idx].Symbol);
(*P_148588).Idx += 1;
break;
}
} LA4: ;
goto LA1;
LA2: ;
while (1) {
if (!!(((3 &(1<<(((*P_148588).Tok->data[(*P_148588).Idx].Kind)&7)))!=0))) goto LA9;
(*N_148590).Text = resizeString((*N_148590).Text, (*P_148588).Tok->data[(*P_148588).Idx].Symbol->Sup.len + 0);
appendString((*N_148590).Text, (*P_148588).Tok->data[(*P_148588).Idx].Symbol);
(*P_148588).Idx += 1;
} LA9: ;
LA1: ;
Addson_146101(Result_148589, N_148590);
return Result_148589;
}
N_NIMCALL(TY146077*, Parsebulletlist_149452)(TY146677* P_149455) {
TY146077* Result_149456;
NimStringDesc* Bullet_149466;
NI Col_149467;
TY146077* Item_149480;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_149456 = 0;
Result_149456 = NIM_NIL;
if (!((*P_149455).Tok->data[(NI64)((*P_149455).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Bullet_149466 = 0;
Bullet_149466 = copyString((*P_149455).Tok->data[(*P_149455).Idx].Symbol);
Col_149467 = 0;
Col_149467 = (*P_149455).Tok->data[(*P_149455).Idx].Col;
Result_149456 = Newrstnode_146094(((NU8) 5));
Pushind_146765(P_149455, (*P_149455).Tok->data[(NI64)((*P_149455).Idx + 2)].Col);
(*P_149455).Idx += 2;
while (1) {
Item_149480 = 0;
Item_149480 = Newrstnode_146094(((NU8) 6));
Parsesection_148423(P_149455, Item_149480);
Addson_146101(Result_149456, Item_149480);
LOC8 = ((*P_149455).Tok->data[(*P_149455).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_149455).Tok->data[(*P_149455).Idx].Ival == Col_149467);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_149455).Tok->data[(NI64)((*P_149455).Idx + 1)].Symbol, Bullet_149466);
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_149455).Tok->data[(NI64)((*P_149455).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_149455).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_146788(P_149455);
LA2: ;
return Result_149456;
}
N_NIMCALL(TY146077*, Parselineblock_148775)(TY146677* P_148778) {
TY146077* Result_148779;
NI Col_148789;
TY146077* Item_148802;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_148779 = 0;
Result_148779 = NIM_NIL;
if (!((*P_148778).Tok->data[(NI64)((*P_148778).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Col_148789 = 0;
Col_148789 = (*P_148778).Tok->data[(*P_148778).Idx].Col;
Result_148779 = Newrstnode_146094(((NU8) 26));
Pushind_146765(P_148778, (*P_148778).Tok->data[(NI64)((*P_148778).Idx + 2)].Col);
(*P_148778).Idx += 2;
while (1) {
Item_148802 = 0;
Item_148802 = Newrstnode_146094(((NU8) 27));
Parsesection_148423(P_148778, Item_148802);
Addson_146101(Result_148779, Item_148802);
LOC8 = ((*P_148778).Tok->data[(*P_148778).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_148778).Tok->data[(*P_148778).Idx].Ival == Col_148789);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_148778).Tok->data[(NI64)((*P_148778).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195107));
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_148778).Tok->data[(NI64)((*P_148778).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_148778).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_146788(P_148778);
LA2: ;
return Result_148779;
}
N_NIMCALL(NimStringDesc*, Getdirective_148189)(TY146677* P_148192) {
NimStringDesc* Result_148193;
NIM_BOOL LOC2;
NI J_148212;
Result_148193 = 0;
LOC2 = ((*P_148192).Tok->data[(*P_148192).Idx].Kind == ((NU8) 2));
if (!(LOC2)) goto LA3;
LOC2 = ((*P_148192).Tok->data[(NI64)((*P_148192).Idx + 1)].Kind == ((NU8) 3));
LA3: ;
if (!LOC2) goto LA4;
J_148212 = 0;
J_148212 = (*P_148192).Idx;
(*P_148192).Idx += 1;
Result_148193 = copyString((*P_148192).Tok->data[(*P_148192).Idx].Symbol);
(*P_148192).Idx += 1;
while (1) {
if (!((120 &(1<<(((*P_148192).Tok->data[(*P_148192).Idx].Kind)&7)))!=0)) goto LA6;
if (!eqStrings((*P_148192).Tok->data[(*P_148192).Idx].Symbol, ((NimStringDesc*) &TMP195103))) goto LA8;
goto LA6;
LA8: ;
Result_148193 = resizeString(Result_148193, (*P_148192).Tok->data[(*P_148192).Idx].Symbol->Sup.len + 0);
appendString(Result_148193, (*P_148192).Tok->data[(*P_148192).Idx].Symbol);
(*P_148192).Idx += 1;
} LA6: ;
if (!((*P_148192).Tok->data[(*P_148192).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_148192).Idx += 1;
LA11: ;
if (!eqStrings((*P_148192).Tok->data[(*P_148192).Idx].Symbol, ((NimStringDesc*) &TMP195103))) goto LA14;
(*P_148192).Idx += 1;
if (!((*P_148192).Tok->data[(*P_148192).Idx].Kind == ((NU8) 2))) goto LA17;
(*P_148192).Idx += 1;
LA17: ;
goto LA13;
LA14: ;
(*P_148192).Idx = J_148212;
Result_148193 = copyString(((NimStringDesc*) &TMP148399));
LA13: ;
goto LA1;
LA4: ;
Result_148193 = copyString(((NimStringDesc*) &TMP148399));
LA1: ;
return Result_148193;
}
N_NIMCALL(NU8, Getdirkind_148411)(NimStringDesc* S_148413) {
NU8 Result_148414;
NI I_148415;
Result_148414 = 0;
I_148415 = 0;
I_148415 = Binarystrsearch_45148(Dirids_148394, 12, S_148413);
if (!(0 <= I_148415)) goto LA2;
Result_148414 = ((NU8) (I_148415));
goto LA1;
LA2: ;
Result_148414 = ((NU8) 0);
LA1: ;
return Result_148414;
}
N_NIMCALL(TY146077*, Newleaf_147447)(TY146677* P_147450) {
TY146077* Result_147451;
Result_147451 = 0;
Result_147451 = Newrstnode_146097(((NU8) 62), (*P_147450).Tok->data[(*P_147450).Idx].Symbol);
return Result_147451;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_147572)(TY146677* P_147574, NimStringDesc* Markup_147575) {
NIM_BOOL Result_147576;
NIM_CHAR D_147577;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NIM_CHAR C_147618;
Result_147576 = 0;
D_147577 = 0;
Result_147576 = eqStrings((*P_147574).Tok->data[(*P_147574).Idx].Symbol, Markup_147575);
if (!!(Result_147576)) goto LA2;
goto BeforeRet;
LA2: ;
LOC5 = ((*P_147574).Idx == 0);
if (LOC5) goto LA6;
LOC5 = ((6 &(1<<(((*P_147574).Tok->data[(NI64)((*P_147574).Idx - 1)].Kind)&7)))!=0);
LA6: ;
LOC4 = LOC5;
if (LOC4) goto LA7;
LOC4 = ((TMP195118[((NU8)((*P_147574).Tok->data[(NI64)((*P_147574).Idx - 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_147574).Tok->data[(NI64)((*P_147574).Idx - 1)].Symbol->data[0]))%8)))!=0);
LA7: ;
Result_147576 = LOC4;
if (!!(Result_147576)) goto LA9;
goto BeforeRet;
LA9: ;
Result_147576 = !(((7 &(1<<(((*P_147574).Tok->data[(NI64)((*P_147574).Idx + 1)].Kind)&7)))!=0));
if (!!(Result_147576)) goto LA12;
goto BeforeRet;
LA12: ;
if (!(0 < (*P_147574).Idx)) goto LA15;
if (!eqStrings((*P_147574).Tok->data[(NI64)((*P_147574).Idx - 1)].Symbol, ((NimStringDesc*) &TMP195119))) goto LA18;
Result_147576 = NIM_FALSE;
goto LA17;
LA18: ;
C_147618 = 0;
C_147618 = (*P_147574).Tok->data[(NI64)((*P_147574).Idx - 1)].Symbol->data[0];
switch (((NU8)(C_147618))) {
case 39:
case 34:
D_147577 = C_147618;
break;
case 40:
D_147577 = 41;
break;
case 91:
D_147577 = 93;
break;
case 123:
D_147577 = 125;
break;
case 60:
D_147577 = 62;
break;
default:
D_147577 = 0;
break;
}
if (!!(((NU8)(D_147577) == (NU8)(0)))) goto LA21;
Result_147576 = !(((NU8)((*P_147574).Tok->data[(NI64)((*P_147574).Idx + 1)].Symbol->data[0]) == (NU8)(D_147577)));
LA21: ;
LA17: ;
LA15: ;
BeforeRet: ;
return Result_147576;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_147529)(TY146677* P_147531, NimStringDesc* Markup_147532) {
NIM_BOOL Result_147533;
NIM_BOOL LOC7;
NIM_BOOL LOC16;
Result_147533 = 0;
Result_147533 = eqStrings((*P_147531).Tok->data[(*P_147531).Idx].Symbol, Markup_147532);
if (!!(Result_147533)) goto LA2;
goto BeforeRet;
LA2: ;
Result_147533 = !(((6 &(1<<(((*P_147531).Tok->data[(NI64)((*P_147531).Idx - 1)].Kind)&7)))!=0));
if (!!(Result_147533)) goto LA5;
goto BeforeRet;
LA5: ;
LOC7 = ((7 &(1<<(((*P_147531).Tok->data[(NI64)((*P_147531).Idx + 1)].Kind)&7)))!=0);
if (LOC7) goto LA8;
LOC7 = ((TMP195121[((NU8)((*P_147531).Tok->data[(NI64)((*P_147531).Idx + 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_147531).Tok->data[(NI64)((*P_147531).Idx + 1)].Symbol->data[0]))%8)))!=0);
LA8: ;
Result_147533 = LOC7;
if (!!(Result_147533)) goto LA10;
goto BeforeRet;
LA10: ;
if (!(0 < (*P_147531).Idx)) goto LA13;
LOC16 = !(eqStrings(Markup_147532, ((NimStringDesc*) &TMP195122)));
if (!(LOC16)) goto LA17;
LOC16 = eqStrings((*P_147531).Tok->data[(NI64)((*P_147531).Idx - 1)].Symbol, ((NimStringDesc*) &TMP195119));
LA17: ;
if (!LOC16) goto LA18;
Result_147533 = NIM_FALSE;
LA18: ;
LA13: ;
BeforeRet: ;
return Result_147533;
}
N_NIMCALL(void, Parsebackslash_147623)(TY146677* P_147626, TY146077* Father_147627) {
TY146077* LOC4;
TY146077* LOC10;
TY146077* LOC11;
if (!eqStrings((*P_147626).Tok->data[(*P_147626).Idx].Symbol, ((NimStringDesc*) &TMP195123))) goto LA2;
LOC4 = 0;
LOC4 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195119));
Addson_146101(Father_147627, LOC4);
(*P_147626).Idx += 1;
goto LA1;
LA2: ;
if (!eqStrings((*P_147626).Tok->data[(*P_147626).Idx].Symbol, ((NimStringDesc*) &TMP195119))) goto LA5;
(*P_147626).Idx += 1;
if (!!(((*P_147626).Tok->data[(*P_147626).Idx].Kind == ((NU8) 2)))) goto LA8;
LOC10 = 0;
LOC10 = Newleaf_147447(P_147626);
Addson_146101(Father_147627, LOC10);
LA8: ;
(*P_147626).Idx += 1;
goto LA1;
LA5: ;
LOC11 = 0;
LOC11 = Newleaf_147447(P_147626);
Addson_146101(Father_147627, LOC11);
(*P_147626).Idx += 1;
LA1: ;
}
N_NIMCALL(void, Parseuntil_148031)(TY146677* P_148034, TY146077* Father_148035, NimStringDesc* Postfix_148036, NIM_BOOL Interpretbackslash_148037) {
NIM_BOOL LOC3;
TY146077* LOC8;
TY146077* LOC9;
TY146077* LOC10;
TY146077* LOC14;
while (1) {
switch ((*P_148034).Tok->data[(*P_148034).Idx].Kind) {
case ((NU8) 5):
LOC3 = Isinlinemarkupend_147529(&(*P_148034), Postfix_148036);
if (!LOC3) goto LA4;
(*P_148034).Idx += 1;
goto LA1;
goto LA2;
LA4: ;
if (!Interpretbackslash_148037) goto LA6;
Parsebackslash_147623(P_148034, Father_148035);
goto LA2;
LA6: ;
LOC8 = 0;
LOC8 = Newleaf_147447(P_148034);
Addson_146101(Father_148035, LOC8);
(*P_148034).Idx += 1;
LA2: ;
break;
case ((NU8) 4):
case ((NU8) 3):
case ((NU8) 6):
LOC9 = 0;
LOC9 = Newleaf_147447(P_148034);
Addson_146101(Father_148035, LOC9);
(*P_148034).Idx += 1;
break;
case ((NU8) 1):
LOC10 = 0;
LOC10 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195124));
Addson_146101(Father_148035, LOC10);
(*P_148034).Idx += 1;
if (!((*P_148034).Tok->data[(*P_148034).Idx].Kind == ((NU8) 1))) goto LA12;
Rstmessage_146752(&(*P_148034), ((NU8) 184), Postfix_148036);
goto LA1;
LA12: ;
break;
case ((NU8) 2):
LOC14 = 0;
LOC14 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195124));
Addson_146101(Father_148035, LOC14);
(*P_148034).Idx += 1;
break;
default:
Rstmessage_146752(&(*P_148034), ((NU8) 184), Postfix_148036);
break;
}
} LA1: ;
}
N_NIMCALL(void, Fixupembeddedref_147871)(TY146077* N_147873, TY146077* A_147874, TY146077* B_147875) {
NI Sep_147876;
NI I_147899;
NI HEX3Atmp_147921;
NI LOC1;
NI Res_147923;
NI Incr_147904;
NI LOC6;
NIM_BOOL LOC8;
NI I_147912;
NI HEX3Atmp_147924;
NI Res_147926;
NI I_147920;
NI HEX3Atmp_147927;
NI HEX3Atmp_147928;
NI LOC12;
NI Res_147930;
Sep_147876 = 0;
Sep_147876 = -1;
I_147899 = 0;
HEX3Atmp_147921 = 0;
LOC1 = Rsonslen_146091(N_147873);
HEX3Atmp_147921 = (NI64)(LOC1 - 2);
Res_147923 = 0;
Res_147923 = HEX3Atmp_147921;
while (1) {
if (!(0 <= Res_147923)) goto LA2;
I_147899 = Res_147923;
if (!eqStrings((*(*N_147873).Sons->data[I_147899]).Text, ((NimStringDesc*) &TMP195128))) goto LA4;
Sep_147876 = I_147899;
goto LA2;
LA4: ;
Res_147923 -= 1;
} LA2: ;
Incr_147904 = 0;
LOC8 = (0 < Sep_147876);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)((*(*N_147873).Sons->data[(NI64)(Sep_147876 - 1)]).Text->data[0]) == (NU8)(32));
LA9: ;
if (!LOC8) goto LA10;
LOC6 = 2;
goto LA7;
LA10: ;
LOC6 = 1;
LA7: ;
Incr_147904 = LOC6;
I_147912 = 0;
HEX3Atmp_147924 = 0;
HEX3Atmp_147924 = (NI64)(Sep_147876 - Incr_147904);
Res_147926 = 0;
Res_147926 = 0;
while (1) {
if (!(Res_147926 <= HEX3Atmp_147924)) goto LA11;
I_147912 = Res_147926;
Addson_146101(A_147874, (*N_147873).Sons->data[I_147912]);
Res_147926 += 1;
} LA11: ;
I_147920 = 0;
HEX3Atmp_147927 = 0;
HEX3Atmp_147928 = 0;
HEX3Atmp_147927 = (NI64)(Sep_147876 + 1);
LOC12 = Rsonslen_146091(N_147873);
HEX3Atmp_147928 = (NI64)(LOC12 - 2);
Res_147930 = 0;
Res_147930 = HEX3Atmp_147927;
while (1) {
if (!(Res_147930 <= HEX3Atmp_147928)) goto LA13;
I_147920 = Res_147930;
Addson_146101(B_147875, (*N_147873).Sons->data[I_147920]);
Res_147930 += 1;
} LA13: ;
}
N_NIMCALL(void, Setref_147047)(TY146677* P_147050, NimStringDesc* Key_147051, TY146077* Value_147052) {
NI Length_147063;
NI I_147071;
NI HEX3Atmp_147084;
NI Res_147086;
Length_147063 = 0;
Length_147063 = (*(*P_147050).S).Refs->Sup.len;
I_147071 = 0;
HEX3Atmp_147084 = 0;
HEX3Atmp_147084 = (NI64)(Length_147063 - 1);
Res_147086 = 0;
Res_147086 = 0;
while (1) {
if (!(Res_147086 <= HEX3Atmp_147084)) goto LA1;
I_147071 = Res_147086;
if (!eqStrings(Key_147051, (*(*P_147050).S).Refs->data[I_147071].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_147050).S).Refs->data[I_147071].Value, Value_147052);
Rstmessage_146752(&(*P_147050), ((NU8) 218), Key_147051);
goto BeforeRet;
LA3: ;
Res_147086 += 1;
} LA1: ;
(*(*P_147050).S).Refs = (TY146682*) setLengthSeq(&((*(*P_147050).S).Refs)->Sup, sizeof(TY146671), (NI64)(Length_147063 + 1));
asgnRefNoCycle((void**) &(*(*P_147050).S).Refs->data[Length_147063].Key, copyString(Key_147051));
asgnRefNoCycle((void**) &(*(*P_147050).S).Refs->data[Length_147063].Value, Value_147052);
BeforeRet: ;
}
N_NIMCALL(TY146077*, Parsepostfix_147931)(TY146677* P_147934, TY146077* N_147935) {
TY146077* Result_147936;
NIM_BOOL LOC2;
NIM_BOOL LOC6;
TY146077* A_147949;
TY146077* B_147950;
NI LOC11;
NimStringDesc* LOC14;
NIM_BOOL LOC17;
NIM_BOOL LOC29;
NIM_BOOL LOC33;
TY146077* LOC37;
Result_147936 = 0;
Result_147936 = N_147935;
LOC2 = Isinlinemarkupend_147529(&(*P_147934), ((NimStringDesc*) &TMP195126));
if (!LOC2) goto LA3;
(*P_147934).Idx += 1;
LOC6 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx - 2)].Symbol, ((NimStringDesc*) &TMP195125));
if (!(LOC6)) goto LA7;
LOC6 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx - 3)].Symbol, ((NimStringDesc*) &TMP195127));
LA7: ;
if (!LOC6) goto LA8;
A_147949 = 0;
A_147949 = Newrstnode_146094(((NU8) 0));
B_147950 = 0;
B_147950 = Newrstnode_146094(((NU8) 0));
Fixupembeddedref_147871(N_147935, A_147949, B_147950);
LOC11 = Rsonslen_146091(A_147949);
if (!(LOC11 == 0)) goto LA12;
Result_147936 = Newrstnode_146094(((NU8) 37));
Addson_146101(Result_147936, B_147950);
goto LA10;
LA12: ;
Result_147936 = Newrstnode_146094(((NU8) 38));
Addson_146101(Result_147936, A_147949);
Addson_146101(Result_147936, B_147950);
LOC14 = 0;
LOC14 = Rstnodetorefname_146105(A_147949);
Setref_147047(P_147934, LOC14, B_147950);
LA10: ;
goto LA5;
LA8: ;
if (!((*N_147935).Kind == ((NU8) 59))) goto LA15;
(*N_147935).Kind = ((NU8) 39);
goto LA5;
LA15: ;
Result_147936 = Newrstnode_146094(((NU8) 39));
Addson_146101(Result_147936, N_147935);
LA5: ;
goto LA1;
LA3: ;
LOC17 = Match_147694(&(*P_147934), (*P_147934).Idx, ((NimStringDesc*) &TMP195129));
if (!LOC17) goto LA18;
if (!eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195130))) goto LA21;
(*N_147935).Kind = ((NU8) 56);
goto LA20;
LA21: ;
if (!eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195131))) goto LA23;
(*N_147935).Kind = ((NU8) 60);
goto LA20;
LA23: ;
if (!eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195132))) goto LA25;
(*N_147935).Kind = ((NU8) 58);
goto LA20;
LA25: ;
if (!eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195133))) goto LA27;
(*N_147935).Kind = ((NU8) 57);
goto LA20;
LA27: ;
LOC29 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195134));
if (LOC29) goto LA30;
LOC29 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195135));
LA30: ;
if (!LOC29) goto LA31;
(*N_147935).Kind = ((NU8) 54);
goto LA20;
LA31: ;
LOC33 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195136));
if (LOC33) goto LA34;
LOC33 = eqStrings((*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195137));
LA34: ;
if (!LOC33) goto LA35;
(*N_147935).Kind = ((NU8) 55);
goto LA20;
LA35: ;
Result_147936 = Newrstnode_146094(((NU8) 53));
(*N_147935).Kind = ((NU8) 0);
Addson_146101(Result_147936, N_147935);
LOC37 = 0;
LOC37 = Newrstnode_146097(((NU8) 62), (*P_147934).Tok->data[(NI64)((*P_147934).Idx + 1)].Symbol);
Addson_146101(Result_147936, LOC37);
LA20: ;
(*P_147934).Idx += 3;
goto LA1;
LA18: ;
LA1: ;
return Result_147936;
}
N_NIMCALL(NIM_BOOL, Isurl_147974)(TY146677* P_147976, NI I_147977) {
NIM_BOOL Result_147978;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_147978 = 0;
LOC3 = eqStrings((*P_147976).Tok->data[(NI64)(I_147977 + 1)].Symbol, ((NimStringDesc*) &TMP195109));
if (!(LOC3)) goto LA4;
LOC3 = eqStrings((*P_147976).Tok->data[(NI64)(I_147977 + 2)].Symbol, ((NimStringDesc*) &TMP195138));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((*P_147976).Tok->data[(NI64)(I_147977 + 3)].Kind == ((NU8) 3));
LA5: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA6;
LOC1 = eqStrings((*P_147976).Tok->data[(NI64)(I_147977 + 4)].Symbol, ((NimStringDesc*) &TMP195139));
LA6: ;
Result_147978 = LOC1;
return Result_147978;
}
N_NIMCALL(void, Parseurl_147988)(TY146677* P_147991, TY146077* Father_147992) {
NIM_BOOL LOC2;
TY146077* N_147993;
TY146077* LOC9;
TY146077* N_148018;
LOC2 = Isurl_147974(&(*P_147991), (*P_147991).Idx);
if (!LOC2) goto LA3;
N_147993 = 0;
N_147993 = Newrstnode_146094(((NU8) 37));
while (1) {
switch ((*P_147991).Tok->data[(*P_147991).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
break;
case ((NU8) 5):
if (!!(((120 &(1<<(((*P_147991).Tok->data[(NI64)((*P_147991).Idx + 1)].Kind)&7)))!=0))) goto LA7;
goto LA5;
LA7: ;
break;
default:
goto LA5;
break;
}
LOC9 = 0;
LOC9 = Newleaf_147447(P_147991);
Addson_146101(N_147993, LOC9);
(*P_147991).Idx += 1;
} LA5: ;
Addson_146101(Father_147992, N_147993);
goto LA1;
LA3: ;
N_148018 = 0;
N_148018 = Newleaf_147447(P_147991);
(*P_147991).Idx += 1;
if (!eqStrings((*P_147991).Tok->data[(*P_147991).Idx].Symbol, ((NimStringDesc*) &TMP195126))) goto LA11;
N_148018 = Parsepostfix_147931(P_147991, N_148018);
LA11: ;
Addson_146101(Father_147992, N_148018);
LA1: ;
}
N_NIMCALL(void, Parseinline_148107)(TY146677* P_148110, TY146077* Father_148111) {
NIM_BOOL LOC2;
TY146077* N_148124;
NIM_BOOL LOC5;
TY146077* N_148137;
NIM_BOOL LOC8;
TY146077* N_148150;
NIM_BOOL LOC11;
TY146077* N_148163;
NIM_BOOL LOC14;
TY146077* N_148176;
TY146077* LOC17;
switch ((*P_148110).Tok->data[(*P_148110).Idx].Kind) {
case ((NU8) 5):
LOC2 = Isinlinemarkupstart_147572(&(*P_148110), ((NimStringDesc*) &TMP195120));
if (!LOC2) goto LA3;
(*P_148110).Idx += 1;
N_148124 = 0;
N_148124 = Newrstnode_146094(((NU8) 58));
Parseuntil_148031(P_148110, N_148124, ((NimStringDesc*) &TMP195120), NIM_TRUE);
Addson_146101(Father_148111, N_148124);
goto LA1;
LA3: ;
LOC5 = Isinlinemarkupstart_147572(&(*P_148110), ((NimStringDesc*) &TMP195105));
if (!LOC5) goto LA6;
(*P_148110).Idx += 1;
N_148137 = 0;
N_148137 = Newrstnode_146094(((NU8) 57));
Parseuntil_148031(P_148110, N_148137, ((NimStringDesc*) &TMP195105), NIM_TRUE);
Addson_146101(Father_148111, N_148137);
goto LA1;
LA6: ;
LOC8 = Isinlinemarkupstart_147572(&(*P_148110), ((NimStringDesc*) &TMP195122));
if (!LOC8) goto LA9;
(*P_148110).Idx += 1;
N_148150 = 0;
N_148150 = Newrstnode_146094(((NU8) 60));
Parseuntil_148031(P_148110, N_148150, ((NimStringDesc*) &TMP195122), NIM_FALSE);
Addson_146101(Father_148111, N_148150);
goto LA1;
LA9: ;
LOC11 = Isinlinemarkupstart_147572(&(*P_148110), ((NimStringDesc*) &TMP195125));
if (!LOC11) goto LA12;
(*P_148110).Idx += 1;
N_148163 = 0;
N_148163 = Newrstnode_146094(((NU8) 59));
Parseuntil_148031(P_148110, N_148163, ((NimStringDesc*) &TMP195125), NIM_TRUE);
N_148163 = Parsepostfix_147931(P_148110, N_148163);
Addson_146101(Father_148111, N_148163);
goto LA1;
LA12: ;
LOC14 = Isinlinemarkupstart_147572(&(*P_148110), ((NimStringDesc*) &TMP195107));
if (!LOC14) goto LA15;
(*P_148110).Idx += 1;
N_148176 = 0;
N_148176 = Newrstnode_146094(((NU8) 61));
Parseuntil_148031(P_148110, N_148176, ((NimStringDesc*) &TMP195107), NIM_FALSE);
Addson_146101(Father_148111, N_148176);
goto LA1;
LA15: ;
Parsebackslash_147623(P_148110, Father_148111);
LA1: ;
break;
case ((NU8) 3):
Parseurl_147988(P_148110, Father_148111);
break;
case ((NU8) 4):
case ((NU8) 6):
case ((NU8) 2):
LOC17 = 0;
LOC17 = Newleaf_147447(P_148110);
Addson_146101(Father_148111, LOC17);
(*P_148110).Idx += 1;
break;
default:
break;
}
}
N_NIMCALL(void, Parseline_148418)(TY146677* P_148421, TY146077* Father_148422) {
while (1) {
switch ((*P_148421).Tok->data[(*P_148421).Idx].Kind) {
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
Parseinline_148107(P_148421, Father_148422);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(TY146077*, Parsefield_148428)(TY146677* P_148431) {
TY146077* Result_148432;
NI Col_148433;
TY146077* Fieldname_148446;
TY146077* Fieldbody_148447;
NI Indent_148466;
Result_148432 = 0;
Result_148432 = Newrstnode_146094(((NU8) 14));
Col_148433 = 0;
Col_148433 = (*P_148431).Tok->data[(*P_148431).Idx].Col;
(*P_148431).Idx += 1;
Fieldname_148446 = 0;
Fieldname_148446 = Newrstnode_146094(((NU8) 15));
Parseuntil_148031(P_148431, Fieldname_148446, ((NimStringDesc*) &TMP195109), NIM_FALSE);
Fieldbody_148447 = 0;
Fieldbody_148447 = Newrstnode_146094(((NU8) 16));
if (!!(((*P_148431).Tok->data[(*P_148431).Idx].Kind == ((NU8) 1)))) goto LA2;
Parseline_148418(P_148431, Fieldbody_148447);
LA2: ;
if (!((*P_148431).Tok->data[(*P_148431).Idx].Kind == ((NU8) 1))) goto LA5;
Indent_148466 = 0;
Indent_148466 = (*P_148431).Tok->data[(*P_148431).Idx].Ival;
if (!(Col_148433 < Indent_148466)) goto LA8;
Pushind_146765(P_148431, Indent_148466);
Parsesection_148423(P_148431, Fieldbody_148447);
Popind_146788(P_148431);
LA8: ;
LA5: ;
Addson_146101(Result_148432, Fieldname_148446);
Addson_146101(Result_148432, Fieldbody_148447);
return Result_148432;
}
N_NIMCALL(TY146077*, Parsefields_148469)(TY146677* P_148472) {
TY146077* Result_148473;
NIM_BOOL LOC2;
NI Col_148483;
TY146077* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC10;
Result_148473 = 0;
Result_148473 = NIM_NIL;
LOC2 = ((*P_148472).Tok->data[(*P_148472).Idx].Kind == ((NU8) 1));
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_148472).Tok->data[(NI64)((*P_148472).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195109));
LA3: ;
if (!LOC2) goto LA4;
Col_148483 = 0;
Col_148483 = (*P_148472).Tok->data[(*P_148472).Idx].Ival;
Result_148473 = Newrstnode_146094(((NU8) 13));
(*P_148472).Idx += 1;
while (1) {
LOC7 = 0;
LOC7 = Parsefield_148428(P_148472);
Addson_146101(Result_148473, LOC7);
LOC10 = ((*P_148472).Tok->data[(*P_148472).Idx].Kind == ((NU8) 1));
if (!(LOC10)) goto LA11;
LOC10 = ((*P_148472).Tok->data[(*P_148472).Idx].Ival == Col_148483);
LA11: ;
LOC9 = LOC10;
if (!(LOC9)) goto LA12;
LOC9 = eqStrings((*P_148472).Tok->data[(NI64)((*P_148472).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195109));
LA12: ;
if (!LOC9) goto LA13;
(*P_148472).Idx += 1;
goto LA8;
LA13: ;
goto LA6;
LA8: ;
} LA6: ;
LA4: ;
return Result_148473;
}
N_NIMCALL(TY146077*, Parsedirective_149951)(TY146677* P_149954, NU8 Flags_149955) {
TY146077* Result_149956;
TY146077* Args_149957;
TY146077* Options_149958;
TY146077* LOC8;
TY146077* LOC15;
NIM_BOOL LOC20;
NIM_BOOL LOC21;
Result_149956 = 0;
Result_149956 = Newrstnode_146094(((NU8) 40));
Args_149957 = 0;
Args_149957 = NIM_NIL;
Options_149958 = 0;
Options_149958 = NIM_NIL;
if (!((Flags_149955 &(1<<((((NU8) 0))&7)))!=0)) goto LA2;
Args_149957 = Newrstnode_146094(((NU8) 41));
if (!((Flags_149955 &(1<<((((NU8) 2))&7)))!=0)) goto LA5;
while (1) {
switch ((*P_149954).Tok->data[(*P_149954).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
case ((NU8) 4):
LOC8 = 0;
LOC8 = Newleaf_147447(P_149954);
Addson_146101(Args_149957, LOC8);
(*P_149954).Idx += 1;
break;
default:
goto LA7;
break;
}
} LA7: ;
goto LA4;
LA5: ;
if (!((Flags_149955 &(1<<((((NU8) 3))&7)))!=0)) goto LA9;
while (1) {
if (!((*P_149954).Tok->data[(*P_149954).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_149954).Idx += 1;
} LA11: ;
if (!((*P_149954).Tok->data[(*P_149954).Idx].Kind == ((NU8) 3))) goto LA13;
LOC15 = 0;
LOC15 = Newleaf_147447(P_149954);
Addson_146101(Args_149957, LOC15);
(*P_149954).Idx += 1;
goto LA12;
LA13: ;
Args_149957 = NIM_NIL;
LA12: ;
goto LA4;
LA9: ;
Parseline_148418(P_149954, Args_149957);
LA4: ;
LA2: ;
Addson_146101(Result_149956, Args_149957);
if (!((Flags_149955 &(1<<((((NU8) 1))&7)))!=0)) goto LA17;
LOC21 = ((*P_149954).Tok->data[(*P_149954).Idx].Kind == ((NU8) 1));
if (!(LOC21)) goto LA22;
LOC21 = (3 <= (*P_149954).Tok->data[(*P_149954).Idx].Ival);
LA22: ;
LOC20 = LOC21;
if (!(LOC20)) goto LA23;
LOC20 = eqStrings((*P_149954).Tok->data[(NI64)((*P_149954).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195109));
LA23: ;
if (!LOC20) goto LA24;
Options_149958 = Parsefields_148469(P_149954);
LA24: ;
LA17: ;
Addson_146101(Result_149956, Options_149958);
return Result_149956;
}
N_NIMCALL(NIM_BOOL, Indfollows_150068)(TY146677* P_150070) {
NIM_BOOL Result_150071;
NIM_BOOL LOC1;
NI LOC3;
Result_150071 = 0;
LOC1 = ((*P_150070).Tok->data[(*P_150070).Idx].Kind == ((NU8) 1));
if (!(LOC1)) goto LA2;
LOC3 = Currind_146761(P_150070);
LOC1 = (LOC3 < (*P_150070).Tok->data[(*P_150070).Idx].Ival);
LA2: ;
Result_150071 = LOC1;
return Result_150071;
}
N_NIMCALL(TY146077*, Parsedirective_150083)(TY146677* P_150086, NU8 Flags_150087, TY149943 Contentparser_150088) {
TY146077* Result_150089;
NIM_BOOL LOC2;
TY146077* Content_150090;
Result_150089 = 0;
Result_150089 = Parsedirective_149951(P_150086, Flags_150087);
LOC2 = !(((void*) (Contentparser_150088)) == 0);
if (!(LOC2)) goto LA3;
LOC2 = Indfollows_150068(&(*P_150086));
LA3: ;
if (!LOC2) goto LA4;
Pushind_146765(P_150086, (*P_150086).Tok->data[(*P_150086).Idx].Ival);
Content_150090 = 0;
Content_150090 = Contentparser_150088(P_150086);
Popind_146788(P_150086);
Addson_146101(Result_150089, Content_150090);
goto LA1;
LA4: ;
Addson_146101(Result_150089, NIM_NIL);
LA1: ;
return Result_150089;
}
N_NIMCALL(NimStringDesc*, Getfieldvalue_146111)(TY146077* N_146113, NimStringDesc* Fieldname_146114) {
NimStringDesc* Result_148523;
NimStringDesc* LOC7;
NI I_148559;
NI HEX3Atmp_148563;
NI LOC8;
NI Res_148565;
TY146077* F_148560;
NimStringDesc* LOC11;
NI LOC12;
Result_148523 = 0;
Result_148523 = copyString(((NimStringDesc*) &TMP148399));
if (!((*N_146113).Sons->data[1] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((*(*N_146113).Sons->data[1]).Kind == ((NU8) 13)))) goto LA5;
LOC7 = 0;
LOC7 = rawNewString(reprEnum((*(*N_146113).Sons->data[1]).Kind, NTI146008)->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP195140));
appendString(LOC7, reprEnum((*(*N_146113).Sons->data[1]).Kind, NTI146008));
Internalerror_46575(LOC7);
LA5: ;
I_148559 = 0;
HEX3Atmp_148563 = 0;
LOC8 = Rsonslen_146091((*N_146113).Sons->data[1]);
HEX3Atmp_148563 = (NI64)(LOC8 - 1);
Res_148565 = 0;
Res_148565 = 0;
while (1) {
if (!(Res_148565 <= HEX3Atmp_148563)) goto LA9;
I_148559 = Res_148565;
F_148560 = 0;
F_148560 = (*(*N_146113).Sons->data[1]).Sons->data[I_148559];
LOC11 = 0;
LOC11 = Addnodes_146108((*F_148560).Sons->data[0]);
LOC12 = nsuCmpIgnoreStyle(LOC11, Fieldname_146114);
if (!(LOC12 == 0)) goto LA13;
Result_148523 = Addnodes_146108((*F_148560).Sons->data[1]);
if (!((Result_148523) && (Result_148523)->Sup.len == 0)) goto LA16;
Result_148523 = copyString(((NimStringDesc*) &TMP195141));
LA16: ;
goto BeforeRet;
LA13: ;
Res_148565 += 1;
} LA9: ;
BeforeRet: ;
return Result_148523;
}
N_NIMCALL(TY146077*, Dirinclude_150097)(TY146677* P_150100) {
TY146077* Result_150101;
TY146077* N_150103;
NimStringDesc* Filename_150104;
NimStringDesc* LOC1;
NimStringDesc* Path_150105;
NimStringDesc* LOC6;
NimStringDesc* LOC9;
TY146077* LOC10;
TY146677 Q_150106;
NimStringDesc* LOC11;
NI LOC13;
Result_150101 = 0;
Result_150101 = NIM_NIL;
N_150103 = 0;
N_150103 = Parsedirective_150083(P_150100, 7, NIM_NIL);
Filename_150104 = 0;
LOC1 = 0;
LOC1 = Addnodes_146108((*N_150103).Sons->data[0]);
Filename_150104 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Path_150105 = 0;
Path_150105 = Findfile_45089(Filename_150104);
if (!((Path_150105) && (Path_150105)->Sup.len == 0)) goto LA3;
Rstmessage_146752(&(*P_150100), ((NU8) 2), Filename_150104);
goto LA2;
LA3: ;
LOC6 = 0;
LOC6 = Getfieldvalue_146111(N_150103, ((NimStringDesc*) &TMP195131));
if (!!(((LOC6) && (LOC6)->Sup.len == 0))) goto LA7;
Result_150101 = Newrstnode_146094(((NU8) 24));
LOC9 = 0;
LOC9 = Readfile_3647(Path_150105);
LOC10 = 0;
LOC10 = Newrstnode_146097(((NU8) 62), LOC9);
Addson_146101(Result_150101, LOC10);
goto LA5;
LA7: ;
memset((void*)&Q_150106, 0, sizeof(Q_150106));
Q_150106.Sup.m_type = NTI146677;
Initparser_146826(&Q_150106, (*P_150100).S);
Q_150106.Filename = copyString(Filename_150104);
LOC11 = 0;
LOC11 = Readfile_3647(Path_150105);
Gettokens_146427(LOC11, NIM_FALSE, &Q_150106.Tok);
LOC13 = nsuFindStr(Q_150106.Tok->data[(Q_150106.Tok->Sup.len-1)].Symbol, ((NimStringDesc*) &TMP195142), 0);
if (!(0 < LOC13)) goto LA14;
Internalerror_46575(((NimStringDesc*) &TMP195143));
LA14: ;
Result_150101 = Parsedoc_149052(&Q_150106);
LA5: ;
LA2: ;
return Result_150101;
}
N_NIMCALL(TY146077*, Dirimage_150138)(TY146677* P_150141) {
TY146077* Result_150142;
Result_150142 = 0;
Result_150142 = Parsedirective_150083(P_150141, 7, NIM_NIL);
(*Result_150142).Kind = ((NU8) 45);
return Result_150142;
}
N_NIMCALL(TY146077*, Dirfigure_150144)(TY146677* P_150147) {
TY146077* Result_150148;
Result_150148 = 0;
Result_150148 = Parsedirective_150083(P_150147, 7, Parsesectionwrapper_149908);
(*Result_150148).Kind = ((NU8) 46);
return Result_150148;
}
N_NIMCALL(TY146077*, Dirtitle_150150)(TY146677* P_150153) {
TY146077* Result_150154;
Result_150154 = 0;
Result_150154 = Parsedirective_150083(P_150153, 1, NIM_NIL);
(*Result_150154).Kind = ((NU8) 43);
return Result_150154;
}
N_NIMCALL(TY146077*, Dircontainer_150121)(TY146677* P_150124) {
TY146077* Result_150125;
Result_150125 = 0;
Result_150125 = Parsedirective_150083(P_150124, 1, Parsesectionwrapper_149908);
(*Result_150125).Kind = ((NU8) 50);
return Result_150125;
}
N_NIMCALL(TY146077*, Dircontents_150156)(TY146677* P_150159) {
TY146077* Result_150160;
Result_150160 = 0;
Result_150160 = Parsedirective_150083(P_150159, 1, NIM_NIL);
(*Result_150160).Kind = ((NU8) 44);
return Result_150160;
}
N_NIMCALL(TY146077*, Parsedirbody_150091)(TY146677* P_150094, TY149943 Contentparser_150095) {
TY146077* Result_150096;
NIM_BOOL LOC2;
Result_150096 = 0;
LOC2 = Indfollows_150068(&(*P_150094));
if (!LOC2) goto LA3;
Pushind_146765(P_150094, (*P_150094).Tok->data[(*P_150094).Idx].Ival);
Result_150096 = Contentparser_150095(P_150094);
Popind_146788(P_150094);
LA3: ;
return Result_150096;
}
N_NIMCALL(void, Dirrawaux_150169)(TY146677* P_150172, TY146077** Result_150174, NU8 Kind_150175, TY149943 Contentparser_150176) {
NimStringDesc* Filename_150177;
NimStringDesc* Path_150182;
NimStringDesc* F_150187;
TY146077* LOC7;
TY146077* LOC8;
Filename_150177 = 0;
Filename_150177 = Getfieldvalue_146111((*Result_150174), ((NimStringDesc*) &TMP195145));
if (!(0 < Filename_150177->Sup.len)) goto LA2;
Path_150182 = 0;
Path_150182 = Findfile_45089(Filename_150177);
if (!(Path_150182->Sup.len == 0)) goto LA5;
Rstmessage_146752(&(*P_150172), ((NU8) 2), Filename_150177);
goto LA4;
LA5: ;
F_150187 = 0;
F_150187 = Readfile_3647(Path_150182);
unsureAsgnRef((void**) &(*Result_150174), Newrstnode_146094(Kind_150175));
LOC7 = 0;
LOC7 = Newrstnode_146097(((NU8) 62), F_150187);
Addson_146101((*Result_150174), LOC7);
LA4: ;
goto LA1;
LA2: ;
(*(*Result_150174)).Kind = Kind_150175;
LOC8 = 0;
LOC8 = Parsedirbody_150091(P_150172, Contentparser_150176);
Addson_146101((*Result_150174), LOC8);
LA1: ;
}
N_NIMCALL(TY146077*, Dirraw_150188)(TY146677* P_150191) {
TY146077* Result_150192;
NI LOC5;
NI LOC8;
Result_150192 = 0;
Result_150192 = Parsedirective_149951(P_150191, 11);
if (!!(((*Result_150192).Sons->data[0] == NIM_NIL))) goto LA2;
LOC5 = nsuCmpIgnoreCase((*(*(*Result_150192).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP195144));
if (!(LOC5 == 0)) goto LA6;
Dirrawaux_150169(P_150191, &Result_150192, ((NU8) 48), Parseliteralblock_148585);
goto LA4;
LA6: ;
LOC8 = nsuCmpIgnoreCase((*(*(*Result_150192).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP195146));
if (!(LOC8 == 0)) goto LA9;
Dirrawaux_150169(P_150191, &Result_150192, ((NU8) 49), Parseliteralblock_148585);
goto LA4;
LA9: ;
Rstmessage_146752(&(*P_150191), ((NU8) 28), (*(*Result_150192).Sons->data[0]).Text);
LA4: ;
goto LA1;
LA2: ;
Dirrawaux_150169(P_150191, &Result_150192, ((NU8) 42), Parsesectionwrapper_149908);
LA1: ;
return Result_150192;
}
N_NIMCALL(TY146077*, Dircodeblock_150112)(TY146677* P_150115) {
TY146077* Result_150116;
NimStringDesc* Filename_150118;
NimStringDesc* LOC1;
NimStringDesc* Path_150119;
TY146077* N_150120;
NimStringDesc* LOC8;
TY146077* LOC9;
Result_150116 = 0;
Result_150116 = Parsedirective_150083(P_150115, 3, Parseliteralblock_148585);
Filename_150118 = 0;
LOC1 = 0;
LOC1 = Getfieldvalue_146111(Result_150116, ((NimStringDesc*) &TMP195145));
Filename_150118 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
if (!!(((Filename_150118) && (Filename_150118)->Sup.len == 0))) goto LA3;
Path_150119 = 0;
Path_150119 = Findfile_45089(Filename_150118);
if (!((Path_150119) && (Path_150119)->Sup.len == 0)) goto LA6;
Rstmessage_146752(&(*P_150115), ((NU8) 2), Filename_150118);
LA6: ;
N_150120 = 0;
N_150120 = Newrstnode_146094(((NU8) 24));
LOC8 = 0;
LOC8 = Readfile_3647(Path_150119);
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), LOC8);
Addson_146101(N_150120, LOC9);
asgnRefNoCycle((void**) &(*Result_150116).Sons->data[2], N_150120);
LA3: ;
(*Result_150116).Kind = ((NU8) 47);
return Result_150116;
}
N_NIMCALL(TY146077*, Dirindex_150162)(TY146677* P_150165) {
TY146077* Result_150166;
Result_150166 = 0;
Result_150166 = Parsedirective_150083(P_150165, 0, Parsesectionwrapper_149908);
(*Result_150166).Kind = ((NU8) 51);
return Result_150166;
}
N_NIMCALL(TY146077*, Getreferencename_147452)(TY146677* P_147455, NimStringDesc* Endstr_147456) {
TY146077* Result_147457;
TY146077* Res_147458;
TY146077* LOC2;
TY146077* LOC6;
Result_147457 = 0;
Res_147458 = 0;
Res_147458 = Newrstnode_146094(((NU8) 0));
while (1) {
switch ((*P_147455).Tok->data[(*P_147455).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC2 = 0;
LOC2 = Newleaf_147447(P_147455);
Addson_146101(Res_147458, LOC2);
break;
case ((NU8) 5):
if (!eqStrings((*P_147455).Tok->data[(*P_147455).Idx].Symbol, Endstr_147456)) goto LA4;
(*P_147455).Idx += 1;
goto LA1;
goto LA3;
LA4: ;
LOC6 = 0;
LOC6 = Newleaf_147447(P_147455);
Addson_146101(Res_147458, LOC6);
LA3: ;
break;
default:
Rstmessage_146752(&(*P_147455), ((NU8) 184), Endstr_147456);
goto LA1;
break;
}
(*P_147455).Idx += 1;
} LA1: ;
Result_147457 = Res_147458;
return Result_147457;
}
N_NIMCALL(TY146077*, Untileol_147483)(TY146677* P_147486) {
TY146077* Result_147487;
TY146077* LOC2;
Result_147487 = 0;
Result_147487 = Newrstnode_146094(((NU8) 0));
while (1) {
if (!!(((3 &(1<<(((*P_147486).Tok->data[(*P_147486).Idx].Kind)&7)))!=0))) goto LA1;
LOC2 = 0;
LOC2 = Newleaf_147447(P_147486);
Addson_146101(Result_147487, LOC2);
(*P_147486).Idx += 1;
} LA1: ;
return Result_147487;
}
N_NIMCALL(void, Expect_147512)(TY146677* P_147515, NimStringDesc* Tok_147516) {
if (!eqStrings((*P_147515).Tok->data[(*P_147515).Idx].Symbol, Tok_147516)) goto LA2;
(*P_147515).Idx += 1;
goto LA1;
LA2: ;
Rstmessage_146752(&(*P_147515), ((NU8) 184), Tok_147516);
LA1: ;
}
N_NIMCALL(void, Setsub_147007)(TY146677* P_147010, NimStringDesc* Key_147011, TY146077* Value_147012) {
NI Length_147023;
NI I_147031;
NI HEX3Atmp_147044;
NI Res_147046;
Length_147023 = 0;
Length_147023 = (*(*P_147010).S).Subs->Sup.len;
I_147031 = 0;
HEX3Atmp_147044 = 0;
HEX3Atmp_147044 = (NI64)(Length_147023 - 1);
Res_147046 = 0;
Res_147046 = 0;
while (1) {
if (!(Res_147046 <= HEX3Atmp_147044)) goto LA1;
I_147031 = Res_147046;
if (!eqStrings(Key_147011, (*(*P_147010).S).Subs->data[I_147031].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_147010).S).Subs->data[I_147031].Value, Value_147012);
goto BeforeRet;
LA3: ;
Res_147046 += 1;
} LA1: ;
(*(*P_147010).S).Subs = (TY146682*) setLengthSeq(&((*(*P_147010).S).Subs)->Sup, sizeof(TY146671), (NI64)(Length_147023 + 1));
asgnRefNoCycle((void**) &(*(*P_147010).S).Subs->data[Length_147023].Key, copyString(Key_147011));
asgnRefNoCycle((void**) &(*(*P_147010).S).Subs->data[Length_147023].Value, Value_147012);
BeforeRet: ;
}
N_NIMCALL(TY146077*, Parsecomment_148315)(TY146677* P_148318) {
TY146077* Result_148319;
NI Indent_148341;
Result_148319 = 0;
switch ((*P_148318).Tok->data[(*P_148318).Idx].Kind) {
case ((NU8) 1):
case ((NU8) 0):
if (!((*P_148318).Tok->data[(NI64)((*P_148318).Idx + 1)].Kind == ((NU8) 1))) goto LA2;
(*P_148318).Idx += 1;
goto LA1;
LA2: ;
Indent_148341 = 0;
Indent_148341 = (*P_148318).Tok->data[(*P_148318).Idx].Ival;
while (1) {
switch ((*P_148318).Tok->data[(*P_148318).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_148318).Tok->data[(*P_148318).Idx].Ival < Indent_148341)) goto LA6;
goto LA4;
LA6: ;
break;
default:
break;
}
(*P_148318).Idx += 1;
} LA4: ;
LA1: ;
break;
default:
while (1) {
if (!!(((3 &(1<<(((*P_148318).Tok->data[(*P_148318).Idx].Kind)&7)))!=0))) goto LA8;
(*P_148318).Idx += 1;
} LA8: ;
break;
}
Result_148319 = NIM_NIL;
return Result_148319;
}
N_NIMCALL(TY146077*, Parsedotdot_148581)(TY146677* P_148584) {
TY146077* Result_150216;
NI Col_150217;
NimStringDesc* D_150230;
NU8 LOC4;
NIM_BOOL LOC5;
TY146077* A_150243;
TY146077* B_150265;
NimStringDesc* LOC11;
NIM_BOOL LOC12;
TY146077* A_150278;
TY146077* B_150279;
NI LOC19;
NI LOC22;
NimStringDesc* LOC25;
NIM_BOOL LOC26;
TY146077* A_150341;
TY146077* B_150363;
NimStringDesc* LOC32;
Result_150216 = 0;
Result_150216 = NIM_NIL;
Col_150217 = 0;
Col_150217 = (*P_148584).Tok->data[(*P_148584).Idx].Col;
(*P_148584).Idx += 1;
D_150230 = 0;
D_150230 = Getdirective_148189(P_148584);
if (!!(((D_150230) && (D_150230)->Sup.len == 0))) goto LA2;
Pushind_146765(P_148584, Col_150217);
LOC4 = Getdirkind_148411(D_150230);
switch (LOC4) {
case ((NU8) 8):
Result_150216 = Dirinclude_150097(P_148584);
break;
case ((NU8) 7):
Result_150216 = Dirimage_150138(P_148584);
break;
case ((NU8) 6):
Result_150216 = Dirfigure_150144(P_148584);
break;
case ((NU8) 11):
Result_150216 = Dirtitle_150150(P_148584);
break;
case ((NU8) 4):
Result_150216 = Dircontainer_150121(P_148584);
break;
case ((NU8) 5):
Result_150216 = Dircontents_150156(P_148584);
break;
case ((NU8) 10):
Result_150216 = Dirraw_150188(P_148584);
break;
case ((NU8) 3):
Result_150216 = Dircodeblock_150112(P_148584);
break;
case ((NU8) 9):
Result_150216 = Dirindex_150162(P_148584);
break;
default:
Rstmessage_146752(&(*P_148584), ((NU8) 28), D_150230);
break;
}
Popind_146788(P_148584);
goto LA1;
LA2: ;
LOC5 = Match_147694(&(*P_148584), (*P_148584).Idx, ((NimStringDesc*) &TMP195147));
if (!LOC5) goto LA6;
(*P_148584).Idx += 2;
A_150243 = 0;
A_150243 = Getreferencename_147452(P_148584, ((NimStringDesc*) &TMP195109));
if (!((*P_148584).Tok->data[(*P_148584).Idx].Kind == ((NU8) 2))) goto LA9;
(*P_148584).Idx += 1;
LA9: ;
B_150265 = 0;
B_150265 = Untileol_147483(P_148584);
LOC11 = 0;
LOC11 = Rstnodetorefname_146105(A_150243);
Setref_147047(P_148584, LOC11, B_150265);
goto LA1;
LA6: ;
LOC12 = Match_147694(&(*P_148584), (*P_148584).Idx, ((NimStringDesc*) &TMP195148));
if (!LOC12) goto LA13;
(*P_148584).Idx += 2;
A_150278 = 0;
A_150278 = Getreferencename_147452(P_148584, ((NimStringDesc*) &TMP195107));
B_150279 = 0;
if (!((*P_148584).Tok->data[(*P_148584).Idx].Kind == ((NU8) 2))) goto LA16;
(*P_148584).Idx += 1;
LA16: ;
LOC19 = nsuCmpIgnoreStyle((*P_148584).Tok->data[(*P_148584).Idx].Symbol, ((NimStringDesc*) &TMP195149));
if (!(LOC19 == 0)) goto LA20;
(*P_148584).Idx += 1;
Expect_147512(P_148584, ((NimStringDesc*) &TMP195103));
B_150279 = Untileol_147483(P_148584);
goto LA18;
LA20: ;
LOC22 = nsuCmpIgnoreStyle((*P_148584).Tok->data[(*P_148584).Idx].Symbol, ((NimStringDesc*) &TMP148406));
if (!(LOC22 == 0)) goto LA23;
(*P_148584).Idx += 1;
B_150279 = Dirimage_150138(P_148584);
goto LA18;
LA23: ;
Rstmessage_146752(&(*P_148584), ((NU8) 28), (*P_148584).Tok->data[(*P_148584).Idx].Symbol);
LA18: ;
LOC25 = 0;
LOC25 = Addnodes_146108(A_150278);
Setsub_147007(P_148584, LOC25, B_150279);
goto LA1;
LA13: ;
LOC26 = Match_147694(&(*P_148584), (*P_148584).Idx, ((NimStringDesc*) &TMP195150));
if (!LOC26) goto LA27;
(*P_148584).Idx += 2;
A_150341 = 0;
A_150341 = Getreferencename_147452(P_148584, ((NimStringDesc*) &TMP195151));
if (!((*P_148584).Tok->data[(*P_148584).Idx].Kind == ((NU8) 2))) goto LA30;
(*P_148584).Idx += 1;
LA30: ;
B_150363 = 0;
B_150363 = Untileol_147483(P_148584);
LOC32 = 0;
LOC32 = Rstnodetorefname_146105(A_150341);
Setref_147047(P_148584, LOC32, B_150363);
goto LA1;
LA27: ;
Result_150216 = Parsecomment_148315(P_148584);
LA1: ;
return Result_150216;
}
N_NIMCALL(TY146077*, Parseenumlist_149710)(TY146677* P_149713) {
TY146077* Result_149714;
NI W_149725;
NIM_BOOL LOC3;
NI Col_149742;
NI J_149755;
NIM_BOOL LOC10;
TY146077* Item_149758;
NIM_BOOL LOC16;
NIM_BOOL LOC17;
Result_149714 = 0;
Result_149714 = NIM_NIL;
W_149725 = 0;
W_149725 = 0;
while (1) {
if (!(W_149725 <= 2)) goto LA1;
LOC3 = Match_147694(&(*P_149713), (*P_149713).Idx, Wildcards_149715[(W_149725)-0]);
if (!LOC3) goto LA4;
goto LA1;
LA4: ;
W_149725 += 1;
} LA1: ;
if (!(W_149725 <= 2)) goto LA7;
Col_149742 = 0;
Col_149742 = (*P_149713).Tok->data[(*P_149713).Idx].Col;
Result_149714 = Newrstnode_146094(((NU8) 7));
(*P_149713).Idx += (NI64)(Wildpos_149720[(W_149725)-0] + 3);
J_149755 = 0;
J_149755 = Tokenafternewline_148685(&(*P_149713));
LOC10 = ((*P_149713).Tok->data[J_149755].Col == (*P_149713).Tok->data[(*P_149713).Idx].Col);
if (LOC10) goto LA11;
LOC10 = Match_147694(&(*P_149713), J_149755, Wildcards_149715[(W_149725)-0]);
LA11: ;
if (!LOC10) goto LA12;
Pushind_146765(P_149713, (*P_149713).Tok->data[(*P_149713).Idx].Col);
while (1) {
Item_149758 = 0;
Item_149758 = Newrstnode_146094(((NU8) 8));
Parsesection_148423(P_149713, Item_149758);
Addson_146101(Result_149714, Item_149758);
LOC17 = ((*P_149713).Tok->data[(*P_149713).Idx].Kind == ((NU8) 1));
if (!(LOC17)) goto LA18;
LOC17 = ((*P_149713).Tok->data[(*P_149713).Idx].Ival == Col_149742);
LA18: ;
LOC16 = LOC17;
if (!(LOC16)) goto LA19;
LOC16 = Match_147694(&(*P_149713), (NI64)((*P_149713).Idx + 1), Wildcards_149715[(W_149725)-0]);
LA19: ;
if (!LOC16) goto LA20;
(*P_149713).Idx += (NI64)(Wildpos_149720[(W_149725)-0] + 4);
goto LA15;
LA20: ;
goto LA14;
LA15: ;
} LA14: ;
Popind_146788(P_149713);
goto LA9;
LA12: ;
(*P_149713).Idx -= (NI64)(Wildpos_149720[(W_149725)-0] + 3);
Result_149714 = NIM_NIL;
LA9: ;
LA7: ;
return Result_149714;
}
N_NIMCALL(TY146077*, Parsedefinitionlist_149617)(TY146677* P_149620) {
TY146077* Result_149621;
NI J_149622;
NI LOC1;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NI LOC8;
NI Col_149636;
TY146077* A_149637;
NIM_BOOL LOC14;
NIM_BOOL LOC15;
NIM_BOOL LOC16;
NI LOC18;
TY146077* B_149661;
TY146077* C_149662;
NIM_BOOL LOC24;
NI LOC28;
NIM_BOOL LOC30;
NIM_BOOL LOC31;
NIM_BOOL LOC32;
NIM_BOOL LOC33;
NI LOC41;
Result_149621 = 0;
Result_149621 = NIM_NIL;
J_149622 = 0;
LOC1 = Tokenafternewline_148685(&(*P_149620));
J_149622 = (NI64)(LOC1 - 1);
LOC5 = (1 <= J_149622);
if (!(LOC5)) goto LA6;
LOC5 = ((*P_149620).Tok->data[J_149622].Kind == ((NU8) 1));
LA6: ;
LOC4 = LOC5;
if (!(LOC4)) goto LA7;
LOC8 = Currind_146761(&(*P_149620));
LOC4 = (LOC8 < (*P_149620).Tok->data[J_149622].Ival);
LA7: ;
LOC3 = LOC4;
if (!(LOC3)) goto LA9;
LOC3 = !(eqStrings((*P_149620).Tok->data[(NI64)(J_149622 - 1)].Symbol, ((NimStringDesc*) &TMP195103)));
LA9: ;
if (!LOC3) goto LA10;
Col_149636 = 0;
Col_149636 = (*P_149620).Tok->data[(*P_149620).Idx].Col;
Result_149621 = Newrstnode_146094(((NU8) 9));
while (1) {
J_149622 = (*P_149620).Idx;
A_149637 = 0;
A_149637 = Newrstnode_146094(((NU8) 11));
Parseline_148418(P_149620, A_149637);
LOC16 = ((*P_149620).Tok->data[(*P_149620).Idx].Kind == ((NU8) 1));
if (!(LOC16)) goto LA17;
LOC18 = Currind_146761(&(*P_149620));
LOC16 = (LOC18 < (*P_149620).Tok->data[(*P_149620).Idx].Ival);
LA17: ;
LOC15 = LOC16;
if (!(LOC15)) goto LA19;
LOC15 = !(eqStrings((*P_149620).Tok->data[(NI64)((*P_149620).Idx + 1)].Symbol, ((NimStringDesc*) &TMP195103)));
LA19: ;
LOC14 = LOC15;
if (!(LOC14)) goto LA20;
LOC14 = !(((3 &(1<<(((*P_149620).Tok->data[(NI64)((*P_149620).Idx + 1)].Kind)&7)))!=0));
LA20: ;
if (!LOC14) goto LA21;
Pushind_146765(P_149620, (*P_149620).Tok->data[(*P_149620).Idx].Ival);
B_149661 = 0;
B_149661 = Newrstnode_146094(((NU8) 12));
Parsesection_148423(P_149620, B_149661);
C_149662 = 0;
C_149662 = Newrstnode_146094(((NU8) 10));
Addson_146101(C_149662, A_149637);
Addson_146101(C_149662, B_149661);
Addson_146101(Result_149621, C_149662);
Popind_146788(P_149620);
goto LA13;
LA21: ;
(*P_149620).Idx = J_149622;
goto LA12;
LA13: ;
LOC24 = ((*P_149620).Tok->data[(*P_149620).Idx].Kind == ((NU8) 1));
if (!(LOC24)) goto LA25;
LOC24 = ((*P_149620).Tok->data[(*P_149620).Idx].Ival == Col_149636);
LA25: ;
if (!LOC24) goto LA26;
(*P_149620).Idx += 1;
LOC28 = Tokenafternewline_148685(&(*P_149620));
J_149622 = (NI64)(LOC28 - 1);
LOC33 = (1 <= J_149622);
if (!(LOC33)) goto LA34;
LOC33 = ((*P_149620).Tok->data[J_149622].Kind == ((NU8) 1));
LA34: ;
LOC32 = LOC33;
if (!(LOC32)) goto LA35;
LOC32 = (Col_149636 < (*P_149620).Tok->data[J_149622].Ival);
LA35: ;
LOC31 = LOC32;
if (!(LOC31)) goto LA36;
LOC31 = !(eqStrings((*P_149620).Tok->data[(NI64)(J_149622 - 1)].Symbol, ((NimStringDesc*) &TMP195103)));
LA36: ;
LOC30 = LOC31;
if (!(LOC30)) goto LA37;
LOC30 = !(((*P_149620).Tok->data[(NI64)(J_149622 + 1)].Kind == ((NU8) 1)));
LA37: ;
if (!LOC30) goto LA38;
goto LA29;
LA38: ;
goto LA12;
LA29: ;
LA26: ;
} LA12: ;
LOC41 = Rsonslen_146091(Result_149621);
if (!(LOC41 == 0)) goto LA42;
Result_149621 = NIM_NIL;
LA42: ;
LA10: ;
return Result_149621;
}
N_NIMCALL(TY146077*, Parsetransition_149308)(TY146677* P_149311) {
TY146077* Result_149312;
Result_149312 = 0;
Result_149312 = Newrstnode_146094(((NU8) 3));
(*P_149311).Idx += 1;
if (!((*P_149311).Tok->data[(*P_149311).Idx].Kind == ((NU8) 1))) goto LA2;
(*P_149311).Idx += 1;
LA2: ;
if (!((*P_149311).Tok->data[(*P_149311).Idx].Kind == ((NU8) 1))) goto LA5;
(*P_149311).Idx += 1;
LA5: ;
return Result_149312;
}
N_NIMCALL(NI, Getlevel_148663)(NI* Map_148666, NI* Lvl_148668, NIM_CHAR C_148669) {
NI Result_148670;
Result_148670 = 0;
if (!(Map_148666[(((NU8)(C_148669)))-0] == 0)) goto LA2;
(*Lvl_148668) += 1;
Map_148666[(((NU8)(C_148669)))-0] = (*Lvl_148668);
LA2: ;
Result_148670 = Map_148666[(((NU8)(C_148669)))-0];
return Result_148670;
}
N_NIMCALL(TY146077*, Parseheadline_148903)(TY146677* P_148906) {
TY146077* Result_148907;
NIM_CHAR C_148926;
Result_148907 = 0;
Result_148907 = Newrstnode_146094(((NU8) 1));
Parseline_148418(P_148906, Result_148907);
C_148926 = 0;
C_148926 = (*P_148906).Tok->data[(NI64)((*P_148906).Idx + 1)].Symbol->data[0];
(*P_148906).Idx += 2;
(*Result_148907).Level = Getlevel_148663((*(*P_148906).S).Underlinetolevel, &(*(*P_148906).S).Ulevel, C_148926);
return Result_148907;
}
N_NIMCALL(TY146077*, Parseoverline_149367)(TY146677* P_149370) {
TY146077* Result_149371;
NIM_CHAR C_149372;
NI LOC6;
TY146077* LOC9;
Result_149371 = 0;
C_149372 = 0;
C_149372 = (*P_149370).Tok->data[(*P_149370).Idx].Symbol->data[0];
(*P_149370).Idx += 2;
Result_149371 = Newrstnode_146094(((NU8) 2));
while (1) {
Parseline_148418(P_149370, Result_149371);
if (!((*P_149370).Tok->data[(*P_149370).Idx].Kind == ((NU8) 1))) goto LA3;
(*P_149370).Idx += 1;
LOC6 = Currind_146761(&(*P_149370));
if (!(LOC6 < (*P_149370).Tok->data[(NI64)((*P_149370).Idx - 1)].Ival)) goto LA7;
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195124));
Addson_146101(Result_149371, LOC9);
goto LA5;
LA7: ;
goto LA1;
LA5: ;
goto LA2;
LA3: ;
goto LA1;
LA2: ;
} LA1: ;
(*Result_149371).Level = Getlevel_148663((*(*P_149370).S).Overlinetolevel, &(*(*P_149370).S).Olevel, C_149372);
if (!((*P_149370).Tok->data[(*P_149370).Idx].Kind == ((NU8) 4))) goto LA11;
(*P_149370).Idx += 1;
if (!((*P_149370).Tok->data[(*P_149370).Idx].Kind == ((NU8) 1))) goto LA14;
(*P_149370).Idx += 1;
LA14: ;
LA11: ;
return Result_149371;
}
N_NIMCALL(NI, Tokend_148943)(TY146677* P_148945) {
NI Result_148946;
Result_148946 = 0;
Result_148946 = (NI64)((NI64)((*P_148945).Tok->data[(*P_148945).Idx].Col + (*P_148945).Tok->data[(*P_148945).Idx].Symbol->Sup.len) - 1);
return Result_148946;
}
N_NIMCALL(void, Getcolumns_148949)(TY146677* P_148952, TY76281** Cols_148954) {
NI L_148955;
L_148955 = 0;
L_148955 = 0;
while (1) {
L_148955 += 1;
(*Cols_148954) = (TY76281*) setLengthSeq(&((*Cols_148954))->Sup, sizeof(NI), L_148955);
(*Cols_148954)->data[(NI64)(L_148955 - 1)] = Tokend_148943(&(*P_148952));
(*P_148952).Idx += 1;
if (!!(((*P_148952).Tok->data[(*P_148952).Idx].Kind == ((NU8) 2)))) goto LA3;
goto LA1;
LA3: ;
(*P_148952).Idx += 1;
if (!!(((*P_148952).Tok->data[(*P_148952).Idx].Kind == ((NU8) 4)))) goto LA6;
goto LA1;
LA6: ;
} LA1: ;
if (!((*P_148952).Tok->data[(*P_148952).Idx].Kind == ((NU8) 1))) goto LA9;
(*P_148952).Idx += 1;
LA9: ;
(*Cols_148954)->data[(NI64)(L_148955 - 1)] = 32000;
}
N_NIMCALL(TY146077*, Parsesimpletable_149056)(TY146677* P_149059) {
TY146077* Result_149060;
TY76281* Cols_149061;
TY38221* Row_149063;
NI I_149064;
NI Last_149065;
NI Line_149066;
NIM_CHAR C_149067;
TY146677 Q_149068;
TY146077* A_149069;
TY146077* B_149070;
NI J_149165;
NI HEX3Atmp_149296;
NI LOC11;
NI Res_149298;
NI J_149182;
NI HEX3Atmp_149299;
NI Res_149301;
NI LOC20;
NI LOC30;
NI J_149284;
NI HEX3Atmp_149302;
NI Res_149304;
NI J_149292;
NI HEX3Atmp_149305;
NI Res_149307;
TY146077* LOC38;
Result_149060 = 0;
Cols_149061 = 0;
Row_149063 = 0;
I_149064 = 0;
Last_149065 = 0;
Line_149066 = 0;
C_149067 = 0;
memset((void*)&Q_149068, 0, sizeof(Q_149068));
Q_149068.Sup.m_type = NTI146677;
A_149069 = 0;
B_149070 = 0;
Result_149060 = Newrstnode_146094(((NU8) 29));
Cols_149061 = (TY76281*) newSeq(NTI76281, 0);
Row_149063 = (TY38221*) newSeq(NTI38221, 0);
A_149069 = NIM_NIL;
C_149067 = (*P_149059).Tok->data[(*P_149059).Idx].Symbol->data[0];
while (1) {
if (!((*P_149059).Tok->data[(*P_149059).Idx].Kind == ((NU8) 4))) goto LA3;
Last_149065 = Tokenafternewline_148685(&(*P_149059));
if (!((3 &(1<<(((*P_149059).Tok->data[Last_149065].Kind)&7)))!=0)) goto LA6;
(*P_149059).Idx = Last_149065;
goto LA1;
LA6: ;
Getcolumns_148949(P_149059, &Cols_149061);
Row_149063 = (TY38221*) setLengthSeq(&(Row_149063)->Sup, sizeof(NimStringDesc*), Cols_149061->Sup.len);
if (!!((A_149069 == NIM_NIL))) goto LA9;
J_149165 = 0;
HEX3Atmp_149296 = 0;
LOC11 = Rsonslen_146091(A_149069);
HEX3Atmp_149296 = (NI64)(LOC11 - 1);
Res_149298 = 0;
Res_149298 = 0;
while (1) {
if (!(Res_149298 <= HEX3Atmp_149296)) goto LA12;
J_149165 = Res_149298;
(*(*A_149069).Sons->data[J_149165]).Kind = ((NU8) 32);
Res_149298 += 1;
} LA12: ;
LA9: ;
LA3: ;
if (!((*P_149059).Tok->data[(*P_149059).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
J_149182 = 0;
HEX3Atmp_149299 = 0;
HEX3Atmp_149299 = (Row_149063->Sup.len-1);
Res_149301 = 0;
Res_149301 = 0;
while (1) {
if (!(Res_149301 <= HEX3Atmp_149299)) goto LA16;
J_149182 = Res_149301;
asgnRefNoCycle((void**) &Row_149063->data[J_149182], copyString(((NimStringDesc*) &TMP148399)));
Res_149301 += 1;
} LA16: ;
Line_149066 = (*P_149059).Tok->data[(*P_149059).Idx].Line;
while (1) {
I_149064 = 0;
while (1) {
if (!!(((3 &(1<<(((*P_149059).Tok->data[(*P_149059).Idx].Kind)&7)))!=0))) goto LA18;
LOC20 = Tokend_148943(&(*P_149059));
if (!(LOC20 <= Cols_149061->data[I_149064])) goto LA21;
Row_149063->data[I_149064] = resizeString(Row_149063->data[I_149064], (*P_149059).Tok->data[(*P_149059).Idx].Symbol->Sup.len + 0);
appendString(Row_149063->data[I_149064], (*P_149059).Tok->data[(*P_149059).Idx].Symbol);
(*P_149059).Idx += 1;
goto LA19;
LA21: ;
if (!((*P_149059).Tok->data[(*P_149059).Idx].Kind == ((NU8) 2))) goto LA24;
(*P_149059).Idx += 1;
LA24: ;
I_149064 += 1;
LA19: ;
} LA18: ;
if (!((*P_149059).Tok->data[(*P_149059).Idx].Kind == ((NU8) 1))) goto LA27;
(*P_149059).Idx += 1;
LA27: ;
LOC30 = Tokend_148943(&(*P_149059));
if (!(LOC30 <= Cols_149061->data[0])) goto LA31;
goto LA17;
LA31: ;
if (!((17 &(1<<(((*P_149059).Tok->data[(*P_149059).Idx].Kind)&7)))!=0)) goto LA34;
goto LA17;
LA34: ;
J_149284 = 0;
HEX3Atmp_149302 = 0;
HEX3Atmp_149302 = (Row_149063->Sup.len-1);
Res_149304 = 0;
Res_149304 = 1;
while (1) {
if (!(Res_149304 <= HEX3Atmp_149302)) goto LA36;
J_149284 = Res_149304;
Row_149063->data[J_149284] = addChar(Row_149063->data[J_149284], 10);
Res_149304 += 1;
} LA36: ;
} LA17: ;
A_149069 = Newrstnode_146094(((NU8) 31));
J_149292 = 0;
HEX3Atmp_149305 = 0;
HEX3Atmp_149305 = (Row_149063->Sup.len-1);
Res_149307 = 0;
Res_149307 = 0;
while (1) {
if (!(Res_149307 <= HEX3Atmp_149305)) goto LA37;
J_149292 = Res_149307;
Initparser_146826(&Q_149068, (*P_149059).S);
Q_149068.Col = Cols_149061->data[J_149292];
Q_149068.Line = (NI64)(Line_149066 - 1);
Q_149068.Filename = copyString((*P_149059).Filename);
Gettokens_146427(Row_149063->data[J_149292], NIM_FALSE, &Q_149068.Tok);
B_149070 = Newrstnode_146094(((NU8) 33));
LOC38 = 0;
LOC38 = Parsedoc_149052(&Q_149068);
Addson_146101(B_149070, LOC38);
Addson_146101(A_149069, B_149070);
Res_149307 += 1;
} LA37: ;
Addson_146101(Result_149060, A_149069);
} LA1: ;
return Result_149060;
}
N_NIMCALL(TY146077*, Parseoptionlist_149513)(TY146677* P_149516) {
TY146077* Result_149517;
NIM_BOOL LOC3;
TY146077* A_149518;
TY146077* B_149519;
TY146077* C_149520;
NIM_BOOL LOC7;
NIM_BOOL LOC12;
TY146077* LOC16;
NI J_149582;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NI LOC22;
Result_149517 = 0;
Result_149517 = Newrstnode_146094(((NU8) 17));
while (1) {
LOC3 = Isoptionlist_148758(&(*P_149516));
if (!LOC3) goto LA4;
A_149518 = 0;
A_149518 = Newrstnode_146094(((NU8) 19));
B_149519 = 0;
B_149519 = Newrstnode_146094(((NU8) 23));
C_149520 = 0;
C_149520 = Newrstnode_146094(((NU8) 18));
LOC7 = Match_147694(&(*P_149516), (*P_149516).Idx, ((NimStringDesc*) &TMP195115));
if (!LOC7) goto LA8;
(*P_149516).Idx += 1;
LA8: ;
while (1) {
if (!!(((3 &(1<<(((*P_149516).Tok->data[(*P_149516).Idx].Kind)&7)))!=0))) goto LA10;
LOC12 = ((*P_149516).Tok->data[(*P_149516).Idx].Kind == ((NU8) 2));
if (!(LOC12)) goto LA13;
LOC12 = (1 < (*P_149516).Tok->data[(*P_149516).Idx].Symbol->Sup.len);
LA13: ;
if (!LOC12) goto LA14;
(*P_149516).Idx += 1;
goto LA10;
LA14: ;
LOC16 = 0;
LOC16 = Newleaf_147447(P_149516);
Addson_146101(A_149518, LOC16);
(*P_149516).Idx += 1;
} LA10: ;
J_149582 = 0;
J_149582 = Tokenafternewline_148685(&(*P_149516));
LOC19 = (0 < J_149582);
if (!(LOC19)) goto LA20;
LOC19 = ((*P_149516).Tok->data[(NI64)(J_149582 - 1)].Kind == ((NU8) 1));
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA21;
LOC22 = Currind_146761(&(*P_149516));
LOC18 = (LOC22 < (*P_149516).Tok->data[(NI64)(J_149582 - 1)].Ival);
LA21: ;
if (!LOC18) goto LA23;
Pushind_146765(P_149516, (*P_149516).Tok->data[(NI64)(J_149582 - 1)].Ival);
Parsesection_148423(P_149516, B_149519);
Popind_146788(P_149516);
goto LA17;
LA23: ;
Parseline_148418(P_149516, B_149519);
LA17: ;
if (!((*P_149516).Tok->data[(*P_149516).Idx].Kind == ((NU8) 1))) goto LA26;
(*P_149516).Idx += 1;
LA26: ;
Addson_146101(C_149520, A_149518);
Addson_146101(C_149520, B_149519);
Addson_146101(Result_149517, C_149520);
goto LA2;
LA4: ;
goto LA1;
LA2: ;
} LA1: ;
return Result_149517;
}
N_NIMCALL(void, Addsonifnotnil_146585)(TY146077* Father_146587, TY146077* Son_146588) {
if (!!((Son_146588 == NIM_NIL))) goto LA2;
Addson_146101(Father_146587, Son_146588);
LA2: ;
}
N_NIMCALL(void, Parseparagraph_148835)(TY146677* P_148838, TY146077* Result_148839) {
NI LOC5;
NU8 LOC8;
TY146077* LOC9;
TY146077* LOC10;
NIM_BOOL LOC12;
NIM_BOOL LOC13;
NI LOC16;
TY146077* LOC19;
TY146077* LOC20;
while (1) {
switch ((*P_148838).Tok->data[(*P_148838).Idx].Kind) {
case ((NU8) 1):
if (!((*P_148838).Tok->data[(NI64)((*P_148838).Idx + 1)].Kind == ((NU8) 1))) goto LA3;
(*P_148838).Idx += 1;
goto LA1;
goto LA2;
LA3: ;
LOC5 = Currind_146761(&(*P_148838));
if (!((*P_148838).Tok->data[(*P_148838).Idx].Ival == LOC5)) goto LA6;
(*P_148838).Idx += 1;
LOC8 = Whichsection_148762(&(*P_148838));
switch (LOC8) {
case ((NU8) 4):
case ((NU8) 62):
case ((NU8) 1):
case ((NU8) 2):
case ((NU8) 40):
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195124));
Addson_146101(Result_148839, LOC9);
break;
case ((NU8) 26):
LOC10 = 0;
LOC10 = Parselineblock_148775(P_148838);
Addsonifnotnil_146585(Result_148839, LOC10);
break;
default:
goto LA1;
break;
}
goto LA2;
LA6: ;
goto LA1;
LA2: ;
break;
case ((NU8) 5):
LOC13 = eqStrings((*P_148838).Tok->data[(*P_148838).Idx].Symbol, ((NimStringDesc*) &TMP195103));
if (!(LOC13)) goto LA14;
LOC13 = ((*P_148838).Tok->data[(NI64)((*P_148838).Idx + 1)].Kind == ((NU8) 1));
LA14: ;
LOC12 = LOC13;
if (!(LOC12)) goto LA15;
LOC16 = Currind_146761(&(*P_148838));
LOC12 = (LOC16 < (*P_148838).Tok->data[(NI64)((*P_148838).Idx + 1)].Ival);
LA15: ;
if (!LOC12) goto LA17;
LOC19 = 0;
LOC19 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP195109));
Addson_146101(Result_148839, LOC19);
(*P_148838).Idx += 1;
LOC20 = 0;
LOC20 = Parseliteralblock_148585(P_148838);
Addson_146101(Result_148839, LOC20);
goto LA1;
goto LA11;
LA17: ;
Parseinline_148107(P_148838, Result_148839);
LA11: ;
break;
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
Parseinline_148107(P_148838, Result_148839);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(NU8, Sonkind_149794)(TY146077* Father_149796, NI I_149797) {
NU8 Result_149798;
NI LOC2;
Result_149798 = 0;
Result_149798 = ((NU8) 62);
LOC2 = Rsonslen_146091(Father_149796);
if (!(I_149797 < LOC2)) goto LA3;
Result_149798 = (*(*Father_149796).Sons->data[I_149797]).Kind;
LA3: ;
return Result_149798;
}
N_NIMCALL(void, Parsesection_148423)(TY146677* P_148426, TY146077* Result_148427) {
NIM_BOOL Leave_149806;
NI LOC4;
NI LOC7;
TY146077* A_149834;
TY146077* A_149844;
NU8 K_149845;
NIM_BOOL LOC17;
NIM_BOOL LOC22;
NU8 LOC23;
NU8 LOC25;
while (1) {
Leave_149806 = 0;
Leave_149806 = NIM_FALSE;
while (1) {
if (!((*P_148426).Tok->data[(*P_148426).Idx].Kind == ((NU8) 1))) goto LA2;
LOC4 = Currind_146761(&(*P_148426));
if (!(LOC4 == (*P_148426).Tok->data[(*P_148426).Idx].Ival)) goto LA5;
(*P_148426).Idx += 1;
goto LA3;
LA5: ;
LOC7 = Currind_146761(&(*P_148426));
if (!(LOC7 < (*P_148426).Tok->data[(*P_148426).Idx].Ival)) goto LA8;
Pushind_146765(P_148426, (*P_148426).Tok->data[(*P_148426).Idx].Ival);
A_149834 = 0;
A_149834 = Newrstnode_146094(((NU8) 28));
Parsesection_148423(P_148426, A_149834);
Addson_146101(Result_148427, A_149834);
Popind_146788(P_148426);
goto LA3;
LA8: ;
Leave_149806 = NIM_TRUE;
goto LA2;
LA3: ;
} LA2: ;
if (!Leave_149806) goto LA11;
goto LA1;
LA11: ;
if (!((*P_148426).Tok->data[(*P_148426).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
A_149844 = 0;
A_149844 = NIM_NIL;
K_149845 = 0;
K_149845 = Whichsection_148762(&(*P_148426));
switch (K_149845) {
case ((NU8) 24):
(*P_148426).Idx += 1;
A_149844 = Parseliteralblock_148585(P_148426);
break;
case ((NU8) 5):
A_149844 = Parsebulletlist_149452(P_148426);
break;
case ((NU8) 26):
A_149844 = Parselineblock_148775(P_148426);
break;
case ((NU8) 40):
A_149844 = Parsedotdot_148581(P_148426);
break;
case ((NU8) 7):
A_149844 = Parseenumlist_149710(P_148426);
break;
case ((NU8) 62):
Rstmessage_146757(&(*P_148426), ((NU8) 188));
break;
case ((NU8) 4):
break;
case ((NU8) 9):
A_149844 = Parsedefinitionlist_149617(P_148426);
break;
case ((NU8) 13):
(*P_148426).Idx -= 1;
A_149844 = Parsefields_148469(P_148426);
break;
case ((NU8) 3):
A_149844 = Parsetransition_149308(P_148426);
break;
case ((NU8) 1):
A_149844 = Parseheadline_148903(P_148426);
break;
case ((NU8) 2):
A_149844 = Parseoverline_149367(P_148426);
break;
case ((NU8) 29):
A_149844 = Parsesimpletable_149056(P_148426);
break;
case ((NU8) 17):
A_149844 = Parseoptionlist_149513(P_148426);
break;
default:
Internalerror_46575(((NimStringDesc*) &TMP195152));
break;
}
LOC17 = (A_149844 == NIM_NIL);
if (!(LOC17)) goto LA18;
LOC17 = !((K_149845 == ((NU8) 40)));
LA18: ;
if (!LOC17) goto LA19;
A_149844 = Newrstnode_146094(((NU8) 4));
Parseparagraph_148835(P_148426, A_149844);
LA19: ;
Addsonifnotnil_146585(Result_148427, A_149844);
} LA1: ;
LOC23 = Sonkind_149794(Result_148427, 0);
LOC22 = (LOC23 == ((NU8) 4));
if (!(LOC22)) goto LA24;
LOC25 = Sonkind_149794(Result_148427, 1);
LOC22 = !((LOC25 == ((NU8) 4)));
LA24: ;
if (!LOC22) goto LA26;
(*(*Result_148427).Sons->data[0]).Kind = ((NU8) 0);
LA26: ;
}
N_NIMCALL(TY146077*, Parsesectionwrapper_149908)(TY146677* P_149911) {
TY146077* Result_149912;
NIM_BOOL LOC2;
NI LOC4;
Result_149912 = 0;
Result_149912 = Newrstnode_146094(((NU8) 0));
Parsesection_148423(P_149911, Result_149912);
while (1) {
LOC2 = ((*Result_149912).Kind == ((NU8) 0));
if (!(LOC2)) goto LA3;
LOC4 = Rsonslen_146091(Result_149912);
LOC2 = (LOC4 == 1);
LA3: ;
if (!LOC2) goto LA1;
Result_149912 = (*Result_149912).Sons->data[0];
} LA1: ;
return Result_149912;
}
N_NIMCALL(TY146077*, Parsedoc_149052)(TY146677* P_149055) {
TY146077* Result_149928;
Result_149928 = 0;
Result_149928 = Parsesectionwrapper_149908(P_149055);
if (!!(((*P_149055).Tok->data[(*P_149055).Idx].Kind == ((NU8) 0)))) goto LA2;
Rstmessage_146757(&(*P_149055), ((NU8) 187));
LA2: ;
return Result_149928;
}
N_NIMCALL(TY146077*, Rstparse_146082)(NimStringDesc* Text_146084, NIM_BOOL Skippounds_146085, NimStringDesc* Filename_146086, NI Line_146087, NI Column_146088, NIM_BOOL* Hastoc_146090) {
TY146077* Result_150418;
TY146677 P_150419;
TY146673* LOC4;
TY146077* LOC5;
Result_150418 = 0;
memset((void*)&P_150419, 0, sizeof(P_150419));
P_150419.Sup.m_type = NTI146677;
if (!Text_146084 == 0) goto LA2;
Rawmessage_46557(((NU8) 2), Filename_146086);
LA2: ;
LOC4 = 0;
LOC4 = Newsharedstate_146697();
Initparser_146826(&P_150419, LOC4);
P_150419.Filename = copyString(Filename_146086);
P_150419.Line = Line_146087;
P_150419.Col = Column_146088;
Gettokens_146427(Text_146084, Skippounds_146085, &P_150419.Tok);
LOC5 = 0;
LOC5 = Parsedoc_149052(&P_150419);
Result_150418 = Resolvesubs_150364(&P_150419, LOC5);
(*Hastoc_146090) = P_150419.Hastoc;
return Result_150418;
}
N_NIMCALL(NIM_BOOL, Matcheshyperlink_147200)(TY146077* H_147202, NimStringDesc* Filename_147203) {
NIM_BOOL Result_147204;
NimStringDesc* S_147225;
NIM_BOOL LOC7;
Result_147204 = 0;
if (!((*H_147202).Kind == ((NU8) 0))) goto LA2;
Result_147204 = Matcheshyperlink_147200((*H_147202).Sons->data[0], Filename_147203);
goto LA1;
LA2: ;
if (!((*H_147202).Kind == ((NU8) 38))) goto LA4;
S_147225 = 0;
S_147225 = Addnodes_146108((*H_147202).Sons->data[1]);
LOC7 = nsuStartsWith(S_147225, Filename_147203);
if (!(LOC7)) goto LA8;
LOC7 = ((NU8)(S_147225->data[(NI64)(Filename_147203->Sup.len + 0)]) == (NU8)(35));
LA8: ;
if (!LOC7) goto LA9;
Result_147204 = NIM_TRUE;
goto LA6;
LA9: ;
Result_147204 = NIM_FALSE;
LA6: ;
goto LA1;
LA4: ;
Result_147204 = NIM_FALSE;
LA1: ;
return Result_147204;
}
N_NIMCALL(void, Clearindex_146126)(TY146077* Index_146128, NimStringDesc* Filename_146129) {
NI K_147234;
NI Items_147235;
NI Lastitem_147236;
TY146077* Val_147237;
NI I_147254;
NI HEX3Atmp_147377;
NI LOC1;
NI Res_147379;
NI J_147289;
NI HEX3Atmp_147374;
NI LOC9;
NI Res_147376;
NIM_BOOL LOC14;
NIM_BOOL LOC22;
NI I_147336;
NI HEX3Atmp_147380;
NI LOC25;
NI Res_147382;
K_147234 = 0;
Items_147235 = 0;
Lastitem_147236 = 0;
Val_147237 = 0;
I_147254 = 0;
HEX3Atmp_147377 = 0;
LOC1 = Rsonslen_146091(Index_146128);
HEX3Atmp_147377 = (NI64)(LOC1 - 1);
Res_147379 = 0;
Res_147379 = 0;
while (1) {
if (!(Res_147379 <= HEX3Atmp_147377)) goto LA2;
I_147254 = Res_147379;
Val_147237 = (*(*(*Index_146128).Sons->data[I_147254]).Sons->data[1]).Sons->data[0];
if (!((*Val_147237).Kind == ((NU8) 0))) goto LA4;
Val_147237 = (*Val_147237).Sons->data[0];
LA4: ;
if (!((*Val_147237).Kind == ((NU8) 5))) goto LA7;
Items_147235 = Rsonslen_146091(Val_147237);
Lastitem_147236 = -1;
J_147289 = 0;
HEX3Atmp_147374 = 0;
LOC9 = Rsonslen_146091(Val_147237);
HEX3Atmp_147374 = (NI64)(LOC9 - 1);
Res_147376 = 0;
Res_147376 = 0;
while (1) {
if (!(Res_147376 <= HEX3Atmp_147374)) goto LA10;
J_147289 = Res_147376;
if (!((*Val_147237).Sons->data[J_147289] == NIM_NIL)) goto LA12;
Items_147235 -= 1;
goto LA11;
LA12: ;
LOC14 = Matcheshyperlink_147200((*(*Val_147237).Sons->data[J_147289]).Sons->data[0], Filename_146129);
if (!LOC14) goto LA15;
asgnRefNoCycle((void**) &(*Val_147237).Sons->data[J_147289], NIM_NIL);
Items_147235 -= 1;
goto LA11;
LA15: ;
Lastitem_147236 = J_147289;
LA11: ;
Res_147376 += 1;
} LA10: ;
if (!(Items_147235 == 1)) goto LA18;
asgnRefNoCycle((void**) &(*(*(*Index_146128).Sons->data[I_147254]).Sons->data[1]).Sons->data[0], (*(*Val_147237).Sons->data[Lastitem_147236]).Sons->data[0]);
goto LA17;
LA18: ;
if (!(Items_147235 == 0)) goto LA20;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[I_147254], NIM_NIL);
goto LA17;
LA20: ;
LA17: ;
goto LA6;
LA7: ;
LOC22 = Matcheshyperlink_147200(Val_147237, Filename_146129);
if (!LOC22) goto LA23;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[I_147254], NIM_NIL);
goto LA6;
LA23: ;
LA6: ;
Res_147379 += 1;
} LA2: ;
K_147234 = 0;
I_147336 = 0;
HEX3Atmp_147380 = 0;
LOC25 = Rsonslen_146091(Index_146128);
HEX3Atmp_147380 = (NI64)(LOC25 - 1);
Res_147382 = 0;
Res_147382 = 0;
while (1) {
if (!(Res_147382 <= HEX3Atmp_147380)) goto LA26;
I_147336 = Res_147382;
if (!!(((*Index_146128).Sons->data[I_147336] == NIM_NIL))) goto LA28;
if (!!((K_147234 == I_147336))) goto LA31;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[K_147234], (*Index_146128).Sons->data[I_147336]);
LA31: ;
K_147234 += 1;
LA28: ;
Res_147382 += 1;
} LA26: ;
(*Index_146128).Sons = (TY146075*) setLengthSeq(&((*Index_146128).Sons)->Sup, sizeof(TY146077*), K_147234);
}
N_NIMCALL(TY146077*, Lastson_146654)(TY146077* N_146656) {
TY146077* Result_146657;
Result_146657 = 0;
Result_146657 = (*N_146656).Sons->data[(NI64)((*N_146656).Sons->Sup.len - 1)];
return Result_146657;
}
N_NIMCALL(NimStringDesc*, Getargument_146115)(TY146077* N_146117) {
NimStringDesc* Result_148569;
Result_148569 = 0;
if (!((*N_146117).Sons->data[0] == NIM_NIL)) goto LA2;
Result_148569 = copyString(((NimStringDesc*) &TMP148399));
goto LA1;
LA2: ;
Result_148569 = Addnodes_146108((*N_146117).Sons->data[0]);
LA1: ;
return Result_148569;
}
N_NIMCALL(NIM_BOOL, Eqrstnodes_147164)(TY146077* A_147166, TY146077* B_147167) {
NIM_BOOL Result_147168;
NI LOC8;
NI LOC9;
NI I_147196;
NI HEX3Atmp_147197;
NI LOC12;
NI Res_147199;
NIM_BOOL LOC15;
Result_147168 = 0;
if (!!(((*A_147166).Kind == (*B_147167).Kind))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((*A_147166).Kind == ((NU8) 62))) goto LA5;
Result_147168 = eqStrings((*A_147166).Text, (*B_147167).Text);
goto LA4;
LA5: ;
LOC8 = Rsonslen_146091(A_147166);
LOC9 = Rsonslen_146091(B_147167);
if (!!((LOC8 == LOC9))) goto LA10;
goto BeforeRet;
LA10: ;
I_147196 = 0;
HEX3Atmp_147197 = 0;
LOC12 = Rsonslen_146091(A_147166);
HEX3Atmp_147197 = (NI64)(LOC12 - 1);
Res_147199 = 0;
Res_147199 = 0;
while (1) {
if (!(Res_147199 <= HEX3Atmp_147197)) goto LA13;
I_147196 = Res_147199;
LOC15 = Eqrstnodes_147164((*A_147166).Sons->data[I_147196], (*B_147167).Sons->data[I_147196]);
if (!!(LOC15)) goto LA16;
goto BeforeRet;
LA16: ;
Res_147199 += 1;
} LA13: ;
Result_147168 = NIM_TRUE;
LA4: ;
BeforeRet: ;
return Result_147168;
}
N_NIMCALL(void, Setindexpair_146118)(TY146077* Index_146120, TY146077* Key_146121, TY146077* Val_146122) {
TY146077* E_147388;
TY146077* A_147389;
TY146077* B_147390;
NI I_147416;
NI HEX3Atmp_147444;
NI LOC1;
NI Res_147446;
NIM_BOOL LOC4;
E_147388 = 0;
A_147389 = 0;
B_147390 = 0;
A_147389 = Newrstnode_146094(((NU8) 11));
Addson_146101(A_147389, Key_146121);
I_147416 = 0;
HEX3Atmp_147444 = 0;
LOC1 = Rsonslen_146091(Index_146120);
HEX3Atmp_147444 = (NI64)(LOC1 - 1);
Res_147446 = 0;
Res_147446 = 0;
while (1) {
if (!(Res_147446 <= HEX3Atmp_147444)) goto LA2;
I_147416 = Res_147446;
LOC4 = Eqrstnodes_147164((*(*Index_146120).Sons->data[I_147416]).Sons->data[0], A_147389);
if (!LOC4) goto LA5;
E_147388 = (*(*(*Index_146120).Sons->data[I_147416]).Sons->data[1]).Sons->data[0];
if (!!(((*E_147388).Kind == ((NU8) 5)))) goto LA8;
E_147388 = Newrstnode_146094(((NU8) 5));
B_147390 = Newrstnode_146094(((NU8) 6));
Addson_146101(B_147390, (*(*(*Index_146120).Sons->data[I_147416]).Sons->data[1]).Sons->data[0]);
Addson_146101(E_147388, B_147390);
asgnRefNoCycle((void**) &(*(*(*Index_146120).Sons->data[I_147416]).Sons->data[1]).Sons->data[0], E_147388);
LA8: ;
B_147390 = Newrstnode_146094(((NU8) 6));
Addson_146101(B_147390, Val_146122);
Addson_146101(E_147388, B_147390);
goto BeforeRet;
LA5: ;
Res_147446 += 1;
} LA2: ;
E_147388 = Newrstnode_146094(((NU8) 10));
B_147390 = Newrstnode_146094(((NU8) 12));
Addson_146101(B_147390, Val_146122);
Addson_146101(E_147388, A_147389);
Addson_146101(E_147388, B_147390);
Addson_146101(Index_146120, E_147388);
BeforeRet: ;
}
N_NIMCALL(NI, Cmpnodes_147104)(TY146077* A_147106, TY146077* B_147107) {
NI Result_147108;
TY146077* X_147127;
TY146077* Y_147128;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
Result_147108 = 0;
X_147127 = 0;
X_147127 = (*A_147106).Sons->data[0];
Y_147128 = 0;
Y_147128 = (*B_147107).Sons->data[0];
LOC1 = 0;
LOC1 = Addnodes_146108(X_147127);
LOC2 = 0;
LOC2 = Addnodes_146108(Y_147128);
Result_147108 = nsuCmpIgnoreStyle(LOC1, LOC2);
return Result_147108;
}
N_NIMCALL(void, Sortindex_146123)(TY146077* A_146125) {
NI N_147141;
NI H_147142;
NI I_147152;
NI HEX3Atmp_147161;
NI Res_147163;
TY146077* V_147153;
NI J_147154;
NI LOC8;
N_147141 = 0;
N_147141 = Rsonslen_146091(A_146125);
H_147142 = 0;
H_147142 = 1;
while (1) {
H_147142 = (NI64)((NI64)(3 * H_147142) + 1);
if (!(N_147141 < H_147142)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
while (1) {
H_147142 = (NI64)(H_147142 / 3);
I_147152 = 0;
HEX3Atmp_147161 = 0;
HEX3Atmp_147161 = (NI64)(N_147141 - 1);
Res_147163 = 0;
Res_147163 = H_147142;
while (1) {
if (!(Res_147163 <= HEX3Atmp_147161)) goto LA6;
I_147152 = Res_147163;
V_147153 = 0;
V_147153 = (*A_146125).Sons->data[I_147152];
J_147154 = 0;
J_147154 = I_147152;
while (1) {
LOC8 = Cmpnodes_147104((*A_146125).Sons->data[(NI64)(J_147154 - H_147142)], V_147153);
if (!(0 <= LOC8)) goto LA7;
asgnRefNoCycle((void**) &(*A_146125).Sons->data[J_147154], (*A_146125).Sons->data[(NI64)(J_147154 - H_147142)]);
J_147154 = (NI64)(J_147154 - H_147142);
if (!(J_147154 < H_147142)) goto LA10;
goto LA7;
LA10: ;
} LA7: ;
asgnRefNoCycle((void**) &(*A_146125).Sons->data[J_147154], V_147153);
Res_147163 += 1;
} LA6: ;
if (!(H_147142 == 1)) goto LA13;
goto LA5;
LA13: ;
} LA5: ;
}
N_NOINLINE(void, rstInit)(void) {
}

