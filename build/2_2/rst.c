/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY148077 TY148077;
typedef struct TY148677 TY148677;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY148137 TY148137;
typedef struct TY148135 TY148135;
typedef struct TY148673 TY148673;
typedef struct TY77281 TY77281;
typedef struct TY148682 TY148682;
typedef struct TY148671 TY148671;
typedef struct TY10802 TY10802;
typedef struct TY10818 TY10818;
typedef struct TY11196 TY11196;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11194 TY11194;
typedef struct TY148139 TY148139;
typedef struct TY148075 TY148075;
typedef struct TY47538 TY47538;
typedef struct TY39221 TY39221;
typedef NU8 TY22602[32];
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef NimStringDesc* TY150427[12];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY148135 {
NU8 Kind;
NI Ival;
NimStringDesc* Symbol;
NI Line;
NI Col;
};
struct TY148677 {
  TNimObject Sup;
NI Idx;
TY148137* Tok;
TY148673* S;
TY77281* Indentstack;
NimStringDesc* Filename;
NI Line;
NI Col;
NIM_BOOL Hastoc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY148671 {
NimStringDesc* Key;
TY148077* Value;
};
typedef NI TY26131[256];
struct TY148673 {
NI Ulevel;
NI Olevel;
TY148682* Subs;
TY148682* Refs;
TY26131 Underlinetolevel;
TY26131 Overlinetolevel;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11194 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11196 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
TY11194 Stat;
};
struct TY148139 {
  TNimObject Sup;
NCSTRING Buf;
NI Bufpos;
NI Line;
NI Col;
NI Baseindent;
NIM_BOOL Skippounds;
};
struct TY148077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY148075* Sons;
};
struct TY47538 {
NI16 Line;
NI16 Col;
int Fileindex;
};
typedef N_NIMCALL_PTR(TY148077*, TY152010) (TY148677* P_152016);
typedef NimStringDesc* TY151779[3];
typedef NI TY151784[3];
typedef NI TY8814[8];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY148137 {
  TGenericSeq Sup;
  TY148135 data[SEQ_DECL_SIZE];
};
struct TY77281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY148682 {
  TGenericSeq Sup;
  TY148671 data[SEQ_DECL_SIZE];
};
struct TY148075 {
  TGenericSeq Sup;
  TY148077* data[SEQ_DECL_SIZE];
};
struct TY39221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Rawmessage_48045)(NU8 Msg_48047, NimStringDesc* Arg_48048);
N_NIMCALL(void, Initparser_148828)(TY148677* P_148831, TY148673* Sharedstate_148832);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14404, NI Len_14405);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18712);
N_NIMCALL(TY148673*, Newsharedstate_148697)(void);
N_NIMCALL(void*, newObj)(TNimType* Typ_13910, NI Size_13911);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(void, Gettokens_148427)(NimStringDesc* Buffer_148429, NIM_BOOL Skippounds_148430, TY148137** Tokens_148432);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
N_NIMCALL(void, Rawgettok_148375)(TY148139* L_148378, TY148135* Tok_148380);
N_NIMCALL(void, Getthing_148158)(TY148139* L_148161, TY148135* Tok_148163, TY22602 S_148164);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1803, NIM_CHAR C_1804);
N_NIMCALL(void, Getindent_148355)(TY148139* L_148358, TY148135* Tok_148360);
N_NIMCALL(NI, Getindentaux_148235)(TY148139* L_148238, NI Start_148239);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_25666, NIM_CHAR C_25667);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18689);
N_NIMCALL(void, Getadornment_148201)(TY148139* L_148204, TY148135* Tok_148206);
N_NIMCALL(TY148077*, Resolvesubs_152437)(TY148677* P_152440, TY148077* N_152441);
N_NIMCALL(NI, Findsub_148983)(TY148677* P_148986, TY148077* N_148987);
N_NIMCALL(NimStringDesc*, Addnodes_148108)(TY148077* N_148110);
N_NIMCALL(void, Addnodesaux_148863)(TY148077* N_148865, NimStringDesc** Result_148867);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18789, NI Addlen_18790);
N_NIMCALL(NI, Rsonslen_148091)(TY148077* N_148093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18649, NimStringDesc* B_18650);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_24633, NimStringDesc* B_24634);
N_NIMCALL(NimStringDesc*, Getenv_39418)(NimStringDesc* Key_39420);
N_NIMCALL(TY148077*, Newrstnode_148097)(NU8 Kind_148099, NimStringDesc* S_148100);
N_NIMCALL(TY148077*, Newrstnode_148094)(NU8 Kind_148096);
N_NIMCALL(void, Rstmessage_148752)(TY148677* P_148754, NU8 Msgkind_148755, NimStringDesc* Arg_148756);
N_NIMCALL(void, Genericmessage_48154)(TY47538 Info_48156, NU8 Msg_48157, NimStringDesc* Arg_48158);
N_NIMCALL(TY47538, Tokinfo_148747)(TY148677* P_148749, TY148135* Tok_148750);
N_NIMCALL(TY47538, Newlineinfo_47712)(NimStringDesc* Filename_47714, NI Line_47715, NI Col_47716);
N_NIMCALL(TY148077*, Findref_149098)(TY148677* P_149101, NimStringDesc* Key_149102);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_148105)(TY148077* N_148107);
N_NIMCALL(void, Rstnodetorefnameaux_148909)(TY148077* N_148911, NimStringDesc** R_148913, NIM_BOOL* B_148915);
N_NIMCALL(void, Addson_148101)(TY148077* Father_148103, TY148077* Son_148104);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18842, NI Elemsize_18843);
N_NIMCALL(TY148077*, Parsedoc_151097)(TY148677* P_151100);
N_NIMCALL(TY148077*, Parsesectionwrapper_151975)(TY148677* P_151978);
N_NIMCALL(void, Parsesection_150455)(TY148677* P_150458, TY148077* Result_150459);
N_NIMCALL(NI, Currind_148761)(TY148677* P_148763);
N_NIMCALL(void, Pushind_148765)(TY148677* P_148768, NI Ind_148769);
N_NIMCALL(void, Popind_148788)(TY148677* P_148791);
N_NIMCALL(NU8, Whichsection_150805)(TY148677* P_150807);
N_NIMCALL(NIM_BOOL, Match_149720)(TY148677* P_149722, NI Start_149723, NimStringDesc* Expr_149724);
N_NIMCALL(NIM_BOOL, Allcharsinset_25909)(NimStringDesc* S_25911, TY22602 Theset_25912);
N_NIMCALL(NI, Tokenafternewline_150722)(TY148677* P_150724);
N_NIMCALL(NIM_BOOL, Prednl_150761)(TY148677* P_150763);
N_NIMCALL(NIM_BOOL, Islineblock_150750)(TY148677* P_150752);
N_NIMCALL(void, Rstmessage_148757)(TY148677* P_148759, NU8 Msgkind_148760);
N_NIMCALL(NIM_BOOL, Isdeflist_150780)(TY148677* P_150782);
N_NIMCALL(NIM_BOOL, Isoptionlist_150801)(TY148677* P_150803);
N_NIMCALL(TY148077*, Parseliteralblock_150620)(TY148677* P_150623);
N_NIMCALL(TY148077*, Parsebulletlist_151503)(TY148677* P_151506);
N_NIMCALL(TY148077*, Parselineblock_150818)(TY148677* P_150821);
N_NIMCALL(TY148077*, Parsedotdot_150616)(TY148677* P_150619);
N_NIMCALL(NimStringDesc*, Getdirective_150219)(TY148677* P_150222);
N_NIMCALL(NU8, Getdirkind_150443)(NimStringDesc* S_150445);
N_NIMCALL(NI, Binarystrsearch_46149)(NimStringDesc** X_46152, NI X_46152Len0, NimStringDesc* Y_46153);
N_NIMCALL(TY148077*, Dirinclude_152166)(TY148677* P_152169);
N_NIMCALL(TY148077*, Parsedirective_152152)(TY148677* P_152155, NU8 Flags_152156, TY152010 Contentparser_152157);
N_NIMCALL(TY148077*, Parsedirective_152018)(TY148677* P_152021, NU8 Flags_152022);
N_NIMCALL(TY148077*, Newleaf_149469)(TY148677* P_149472);
N_NIMCALL(void, Parseline_150450)(TY148677* P_150453, TY148077* Father_150454);
N_NIMCALL(void, Parseinline_150137)(TY148677* P_150140, TY148077* Father_150141);
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_149596)(TY148677* P_149598, NimStringDesc* Markup_149599);
N_NIMCALL(void, Parseuntil_150061)(TY148677* P_150064, TY148077* Father_150065, NimStringDesc* Postfix_150066, NIM_BOOL Interpretbackslash_150067);
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_149551)(TY148677* P_149553, NimStringDesc* Markup_149554);
N_NIMCALL(void, Parsebackslash_149649)(TY148677* P_149652, TY148077* Father_149653);
N_NIMCALL(TY148077*, Parsepostfix_149961)(TY148677* P_149964, TY148077* N_149965);
N_NIMCALL(void, Fixupembeddedref_149897)(TY148077* N_149899, TY148077* A_149900, TY148077* B_149901);
N_NIMCALL(void, Setref_149057)(TY148677* P_149060, NimStringDesc* Key_149061, TY148077* Value_149062);
N_NIMCALL(void, Parseurl_150018)(TY148677* P_150021, TY148077* Father_150022);
N_NIMCALL(NIM_BOOL, Isurl_150004)(TY148677* P_150006, NI I_150007);
N_NIMCALL(TY148077*, Parsefields_150503)(TY148677* P_150506);
N_NIMCALL(TY148077*, Parsefield_150460)(TY148677* P_150463);
N_NIMCALL(NIM_BOOL, Indfollows_152135)(TY148677* P_152137);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24976, NIM_BOOL Leading_24977, NIM_BOOL Trailing_24978);
N_NIMCALL(NimStringDesc*, Findfile_46090)(NimStringDesc* F_46092);
N_NIMCALL(NimStringDesc*, Getfieldvalue_148111)(TY148077* N_148113, NimStringDesc* Fieldname_148114);
N_NIMCALL(void, Internalerror_48163)(NimStringDesc* Errmsg_48165);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19771, TNimType* Typ_19772);
N_NIMCALL(NimStringDesc*, Readfile_3847)(NimStringDesc* Filename_3849);
N_NIMCALL(NI, nsuFindStr)(NimStringDesc* S_26208, NimStringDesc* Sub_26209, NI Start_26210);
N_NIMCALL(TY148077*, Dirimage_152209)(TY148677* P_152212);
N_NIMCALL(TY148077*, Dirfigure_152215)(TY148677* P_152218);
N_NIMCALL(TY148077*, Dirtitle_152221)(TY148677* P_152224);
N_NIMCALL(TY148077*, Dircontainer_152192)(TY148677* P_152195);
N_NIMCALL(TY148077*, Dircontents_152227)(TY148677* P_152230);
N_NIMCALL(TY148077*, Dirraw_152261)(TY148677* P_152264);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_24587, NimStringDesc* B_24588);
N_NIMCALL(void, Dirrawaux_152240)(TY148677* P_152243, TY148077** Result_152245, NU8 Kind_152246, TY152010 Contentparser_152247);
N_NIMCALL(TY148077*, Parsedirbody_152160)(TY148677* P_152163, TY152010 Contentparser_152164);
N_NIMCALL(TY148077*, Dircodeblock_152183)(TY148677* P_152186);
N_NIMCALL(TY148077*, Dirindex_152233)(TY148677* P_152236);
N_NIMCALL(TY148077*, Getreferencename_149474)(TY148677* P_149477, NimStringDesc* Endstr_149478);
N_NIMCALL(TY148077*, Untileol_149505)(TY148677* P_149508);
N_NIMCALL(void, Expect_149534)(TY148677* P_149537, NimStringDesc* Tok_149538);
N_NIMCALL(void, Setsub_149016)(TY148677* P_149019, NimStringDesc* Key_149020, TY148077* Value_149021);
N_NIMCALL(TY148077*, Parsecomment_150345)(TY148677* P_150348);
N_NIMCALL(TY148077*, Parseenumlist_151773)(TY148677* P_151776);
N_NIMCALL(TY148077*, Parsedefinitionlist_151674)(TY148677* P_151677);
N_NIMCALL(TY148077*, Parsetransition_151357)(TY148677* P_151360);
N_NIMCALL(TY148077*, Parseheadline_150948)(TY148677* P_150951);
N_NIMCALL(NI, Getlevel_150700)(NI* Map_150703, NI* Lvl_150705, NIM_CHAR C_150706);
N_NIMCALL(TY148077*, Parseoverline_151416)(TY148677* P_151419);
N_NIMCALL(TY148077*, Parsesimpletable_151101)(TY148677* P_151104);
N_NIMCALL(void, Getcolumns_150994)(TY148677* P_150997, TY77281** Cols_150999);
N_NIMCALL(NI, Tokend_150988)(TY148677* P_150990);
N_NIMCALL(TY148077*, Parseoptionlist_151564)(TY148677* P_151567);
N_NIMCALL(void, Parseparagraph_150878)(TY148677* P_150881, TY148077* Result_150882);
N_NIMCALL(void, Addsonifnotnil_148585)(TY148077* Father_148587, TY148077* Son_148588);
N_NIMCALL(NU8, Sonkind_151857)(TY148077* Father_151859, NI I_151860);
N_NIMCALL(NIM_BOOL, Matcheshyperlink_149218)(TY148077* H_149220, NimStringDesc* Filename_149221);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25848, NimStringDesc* Prefix_25849);
N_NIMCALL(NIM_BOOL, Eqrstnodes_149181)(TY148077* A_149183, TY148077* B_149184);
N_NIMCALL(NI, Cmpnodes_149116)(TY148077* A_149118, TY148077* B_149119);
NIM_CONST TY22602 Symchars_148130 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP150431, "", 0);
STRING_LITERAL(TMP150432, "author", 6);
STRING_LITERAL(TMP150433, "authors", 7);
STRING_LITERAL(TMP150434, "code-block", 10);
STRING_LITERAL(TMP150435, "container", 9);
STRING_LITERAL(TMP150436, "contents", 8);
STRING_LITERAL(TMP150437, "figure", 6);
STRING_LITERAL(TMP150438, "image", 5);
STRING_LITERAL(TMP150439, "include", 7);
STRING_LITERAL(TMP150440, "index", 5);
STRING_LITERAL(TMP150441, "raw", 3);
STRING_LITERAL(TMP150442, "title", 5);
NIM_CONST TY150427 Dirids_150426 = {((NimStringDesc*) &TMP150431),
((NimStringDesc*) &TMP150432),
((NimStringDesc*) &TMP150433),
((NimStringDesc*) &TMP150434),
((NimStringDesc*) &TMP150435),
((NimStringDesc*) &TMP150436),
((NimStringDesc*) &TMP150437),
((NimStringDesc*) &TMP150438),
((NimStringDesc*) &TMP150439),
((NimStringDesc*) &TMP150440),
((NimStringDesc*) &TMP150441),
((NimStringDesc*) &TMP150442)}
;
static NIM_CONST TY22602 TMP197102 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;static NIM_CONST TY22602 TMP197103 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP197104, "\012", 1);
STRING_LITERAL(TMP197105, "#", 1);
static NIM_CONST TY22602 TMP197106 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP197107, "ii", 2);
STRING_LITERAL(TMP197108, " a", 2);
STRING_LITERAL(TMP197109, "i", 1);
STRING_LITERAL(TMP197110, "ai", 2);
STRING_LITERAL(TMP197111, "::", 2);
STRING_LITERAL(TMP197112, "+", 1);
STRING_LITERAL(TMP197113, "*", 1);
STRING_LITERAL(TMP197114, "-", 1);
STRING_LITERAL(TMP197115, "|", 1);
STRING_LITERAL(TMP197116, "..", 2);
STRING_LITERAL(TMP197117, ":", 1);
STRING_LITERAL(TMP197118, "(e) ", 4);
STRING_LITERAL(TMP197119, "+a+", 3);
STRING_LITERAL(TMP197120, "-w", 2);
STRING_LITERAL(TMP197121, "--w", 3);
STRING_LITERAL(TMP197122, "/w", 2);
STRING_LITERAL(TMP197123, "//w", 3);
STRING_LITERAL(TMP197124, "e) ", 3);
STRING_LITERAL(TMP197125, "e. ", 3);
static NIM_CONST TY22602 TMP197126 = {
0x00, 0x00, 0x00, 0x00, 0x84, 0xA1, 0x00, 0x14,
0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x08,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP197127, "\\", 1);
STRING_LITERAL(TMP197128, "**", 2);
static NIM_CONST TY22602 TMP197129 = {
0x00, 0x00, 0x00, 0x00, 0x86, 0xF2, 0x00, 0xCC,
0x00, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0x20,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP197130, "``", 2);
STRING_LITERAL(TMP197131, "\\\\", 2);
STRING_LITERAL(TMP197132, " ", 1);
STRING_LITERAL(TMP197133, "`", 1);
STRING_LITERAL(TMP197134, "_", 1);
STRING_LITERAL(TMP197135, ">", 1);
STRING_LITERAL(TMP197136, "<", 1);
STRING_LITERAL(TMP197137, ":w:", 3);
STRING_LITERAL(TMP197138, "idx", 3);
STRING_LITERAL(TMP197139, "literal", 7);
STRING_LITERAL(TMP197140, "strong", 6);
STRING_LITERAL(TMP197141, "emphasis", 8);
STRING_LITERAL(TMP197142, "sub", 3);
STRING_LITERAL(TMP197143, "subscript", 9);
STRING_LITERAL(TMP197144, "sup", 3);
STRING_LITERAL(TMP197145, "supscript", 9);
STRING_LITERAL(TMP197146, "//", 2);
STRING_LITERAL(TMP197147, ".", 1);
STRING_LITERAL(TMP197148, "getFieldValue (2): ", 19);
STRING_LITERAL(TMP197149, "\001\001", 2);
STRING_LITERAL(TMP197150, "\000\001\002", 3);
STRING_LITERAL(TMP197151, "Too many binary zeros in include file", 37);
STRING_LITERAL(TMP197152, "html", 4);
STRING_LITERAL(TMP197153, "file", 4);
STRING_LITERAL(TMP197154, "latex", 5);
STRING_LITERAL(TMP197155, " _", 2);
STRING_LITERAL(TMP197156, " |", 2);
STRING_LITERAL(TMP197157, "replace", 7);
STRING_LITERAL(TMP197158, " [", 2);
STRING_LITERAL(TMP197159, "]", 1);
NIM_CONST TY151779 Wildcards_151778 = {((NimStringDesc*) &TMP197118),
((NimStringDesc*) &TMP197124),
((NimStringDesc*) &TMP197125)}
;
NIM_CONST TY151784 Wildpos_151783 = {1,
0,
0}
;
extern NIM_CONST TY151779 Wildcards_151778;
extern NIM_CONST TY151784 Wildpos_151783;
STRING_LITERAL(TMP197160, "rst.parseSection()", 18);
extern TNimType* NTI148677; /* TRstParser */
extern TNimType* NTI77281; /* seq[int] */
extern TNimType* NTI148137; /* TTokenSeq */
extern TNimType* NTI148675; /* PSharedState */
extern TNimType* NTI148682; /* seq[TSubstitution] */
extern TY11196 Gch_11214;
extern TNimType* NTI148139; /* TLexer */
extern TNimType* NTI148073; /* PRSTNode */
extern TNimType* NTI148075; /* TRstNodeSeq */
extern TNimType* NTI148008; /* TRstNodeKind */
extern TNimType* NTI39221; /* seq[string] */
N_NIMCALL(void, Initparser_148828)(TY148677* P_148831, TY148673* Sharedstate_148832) {
unsureAsgnRef((void**) &(*P_148831).Indentstack, (TY77281*) newSeq(NTI77281, 1));
(*P_148831).Indentstack->data[0] = 0;
unsureAsgnRef((void**) &(*P_148831).Tok, (TY148137*) newSeq(NTI148137, 0));
(*P_148831).Idx = 0;
unsureAsgnRef((void**) &(*P_148831).Filename, copyString(((NimStringDesc*) &TMP150431)));
(*P_148831).Hastoc = NIM_FALSE;
(*P_148831).Col = 0;
(*P_148831).Line = 1;
unsureAsgnRef((void**) &(*P_148831).S, Sharedstate_148832);
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI64)((NU64)(((NI) (Usr_11614))) - (NU64)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11214.Zct, C_12603);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3221(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3226(&(*C_13222).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(TY148673*, Newsharedstate_148697)(void) {
TY148673* Result_148699;
Result_148699 = 0;
Result_148699 = (TY148673*) newObj(NTI148675, sizeof(TY148673));
asgnRefNoCycle((void**) &(*Result_148699).Subs, (TY148682*) newSeq(NTI148682, 0));
asgnRefNoCycle((void**) &(*Result_148699).Refs, (TY148682*) newSeq(NTI148682, 0));
return Result_148699;
}
N_NIMCALL(void, Getthing_148158)(TY148139* L_148161, TY148135* Tok_148163, TY22602 S_148164) {
NI Pos_148165;
(*Tok_148163).Kind = ((NU8) 3);
(*Tok_148163).Line = (*L_148161).Line;
(*Tok_148163).Col = (*L_148161).Col;
Pos_148165 = 0;
Pos_148165 = (*L_148161).Bufpos;
while (1) {
(*Tok_148163).Symbol = addChar((*Tok_148163).Symbol, (*L_148161).Buf[Pos_148165]);
Pos_148165 += 1;
if (!!(((S_148164[((NU8)((*L_148161).Buf[Pos_148165]))/8] &(1<<(((NU8)((*L_148161).Buf[Pos_148165]))%8)))!=0))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_148161).Col += (NI64)(Pos_148165 - (*L_148161).Bufpos);
(*L_148161).Bufpos = Pos_148165;
}
N_NIMCALL(NI, Getindentaux_148235)(TY148139* L_148238, NI Start_148239) {
NI Result_148240;
NI Pos_148241;
NCSTRING Buf_148242;
NIM_BOOL LOC22;
Result_148240 = 0;
Pos_148241 = 0;
Pos_148241 = Start_148239;
Buf_148242 = 0;
Buf_148242 = (*L_148238).Buf;
if (!((NU8)(Buf_148242[Pos_148241]) == (NU8)(13))) goto LA2;
if (!((NU8)(Buf_148242[(NI64)(Pos_148241 + 1)]) == (NU8)(10))) goto LA5;
Pos_148241 += 2;
goto LA4;
LA5: ;
Pos_148241 += 1;
LA4: ;
goto LA1;
LA2: ;
if (!((NU8)(Buf_148242[Pos_148241]) == (NU8)(10))) goto LA7;
Pos_148241 += 1;
goto LA1;
LA7: ;
LA1: ;
if (!(*L_148238).Skippounds) goto LA10;
if (!((NU8)(Buf_148242[Pos_148241]) == (NU8)(35))) goto LA13;
Pos_148241 += 1;
LA13: ;
if (!((NU8)(Buf_148242[Pos_148241]) == (NU8)(35))) goto LA16;
Pos_148241 += 1;
LA16: ;
LA10: ;
while (1) {
switch (((NU8)(Buf_148242[Pos_148241]))) {
case 32:
case 11:
case 12:
Pos_148241 += 1;
Result_148240 += 1;
break;
case 9:
Pos_148241 += 1;
Result_148240 = (NI64)((NI64)(Result_148240 - (NI64)(Result_148240 % 8)) + 8);
break;
default:
goto LA18;
break;
}
} LA18: ;
if (!((NU8)(Buf_148242[Pos_148241]) == (NU8)(0))) goto LA20;
Result_148240 = 0;
goto LA19;
LA20: ;
LOC22 = ((NU8)(Buf_148242[Pos_148241]) == (NU8)(10));
if (LOC22) goto LA23;
LOC22 = ((NU8)(Buf_148242[Pos_148241]) == (NU8)(13));
LA23: ;
if (!LOC22) goto LA24;
Result_148240 = Getindentaux_148235(L_148238, Pos_148241);
goto LA19;
LA24: ;
LA19: ;
(*L_148238).Bufpos = Pos_148241;
return Result_148240;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800) {
memcpy(((NCSTRING) (&(*Dest_18799).data[((*Dest_18799).Sup.len)-0])), ((NCSTRING) ((*Src_18800).data)), ((int) ((NI64)((NI64)((*Src_18800).Sup.len + 1) * 1))));
(*Dest_18799).Sup.len += (*Src_18800).Sup.len;
}
N_NIMCALL(void, Getindent_148355)(TY148139* L_148358, TY148135* Tok_148360) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
(*L_148358).Line += 1;
(*Tok_148360).Line = (*L_148358).Line;
(*Tok_148360).Col = 0;
(*Tok_148360).Kind = ((NU8) 1);
(*Tok_148360).Ival = Getindentaux_148235(L_148358, (*L_148358).Bufpos);
(*L_148358).Col = (*Tok_148360).Ival;
(*Tok_148360).Ival = (((NI64)((*Tok_148360).Ival - (*L_148358).Baseindent) >= 0) ? (NI64)((*Tok_148360).Ival - (*L_148358).Baseindent) : 0);
LOC1 = 0;
LOC2 = 0;
LOC2 = nsuRepeatChar((*Tok_148360).Ival, 32);
LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP197104));
appendString(LOC1, LOC2);
unsureAsgnRef((void**) &(*Tok_148360).Symbol, LOC1);
}
N_NIMCALL(void, Getadornment_148201)(TY148139* L_148204, TY148135* Tok_148206) {
NI Pos_148207;
NIM_CHAR C_148208;
(*Tok_148206).Kind = ((NU8) 4);
(*Tok_148206).Line = (*L_148204).Line;
(*Tok_148206).Col = (*L_148204).Col;
Pos_148207 = 0;
Pos_148207 = (*L_148204).Bufpos;
C_148208 = 0;
C_148208 = (*L_148204).Buf[Pos_148207];
while (1) {
(*Tok_148206).Symbol = addChar((*Tok_148206).Symbol, (*L_148204).Buf[Pos_148207]);
Pos_148207 += 1;
if (!!(((NU8)((*L_148204).Buf[Pos_148207]) == (NU8)(C_148208)))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_148204).Col += (NI64)(Pos_148207 - (*L_148204).Bufpos);
(*L_148204).Bufpos = Pos_148207;
}
N_NIMCALL(void, Rawgettok_148375)(TY148139* L_148378, TY148135* Tok_148380) {
NIM_CHAR C_148381;
unsureAsgnRef((void**) &(*Tok_148380).Symbol, copyString(((NimStringDesc*) &TMP150431)));
(*Tok_148380).Ival = 0;
C_148381 = 0;
C_148381 = (*L_148378).Buf[(*L_148378).Bufpos];
switch (((NU8)(C_148381))) {
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 48 ... 57:
Getthing_148158(L_148378, Tok_148380, TMP197102);
break;
case 32:
case 9:
case 11:
case 12:
Getthing_148158(L_148378, Tok_148380, TMP197103);
(*Tok_148380).Kind = ((NU8) 2);
if (!(((NU8)((*L_148378).Buf[(*L_148378).Bufpos])) == ((NU8)(13)) || ((NU8)((*L_148378).Buf[(*L_148378).Bufpos])) == ((NU8)(10)))) goto LA2;
Rawgettok_148375(L_148378, Tok_148380);
LA2: ;
break;
case 13:
case 10:
Getindent_148355(L_148378, Tok_148380);
break;
case 33:
case 34:
case 35:
case 36:
case 37:
case 38:
case 39:
case 40:
case 41:
case 42:
case 43:
case 44:
case 45:
case 46:
case 47:
case 58:
case 59:
case 60:
case 61:
case 62:
case 63:
case 64:
case 91:
case 92:
case 93:
case 94:
case 95:
case 96:
case 123:
case 124:
case 125:
case 126:
Getadornment_148201(L_148378, Tok_148380);
if (!((*Tok_148380).Symbol->Sup.len <= 3)) goto LA5;
(*Tok_148380).Kind = ((NU8) 5);
LA5: ;
break;
default:
(*Tok_148380).Line = (*L_148378).Line;
(*Tok_148380).Col = (*L_148378).Col;
if (!((NU8)(C_148381) == (NU8)(0))) goto LA8;
(*Tok_148380).Kind = ((NU8) 0);
goto LA7;
LA8: ;
(*Tok_148380).Kind = ((NU8) 6);
(*Tok_148380).Symbol = addChar((*Tok_148380).Symbol, C_148381);
(*L_148378).Bufpos += 1;
(*L_148378).Col += 1;
LA7: ;
break;
}
(*Tok_148380).Col = (((NI64)((*Tok_148380).Col - (*L_148378).Baseindent) >= 0) ? (NI64)((*Tok_148380).Col - (*L_148378).Baseindent) : 0);
}
N_NIMCALL(void, Gettokens_148427)(NimStringDesc* Buffer_148429, NIM_BOOL Skippounds_148430, TY148137** Tokens_148432) {
TY148139 L_148433;
NI Length_148444;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
memset((void*)&L_148433, 0, sizeof(L_148433));
L_148433.Sup.m_type = NTI148139;
Length_148444 = 0;
Length_148444 = (*Tokens_148432)->Sup.len;
L_148433.Buf = Buffer_148429->data;
L_148433.Line = 1;
LOC3 = ((NU8)(L_148433.Buf[0]) == (NU8)(239));
if (!(LOC3)) goto LA4;
LOC3 = ((NU8)(L_148433.Buf[1]) == (NU8)(187));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((NU8)(L_148433.Buf[2]) == (NU8)(191));
LA5: ;
if (!LOC2) goto LA6;
L_148433.Bufpos += 3;
LA6: ;
L_148433.Skippounds = Skippounds_148430;
if (!Skippounds_148430) goto LA9;
if (!((NU8)(L_148433.Buf[L_148433.Bufpos]) == (NU8)(35))) goto LA12;
L_148433.Bufpos += 1;
LA12: ;
if (!((NU8)(L_148433.Buf[L_148433.Bufpos]) == (NU8)(35))) goto LA15;
L_148433.Bufpos += 1;
LA15: ;
L_148433.Baseindent = 0;
while (1) {
if (!((NU8)(L_148433.Buf[L_148433.Bufpos]) == (NU8)(32))) goto LA17;
L_148433.Bufpos += 1;
L_148433.Baseindent += 1;
} LA17: ;
LA9: ;
while (1) {
Length_148444 += 1;
(*Tokens_148432) = (TY148137*) setLengthSeq(&((*Tokens_148432))->Sup, sizeof(TY148135), Length_148444);
Rawgettok_148375(&L_148433, &(*Tokens_148432)->data[(NI64)(Length_148444 - 1)]);
if (!((*Tokens_148432)->data[(NI64)(Length_148444 - 1)].Kind == ((NU8) 0))) goto LA20;
goto LA18;
LA20: ;
} LA18: ;
if (!((*Tokens_148432)->data[0].Kind == ((NU8) 2))) goto LA23;
(*Tokens_148432)->data[0].Ival = (*Tokens_148432)->data[0].Symbol->Sup.len;
(*Tokens_148432)->data[0].Kind = ((NU8) 1);
LA23: ;
}
N_NIMCALL(NI, Rsonslen_148091)(TY148077* N_148093) {
NI Result_148603;
Result_148603 = 0;
Result_148603 = (*N_148093).Sons->Sup.len;
return Result_148603;
}
N_NIMCALL(void, Addnodesaux_148863)(TY148077* N_148865, NimStringDesc** Result_148867) {
NI I_148900;
NI HEX3Atmp_148901;
NI LOC4;
NI Res_148903;
if (!((*N_148865).Kind == ((NU8) 62))) goto LA2;
(*Result_148867) = resizeString((*Result_148867), (*N_148865).Text->Sup.len + 0);
appendString((*Result_148867), (*N_148865).Text);
goto LA1;
LA2: ;
I_148900 = 0;
HEX3Atmp_148901 = 0;
LOC4 = Rsonslen_148091(N_148865);
HEX3Atmp_148901 = (NI64)(LOC4 - 1);
Res_148903 = 0;
Res_148903 = 0;
while (1) {
if (!(Res_148903 <= HEX3Atmp_148901)) goto LA5;
I_148900 = Res_148903;
Addnodesaux_148863((*N_148865).Sons->data[I_148900], Result_148867);
Res_148903 += 1;
} LA5: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Addnodes_148108)(TY148077* N_148110) {
NimStringDesc* Result_148907;
Result_148907 = 0;
Result_148907 = copyString(((NimStringDesc*) &TMP150431));
Addnodesaux_148863(N_148110, &Result_148907);
return Result_148907;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18649, NimStringDesc* B_18650) {
NIM_BOOL Result_18651;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
Result_18651 = 0;
if (!(A_18649 == B_18650)) goto LA2;
Result_18651 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18649 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18650 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18651 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18649).Sup.len == (*B_18650).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18649).data)), ((NCSTRING) ((*B_18650).data)), ((int) ((NI64)((*A_18649).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18651 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18651;
}
N_NIMCALL(NI, Findsub_148983)(TY148677* P_148986, TY148077* N_148987) {
NI Result_148988;
NimStringDesc* Key_148989;
NI I_148998;
NI HEX3Atmp_149010;
NI Res_149012;
NI I_149007;
NI HEX3Atmp_149013;
NI Res_149015;
NI LOC7;
Result_148988 = 0;
Key_148989 = 0;
Key_148989 = Addnodes_148108(N_148987);
I_148998 = 0;
HEX3Atmp_149010 = 0;
HEX3Atmp_149010 = ((*(*P_148986).S).Subs->Sup.len-1);
Res_149012 = 0;
Res_149012 = 0;
while (1) {
if (!(Res_149012 <= HEX3Atmp_149010)) goto LA1;
I_148998 = Res_149012;
if (!eqStrings(Key_148989, (*(*P_148986).S).Subs->data[I_148998].Key)) goto LA3;
Result_148988 = I_148998;
goto BeforeRet;
LA3: ;
Res_149012 += 1;
} LA1: ;
I_149007 = 0;
HEX3Atmp_149013 = 0;
HEX3Atmp_149013 = ((*(*P_148986).S).Subs->Sup.len-1);
Res_149015 = 0;
Res_149015 = 0;
while (1) {
if (!(Res_149015 <= HEX3Atmp_149013)) goto LA5;
I_149007 = Res_149015;
LOC7 = nsuCmpIgnoreStyle(Key_148989, (*(*P_148986).S).Subs->data[I_149007].Key);
if (!(LOC7 == 0)) goto LA8;
Result_148988 = I_149007;
goto BeforeRet;
LA8: ;
Res_149015 += 1;
} LA5: ;
Result_148988 = -1;
BeforeRet: ;
return Result_148988;
}
N_NIMCALL(TY148077*, Newrstnode_148094)(NU8 Kind_148096) {
TY148077* Result_148617;
Result_148617 = 0;
Result_148617 = (TY148077*) newObj(NTI148073, sizeof(TY148077));
asgnRefNoCycle((void**) &(*Result_148617).Sons, (TY148075*) newSeq(NTI148075, 0));
(*Result_148617).Kind = Kind_148096;
return Result_148617;
}
N_NIMCALL(TY148077*, Newrstnode_148097)(NU8 Kind_148099, NimStringDesc* S_148100) {
TY148077* Result_148653;
Result_148653 = 0;
Result_148653 = Newrstnode_148094(Kind_148099);
asgnRefNoCycle((void**) &(*Result_148653).Text, copyString(S_148100));
return Result_148653;
}
N_NIMCALL(TY47538, Tokinfo_148747)(TY148677* P_148749, TY148135* Tok_148750) {
TY47538 Result_148751;
memset((void*)&Result_148751, 0, sizeof(Result_148751));
Result_148751 = Newlineinfo_47712((*P_148749).Filename, (NI64)((*P_148749).Line + (*Tok_148750).Line), (NI64)((*P_148749).Col + (*Tok_148750).Col));
return Result_148751;
}
N_NIMCALL(void, Rstmessage_148752)(TY148677* P_148754, NU8 Msgkind_148755, NimStringDesc* Arg_148756) {
TY47538 LOC1;
LOC1 = Tokinfo_148747(P_148754, &(*P_148754).Tok->data[(*P_148754).Idx]);
Genericmessage_48154(LOC1, Msgkind_148755, Arg_148756);
}
N_NIMCALL(TY148077*, Findref_149098)(TY148677* P_149101, NimStringDesc* Key_149102) {
TY148077* Result_149103;
NI I_149112;
NI HEX3Atmp_149113;
NI Res_149115;
Result_149103 = 0;
I_149112 = 0;
HEX3Atmp_149113 = 0;
HEX3Atmp_149113 = ((*(*P_149101).S).Refs->Sup.len-1);
Res_149115 = 0;
Res_149115 = 0;
while (1) {
if (!(Res_149115 <= HEX3Atmp_149113)) goto LA1;
I_149112 = Res_149115;
if (!eqStrings(Key_149102, (*(*P_149101).S).Refs->data[I_149112].Key)) goto LA3;
Result_149103 = (*(*P_149101).S).Refs->data[I_149112].Value;
goto BeforeRet;
LA3: ;
Res_149115 += 1;
} LA1: ;
BeforeRet: ;
return Result_149103;
}
N_NIMCALL(void, Rstnodetorefnameaux_148909)(TY148077* N_148911, NimStringDesc** R_148913, NIM_BOOL* B_148915) {
NI I_148935;
NI HEX3Atmp_148970;
NI Res_148972;
NI I_148969;
NI HEX3Atmp_148973;
NI LOC20;
NI Res_148975;
if (!((*N_148911).Kind == ((NU8) 62))) goto LA2;
I_148935 = 0;
HEX3Atmp_148970 = 0;
HEX3Atmp_148970 = (NI64)((NI64)((*N_148911).Text->Sup.len + 0) - 1);
Res_148972 = 0;
Res_148972 = 0;
while (1) {
if (!(Res_148972 <= HEX3Atmp_148970)) goto LA4;
I_148935 = Res_148972;
switch (((NU8)((*N_148911).Text->data[I_148935]))) {
case 48 ... 57:
if (!(*B_148915)) goto LA6;
(*R_148913) = addChar((*R_148913), 45);
(*B_148915) = NIM_FALSE;
LA6: ;
if (!((*R_148913)->Sup.len == 0)) goto LA9;
(*R_148913) = addChar((*R_148913), 90);
LA9: ;
(*R_148913) = addChar((*R_148913), (*N_148911).Text->data[I_148935]);
break;
case 97 ... 122:
if (!(*B_148915)) goto LA12;
(*R_148913) = addChar((*R_148913), 45);
(*B_148915) = NIM_FALSE;
LA12: ;
(*R_148913) = addChar((*R_148913), (*N_148911).Text->data[I_148935]);
break;
case 65 ... 90:
if (!(*B_148915)) goto LA15;
(*R_148913) = addChar((*R_148913), 45);
(*B_148915) = NIM_FALSE;
LA15: ;
(*R_148913) = addChar((*R_148913), ((NIM_CHAR) (((NI) ((NI64)((NI64)(((NU8)((*N_148911).Text->data[I_148935])) - 65) + 97))))));
break;
default:
if (!(0 < (*R_148913)->Sup.len)) goto LA18;
(*B_148915) = NIM_TRUE;
LA18: ;
break;
}
Res_148972 += 1;
} LA4: ;
goto LA1;
LA2: ;
I_148969 = 0;
HEX3Atmp_148973 = 0;
LOC20 = Rsonslen_148091(N_148911);
HEX3Atmp_148973 = (NI64)(LOC20 - 1);
Res_148975 = 0;
Res_148975 = 0;
while (1) {
if (!(Res_148975 <= HEX3Atmp_148973)) goto LA21;
I_148969 = Res_148975;
Rstnodetorefnameaux_148909((*N_148911).Sons->data[I_148969], R_148913, B_148915);
Res_148975 += 1;
} LA21: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Rstnodetorefname_148105)(TY148077* N_148107) {
NimStringDesc* Result_148979;
NIM_BOOL B_148980;
Result_148979 = 0;
Result_148979 = copyString(((NimStringDesc*) &TMP150431));
B_148980 = 0;
B_148980 = NIM_FALSE;
Rstnodetorefnameaux_148909(N_148107, &Result_148979, &B_148980);
return Result_148979;
}
N_NIMCALL(void, Addson_148101)(TY148077* Father_148103, TY148077* Son_148104) {
(*Father_148103).Sons = (TY148075*) incrSeq(&((*Father_148103).Sons)->Sup, sizeof(TY148077*));
asgnRefNoCycle((void**) &(*Father_148103).Sons->data[(*Father_148103).Sons->Sup.len-1], Son_148104);
}
N_NIMCALL(TY148077*, Resolvesubs_152437)(TY148677* P_152440, TY148077* N_152441) {
TY148077* Result_152442;
NI X_152454;
NimStringDesc* Key_152457;
NimStringDesc* E_152458;
TY148077* Y_152459;
NimStringDesc* LOC10;
NI I_152479;
NI HEX3Atmp_152480;
NI LOC14;
NI Res_152482;
Result_152442 = 0;
Result_152442 = N_152441;
if (!(N_152441 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_152441).Kind) {
case ((NU8) 61):
X_152454 = 0;
X_152454 = Findsub_148983(P_152440, N_152441);
if (!(0 <= X_152454)) goto LA5;
Result_152442 = (*(*P_152440).S).Subs->data[X_152454].Value;
goto LA4;
LA5: ;
Key_152457 = 0;
Key_152457 = Addnodes_148108(N_152441);
E_152458 = 0;
E_152458 = Getenv_39418(Key_152457);
if (!!(((E_152458) && (E_152458)->Sup.len == 0))) goto LA8;
Result_152442 = Newrstnode_148097(((NU8) 62), E_152458);
goto LA7;
LA8: ;
Rstmessage_148752(&(*P_152440), ((NU8) 218), Key_152457);
LA7: ;
LA4: ;
break;
case ((NU8) 39):
Y_152459 = 0;
LOC10 = 0;
LOC10 = Rstnodetorefname_148105(N_152441);
Y_152459 = Findref_149098(P_152440, LOC10);
if (!!((Y_152459 == NIM_NIL))) goto LA12;
Result_152442 = Newrstnode_148094(((NU8) 38));
(*N_152441).Kind = ((NU8) 0);
Addson_148101(Result_152442, N_152441);
Addson_148101(Result_152442, Y_152459);
LA12: ;
break;
case ((NU8) 62):
break;
case ((NU8) 44):
(*P_152440).Hastoc = NIM_TRUE;
break;
default:
I_152479 = 0;
HEX3Atmp_152480 = 0;
LOC14 = Rsonslen_148091(N_152441);
HEX3Atmp_152480 = (NI64)(LOC14 - 1);
Res_152482 = 0;
Res_152482 = 0;
while (1) {
if (!(Res_152482 <= HEX3Atmp_152480)) goto LA15;
I_152479 = Res_152482;
asgnRefNoCycle((void**) &(*N_152441).Sons->data[I_152479], Resolvesubs_152437(P_152440, (*N_152441).Sons->data[I_152479]));
Res_152482 += 1;
} LA15: ;
break;
}
BeforeRet: ;
return Result_152442;
}
N_NIMCALL(NI, Currind_148761)(TY148677* P_148763) {
NI Result_148764;
Result_148764 = 0;
Result_148764 = (*P_148763).Indentstack->data[((*P_148763).Indentstack->Sup.len-1)];
return Result_148764;
}
N_NIMCALL(void, Pushind_148765)(TY148677* P_148768, NI Ind_148769) {
(*P_148768).Indentstack = (TY77281*) incrSeq(&((*P_148768).Indentstack)->Sup, sizeof(NI));
(*P_148768).Indentstack->data[(*P_148768).Indentstack->Sup.len-1] = Ind_148769;
}
N_NIMCALL(void, Popind_148788)(TY148677* P_148791) {
if (!(1 < (*P_148791).Indentstack->Sup.len)) goto LA2;
(*P_148791).Indentstack = (TY77281*) setLengthSeq(&((*P_148791).Indentstack)->Sup, sizeof(NI), (NI64)((*P_148791).Indentstack->Sup.len - 1));
LA2: ;
}
N_NIMCALL(NIM_BOOL, Match_149720)(TY148677* P_149722, NI Start_149723, NimStringDesc* Expr_149724) {
NIM_BOOL Result_149725;
NI I_149726;
NI J_149727;
NI Last_149730;
NIM_BOOL LOC2;
NIM_CHAR C_149813;
NI Length_149814;
NIM_BOOL LOC8;
NIM_BOOL LOC10;
NIM_BOOL LOC11;
Result_149725 = 0;
I_149726 = 0;
I_149726 = 0;
J_149727 = 0;
J_149727 = Start_149723;
Last_149730 = 0;
Last_149730 = (NI64)((NI64)(Expr_149724->Sup.len + 0) - 1);
while (1) {
if (!(I_149726 <= Last_149730)) goto LA1;
switch (((NU8)(Expr_149724->data[I_149726]))) {
case 119:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 3));
break;
case 32:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 2));
break;
case 105:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 1));
break;
case 112:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 5));
break;
case 97:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 4));
break;
case 111:
Result_149725 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 6));
break;
case 84:
Result_149725 = NIM_TRUE;
break;
case 69:
Result_149725 = ((7 &(1<<(((*P_149722).Tok->data[J_149727].Kind)&7)))!=0);
break;
case 101:
LOC2 = ((*P_149722).Tok->data[J_149727].Kind == ((NU8) 3));
if (LOC2) goto LA3;
LOC2 = eqStrings((*P_149722).Tok->data[J_149727].Symbol, ((NimStringDesc*) &TMP197105));
LA3: ;
Result_149725 = LOC2;
if (!Result_149725) goto LA5;
switch (((NU8)((*P_149722).Tok->data[J_149727].Symbol->data[0]))) {
case 97 ... 122:
case 65 ... 90:
Result_149725 = ((*P_149722).Tok->data[J_149727].Symbol->Sup.len == 1);
break;
case 48 ... 57:
Result_149725 = Allcharsinset_25909((*P_149722).Tok->data[J_149727].Symbol, TMP197106);
break;
default:
break;
}
LA5: ;
break;
default:
C_149813 = 0;
C_149813 = Expr_149724->data[I_149726];
Length_149814 = 0;
Length_149814 = 0;
while (1) {
LOC8 = (I_149726 <= Last_149730);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)(Expr_149724->data[I_149726]) == (NU8)(C_149813));
LA9: ;
if (!LOC8) goto LA7;
I_149726 += 1;
Length_149814 += 1;
} LA7: ;
I_149726 -= 1;
LOC11 = ((48 &(1<<(((*P_149722).Tok->data[J_149727].Kind)&7)))!=0);
if (!(LOC11)) goto LA12;
LOC11 = ((*P_149722).Tok->data[J_149727].Symbol->Sup.len == Length_149814);
LA12: ;
LOC10 = LOC11;
if (!(LOC10)) goto LA13;
LOC10 = ((NU8)((*P_149722).Tok->data[J_149727].Symbol->data[0]) == (NU8)(C_149813));
LA13: ;
Result_149725 = LOC10;
break;
}
if (!!(Result_149725)) goto LA15;
goto BeforeRet;
LA15: ;
J_149727 += 1;
I_149726 += 1;
} LA1: ;
Result_149725 = NIM_TRUE;
BeforeRet: ;
return Result_149725;
}
N_NIMCALL(NI, Tokenafternewline_150722)(TY148677* P_150724) {
NI Result_150725;
Result_150725 = 0;
Result_150725 = (*P_150724).Idx;
while (1) {
switch ((*P_150724).Tok->data[Result_150725].Kind) {
case ((NU8) 0):
goto LA1;
break;
case ((NU8) 1):
Result_150725 += 1;
goto LA1;
break;
default:
Result_150725 += 1;
break;
}
} LA1: ;
return Result_150725;
}
N_NIMCALL(NIM_BOOL, Prednl_150761)(TY148677* P_150763) {
NIM_BOOL Result_150764;
NIM_BOOL LOC4;
NI LOC6;
Result_150764 = 0;
Result_150764 = NIM_TRUE;
if (!(0 < (*P_150763).Idx)) goto LA2;
LOC4 = ((*P_150763).Tok->data[(NI64)((*P_150763).Idx - 1)].Kind == ((NU8) 1));
if (!(LOC4)) goto LA5;
LOC6 = Currind_148761(P_150763);
LOC4 = ((*P_150763).Tok->data[(NI64)((*P_150763).Idx - 1)].Ival == LOC6);
LA5: ;
Result_150764 = LOC4;
LA2: ;
return Result_150764;
}
N_NIMCALL(NIM_BOOL, Islineblock_150750)(TY148677* P_150752) {
NIM_BOOL Result_150753;
NI J_150754;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_150753 = 0;
J_150754 = 0;
J_150754 = Tokenafternewline_150722(P_150752);
LOC2 = ((*P_150752).Tok->data[(*P_150752).Idx].Col == (*P_150752).Tok->data[J_150754].Col);
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_150752).Tok->data[J_150754].Symbol, ((NimStringDesc*) &TMP197115));
LA3: ;
LOC1 = LOC2;
if (LOC1) goto LA4;
LOC1 = ((*P_150752).Tok->data[(*P_150752).Idx].Col < (*P_150752).Tok->data[J_150754].Col);
LA4: ;
Result_150753 = LOC1;
return Result_150753;
}
N_NIMCALL(void, Rstmessage_148757)(TY148677* P_148759, NU8 Msgkind_148760) {
TY47538 LOC1;
LOC1 = Tokinfo_148747(P_148759, &(*P_148759).Tok->data[(*P_148759).Idx]);
Genericmessage_48154(LOC1, Msgkind_148760, (*P_148759).Tok->data[(*P_148759).Idx].Symbol);
}
N_NIMCALL(NIM_BOOL, Isdeflist_150780)(TY148677* P_150782) {
NIM_BOOL Result_150783;
NI J_150784;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_150783 = 0;
J_150784 = 0;
J_150784 = Tokenafternewline_150722(P_150782);
LOC2 = ((*P_150782).Tok->data[(*P_150782).Idx].Col < (*P_150782).Tok->data[J_150784].Col);
if (!(LOC2)) goto LA3;
LOC2 = ((104 &(1<<(((*P_150782).Tok->data[J_150784].Kind)&7)))!=0);
LA3: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA4;
LOC1 = !(eqStrings((*P_150782).Tok->data[(NI64)(J_150784 - 2)].Symbol, ((NimStringDesc*) &TMP197111)));
LA4: ;
Result_150783 = LOC1;
return Result_150783;
}
N_NIMCALL(NIM_BOOL, Isoptionlist_150801)(TY148677* P_150803) {
NIM_BOOL Result_150804;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_150804 = 0;
LOC3 = Match_149720(P_150803, (*P_150803).Idx, ((NimStringDesc*) &TMP197120));
if (LOC3) goto LA4;
LOC3 = Match_149720(P_150803, (*P_150803).Idx, ((NimStringDesc*) &TMP197121));
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA5;
LOC2 = Match_149720(P_150803, (*P_150803).Idx, ((NimStringDesc*) &TMP197122));
LA5: ;
LOC1 = LOC2;
if (LOC1) goto LA6;
LOC1 = Match_149720(P_150803, (*P_150803).Idx, ((NimStringDesc*) &TMP197123));
LA6: ;
Result_150804 = LOC1;
return Result_150804;
}
N_NIMCALL(NU8, Whichsection_150805)(TY148677* P_150807) {
NU8 Result_150808;
NIM_BOOL LOC2;
NIM_BOOL LOC5;
NIM_BOOL LOC8;
NI LOC12;
NIM_BOOL LOC13;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NIM_BOOL LOC21;
NIM_BOOL LOC22;
NIM_BOOL LOC28;
NIM_BOOL LOC32;
NIM_BOOL LOC36;
NIM_BOOL LOC40;
NIM_BOOL LOC43;
NIM_BOOL LOC46;
NIM_BOOL LOC49;
NI LOC53;
NIM_BOOL LOC54;
NIM_BOOL LOC57;
NIM_BOOL LOC60;
Result_150808 = 0;
switch ((*P_150807).Tok->data[(*P_150807).Idx].Kind) {
case ((NU8) 4):
LOC2 = Match_149720(P_150807, (NI64)((*P_150807).Idx + 1), ((NimStringDesc*) &TMP197107));
if (!LOC2) goto LA3;
Result_150808 = ((NU8) 3);
goto LA1;
LA3: ;
LOC5 = Match_149720(P_150807, (NI64)((*P_150807).Idx + 1), ((NimStringDesc*) &TMP197108));
if (!LOC5) goto LA6;
Result_150808 = ((NU8) 29);
goto LA1;
LA6: ;
LOC8 = Match_149720(P_150807, (NI64)((*P_150807).Idx + 1), ((NimStringDesc*) &TMP197109));
if (!LOC8) goto LA9;
Result_150808 = ((NU8) 2);
goto LA1;
LA9: ;
Result_150808 = ((NU8) 62);
LA1: ;
break;
case ((NU8) 5):
LOC12 = Tokenafternewline_150722(P_150807);
LOC13 = Match_149720(P_150807, LOC12, ((NimStringDesc*) &TMP197110));
if (!LOC13) goto LA14;
Result_150808 = ((NU8) 1);
goto LA11;
LA14: ;
if (!eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197111))) goto LA16;
Result_150808 = ((NU8) 24);
goto LA11;
LA16: ;
LOC19 = Prednl_150761(P_150807);
if (!(LOC19)) goto LA20;
LOC22 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197112));
if (LOC22) goto LA23;
LOC22 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197113));
LA23: ;
LOC21 = LOC22;
if (LOC21) goto LA24;
LOC21 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197114));
LA24: ;
LOC19 = LOC21;
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA25;
LOC18 = ((*P_150807).Tok->data[(NI64)((*P_150807).Idx + 1)].Kind == ((NU8) 2));
LA25: ;
if (!LOC18) goto LA26;
Result_150808 = ((NU8) 5);
goto LA11;
LA26: ;
LOC28 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197115));
if (!(LOC28)) goto LA29;
LOC28 = Islineblock_150750(P_150807);
LA29: ;
if (!LOC28) goto LA30;
Result_150808 = ((NU8) 26);
goto LA11;
LA30: ;
LOC32 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197116));
if (!(LOC32)) goto LA33;
LOC32 = Prednl_150761(P_150807);
LA33: ;
if (!LOC32) goto LA34;
Result_150808 = ((NU8) 40);
goto LA11;
LA34: ;
LOC36 = eqStrings((*P_150807).Tok->data[(*P_150807).Idx].Symbol, ((NimStringDesc*) &TMP197117));
if (!(LOC36)) goto LA37;
LOC36 = Prednl_150761(P_150807);
LA37: ;
if (!LOC36) goto LA38;
Result_150808 = ((NU8) 13);
goto LA11;
LA38: ;
LOC40 = Match_149720(P_150807, (*P_150807).Idx, ((NimStringDesc*) &TMP197118));
if (!LOC40) goto LA41;
Result_150808 = ((NU8) 7);
goto LA11;
LA41: ;
LOC43 = Match_149720(P_150807, (*P_150807).Idx, ((NimStringDesc*) &TMP197119));
if (!LOC43) goto LA44;
Result_150808 = ((NU8) 30);
Rstmessage_148757(P_150807, ((NU8) 185));
goto LA11;
LA44: ;
LOC46 = Isdeflist_150780(P_150807);
if (!LOC46) goto LA47;
Result_150808 = ((NU8) 9);
goto LA11;
LA47: ;
LOC49 = Isoptionlist_150801(P_150807);
if (!LOC49) goto LA50;
Result_150808 = ((NU8) 17);
goto LA11;
LA50: ;
Result_150808 = ((NU8) 4);
LA11: ;
break;
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC53 = Tokenafternewline_150722(P_150807);
LOC54 = Match_149720(P_150807, LOC53, ((NimStringDesc*) &TMP197110));
if (!LOC54) goto LA55;
Result_150808 = ((NU8) 1);
goto LA52;
LA55: ;
LOC57 = Isdeflist_150780(P_150807);
if (!LOC57) goto LA58;
Result_150808 = ((NU8) 9);
goto LA52;
LA58: ;
LOC60 = Match_149720(P_150807, (*P_150807).Idx, ((NimStringDesc*) &TMP197124));
if (LOC60) goto LA61;
LOC60 = Match_149720(P_150807, (*P_150807).Idx, ((NimStringDesc*) &TMP197125));
LA61: ;
if (!LOC60) goto LA62;
Result_150808 = ((NU8) 7);
goto LA52;
LA62: ;
Result_150808 = ((NU8) 4);
LA52: ;
break;
default:
Result_150808 = ((NU8) 62);
break;
}
return Result_150808;
}
N_NIMCALL(TY148077*, Parseliteralblock_150620)(TY148677* P_150623) {
TY148077* Result_150624;
TY148077* N_150625;
NI Indent_150635;
NimStringDesc* LOC8;
Result_150624 = 0;
Result_150624 = Newrstnode_148094(((NU8) 24));
N_150625 = 0;
N_150625 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP150431));
if (!((*P_150623).Tok->data[(*P_150623).Idx].Kind == ((NU8) 1))) goto LA2;
Indent_150635 = 0;
Indent_150635 = (*P_150623).Tok->data[(*P_150623).Idx].Ival;
(*P_150623).Idx += 1;
while (1) {
switch ((*P_150623).Tok->data[(*P_150623).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_150623).Tok->data[(*P_150623).Idx].Ival < Indent_150635)) goto LA6;
goto LA4;
goto LA5;
LA6: ;
(*N_150625).Text = resizeString((*N_150625).Text, 1);
appendString((*N_150625).Text, ((NimStringDesc*) &TMP197104));
LOC8 = 0;
LOC8 = nsuRepeatChar((NI64)((*P_150623).Tok->data[(*P_150623).Idx].Ival - Indent_150635), 32);
(*N_150625).Text = resizeString((*N_150625).Text, LOC8->Sup.len + 0);
appendString((*N_150625).Text, LOC8);
(*P_150623).Idx += 1;
LA5: ;
break;
default:
(*N_150625).Text = resizeString((*N_150625).Text, (*P_150623).Tok->data[(*P_150623).Idx].Symbol->Sup.len + 0);
appendString((*N_150625).Text, (*P_150623).Tok->data[(*P_150623).Idx].Symbol);
(*P_150623).Idx += 1;
break;
}
} LA4: ;
goto LA1;
LA2: ;
while (1) {
if (!!(((3 &(1<<(((*P_150623).Tok->data[(*P_150623).Idx].Kind)&7)))!=0))) goto LA9;
(*N_150625).Text = resizeString((*N_150625).Text, (*P_150623).Tok->data[(*P_150623).Idx].Symbol->Sup.len + 0);
appendString((*N_150625).Text, (*P_150623).Tok->data[(*P_150623).Idx].Symbol);
(*P_150623).Idx += 1;
} LA9: ;
LA1: ;
Addson_148101(Result_150624, N_150625);
return Result_150624;
}
N_NIMCALL(TY148077*, Parsebulletlist_151503)(TY148677* P_151506) {
TY148077* Result_151507;
NimStringDesc* Bullet_151517;
NI Col_151518;
TY148077* Item_151531;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_151507 = 0;
Result_151507 = NIM_NIL;
if (!((*P_151506).Tok->data[(NI64)((*P_151506).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Bullet_151517 = 0;
Bullet_151517 = copyString((*P_151506).Tok->data[(*P_151506).Idx].Symbol);
Col_151518 = 0;
Col_151518 = (*P_151506).Tok->data[(*P_151506).Idx].Col;
Result_151507 = Newrstnode_148094(((NU8) 5));
Pushind_148765(P_151506, (*P_151506).Tok->data[(NI64)((*P_151506).Idx + 2)].Col);
(*P_151506).Idx += 2;
while (1) {
Item_151531 = 0;
Item_151531 = Newrstnode_148094(((NU8) 6));
Parsesection_150455(P_151506, Item_151531);
Addson_148101(Result_151507, Item_151531);
LOC8 = ((*P_151506).Tok->data[(*P_151506).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_151506).Tok->data[(*P_151506).Idx].Ival == Col_151518);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_151506).Tok->data[(NI64)((*P_151506).Idx + 1)].Symbol, Bullet_151517);
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_151506).Tok->data[(NI64)((*P_151506).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_151506).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_148788(P_151506);
LA2: ;
return Result_151507;
}
N_NIMCALL(TY148077*, Parselineblock_150818)(TY148677* P_150821) {
TY148077* Result_150822;
NI Col_150832;
TY148077* Item_150845;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_150822 = 0;
Result_150822 = NIM_NIL;
if (!((*P_150821).Tok->data[(NI64)((*P_150821).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Col_150832 = 0;
Col_150832 = (*P_150821).Tok->data[(*P_150821).Idx].Col;
Result_150822 = Newrstnode_148094(((NU8) 26));
Pushind_148765(P_150821, (*P_150821).Tok->data[(NI64)((*P_150821).Idx + 2)].Col);
(*P_150821).Idx += 2;
while (1) {
Item_150845 = 0;
Item_150845 = Newrstnode_148094(((NU8) 27));
Parsesection_150455(P_150821, Item_150845);
Addson_148101(Result_150822, Item_150845);
LOC8 = ((*P_150821).Tok->data[(*P_150821).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_150821).Tok->data[(*P_150821).Idx].Ival == Col_150832);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_150821).Tok->data[(NI64)((*P_150821).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197115));
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_150821).Tok->data[(NI64)((*P_150821).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_150821).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_148788(P_150821);
LA2: ;
return Result_150822;
}
N_NIMCALL(NimStringDesc*, Getdirective_150219)(TY148677* P_150222) {
NimStringDesc* Result_150223;
NIM_BOOL LOC2;
NI J_150242;
Result_150223 = 0;
LOC2 = ((*P_150222).Tok->data[(*P_150222).Idx].Kind == ((NU8) 2));
if (!(LOC2)) goto LA3;
LOC2 = ((*P_150222).Tok->data[(NI64)((*P_150222).Idx + 1)].Kind == ((NU8) 3));
LA3: ;
if (!LOC2) goto LA4;
J_150242 = 0;
J_150242 = (*P_150222).Idx;
(*P_150222).Idx += 1;
Result_150223 = copyString((*P_150222).Tok->data[(*P_150222).Idx].Symbol);
(*P_150222).Idx += 1;
while (1) {
if (!((120 &(1<<(((*P_150222).Tok->data[(*P_150222).Idx].Kind)&7)))!=0)) goto LA6;
if (!eqStrings((*P_150222).Tok->data[(*P_150222).Idx].Symbol, ((NimStringDesc*) &TMP197111))) goto LA8;
goto LA6;
LA8: ;
Result_150223 = resizeString(Result_150223, (*P_150222).Tok->data[(*P_150222).Idx].Symbol->Sup.len + 0);
appendString(Result_150223, (*P_150222).Tok->data[(*P_150222).Idx].Symbol);
(*P_150222).Idx += 1;
} LA6: ;
if (!((*P_150222).Tok->data[(*P_150222).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_150222).Idx += 1;
LA11: ;
if (!eqStrings((*P_150222).Tok->data[(*P_150222).Idx].Symbol, ((NimStringDesc*) &TMP197111))) goto LA14;
(*P_150222).Idx += 1;
if (!((*P_150222).Tok->data[(*P_150222).Idx].Kind == ((NU8) 2))) goto LA17;
(*P_150222).Idx += 1;
LA17: ;
goto LA13;
LA14: ;
(*P_150222).Idx = J_150242;
Result_150223 = copyString(((NimStringDesc*) &TMP150431));
LA13: ;
goto LA1;
LA4: ;
Result_150223 = copyString(((NimStringDesc*) &TMP150431));
LA1: ;
return Result_150223;
}
N_NIMCALL(NU8, Getdirkind_150443)(NimStringDesc* S_150445) {
NU8 Result_150446;
NI I_150447;
Result_150446 = 0;
I_150447 = 0;
I_150447 = Binarystrsearch_46149(Dirids_150426, 12, S_150445);
if (!(0 <= I_150447)) goto LA2;
Result_150446 = ((NU8) (I_150447));
goto LA1;
LA2: ;
Result_150446 = ((NU8) 0);
LA1: ;
return Result_150446;
}
N_NIMCALL(TY148077*, Newleaf_149469)(TY148677* P_149472) {
TY148077* Result_149473;
Result_149473 = 0;
Result_149473 = Newrstnode_148097(((NU8) 62), (*P_149472).Tok->data[(*P_149472).Idx].Symbol);
return Result_149473;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_149596)(TY148677* P_149598, NimStringDesc* Markup_149599) {
NIM_BOOL Result_149600;
NIM_CHAR D_149601;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NIM_CHAR C_149644;
Result_149600 = 0;
D_149601 = 0;
Result_149600 = eqStrings((*P_149598).Tok->data[(*P_149598).Idx].Symbol, Markup_149599);
if (!!(Result_149600)) goto LA2;
goto BeforeRet;
LA2: ;
LOC5 = ((*P_149598).Idx == 0);
if (LOC5) goto LA6;
LOC5 = ((6 &(1<<(((*P_149598).Tok->data[(NI64)((*P_149598).Idx - 1)].Kind)&7)))!=0);
LA6: ;
LOC4 = LOC5;
if (LOC4) goto LA7;
LOC4 = ((TMP197126[((NU8)((*P_149598).Tok->data[(NI64)((*P_149598).Idx - 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_149598).Tok->data[(NI64)((*P_149598).Idx - 1)].Symbol->data[0]))%8)))!=0);
LA7: ;
Result_149600 = LOC4;
if (!!(Result_149600)) goto LA9;
goto BeforeRet;
LA9: ;
Result_149600 = !(((7 &(1<<(((*P_149598).Tok->data[(NI64)((*P_149598).Idx + 1)].Kind)&7)))!=0));
if (!!(Result_149600)) goto LA12;
goto BeforeRet;
LA12: ;
if (!(0 < (*P_149598).Idx)) goto LA15;
if (!eqStrings((*P_149598).Tok->data[(NI64)((*P_149598).Idx - 1)].Symbol, ((NimStringDesc*) &TMP197127))) goto LA18;
Result_149600 = NIM_FALSE;
goto LA17;
LA18: ;
C_149644 = 0;
C_149644 = (*P_149598).Tok->data[(NI64)((*P_149598).Idx - 1)].Symbol->data[0];
switch (((NU8)(C_149644))) {
case 39:
case 34:
D_149601 = C_149644;
break;
case 40:
D_149601 = 41;
break;
case 91:
D_149601 = 93;
break;
case 123:
D_149601 = 125;
break;
case 60:
D_149601 = 62;
break;
default:
D_149601 = 0;
break;
}
if (!!(((NU8)(D_149601) == (NU8)(0)))) goto LA21;
Result_149600 = !(((NU8)((*P_149598).Tok->data[(NI64)((*P_149598).Idx + 1)].Symbol->data[0]) == (NU8)(D_149601)));
LA21: ;
LA17: ;
LA15: ;
BeforeRet: ;
return Result_149600;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_149551)(TY148677* P_149553, NimStringDesc* Markup_149554) {
NIM_BOOL Result_149555;
NIM_BOOL LOC7;
NIM_BOOL LOC16;
Result_149555 = 0;
Result_149555 = eqStrings((*P_149553).Tok->data[(*P_149553).Idx].Symbol, Markup_149554);
if (!!(Result_149555)) goto LA2;
goto BeforeRet;
LA2: ;
Result_149555 = !(((6 &(1<<(((*P_149553).Tok->data[(NI64)((*P_149553).Idx - 1)].Kind)&7)))!=0));
if (!!(Result_149555)) goto LA5;
goto BeforeRet;
LA5: ;
LOC7 = ((7 &(1<<(((*P_149553).Tok->data[(NI64)((*P_149553).Idx + 1)].Kind)&7)))!=0);
if (LOC7) goto LA8;
LOC7 = ((TMP197129[((NU8)((*P_149553).Tok->data[(NI64)((*P_149553).Idx + 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_149553).Tok->data[(NI64)((*P_149553).Idx + 1)].Symbol->data[0]))%8)))!=0);
LA8: ;
Result_149555 = LOC7;
if (!!(Result_149555)) goto LA10;
goto BeforeRet;
LA10: ;
if (!(0 < (*P_149553).Idx)) goto LA13;
LOC16 = !(eqStrings(Markup_149554, ((NimStringDesc*) &TMP197130)));
if (!(LOC16)) goto LA17;
LOC16 = eqStrings((*P_149553).Tok->data[(NI64)((*P_149553).Idx - 1)].Symbol, ((NimStringDesc*) &TMP197127));
LA17: ;
if (!LOC16) goto LA18;
Result_149555 = NIM_FALSE;
LA18: ;
LA13: ;
BeforeRet: ;
return Result_149555;
}
N_NIMCALL(void, Parsebackslash_149649)(TY148677* P_149652, TY148077* Father_149653) {
TY148077* LOC4;
TY148077* LOC10;
TY148077* LOC11;
if (!eqStrings((*P_149652).Tok->data[(*P_149652).Idx].Symbol, ((NimStringDesc*) &TMP197131))) goto LA2;
LOC4 = 0;
LOC4 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197127));
Addson_148101(Father_149653, LOC4);
(*P_149652).Idx += 1;
goto LA1;
LA2: ;
if (!eqStrings((*P_149652).Tok->data[(*P_149652).Idx].Symbol, ((NimStringDesc*) &TMP197127))) goto LA5;
(*P_149652).Idx += 1;
if (!!(((*P_149652).Tok->data[(*P_149652).Idx].Kind == ((NU8) 2)))) goto LA8;
LOC10 = 0;
LOC10 = Newleaf_149469(P_149652);
Addson_148101(Father_149653, LOC10);
LA8: ;
(*P_149652).Idx += 1;
goto LA1;
LA5: ;
LOC11 = 0;
LOC11 = Newleaf_149469(P_149652);
Addson_148101(Father_149653, LOC11);
(*P_149652).Idx += 1;
LA1: ;
}
N_NIMCALL(void, Parseuntil_150061)(TY148677* P_150064, TY148077* Father_150065, NimStringDesc* Postfix_150066, NIM_BOOL Interpretbackslash_150067) {
NIM_BOOL LOC3;
TY148077* LOC8;
TY148077* LOC9;
TY148077* LOC10;
TY148077* LOC14;
while (1) {
switch ((*P_150064).Tok->data[(*P_150064).Idx].Kind) {
case ((NU8) 5):
LOC3 = Isinlinemarkupend_149551(&(*P_150064), Postfix_150066);
if (!LOC3) goto LA4;
(*P_150064).Idx += 1;
goto LA1;
goto LA2;
LA4: ;
if (!Interpretbackslash_150067) goto LA6;
Parsebackslash_149649(P_150064, Father_150065);
goto LA2;
LA6: ;
LOC8 = 0;
LOC8 = Newleaf_149469(P_150064);
Addson_148101(Father_150065, LOC8);
(*P_150064).Idx += 1;
LA2: ;
break;
case ((NU8) 4):
case ((NU8) 3):
case ((NU8) 6):
LOC9 = 0;
LOC9 = Newleaf_149469(P_150064);
Addson_148101(Father_150065, LOC9);
(*P_150064).Idx += 1;
break;
case ((NU8) 1):
LOC10 = 0;
LOC10 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197132));
Addson_148101(Father_150065, LOC10);
(*P_150064).Idx += 1;
if (!((*P_150064).Tok->data[(*P_150064).Idx].Kind == ((NU8) 1))) goto LA12;
Rstmessage_148752(&(*P_150064), ((NU8) 183), Postfix_150066);
goto LA1;
LA12: ;
break;
case ((NU8) 2):
LOC14 = 0;
LOC14 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197132));
Addson_148101(Father_150065, LOC14);
(*P_150064).Idx += 1;
break;
default:
Rstmessage_148752(&(*P_150064), ((NU8) 183), Postfix_150066);
break;
}
} LA1: ;
}
N_NIMCALL(void, Fixupembeddedref_149897)(TY148077* N_149899, TY148077* A_149900, TY148077* B_149901) {
NI Sep_149902;
NI I_149925;
NI HEX3Atmp_149951;
NI LOC1;
NI Res_149953;
NI Incr_149932;
NI LOC6;
NIM_BOOL LOC8;
NI I_149941;
NI HEX3Atmp_149954;
NI Res_149956;
NI I_149950;
NI HEX3Atmp_149957;
NI HEX3Atmp_149958;
NI LOC12;
NI Res_149960;
Sep_149902 = 0;
Sep_149902 = -1;
I_149925 = 0;
HEX3Atmp_149951 = 0;
LOC1 = Rsonslen_148091(N_149899);
HEX3Atmp_149951 = (NI64)(LOC1 - 2);
Res_149953 = 0;
Res_149953 = HEX3Atmp_149951;
while (1) {
if (!(0 <= Res_149953)) goto LA2;
I_149925 = Res_149953;
if (!eqStrings((*(*N_149899).Sons->data[I_149925]).Text, ((NimStringDesc*) &TMP197136))) goto LA4;
Sep_149902 = I_149925;
goto LA2;
LA4: ;
Res_149953 -= 1;
} LA2: ;
Incr_149932 = 0;
LOC8 = (0 < Sep_149902);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)((*(*N_149899).Sons->data[(NI64)(Sep_149902 - 1)]).Text->data[0]) == (NU8)(32));
LA9: ;
if (!LOC8) goto LA10;
LOC6 = 2;
goto LA7;
LA10: ;
LOC6 = 1;
LA7: ;
Incr_149932 = LOC6;
I_149941 = 0;
HEX3Atmp_149954 = 0;
HEX3Atmp_149954 = (NI64)(Sep_149902 - Incr_149932);
Res_149956 = 0;
Res_149956 = 0;
while (1) {
if (!(Res_149956 <= HEX3Atmp_149954)) goto LA11;
I_149941 = Res_149956;
Addson_148101(A_149900, (*N_149899).Sons->data[I_149941]);
Res_149956 += 1;
} LA11: ;
I_149950 = 0;
HEX3Atmp_149957 = 0;
HEX3Atmp_149958 = 0;
HEX3Atmp_149957 = (NI64)(Sep_149902 + 1);
LOC12 = Rsonslen_148091(N_149899);
HEX3Atmp_149958 = (NI64)(LOC12 - 2);
Res_149960 = 0;
Res_149960 = HEX3Atmp_149957;
while (1) {
if (!(Res_149960 <= HEX3Atmp_149958)) goto LA13;
I_149950 = Res_149960;
Addson_148101(B_149901, (*N_149899).Sons->data[I_149950]);
Res_149960 += 1;
} LA13: ;
}
N_NIMCALL(void, Setref_149057)(TY148677* P_149060, NimStringDesc* Key_149061, TY148077* Value_149062) {
NI Length_149073;
NI I_149082;
NI HEX3Atmp_149095;
NI Res_149097;
Length_149073 = 0;
Length_149073 = (*(*P_149060).S).Refs->Sup.len;
I_149082 = 0;
HEX3Atmp_149095 = 0;
HEX3Atmp_149095 = (NI64)(Length_149073 - 1);
Res_149097 = 0;
Res_149097 = 0;
while (1) {
if (!(Res_149097 <= HEX3Atmp_149095)) goto LA1;
I_149082 = Res_149097;
if (!eqStrings(Key_149061, (*(*P_149060).S).Refs->data[I_149082].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_149060).S).Refs->data[I_149082].Value, Value_149062);
Rstmessage_148752(&(*P_149060), ((NU8) 217), Key_149061);
goto BeforeRet;
LA3: ;
Res_149097 += 1;
} LA1: ;
(*(*P_149060).S).Refs = (TY148682*) setLengthSeq(&((*(*P_149060).S).Refs)->Sup, sizeof(TY148671), (NI64)(Length_149073 + 1));
asgnRefNoCycle((void**) &(*(*P_149060).S).Refs->data[Length_149073].Key, copyString(Key_149061));
asgnRefNoCycle((void**) &(*(*P_149060).S).Refs->data[Length_149073].Value, Value_149062);
BeforeRet: ;
}
N_NIMCALL(TY148077*, Parsepostfix_149961)(TY148677* P_149964, TY148077* N_149965) {
TY148077* Result_149966;
NIM_BOOL LOC2;
NIM_BOOL LOC6;
TY148077* A_149979;
TY148077* B_149980;
NI LOC11;
NimStringDesc* LOC14;
NIM_BOOL LOC17;
NIM_BOOL LOC29;
NIM_BOOL LOC33;
TY148077* LOC37;
Result_149966 = 0;
Result_149966 = N_149965;
LOC2 = Isinlinemarkupend_149551(&(*P_149964), ((NimStringDesc*) &TMP197134));
if (!LOC2) goto LA3;
(*P_149964).Idx += 1;
LOC6 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx - 2)].Symbol, ((NimStringDesc*) &TMP197133));
if (!(LOC6)) goto LA7;
LOC6 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx - 3)].Symbol, ((NimStringDesc*) &TMP197135));
LA7: ;
if (!LOC6) goto LA8;
A_149979 = 0;
A_149979 = Newrstnode_148094(((NU8) 0));
B_149980 = 0;
B_149980 = Newrstnode_148094(((NU8) 0));
Fixupembeddedref_149897(N_149965, A_149979, B_149980);
LOC11 = Rsonslen_148091(A_149979);
if (!(LOC11 == 0)) goto LA12;
Result_149966 = Newrstnode_148094(((NU8) 37));
Addson_148101(Result_149966, B_149980);
goto LA10;
LA12: ;
Result_149966 = Newrstnode_148094(((NU8) 38));
Addson_148101(Result_149966, A_149979);
Addson_148101(Result_149966, B_149980);
LOC14 = 0;
LOC14 = Rstnodetorefname_148105(A_149979);
Setref_149057(P_149964, LOC14, B_149980);
LA10: ;
goto LA5;
LA8: ;
if (!((*N_149965).Kind == ((NU8) 59))) goto LA15;
(*N_149965).Kind = ((NU8) 39);
goto LA5;
LA15: ;
Result_149966 = Newrstnode_148094(((NU8) 39));
Addson_148101(Result_149966, N_149965);
LA5: ;
goto LA1;
LA3: ;
LOC17 = Match_149720(&(*P_149964), (*P_149964).Idx, ((NimStringDesc*) &TMP197137));
if (!LOC17) goto LA18;
if (!eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197138))) goto LA21;
(*N_149965).Kind = ((NU8) 56);
goto LA20;
LA21: ;
if (!eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197139))) goto LA23;
(*N_149965).Kind = ((NU8) 60);
goto LA20;
LA23: ;
if (!eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197140))) goto LA25;
(*N_149965).Kind = ((NU8) 58);
goto LA20;
LA25: ;
if (!eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197141))) goto LA27;
(*N_149965).Kind = ((NU8) 57);
goto LA20;
LA27: ;
LOC29 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197142));
if (LOC29) goto LA30;
LOC29 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197143));
LA30: ;
if (!LOC29) goto LA31;
(*N_149965).Kind = ((NU8) 54);
goto LA20;
LA31: ;
LOC33 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197144));
if (LOC33) goto LA34;
LOC33 = eqStrings((*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197145));
LA34: ;
if (!LOC33) goto LA35;
(*N_149965).Kind = ((NU8) 55);
goto LA20;
LA35: ;
Result_149966 = Newrstnode_148094(((NU8) 53));
(*N_149965).Kind = ((NU8) 0);
Addson_148101(Result_149966, N_149965);
LOC37 = 0;
LOC37 = Newrstnode_148097(((NU8) 62), (*P_149964).Tok->data[(NI64)((*P_149964).Idx + 1)].Symbol);
Addson_148101(Result_149966, LOC37);
LA20: ;
(*P_149964).Idx += 3;
goto LA1;
LA18: ;
LA1: ;
return Result_149966;
}
N_NIMCALL(NIM_BOOL, Isurl_150004)(TY148677* P_150006, NI I_150007) {
NIM_BOOL Result_150008;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_150008 = 0;
LOC3 = eqStrings((*P_150006).Tok->data[(NI64)(I_150007 + 1)].Symbol, ((NimStringDesc*) &TMP197117));
if (!(LOC3)) goto LA4;
LOC3 = eqStrings((*P_150006).Tok->data[(NI64)(I_150007 + 2)].Symbol, ((NimStringDesc*) &TMP197146));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((*P_150006).Tok->data[(NI64)(I_150007 + 3)].Kind == ((NU8) 3));
LA5: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA6;
LOC1 = eqStrings((*P_150006).Tok->data[(NI64)(I_150007 + 4)].Symbol, ((NimStringDesc*) &TMP197147));
LA6: ;
Result_150008 = LOC1;
return Result_150008;
}
N_NIMCALL(void, Parseurl_150018)(TY148677* P_150021, TY148077* Father_150022) {
NIM_BOOL LOC2;
TY148077* N_150023;
TY148077* LOC9;
TY148077* N_150048;
LOC2 = Isurl_150004(&(*P_150021), (*P_150021).Idx);
if (!LOC2) goto LA3;
N_150023 = 0;
N_150023 = Newrstnode_148094(((NU8) 37));
while (1) {
switch ((*P_150021).Tok->data[(*P_150021).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
break;
case ((NU8) 5):
if (!!(((120 &(1<<(((*P_150021).Tok->data[(NI64)((*P_150021).Idx + 1)].Kind)&7)))!=0))) goto LA7;
goto LA5;
LA7: ;
break;
default:
goto LA5;
break;
}
LOC9 = 0;
LOC9 = Newleaf_149469(P_150021);
Addson_148101(N_150023, LOC9);
(*P_150021).Idx += 1;
} LA5: ;
Addson_148101(Father_150022, N_150023);
goto LA1;
LA3: ;
N_150048 = 0;
N_150048 = Newleaf_149469(P_150021);
(*P_150021).Idx += 1;
if (!eqStrings((*P_150021).Tok->data[(*P_150021).Idx].Symbol, ((NimStringDesc*) &TMP197134))) goto LA11;
N_150048 = Parsepostfix_149961(P_150021, N_150048);
LA11: ;
Addson_148101(Father_150022, N_150048);
LA1: ;
}
N_NIMCALL(void, Parseinline_150137)(TY148677* P_150140, TY148077* Father_150141) {
NIM_BOOL LOC2;
TY148077* N_150154;
NIM_BOOL LOC5;
TY148077* N_150167;
NIM_BOOL LOC8;
TY148077* N_150180;
NIM_BOOL LOC11;
TY148077* N_150193;
NIM_BOOL LOC14;
TY148077* N_150206;
TY148077* LOC17;
switch ((*P_150140).Tok->data[(*P_150140).Idx].Kind) {
case ((NU8) 5):
LOC2 = Isinlinemarkupstart_149596(&(*P_150140), ((NimStringDesc*) &TMP197128));
if (!LOC2) goto LA3;
(*P_150140).Idx += 1;
N_150154 = 0;
N_150154 = Newrstnode_148094(((NU8) 58));
Parseuntil_150061(P_150140, N_150154, ((NimStringDesc*) &TMP197128), NIM_TRUE);
Addson_148101(Father_150141, N_150154);
goto LA1;
LA3: ;
LOC5 = Isinlinemarkupstart_149596(&(*P_150140), ((NimStringDesc*) &TMP197113));
if (!LOC5) goto LA6;
(*P_150140).Idx += 1;
N_150167 = 0;
N_150167 = Newrstnode_148094(((NU8) 57));
Parseuntil_150061(P_150140, N_150167, ((NimStringDesc*) &TMP197113), NIM_TRUE);
Addson_148101(Father_150141, N_150167);
goto LA1;
LA6: ;
LOC8 = Isinlinemarkupstart_149596(&(*P_150140), ((NimStringDesc*) &TMP197130));
if (!LOC8) goto LA9;
(*P_150140).Idx += 1;
N_150180 = 0;
N_150180 = Newrstnode_148094(((NU8) 60));
Parseuntil_150061(P_150140, N_150180, ((NimStringDesc*) &TMP197130), NIM_FALSE);
Addson_148101(Father_150141, N_150180);
goto LA1;
LA9: ;
LOC11 = Isinlinemarkupstart_149596(&(*P_150140), ((NimStringDesc*) &TMP197133));
if (!LOC11) goto LA12;
(*P_150140).Idx += 1;
N_150193 = 0;
N_150193 = Newrstnode_148094(((NU8) 59));
Parseuntil_150061(P_150140, N_150193, ((NimStringDesc*) &TMP197133), NIM_TRUE);
N_150193 = Parsepostfix_149961(P_150140, N_150193);
Addson_148101(Father_150141, N_150193);
goto LA1;
LA12: ;
LOC14 = Isinlinemarkupstart_149596(&(*P_150140), ((NimStringDesc*) &TMP197115));
if (!LOC14) goto LA15;
(*P_150140).Idx += 1;
N_150206 = 0;
N_150206 = Newrstnode_148094(((NU8) 61));
Parseuntil_150061(P_150140, N_150206, ((NimStringDesc*) &TMP197115), NIM_FALSE);
Addson_148101(Father_150141, N_150206);
goto LA1;
LA15: ;
Parsebackslash_149649(P_150140, Father_150141);
LA1: ;
break;
case ((NU8) 3):
Parseurl_150018(P_150140, Father_150141);
break;
case ((NU8) 4):
case ((NU8) 6):
case ((NU8) 2):
LOC17 = 0;
LOC17 = Newleaf_149469(P_150140);
Addson_148101(Father_150141, LOC17);
(*P_150140).Idx += 1;
break;
default:
break;
}
}
N_NIMCALL(void, Parseline_150450)(TY148677* P_150453, TY148077* Father_150454) {
while (1) {
switch ((*P_150453).Tok->data[(*P_150453).Idx].Kind) {
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
Parseinline_150137(P_150453, Father_150454);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(TY148077*, Parsefield_150460)(TY148677* P_150463) {
TY148077* Result_150464;
NI Col_150465;
TY148077* Fieldname_150478;
TY148077* Fieldbody_150479;
NI Indent_150498;
Result_150464 = 0;
Result_150464 = Newrstnode_148094(((NU8) 14));
Col_150465 = 0;
Col_150465 = (*P_150463).Tok->data[(*P_150463).Idx].Col;
(*P_150463).Idx += 1;
Fieldname_150478 = 0;
Fieldname_150478 = Newrstnode_148094(((NU8) 15));
Parseuntil_150061(P_150463, Fieldname_150478, ((NimStringDesc*) &TMP197117), NIM_FALSE);
Fieldbody_150479 = 0;
Fieldbody_150479 = Newrstnode_148094(((NU8) 16));
if (!!(((*P_150463).Tok->data[(*P_150463).Idx].Kind == ((NU8) 1)))) goto LA2;
Parseline_150450(P_150463, Fieldbody_150479);
LA2: ;
if (!((*P_150463).Tok->data[(*P_150463).Idx].Kind == ((NU8) 1))) goto LA5;
Indent_150498 = 0;
Indent_150498 = (*P_150463).Tok->data[(*P_150463).Idx].Ival;
if (!(Col_150465 < Indent_150498)) goto LA8;
Pushind_148765(P_150463, Indent_150498);
Parsesection_150455(P_150463, Fieldbody_150479);
Popind_148788(P_150463);
LA8: ;
LA5: ;
Addson_148101(Result_150464, Fieldname_150478);
Addson_148101(Result_150464, Fieldbody_150479);
return Result_150464;
}
N_NIMCALL(TY148077*, Parsefields_150503)(TY148677* P_150506) {
TY148077* Result_150507;
NIM_BOOL LOC2;
NI Col_150517;
TY148077* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC10;
Result_150507 = 0;
Result_150507 = NIM_NIL;
LOC2 = ((*P_150506).Tok->data[(*P_150506).Idx].Kind == ((NU8) 1));
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_150506).Tok->data[(NI64)((*P_150506).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197117));
LA3: ;
if (!LOC2) goto LA4;
Col_150517 = 0;
Col_150517 = (*P_150506).Tok->data[(*P_150506).Idx].Ival;
Result_150507 = Newrstnode_148094(((NU8) 13));
(*P_150506).Idx += 1;
while (1) {
LOC7 = 0;
LOC7 = Parsefield_150460(P_150506);
Addson_148101(Result_150507, LOC7);
LOC10 = ((*P_150506).Tok->data[(*P_150506).Idx].Kind == ((NU8) 1));
if (!(LOC10)) goto LA11;
LOC10 = ((*P_150506).Tok->data[(*P_150506).Idx].Ival == Col_150517);
LA11: ;
LOC9 = LOC10;
if (!(LOC9)) goto LA12;
LOC9 = eqStrings((*P_150506).Tok->data[(NI64)((*P_150506).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197117));
LA12: ;
if (!LOC9) goto LA13;
(*P_150506).Idx += 1;
goto LA8;
LA13: ;
goto LA6;
LA8: ;
} LA6: ;
LA4: ;
return Result_150507;
}
N_NIMCALL(TY148077*, Parsedirective_152018)(TY148677* P_152021, NU8 Flags_152022) {
TY148077* Result_152023;
TY148077* Args_152024;
TY148077* Options_152025;
TY148077* LOC8;
TY148077* LOC15;
NIM_BOOL LOC20;
NIM_BOOL LOC21;
Result_152023 = 0;
Result_152023 = Newrstnode_148094(((NU8) 40));
Args_152024 = 0;
Args_152024 = NIM_NIL;
Options_152025 = 0;
Options_152025 = NIM_NIL;
if (!((Flags_152022 &(1<<((((NU8) 0))&7)))!=0)) goto LA2;
Args_152024 = Newrstnode_148094(((NU8) 41));
if (!((Flags_152022 &(1<<((((NU8) 2))&7)))!=0)) goto LA5;
while (1) {
switch ((*P_152021).Tok->data[(*P_152021).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
case ((NU8) 4):
LOC8 = 0;
LOC8 = Newleaf_149469(P_152021);
Addson_148101(Args_152024, LOC8);
(*P_152021).Idx += 1;
break;
default:
goto LA7;
break;
}
} LA7: ;
goto LA4;
LA5: ;
if (!((Flags_152022 &(1<<((((NU8) 3))&7)))!=0)) goto LA9;
while (1) {
if (!((*P_152021).Tok->data[(*P_152021).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_152021).Idx += 1;
} LA11: ;
if (!((*P_152021).Tok->data[(*P_152021).Idx].Kind == ((NU8) 3))) goto LA13;
LOC15 = 0;
LOC15 = Newleaf_149469(P_152021);
Addson_148101(Args_152024, LOC15);
(*P_152021).Idx += 1;
goto LA12;
LA13: ;
Args_152024 = NIM_NIL;
LA12: ;
goto LA4;
LA9: ;
Parseline_150450(P_152021, Args_152024);
LA4: ;
LA2: ;
Addson_148101(Result_152023, Args_152024);
if (!((Flags_152022 &(1<<((((NU8) 1))&7)))!=0)) goto LA17;
LOC21 = ((*P_152021).Tok->data[(*P_152021).Idx].Kind == ((NU8) 1));
if (!(LOC21)) goto LA22;
LOC21 = (3 <= (*P_152021).Tok->data[(*P_152021).Idx].Ival);
LA22: ;
LOC20 = LOC21;
if (!(LOC20)) goto LA23;
LOC20 = eqStrings((*P_152021).Tok->data[(NI64)((*P_152021).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197117));
LA23: ;
if (!LOC20) goto LA24;
Options_152025 = Parsefields_150503(P_152021);
LA24: ;
LA17: ;
Addson_148101(Result_152023, Options_152025);
return Result_152023;
}
N_NIMCALL(NIM_BOOL, Indfollows_152135)(TY148677* P_152137) {
NIM_BOOL Result_152138;
NIM_BOOL LOC1;
NI LOC3;
Result_152138 = 0;
LOC1 = ((*P_152137).Tok->data[(*P_152137).Idx].Kind == ((NU8) 1));
if (!(LOC1)) goto LA2;
LOC3 = Currind_148761(P_152137);
LOC1 = (LOC3 < (*P_152137).Tok->data[(*P_152137).Idx].Ival);
LA2: ;
Result_152138 = LOC1;
return Result_152138;
}
N_NIMCALL(TY148077*, Parsedirective_152152)(TY148677* P_152155, NU8 Flags_152156, TY152010 Contentparser_152157) {
TY148077* Result_152158;
NIM_BOOL LOC2;
TY148077* Content_152159;
Result_152158 = 0;
Result_152158 = Parsedirective_152018(P_152155, Flags_152156);
LOC2 = !(((void*) (Contentparser_152157)) == 0);
if (!(LOC2)) goto LA3;
LOC2 = Indfollows_152135(&(*P_152155));
LA3: ;
if (!LOC2) goto LA4;
Pushind_148765(P_152155, (*P_152155).Tok->data[(*P_152155).Idx].Ival);
Content_152159 = 0;
Content_152159 = Contentparser_152157(P_152155);
Popind_148788(P_152155);
Addson_148101(Result_152158, Content_152159);
goto LA1;
LA4: ;
Addson_148101(Result_152158, NIM_NIL);
LA1: ;
return Result_152158;
}
N_NIMCALL(NimStringDesc*, Getfieldvalue_148111)(TY148077* N_148113, NimStringDesc* Fieldname_148114) {
NimStringDesc* Result_150557;
NimStringDesc* LOC7;
NI I_150594;
NI HEX3Atmp_150598;
NI LOC8;
NI Res_150600;
TY148077* F_150595;
NimStringDesc* LOC11;
NI LOC12;
Result_150557 = 0;
Result_150557 = copyString(((NimStringDesc*) &TMP150431));
if (!((*N_148113).Sons->data[1] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((*(*N_148113).Sons->data[1]).Kind == ((NU8) 13)))) goto LA5;
LOC7 = 0;
LOC7 = rawNewString(reprEnum((*(*N_148113).Sons->data[1]).Kind, NTI148008)->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP197148));
appendString(LOC7, reprEnum((*(*N_148113).Sons->data[1]).Kind, NTI148008));
Internalerror_48163(LOC7);
LA5: ;
I_150594 = 0;
HEX3Atmp_150598 = 0;
LOC8 = Rsonslen_148091((*N_148113).Sons->data[1]);
HEX3Atmp_150598 = (NI64)(LOC8 - 1);
Res_150600 = 0;
Res_150600 = 0;
while (1) {
if (!(Res_150600 <= HEX3Atmp_150598)) goto LA9;
I_150594 = Res_150600;
F_150595 = 0;
F_150595 = (*(*N_148113).Sons->data[1]).Sons->data[I_150594];
LOC11 = 0;
LOC11 = Addnodes_148108((*F_150595).Sons->data[0]);
LOC12 = nsuCmpIgnoreStyle(LOC11, Fieldname_148114);
if (!(LOC12 == 0)) goto LA13;
Result_150557 = Addnodes_148108((*F_150595).Sons->data[1]);
if (!((Result_150557) && (Result_150557)->Sup.len == 0)) goto LA16;
Result_150557 = copyString(((NimStringDesc*) &TMP197149));
LA16: ;
goto BeforeRet;
LA13: ;
Res_150600 += 1;
} LA9: ;
BeforeRet: ;
return Result_150557;
}
N_NIMCALL(TY148077*, Dirinclude_152166)(TY148677* P_152169) {
TY148077* Result_152170;
TY148077* N_152172;
NimStringDesc* Filename_152173;
NimStringDesc* LOC1;
NimStringDesc* Path_152174;
NimStringDesc* LOC6;
NimStringDesc* LOC9;
TY148077* LOC10;
TY148677 Q_152175;
NimStringDesc* LOC11;
NI LOC13;
Result_152170 = 0;
Result_152170 = NIM_NIL;
N_152172 = 0;
N_152172 = Parsedirective_152152(P_152169, 7, NIM_NIL);
Filename_152173 = 0;
LOC1 = 0;
LOC1 = Addnodes_148108((*N_152172).Sons->data[0]);
Filename_152173 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Path_152174 = 0;
Path_152174 = Findfile_46090(Filename_152173);
if (!((Path_152174) && (Path_152174)->Sup.len == 0)) goto LA3;
Rstmessage_148752(&(*P_152169), ((NU8) 2), Filename_152173);
goto LA2;
LA3: ;
LOC6 = 0;
LOC6 = Getfieldvalue_148111(N_152172, ((NimStringDesc*) &TMP197139));
if (!!(((LOC6) && (LOC6)->Sup.len == 0))) goto LA7;
Result_152170 = Newrstnode_148094(((NU8) 24));
LOC9 = 0;
LOC9 = Readfile_3847(Path_152174);
LOC10 = 0;
LOC10 = Newrstnode_148097(((NU8) 62), LOC9);
Addson_148101(Result_152170, LOC10);
goto LA5;
LA7: ;
memset((void*)&Q_152175, 0, sizeof(Q_152175));
Q_152175.Sup.m_type = NTI148677;
Initparser_148828(&Q_152175, (*P_152169).S);
Q_152175.Filename = copyString(Filename_152173);
LOC11 = 0;
LOC11 = Readfile_3847(Path_152174);
Gettokens_148427(LOC11, NIM_FALSE, &Q_152175.Tok);
LOC13 = nsuFindStr(Q_152175.Tok->data[(Q_152175.Tok->Sup.len-1)].Symbol, ((NimStringDesc*) &TMP197150), 0);
if (!(0 < LOC13)) goto LA14;
Internalerror_48163(((NimStringDesc*) &TMP197151));
LA14: ;
Result_152170 = Parsedoc_151097(&Q_152175);
LA5: ;
LA2: ;
return Result_152170;
}
N_NIMCALL(TY148077*, Dirimage_152209)(TY148677* P_152212) {
TY148077* Result_152213;
Result_152213 = 0;
Result_152213 = Parsedirective_152152(P_152212, 7, NIM_NIL);
(*Result_152213).Kind = ((NU8) 45);
return Result_152213;
}
N_NIMCALL(TY148077*, Dirfigure_152215)(TY148677* P_152218) {
TY148077* Result_152219;
Result_152219 = 0;
Result_152219 = Parsedirective_152152(P_152218, 7, Parsesectionwrapper_151975);
(*Result_152219).Kind = ((NU8) 46);
return Result_152219;
}
N_NIMCALL(TY148077*, Dirtitle_152221)(TY148677* P_152224) {
TY148077* Result_152225;
Result_152225 = 0;
Result_152225 = Parsedirective_152152(P_152224, 1, NIM_NIL);
(*Result_152225).Kind = ((NU8) 43);
return Result_152225;
}
N_NIMCALL(TY148077*, Dircontainer_152192)(TY148677* P_152195) {
TY148077* Result_152196;
Result_152196 = 0;
Result_152196 = Parsedirective_152152(P_152195, 1, Parsesectionwrapper_151975);
(*Result_152196).Kind = ((NU8) 50);
return Result_152196;
}
N_NIMCALL(TY148077*, Dircontents_152227)(TY148677* P_152230) {
TY148077* Result_152231;
Result_152231 = 0;
Result_152231 = Parsedirective_152152(P_152230, 1, NIM_NIL);
(*Result_152231).Kind = ((NU8) 44);
return Result_152231;
}
N_NIMCALL(TY148077*, Parsedirbody_152160)(TY148677* P_152163, TY152010 Contentparser_152164) {
TY148077* Result_152165;
NIM_BOOL LOC2;
Result_152165 = 0;
LOC2 = Indfollows_152135(&(*P_152163));
if (!LOC2) goto LA3;
Pushind_148765(P_152163, (*P_152163).Tok->data[(*P_152163).Idx].Ival);
Result_152165 = Contentparser_152164(P_152163);
Popind_148788(P_152163);
LA3: ;
return Result_152165;
}
N_NIMCALL(void, Dirrawaux_152240)(TY148677* P_152243, TY148077** Result_152245, NU8 Kind_152246, TY152010 Contentparser_152247) {
NimStringDesc* Filename_152248;
NimStringDesc* Path_152255;
NimStringDesc* F_152260;
TY148077* LOC7;
TY148077* LOC8;
Filename_152248 = 0;
Filename_152248 = Getfieldvalue_148111((*Result_152245), ((NimStringDesc*) &TMP197153));
if (!(0 < Filename_152248->Sup.len)) goto LA2;
Path_152255 = 0;
Path_152255 = Findfile_46090(Filename_152248);
if (!(Path_152255->Sup.len == 0)) goto LA5;
Rstmessage_148752(&(*P_152243), ((NU8) 2), Filename_152248);
goto LA4;
LA5: ;
F_152260 = 0;
F_152260 = Readfile_3847(Path_152255);
unsureAsgnRef((void**) &(*Result_152245), Newrstnode_148094(Kind_152246));
LOC7 = 0;
LOC7 = Newrstnode_148097(((NU8) 62), F_152260);
Addson_148101((*Result_152245), LOC7);
LA4: ;
goto LA1;
LA2: ;
(*(*Result_152245)).Kind = Kind_152246;
LOC8 = 0;
LOC8 = Parsedirbody_152160(P_152243, Contentparser_152247);
Addson_148101((*Result_152245), LOC8);
LA1: ;
}
N_NIMCALL(TY148077*, Dirraw_152261)(TY148677* P_152264) {
TY148077* Result_152265;
NI LOC5;
NI LOC8;
Result_152265 = 0;
Result_152265 = Parsedirective_152018(P_152264, 11);
if (!!(((*Result_152265).Sons->data[0] == NIM_NIL))) goto LA2;
LOC5 = nsuCmpIgnoreCase((*(*(*Result_152265).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP197152));
if (!(LOC5 == 0)) goto LA6;
Dirrawaux_152240(P_152264, &Result_152265, ((NU8) 48), Parseliteralblock_150620);
goto LA4;
LA6: ;
LOC8 = nsuCmpIgnoreCase((*(*(*Result_152265).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP197154));
if (!(LOC8 == 0)) goto LA9;
Dirrawaux_152240(P_152264, &Result_152265, ((NU8) 49), Parseliteralblock_150620);
goto LA4;
LA9: ;
Rstmessage_148752(&(*P_152264), ((NU8) 28), (*(*Result_152265).Sons->data[0]).Text);
LA4: ;
goto LA1;
LA2: ;
Dirrawaux_152240(P_152264, &Result_152265, ((NU8) 42), Parsesectionwrapper_151975);
LA1: ;
return Result_152265;
}
N_NIMCALL(TY148077*, Dircodeblock_152183)(TY148677* P_152186) {
TY148077* Result_152187;
NimStringDesc* Filename_152189;
NimStringDesc* LOC1;
NimStringDesc* Path_152190;
TY148077* N_152191;
NimStringDesc* LOC8;
TY148077* LOC9;
Result_152187 = 0;
Result_152187 = Parsedirective_152152(P_152186, 3, Parseliteralblock_150620);
Filename_152189 = 0;
LOC1 = 0;
LOC1 = Getfieldvalue_148111(Result_152187, ((NimStringDesc*) &TMP197153));
Filename_152189 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
if (!!(((Filename_152189) && (Filename_152189)->Sup.len == 0))) goto LA3;
Path_152190 = 0;
Path_152190 = Findfile_46090(Filename_152189);
if (!((Path_152190) && (Path_152190)->Sup.len == 0)) goto LA6;
Rstmessage_148752(&(*P_152186), ((NU8) 2), Filename_152189);
LA6: ;
N_152191 = 0;
N_152191 = Newrstnode_148094(((NU8) 24));
LOC8 = 0;
LOC8 = Readfile_3847(Path_152190);
LOC9 = 0;
LOC9 = Newrstnode_148097(((NU8) 62), LOC8);
Addson_148101(N_152191, LOC9);
asgnRefNoCycle((void**) &(*Result_152187).Sons->data[2], N_152191);
LA3: ;
(*Result_152187).Kind = ((NU8) 47);
return Result_152187;
}
N_NIMCALL(TY148077*, Dirindex_152233)(TY148677* P_152236) {
TY148077* Result_152237;
Result_152237 = 0;
Result_152237 = Parsedirective_152152(P_152236, 0, Parsesectionwrapper_151975);
(*Result_152237).Kind = ((NU8) 51);
return Result_152237;
}
N_NIMCALL(TY148077*, Getreferencename_149474)(TY148677* P_149477, NimStringDesc* Endstr_149478) {
TY148077* Result_149479;
TY148077* Res_149480;
TY148077* LOC2;
TY148077* LOC6;
Result_149479 = 0;
Res_149480 = 0;
Res_149480 = Newrstnode_148094(((NU8) 0));
while (1) {
switch ((*P_149477).Tok->data[(*P_149477).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC2 = 0;
LOC2 = Newleaf_149469(P_149477);
Addson_148101(Res_149480, LOC2);
break;
case ((NU8) 5):
if (!eqStrings((*P_149477).Tok->data[(*P_149477).Idx].Symbol, Endstr_149478)) goto LA4;
(*P_149477).Idx += 1;
goto LA1;
goto LA3;
LA4: ;
LOC6 = 0;
LOC6 = Newleaf_149469(P_149477);
Addson_148101(Res_149480, LOC6);
LA3: ;
break;
default:
Rstmessage_148752(&(*P_149477), ((NU8) 183), Endstr_149478);
goto LA1;
break;
}
(*P_149477).Idx += 1;
} LA1: ;
Result_149479 = Res_149480;
return Result_149479;
}
N_NIMCALL(TY148077*, Untileol_149505)(TY148677* P_149508) {
TY148077* Result_149509;
TY148077* LOC2;
Result_149509 = 0;
Result_149509 = Newrstnode_148094(((NU8) 0));
while (1) {
if (!!(((3 &(1<<(((*P_149508).Tok->data[(*P_149508).Idx].Kind)&7)))!=0))) goto LA1;
LOC2 = 0;
LOC2 = Newleaf_149469(P_149508);
Addson_148101(Result_149509, LOC2);
(*P_149508).Idx += 1;
} LA1: ;
return Result_149509;
}
N_NIMCALL(void, Expect_149534)(TY148677* P_149537, NimStringDesc* Tok_149538) {
if (!eqStrings((*P_149537).Tok->data[(*P_149537).Idx].Symbol, Tok_149538)) goto LA2;
(*P_149537).Idx += 1;
goto LA1;
LA2: ;
Rstmessage_148752(&(*P_149537), ((NU8) 183), Tok_149538);
LA1: ;
}
N_NIMCALL(void, Setsub_149016)(TY148677* P_149019, NimStringDesc* Key_149020, TY148077* Value_149021) {
NI Length_149032;
NI I_149041;
NI HEX3Atmp_149054;
NI Res_149056;
Length_149032 = 0;
Length_149032 = (*(*P_149019).S).Subs->Sup.len;
I_149041 = 0;
HEX3Atmp_149054 = 0;
HEX3Atmp_149054 = (NI64)(Length_149032 - 1);
Res_149056 = 0;
Res_149056 = 0;
while (1) {
if (!(Res_149056 <= HEX3Atmp_149054)) goto LA1;
I_149041 = Res_149056;
if (!eqStrings(Key_149020, (*(*P_149019).S).Subs->data[I_149041].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_149019).S).Subs->data[I_149041].Value, Value_149021);
goto BeforeRet;
LA3: ;
Res_149056 += 1;
} LA1: ;
(*(*P_149019).S).Subs = (TY148682*) setLengthSeq(&((*(*P_149019).S).Subs)->Sup, sizeof(TY148671), (NI64)(Length_149032 + 1));
asgnRefNoCycle((void**) &(*(*P_149019).S).Subs->data[Length_149032].Key, copyString(Key_149020));
asgnRefNoCycle((void**) &(*(*P_149019).S).Subs->data[Length_149032].Value, Value_149021);
BeforeRet: ;
}
N_NIMCALL(TY148077*, Parsecomment_150345)(TY148677* P_150348) {
TY148077* Result_150349;
NI Indent_150371;
Result_150349 = 0;
switch ((*P_150348).Tok->data[(*P_150348).Idx].Kind) {
case ((NU8) 1):
case ((NU8) 0):
if (!((*P_150348).Tok->data[(NI64)((*P_150348).Idx + 1)].Kind == ((NU8) 1))) goto LA2;
(*P_150348).Idx += 1;
goto LA1;
LA2: ;
Indent_150371 = 0;
Indent_150371 = (*P_150348).Tok->data[(*P_150348).Idx].Ival;
while (1) {
switch ((*P_150348).Tok->data[(*P_150348).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_150348).Tok->data[(*P_150348).Idx].Ival < Indent_150371)) goto LA6;
goto LA4;
LA6: ;
break;
default:
break;
}
(*P_150348).Idx += 1;
} LA4: ;
LA1: ;
break;
default:
while (1) {
if (!!(((3 &(1<<(((*P_150348).Tok->data[(*P_150348).Idx].Kind)&7)))!=0))) goto LA8;
(*P_150348).Idx += 1;
} LA8: ;
break;
}
Result_150349 = NIM_NIL;
return Result_150349;
}
N_NIMCALL(TY148077*, Parsedotdot_150616)(TY148677* P_150619) {
TY148077* Result_152289;
NI Col_152290;
NimStringDesc* D_152303;
NU8 LOC4;
NIM_BOOL LOC5;
TY148077* A_152316;
TY148077* B_152338;
NimStringDesc* LOC11;
NIM_BOOL LOC12;
TY148077* A_152351;
TY148077* B_152352;
NI LOC19;
NI LOC22;
NimStringDesc* LOC25;
NIM_BOOL LOC26;
TY148077* A_152414;
TY148077* B_152436;
NimStringDesc* LOC32;
Result_152289 = 0;
Result_152289 = NIM_NIL;
Col_152290 = 0;
Col_152290 = (*P_150619).Tok->data[(*P_150619).Idx].Col;
(*P_150619).Idx += 1;
D_152303 = 0;
D_152303 = Getdirective_150219(P_150619);
if (!!(((D_152303) && (D_152303)->Sup.len == 0))) goto LA2;
Pushind_148765(P_150619, Col_152290);
LOC4 = Getdirkind_150443(D_152303);
switch (LOC4) {
case ((NU8) 8):
Result_152289 = Dirinclude_152166(P_150619);
break;
case ((NU8) 7):
Result_152289 = Dirimage_152209(P_150619);
break;
case ((NU8) 6):
Result_152289 = Dirfigure_152215(P_150619);
break;
case ((NU8) 11):
Result_152289 = Dirtitle_152221(P_150619);
break;
case ((NU8) 4):
Result_152289 = Dircontainer_152192(P_150619);
break;
case ((NU8) 5):
Result_152289 = Dircontents_152227(P_150619);
break;
case ((NU8) 10):
Result_152289 = Dirraw_152261(P_150619);
break;
case ((NU8) 3):
Result_152289 = Dircodeblock_152183(P_150619);
break;
case ((NU8) 9):
Result_152289 = Dirindex_152233(P_150619);
break;
default:
Rstmessage_148752(&(*P_150619), ((NU8) 28), D_152303);
break;
}
Popind_148788(P_150619);
goto LA1;
LA2: ;
LOC5 = Match_149720(&(*P_150619), (*P_150619).Idx, ((NimStringDesc*) &TMP197155));
if (!LOC5) goto LA6;
(*P_150619).Idx += 2;
A_152316 = 0;
A_152316 = Getreferencename_149474(P_150619, ((NimStringDesc*) &TMP197117));
if (!((*P_150619).Tok->data[(*P_150619).Idx].Kind == ((NU8) 2))) goto LA9;
(*P_150619).Idx += 1;
LA9: ;
B_152338 = 0;
B_152338 = Untileol_149505(P_150619);
LOC11 = 0;
LOC11 = Rstnodetorefname_148105(A_152316);
Setref_149057(P_150619, LOC11, B_152338);
goto LA1;
LA6: ;
LOC12 = Match_149720(&(*P_150619), (*P_150619).Idx, ((NimStringDesc*) &TMP197156));
if (!LOC12) goto LA13;
(*P_150619).Idx += 2;
A_152351 = 0;
A_152351 = Getreferencename_149474(P_150619, ((NimStringDesc*) &TMP197115));
B_152352 = 0;
if (!((*P_150619).Tok->data[(*P_150619).Idx].Kind == ((NU8) 2))) goto LA16;
(*P_150619).Idx += 1;
LA16: ;
LOC19 = nsuCmpIgnoreStyle((*P_150619).Tok->data[(*P_150619).Idx].Symbol, ((NimStringDesc*) &TMP197157));
if (!(LOC19 == 0)) goto LA20;
(*P_150619).Idx += 1;
Expect_149534(P_150619, ((NimStringDesc*) &TMP197111));
B_152352 = Untileol_149505(P_150619);
goto LA18;
LA20: ;
LOC22 = nsuCmpIgnoreStyle((*P_150619).Tok->data[(*P_150619).Idx].Symbol, ((NimStringDesc*) &TMP150438));
if (!(LOC22 == 0)) goto LA23;
(*P_150619).Idx += 1;
B_152352 = Dirimage_152209(P_150619);
goto LA18;
LA23: ;
Rstmessage_148752(&(*P_150619), ((NU8) 28), (*P_150619).Tok->data[(*P_150619).Idx].Symbol);
LA18: ;
LOC25 = 0;
LOC25 = Addnodes_148108(A_152351);
Setsub_149016(P_150619, LOC25, B_152352);
goto LA1;
LA13: ;
LOC26 = Match_149720(&(*P_150619), (*P_150619).Idx, ((NimStringDesc*) &TMP197158));
if (!LOC26) goto LA27;
(*P_150619).Idx += 2;
A_152414 = 0;
A_152414 = Getreferencename_149474(P_150619, ((NimStringDesc*) &TMP197159));
if (!((*P_150619).Tok->data[(*P_150619).Idx].Kind == ((NU8) 2))) goto LA30;
(*P_150619).Idx += 1;
LA30: ;
B_152436 = 0;
B_152436 = Untileol_149505(P_150619);
LOC32 = 0;
LOC32 = Rstnodetorefname_148105(A_152414);
Setref_149057(P_150619, LOC32, B_152436);
goto LA1;
LA27: ;
Result_152289 = Parsecomment_150345(P_150619);
LA1: ;
return Result_152289;
}
N_NIMCALL(TY148077*, Parseenumlist_151773)(TY148677* P_151776) {
TY148077* Result_151777;
NI W_151788;
NIM_BOOL LOC3;
NI Col_151805;
NI J_151818;
NIM_BOOL LOC10;
TY148077* Item_151821;
NIM_BOOL LOC16;
NIM_BOOL LOC17;
Result_151777 = 0;
Result_151777 = NIM_NIL;
W_151788 = 0;
W_151788 = 0;
while (1) {
if (!(W_151788 <= 2)) goto LA1;
LOC3 = Match_149720(&(*P_151776), (*P_151776).Idx, Wildcards_151778[(W_151788)-0]);
if (!LOC3) goto LA4;
goto LA1;
LA4: ;
W_151788 += 1;
} LA1: ;
if (!(W_151788 <= 2)) goto LA7;
Col_151805 = 0;
Col_151805 = (*P_151776).Tok->data[(*P_151776).Idx].Col;
Result_151777 = Newrstnode_148094(((NU8) 7));
(*P_151776).Idx += (NI64)(Wildpos_151783[(W_151788)-0] + 3);
J_151818 = 0;
J_151818 = Tokenafternewline_150722(&(*P_151776));
LOC10 = ((*P_151776).Tok->data[J_151818].Col == (*P_151776).Tok->data[(*P_151776).Idx].Col);
if (LOC10) goto LA11;
LOC10 = Match_149720(&(*P_151776), J_151818, Wildcards_151778[(W_151788)-0]);
LA11: ;
if (!LOC10) goto LA12;
Pushind_148765(P_151776, (*P_151776).Tok->data[(*P_151776).Idx].Col);
while (1) {
Item_151821 = 0;
Item_151821 = Newrstnode_148094(((NU8) 8));
Parsesection_150455(P_151776, Item_151821);
Addson_148101(Result_151777, Item_151821);
LOC17 = ((*P_151776).Tok->data[(*P_151776).Idx].Kind == ((NU8) 1));
if (!(LOC17)) goto LA18;
LOC17 = ((*P_151776).Tok->data[(*P_151776).Idx].Ival == Col_151805);
LA18: ;
LOC16 = LOC17;
if (!(LOC16)) goto LA19;
LOC16 = Match_149720(&(*P_151776), (NI64)((*P_151776).Idx + 1), Wildcards_151778[(W_151788)-0]);
LA19: ;
if (!LOC16) goto LA20;
(*P_151776).Idx += (NI64)(Wildpos_151783[(W_151788)-0] + 4);
goto LA15;
LA20: ;
goto LA14;
LA15: ;
} LA14: ;
Popind_148788(P_151776);
goto LA9;
LA12: ;
(*P_151776).Idx -= (NI64)(Wildpos_151783[(W_151788)-0] + 3);
Result_151777 = NIM_NIL;
LA9: ;
LA7: ;
return Result_151777;
}
N_NIMCALL(TY148077*, Parsedefinitionlist_151674)(TY148677* P_151677) {
TY148077* Result_151678;
NI J_151679;
NI LOC1;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NI LOC8;
NI Col_151695;
TY148077* A_151696;
NIM_BOOL LOC14;
NIM_BOOL LOC15;
NIM_BOOL LOC16;
NI LOC18;
TY148077* B_151722;
TY148077* C_151723;
NIM_BOOL LOC24;
NI LOC28;
NIM_BOOL LOC30;
NIM_BOOL LOC31;
NIM_BOOL LOC32;
NIM_BOOL LOC33;
NI LOC41;
Result_151678 = 0;
Result_151678 = NIM_NIL;
J_151679 = 0;
LOC1 = Tokenafternewline_150722(&(*P_151677));
J_151679 = (NI64)(LOC1 - 1);
LOC5 = (1 <= J_151679);
if (!(LOC5)) goto LA6;
LOC5 = ((*P_151677).Tok->data[J_151679].Kind == ((NU8) 1));
LA6: ;
LOC4 = LOC5;
if (!(LOC4)) goto LA7;
LOC8 = Currind_148761(&(*P_151677));
LOC4 = (LOC8 < (*P_151677).Tok->data[J_151679].Ival);
LA7: ;
LOC3 = LOC4;
if (!(LOC3)) goto LA9;
LOC3 = !(eqStrings((*P_151677).Tok->data[(NI64)(J_151679 - 1)].Symbol, ((NimStringDesc*) &TMP197111)));
LA9: ;
if (!LOC3) goto LA10;
Col_151695 = 0;
Col_151695 = (*P_151677).Tok->data[(*P_151677).Idx].Col;
Result_151678 = Newrstnode_148094(((NU8) 9));
while (1) {
J_151679 = (*P_151677).Idx;
A_151696 = 0;
A_151696 = Newrstnode_148094(((NU8) 11));
Parseline_150450(P_151677, A_151696);
LOC16 = ((*P_151677).Tok->data[(*P_151677).Idx].Kind == ((NU8) 1));
if (!(LOC16)) goto LA17;
LOC18 = Currind_148761(&(*P_151677));
LOC16 = (LOC18 < (*P_151677).Tok->data[(*P_151677).Idx].Ival);
LA17: ;
LOC15 = LOC16;
if (!(LOC15)) goto LA19;
LOC15 = !(eqStrings((*P_151677).Tok->data[(NI64)((*P_151677).Idx + 1)].Symbol, ((NimStringDesc*) &TMP197111)));
LA19: ;
LOC14 = LOC15;
if (!(LOC14)) goto LA20;
LOC14 = !(((3 &(1<<(((*P_151677).Tok->data[(NI64)((*P_151677).Idx + 1)].Kind)&7)))!=0));
LA20: ;
if (!LOC14) goto LA21;
Pushind_148765(P_151677, (*P_151677).Tok->data[(*P_151677).Idx].Ival);
B_151722 = 0;
B_151722 = Newrstnode_148094(((NU8) 12));
Parsesection_150455(P_151677, B_151722);
C_151723 = 0;
C_151723 = Newrstnode_148094(((NU8) 10));
Addson_148101(C_151723, A_151696);
Addson_148101(C_151723, B_151722);
Addson_148101(Result_151678, C_151723);
Popind_148788(P_151677);
goto LA13;
LA21: ;
(*P_151677).Idx = J_151679;
goto LA12;
LA13: ;
LOC24 = ((*P_151677).Tok->data[(*P_151677).Idx].Kind == ((NU8) 1));
if (!(LOC24)) goto LA25;
LOC24 = ((*P_151677).Tok->data[(*P_151677).Idx].Ival == Col_151695);
LA25: ;
if (!LOC24) goto LA26;
(*P_151677).Idx += 1;
LOC28 = Tokenafternewline_150722(&(*P_151677));
J_151679 = (NI64)(LOC28 - 1);
LOC33 = (1 <= J_151679);
if (!(LOC33)) goto LA34;
LOC33 = ((*P_151677).Tok->data[J_151679].Kind == ((NU8) 1));
LA34: ;
LOC32 = LOC33;
if (!(LOC32)) goto LA35;
LOC32 = (Col_151695 < (*P_151677).Tok->data[J_151679].Ival);
LA35: ;
LOC31 = LOC32;
if (!(LOC31)) goto LA36;
LOC31 = !(eqStrings((*P_151677).Tok->data[(NI64)(J_151679 - 1)].Symbol, ((NimStringDesc*) &TMP197111)));
LA36: ;
LOC30 = LOC31;
if (!(LOC30)) goto LA37;
LOC30 = !(((*P_151677).Tok->data[(NI64)(J_151679 + 1)].Kind == ((NU8) 1)));
LA37: ;
if (!LOC30) goto LA38;
goto LA29;
LA38: ;
goto LA12;
LA29: ;
LA26: ;
} LA12: ;
LOC41 = Rsonslen_148091(Result_151678);
if (!(LOC41 == 0)) goto LA42;
Result_151678 = NIM_NIL;
LA42: ;
LA10: ;
return Result_151678;
}
N_NIMCALL(TY148077*, Parsetransition_151357)(TY148677* P_151360) {
TY148077* Result_151361;
Result_151361 = 0;
Result_151361 = Newrstnode_148094(((NU8) 3));
(*P_151360).Idx += 1;
if (!((*P_151360).Tok->data[(*P_151360).Idx].Kind == ((NU8) 1))) goto LA2;
(*P_151360).Idx += 1;
LA2: ;
if (!((*P_151360).Tok->data[(*P_151360).Idx].Kind == ((NU8) 1))) goto LA5;
(*P_151360).Idx += 1;
LA5: ;
return Result_151361;
}
N_NIMCALL(NI, Getlevel_150700)(NI* Map_150703, NI* Lvl_150705, NIM_CHAR C_150706) {
NI Result_150707;
Result_150707 = 0;
if (!(Map_150703[(((NU8)(C_150706)))-0] == 0)) goto LA2;
(*Lvl_150705) += 1;
Map_150703[(((NU8)(C_150706)))-0] = (*Lvl_150705);
LA2: ;
Result_150707 = Map_150703[(((NU8)(C_150706)))-0];
return Result_150707;
}
N_NIMCALL(TY148077*, Parseheadline_150948)(TY148677* P_150951) {
TY148077* Result_150952;
NIM_CHAR C_150971;
Result_150952 = 0;
Result_150952 = Newrstnode_148094(((NU8) 1));
Parseline_150450(P_150951, Result_150952);
C_150971 = 0;
C_150971 = (*P_150951).Tok->data[(NI64)((*P_150951).Idx + 1)].Symbol->data[0];
(*P_150951).Idx += 2;
(*Result_150952).Level = Getlevel_150700((*(*P_150951).S).Underlinetolevel, &(*(*P_150951).S).Ulevel, C_150971);
return Result_150952;
}
N_NIMCALL(TY148077*, Parseoverline_151416)(TY148677* P_151419) {
TY148077* Result_151420;
NIM_CHAR C_151421;
NI LOC6;
TY148077* LOC9;
Result_151420 = 0;
C_151421 = 0;
C_151421 = (*P_151419).Tok->data[(*P_151419).Idx].Symbol->data[0];
(*P_151419).Idx += 2;
Result_151420 = Newrstnode_148094(((NU8) 2));
while (1) {
Parseline_150450(P_151419, Result_151420);
if (!((*P_151419).Tok->data[(*P_151419).Idx].Kind == ((NU8) 1))) goto LA3;
(*P_151419).Idx += 1;
LOC6 = Currind_148761(&(*P_151419));
if (!(LOC6 < (*P_151419).Tok->data[(NI64)((*P_151419).Idx - 1)].Ival)) goto LA7;
LOC9 = 0;
LOC9 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197132));
Addson_148101(Result_151420, LOC9);
goto LA5;
LA7: ;
goto LA1;
LA5: ;
goto LA2;
LA3: ;
goto LA1;
LA2: ;
} LA1: ;
(*Result_151420).Level = Getlevel_150700((*(*P_151419).S).Overlinetolevel, &(*(*P_151419).S).Olevel, C_151421);
if (!((*P_151419).Tok->data[(*P_151419).Idx].Kind == ((NU8) 4))) goto LA11;
(*P_151419).Idx += 1;
if (!((*P_151419).Tok->data[(*P_151419).Idx].Kind == ((NU8) 1))) goto LA14;
(*P_151419).Idx += 1;
LA14: ;
LA11: ;
return Result_151420;
}
N_NIMCALL(NI, Tokend_150988)(TY148677* P_150990) {
NI Result_150991;
Result_150991 = 0;
Result_150991 = (NI64)((NI64)((*P_150990).Tok->data[(*P_150990).Idx].Col + (*P_150990).Tok->data[(*P_150990).Idx].Symbol->Sup.len) - 1);
return Result_150991;
}
N_NIMCALL(void, Getcolumns_150994)(TY148677* P_150997, TY77281** Cols_150999) {
NI L_151000;
L_151000 = 0;
L_151000 = 0;
while (1) {
L_151000 += 1;
(*Cols_150999) = (TY77281*) setLengthSeq(&((*Cols_150999))->Sup, sizeof(NI), L_151000);
(*Cols_150999)->data[(NI64)(L_151000 - 1)] = Tokend_150988(&(*P_150997));
(*P_150997).Idx += 1;
if (!!(((*P_150997).Tok->data[(*P_150997).Idx].Kind == ((NU8) 2)))) goto LA3;
goto LA1;
LA3: ;
(*P_150997).Idx += 1;
if (!!(((*P_150997).Tok->data[(*P_150997).Idx].Kind == ((NU8) 4)))) goto LA6;
goto LA1;
LA6: ;
} LA1: ;
if (!((*P_150997).Tok->data[(*P_150997).Idx].Kind == ((NU8) 1))) goto LA9;
(*P_150997).Idx += 1;
LA9: ;
(*Cols_150999)->data[(NI64)(L_151000 - 1)] = 32000;
}
N_NIMCALL(TY148077*, Parsesimpletable_151101)(TY148677* P_151104) {
TY148077* Result_151105;
TY77281* Cols_151106;
TY39221* Row_151108;
NI I_151109;
NI Last_151110;
NI Line_151111;
NIM_CHAR C_151112;
TY148677 Q_151113;
TY148077* A_151114;
TY148077* B_151115;
NI J_151211;
NI HEX3Atmp_151345;
NI LOC11;
NI Res_151347;
NI J_151229;
NI HEX3Atmp_151348;
NI Res_151350;
NI LOC20;
NI LOC30;
NI J_151332;
NI HEX3Atmp_151351;
NI Res_151353;
NI J_151341;
NI HEX3Atmp_151354;
NI Res_151356;
TY148077* LOC38;
Result_151105 = 0;
Cols_151106 = 0;
Row_151108 = 0;
I_151109 = 0;
Last_151110 = 0;
Line_151111 = 0;
C_151112 = 0;
memset((void*)&Q_151113, 0, sizeof(Q_151113));
Q_151113.Sup.m_type = NTI148677;
A_151114 = 0;
B_151115 = 0;
Result_151105 = Newrstnode_148094(((NU8) 29));
Cols_151106 = (TY77281*) newSeq(NTI77281, 0);
Row_151108 = (TY39221*) newSeq(NTI39221, 0);
A_151114 = NIM_NIL;
C_151112 = (*P_151104).Tok->data[(*P_151104).Idx].Symbol->data[0];
while (1) {
if (!((*P_151104).Tok->data[(*P_151104).Idx].Kind == ((NU8) 4))) goto LA3;
Last_151110 = Tokenafternewline_150722(&(*P_151104));
if (!((3 &(1<<(((*P_151104).Tok->data[Last_151110].Kind)&7)))!=0)) goto LA6;
(*P_151104).Idx = Last_151110;
goto LA1;
LA6: ;
Getcolumns_150994(P_151104, &Cols_151106);
Row_151108 = (TY39221*) setLengthSeq(&(Row_151108)->Sup, sizeof(NimStringDesc*), Cols_151106->Sup.len);
if (!!((A_151114 == NIM_NIL))) goto LA9;
J_151211 = 0;
HEX3Atmp_151345 = 0;
LOC11 = Rsonslen_148091(A_151114);
HEX3Atmp_151345 = (NI64)(LOC11 - 1);
Res_151347 = 0;
Res_151347 = 0;
while (1) {
if (!(Res_151347 <= HEX3Atmp_151345)) goto LA12;
J_151211 = Res_151347;
(*(*A_151114).Sons->data[J_151211]).Kind = ((NU8) 32);
Res_151347 += 1;
} LA12: ;
LA9: ;
LA3: ;
if (!((*P_151104).Tok->data[(*P_151104).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
J_151229 = 0;
HEX3Atmp_151348 = 0;
HEX3Atmp_151348 = (Row_151108->Sup.len-1);
Res_151350 = 0;
Res_151350 = 0;
while (1) {
if (!(Res_151350 <= HEX3Atmp_151348)) goto LA16;
J_151229 = Res_151350;
asgnRefNoCycle((void**) &Row_151108->data[J_151229], copyString(((NimStringDesc*) &TMP150431)));
Res_151350 += 1;
} LA16: ;
Line_151111 = (*P_151104).Tok->data[(*P_151104).Idx].Line;
while (1) {
I_151109 = 0;
while (1) {
if (!!(((3 &(1<<(((*P_151104).Tok->data[(*P_151104).Idx].Kind)&7)))!=0))) goto LA18;
LOC20 = Tokend_150988(&(*P_151104));
if (!(LOC20 <= Cols_151106->data[I_151109])) goto LA21;
Row_151108->data[I_151109] = resizeString(Row_151108->data[I_151109], (*P_151104).Tok->data[(*P_151104).Idx].Symbol->Sup.len + 0);
appendString(Row_151108->data[I_151109], (*P_151104).Tok->data[(*P_151104).Idx].Symbol);
(*P_151104).Idx += 1;
goto LA19;
LA21: ;
if (!((*P_151104).Tok->data[(*P_151104).Idx].Kind == ((NU8) 2))) goto LA24;
(*P_151104).Idx += 1;
LA24: ;
I_151109 += 1;
LA19: ;
} LA18: ;
if (!((*P_151104).Tok->data[(*P_151104).Idx].Kind == ((NU8) 1))) goto LA27;
(*P_151104).Idx += 1;
LA27: ;
LOC30 = Tokend_150988(&(*P_151104));
if (!(LOC30 <= Cols_151106->data[0])) goto LA31;
goto LA17;
LA31: ;
if (!((17 &(1<<(((*P_151104).Tok->data[(*P_151104).Idx].Kind)&7)))!=0)) goto LA34;
goto LA17;
LA34: ;
J_151332 = 0;
HEX3Atmp_151351 = 0;
HEX3Atmp_151351 = (Row_151108->Sup.len-1);
Res_151353 = 0;
Res_151353 = 1;
while (1) {
if (!(Res_151353 <= HEX3Atmp_151351)) goto LA36;
J_151332 = Res_151353;
Row_151108->data[J_151332] = addChar(Row_151108->data[J_151332], 10);
Res_151353 += 1;
} LA36: ;
} LA17: ;
A_151114 = Newrstnode_148094(((NU8) 31));
J_151341 = 0;
HEX3Atmp_151354 = 0;
HEX3Atmp_151354 = (Row_151108->Sup.len-1);
Res_151356 = 0;
Res_151356 = 0;
while (1) {
if (!(Res_151356 <= HEX3Atmp_151354)) goto LA37;
J_151341 = Res_151356;
Initparser_148828(&Q_151113, (*P_151104).S);
Q_151113.Col = Cols_151106->data[J_151341];
Q_151113.Line = (NI64)(Line_151111 - 1);
Q_151113.Filename = copyString((*P_151104).Filename);
Gettokens_148427(Row_151108->data[J_151341], NIM_FALSE, &Q_151113.Tok);
B_151115 = Newrstnode_148094(((NU8) 33));
LOC38 = 0;
LOC38 = Parsedoc_151097(&Q_151113);
Addson_148101(B_151115, LOC38);
Addson_148101(A_151114, B_151115);
Res_151356 += 1;
} LA37: ;
Addson_148101(Result_151105, A_151114);
} LA1: ;
return Result_151105;
}
N_NIMCALL(TY148077*, Parseoptionlist_151564)(TY148677* P_151567) {
TY148077* Result_151568;
NIM_BOOL LOC3;
TY148077* A_151569;
TY148077* B_151570;
TY148077* C_151571;
NIM_BOOL LOC7;
NIM_BOOL LOC12;
TY148077* LOC16;
NI J_151635;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NI LOC22;
Result_151568 = 0;
Result_151568 = Newrstnode_148094(((NU8) 17));
while (1) {
LOC3 = Isoptionlist_150801(&(*P_151567));
if (!LOC3) goto LA4;
A_151569 = 0;
A_151569 = Newrstnode_148094(((NU8) 19));
B_151570 = 0;
B_151570 = Newrstnode_148094(((NU8) 23));
C_151571 = 0;
C_151571 = Newrstnode_148094(((NU8) 18));
LOC7 = Match_149720(&(*P_151567), (*P_151567).Idx, ((NimStringDesc*) &TMP197123));
if (!LOC7) goto LA8;
(*P_151567).Idx += 1;
LA8: ;
while (1) {
if (!!(((3 &(1<<(((*P_151567).Tok->data[(*P_151567).Idx].Kind)&7)))!=0))) goto LA10;
LOC12 = ((*P_151567).Tok->data[(*P_151567).Idx].Kind == ((NU8) 2));
if (!(LOC12)) goto LA13;
LOC12 = (1 < (*P_151567).Tok->data[(*P_151567).Idx].Symbol->Sup.len);
LA13: ;
if (!LOC12) goto LA14;
(*P_151567).Idx += 1;
goto LA10;
LA14: ;
LOC16 = 0;
LOC16 = Newleaf_149469(P_151567);
Addson_148101(A_151569, LOC16);
(*P_151567).Idx += 1;
} LA10: ;
J_151635 = 0;
J_151635 = Tokenafternewline_150722(&(*P_151567));
LOC19 = (0 < J_151635);
if (!(LOC19)) goto LA20;
LOC19 = ((*P_151567).Tok->data[(NI64)(J_151635 - 1)].Kind == ((NU8) 1));
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA21;
LOC22 = Currind_148761(&(*P_151567));
LOC18 = (LOC22 < (*P_151567).Tok->data[(NI64)(J_151635 - 1)].Ival);
LA21: ;
if (!LOC18) goto LA23;
Pushind_148765(P_151567, (*P_151567).Tok->data[(NI64)(J_151635 - 1)].Ival);
Parsesection_150455(P_151567, B_151570);
Popind_148788(P_151567);
goto LA17;
LA23: ;
Parseline_150450(P_151567, B_151570);
LA17: ;
if (!((*P_151567).Tok->data[(*P_151567).Idx].Kind == ((NU8) 1))) goto LA26;
(*P_151567).Idx += 1;
LA26: ;
Addson_148101(C_151571, A_151569);
Addson_148101(C_151571, B_151570);
Addson_148101(Result_151568, C_151571);
goto LA2;
LA4: ;
goto LA1;
LA2: ;
} LA1: ;
return Result_151568;
}
N_NIMCALL(void, Addsonifnotnil_148585)(TY148077* Father_148587, TY148077* Son_148588) {
if (!!((Son_148588 == NIM_NIL))) goto LA2;
Addson_148101(Father_148587, Son_148588);
LA2: ;
}
N_NIMCALL(void, Parseparagraph_150878)(TY148677* P_150881, TY148077* Result_150882) {
NI LOC5;
NU8 LOC8;
TY148077* LOC9;
TY148077* LOC10;
NIM_BOOL LOC12;
NIM_BOOL LOC13;
NI LOC16;
TY148077* LOC19;
TY148077* LOC20;
while (1) {
switch ((*P_150881).Tok->data[(*P_150881).Idx].Kind) {
case ((NU8) 1):
if (!((*P_150881).Tok->data[(NI64)((*P_150881).Idx + 1)].Kind == ((NU8) 1))) goto LA3;
(*P_150881).Idx += 1;
goto LA1;
goto LA2;
LA3: ;
LOC5 = Currind_148761(&(*P_150881));
if (!((*P_150881).Tok->data[(*P_150881).Idx].Ival == LOC5)) goto LA6;
(*P_150881).Idx += 1;
LOC8 = Whichsection_150805(&(*P_150881));
switch (LOC8) {
case ((NU8) 4):
case ((NU8) 62):
case ((NU8) 1):
case ((NU8) 2):
case ((NU8) 40):
LOC9 = 0;
LOC9 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197132));
Addson_148101(Result_150882, LOC9);
break;
case ((NU8) 26):
LOC10 = 0;
LOC10 = Parselineblock_150818(P_150881);
Addsonifnotnil_148585(Result_150882, LOC10);
break;
default:
goto LA1;
break;
}
goto LA2;
LA6: ;
goto LA1;
LA2: ;
break;
case ((NU8) 5):
LOC13 = eqStrings((*P_150881).Tok->data[(*P_150881).Idx].Symbol, ((NimStringDesc*) &TMP197111));
if (!(LOC13)) goto LA14;
LOC13 = ((*P_150881).Tok->data[(NI64)((*P_150881).Idx + 1)].Kind == ((NU8) 1));
LA14: ;
LOC12 = LOC13;
if (!(LOC12)) goto LA15;
LOC16 = Currind_148761(&(*P_150881));
LOC12 = (LOC16 < (*P_150881).Tok->data[(NI64)((*P_150881).Idx + 1)].Ival);
LA15: ;
if (!LOC12) goto LA17;
LOC19 = 0;
LOC19 = Newrstnode_148097(((NU8) 62), ((NimStringDesc*) &TMP197117));
Addson_148101(Result_150882, LOC19);
(*P_150881).Idx += 1;
LOC20 = 0;
LOC20 = Parseliteralblock_150620(P_150881);
Addson_148101(Result_150882, LOC20);
goto LA1;
goto LA11;
LA17: ;
Parseinline_150137(P_150881, Result_150882);
LA11: ;
break;
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
Parseinline_150137(P_150881, Result_150882);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(NU8, Sonkind_151857)(TY148077* Father_151859, NI I_151860) {
NU8 Result_151861;
NI LOC2;
Result_151861 = 0;
Result_151861 = ((NU8) 62);
LOC2 = Rsonslen_148091(Father_151859);
if (!(I_151860 < LOC2)) goto LA3;
Result_151861 = (*(*Father_151859).Sons->data[I_151860]).Kind;
LA3: ;
return Result_151861;
}
N_NIMCALL(void, Parsesection_150455)(TY148677* P_150458, TY148077* Result_150459) {
NIM_BOOL Leave_151871;
NI LOC4;
NI LOC7;
TY148077* A_151901;
TY148077* A_151911;
NU8 K_151912;
NIM_BOOL LOC17;
NIM_BOOL LOC22;
NU8 LOC23;
NU8 LOC25;
while (1) {
Leave_151871 = 0;
Leave_151871 = NIM_FALSE;
while (1) {
if (!((*P_150458).Tok->data[(*P_150458).Idx].Kind == ((NU8) 1))) goto LA2;
LOC4 = Currind_148761(&(*P_150458));
if (!(LOC4 == (*P_150458).Tok->data[(*P_150458).Idx].Ival)) goto LA5;
(*P_150458).Idx += 1;
goto LA3;
LA5: ;
LOC7 = Currind_148761(&(*P_150458));
if (!(LOC7 < (*P_150458).Tok->data[(*P_150458).Idx].Ival)) goto LA8;
Pushind_148765(P_150458, (*P_150458).Tok->data[(*P_150458).Idx].Ival);
A_151901 = 0;
A_151901 = Newrstnode_148094(((NU8) 28));
Parsesection_150455(P_150458, A_151901);
Addson_148101(Result_150459, A_151901);
Popind_148788(P_150458);
goto LA3;
LA8: ;
Leave_151871 = NIM_TRUE;
goto LA2;
LA3: ;
} LA2: ;
if (!Leave_151871) goto LA11;
goto LA1;
LA11: ;
if (!((*P_150458).Tok->data[(*P_150458).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
A_151911 = 0;
A_151911 = NIM_NIL;
K_151912 = 0;
K_151912 = Whichsection_150805(&(*P_150458));
switch (K_151912) {
case ((NU8) 24):
(*P_150458).Idx += 1;
A_151911 = Parseliteralblock_150620(P_150458);
break;
case ((NU8) 5):
A_151911 = Parsebulletlist_151503(P_150458);
break;
case ((NU8) 26):
A_151911 = Parselineblock_150818(P_150458);
break;
case ((NU8) 40):
A_151911 = Parsedotdot_150616(P_150458);
break;
case ((NU8) 7):
A_151911 = Parseenumlist_151773(P_150458);
break;
case ((NU8) 62):
Rstmessage_148757(&(*P_150458), ((NU8) 187));
break;
case ((NU8) 4):
break;
case ((NU8) 9):
A_151911 = Parsedefinitionlist_151674(P_150458);
break;
case ((NU8) 13):
(*P_150458).Idx -= 1;
A_151911 = Parsefields_150503(P_150458);
break;
case ((NU8) 3):
A_151911 = Parsetransition_151357(P_150458);
break;
case ((NU8) 1):
A_151911 = Parseheadline_150948(P_150458);
break;
case ((NU8) 2):
A_151911 = Parseoverline_151416(P_150458);
break;
case ((NU8) 29):
A_151911 = Parsesimpletable_151101(P_150458);
break;
case ((NU8) 17):
A_151911 = Parseoptionlist_151564(P_150458);
break;
default:
Internalerror_48163(((NimStringDesc*) &TMP197160));
break;
}
LOC17 = (A_151911 == NIM_NIL);
if (!(LOC17)) goto LA18;
LOC17 = !((K_151912 == ((NU8) 40)));
LA18: ;
if (!LOC17) goto LA19;
A_151911 = Newrstnode_148094(((NU8) 4));
Parseparagraph_150878(P_150458, A_151911);
LA19: ;
Addsonifnotnil_148585(Result_150459, A_151911);
} LA1: ;
LOC23 = Sonkind_151857(Result_150459, 0);
LOC22 = (LOC23 == ((NU8) 4));
if (!(LOC22)) goto LA24;
LOC25 = Sonkind_151857(Result_150459, 1);
LOC22 = !((LOC25 == ((NU8) 4)));
LA24: ;
if (!LOC22) goto LA26;
(*(*Result_150459).Sons->data[0]).Kind = ((NU8) 0);
LA26: ;
}
N_NIMCALL(TY148077*, Parsesectionwrapper_151975)(TY148677* P_151978) {
TY148077* Result_151979;
NIM_BOOL LOC2;
NI LOC4;
Result_151979 = 0;
Result_151979 = Newrstnode_148094(((NU8) 0));
Parsesection_150455(P_151978, Result_151979);
while (1) {
LOC2 = ((*Result_151979).Kind == ((NU8) 0));
if (!(LOC2)) goto LA3;
LOC4 = Rsonslen_148091(Result_151979);
LOC2 = (LOC4 == 1);
LA3: ;
if (!LOC2) goto LA1;
Result_151979 = (*Result_151979).Sons->data[0];
} LA1: ;
return Result_151979;
}
N_NIMCALL(TY148077*, Parsedoc_151097)(TY148677* P_151100) {
TY148077* Result_151995;
Result_151995 = 0;
Result_151995 = Parsesectionwrapper_151975(P_151100);
if (!!(((*P_151100).Tok->data[(*P_151100).Idx].Kind == ((NU8) 0)))) goto LA2;
Rstmessage_148757(&(*P_151100), ((NU8) 186));
LA2: ;
return Result_151995;
}
N_NIMCALL(TY148077*, Rstparse_148082)(NimStringDesc* Text_148084, NIM_BOOL Skippounds_148085, NimStringDesc* Filename_148086, NI Line_148087, NI Column_148088, NIM_BOOL* Hastoc_148090) {
TY148077* Result_152492;
TY148677 P_152493;
TY148673* LOC4;
TY148077* LOC5;
Result_152492 = 0;
memset((void*)&P_152493, 0, sizeof(P_152493));
P_152493.Sup.m_type = NTI148677;
if (!Text_148084 == 0) goto LA2;
Rawmessage_48045(((NU8) 2), Filename_148086);
LA2: ;
LOC4 = 0;
LOC4 = Newsharedstate_148697();
Initparser_148828(&P_152493, LOC4);
P_152493.Filename = copyString(Filename_148086);
P_152493.Line = Line_148087;
P_152493.Col = Column_148088;
Gettokens_148427(Text_148084, Skippounds_148085, &P_152493.Tok);
LOC5 = 0;
LOC5 = Parsedoc_151097(&P_152493);
Result_152492 = Resolvesubs_152437(&P_152493, LOC5);
(*Hastoc_148090) = P_152493.Hastoc;
return Result_152492;
}
N_NIMCALL(NIM_BOOL, Matcheshyperlink_149218)(TY148077* H_149220, NimStringDesc* Filename_149221) {
NIM_BOOL Result_149222;
NimStringDesc* S_149243;
NIM_BOOL LOC7;
Result_149222 = 0;
if (!((*H_149220).Kind == ((NU8) 0))) goto LA2;
Result_149222 = Matcheshyperlink_149218((*H_149220).Sons->data[0], Filename_149221);
goto LA1;
LA2: ;
if (!((*H_149220).Kind == ((NU8) 38))) goto LA4;
S_149243 = 0;
S_149243 = Addnodes_148108((*H_149220).Sons->data[1]);
LOC7 = nsuStartsWith(S_149243, Filename_149221);
if (!(LOC7)) goto LA8;
LOC7 = ((NU8)(S_149243->data[(NI64)(Filename_149221->Sup.len + 0)]) == (NU8)(35));
LA8: ;
if (!LOC7) goto LA9;
Result_149222 = NIM_TRUE;
goto LA6;
LA9: ;
Result_149222 = NIM_FALSE;
LA6: ;
goto LA1;
LA4: ;
Result_149222 = NIM_FALSE;
LA1: ;
return Result_149222;
}
N_NIMCALL(void, Clearindex_148126)(TY148077* Index_148128, NimStringDesc* Filename_148129) {
NI K_149252;
NI Items_149253;
NI Lastitem_149254;
TY148077* Val_149255;
NI I_149273;
NI HEX3Atmp_149398;
NI LOC1;
NI Res_149400;
NI J_149309;
NI HEX3Atmp_149395;
NI LOC9;
NI Res_149397;
NIM_BOOL LOC14;
NIM_BOOL LOC22;
NI I_149357;
NI HEX3Atmp_149401;
NI LOC25;
NI Res_149403;
K_149252 = 0;
Items_149253 = 0;
Lastitem_149254 = 0;
Val_149255 = 0;
I_149273 = 0;
HEX3Atmp_149398 = 0;
LOC1 = Rsonslen_148091(Index_148128);
HEX3Atmp_149398 = (NI64)(LOC1 - 1);
Res_149400 = 0;
Res_149400 = 0;
while (1) {
if (!(Res_149400 <= HEX3Atmp_149398)) goto LA2;
I_149273 = Res_149400;
Val_149255 = (*(*(*Index_148128).Sons->data[I_149273]).Sons->data[1]).Sons->data[0];
if (!((*Val_149255).Kind == ((NU8) 0))) goto LA4;
Val_149255 = (*Val_149255).Sons->data[0];
LA4: ;
if (!((*Val_149255).Kind == ((NU8) 5))) goto LA7;
Items_149253 = Rsonslen_148091(Val_149255);
Lastitem_149254 = -1;
J_149309 = 0;
HEX3Atmp_149395 = 0;
LOC9 = Rsonslen_148091(Val_149255);
HEX3Atmp_149395 = (NI64)(LOC9 - 1);
Res_149397 = 0;
Res_149397 = 0;
while (1) {
if (!(Res_149397 <= HEX3Atmp_149395)) goto LA10;
J_149309 = Res_149397;
if (!((*Val_149255).Sons->data[J_149309] == NIM_NIL)) goto LA12;
Items_149253 -= 1;
goto LA11;
LA12: ;
LOC14 = Matcheshyperlink_149218((*(*Val_149255).Sons->data[J_149309]).Sons->data[0], Filename_148129);
if (!LOC14) goto LA15;
asgnRefNoCycle((void**) &(*Val_149255).Sons->data[J_149309], NIM_NIL);
Items_149253 -= 1;
goto LA11;
LA15: ;
Lastitem_149254 = J_149309;
LA11: ;
Res_149397 += 1;
} LA10: ;
if (!(Items_149253 == 1)) goto LA18;
asgnRefNoCycle((void**) &(*(*(*Index_148128).Sons->data[I_149273]).Sons->data[1]).Sons->data[0], (*(*Val_149255).Sons->data[Lastitem_149254]).Sons->data[0]);
goto LA17;
LA18: ;
if (!(Items_149253 == 0)) goto LA20;
asgnRefNoCycle((void**) &(*Index_148128).Sons->data[I_149273], NIM_NIL);
goto LA17;
LA20: ;
LA17: ;
goto LA6;
LA7: ;
LOC22 = Matcheshyperlink_149218(Val_149255, Filename_148129);
if (!LOC22) goto LA23;
asgnRefNoCycle((void**) &(*Index_148128).Sons->data[I_149273], NIM_NIL);
goto LA6;
LA23: ;
LA6: ;
Res_149400 += 1;
} LA2: ;
K_149252 = 0;
I_149357 = 0;
HEX3Atmp_149401 = 0;
LOC25 = Rsonslen_148091(Index_148128);
HEX3Atmp_149401 = (NI64)(LOC25 - 1);
Res_149403 = 0;
Res_149403 = 0;
while (1) {
if (!(Res_149403 <= HEX3Atmp_149401)) goto LA26;
I_149357 = Res_149403;
if (!!(((*Index_148128).Sons->data[I_149357] == NIM_NIL))) goto LA28;
if (!!((K_149252 == I_149357))) goto LA31;
asgnRefNoCycle((void**) &(*Index_148128).Sons->data[K_149252], (*Index_148128).Sons->data[I_149357]);
LA31: ;
K_149252 += 1;
LA28: ;
Res_149403 += 1;
} LA26: ;
(*Index_148128).Sons = (TY148075*) setLengthSeq(&((*Index_148128).Sons)->Sup, sizeof(TY148077*), K_149252);
}
N_NIMCALL(TY148077*, Lastson_148654)(TY148077* N_148656) {
TY148077* Result_148657;
Result_148657 = 0;
Result_148657 = (*N_148656).Sons->data[(NI64)((*N_148656).Sons->Sup.len - 1)];
return Result_148657;
}
N_NIMCALL(NimStringDesc*, Getargument_148115)(TY148077* N_148117) {
NimStringDesc* Result_150604;
Result_150604 = 0;
if (!((*N_148117).Sons->data[0] == NIM_NIL)) goto LA2;
Result_150604 = copyString(((NimStringDesc*) &TMP150431));
goto LA1;
LA2: ;
Result_150604 = Addnodes_148108((*N_148117).Sons->data[0]);
LA1: ;
return Result_150604;
}
N_NIMCALL(NIM_BOOL, Eqrstnodes_149181)(TY148077* A_149183, TY148077* B_149184) {
NIM_BOOL Result_149185;
NI LOC8;
NI LOC9;
NI I_149214;
NI HEX3Atmp_149215;
NI LOC12;
NI Res_149217;
NIM_BOOL LOC15;
Result_149185 = 0;
if (!!(((*A_149183).Kind == (*B_149184).Kind))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((*A_149183).Kind == ((NU8) 62))) goto LA5;
Result_149185 = eqStrings((*A_149183).Text, (*B_149184).Text);
goto LA4;
LA5: ;
LOC8 = Rsonslen_148091(A_149183);
LOC9 = Rsonslen_148091(B_149184);
if (!!((LOC8 == LOC9))) goto LA10;
goto BeforeRet;
LA10: ;
I_149214 = 0;
HEX3Atmp_149215 = 0;
LOC12 = Rsonslen_148091(A_149183);
HEX3Atmp_149215 = (NI64)(LOC12 - 1);
Res_149217 = 0;
Res_149217 = 0;
while (1) {
if (!(Res_149217 <= HEX3Atmp_149215)) goto LA13;
I_149214 = Res_149217;
LOC15 = Eqrstnodes_149181((*A_149183).Sons->data[I_149214], (*B_149184).Sons->data[I_149214]);
if (!!(LOC15)) goto LA16;
goto BeforeRet;
LA16: ;
Res_149217 += 1;
} LA13: ;
Result_149185 = NIM_TRUE;
LA4: ;
BeforeRet: ;
return Result_149185;
}
N_NIMCALL(void, Setindexpair_148118)(TY148077* Index_148120, TY148077* Key_148121, TY148077* Val_148122) {
TY148077* E_149409;
TY148077* A_149410;
TY148077* B_149411;
NI I_149438;
NI HEX3Atmp_149466;
NI LOC1;
NI Res_149468;
NIM_BOOL LOC4;
E_149409 = 0;
A_149410 = 0;
B_149411 = 0;
A_149410 = Newrstnode_148094(((NU8) 11));
Addson_148101(A_149410, Key_148121);
I_149438 = 0;
HEX3Atmp_149466 = 0;
LOC1 = Rsonslen_148091(Index_148120);
HEX3Atmp_149466 = (NI64)(LOC1 - 1);
Res_149468 = 0;
Res_149468 = 0;
while (1) {
if (!(Res_149468 <= HEX3Atmp_149466)) goto LA2;
I_149438 = Res_149468;
LOC4 = Eqrstnodes_149181((*(*Index_148120).Sons->data[I_149438]).Sons->data[0], A_149410);
if (!LOC4) goto LA5;
E_149409 = (*(*(*Index_148120).Sons->data[I_149438]).Sons->data[1]).Sons->data[0];
if (!!(((*E_149409).Kind == ((NU8) 5)))) goto LA8;
E_149409 = Newrstnode_148094(((NU8) 5));
B_149411 = Newrstnode_148094(((NU8) 6));
Addson_148101(B_149411, (*(*(*Index_148120).Sons->data[I_149438]).Sons->data[1]).Sons->data[0]);
Addson_148101(E_149409, B_149411);
asgnRefNoCycle((void**) &(*(*(*Index_148120).Sons->data[I_149438]).Sons->data[1]).Sons->data[0], E_149409);
LA8: ;
B_149411 = Newrstnode_148094(((NU8) 6));
Addson_148101(B_149411, Val_148122);
Addson_148101(E_149409, B_149411);
goto BeforeRet;
LA5: ;
Res_149468 += 1;
} LA2: ;
E_149409 = Newrstnode_148094(((NU8) 10));
B_149411 = Newrstnode_148094(((NU8) 12));
Addson_148101(B_149411, Val_148122);
Addson_148101(E_149409, A_149410);
Addson_148101(E_149409, B_149411);
Addson_148101(Index_148120, E_149409);
BeforeRet: ;
}
N_NIMCALL(NI, Cmpnodes_149116)(TY148077* A_149118, TY148077* B_149119) {
NI Result_149120;
TY148077* X_149139;
TY148077* Y_149140;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
Result_149120 = 0;
X_149139 = 0;
X_149139 = (*A_149118).Sons->data[0];
Y_149140 = 0;
Y_149140 = (*B_149119).Sons->data[0];
LOC1 = 0;
LOC1 = Addnodes_148108(X_149139);
LOC2 = 0;
LOC2 = Addnodes_148108(Y_149140);
Result_149120 = nsuCmpIgnoreStyle(LOC1, LOC2);
return Result_149120;
}
N_NIMCALL(void, Sortindex_148123)(TY148077* A_148125) {
NI N_149153;
NI H_149154;
NI I_149167;
NI HEX3Atmp_149178;
NI Res_149180;
TY148077* V_149168;
NI J_149169;
NI LOC8;
N_149153 = 0;
N_149153 = Rsonslen_148091(A_148125);
H_149154 = 0;
H_149154 = 1;
while (1) {
H_149154 = (NI64)((NI64)(3 * H_149154) + 1);
if (!(N_149153 < H_149154)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
while (1) {
H_149154 = (NI64)(H_149154 / 3);
I_149167 = 0;
HEX3Atmp_149178 = 0;
HEX3Atmp_149178 = (NI64)(N_149153 - 1);
Res_149180 = 0;
Res_149180 = H_149154;
while (1) {
if (!(Res_149180 <= HEX3Atmp_149178)) goto LA6;
I_149167 = Res_149180;
V_149168 = 0;
V_149168 = (*A_148125).Sons->data[I_149167];
J_149169 = 0;
J_149169 = I_149167;
while (1) {
LOC8 = Cmpnodes_149116((*A_148125).Sons->data[(NI64)(J_149169 - H_149154)], V_149168);
if (!(0 <= LOC8)) goto LA7;
asgnRefNoCycle((void**) &(*A_148125).Sons->data[J_149169], (*A_148125).Sons->data[(NI64)(J_149169 - H_149154)]);
J_149169 = (NI64)(J_149169 - H_149154);
if (!(J_149169 < H_149154)) goto LA10;
goto LA7;
LA10: ;
} LA7: ;
asgnRefNoCycle((void**) &(*A_148125).Sons->data[J_149169], V_149168);
Res_149180 += 1;
} LA6: ;
if (!(H_149154 == 1)) goto LA13;
goto LA5;
LA13: ;
} LA5: ;
}
N_NOINLINE(void, rstInit)(void) {
}

