/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY59223 TY59223;
typedef struct TY59221 TY59221;
typedef struct TY59219 TY59219;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY55547 TY55547;
typedef struct TY55529 TY55529;
typedef struct TY55527 TY55527;
typedef struct TY54011 TY54011;
typedef struct TY54005 TY54005;
typedef struct TNimObject TNimObject;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY55551 TY55551;
typedef struct TY47532 TY47532;
typedef struct TY55525 TY55525;
typedef struct TY55539 TY55539;
typedef struct TY52008 TY52008;
typedef struct TY55543 TY55543;
typedef struct TY10802 TY10802;
typedef struct TY10814 TY10814;
typedef struct TY11190 TY11190;
typedef struct TY10818 TY10818;
typedef struct TY10810 TY10810;
typedef struct TY11188 TY11188;
typedef struct TY59079 TY59079;
typedef struct TY55563 TY55563;
typedef struct TY55561 TY55561;
typedef struct TY55559 TY55559;
typedef struct TY59107 TY59107;
typedef struct TY59109 TY59109;
typedef struct TY59092 TY59092;
typedef struct TY55569 TY55569;
typedef struct TY55567 TY55567;
typedef struct TY55565 TY55565;
typedef struct TY55519 TY55519;
typedef struct TY55549 TY55549;
typedef struct TY43013 TY43013;
struct TY59219 {
NI Key;
NI Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY59223 {
NI Counter;
TY59221* Data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY55529 {
TNimType* m_type;
NI Counter;
TY55527* Data;
};
struct TNimObject {
TNimType* m_type;
};
struct TY54005 {
  TNimObject Sup;
NI Id;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY54011 {
  TY54005 Sup;
NimStringDesc* S;
TY54011* Next;
NI H;
};
struct TY47532 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY55539 {
NU8 K;
NU8 S;
NU8 Flags;
TY55551* T;
TY52008* R;
NI A;
};
struct TY55547 {
  TY54005 Sup;
NU8 Kind;
NU8 Magic;
TY55551* Typ;
TY54011* Name;
TY47532 Info;
TY55547* Owner;
NU32 Flags;
TY55529 Tab;
TY55525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY55539 Loc;
TY55543* Annex;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11188 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11190 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY11188 Stat;
};
struct TY59079 {
NI H;
};
struct TY55559 {
TY54005* Key;
TNimObject* Val;
};
struct TY55563 {
NI Counter;
TY55561* Data;
};
struct TY59107 {
NI Tos;
TY59109* Stack;
};
struct TY59092 {
NI H;
TY54011* Name;
};
struct TY55565 {
TY54005* Key;
TY55525* Val;
};
struct TY55569 {
NI Counter;
TY55567* Data;
};
struct TY55525 {
TY55551* Typ;
NimStringDesc* Comment;
TY47532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY55547* Sym;
} S4;
struct {TY54011* Ident;
} S5;
struct {TY55519* Sons;
} S6;
} KindU;
};
struct TY55551 {
  TY54005 Sup;
NU8 Kind;
TY55549* Sons;
TY55525* N;
NU8 Flags;
NU8 Callconv;
TY55547* Owner;
TY55547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY55539 Loc;
};
struct TY52008 {
  TNimObject Sup;
TY52008* Left;
TY52008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY43013 {
  TNimObject Sup;
TY43013* Prev;
TY43013* Next;
};
struct TY55543 {
  TY43013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY52008* Name;
TY55525* Path;
};
typedef NI TY8814[16];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY59221 {
  TGenericSeq Sup;
  TY59219 data[SEQ_DECL_SIZE];
};
struct TY55527 {
  TGenericSeq Sup;
  TY55547* data[SEQ_DECL_SIZE];
};
struct TY55561 {
  TGenericSeq Sup;
  TY55559 data[SEQ_DECL_SIZE];
};
struct TY59109 {
  TGenericSeq Sup;
  TY55529 data[SEQ_DECL_SIZE];
};
struct TY55567 {
  TGenericSeq Sup;
  TY55565 data[SEQ_DECL_SIZE];
};
struct TY55519 {
  TGenericSeq Sup;
  TY55525* data[SEQ_DECL_SIZE];
};
struct TY55549 {
  TGenericSeq Sup;
  TY55551* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_14204, NI Len_14205);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(NI, Nexttry_59213)(NI H_59215, NI Maxhash_59216);
N_NIMCALL(NIM_BOOL, Mustrehash_59209)(NI Length_59211, NI Counter_59212);
N_NIMCALL(void, Strtableenlarge_61357)(TY55529* T_61360);
N_NIMCALL(void, Strtablerawinsert_61311)(TY55527** Data_61314, TY55547* N_61315);
N_NIMCALL(void, Internalerror_47567)(TY47532 Info_47569, NimStringDesc* Errmsg_47570);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18687);
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215);
static N_INLINE(void, Incref_13202)(TY10802* C_13204);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618);
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254);
N_NOINLINE(void, Incl_11074)(TY10814* S_11077, TY10802* Cell_11078);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(void, Decref_13001)(TY10802* C_13003);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(TY55547*, Nextiter_59086)(TY59079* Ti_59089, TY55529* Tab_59090);
N_NIMCALL(NI, Iitablerawget_62157)(TY59223 T_62159, NI Key_62160);
N_NIMCALL(void, Iitablerawinsert_62176)(TY59221** Data_62179, NI Key_62180, NI Val_62181);
N_NIMCALL(NI, Idtablerawget_61778)(TY55563 T_61780, NI Key_61781);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
N_NIMCALL(void, Idtablerawinsert_61831)(TY55561** Data_61834, TY54005* Key_61835, TNimObject* Val_61836);
N_NIMCALL(TY55547*, Strtableget_59069)(TY55529* T_59071, TY54011* Name_59072);
N_NIMCALL(TY55547*, Nextidentiter_59101)(TY59092* Ti_59104, TY55529* Tab_59105);
N_NIMCALL(NI, Idnodetablerawget_61967)(TY55569 T_61969, TY54005* Key_61970);
N_NIMCALL(void, Idnodetablerawinsert_61995)(TY55567** Data_61998, TY54005* Key_61999, TY55525* Val_62000);
N_NIMCALL(NI, Sonslen_55803)(TY55525* N_55805);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
N_NIMCALL(void, Initstrtable_55746)(TY55529* X_55749);
N_NIMCALL(NU8, Symtabadduniqueat_59143)(TY59107* Tab_59146, TY55547* E_59147, NI At_59148);
N_NIMCALL(void, Strtableadd_59064)(TY55529* T_59067, TY55547* N_59068);
N_NIMCALL(NimStringDesc*, Ropetostr_52066)(TY52008* P_52068);
N_NIMCALL(TY52008*, Debugtype_60411)(TY55551* N_60413);
N_NIMCALL(TY52008*, Torope_52046)(NimStringDesc* S_52048);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19779, TNimType* Typ_19780);
N_NIMCALL(void, App_52036)(TY52008** A_52039, NimStringDesc* B_52040);
N_NIMCALL(NI, Sonslen_55806)(TY55551* N_55808);
N_NIMCALL(void, App_52031)(TY52008** A_52034, TY52008* B_52035);
N_NIMCALL(TY55547*, Lookupinrecord_59202)(TY55525* N_59204, TY54011* Field_59205);
N_NIMCALL(TY55525*, Lastson_55809)(TY55525* N_55811);
N_NIMCALL(void, Writeln_60812)(FILE* F_60815, NimStringDesc* X_60816);
N_NIMCALL(void, Write_3658)(FILE* F_3660, NimStringDesc* S_3661);
STRING_LITERAL(TMP196621, "StrTableRawInsert: ", 19);
STRING_LITERAL(TMP197064, "getSymFromList", 14);
STRING_LITERAL(TMP197147, "null", 4);
STRING_LITERAL(TMP197148, " ", 1);
STRING_LITERAL(TMP197149, "(", 1);
STRING_LITERAL(TMP197150, ", ", 2);
STRING_LITERAL(TMP197151, ")", 1);
STRING_LITERAL(TMP197689, "lookupInRecord", 14);
STRING_LITERAL(TMP197690, "lookupInRecord(record case branch)", 34);
STRING_LITERAL(TMP197691, "lookupInRecord()", 16);
STRING_LITERAL(TMP198503, "\012", 1);
extern TNimType* NTI59221; /* TIIPairSeq */
extern TNimType* NTI55527; /* TSymSeq */
extern TY11190 Gch_11210;
extern TNimType* NTI55561; /* TIdPairSeq */
extern TNimType* NTI59109; /* seq[TStrTable] */
extern TNimType* NTI55567; /* TIdNodePairSeq */
extern TNimType* NTI55162; /* TTypeKind */
N_NIMCALL(void, Initiitable_59228)(TY59223* X_59231) {
NI I_62151;
NI Res_62154;
(*X_59231).Counter = 0;
unsureAsgnRef((void**) &(*X_59231).Data, (TY59221*) newSeq(NTI59221, 8));
I_62151 = 0;
Res_62154 = 0;
Res_62154 = 0;
while (1) {
if (!(Res_62154 <= 7)) goto LA1;
I_62151 = Res_62154;
(*X_59231).Data->data[I_62151].Key = (-2147483647 -1);
Res_62154 += 1;
} LA1: ;
}
N_NIMCALL(NI, Nexttry_59213)(NI H_59215, NI Maxhash_59216) {
NI Result_60868;
Result_60868 = 0;
Result_60868 = (NI32)((NI32)((NI32)(5 * H_59215) + 1) & Maxhash_59216);
return Result_60868;
}
N_NIMCALL(TY55547*, Strtableget_59069)(TY55529* T_59071, TY54011* Name_59072) {
TY55547* Result_61507;
NI H_61508;
Result_61507 = 0;
H_61508 = 0;
H_61508 = (NI32)((*Name_59072).H & ((*T_59071).Data->Sup.len-1));
while (1) {
Result_61507 = (*T_59071).Data->data[H_61508];
if (!(Result_61507 == NIM_NIL)) goto LA3;
goto LA1;
LA3: ;
if (!((*(*Result_61507).Name).Sup.Id == (*Name_59072).Sup.Id)) goto LA6;
goto LA1;
LA6: ;
H_61508 = Nexttry_59213(H_61508, ((*T_59071).Data->Sup.len-1));
} LA1: ;
return Result_61507;
}
N_NIMCALL(NIM_BOOL, Mustrehash_59209)(NI Length_59211, NI Counter_59212) {
NIM_BOOL Result_59536;
NIM_BOOL LOC1;
Result_59536 = 0;
LOC1 = ((NI32)(Length_59211 * 2) < (NI32)(Counter_59212 * 3));
if (LOC1) goto LA2;
LOC1 = ((NI32)(Length_59211 - Counter_59212) < 4);
LA2: ;
Result_59536 = LOC1;
return Result_59536;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793) {
memcpy(((NCSTRING) (&(*Dest_18792).data[((*Dest_18792).Sup.len)-0])), ((NCSTRING) ((*Src_18793).data)), ((int) ((NI32)((NI32)((*Src_18793).Sup.len + 1) * 1))));
(*Dest_18792).Sup.len += (*Src_18793).Sup.len;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618) {
NIM_BOOL Result_11619;
Result_11619 = 0;
Result_11619 = !((((*(*C_11618).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11619;
}
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254) {
Incl_11074(&Gch_11210.Cycleroots, C_12254);
}
static N_INLINE(void, Incref_13202)(TY10802* C_13204) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3001(&(*C_13204).Refcount, 8);
LOC3 = Canbecycleroot_11616(C_13204);
if (!LOC3) goto LA4;
Rtladdcycleroot_12252(C_13204);
LA4: ;
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI32)((NU32)(((NI) (Usr_11614))) - (NU32)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11210.Zct, C_12603);
}
static N_INLINE(void, Decref_13001)(TY10802* C_13003) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3006(&(*C_13003).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12601(C_13003);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11616(C_13003);
if (!LOC5) goto LA6;
Rtladdcycleroot_12252(C_13003);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215) {
TY10802* LOC4;
TY10802* LOC8;
if (!!((Src_13215 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11612(Src_13215);
Incref_13202(LOC4);
LA2: ;
if (!!(((*Dest_13214) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11612((*Dest_13214));
Decref_13001(LOC8);
LA6: ;
(*Dest_13214) = Src_13215;
}
N_NIMCALL(void, Strtablerawinsert_61311)(TY55527** Data_61314, TY55547* N_61315) {
NI H_61316;
NimStringDesc* LOC5;
H_61316 = 0;
H_61316 = (NI32)((*(*N_61315).Name).H & ((*Data_61314)->Sup.len-1));
while (1) {
if (!!(((*Data_61314)->data[H_61316] == NIM_NIL))) goto LA1;
if (!((*Data_61314)->data[H_61316] == N_61315)) goto LA3;
LOC5 = 0;
LOC5 = rawNewString((*(*N_61315).Name).S->Sup.len + 19);
appendString(LOC5, ((NimStringDesc*) &TMP196621));
appendString(LOC5, (*(*N_61315).Name).S);
Internalerror_47567((*N_61315).Info, LOC5);
LA3: ;
H_61316 = Nexttry_59213(H_61316, ((*Data_61314)->Sup.len-1));
} LA1: ;
asgnRef((void**) &(*Data_61314)->data[H_61316], N_61315);
}
N_NIMCALL(void, Strtableenlarge_61357)(TY55529* T_61360) {
TY55527* N_61361;
NI I_61391;
NI HEX3Atmp_61414;
NI Res_61416;
TY55527* LOC5;
N_61361 = 0;
N_61361 = (TY55527*) newSeq(NTI55527, (NI32)((*T_61360).Data->Sup.len * 2));
I_61391 = 0;
HEX3Atmp_61414 = 0;
HEX3Atmp_61414 = ((*T_61360).Data->Sup.len-1);
Res_61416 = 0;
Res_61416 = 0;
while (1) {
if (!(Res_61416 <= HEX3Atmp_61414)) goto LA1;
I_61391 = Res_61416;
if (!!(((*T_61360).Data->data[I_61391] == NIM_NIL))) goto LA3;
Strtablerawinsert_61311(&N_61361, (*T_61360).Data->data[I_61391]);
LA3: ;
Res_61416 += 1;
} LA1: ;
LOC5 = 0;
LOC5 = (*T_61360).Data;
unsureAsgnRef((void**) &(*T_61360).Data, N_61361);
N_61361 = LOC5;
}
N_NIMCALL(void, Strtableadd_59064)(TY55529* T_59067, TY55547* N_59068) {
NIM_BOOL LOC2;
LOC2 = Mustrehash_59209((*T_59067).Data->Sup.len, (*T_59067).Counter);
if (!LOC2) goto LA3;
Strtableenlarge_61357(T_59067);
LA3: ;
Strtablerawinsert_61311(&(*T_59067).Data, N_59068);
(*T_59067).Counter += 1;
}
N_NIMCALL(TY55547*, Nextiter_59086)(TY59079* Ti_59089, TY55529* Tab_59090) {
TY55547* Result_61569;
Result_61569 = 0;
Result_61569 = NIM_NIL;
while (1) {
if (!((*Ti_59089).H <= ((*Tab_59090).Data->Sup.len-1))) goto LA1;
Result_61569 = (*Tab_59090).Data->data[(*Ti_59089).H];
(*Ti_59089).H += 1;
if (!!((Result_61569 == NIM_NIL))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
return Result_61569;
}
N_NIMCALL(TY55547*, Inittabiter_59081)(TY59079* Ti_59084, TY55529* Tab_59085) {
TY55547* Result_61561;
Result_61561 = 0;
(*Ti_59084).H = 0;
if (!((*Tab_59085).Counter == 0)) goto LA2;
Result_61561 = NIM_NIL;
goto LA1;
LA2: ;
Result_61561 = Nextiter_59086(Ti_59084, Tab_59085);
LA1: ;
return Result_61561;
}
N_NIMCALL(NI, Iitablerawget_62157)(TY59223 T_62159, NI Key_62160) {
NI Result_62161;
NI H_62162;
Result_62161 = 0;
H_62162 = 0;
H_62162 = (NI32)(Key_62160 & (T_62159.Data->Sup.len-1));
while (1) {
if (!!((T_62159.Data->data[H_62162].Key == (-2147483647 -1)))) goto LA1;
if (!(T_62159.Data->data[H_62162].Key == Key_62160)) goto LA3;
Result_62161 = H_62162;
goto BeforeRet;
LA3: ;
H_62162 = Nexttry_59213(H_62162, (T_62159.Data->Sup.len-1));
} LA1: ;
Result_62161 = -1;
BeforeRet: ;
return Result_62161;
}
N_NIMCALL(void, Iitablerawinsert_62176)(TY59221** Data_62179, NI Key_62180, NI Val_62181) {
NI H_62182;
H_62182 = 0;
H_62182 = (NI32)(Key_62180 & ((*Data_62179)->Sup.len-1));
while (1) {
if (!!(((*Data_62179)->data[H_62182].Key == (-2147483647 -1)))) goto LA1;
H_62182 = Nexttry_59213(H_62182, ((*Data_62179)->Sup.len-1));
} LA1: ;
(*Data_62179)->data[H_62182].Key = Key_62180;
(*Data_62179)->data[H_62182].Val = Val_62181;
}
N_NIMCALL(void, Iitableput_59236)(TY59223* T_59239, NI Key_59240, NI Val_59241) {
NI Index_62196;
TY59221* N_62197;
NIM_BOOL LOC5;
NI I_62241;
NI HEX3Atmp_62276;
NI Res_62278;
NI I_62249;
NI HEX3Atmp_62282;
NI Res_62284;
TY59221* LOC13;
Index_62196 = 0;
N_62197 = 0;
Index_62196 = Iitablerawget_62157((*T_59239), Key_59240);
if (!(0 <= Index_62196)) goto LA2;
(*T_59239).Data->data[Index_62196].Val = Val_59241;
goto LA1;
LA2: ;
LOC5 = Mustrehash_59209((*T_59239).Data->Sup.len, (*T_59239).Counter);
if (!LOC5) goto LA6;
N_62197 = (TY59221*) newSeq(NTI59221, (NI32)((*T_59239).Data->Sup.len * 2));
I_62241 = 0;
HEX3Atmp_62276 = 0;
HEX3Atmp_62276 = (N_62197->Sup.len-1);
Res_62278 = 0;
Res_62278 = 0;
while (1) {
if (!(Res_62278 <= HEX3Atmp_62276)) goto LA8;
I_62241 = Res_62278;
N_62197->data[I_62241].Key = (-2147483647 -1);
Res_62278 += 1;
} LA8: ;
I_62249 = 0;
HEX3Atmp_62282 = 0;
HEX3Atmp_62282 = ((*T_59239).Data->Sup.len-1);
Res_62284 = 0;
Res_62284 = 0;
while (1) {
if (!(Res_62284 <= HEX3Atmp_62282)) goto LA9;
I_62249 = Res_62284;
if (!!(((*T_59239).Data->data[I_62249].Key == (-2147483647 -1)))) goto LA11;
Iitablerawinsert_62176(&N_62197, (*T_59239).Data->data[I_62249].Key, (*T_59239).Data->data[I_62249].Val);
LA11: ;
Res_62284 += 1;
} LA9: ;
LOC13 = 0;
LOC13 = (*T_59239).Data;
unsureAsgnRef((void**) &(*T_59239).Data, N_62197);
N_62197 = LOC13;
LA6: ;
Iitablerawinsert_62176(&(*T_59239).Data, Key_59240, Val_59241);
(*T_59239).Counter += 1;
LA1: ;
}
N_NIMCALL(NI, Idtablerawget_61778)(TY55563 T_61780, NI Key_61781) {
NI Result_61782;
NI H_61783;
Result_61782 = 0;
H_61783 = 0;
H_61783 = (NI32)(Key_61781 & (T_61780.Data->Sup.len-1));
while (1) {
if (!!((T_61780.Data->data[H_61783].Key == NIM_NIL))) goto LA1;
if (!((*T_61780.Data->data[H_61783].Key).Id == Key_61781)) goto LA3;
Result_61782 = H_61783;
goto BeforeRet;
LA3: ;
H_61783 = Nexttry_59213(H_61783, (T_61780.Data->Sup.len-1));
} LA1: ;
Result_61782 = -1;
BeforeRet: ;
return Result_61782;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3001(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3006(&(*C_13222).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(void, Idtablerawinsert_61831)(TY55561** Data_61834, TY54005* Key_61835, TNimObject* Val_61836) {
NI H_61837;
H_61837 = 0;
H_61837 = (NI32)((*Key_61835).Id & ((*Data_61834)->Sup.len-1));
while (1) {
if (!!(((*Data_61834)->data[H_61837].Key == NIM_NIL))) goto LA1;
H_61837 = Nexttry_59213(H_61837, ((*Data_61834)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_61834)->data[H_61837].Key, Key_61835);
asgnRefNoCycle((void**) &(*Data_61834)->data[H_61837].Val, Val_61836);
}
N_NIMCALL(void, Idtableput_59174)(TY55563* T_59177, TY54005* Key_59178, TNimObject* Val_59179) {
NI Index_61869;
TY55561* N_61870;
NIM_BOOL LOC5;
NI I_61923;
NI HEX3Atmp_61959;
NI Res_61961;
TY55561* LOC12;
Index_61869 = 0;
N_61870 = 0;
Index_61869 = Idtablerawget_61778((*T_59177), (*Key_59178).Id);
if (!(0 <= Index_61869)) goto LA2;
asgnRefNoCycle((void**) &(*T_59177).Data->data[Index_61869].Val, Val_59179);
goto LA1;
LA2: ;
LOC5 = Mustrehash_59209((*T_59177).Data->Sup.len, (*T_59177).Counter);
if (!LOC5) goto LA6;
N_61870 = (TY55561*) newSeq(NTI55561, (NI32)((*T_59177).Data->Sup.len * 2));
I_61923 = 0;
HEX3Atmp_61959 = 0;
HEX3Atmp_61959 = ((*T_59177).Data->Sup.len-1);
Res_61961 = 0;
Res_61961 = 0;
while (1) {
if (!(Res_61961 <= HEX3Atmp_61959)) goto LA8;
I_61923 = Res_61961;
if (!!(((*T_59177).Data->data[I_61923].Key == NIM_NIL))) goto LA10;
Idtablerawinsert_61831(&N_61870, (*T_59177).Data->data[I_61923].Key, (*T_59177).Data->data[I_61923].Val);
LA10: ;
Res_61961 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_59177).Data;
unsureAsgnRef((void**) &(*T_59177).Data, N_61870);
N_61870 = LOC12;
LA6: ;
Idtablerawinsert_61831(&(*T_59177).Data, Key_59178, Val_59179);
(*T_59177).Counter += 1;
LA1: ;
}
N_NIMCALL(TNimObject*, Idtableget_59170)(TY55563 T_59172, NI Key_59173) {
TNimObject* Result_61827;
NI Index_61828;
Result_61827 = 0;
Index_61828 = 0;
Index_61828 = Idtablerawget_61778(T_59172, Key_59173);
if (!(0 <= Index_61828)) goto LA2;
Result_61827 = T_59172.Data->data[Index_61828].Val;
goto LA1;
LA2: ;
Result_61827 = NIM_NIL;
LA1: ;
return Result_61827;
}
N_NIMCALL(NI, Iitableget_59232)(TY59223 T_59234, NI Key_59235) {
NI Result_62172;
NI Index_62173;
Result_62172 = 0;
Index_62173 = 0;
Index_62173 = Iitablerawget_62157(T_59234, Key_59235);
if (!(0 <= Index_62173)) goto LA2;
Result_62172 = T_59234.Data->data[Index_62173].Val;
goto LA1;
LA2: ;
Result_62172 = (-2147483647 -1);
LA1: ;
return Result_62172;
}
N_NIMCALL(void, Initsymtab_59111)(TY59107* Tab_59114) {
(*Tab_59114).Tos = 0;
unsureAsgnRef((void**) &(*Tab_59114).Stack, (TY59109*) newSeq(NTI59109, 0));
}
N_NIMCALL(TY55547*, Symtabget_59119)(TY59107 Tab_59121, TY54011* S_59122) {
TY55547* Result_61613;
NI I_61636;
NI HEX3Atmp_61649;
NI Res_61651;
Result_61613 = 0;
I_61636 = 0;
HEX3Atmp_61649 = 0;
HEX3Atmp_61649 = (NI32)(((NI) (Tab_59121.Tos)) - 1);
Res_61651 = 0;
Res_61651 = HEX3Atmp_61649;
while (1) {
if (!(0 <= Res_61651)) goto LA1;
I_61636 = Res_61651;
Result_61613 = Strtableget_59069(&Tab_59121.Stack->data[I_61636], S_59122);
if (!!((Result_61613 == NIM_NIL))) goto LA3;
goto BeforeRet;
LA3: ;
Res_61651 -= 1;
} LA1: ;
Result_61613 = NIM_NIL;
BeforeRet: ;
return Result_61613;
}
N_NIMCALL(TY55547*, Getmodule_59206)(TY55547* S_59208) {
TY55547* Result_59421;
NIM_BOOL LOC2;
Result_59421 = 0;
Result_59421 = S_59208;
while (1) {
LOC2 = !((Result_59421 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*Result_59421).Kind == ((NU8) 18)));
LA3: ;
if (!LOC2) goto LA1;
Result_59421 = (*Result_59421).Owner;
} LA1: ;
return Result_59421;
}
N_NIMCALL(TY55547*, Nextidentiter_59101)(TY59092* Ti_59104, TY55529* Tab_59105) {
TY55547* Result_61537;
NI H_61538;
NI Start_61539;
Result_61537 = 0;
H_61538 = 0;
Start_61539 = 0;
H_61538 = (NI32)((*Ti_59104).H & ((*Tab_59105).Data->Sup.len-1));
Start_61539 = H_61538;
Result_61537 = (*Tab_59105).Data->data[H_61538];
while (1) {
if (!!((Result_61537 == NIM_NIL))) goto LA1;
if (!((*(*Result_61537).Name).Sup.Id == (*(*Ti_59104).Name).Sup.Id)) goto LA3;
goto LA1;
LA3: ;
H_61538 = Nexttry_59213(H_61538, ((*Tab_59105).Data->Sup.len-1));
if (!(H_61538 == Start_61539)) goto LA6;
Result_61537 = NIM_NIL;
goto LA1;
LA6: ;
Result_61537 = (*Tab_59105).Data->data[H_61538];
} LA1: ;
(*Ti_59104).H = Nexttry_59213(H_61538, ((*Tab_59105).Data->Sup.len-1));
return Result_61537;
}
N_NIMCALL(TY55547*, Initidentiter_59095)(TY59092* Ti_59098, TY55529* Tab_59099, TY54011* S_59100) {
TY55547* Result_61529;
Result_61529 = 0;
(*Ti_59098).H = (*S_59100).H;
unsureAsgnRef((void**) &(*Ti_59098).Name, S_59100);
if (!((*Tab_59099).Counter == 0)) goto LA2;
Result_61529 = NIM_NIL;
goto LA1;
LA2: ;
Result_61529 = Nextidentiter_59101(Ti_59098, Tab_59099);
LA1: ;
return Result_61529;
}
N_NIMCALL(NI, Idnodetablerawget_61967)(TY55569 T_61969, TY54005* Key_61970) {
NI Result_61971;
NI H_61972;
Result_61971 = 0;
H_61972 = 0;
H_61972 = (NI32)((*Key_61970).Id & (T_61969.Data->Sup.len-1));
while (1) {
if (!!((T_61969.Data->data[H_61972].Key == NIM_NIL))) goto LA1;
if (!((*T_61969.Data->data[H_61972].Key).Id == (*Key_61970).Id)) goto LA3;
Result_61971 = H_61972;
goto BeforeRet;
LA3: ;
H_61972 = Nexttry_59213(H_61972, (T_61969.Data->Sup.len-1));
} LA1: ;
Result_61971 = -1;
BeforeRet: ;
return Result_61971;
}
N_NIMCALL(TY55525*, Idnodetableget_59184)(TY55569 T_59186, TY54005* Key_59187) {
TY55525* Result_61991;
NI Index_61992;
Result_61991 = 0;
Index_61992 = 0;
Index_61992 = Idnodetablerawget_61967(T_59186, Key_59187);
if (!(0 <= Index_61992)) goto LA2;
Result_61991 = T_59186.Data->data[Index_61992].Val;
goto LA1;
LA2: ;
Result_61991 = NIM_NIL;
LA1: ;
return Result_61991;
}
N_NIMCALL(void, Idnodetablerawinsert_61995)(TY55567** Data_61998, TY54005* Key_61999, TY55525* Val_62000) {
NI H_62001;
H_62001 = 0;
H_62001 = (NI32)((*Key_61999).Id & ((*Data_61998)->Sup.len-1));
while (1) {
if (!!(((*Data_61998)->data[H_62001].Key == NIM_NIL))) goto LA1;
H_62001 = Nexttry_59213(H_62001, ((*Data_61998)->Sup.len-1));
} LA1: ;
asgnRefNoCycle((void**) &(*Data_61998)->data[H_62001].Key, Key_61999);
asgnRefNoCycle((void**) &(*Data_61998)->data[H_62001].Val, Val_62000);
}
N_NIMCALL(void, Idnodetableput_59188)(TY55569* T_59191, TY54005* Key_59192, TY55525* Val_59193) {
NI Index_62033;
TY55567* N_62034;
NIM_BOOL LOC5;
NI I_62087;
NI HEX3Atmp_62123;
NI Res_62125;
TY55567* LOC12;
Index_62033 = 0;
N_62034 = 0;
Index_62033 = Idnodetablerawget_61967((*T_59191), Key_59192);
if (!(0 <= Index_62033)) goto LA2;
asgnRefNoCycle((void**) &(*T_59191).Data->data[Index_62033].Val, Val_59193);
goto LA1;
LA2: ;
LOC5 = Mustrehash_59209((*T_59191).Data->Sup.len, (*T_59191).Counter);
if (!LOC5) goto LA6;
N_62034 = (TY55567*) newSeq(NTI55567, (NI32)((*T_59191).Data->Sup.len * 2));
I_62087 = 0;
HEX3Atmp_62123 = 0;
HEX3Atmp_62123 = ((*T_59191).Data->Sup.len-1);
Res_62125 = 0;
Res_62125 = 0;
while (1) {
if (!(Res_62125 <= HEX3Atmp_62123)) goto LA8;
I_62087 = Res_62125;
if (!!(((*T_59191).Data->data[I_62087].Key == NIM_NIL))) goto LA10;
Idnodetablerawinsert_61995(&N_62034, (*T_59191).Data->data[I_62087].Key, (*T_59191).Data->data[I_62087].Val);
LA10: ;
Res_62125 += 1;
} LA8: ;
LOC12 = 0;
LOC12 = (*T_59191).Data;
unsureAsgnRef((void**) &(*T_59191).Data, N_62034);
N_62034 = LOC12;
LA6: ;
Idnodetablerawinsert_61995(&(*T_59191).Data, Key_59192, Val_59193);
(*T_59191).Counter += 1;
LA1: ;
}
N_NIMCALL(TY55547*, Getsymfromlist_59197)(TY55525* List_59199, TY54011* Ident_59200, NI Start_59201) {
TY55547* Result_59466;
NI I_59474;
NI HEX3Atmp_59523;
NI LOC1;
NI Res_59525;
Result_59466 = 0;
I_59474 = 0;
HEX3Atmp_59523 = 0;
LOC1 = Sonslen_55803(List_59199);
HEX3Atmp_59523 = (NI32)(LOC1 - 1);
Res_59525 = 0;
Res_59525 = Start_59201;
while (1) {
if (!(Res_59525 <= HEX3Atmp_59523)) goto LA2;
I_59474 = Res_59525;
if (!!(((*(*List_59199).KindU.S6.Sons->data[I_59474]).Kind == ((NU8) 3)))) goto LA4;
Internalerror_47567((*List_59199).Info, ((NimStringDesc*) &TMP197064));
LA4: ;
Result_59466 = (*(*List_59199).KindU.S6.Sons->data[I_59474]).KindU.S4.Sym;
if (!((*(*Result_59466).Name).Sup.Id == (*Ident_59200).Sup.Id)) goto LA7;
goto BeforeRet;
LA7: ;
Res_59525 += 1;
} LA2: ;
Result_59466 = NIM_NIL;
BeforeRet: ;
return Result_59466;
}
N_NIMCALL(TNimObject*, Idtableget_59166)(TY55563 T_59168, TY54005* Key_59169) {
TNimObject* Result_61819;
NI Index_61820;
Result_61819 = 0;
Index_61820 = 0;
Index_61820 = Idtablerawget_61778(T_59168, (*Key_59169).Id);
if (!(0 <= Index_61820)) goto LA2;
Result_61819 = T_59168.Data->data[Index_61820].Val;
goto LA1;
LA2: ;
Result_61819 = NIM_NIL;
LA1: ;
return Result_61819;
}
N_NIMCALL(void, Openscope_59149)(TY59107* Tab_59152) {
if (!((*Tab_59152).Stack->Sup.len <= ((NI) ((*Tab_59152).Tos)))) goto LA2;
(*Tab_59152).Stack = (TY59109*) setLengthSeq(&((*Tab_59152).Stack)->Sup, sizeof(TY55529), (NI32)(((NI) ((*Tab_59152).Tos)) + 1));
LA2: ;
Initstrtable_55746(&(*Tab_59152).Stack->data[(*Tab_59152).Tos]);
(*Tab_59152).Tos += 1;
}
N_NIMCALL(NU8, Symtabadduniqueat_59143)(TY59107* Tab_59146, TY55547* E_59147, NI At_59148) {
NU8 Result_61673;
TY55547* LOC2;
Result_61673 = 0;
LOC2 = 0;
LOC2 = Strtableget_59069(&(*Tab_59146).Stack->data[At_59148], (*E_59147).Name);
if (!!((LOC2 == NIM_NIL))) goto LA3;
Result_61673 = ((NU8) 0);
goto LA1;
LA3: ;
Strtableadd_59064(&(*Tab_59146).Stack->data[At_59148], E_59147);
Result_61673 = ((NU8) 1);
LA1: ;
return Result_61673;
}
N_NIMCALL(NU8, Symtabaddunique_59138)(TY59107* Tab_59141, TY55547* E_59142) {
NU8 Result_61691;
Result_61691 = 0;
Result_61691 = Symtabadduniqueat_59143(Tab_59141, E_59142, ((NI) ((NI32)(((NI) ((*Tab_59141).Tos)) - 1))));
return Result_61691;
}
N_NIMCALL(void, Rawclosescope_59153)(TY59107* Tab_59156) {
(*Tab_59156).Tos -= 1;
}
N_NIMCALL(TY52008*, Debugtype_60411)(TY55551* N_60413) {
TY52008* Result_60414;
NIM_BOOL LOC8;
NI LOC10;
NI I_60466;
NI HEX3Atmp_60485;
NI LOC13;
NI Res_60487;
TY52008* LOC21;
Result_60414 = 0;
if (!(N_60413 == NIM_NIL)) goto LA2;
Result_60414 = Torope_52046(((NimStringDesc*) &TMP197147));
goto LA1;
LA2: ;
Result_60414 = Torope_52046(reprEnum((*N_60413).Kind, NTI55162));
if (!!(((*N_60413).Sym == NIM_NIL))) goto LA5;
App_52036(&Result_60414, ((NimStringDesc*) &TMP197148));
App_52036(&Result_60414, (*(*(*N_60413).Sym).Name).S);
LA5: ;
LOC8 = !(((*N_60413).Kind == ((NU8) 28)));
if (!(LOC8)) goto LA9;
LOC10 = Sonslen_55806(N_60413);
LOC8 = (0 < LOC10);
LA9: ;
if (!LOC8) goto LA11;
App_52036(&Result_60414, ((NimStringDesc*) &TMP197149));
I_60466 = 0;
HEX3Atmp_60485 = 0;
LOC13 = Sonslen_55806(N_60413);
HEX3Atmp_60485 = (NI32)(LOC13 - 1);
Res_60487 = 0;
Res_60487 = 0;
while (1) {
if (!(Res_60487 <= HEX3Atmp_60485)) goto LA14;
I_60466 = Res_60487;
if (!(0 < I_60466)) goto LA16;
App_52036(&Result_60414, ((NimStringDesc*) &TMP197150));
LA16: ;
if (!((*N_60413).Sons->data[I_60466] == NIM_NIL)) goto LA19;
App_52036(&Result_60414, ((NimStringDesc*) &TMP197147));
goto LA18;
LA19: ;
LOC21 = 0;
LOC21 = Debugtype_60411((*N_60413).Sons->data[I_60466]);
App_52031(&Result_60414, LOC21);
LA18: ;
Res_60487 += 1;
} LA14: ;
App_52036(&Result_60414, ((NimStringDesc*) &TMP197151));
LA11: ;
LA1: ;
return Result_60414;
}
N_NIMCALL(void, Debug_59160)(TY55551* N_59162) {
TY52008* LOC1;
NimStringDesc* LOC2;
LOC1 = 0;
LOC1 = Debugtype_60411(N_59162);
LOC2 = 0;
LOC2 = Ropetostr_52066(LOC1);
Writeln_60812(stdout, LOC2);
}
N_NIMCALL(void, Symtabaddat_59132)(TY59107* Tab_59135, TY55547* E_59136, NI At_59137) {
Strtableadd_59064(&(*Tab_59135).Stack->data[At_59137], E_59136);
}
N_NIMCALL(TY55547*, Symtablocalget_59123)(TY59107 Tab_59125, TY54011* S_59126) {
TY55547* Result_61608;
Result_61608 = 0;
Result_61608 = Strtableget_59069(&Tab_59125.Stack->data[(NI32)(((NI) (Tab_59125.Tos)) - 1)], S_59126);
return Result_61608;
}
N_NIMCALL(void, Symtabadd_59127)(TY59107* Tab_59130, TY55547* E_59131) {
Strtableadd_59064(&(*Tab_59130).Stack->data[(NI32)(((NI) ((*Tab_59130).Tos)) - 1)], E_59131);
}
N_NIMCALL(NIM_BOOL, Idtablehasobjectaskey_59180)(TY55563 T_59182, TY54005* Key_59183) {
NIM_BOOL Result_61802;
NI Index_61803;
Result_61802 = 0;
Index_61803 = 0;
Index_61803 = Idtablerawget_61778(T_59182, (*Key_59183).Id);
if (!(0 <= Index_61803)) goto LA2;
Result_61802 = (T_59182.Data->data[Index_61803].Key == Key_59183);
goto LA1;
LA2: ;
Result_61802 = NIM_FALSE;
LA1: ;
return Result_61802;
}
N_NIMCALL(TY55547*, Lookupinrecord_59202)(TY55525* N_59204, TY54011* Field_59205) {
TY55547* Result_59246;
NI I_59269;
NI HEX3Atmp_59407;
NI LOC1;
NI Res_59409;
NI I_59344;
NI HEX3Atmp_59413;
NI LOC12;
NI Res_59415;
TY55525* LOC14;
Result_59246 = 0;
Result_59246 = NIM_NIL;
switch ((*N_59204).Kind) {
case ((NU8) 113):
I_59269 = 0;
HEX3Atmp_59407 = 0;
LOC1 = Sonslen_55803(N_59204);
HEX3Atmp_59407 = (NI32)(LOC1 - 1);
Res_59409 = 0;
Res_59409 = 0;
while (1) {
if (!(Res_59409 <= HEX3Atmp_59407)) goto LA2;
I_59269 = Res_59409;
Result_59246 = Lookupinrecord_59202((*N_59204).KindU.S6.Sons->data[I_59269], Field_59205);
if (!!((Result_59246 == NIM_NIL))) goto LA4;
goto BeforeRet;
LA4: ;
Res_59409 += 1;
} LA2: ;
break;
case ((NU8) 114):
if (!!(((*(*N_59204).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA7;
Internalerror_47567((*N_59204).Info, ((NimStringDesc*) &TMP197689));
LA7: ;
Result_59246 = Lookupinrecord_59202((*N_59204).KindU.S6.Sons->data[0], Field_59205);
if (!!((Result_59246 == NIM_NIL))) goto LA10;
goto BeforeRet;
LA10: ;
I_59344 = 0;
HEX3Atmp_59413 = 0;
LOC12 = Sonslen_55803(N_59204);
HEX3Atmp_59413 = (NI32)(LOC12 - 1);
Res_59415 = 0;
Res_59415 = 1;
while (1) {
if (!(Res_59415 <= HEX3Atmp_59413)) goto LA13;
I_59344 = Res_59415;
switch ((*(*N_59204).KindU.S6.Sons->data[I_59344]).Kind) {
case ((NU8) 75):
case ((NU8) 78):
LOC14 = 0;
LOC14 = Lastson_55809((*N_59204).KindU.S6.Sons->data[I_59344]);
Result_59246 = Lookupinrecord_59202(LOC14, Field_59205);
if (!!((Result_59246 == NIM_NIL))) goto LA16;
goto BeforeRet;
LA16: ;
break;
default:
Internalerror_47567((*N_59204).Info, ((NimStringDesc*) &TMP197690));
break;
}
Res_59415 += 1;
} LA13: ;
break;
case ((NU8) 3):
if (!((*(*(*N_59204).KindU.S4.Sym).Name).Sup.Id == (*Field_59205).Sup.Id)) goto LA19;
Result_59246 = (*N_59204).KindU.S4.Sym;
LA19: ;
break;
default:
Internalerror_47567((*N_59204).Info, ((NimStringDesc*) &TMP197691));
break;
}
BeforeRet: ;
return Result_59246;
}
N_NIMCALL(void, Writeln_60812)(FILE* F_60815, NimStringDesc* X_60816) {
Write_3658(F_60815, X_60816);
Write_3658(F_60815, ((NimStringDesc*) &TMP198503));
}
N_NOINLINE(void, astalgoInit)(void) {
}

