/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY189208 TY189208;
typedef struct TY189206 TY189206;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY54547 TY54547;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY10402 TY10402;
typedef struct TY10418 TY10418;
typedef struct TY10790 TY10790;
typedef struct TY10414 TY10414;
typedef struct TY10410 TY10410;
typedef struct TY10788 TY10788;
typedef struct TY42019 TY42019;
typedef struct TY42013 TY42013;
typedef struct TY37660 TY37660;
typedef struct TY54525 TY54525;
typedef struct TY92031 TY92031;
typedef struct TY53005 TY53005;
typedef struct TNimObject TNimObject;
typedef struct TY54551 TY54551;
typedef struct TY53011 TY53011;
typedef struct TY46536 TY46536;
typedef struct TY54529 TY54529;
typedef struct TY54527 TY54527;
typedef struct TY54539 TY54539;
typedef struct TY51008 TY51008;
typedef struct TY54543 TY54543;
typedef struct TY74013 TY74013;
typedef struct TY104006 TY104006;
typedef struct TY104002 TY104002;
typedef struct TY76267 TY76267;
typedef struct TY75015 TY75015;
typedef struct TY76281 TY76281;
typedef struct TY76263 TY76263;
typedef struct TY54519 TY54519;
typedef struct TY38221 TY38221;
typedef struct TY92029 TY92029;
typedef struct TY59220 TY59220;
typedef struct TY59218 TY59218;
typedef struct TY59216 TY59216;
typedef struct TY54563 TY54563;
typedef struct TY54561 TY54561;
typedef struct TY54559 TY54559;
typedef struct TY54549 TY54549;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY189206 {
NimStringDesc* Filename;
TY54547* Module;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY10402 {
NI Refcount;
TNimType* Typ;
};
struct TY10418 {
NI Len;
NI Cap;
TY10402** D;
};
struct TY10414 {
NI Counter;
NI Max;
TY10410* Head;
TY10410** Data;
};
struct TY10788 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10790 {
TY10418 Zct;
TY10418 Decstack;
TY10414 Cycleroots;
TY10418 Tempstack;
TY10788 Stat;
};
struct TY42019 {
TNimType* m_type;
TY42013* Head;
TY42013* Tail;
NI Counter;
};
struct TY37660 {
NimStringDesc* Dir;
NimStringDesc* Name;
NimStringDesc* Ext;
};
typedef N_NIMCALL_PTR(TY54525*, TY104048) (NimStringDesc* Filename_104049);
typedef N_NIMCALL_PTR(TY54547*, TY104044) (NimStringDesc* Filename_104045);
struct TNimObject {
TNimType* m_type;
};
struct TY53005 {
  TNimObject Sup;
NI Id;
};
struct TY46536 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY54529 {
TNimType* m_type;
NI Counter;
TY54527* Data;
};
struct TY54539 {
NU8 K;
NU8 S;
NU8 Flags;
TY54551* T;
TY51008* R;
NI A;
};
struct TY54547 {
  TY53005 Sup;
NU8 Kind;
NU8 Magic;
TY54551* Typ;
TY53011* Name;
TY46536 Info;
TY54547* Owner;
NU32 Flags;
TY54529 Tab;
TY54525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY54539 Loc;
TY54543* Annex;
};
struct TY53011 {
  TY53005 Sup;
NimStringDesc* S;
TY53011* Next;
NI H;
};
typedef N_NIMCALL_PTR(TY104002*, TY104007) (TY54547* Module_104008, NimStringDesc* Filename_104009);
typedef N_NIMCALL_PTR(TY104002*, TY104012) (TY54547* Module_104013, NimStringDesc* Filename_104014, TY92031* Rd_104015);
typedef N_NIMCALL_PTR(TY54525*, TY104018) (TY104002* P_104019, TY54525* N_104020);
typedef N_NIMCALL_PTR(TY54525*, TY104023) (TY104002* P_104024, TY54525* Toplevelstmt_104025);
struct TY104006 {
TY104007 Open;
TY104012 Opencached;
TY104018 Close;
TY104023 Process;
};
struct TY75015 {
  TNimObject Sup;
NI Bufpos;
NCSTRING Buf;
NI Buflen;
TY74013* Stream;
NI Linenumber;
NI Sentinel;
NI Linestart;
};
struct TY76267 {
  TY75015 Sup;
NimStringDesc* Filename;
TY76281* Indentstack;
NI Dedent;
NI Indentahead;
};
struct TY76263 {
TNimType* m_type;
NU8 Toktype;
NI Indent;
TY53011* Ident;
NI64 Inumber;
NF64 Fnumber;
NU8 Base;
NimStringDesc* Literal;
TY76263* Next;
};
typedef NI TY8414[16];
struct TY10410 {
TY10410* Next;
NI Key;
TY8414 Bits;
};
struct TY42013 {
  TNimObject Sup;
TY42013* Prev;
TY42013* Next;
};
struct TY54525 {
TY54551* Typ;
NimStringDesc* Comment;
TY46536 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY54547* Sym;
} S4;
struct {TY53011* Ident;
} S5;
struct {TY54519* Sons;
} S6;
} KindU;
};
struct TY59216 {
NI Key;
NI Val;
};
struct TY59220 {
NI Counter;
TY59218* Data;
};
struct TY92029 {
NI Lastidxkey;
NI Lastidxval;
TY59220 Tab;
TY51008* R;
NI Offset;
};
struct TY54559 {
TY53005* Key;
TNimObject* Val;
};
struct TY54563 {
NI Counter;
TY54561* Data;
};
struct TY92031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY38221* Moddeps;
TY38221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY92029 Index;
TY92029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY54563 Syms;
};
struct TY54551 {
  TY53005 Sup;
NU8 Kind;
TY54549* Sons;
TY54525* N;
NU8 Flags;
NU8 Callconv;
TY54547* Owner;
TY54547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY54539 Loc;
};
struct TY51008 {
  TNimObject Sup;
TY51008* Left;
TY51008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY54543 {
  TY42013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY51008* Name;
TY54525* Path;
};
struct TY74013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TY104002 {
  TNimObject Sup;
};
struct TY189208 {
  TGenericSeq Sup;
  TY189206 data[SEQ_DECL_SIZE];
};
struct TY54527 {
  TGenericSeq Sup;
  TY54547* data[SEQ_DECL_SIZE];
};
struct TY76281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY54519 {
  TGenericSeq Sup;
  TY54525* data[SEQ_DECL_SIZE];
};
struct TY38221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY59218 {
  TGenericSeq Sup;
  TY59216 data[SEQ_DECL_SIZE];
};
struct TY54561 {
  TGenericSeq Sup;
  TY54559 data[SEQ_DECL_SIZE];
};
struct TY54549 {
  TGenericSeq Sup;
  TY54551* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12818, void* Src_12819);
static N_INLINE(TY10402*, Usrtocell_11212)(void* Usr_11214);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12201)(TY10402* C_12203);
N_NOINLINE(void, Addzct_11201)(TY10418* S_11204, TY10402* C_11205);
N_NIMCALL(void, Appendstr_42061)(TY42019* List_42064, NimStringDesc* Data_42065);
N_NIMCALL(void, Prependstr_42071)(TY42019* List_42074, NimStringDesc* Data_42075);
N_NIMCALL(void, nossplitFile)(NimStringDesc* Path_37659, TY37660* Result);
static N_INLINE(void, Setid_54695)(NI Id_54697);
N_NIMCALL(TY54525*, Parsefile_91031)(NimStringDesc* Filename_91033);
N_NIMCALL(TY54547*, Importmodule_189324)(NimStringDesc* Filename_189326);
N_NIMCALL(TY54547*, Getmodule_189256)(NimStringDesc* Filename_189258);
N_NIMCALL(NIM_BOOL, nossameFile)(NimStringDesc* Path1_37846, NimStringDesc* Path2_37847);
N_NIMCALL(TY54547*, Compilemodule_189319)(NimStringDesc* Filename_189321, NIM_BOOL Ismainfile_189322, NIM_BOOL Issystemfile_189323);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_37828, NimStringDesc* Ext_37829);
N_NIMCALL(TY54547*, Newmodule_189286)(NimStringDesc* Filename_189288);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
N_NIMCALL(void, objectInit)(void* Dest_19262, TNimType* Typ_19263);
N_NIMCALL(TY53011*, Getident_53016)(NimStringDesc* Identifier_53018);
N_NIMCALL(NIM_BOOL, Isnimrodidentifier_76357)(NimStringDesc* S_76359);
N_NIMCALL(void, Rawmessage_46557)(NU8 Msg_46559, NimStringDesc* Arg_46560);
static N_INLINE(void, asgnRef)(void** Dest_12814, void* Src_12815);
static N_INLINE(void, Incref_12802)(TY10402* C_12804);
static N_INLINE(NIM_BOOL, Canbecycleroot_11216)(TY10402* C_11218);
static N_INLINE(void, Rtladdcycleroot_11852)(TY10402* C_11854);
N_NOINLINE(void, Incl_10674)(TY10414* S_10677, TY10402* Cell_10678);
static N_INLINE(void, Decref_12601)(TY10402* C_12603);
N_NIMCALL(TY46536, Newlineinfo_46578)(NimStringDesc* Filename_46580, NI Line_46581, NI Col_46582);
N_NIMCALL(void, Initstrtable_54746)(TY54529* X_54749);
N_NIMCALL(void, Registermodule_189229)(NimStringDesc* Filename_189231, TY54547* Module_189232);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18603, NI Elemsize_18604, NI Newlen_18605);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18308);
N_NIMCALL(void, Strtableadd_59061)(TY54529* T_59064, TY54547* N_59065);
N_NIMCALL(TY92031*, Handlesymbolfile_92060)(TY54547* Module_92062, NimStringDesc* Filename_92063);
N_NIMCALL(void, Internalerror_46575)(NimStringDesc* Errmsg_46577);
static N_INLINE(NI, Getid_54693)(void);
N_NIMCALL(void, Processmodule_104035)(TY54547* Module_104037, NimStringDesc* Filename_104038, TY74013* Stream_104039, TY92031* Rd_104040);
N_NIMCALL(void, Limessage_46566)(TY46536 Info_46568, NU8 Msg_46569, NimStringDesc* Arg_46570);
N_NIMCALL(NU8, Whichkeyword_71474)(NimStringDesc* Id_71476);
N_NIMCALL(void, Wantfile_189704)(NimStringDesc* Filename_189706);
N_NIMCALL(void, Commandcompiletoc_189413)(NimStringDesc* Filename_189415);
N_NIMCALL(void, Semanticpasses_189405)(void);
N_NIMCALL(void, Registerpass_104028)(TY104006* P_104030);
N_NIMCALL(TY104006, Verbosepass_184004)(void);
N_NIMCALL(TY104006, Sempass_124001)(void);
N_NIMCALL(TY104006, Transfpass_186005)(void);
N_NIMCALL(TY104006, Cgenpass_159201)(void);
N_NIMCALL(TY104006, Rodwritepass_110001)(void);
N_NIMCALL(void, Compileproject_189402)(NimStringDesc* Filename_189404);
N_NIMCALL(NimStringDesc*, nosJoinPath)(NimStringDesc* Head_37403, NimStringDesc* Tail_37404);
N_NIMCALL(void, Callccompiler_69797)(NimStringDesc* Projectfile_69799);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_37820, NimStringDesc* Ext_37821);
N_NIMCALL(void, Commandcompiletoecmascript_189601)(NimStringDesc* Filename_189603);
N_NIMCALL(void, Settarget_50574)(NU8 O_50576, NU8 C_50577);
N_NIMCALL(void, Initdefines_63049)(void);
N_NIMCALL(TY104006, Ecmasgenpass_176004)(void);
N_NIMCALL(void, Commandpretty_189643)(NimStringDesc* Filename_189645);
N_NIMCALL(void, Rendermodule_84035)(TY54525* N_84037, NimStringDesc* Filename_84038, NU8 Renderflags_84041);
N_NIMCALL(NimStringDesc*, Getoutfile_45144)(NimStringDesc* Filename_45146, NimStringDesc* Ext_45147);
N_NIMCALL(void, Loadspecialconfig_79007)(NimStringDesc* Configfilename_79009);
N_NIMCALL(void, Commanddoc_154001)(NimStringDesc* Filename_154003);
N_NIMCALL(void, Commandrst2html_154004)(NimStringDesc* Filename_154006);
N_NIMCALL(void, Commandrst2tex_154007)(NimStringDesc* Filename_154009);
N_NIMCALL(void, Commandgendepend_189407)(NimStringDesc* Filename_189409);
N_NIMCALL(TY104006, Gendependpass_185004)(void);
N_NIMCALL(TY104006, Cleanuppass_184006)(void);
N_NIMCALL(void, Generatedot_185006)(NimStringDesc* Project_185008);
N_NIMCALL(void, Execexternalprogram_69563)(NimStringDesc* Cmd_69565);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18392, NimStringDesc* Src_18393);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18409, NIM_CHAR C_18410);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18287);
N_NIMCALL(void, Listsymbols_63062)(void);
N_NIMCALL(void, Commandcheck_189410)(NimStringDesc* Filename_189412);
N_NIMCALL(void, Commandscan_189658)(NimStringDesc* Filename_189660);
N_NIMCALL(TY74013*, Llstreamopen_74032)(NimStringDesc* Filename_74034, NU8 Mode_74035);
N_NIMCALL(void, Openlexer_76298)(TY76267* Lex_76301, NimStringDesc* Filename_76302, TY74013* Inputstream_76303);
N_NIMCALL(void, Rawgettok_76304)(TY76267* L_76307, TY76263* Tok_76309);
N_NIMCALL(void, Printtok_76320)(TY76263* Tok_76322);
N_NIMCALL(void, Closelexer_76316)(TY76267* Lex_76319);
N_NIMCALL(void, Messageout_46554)(NimStringDesc* S_46556);
N_NIMCALL(void, Commandinteractive_189616)(void);
N_NIMCALL(TY104006, Evalpass_114046)(void);
N_NIMCALL(TY74013*, Llstreamopenstdin_74038)(void);
STRING_LITERAL(TMP193856, "nim", 3);
STRING_LITERAL(TMP193909, "handleSymbolFile should have set the module\'s ID", 48);
STRING_LITERAL(TMP193911, "command line", 12);
STRING_LITERAL(TMP193912, "", 0);
STRING_LITERAL(TMP194853, "system", 6);
STRING_LITERAL(TMP194871, ".cpp", 4);
STRING_LITERAL(TMP194872, ".m", 2);
STRING_LITERAL(TMP195073, "pretty.nim", 10);
STRING_LITERAL(TMP195074, "nimdoc.cfg", 10);
STRING_LITERAL(TMP195476, "nimdoc.tex.cfg", 14);
STRING_LITERAL(TMP195484, "dot -Tpng -o", 12);
STRING_LITERAL(TMP195485, "png", 3);
STRING_LITERAL(TMP195486, "dot", 3);
STRING_LITERAL(TMP195488, "Beware: Indentation tokens depend on the parser\'s state!", 56);
STRING_LITERAL(TMP195489, "stdin", 5);
TY189208* Compmods_189227;
extern TNimType* NTI189208; /* TFileModuleMap */
extern TY10790 Gch_10808;
extern TY42019 Searchpaths_45080;
extern NimStringDesc* Libpath_45111;
extern NI Gid_54692;
extern TY104048 Gincludefile_104051;
extern TY104044 Gimportmodule_104047;
extern TNimType* NTI54523; /* PSym */
extern TNimType* NTI54547; /* TSym */
extern NU8 Gcmd_45083;
extern NimStringDesc* Cext_69342;
extern NU32 Gglobaloptions_45078;
extern TNimType* NTI76267; /* TLexer */
extern TNimType* NTI76261; /* PToken */
extern TNimType* NTI76263; /* TToken */
static N_INLINE(TY10402*, Usrtocell_11212)(void* Usr_11214) {
TY10402* Result_11215;
Result_11215 = 0;
Result_11215 = ((TY10402*) ((NI32)((NU32)(((NI) (Usr_11214))) - (NU32)(((NI) (((NI)sizeof(TY10402))))))));
return Result_11215;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7407;
Result_7407 = 0;
(*Memloc_3004) += X_3005;
Result_7407 = (*Memloc_3004);
return Result_7407;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7606;
Result_7606 = 0;
(*Memloc_3009) -= X_3010;
Result_7606 = (*Memloc_3009);
return Result_7606;
}
static N_INLINE(void, Rtladdzct_12201)(TY10402* C_12203) {
Addzct_11201(&Gch_10808.Zct, C_12203);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_12818, void* Src_12819) {
TY10402* C_12820;
NI LOC4;
TY10402* C_12822;
NI LOC9;
if (!!((Src_12819 == NIM_NIL))) goto LA2;
C_12820 = 0;
C_12820 = Usrtocell_11212(Src_12819);
LOC4 = Atomicinc_3001(&(*C_12820).Refcount, 8);
LA2: ;
if (!!(((*Dest_12818) == NIM_NIL))) goto LA6;
C_12822 = 0;
C_12822 = Usrtocell_11212((*Dest_12818));
LOC9 = Atomicdec_3006(&(*C_12822).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12201(C_12822);
LA10: ;
LA6: ;
(*Dest_12818) = Src_12819;
}
static N_INLINE(void, Setid_54695)(NI Id_54697) {
Gid_54692 = ((Gid_54692 >= (NI32)(Id_54697 + 1)) ? Gid_54692 : (NI32)(Id_54697 + 1));
}
N_NIMCALL(TY54547*, Getmodule_189256)(NimStringDesc* Filename_189258) {
TY54547* Result_189259;
NI I_189282;
NI HEX3Atmp_189283;
NI Res_189285;
NIM_BOOL LOC3;
Result_189259 = 0;
I_189282 = 0;
HEX3Atmp_189283 = 0;
HEX3Atmp_189283 = (Compmods_189227->Sup.len-1);
Res_189285 = 0;
Res_189285 = 0;
while (1) {
if (!(Res_189285 <= HEX3Atmp_189283)) goto LA1;
I_189282 = Res_189285;
LOC3 = nossameFile(Compmods_189227->data[I_189282].Filename, Filename_189258);
if (!LOC3) goto LA4;
Result_189259 = Compmods_189227->data[I_189282].Module;
goto BeforeRet;
LA4: ;
Res_189285 += 1;
} LA1: ;
BeforeRet: ;
return Result_189259;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11216)(TY10402* C_11218) {
NIM_BOOL Result_11219;
Result_11219 = 0;
Result_11219 = !((((*(*C_11218).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11219;
}
static N_INLINE(void, Rtladdcycleroot_11852)(TY10402* C_11854) {
Incl_10674(&Gch_10808.Cycleroots, C_11854);
}
static N_INLINE(void, Incref_12802)(TY10402* C_12804) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3001(&(*C_12804).Refcount, 8);
LOC3 = Canbecycleroot_11216(C_12804);
if (!LOC3) goto LA4;
Rtladdcycleroot_11852(C_12804);
LA4: ;
}
static N_INLINE(void, Decref_12601)(TY10402* C_12603) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3006(&(*C_12603).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12201(C_12603);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11216(C_12603);
if (!LOC5) goto LA6;
Rtladdcycleroot_11852(C_12603);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_12814, void* Src_12815) {
TY10402* LOC4;
TY10402* LOC8;
if (!!((Src_12815 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11212(Src_12815);
Incref_12802(LOC4);
LA2: ;
if (!!(((*Dest_12814) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11212((*Dest_12814));
Decref_12601(LOC8);
LA6: ;
(*Dest_12814) = Src_12815;
}
N_NIMCALL(void, Registermodule_189229)(NimStringDesc* Filename_189231, TY54547* Module_189232) {
NI Length_189243;
Length_189243 = 0;
Length_189243 = Compmods_189227->Sup.len;
Compmods_189227 = (TY189208*) setLengthSeq(&(Compmods_189227)->Sup, sizeof(TY189206), (NI32)(Length_189243 + 1));
asgnRefNoCycle((void**) &Compmods_189227->data[Length_189243].Filename, copyString(Filename_189231));
asgnRef((void**) &Compmods_189227->data[Length_189243].Module, Module_189232);
}
N_NIMCALL(TY54547*, Newmodule_189286)(NimStringDesc* Filename_189288) {
TY54547* Result_189289;
TY37660 LOC1;
NIM_BOOL LOC3;
Result_189289 = 0;
Result_189289 = (TY54547*) newObj(NTI54523, sizeof(TY54547));
objectInit(Result_189289, NTI54547);
(*Result_189289).Sup.Id = -1;
(*Result_189289).Kind = ((NU8) 6);
memset((void*)&LOC1, 0, sizeof(LOC1));
nossplitFile(Filename_189288, &LOC1);
asgnRefNoCycle((void**) &(*Result_189289).Name, Getident_53016(LOC1.Name));
LOC3 = Isnimrodidentifier_76357((*(*Result_189289).Name).S);
if (!!(LOC3)) goto LA4;
Rawmessage_46557(((NU8) 19), (*(*Result_189289).Name).S);
LA4: ;
asgnRef((void**) &(*Result_189289).Owner, Result_189289);
(*Result_189289).Info = Newlineinfo_46578(Filename_189288, 1, 1);
(*Result_189289).Flags |=(1<<((NI32)(((NU8) 0))%(sizeof(NI32)*8)));
Initstrtable_54746(&(*Result_189289).Tab);
Registermodule_189229(Filename_189288, Result_189289);
Strtableadd_59061(&(*Result_189289).Tab, Result_189289);
return Result_189289;
}
static N_INLINE(NI, Getid_54693)(void) {
NI Result_54948;
Result_54948 = 0;
Result_54948 = Gid_54692;
Gid_54692 += 1;
return Result_54948;
}
N_NIMCALL(TY54547*, Compilemodule_189319)(NimStringDesc* Filename_189321, NIM_BOOL Ismainfile_189322, NIM_BOOL Issystemfile_189323) {
TY54547* Result_189355;
TY92031* Rd_189356;
NimStringDesc* F_189357;
NIM_BOOL LOC8;
Result_189355 = 0;
Rd_189356 = 0;
Rd_189356 = NIM_NIL;
F_189357 = 0;
F_189357 = nosaddFileExt(Filename_189321, ((NimStringDesc*) &TMP193856));
Result_189355 = Newmodule_189286(Filename_189321);
if (!Ismainfile_189322) goto LA2;
(*Result_189355).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LA2: ;
if (!Issystemfile_189323) goto LA5;
(*Result_189355).Flags |=(1<<((NI32)(((NU8) 16))%(sizeof(NI32)*8)));
LA5: ;
LOC8 = (Gcmd_45083 == ((NU8) 1));
if (LOC8) goto LA9;
LOC8 = (Gcmd_45083 == ((NU8) 2));
LA9: ;
if (!LOC8) goto LA10;
Rd_189356 = Handlesymbolfile_92060(Result_189355, F_189357);
if (!((*Result_189355).Sup.Id < 0)) goto LA13;
Internalerror_46575(((NimStringDesc*) &TMP193909));
LA13: ;
goto LA7;
LA10: ;
(*Result_189355).Sup.Id = Getid_54693();
LA7: ;
Processmodule_104035(Result_189355, F_189357, NIM_NIL, Rd_189356);
return Result_189355;
}
N_NIMCALL(TY54547*, Importmodule_189324)(NimStringDesc* Filename_189326) {
TY54547* Result_189327;
Result_189327 = 0;
Result_189327 = Getmodule_189256(Filename_189326);
if (!(Result_189327 == NIM_NIL)) goto LA2;
Result_189327 = Compilemodule_189319(Filename_189326, NIM_FALSE, NIM_FALSE);
goto LA1;
LA2: ;
if (!(((*Result_189327).Flags &(1<<((((NU8) 16))&31)))!=0)) goto LA4;
Limessage_46566((*Result_189327).Info, ((NU8) 37), (*(*Result_189327).Name).S);
goto LA1;
LA4: ;
LA1: ;
return Result_189327;
}
N_NIMCALL(void, Wantfile_189704)(NimStringDesc* Filename_189706) {
TY46536 LOC4;
if (!((Filename_189706) && (Filename_189706)->Sup.len == 0)) goto LA2;
LOC4 = Newlineinfo_46578(((NimStringDesc*) &TMP193911), 1, 1);
Limessage_46566(LOC4, ((NU8) 183), ((NimStringDesc*) &TMP193912));
LA2: ;
}
N_NIMCALL(void, Semanticpasses_189405)(void) {
TY104006 LOC1;
TY104006 LOC2;
TY104006 LOC3;
LOC1 = Verbosepass_184004();
Registerpass_104028(&LOC1);
LOC2 = Sempass_124001();
Registerpass_104028(&LOC2);
LOC3 = Transfpass_186005();
Registerpass_104028(&LOC3);
}
N_NIMCALL(void, Compileproject_189402)(NimStringDesc* Filename_189404) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY54547* LOC3;
NimStringDesc* LOC4;
TY54547* LOC5;
LOC1 = 0;
LOC1 = nosaddFileExt(((NimStringDesc*) &TMP194853), ((NimStringDesc*) &TMP193856));
LOC2 = 0;
LOC2 = nosJoinPath(Libpath_45111, LOC1);
LOC3 = 0;
LOC3 = Compilemodule_189319(LOC2, NIM_FALSE, NIM_TRUE);
LOC4 = 0;
LOC4 = nosaddFileExt(Filename_189404, ((NimStringDesc*) &TMP193856));
LOC5 = 0;
LOC5 = Compilemodule_189319(LOC4, NIM_TRUE, NIM_FALSE);
}
N_NIMCALL(void, Commandcompiletoc_189413)(NimStringDesc* Filename_189415) {
TY104006 LOC1;
TY104006 LOC2;
NimStringDesc* LOC6;
Semanticpasses_189405();
LOC1 = Cgenpass_159201();
Registerpass_104028(&LOC1);
LOC2 = Rodwritepass_110001();
Registerpass_104028(&LOC2);
Compileproject_189402(Filename_189415);
if (!!((Gcmd_45083 == ((NU8) 18)))) goto LA4;
LOC6 = 0;
LOC6 = nosChangeFileExt(Filename_189415, ((NimStringDesc*) &TMP193912));
Callccompiler_69797(LOC6);
LA4: ;
}
N_NIMCALL(void, Commandcompiletoecmascript_189601)(NimStringDesc* Filename_189603) {
TY104006 LOC1;
Gglobaloptions_45078 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_50574(((NU8) 20), ((NU8) 11));
Initdefines_63049();
Semanticpasses_189405();
LOC1 = Ecmasgenpass_176004();
Registerpass_104028(&LOC1);
Compileproject_189402(Filename_189603);
}
N_NIMCALL(void, Commandpretty_189643)(NimStringDesc* Filename_189645) {
TY54525* Module_189646;
NimStringDesc* LOC1;
NimStringDesc* LOC5;
Module_189646 = 0;
LOC1 = 0;
LOC1 = nosaddFileExt(Filename_189645, ((NimStringDesc*) &TMP193856));
Module_189646 = Parsefile_91031(LOC1);
if (!!((Module_189646 == NIM_NIL))) goto LA3;
LOC5 = 0;
LOC5 = Getoutfile_45144(Filename_189645, ((NimStringDesc*) &TMP195073));
Rendermodule_84035(Module_189646, LOC5, 0);
LA3: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18392, NimStringDesc* Src_18393) {
memcpy(((NCSTRING) (&(*Dest_18392).data[((*Dest_18392).Sup.len)-0])), ((NCSTRING) ((*Src_18393).data)), ((int) ((NI32)((NI32)((*Src_18393).Sup.len + 1) * 1))));
(*Dest_18392).Sup.len += (*Src_18393).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18409, NIM_CHAR C_18410) {
(*Dest_18409).data[((*Dest_18409).Sup.len)-0] = C_18410;
(*Dest_18409).data[((NI32)((*Dest_18409).Sup.len + 1))-0] = 0;
(*Dest_18409).Sup.len += 1;
}
N_NIMCALL(void, Commandgendepend_189407)(NimStringDesc* Filename_189409) {
TY104006 LOC1;
TY104006 LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
Semanticpasses_189405();
LOC1 = Gendependpass_185004();
Registerpass_104028(&LOC1);
LOC2 = Cleanuppass_184006();
Registerpass_104028(&LOC2);
Compileproject_189402(Filename_189409);
Generatedot_185006(Filename_189409);
LOC3 = 0;
LOC4 = 0;
LOC4 = nosChangeFileExt(Filename_189409, ((NimStringDesc*) &TMP195485));
LOC5 = 0;
LOC5 = nosChangeFileExt(Filename_189409, ((NimStringDesc*) &TMP195486));
LOC3 = rawNewString(LOC4->Sup.len + LOC5->Sup.len + 13);
appendString(LOC3, ((NimStringDesc*) &TMP195484));
appendString(LOC3, LOC4);
appendChar(LOC3, 32);
appendString(LOC3, LOC5);
Execexternalprogram_69563(LOC3);
}
N_NIMCALL(void, Commandcheck_189410)(NimStringDesc* Filename_189412) {
Semanticpasses_189405();
Compileproject_189402(Filename_189412);
}
N_NIMCALL(void, Commandscan_189658)(NimStringDesc* Filename_189660) {
NimStringDesc* F_189661;
TY74013* Stream_189662;
TY76267 L_189674;
TY76263* Tok_189675;
F_189661 = 0;
F_189661 = nosaddFileExt(Filename_189660, ((NimStringDesc*) &TMP193856));
Stream_189662 = 0;
Stream_189662 = Llstreamopen_74032(F_189661, ((NU8) 0));
if (!!((Stream_189662 == NIM_NIL))) goto LA2;
memset((void*)&L_189674, 0, sizeof(L_189674));
L_189674.Sup.Sup.m_type = NTI76267;
Tok_189675 = 0;
Tok_189675 = (TY76263*) newObj(NTI76261, sizeof(TY76263));
(*Tok_189675).m_type = NTI76263;
Openlexer_76298(&L_189674, F_189661, Stream_189662);
while (1) {
Rawgettok_76304(&L_189674, Tok_189675);
Printtok_76320(Tok_189675);
if (!((*Tok_189675).Toktype == ((NU8) 1))) goto LA6;
goto LA4;
LA6: ;
} LA4: ;
Closelexer_76316(&L_189674);
goto LA1;
LA2: ;
Rawmessage_46557(((NU8) 2), F_189661);
LA1: ;
}
N_NIMCALL(void, Commandinteractive_189616)(void) {
TY104006 LOC1;
TY104006 LOC2;
TY104006 LOC3;
TY104006 LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY54547* LOC7;
TY54547* M_189630;
TY74013* LOC8;
Gglobaloptions_45078 |=(1<<((NI32)(((NU8) 8))%(sizeof(NI32)*8)));
Settarget_50574(((NU8) 21), ((NU8) 12));
Initdefines_63049();
LOC1 = Verbosepass_184004();
Registerpass_104028(&LOC1);
LOC2 = Sempass_124001();
Registerpass_104028(&LOC2);
LOC3 = Transfpass_186005();
Registerpass_104028(&LOC3);
LOC4 = Evalpass_114046();
Registerpass_104028(&LOC4);
LOC5 = 0;
LOC5 = nosaddFileExt(((NimStringDesc*) &TMP194853), ((NimStringDesc*) &TMP193856));
LOC6 = 0;
LOC6 = nosJoinPath(Libpath_45111, LOC5);
LOC7 = 0;
LOC7 = Compilemodule_189319(LOC6, NIM_FALSE, NIM_TRUE);
M_189630 = 0;
M_189630 = Newmodule_189286(((NimStringDesc*) &TMP195489));
(*M_189630).Sup.Id = Getid_54693();
(*M_189630).Flags |=(1<<((NI32)(((NU8) 15))%(sizeof(NI32)*8)));
LOC8 = 0;
LOC8 = Llstreamopenstdin_74038();
Processmodule_104035(M_189630, ((NimStringDesc*) &TMP195489), LOC8, NIM_NIL);
}
N_NIMCALL(void, Maincommand_189201)(NimStringDesc* Cmd_189203, NimStringDesc* Filename_189204) {
TY37660 LOC4;
NU8 LOC5;
NimStringDesc* LOC6;
TY54525* LOC7;
Appendstr_42061(&Searchpaths_45080, Libpath_45111);
if (!!(((Filename_189204) && (Filename_189204)->Sup.len == 0))) goto LA2;
memset((void*)&LOC4, 0, sizeof(LOC4));
nossplitFile(Filename_189204, &LOC4);
Prependstr_42071(&Searchpaths_45080, LOC4.Dir);
LA2: ;
Setid_54695(100);
Gincludefile_104051 = Parsefile_91031;
Gimportmodule_104047 = Importmodule_189324;
LOC5 = Whichkeyword_71474(Cmd_189203);
switch (LOC5) {
case ((NU8) 107):
case ((NU8) 200):
case ((NU8) 176):
case ((NU8) 192):
Gcmd_45083 = ((NU8) 1);
Wantfile_189704(Filename_189204);
Commandcompiletoc_189413(Filename_189204);
break;
case ((NU8) 201):
asgnRefNoCycle((void**) &Cext_69342, copyString(((NimStringDesc*) &TMP194871)));
Gcmd_45083 = ((NU8) 2);
Wantfile_189704(Filename_189204);
Commandcompiletoc_189413(Filename_189204);
break;
case ((NU8) 204):
case ((NU8) 213):
asgnRefNoCycle((void**) &Cext_69342, copyString(((NimStringDesc*) &TMP194872)));
Gcmd_45083 = ((NU8) 3);
Wantfile_189704(Filename_189204);
Commandcompiletoc_189413(Filename_189204);
break;
case ((NU8) 179):
Gcmd_45083 = ((NU8) 18);
Wantfile_189704(Filename_189204);
Rawmessage_46557(((NU8) 177), Cmd_189203);
break;
case ((NU8) 202):
case ((NU8) 212):
Gcmd_45083 = ((NU8) 4);
Wantfile_189704(Filename_189204);
Commandcompiletoecmascript_189601(Filename_189204);
break;
case ((NU8) 203):
Gcmd_45083 = ((NU8) 5);
Wantfile_189704(Filename_189204);
Rawmessage_46557(((NU8) 177), Cmd_189203);
break;
case ((NU8) 205):
Gcmd_45083 = ((NU8) 7);
Wantfile_189704(Filename_189204);
Commandpretty_189643(Filename_189204);
break;
case ((NU8) 206):
Gcmd_45083 = ((NU8) 8);
Loadspecialconfig_79007(((NimStringDesc*) &TMP195074));
Wantfile_189704(Filename_189204);
Commanddoc_154001(Filename_189204);
break;
case ((NU8) 214):
Gcmd_45083 = ((NU8) 15);
Loadspecialconfig_79007(((NimStringDesc*) &TMP195074));
Wantfile_189704(Filename_189204);
Commandrst2html_154004(Filename_189204);
break;
case ((NU8) 215):
Gcmd_45083 = ((NU8) 16);
Loadspecialconfig_79007(((NimStringDesc*) &TMP195476));
Wantfile_189704(Filename_189204);
Commandrst2tex_154007(Filename_189204);
break;
case ((NU8) 207):
Gcmd_45083 = ((NU8) 9);
Wantfile_189704(Filename_189204);
Commandgendepend_189407(Filename_189204);
break;
case ((NU8) 208):
Gcmd_45083 = ((NU8) 10);
Listsymbols_63062();
break;
case ((NU8) 209):
Gcmd_45083 = ((NU8) 11);
Wantfile_189704(Filename_189204);
Commandcheck_189410(Filename_189204);
break;
case ((NU8) 210):
Gcmd_45083 = ((NU8) 12);
Wantfile_189704(Filename_189204);
LOC6 = 0;
LOC6 = nosaddFileExt(Filename_189204, ((NimStringDesc*) &TMP193856));
LOC7 = 0;
LOC7 = Parsefile_91031(LOC6);
break;
case ((NU8) 211):
Gcmd_45083 = ((NU8) 13);
Wantfile_189704(Filename_189204);
Commandscan_189658(Filename_189204);
Messageout_46554(((NimStringDesc*) &TMP195488));
break;
case ((NU8) 216):
Gcmd_45083 = ((NU8) 17);
Commandinteractive_189616();
break;
default:
Rawmessage_46557(((NU8) 177), Cmd_189203);
break;
}
}
N_NOINLINE(void, mainInit)(void) {
asgnRefNoCycle((void**) &Compmods_189227, (TY189208*) newSeq(NTI189208, 0));
}

