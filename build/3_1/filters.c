/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY54525 TY54525;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY54551 TY54551;
typedef struct TY46536 TY46536;
typedef struct TY54547 TY54547;
typedef struct TY53011 TY53011;
typedef struct TY54519 TY54519;
typedef struct TY74013 TY74013;
typedef struct TY53005 TY53005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY54549 TY54549;
typedef struct TY54539 TY54539;
typedef struct TY51008 TY51008;
typedef struct TY54529 TY54529;
typedef struct TY54527 TY54527;
typedef struct TY54543 TY54543;
typedef struct TY42013 TY42013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY46536 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY54525 {
TY54551* Typ;
NimStringDesc* Comment;
TY46536 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY54547* Sym;
} S4;
struct {TY53011* Ident;
} S5;
struct {TY54519* Sons;
} S6;
} KindU;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY53005 {
  TNimObject Sup;
NI Id;
};
struct TY54539 {
NU8 K;
NU8 S;
NU8 Flags;
TY54551* T;
TY51008* R;
NI A;
};
struct TY54551 {
  TY53005 Sup;
NU8 Kind;
TY54549* Sons;
TY54525* N;
NU8 Flags;
NU8 Callconv;
TY54547* Owner;
TY54547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY54539 Loc;
};
struct TY54529 {
TNimType* m_type;
NI Counter;
TY54527* Data;
};
struct TY54547 {
  TY53005 Sup;
NU8 Kind;
NU8 Magic;
TY54551* Typ;
TY53011* Name;
TY46536 Info;
TY54547* Owner;
NU32 Flags;
TY54529 Tab;
TY54525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY54539 Loc;
TY54543* Annex;
};
struct TY53011 {
  TY53005 Sup;
NimStringDesc* S;
TY53011* Next;
NI H;
};
struct TY74013 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY51008 {
  TNimObject Sup;
TY51008* Left;
TY51008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY42013 {
  TNimObject Sup;
TY42013* Prev;
TY42013* Next;
};
struct TY54543 {
  TY42013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY51008* Name;
TY54525* Path;
};
struct TY54519 {
  TGenericSeq Sup;
  TY54525* data[SEQ_DECL_SIZE];
};
struct TY54549 {
  TGenericSeq Sup;
  TY54551* data[SEQ_DECL_SIZE];
};
struct TY54527 {
  TGenericSeq Sup;
  TY54547* data[SEQ_DECL_SIZE];
};
N_NIMCALL(TY54525*, Getarg_89036)(TY54525* N_89038, NimStringDesc* Name_89039, NI Pos_89040);
static N_INLINE(NI, Sonslen_54803)(TY54525* N_54805);
N_NIMCALL(void, Invalidpragma_89032)(TY54525* N_89034);
N_NIMCALL(void, Limessage_46566)(TY46536 Info_46568, NU8 Msg_46569, NimStringDesc* Arg_46570);
N_NIMCALL(NimStringDesc*, Rendertree_84042)(TY54525* N_84044, NU8 Renderflags_84047);
N_NIMCALL(NIM_BOOL, Identeq_53028)(TY53011* Id_53030, NimStringDesc* Name_53031);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18308);
N_NIMCALL(NimStringDesc*, Strarg_89020)(TY54525* N_89022, NimStringDesc* Name_89023, NI Pos_89024, NimStringDesc* Default_89025);
N_NIMCALL(NIM_BOOL, Boolarg_89026)(TY54525* N_89028, NimStringDesc* Name_89029, NI Pos_89030, NIM_BOOL Default_89031);
N_NIMCALL(TY74013*, Llstreamopen_74025)(NimStringDesc* Data_74027);
N_NIMCALL(NIM_BOOL, Llstreamatend_74071)(TY74013* S_74073);
N_NIMCALL(NimStringDesc*, Llstreamreadline_74048)(TY74013* S_74050);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_23959, NIM_BOOL Leading_23960, NIM_BOOL Trailing_23961);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_24805, NimStringDesc* Prefix_24806);
N_NIMCALL(void, Llstreamwriteln_74067)(TY74013* S_74069, NimStringDesc* Data_74070);
N_NIMCALL(void, Llstreamclose_74040)(TY74013* S_74042);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* S_25288, NimStringDesc* Sub_25289, NimStringDesc* By_25290);
STRING_LITERAL(TMP193843, "startswith", 10);
STRING_LITERAL(TMP193844, "", 0);
STRING_LITERAL(TMP193845, "true", 4);
STRING_LITERAL(TMP193846, "false", 5);
STRING_LITERAL(TMP193847, "leading", 7);
STRING_LITERAL(TMP193848, "trailing", 8);
STRING_LITERAL(TMP193849, "sub", 3);
STRING_LITERAL(TMP193850, "by", 2);
static N_INLINE(NI, Sonslen_54803)(TY54525* N_54805) {
NI Result_55880;
Result_55880 = 0;
if (!(*N_54805).KindU.S6.Sons == 0) goto LA2;
Result_55880 = 0;
goto LA1;
LA2: ;
Result_55880 = (*N_54805).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_55880;
}
N_NIMCALL(void, Invalidpragma_89032)(TY54525* N_89034) {
NimStringDesc* LOC1;
LOC1 = 0;
LOC1 = Rendertree_84042(N_89034, 4);
Limessage_46566((*N_89034).Info, ((NU8) 160), LOC1);
}
N_NIMCALL(TY54525*, Getarg_89036)(TY54525* N_89038, NimStringDesc* Name_89039, NI Pos_89040) {
TY54525* Result_89041;
NI I_89076;
NI HEX3Atmp_89205;
NI LOC4;
NI Res_89207;
NIM_BOOL LOC13;
Result_89041 = 0;
Result_89041 = NIM_NIL;
if (!((*N_89038).Kind >= ((NU8) 1) && (*N_89038).Kind <= ((NU8) 18))) goto LA2;
goto BeforeRet;
LA2: ;
I_89076 = 0;
HEX3Atmp_89205 = 0;
LOC4 = Sonslen_54803(N_89038);
HEX3Atmp_89205 = (NI32)(LOC4 - 1);
Res_89207 = 0;
Res_89207 = 1;
while (1) {
if (!(Res_89207 <= HEX3Atmp_89205)) goto LA5;
I_89076 = Res_89207;
if (!((*(*N_89038).KindU.S6.Sons->data[I_89076]).Kind == ((NU8) 23))) goto LA7;
if (!!(((*(*(*N_89038).KindU.S6.Sons->data[I_89076]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA10;
Invalidpragma_89032(N_89038);
LA10: ;
LOC13 = Identeq_53028((*(*(*N_89038).KindU.S6.Sons->data[I_89076]).KindU.S6.Sons->data[0]).KindU.S5.Ident, Name_89039);
if (!LOC13) goto LA14;
Result_89041 = (*(*N_89038).KindU.S6.Sons->data[I_89076]).KindU.S6.Sons->data[1];
goto BeforeRet;
LA14: ;
goto LA6;
LA7: ;
if (!(I_89076 == Pos_89040)) goto LA16;
Result_89041 = (*N_89038).KindU.S6.Sons->data[I_89076];
goto BeforeRet;
goto LA6;
LA16: ;
LA6: ;
Res_89207 += 1;
} LA5: ;
BeforeRet: ;
return Result_89041;
}
N_NIMCALL(NIM_CHAR, Chararg_89014)(TY54525* N_89016, NimStringDesc* Name_89017, NI Pos_89018, NIM_CHAR Default_89019) {
NIM_CHAR Result_89214;
TY54525* X_89215;
Result_89214 = 0;
X_89215 = 0;
X_89215 = Getarg_89036(N_89016, Name_89017, Pos_89018);
if (!(X_89215 == NIM_NIL)) goto LA2;
Result_89214 = Default_89019;
goto LA1;
LA2: ;
if (!((*X_89215).Kind == ((NU8) 5))) goto LA4;
Result_89214 = ((NIM_CHAR) (((NI) (((NI) ((*X_89215).KindU.S1.Intval))))));
goto LA1;
LA4: ;
Invalidpragma_89032(N_89016);
LA1: ;
return Result_89214;
}
N_NIMCALL(NimStringDesc*, Strarg_89020)(TY54525* N_89022, NimStringDesc* Name_89023, NI Pos_89024, NimStringDesc* Default_89025) {
NimStringDesc* Result_89254;
TY54525* X_89255;
Result_89254 = 0;
X_89255 = 0;
X_89255 = Getarg_89036(N_89022, Name_89023, Pos_89024);
if (!(X_89255 == NIM_NIL)) goto LA2;
Result_89254 = copyString(Default_89025);
goto LA1;
LA2: ;
if (!((*X_89255).Kind >= ((NU8) 14) && (*X_89255).Kind <= ((NU8) 16))) goto LA4;
Result_89254 = copyString((*X_89255).KindU.S3.Strval);
goto LA1;
LA4: ;
Invalidpragma_89032(N_89022);
LA1: ;
return Result_89254;
}
N_NIMCALL(NIM_BOOL, Boolarg_89026)(TY54525* N_89028, NimStringDesc* Name_89029, NI Pos_89030, NIM_BOOL Default_89031) {
NIM_BOOL Result_89297;
TY54525* X_89298;
NIM_BOOL LOC4;
NIM_BOOL LOC8;
Result_89297 = 0;
X_89298 = 0;
X_89298 = Getarg_89036(N_89028, Name_89029, Pos_89030);
if (!(X_89298 == NIM_NIL)) goto LA2;
Result_89297 = Default_89031;
goto LA1;
LA2: ;
LOC4 = ((*X_89298).Kind == ((NU8) 2));
if (!(LOC4)) goto LA5;
LOC4 = Identeq_53028((*X_89298).KindU.S5.Ident, ((NimStringDesc*) &TMP193845));
LA5: ;
if (!LOC4) goto LA6;
Result_89297 = NIM_TRUE;
goto LA1;
LA6: ;
LOC8 = ((*X_89298).Kind == ((NU8) 2));
if (!(LOC8)) goto LA9;
LOC8 = Identeq_53028((*X_89298).KindU.S5.Ident, ((NimStringDesc*) &TMP193846));
LA9: ;
if (!LOC8) goto LA10;
Result_89297 = NIM_FALSE;
goto LA1;
LA10: ;
Invalidpragma_89032(N_89028);
LA1: ;
return Result_89297;
}
N_NIMCALL(TY74013*, Filterstrip_89009)(TY74013* Stdin_89011, NimStringDesc* Filename_89012, TY54525* Call_89013) {
TY74013* Result_89357;
NimStringDesc* Pattern_89358;
NIM_BOOL Leading_89359;
NIM_BOOL Trailing_89360;
NIM_BOOL LOC2;
NimStringDesc* Line_89361;
NimStringDesc* Stripped_89362;
NIM_BOOL LOC4;
Result_89357 = 0;
Pattern_89358 = 0;
Pattern_89358 = Strarg_89020(Call_89013, ((NimStringDesc*) &TMP193843), 1, ((NimStringDesc*) &TMP193844));
Leading_89359 = 0;
Leading_89359 = Boolarg_89026(Call_89013, ((NimStringDesc*) &TMP193847), 2, NIM_TRUE);
Trailing_89360 = 0;
Trailing_89360 = Boolarg_89026(Call_89013, ((NimStringDesc*) &TMP193848), 3, NIM_TRUE);
Result_89357 = Llstreamopen_74025(((NimStringDesc*) &TMP193844));
while (1) {
LOC2 = Llstreamatend_74071(Stdin_89011);
if (!!(LOC2)) goto LA1;
Line_89361 = 0;
Line_89361 = Llstreamreadline_74048(Stdin_89011);
Stripped_89362 = 0;
Stripped_89362 = nsuStrip(Line_89361, Leading_89359, Trailing_89360);
LOC4 = (Pattern_89358->Sup.len == 0);
if (LOC4) goto LA5;
LOC4 = nsuStartsWith(Stripped_89362, Pattern_89358);
LA5: ;
if (!LOC4) goto LA6;
Llstreamwriteln_74067(Result_89357, Stripped_89362);
goto LA3;
LA6: ;
Llstreamwriteln_74067(Result_89357, Line_89361);
LA3: ;
} LA1: ;
Llstreamclose_74040(Stdin_89011);
return Result_89357;
}
N_NIMCALL(TY74013*, Filterreplace_89004)(TY74013* Stdin_89006, NimStringDesc* Filename_89007, TY54525* Call_89008) {
TY74013* Result_89372;
NimStringDesc* Sub_89373;
NimStringDesc* By_89378;
NIM_BOOL LOC5;
NimStringDesc* Line_89379;
NimStringDesc* LOC6;
Result_89372 = 0;
Sub_89373 = 0;
Sub_89373 = Strarg_89020(Call_89008, ((NimStringDesc*) &TMP193849), 1, ((NimStringDesc*) &TMP193844));
if (!(Sub_89373->Sup.len == 0)) goto LA2;
Invalidpragma_89032(Call_89008);
LA2: ;
By_89378 = 0;
By_89378 = Strarg_89020(Call_89008, ((NimStringDesc*) &TMP193850), 2, ((NimStringDesc*) &TMP193844));
Result_89372 = Llstreamopen_74025(((NimStringDesc*) &TMP193844));
while (1) {
LOC5 = Llstreamatend_74071(Stdin_89006);
if (!!(LOC5)) goto LA4;
Line_89379 = 0;
Line_89379 = Llstreamreadline_74048(Stdin_89006);
LOC6 = 0;
LOC6 = nsuReplaceStr(Line_89379, Sub_89373, By_89378);
Llstreamwriteln_74067(Result_89372, LOC6);
} LA4: ;
Llstreamclose_74040(Stdin_89006);
return Result_89372;
}
N_NOINLINE(void, filtersInit)(void) {
}

