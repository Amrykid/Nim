/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY146077 TY146077;
typedef struct TY146690 TY146690;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY146137 TY146137;
typedef struct TY146135 TY146135;
typedef struct TY146686 TY146686;
typedef struct TY76281 TY76281;
typedef struct TY146695 TY146695;
typedef struct TY146684 TY146684;
typedef struct TY10802 TY10802;
typedef struct TY10818 TY10818;
typedef struct TY11190 TY11190;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11188 TY11188;
typedef struct TY146139 TY146139;
typedef struct TY146075 TY146075;
typedef struct TY47532 TY47532;
typedef struct TY39422 TY39422;
typedef NU8 TY22602[32];
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef NimStringDesc* TY148479[12];
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY146135 {
NU8 Kind;
NI Ival;
NimStringDesc* Symbol;
NI Line;
NI Col;
};
struct TY146690 {
  TNimObject Sup;
NI Idx;
TY146137* Tok;
TY146686* S;
TY76281* Indentstack;
NimStringDesc* Filename;
NI Line;
NI Col;
NIM_BOOL Hastoc;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY146684 {
NimStringDesc* Key;
TY146077* Value;
};
typedef NI TY26135[256];
struct TY146686 {
NI Ulevel;
NI Olevel;
TY146695* Subs;
TY146695* Refs;
TY26135 Underlinetolevel;
TY26135 Overlinetolevel;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11188 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11190 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY11188 Stat;
};
struct TY146139 {
  TNimObject Sup;
NCSTRING Buf;
NI Bufpos;
NI Line;
NI Col;
NI Baseindent;
NIM_BOOL Skippounds;
};
struct TY146077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY146075* Sons;
};
struct TY47532 {
NI16 Line;
NI16 Col;
int Fileindex;
};
typedef N_NIMCALL_PTR(TY146077*, TY150071) (TY146690* P_150077);
typedef NimStringDesc* TY149839[3];
typedef NI TY149844[3];
typedef NI TY8814[16];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY146137 {
  TGenericSeq Sup;
  TY146135 data[SEQ_DECL_SIZE];
};
struct TY76281 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY146695 {
  TGenericSeq Sup;
  TY146684 data[SEQ_DECL_SIZE];
};
struct TY146075 {
  TGenericSeq Sup;
  TY146077* data[SEQ_DECL_SIZE];
};
struct TY39422 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Rawmessage_47553)(NU8 Msg_47555, NimStringDesc* Arg_47556);
N_NIMCALL(void, Initparser_146839)(TY146690* P_146842, TY146686* Sharedstate_146843);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14204, NI Len_14205);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18708);
N_NIMCALL(TY146686*, Newsharedstate_146710)(void);
N_NIMCALL(void*, newObj)(TNimType* Typ_13707, NI Size_13708);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(void, Gettokens_146438)(NimStringDesc* Buffer_146440, NIM_BOOL Skippounds_146441, TY146137** Tokens_146443);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
N_NIMCALL(void, Rawgettok_146386)(TY146139* L_146389, TY146135* Tok_146391);
N_NIMCALL(void, Getthing_146158)(TY146139* L_146161, TY146135* Tok_146163, TY22602 S_146164);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Getindent_146358)(TY146139* L_146361, TY146135* Tok_146363);
N_NIMCALL(NI, Getindentaux_146237)(TY146139* L_146240, NI Start_146241);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_25750, NIM_CHAR C_25751);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18687);
N_NIMCALL(void, Getadornment_146202)(TY146139* L_146205, TY146135* Tok_146207);
N_NIMCALL(TY146077*, Resolvesubs_150494)(TY146690* P_150497, TY146077* N_150498);
N_NIMCALL(NI, Findsub_146998)(TY146690* P_147001, TY146077* N_147002);
N_NIMCALL(NimStringDesc*, Addnodes_146108)(TY146077* N_146110);
N_NIMCALL(void, Addnodesaux_146874)(TY146077* N_146876, NimStringDesc** Result_146878);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18782, NI Addlen_18783);
N_NIMCALL(NI, Rsonslen_146091)(TY146077* N_146093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18647, NimStringDesc* B_18648);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_24638, NimStringDesc* B_24639);
N_NIMCALL(NimStringDesc*, Getenv_39625)(NimStringDesc* Key_39627);
N_NIMCALL(TY146077*, Newrstnode_146097)(NU8 Kind_146099, NimStringDesc* S_146100);
N_NIMCALL(TY146077*, Newrstnode_146094)(NU8 Kind_146096);
N_NIMCALL(void, Rstmessage_146765)(TY146690* P_146767, NU8 Msgkind_146768, NimStringDesc* Arg_146769);
N_NIMCALL(void, Limessage_47562)(TY47532 Info_47564, NU8 Msg_47565, NimStringDesc* Arg_47566);
N_NIMCALL(TY47532, Tokinfo_146760)(TY146690* P_146762, TY146135* Tok_146763);
N_NIMCALL(TY47532, Newlineinfo_47574)(NimStringDesc* Filename_47576, NI Line_47577, NI Col_47578);
N_NIMCALL(TY146077*, Findref_147121)(TY146690* P_147124, NimStringDesc* Key_147125);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_146105)(TY146077* N_146107);
N_NIMCALL(void, Rstnodetorefnameaux_146922)(TY146077* N_146924, NimStringDesc** R_146926, NIM_BOOL* B_146928);
N_NIMCALL(void, Addson_146101)(TY146077* Father_146103, TY146077* Son_146104);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* Seq_18835, NI Elemsize_18836);
N_NIMCALL(TY146077*, Parsedoc_149155)(TY146690* P_149158);
N_NIMCALL(TY146077*, Parsesectionwrapper_150035)(TY146690* P_150038);
N_NIMCALL(void, Parsesection_148508)(TY146690* P_148511, TY146077* Result_148512);
N_NIMCALL(NI, Currind_146774)(TY146690* P_146776);
N_NIMCALL(void, Pushind_146778)(TY146690* P_146781, NI Ind_146782);
N_NIMCALL(void, Popind_146801)(TY146690* P_146804);
N_NIMCALL(NU8, Whichsection_148862)(TY146690* P_148864);
N_NIMCALL(NIM_BOOL, Match_147762)(TY146690* P_147764, NI Start_147765, NimStringDesc* Expr_147766);
N_NIMCALL(NIM_BOOL, Allcharsinset_25830)(NimStringDesc* S_25832, TY22602 Theset_25833);
N_NIMCALL(NI, Tokenafternewline_148784)(TY146690* P_148786);
N_NIMCALL(NIM_BOOL, Prednl_148822)(TY146690* P_148824);
N_NIMCALL(NIM_BOOL, Islineblock_148813)(TY146690* P_148815);
N_NIMCALL(void, Rstmessage_146770)(TY146690* P_146772, NU8 Msgkind_146773);
N_NIMCALL(NIM_BOOL, Isdeflist_148839)(TY146690* P_148841);
N_NIMCALL(NIM_BOOL, Isoptionlist_148858)(TY146690* P_148860);
N_NIMCALL(TY146077*, Parseliteralblock_148682)(TY146690* P_148685);
N_NIMCALL(TY146077*, Parsebulletlist_149571)(TY146690* P_149574);
N_NIMCALL(TY146077*, Parselineblock_148875)(TY146690* P_148878);
N_NIMCALL(TY146077*, Parsedotdot_148678)(TY146690* P_148681);
N_NIMCALL(NimStringDesc*, Getdirective_148270)(TY146690* P_148273);
N_NIMCALL(NU8, Getdirkind_148495)(NimStringDesc* S_148497);
N_NIMCALL(NI, Binarystrsearch_46147)(NimStringDesc** X_46150, NI X_46150Len0, NimStringDesc* Y_46151);
N_NIMCALL(TY146077*, Dirinclude_150227)(TY146690* P_150230);
N_NIMCALL(TY146077*, Parsedirective_150213)(TY146690* P_150216, NU8 Flags_150217, TY150071 Contentparser_150218);
N_NIMCALL(TY146077*, Parsedirective_150079)(TY146690* P_150082, NU8 Flags_150083);
N_NIMCALL(TY146077*, Newleaf_147513)(TY146690* P_147516);
N_NIMCALL(void, Parseline_148502)(TY146690* P_148505, TY146077* Father_148506);
N_NIMCALL(void, Parseinline_148188)(TY146690* P_148191, TY146077* Father_148192);
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_147640)(TY146690* P_147642, NimStringDesc* Markup_147643);
N_NIMCALL(void, Parseuntil_148111)(TY146690* P_148114, TY146077* Father_148115, NimStringDesc* Postfix_148116, NIM_BOOL Interpretbackslash_148117);
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_147597)(TY146690* P_147599, NimStringDesc* Markup_147600);
N_NIMCALL(void, Parsebackslash_147691)(TY146690* P_147694, TY146077* Father_147695);
N_NIMCALL(TY146077*, Parsepostfix_148010)(TY146690* P_148013, TY146077* N_148014);
N_NIMCALL(void, Fixupembeddedref_147941)(TY146077* N_147943, TY146077* A_147944, TY146077* B_147945);
N_NIMCALL(void, Setref_147078)(TY146690* P_147081, NimStringDesc* Key_147082, TY146077* Value_147083);
N_NIMCALL(void, Parseurl_148067)(TY146690* P_148070, TY146077* Father_148071);
N_NIMCALL(NIM_BOOL, Isurl_148053)(TY146690* P_148055, NI I_148056);
N_NIMCALL(TY146077*, Parsefields_148554)(TY146690* P_148557);
N_NIMCALL(TY146077*, Parsefield_148513)(TY146690* P_148516);
N_NIMCALL(NIM_BOOL, Indfollows_150198)(TY146690* P_150200);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24981, NIM_BOOL Leading_24982, NIM_BOOL Trailing_24983);
N_NIMCALL(NimStringDesc*, Findfile_46088)(NimStringDesc* F_46090);
N_NIMCALL(NimStringDesc*, Getfieldvalue_146111)(TY146077* N_146113, NimStringDesc* Fieldname_146114);
N_NIMCALL(void, Internalerror_47571)(NimStringDesc* Errmsg_47573);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19779, TNimType* Typ_19780);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(NI, nsuFindStr)(NimStringDesc* S_26219, NimStringDesc* Sub_26220, NI Start_26221);
N_NIMCALL(TY146077*, Dirimage_150268)(TY146690* P_150271);
N_NIMCALL(TY146077*, Dirfigure_150274)(TY146690* P_150277);
N_NIMCALL(TY146077*, Dirtitle_150280)(TY146690* P_150283);
N_NIMCALL(TY146077*, Dircontainer_150251)(TY146690* P_150254);
N_NIMCALL(TY146077*, Dircontents_150286)(TY146690* P_150289);
N_NIMCALL(TY146077*, Dirraw_150318)(TY146690* P_150321);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_24595, NimStringDesc* B_24596);
N_NIMCALL(void, Dirrawaux_150299)(TY146690* P_150302, TY146077** Result_150304, NU8 Kind_150305, TY150071 Contentparser_150306);
N_NIMCALL(TY146077*, Parsedirbody_150221)(TY146690* P_150224, TY150071 Contentparser_150225);
N_NIMCALL(TY146077*, Dircodeblock_150242)(TY146690* P_150245);
N_NIMCALL(TY146077*, Dirindex_150292)(TY146690* P_150295);
N_NIMCALL(TY146077*, Getreferencename_147518)(TY146690* P_147521, NimStringDesc* Endstr_147522);
N_NIMCALL(TY146077*, Untileol_147550)(TY146690* P_147553);
N_NIMCALL(void, Expect_147580)(TY146690* P_147583, NimStringDesc* Tok_147584);
N_NIMCALL(void, Setsub_147035)(TY146690* P_147038, NimStringDesc* Key_147039, TY146077* Value_147040);
N_NIMCALL(TY146077*, Parsecomment_148397)(TY146690* P_148400);
N_NIMCALL(TY146077*, Parseenumlist_149833)(TY146690* P_149836);
N_NIMCALL(TY146077*, Parsedefinitionlist_149739)(TY146690* P_149742);
N_NIMCALL(TY146077*, Parsetransition_149426)(TY146690* P_149429);
N_NIMCALL(TY146077*, Parseheadline_149005)(TY146690* P_149008);
N_NIMCALL(NI, Getlevel_148762)(NI* Map_148765, NI* Lvl_148767, NIM_CHAR C_148768);
N_NIMCALL(TY146077*, Parseoverline_149485)(TY146690* P_149488);
N_NIMCALL(TY146077*, Parsesimpletable_149159)(TY146690* P_149162);
N_NIMCALL(void, Getcolumns_149051)(TY146690* P_149054, TY76281** Cols_149056);
N_NIMCALL(NI, Tokend_149045)(TY146690* P_149047);
N_NIMCALL(TY146077*, Parseoptionlist_149633)(TY146690* P_149636);
N_NIMCALL(void, Parseparagraph_148936)(TY146690* P_148939, TY146077* Result_148940);
N_NIMCALL(void, Addsonifnotnil_146598)(TY146077* Father_146600, TY146077* Son_146601);
N_NIMCALL(NU8, Sonkind_149919)(TY146077* Father_149921, NI I_149922);
N_NIMCALL(NIM_BOOL, Matcheshyperlink_147250)(TY146077* H_147252, NimStringDesc* Filename_147253);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25769, NimStringDesc* Prefix_25770);
N_NIMCALL(NIM_BOOL, Eqrstnodes_147211)(TY146077* A_147213, TY146077* B_147214);
N_NIMCALL(NI, Cmpnodes_147141)(TY146077* A_147143, TY146077* B_147144);
NIM_CONST TY22602 Symchars_146130 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP148483, "", 0);
STRING_LITERAL(TMP148484, "author", 6);
STRING_LITERAL(TMP148485, "authors", 7);
STRING_LITERAL(TMP148486, "code-block", 10);
STRING_LITERAL(TMP148487, "container", 9);
STRING_LITERAL(TMP148488, "contents", 8);
STRING_LITERAL(TMP148489, "figure", 6);
STRING_LITERAL(TMP148490, "image", 5);
STRING_LITERAL(TMP148491, "include", 7);
STRING_LITERAL(TMP148492, "index", 5);
STRING_LITERAL(TMP148493, "raw", 3);
STRING_LITERAL(TMP148494, "title", 5);
NIM_CONST TY148479 Dirids_148478 = {((NimStringDesc*) &TMP148483),
((NimStringDesc*) &TMP148484),
((NimStringDesc*) &TMP148485),
((NimStringDesc*) &TMP148486),
((NimStringDesc*) &TMP148487),
((NimStringDesc*) &TMP148488),
((NimStringDesc*) &TMP148489),
((NimStringDesc*) &TMP148490),
((NimStringDesc*) &TMP148491),
((NimStringDesc*) &TMP148492),
((NimStringDesc*) &TMP148493),
((NimStringDesc*) &TMP148494)}
;
static NIM_CONST TY22602 TMP198108 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;static NIM_CONST TY22602 TMP198109 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP198110, "\012", 1);
STRING_LITERAL(TMP198111, "#", 1);
static NIM_CONST TY22602 TMP198112 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP198113, "ii", 2);
STRING_LITERAL(TMP198114, " a", 2);
STRING_LITERAL(TMP198115, "i", 1);
STRING_LITERAL(TMP198116, "ai", 2);
STRING_LITERAL(TMP198117, "::", 2);
STRING_LITERAL(TMP198118, "+", 1);
STRING_LITERAL(TMP198119, "*", 1);
STRING_LITERAL(TMP198120, "-", 1);
STRING_LITERAL(TMP198121, "|", 1);
STRING_LITERAL(TMP198122, "..", 2);
STRING_LITERAL(TMP198123, ":", 1);
STRING_LITERAL(TMP198124, "(e) ", 4);
STRING_LITERAL(TMP198125, "+a+", 3);
STRING_LITERAL(TMP198126, "-w", 2);
STRING_LITERAL(TMP198127, "--w", 3);
STRING_LITERAL(TMP198128, "/w", 2);
STRING_LITERAL(TMP198129, "//w", 3);
STRING_LITERAL(TMP198130, "e) ", 3);
STRING_LITERAL(TMP198131, "e. ", 3);
static NIM_CONST TY22602 TMP198132 = {
0x00, 0x00, 0x00, 0x00, 0x84, 0xA1, 0x00, 0x14,
0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x08,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP198133, "\\", 1);
STRING_LITERAL(TMP198134, "**", 2);
static NIM_CONST TY22602 TMP198135 = {
0x00, 0x00, 0x00, 0x00, 0x86, 0xF2, 0x00, 0xCC,
0x00, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0x20,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP198136, "``", 2);
STRING_LITERAL(TMP198137, "\\\\", 2);
STRING_LITERAL(TMP198138, " ", 1);
STRING_LITERAL(TMP198139, "`", 1);
STRING_LITERAL(TMP198140, "_", 1);
STRING_LITERAL(TMP198141, ">", 1);
STRING_LITERAL(TMP198142, "<", 1);
STRING_LITERAL(TMP198143, ":w:", 3);
STRING_LITERAL(TMP198144, "idx", 3);
STRING_LITERAL(TMP198145, "literal", 7);
STRING_LITERAL(TMP198146, "strong", 6);
STRING_LITERAL(TMP198147, "emphasis", 8);
STRING_LITERAL(TMP198148, "sub", 3);
STRING_LITERAL(TMP198149, "subscript", 9);
STRING_LITERAL(TMP198150, "sup", 3);
STRING_LITERAL(TMP198151, "supscript", 9);
STRING_LITERAL(TMP198152, "//", 2);
STRING_LITERAL(TMP198153, ".", 1);
STRING_LITERAL(TMP198154, "getFieldValue (2): ", 19);
STRING_LITERAL(TMP198155, "\001\001", 2);
STRING_LITERAL(TMP198156, "\000\001\002", 3);
STRING_LITERAL(TMP198157, "Too many binary zeros in include file", 37);
STRING_LITERAL(TMP198158, "html", 4);
STRING_LITERAL(TMP198159, "file", 4);
STRING_LITERAL(TMP198160, "latex", 5);
STRING_LITERAL(TMP198161, " _", 2);
STRING_LITERAL(TMP198162, " |", 2);
STRING_LITERAL(TMP198163, "replace", 7);
STRING_LITERAL(TMP198164, " [", 2);
STRING_LITERAL(TMP198165, "]", 1);
NIM_CONST TY149839 Wildcards_149838 = {((NimStringDesc*) &TMP198124),
((NimStringDesc*) &TMP198130),
((NimStringDesc*) &TMP198131)}
;
NIM_CONST TY149844 Wildpos_149843 = {1,
0,
0}
;
extern NIM_CONST TY149839 Wildcards_149838;
extern NIM_CONST TY149844 Wildpos_149843;
STRING_LITERAL(TMP198166, "rst.parseSection()", 18);
extern TNimType* NTI146690; /* TRstParser */
extern TNimType* NTI76281; /* seq[int] */
extern TNimType* NTI146137; /* TTokenSeq */
extern TNimType* NTI146688; /* PSharedState */
extern TNimType* NTI146695; /* seq[TSubstitution] */
extern TY11190 Gch_11210;
extern TNimType* NTI146139; /* TLexer */
extern TNimType* NTI146073; /* PRSTNode */
extern TNimType* NTI146075; /* TRstNodeSeq */
extern TNimType* NTI146008; /* TRstNodeKind */
extern TNimType* NTI39422; /* seq[string] */
N_NIMCALL(void, Initparser_146839)(TY146690* P_146842, TY146686* Sharedstate_146843) {
unsureAsgnRef((void**) &(*P_146842).Indentstack, (TY76281*) newSeq(NTI76281, 1));
(*P_146842).Indentstack->data[0] = 0;
unsureAsgnRef((void**) &(*P_146842).Tok, (TY146137*) newSeq(NTI146137, 0));
(*P_146842).Idx = 0;
unsureAsgnRef((void**) &(*P_146842).Filename, copyString(((NimStringDesc*) &TMP148483)));
(*P_146842).Hastoc = NIM_FALSE;
(*P_146842).Col = 0;
(*P_146842).Line = 1;
unsureAsgnRef((void**) &(*P_146842).S, Sharedstate_146843);
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI32)((NU32)(((NI) (Usr_11614))) - (NU32)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11210.Zct, C_12603);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3001(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3006(&(*C_13222).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(TY146686*, Newsharedstate_146710)(void) {
TY146686* Result_146712;
Result_146712 = 0;
Result_146712 = (TY146686*) newObj(NTI146688, sizeof(TY146686));
asgnRefNoCycle((void**) &(*Result_146712).Subs, (TY146695*) newSeq(NTI146695, 0));
asgnRefNoCycle((void**) &(*Result_146712).Refs, (TY146695*) newSeq(NTI146695, 0));
return Result_146712;
}
N_NIMCALL(void, Getthing_146158)(TY146139* L_146161, TY146135* Tok_146163, TY22602 S_146164) {
NI Pos_146165;
(*Tok_146163).Kind = ((NU8) 3);
(*Tok_146163).Line = (*L_146161).Line;
(*Tok_146163).Col = (*L_146161).Col;
Pos_146165 = 0;
Pos_146165 = (*L_146161).Bufpos;
while (1) {
(*Tok_146163).Symbol = addChar((*Tok_146163).Symbol, (*L_146161).Buf[Pos_146165]);
Pos_146165 += 1;
if (!!(((S_146164[((NU8)((*L_146161).Buf[Pos_146165]))/8] &(1<<(((NU8)((*L_146161).Buf[Pos_146165]))%8)))!=0))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_146161).Col += (NI32)(Pos_146165 - (*L_146161).Bufpos);
(*L_146161).Bufpos = Pos_146165;
}
N_NIMCALL(NI, Getindentaux_146237)(TY146139* L_146240, NI Start_146241) {
NI Result_146242;
NI Pos_146243;
NCSTRING Buf_146244;
NIM_BOOL LOC22;
Result_146242 = 0;
Pos_146243 = 0;
Pos_146243 = Start_146241;
Buf_146244 = 0;
Buf_146244 = (*L_146240).Buf;
if (!((NU8)(Buf_146244[Pos_146243]) == (NU8)(13))) goto LA2;
if (!((NU8)(Buf_146244[(NI32)(Pos_146243 + 1)]) == (NU8)(10))) goto LA5;
Pos_146243 += 2;
goto LA4;
LA5: ;
Pos_146243 += 1;
LA4: ;
goto LA1;
LA2: ;
if (!((NU8)(Buf_146244[Pos_146243]) == (NU8)(10))) goto LA7;
Pos_146243 += 1;
goto LA1;
LA7: ;
LA1: ;
if (!(*L_146240).Skippounds) goto LA10;
if (!((NU8)(Buf_146244[Pos_146243]) == (NU8)(35))) goto LA13;
Pos_146243 += 1;
LA13: ;
if (!((NU8)(Buf_146244[Pos_146243]) == (NU8)(35))) goto LA16;
Pos_146243 += 1;
LA16: ;
LA10: ;
while (1) {
switch (((NU8)(Buf_146244[Pos_146243]))) {
case 32:
case 11:
case 12:
Pos_146243 += 1;
Result_146242 += 1;
break;
case 9:
Pos_146243 += 1;
Result_146242 = (NI32)((NI32)(Result_146242 - (NI32)(Result_146242 % 8)) + 8);
break;
default:
goto LA18;
break;
}
} LA18: ;
if (!((NU8)(Buf_146244[Pos_146243]) == (NU8)(0))) goto LA20;
Result_146242 = 0;
goto LA19;
LA20: ;
LOC22 = ((NU8)(Buf_146244[Pos_146243]) == (NU8)(10));
if (LOC22) goto LA23;
LOC22 = ((NU8)(Buf_146244[Pos_146243]) == (NU8)(13));
LA23: ;
if (!LOC22) goto LA24;
Result_146242 = Getindentaux_146237(L_146240, Pos_146243);
goto LA19;
LA24: ;
LA19: ;
(*L_146240).Bufpos = Pos_146243;
return Result_146242;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793) {
memcpy(((NCSTRING) (&(*Dest_18792).data[((*Dest_18792).Sup.len)-0])), ((NCSTRING) ((*Src_18793).data)), ((int) ((NI32)((NI32)((*Src_18793).Sup.len + 1) * 1))));
(*Dest_18792).Sup.len += (*Src_18793).Sup.len;
}
N_NIMCALL(void, Getindent_146358)(TY146139* L_146361, TY146135* Tok_146363) {
NimStringDesc* LOC1;
NimStringDesc* LOC2;
(*L_146361).Line += 1;
(*Tok_146363).Line = (*L_146361).Line;
(*Tok_146363).Col = 0;
(*Tok_146363).Kind = ((NU8) 1);
(*Tok_146363).Ival = Getindentaux_146237(L_146361, (*L_146361).Bufpos);
(*L_146361).Col = (*Tok_146363).Ival;
(*Tok_146363).Ival = (((NI32)((*Tok_146363).Ival - (*L_146361).Baseindent) >= 0) ? (NI32)((*Tok_146363).Ival - (*L_146361).Baseindent) : 0);
LOC1 = 0;
LOC2 = 0;
LOC2 = nsuRepeatChar((*Tok_146363).Ival, 32);
LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP198110));
appendString(LOC1, LOC2);
unsureAsgnRef((void**) &(*Tok_146363).Symbol, LOC1);
}
N_NIMCALL(void, Getadornment_146202)(TY146139* L_146205, TY146135* Tok_146207) {
NI Pos_146208;
NIM_CHAR C_146209;
(*Tok_146207).Kind = ((NU8) 4);
(*Tok_146207).Line = (*L_146205).Line;
(*Tok_146207).Col = (*L_146205).Col;
Pos_146208 = 0;
Pos_146208 = (*L_146205).Bufpos;
C_146209 = 0;
C_146209 = (*L_146205).Buf[Pos_146208];
while (1) {
(*Tok_146207).Symbol = addChar((*Tok_146207).Symbol, (*L_146205).Buf[Pos_146208]);
Pos_146208 += 1;
if (!!(((NU8)((*L_146205).Buf[Pos_146208]) == (NU8)(C_146209)))) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
(*L_146205).Col += (NI32)(Pos_146208 - (*L_146205).Bufpos);
(*L_146205).Bufpos = Pos_146208;
}
N_NIMCALL(void, Rawgettok_146386)(TY146139* L_146389, TY146135* Tok_146391) {
NIM_CHAR C_146392;
unsureAsgnRef((void**) &(*Tok_146391).Symbol, copyString(((NimStringDesc*) &TMP148483)));
(*Tok_146391).Ival = 0;
C_146392 = 0;
C_146392 = (*L_146389).Buf[(*L_146389).Bufpos];
switch (((NU8)(C_146392))) {
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 48 ... 57:
Getthing_146158(L_146389, Tok_146391, TMP198108);
break;
case 32:
case 9:
case 11:
case 12:
Getthing_146158(L_146389, Tok_146391, TMP198109);
(*Tok_146391).Kind = ((NU8) 2);
if (!(((NU8)((*L_146389).Buf[(*L_146389).Bufpos])) == ((NU8)(13)) || ((NU8)((*L_146389).Buf[(*L_146389).Bufpos])) == ((NU8)(10)))) goto LA2;
Rawgettok_146386(L_146389, Tok_146391);
LA2: ;
break;
case 13:
case 10:
Getindent_146358(L_146389, Tok_146391);
break;
case 33:
case 34:
case 35:
case 36:
case 37:
case 38:
case 39:
case 40:
case 41:
case 42:
case 43:
case 44:
case 45:
case 46:
case 47:
case 58:
case 59:
case 60:
case 61:
case 62:
case 63:
case 64:
case 91:
case 92:
case 93:
case 94:
case 95:
case 96:
case 123:
case 124:
case 125:
case 126:
Getadornment_146202(L_146389, Tok_146391);
if (!((*Tok_146391).Symbol->Sup.len <= 3)) goto LA5;
(*Tok_146391).Kind = ((NU8) 5);
LA5: ;
break;
default:
(*Tok_146391).Line = (*L_146389).Line;
(*Tok_146391).Col = (*L_146389).Col;
if (!((NU8)(C_146392) == (NU8)(0))) goto LA8;
(*Tok_146391).Kind = ((NU8) 0);
goto LA7;
LA8: ;
(*Tok_146391).Kind = ((NU8) 6);
(*Tok_146391).Symbol = addChar((*Tok_146391).Symbol, C_146392);
(*L_146389).Bufpos += 1;
(*L_146389).Col += 1;
LA7: ;
break;
}
(*Tok_146391).Col = (((NI32)((*Tok_146391).Col - (*L_146389).Baseindent) >= 0) ? (NI32)((*Tok_146391).Col - (*L_146389).Baseindent) : 0);
}
N_NIMCALL(void, Gettokens_146438)(NimStringDesc* Buffer_146440, NIM_BOOL Skippounds_146441, TY146137** Tokens_146443) {
TY146139 L_146444;
NI Length_146455;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
memset((void*)&L_146444, 0, sizeof(L_146444));
L_146444.Sup.m_type = NTI146139;
Length_146455 = 0;
Length_146455 = (*Tokens_146443)->Sup.len;
L_146444.Buf = Buffer_146440->data;
L_146444.Line = 1;
LOC3 = ((NU8)(L_146444.Buf[0]) == (NU8)(239));
if (!(LOC3)) goto LA4;
LOC3 = ((NU8)(L_146444.Buf[1]) == (NU8)(187));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((NU8)(L_146444.Buf[2]) == (NU8)(191));
LA5: ;
if (!LOC2) goto LA6;
L_146444.Bufpos += 3;
LA6: ;
L_146444.Skippounds = Skippounds_146441;
if (!Skippounds_146441) goto LA9;
if (!((NU8)(L_146444.Buf[L_146444.Bufpos]) == (NU8)(35))) goto LA12;
L_146444.Bufpos += 1;
LA12: ;
if (!((NU8)(L_146444.Buf[L_146444.Bufpos]) == (NU8)(35))) goto LA15;
L_146444.Bufpos += 1;
LA15: ;
L_146444.Baseindent = 0;
while (1) {
if (!((NU8)(L_146444.Buf[L_146444.Bufpos]) == (NU8)(32))) goto LA17;
L_146444.Bufpos += 1;
L_146444.Baseindent += 1;
} LA17: ;
LA9: ;
while (1) {
Length_146455 += 1;
(*Tokens_146443) = (TY146137*) setLengthSeq(&((*Tokens_146443))->Sup, sizeof(TY146135), Length_146455);
Rawgettok_146386(&L_146444, &(*Tokens_146443)->data[(NI32)(Length_146455 - 1)]);
if (!((*Tokens_146443)->data[(NI32)(Length_146455 - 1)].Kind == ((NU8) 0))) goto LA20;
goto LA18;
LA20: ;
} LA18: ;
if (!((*Tokens_146443)->data[0].Kind == ((NU8) 2))) goto LA23;
(*Tokens_146443)->data[0].Ival = (*Tokens_146443)->data[0].Symbol->Sup.len;
(*Tokens_146443)->data[0].Kind = ((NU8) 1);
LA23: ;
}
N_NIMCALL(NI, Rsonslen_146091)(TY146077* N_146093) {
NI Result_146616;
Result_146616 = 0;
Result_146616 = (*N_146093).Sons->Sup.len;
return Result_146616;
}
N_NIMCALL(void, Addnodesaux_146874)(TY146077* N_146876, NimStringDesc** Result_146878) {
NI I_146910;
NI HEX3Atmp_146912;
NI LOC4;
NI Res_146914;
if (!((*N_146876).Kind == ((NU8) 62))) goto LA2;
(*Result_146878) = resizeString((*Result_146878), (*N_146876).Text->Sup.len + 0);
appendString((*Result_146878), (*N_146876).Text);
goto LA1;
LA2: ;
I_146910 = 0;
HEX3Atmp_146912 = 0;
LOC4 = Rsonslen_146091(N_146876);
HEX3Atmp_146912 = (NI32)(LOC4 - 1);
Res_146914 = 0;
Res_146914 = 0;
while (1) {
if (!(Res_146914 <= HEX3Atmp_146912)) goto LA5;
I_146910 = Res_146914;
Addnodesaux_146874((*N_146876).Sons->data[I_146910], Result_146878);
Res_146914 += 1;
} LA5: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Addnodes_146108)(TY146077* N_146110) {
NimStringDesc* Result_146920;
Result_146920 = 0;
Result_146920 = copyString(((NimStringDesc*) &TMP148483));
Addnodesaux_146874(N_146110, &Result_146920);
return Result_146920;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18647, NimStringDesc* B_18648) {
NIM_BOOL Result_18649;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
Result_18649 = 0;
if (!(A_18647 == B_18648)) goto LA2;
Result_18649 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18647 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18648 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18649 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18647).Sup.len == (*B_18648).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18647).data)), ((NCSTRING) ((*B_18648).data)), ((int) ((NI32)((*A_18647).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18649 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18649;
}
N_NIMCALL(NI, Findsub_146998)(TY146690* P_147001, TY146077* N_147002) {
NI Result_147003;
NimStringDesc* Key_147004;
NI I_147012;
NI HEX3Atmp_147024;
NI Res_147026;
NI I_147020;
NI HEX3Atmp_147030;
NI Res_147032;
NI LOC7;
Result_147003 = 0;
Key_147004 = 0;
Key_147004 = Addnodes_146108(N_147002);
I_147012 = 0;
HEX3Atmp_147024 = 0;
HEX3Atmp_147024 = ((*(*P_147001).S).Subs->Sup.len-1);
Res_147026 = 0;
Res_147026 = 0;
while (1) {
if (!(Res_147026 <= HEX3Atmp_147024)) goto LA1;
I_147012 = Res_147026;
if (!eqStrings(Key_147004, (*(*P_147001).S).Subs->data[I_147012].Key)) goto LA3;
Result_147003 = I_147012;
goto BeforeRet;
LA3: ;
Res_147026 += 1;
} LA1: ;
I_147020 = 0;
HEX3Atmp_147030 = 0;
HEX3Atmp_147030 = ((*(*P_147001).S).Subs->Sup.len-1);
Res_147032 = 0;
Res_147032 = 0;
while (1) {
if (!(Res_147032 <= HEX3Atmp_147030)) goto LA5;
I_147020 = Res_147032;
LOC7 = nsuCmpIgnoreStyle(Key_147004, (*(*P_147001).S).Subs->data[I_147020].Key);
if (!(LOC7 == 0)) goto LA8;
Result_147003 = I_147020;
goto BeforeRet;
LA8: ;
Res_147032 += 1;
} LA5: ;
Result_147003 = -1;
BeforeRet: ;
return Result_147003;
}
N_NIMCALL(TY146077*, Newrstnode_146094)(NU8 Kind_146096) {
TY146077* Result_146630;
Result_146630 = 0;
Result_146630 = (TY146077*) newObj(NTI146073, sizeof(TY146077));
asgnRefNoCycle((void**) &(*Result_146630).Sons, (TY146075*) newSeq(NTI146075, 0));
(*Result_146630).Kind = Kind_146096;
return Result_146630;
}
N_NIMCALL(TY146077*, Newrstnode_146097)(NU8 Kind_146099, NimStringDesc* S_146100) {
TY146077* Result_146666;
Result_146666 = 0;
Result_146666 = Newrstnode_146094(Kind_146099);
asgnRefNoCycle((void**) &(*Result_146666).Text, copyString(S_146100));
return Result_146666;
}
N_NIMCALL(TY47532, Tokinfo_146760)(TY146690* P_146762, TY146135* Tok_146763) {
TY47532 Result_146764;
memset((void*)&Result_146764, 0, sizeof(Result_146764));
Result_146764 = Newlineinfo_47574((*P_146762).Filename, (NI32)((*P_146762).Line + (*Tok_146763).Line), (NI32)((*P_146762).Col + (*Tok_146763).Col));
return Result_146764;
}
N_NIMCALL(void, Rstmessage_146765)(TY146690* P_146767, NU8 Msgkind_146768, NimStringDesc* Arg_146769) {
TY47532 LOC1;
LOC1 = Tokinfo_146760(P_146767, &(*P_146767).Tok->data[(*P_146767).Idx]);
Limessage_47562(LOC1, Msgkind_146768, Arg_146769);
}
N_NIMCALL(TY146077*, Findref_147121)(TY146690* P_147124, NimStringDesc* Key_147125) {
TY146077* Result_147126;
NI I_147134;
NI HEX3Atmp_147136;
NI Res_147138;
Result_147126 = 0;
I_147134 = 0;
HEX3Atmp_147136 = 0;
HEX3Atmp_147136 = ((*(*P_147124).S).Refs->Sup.len-1);
Res_147138 = 0;
Res_147138 = 0;
while (1) {
if (!(Res_147138 <= HEX3Atmp_147136)) goto LA1;
I_147134 = Res_147138;
if (!eqStrings(Key_147125, (*(*P_147124).S).Refs->data[I_147134].Key)) goto LA3;
Result_147126 = (*(*P_147124).S).Refs->data[I_147134].Value;
goto BeforeRet;
LA3: ;
Res_147138 += 1;
} LA1: ;
BeforeRet: ;
return Result_147126;
}
N_NIMCALL(void, Rstnodetorefnameaux_146922)(TY146077* N_146924, NimStringDesc** R_146926, NIM_BOOL* B_146928) {
NI I_146947;
NI HEX3Atmp_146980;
NI Res_146982;
NI I_146978;
NI HEX3Atmp_146986;
NI LOC20;
NI Res_146988;
if (!((*N_146924).Kind == ((NU8) 62))) goto LA2;
I_146947 = 0;
HEX3Atmp_146980 = 0;
HEX3Atmp_146980 = (NI32)((NI32)((*N_146924).Text->Sup.len + 0) - 1);
Res_146982 = 0;
Res_146982 = 0;
while (1) {
if (!(Res_146982 <= HEX3Atmp_146980)) goto LA4;
I_146947 = Res_146982;
switch (((NU8)((*N_146924).Text->data[I_146947]))) {
case 48 ... 57:
if (!(*B_146928)) goto LA6;
(*R_146926) = addChar((*R_146926), 45);
(*B_146928) = NIM_FALSE;
LA6: ;
if (!((*R_146926)->Sup.len == 0)) goto LA9;
(*R_146926) = addChar((*R_146926), 90);
LA9: ;
(*R_146926) = addChar((*R_146926), (*N_146924).Text->data[I_146947]);
break;
case 97 ... 122:
if (!(*B_146928)) goto LA12;
(*R_146926) = addChar((*R_146926), 45);
(*B_146928) = NIM_FALSE;
LA12: ;
(*R_146926) = addChar((*R_146926), (*N_146924).Text->data[I_146947]);
break;
case 65 ... 90:
if (!(*B_146928)) goto LA15;
(*R_146926) = addChar((*R_146926), 45);
(*B_146928) = NIM_FALSE;
LA15: ;
(*R_146926) = addChar((*R_146926), ((NIM_CHAR) (((NI) ((NI32)((NI32)(((NU8)((*N_146924).Text->data[I_146947])) - 65) + 97))))));
break;
default:
if (!(0 < (*R_146926)->Sup.len)) goto LA18;
(*B_146928) = NIM_TRUE;
LA18: ;
break;
}
Res_146982 += 1;
} LA4: ;
goto LA1;
LA2: ;
I_146978 = 0;
HEX3Atmp_146986 = 0;
LOC20 = Rsonslen_146091(N_146924);
HEX3Atmp_146986 = (NI32)(LOC20 - 1);
Res_146988 = 0;
Res_146988 = 0;
while (1) {
if (!(Res_146988 <= HEX3Atmp_146986)) goto LA21;
I_146978 = Res_146988;
Rstnodetorefnameaux_146922((*N_146924).Sons->data[I_146978], R_146926, B_146928);
Res_146988 += 1;
} LA21: ;
LA1: ;
}
N_NIMCALL(NimStringDesc*, Rstnodetorefname_146105)(TY146077* N_146107) {
NimStringDesc* Result_146994;
NIM_BOOL B_146995;
Result_146994 = 0;
Result_146994 = copyString(((NimStringDesc*) &TMP148483));
B_146995 = 0;
B_146995 = NIM_FALSE;
Rstnodetorefnameaux_146922(N_146107, &Result_146994, &B_146995);
return Result_146994;
}
N_NIMCALL(void, Addson_146101)(TY146077* Father_146103, TY146077* Son_146104) {
(*Father_146103).Sons = (TY146075*) incrSeq(&((*Father_146103).Sons)->Sup, sizeof(TY146077*));
asgnRefNoCycle((void**) &(*Father_146103).Sons->data[(*Father_146103).Sons->Sup.len-1], Son_146104);
}
N_NIMCALL(TY146077*, Resolvesubs_150494)(TY146690* P_150497, TY146077* N_150498) {
TY146077* Result_150499;
NI X_150511;
NimStringDesc* Key_150514;
NimStringDesc* E_150515;
TY146077* Y_150516;
NimStringDesc* LOC10;
NI I_150535;
NI HEX3Atmp_150537;
NI LOC14;
NI Res_150539;
Result_150499 = 0;
Result_150499 = N_150498;
if (!(N_150498 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_150498).Kind) {
case ((NU8) 61):
X_150511 = 0;
X_150511 = Findsub_146998(P_150497, N_150498);
if (!(0 <= X_150511)) goto LA5;
Result_150499 = (*(*P_150497).S).Subs->data[X_150511].Value;
goto LA4;
LA5: ;
Key_150514 = 0;
Key_150514 = Addnodes_146108(N_150498);
E_150515 = 0;
E_150515 = Getenv_39625(Key_150514);
if (!!(((E_150515) && (E_150515)->Sup.len == 0))) goto LA8;
Result_150499 = Newrstnode_146097(((NU8) 62), E_150515);
goto LA7;
LA8: ;
Rstmessage_146765(&(*P_150497), ((NU8) 217), Key_150514);
LA7: ;
LA4: ;
break;
case ((NU8) 39):
Y_150516 = 0;
LOC10 = 0;
LOC10 = Rstnodetorefname_146105(N_150498);
Y_150516 = Findref_147121(P_150497, LOC10);
if (!!((Y_150516 == NIM_NIL))) goto LA12;
Result_150499 = Newrstnode_146094(((NU8) 38));
(*N_150498).Kind = ((NU8) 0);
Addson_146101(Result_150499, N_150498);
Addson_146101(Result_150499, Y_150516);
LA12: ;
break;
case ((NU8) 62):
break;
case ((NU8) 44):
(*P_150497).Hastoc = NIM_TRUE;
break;
default:
I_150535 = 0;
HEX3Atmp_150537 = 0;
LOC14 = Rsonslen_146091(N_150498);
HEX3Atmp_150537 = (NI32)(LOC14 - 1);
Res_150539 = 0;
Res_150539 = 0;
while (1) {
if (!(Res_150539 <= HEX3Atmp_150537)) goto LA15;
I_150535 = Res_150539;
asgnRefNoCycle((void**) &(*N_150498).Sons->data[I_150535], Resolvesubs_150494(P_150497, (*N_150498).Sons->data[I_150535]));
Res_150539 += 1;
} LA15: ;
break;
}
BeforeRet: ;
return Result_150499;
}
N_NIMCALL(NI, Currind_146774)(TY146690* P_146776) {
NI Result_146777;
Result_146777 = 0;
Result_146777 = (*P_146776).Indentstack->data[((*P_146776).Indentstack->Sup.len-1)];
return Result_146777;
}
N_NIMCALL(void, Pushind_146778)(TY146690* P_146781, NI Ind_146782) {
(*P_146781).Indentstack = (TY76281*) incrSeq(&((*P_146781).Indentstack)->Sup, sizeof(NI));
(*P_146781).Indentstack->data[(*P_146781).Indentstack->Sup.len-1] = Ind_146782;
}
N_NIMCALL(void, Popind_146801)(TY146690* P_146804) {
if (!(1 < (*P_146804).Indentstack->Sup.len)) goto LA2;
(*P_146804).Indentstack = (TY76281*) setLengthSeq(&((*P_146804).Indentstack)->Sup, sizeof(NI), (NI32)((*P_146804).Indentstack->Sup.len - 1));
LA2: ;
}
N_NIMCALL(NIM_BOOL, Match_147762)(TY146690* P_147764, NI Start_147765, NimStringDesc* Expr_147766) {
NIM_BOOL Result_147767;
NI I_147768;
NI J_147769;
NI Last_147772;
NIM_BOOL LOC2;
NIM_CHAR C_147855;
NI Length_147856;
NIM_BOOL LOC8;
NIM_BOOL LOC10;
NIM_BOOL LOC11;
Result_147767 = 0;
I_147768 = 0;
I_147768 = 0;
J_147769 = 0;
J_147769 = Start_147765;
Last_147772 = 0;
Last_147772 = (NI32)((NI32)(Expr_147766->Sup.len + 0) - 1);
while (1) {
if (!(I_147768 <= Last_147772)) goto LA1;
switch (((NU8)(Expr_147766->data[I_147768]))) {
case 119:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 3));
break;
case 32:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 2));
break;
case 105:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 1));
break;
case 112:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 5));
break;
case 97:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 4));
break;
case 111:
Result_147767 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 6));
break;
case 84:
Result_147767 = NIM_TRUE;
break;
case 69:
Result_147767 = ((7 &(1<<(((*P_147764).Tok->data[J_147769].Kind)&7)))!=0);
break;
case 101:
LOC2 = ((*P_147764).Tok->data[J_147769].Kind == ((NU8) 3));
if (LOC2) goto LA3;
LOC2 = eqStrings((*P_147764).Tok->data[J_147769].Symbol, ((NimStringDesc*) &TMP198111));
LA3: ;
Result_147767 = LOC2;
if (!Result_147767) goto LA5;
switch (((NU8)((*P_147764).Tok->data[J_147769].Symbol->data[0]))) {
case 97 ... 122:
case 65 ... 90:
Result_147767 = ((*P_147764).Tok->data[J_147769].Symbol->Sup.len == 1);
break;
case 48 ... 57:
Result_147767 = Allcharsinset_25830((*P_147764).Tok->data[J_147769].Symbol, TMP198112);
break;
default:
break;
}
LA5: ;
break;
default:
C_147855 = 0;
C_147855 = Expr_147766->data[I_147768];
Length_147856 = 0;
Length_147856 = 0;
while (1) {
LOC8 = (I_147768 <= Last_147772);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)(Expr_147766->data[I_147768]) == (NU8)(C_147855));
LA9: ;
if (!LOC8) goto LA7;
I_147768 += 1;
Length_147856 += 1;
} LA7: ;
I_147768 -= 1;
LOC11 = ((48 &(1<<(((*P_147764).Tok->data[J_147769].Kind)&7)))!=0);
if (!(LOC11)) goto LA12;
LOC11 = ((*P_147764).Tok->data[J_147769].Symbol->Sup.len == Length_147856);
LA12: ;
LOC10 = LOC11;
if (!(LOC10)) goto LA13;
LOC10 = ((NU8)((*P_147764).Tok->data[J_147769].Symbol->data[0]) == (NU8)(C_147855));
LA13: ;
Result_147767 = LOC10;
break;
}
if (!!(Result_147767)) goto LA15;
goto BeforeRet;
LA15: ;
J_147769 += 1;
I_147768 += 1;
} LA1: ;
Result_147767 = NIM_TRUE;
BeforeRet: ;
return Result_147767;
}
N_NIMCALL(NI, Tokenafternewline_148784)(TY146690* P_148786) {
NI Result_148787;
Result_148787 = 0;
Result_148787 = (*P_148786).Idx;
while (1) {
switch ((*P_148786).Tok->data[Result_148787].Kind) {
case ((NU8) 0):
goto LA1;
break;
case ((NU8) 1):
Result_148787 += 1;
goto LA1;
break;
default:
Result_148787 += 1;
break;
}
} LA1: ;
return Result_148787;
}
N_NIMCALL(NIM_BOOL, Prednl_148822)(TY146690* P_148824) {
NIM_BOOL Result_148825;
NIM_BOOL LOC4;
NI LOC6;
Result_148825 = 0;
Result_148825 = NIM_TRUE;
if (!(0 < (*P_148824).Idx)) goto LA2;
LOC4 = ((*P_148824).Tok->data[(NI32)((*P_148824).Idx - 1)].Kind == ((NU8) 1));
if (!(LOC4)) goto LA5;
LOC6 = Currind_146774(P_148824);
LOC4 = ((*P_148824).Tok->data[(NI32)((*P_148824).Idx - 1)].Ival == LOC6);
LA5: ;
Result_148825 = LOC4;
LA2: ;
return Result_148825;
}
N_NIMCALL(NIM_BOOL, Islineblock_148813)(TY146690* P_148815) {
NIM_BOOL Result_148816;
NI J_148817;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_148816 = 0;
J_148817 = 0;
J_148817 = Tokenafternewline_148784(P_148815);
LOC2 = ((*P_148815).Tok->data[(*P_148815).Idx].Col == (*P_148815).Tok->data[J_148817].Col);
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_148815).Tok->data[J_148817].Symbol, ((NimStringDesc*) &TMP198121));
LA3: ;
LOC1 = LOC2;
if (LOC1) goto LA4;
LOC1 = ((*P_148815).Tok->data[(*P_148815).Idx].Col < (*P_148815).Tok->data[J_148817].Col);
LA4: ;
Result_148816 = LOC1;
return Result_148816;
}
N_NIMCALL(void, Rstmessage_146770)(TY146690* P_146772, NU8 Msgkind_146773) {
TY47532 LOC1;
LOC1 = Tokinfo_146760(P_146772, &(*P_146772).Tok->data[(*P_146772).Idx]);
Limessage_47562(LOC1, Msgkind_146773, (*P_146772).Tok->data[(*P_146772).Idx].Symbol);
}
N_NIMCALL(NIM_BOOL, Isdeflist_148839)(TY146690* P_148841) {
NIM_BOOL Result_148842;
NI J_148843;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
Result_148842 = 0;
J_148843 = 0;
J_148843 = Tokenafternewline_148784(P_148841);
LOC2 = ((*P_148841).Tok->data[(*P_148841).Idx].Col < (*P_148841).Tok->data[J_148843].Col);
if (!(LOC2)) goto LA3;
LOC2 = ((104 &(1<<(((*P_148841).Tok->data[J_148843].Kind)&7)))!=0);
LA3: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA4;
LOC1 = !(eqStrings((*P_148841).Tok->data[(NI32)(J_148843 - 2)].Symbol, ((NimStringDesc*) &TMP198117)));
LA4: ;
Result_148842 = LOC1;
return Result_148842;
}
N_NIMCALL(NIM_BOOL, Isoptionlist_148858)(TY146690* P_148860) {
NIM_BOOL Result_148861;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_148861 = 0;
LOC3 = Match_147762(P_148860, (*P_148860).Idx, ((NimStringDesc*) &TMP198126));
if (LOC3) goto LA4;
LOC3 = Match_147762(P_148860, (*P_148860).Idx, ((NimStringDesc*) &TMP198127));
LA4: ;
LOC2 = LOC3;
if (LOC2) goto LA5;
LOC2 = Match_147762(P_148860, (*P_148860).Idx, ((NimStringDesc*) &TMP198128));
LA5: ;
LOC1 = LOC2;
if (LOC1) goto LA6;
LOC1 = Match_147762(P_148860, (*P_148860).Idx, ((NimStringDesc*) &TMP198129));
LA6: ;
Result_148861 = LOC1;
return Result_148861;
}
N_NIMCALL(NU8, Whichsection_148862)(TY146690* P_148864) {
NU8 Result_148865;
NIM_BOOL LOC2;
NIM_BOOL LOC5;
NIM_BOOL LOC8;
NI LOC12;
NIM_BOOL LOC13;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NIM_BOOL LOC21;
NIM_BOOL LOC22;
NIM_BOOL LOC28;
NIM_BOOL LOC32;
NIM_BOOL LOC36;
NIM_BOOL LOC40;
NIM_BOOL LOC43;
NIM_BOOL LOC46;
NIM_BOOL LOC49;
NI LOC53;
NIM_BOOL LOC54;
NIM_BOOL LOC57;
NIM_BOOL LOC60;
Result_148865 = 0;
switch ((*P_148864).Tok->data[(*P_148864).Idx].Kind) {
case ((NU8) 4):
LOC2 = Match_147762(P_148864, (NI32)((*P_148864).Idx + 1), ((NimStringDesc*) &TMP198113));
if (!LOC2) goto LA3;
Result_148865 = ((NU8) 3);
goto LA1;
LA3: ;
LOC5 = Match_147762(P_148864, (NI32)((*P_148864).Idx + 1), ((NimStringDesc*) &TMP198114));
if (!LOC5) goto LA6;
Result_148865 = ((NU8) 29);
goto LA1;
LA6: ;
LOC8 = Match_147762(P_148864, (NI32)((*P_148864).Idx + 1), ((NimStringDesc*) &TMP198115));
if (!LOC8) goto LA9;
Result_148865 = ((NU8) 2);
goto LA1;
LA9: ;
Result_148865 = ((NU8) 62);
LA1: ;
break;
case ((NU8) 5):
LOC12 = Tokenafternewline_148784(P_148864);
LOC13 = Match_147762(P_148864, LOC12, ((NimStringDesc*) &TMP198116));
if (!LOC13) goto LA14;
Result_148865 = ((NU8) 1);
goto LA11;
LA14: ;
if (!eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198117))) goto LA16;
Result_148865 = ((NU8) 24);
goto LA11;
LA16: ;
LOC19 = Prednl_148822(P_148864);
if (!(LOC19)) goto LA20;
LOC22 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198118));
if (LOC22) goto LA23;
LOC22 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198119));
LA23: ;
LOC21 = LOC22;
if (LOC21) goto LA24;
LOC21 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198120));
LA24: ;
LOC19 = LOC21;
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA25;
LOC18 = ((*P_148864).Tok->data[(NI32)((*P_148864).Idx + 1)].Kind == ((NU8) 2));
LA25: ;
if (!LOC18) goto LA26;
Result_148865 = ((NU8) 5);
goto LA11;
LA26: ;
LOC28 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198121));
if (!(LOC28)) goto LA29;
LOC28 = Islineblock_148813(P_148864);
LA29: ;
if (!LOC28) goto LA30;
Result_148865 = ((NU8) 26);
goto LA11;
LA30: ;
LOC32 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198122));
if (!(LOC32)) goto LA33;
LOC32 = Prednl_148822(P_148864);
LA33: ;
if (!LOC32) goto LA34;
Result_148865 = ((NU8) 40);
goto LA11;
LA34: ;
LOC36 = eqStrings((*P_148864).Tok->data[(*P_148864).Idx].Symbol, ((NimStringDesc*) &TMP198123));
if (!(LOC36)) goto LA37;
LOC36 = Prednl_148822(P_148864);
LA37: ;
if (!LOC36) goto LA38;
Result_148865 = ((NU8) 13);
goto LA11;
LA38: ;
LOC40 = Match_147762(P_148864, (*P_148864).Idx, ((NimStringDesc*) &TMP198124));
if (!LOC40) goto LA41;
Result_148865 = ((NU8) 7);
goto LA11;
LA41: ;
LOC43 = Match_147762(P_148864, (*P_148864).Idx, ((NimStringDesc*) &TMP198125));
if (!LOC43) goto LA44;
Result_148865 = ((NU8) 30);
Rstmessage_146770(P_148864, ((NU8) 184));
goto LA11;
LA44: ;
LOC46 = Isdeflist_148839(P_148864);
if (!LOC46) goto LA47;
Result_148865 = ((NU8) 9);
goto LA11;
LA47: ;
LOC49 = Isoptionlist_148858(P_148864);
if (!LOC49) goto LA50;
Result_148865 = ((NU8) 17);
goto LA11;
LA50: ;
Result_148865 = ((NU8) 4);
LA11: ;
break;
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC53 = Tokenafternewline_148784(P_148864);
LOC54 = Match_147762(P_148864, LOC53, ((NimStringDesc*) &TMP198116));
if (!LOC54) goto LA55;
Result_148865 = ((NU8) 1);
goto LA52;
LA55: ;
LOC57 = Isdeflist_148839(P_148864);
if (!LOC57) goto LA58;
Result_148865 = ((NU8) 9);
goto LA52;
LA58: ;
LOC60 = Match_147762(P_148864, (*P_148864).Idx, ((NimStringDesc*) &TMP198130));
if (LOC60) goto LA61;
LOC60 = Match_147762(P_148864, (*P_148864).Idx, ((NimStringDesc*) &TMP198131));
LA61: ;
if (!LOC60) goto LA62;
Result_148865 = ((NU8) 7);
goto LA52;
LA62: ;
Result_148865 = ((NU8) 4);
LA52: ;
break;
default:
Result_148865 = ((NU8) 62);
break;
}
return Result_148865;
}
N_NIMCALL(TY146077*, Parseliteralblock_148682)(TY146690* P_148685) {
TY146077* Result_148686;
TY146077* N_148687;
NI Indent_148697;
NimStringDesc* LOC8;
Result_148686 = 0;
Result_148686 = Newrstnode_146094(((NU8) 24));
N_148687 = 0;
N_148687 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP148483));
if (!((*P_148685).Tok->data[(*P_148685).Idx].Kind == ((NU8) 1))) goto LA2;
Indent_148697 = 0;
Indent_148697 = (*P_148685).Tok->data[(*P_148685).Idx].Ival;
(*P_148685).Idx += 1;
while (1) {
switch ((*P_148685).Tok->data[(*P_148685).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_148685).Tok->data[(*P_148685).Idx].Ival < Indent_148697)) goto LA6;
goto LA4;
goto LA5;
LA6: ;
(*N_148687).Text = resizeString((*N_148687).Text, 1);
appendString((*N_148687).Text, ((NimStringDesc*) &TMP198110));
LOC8 = 0;
LOC8 = nsuRepeatChar((NI32)((*P_148685).Tok->data[(*P_148685).Idx].Ival - Indent_148697), 32);
(*N_148687).Text = resizeString((*N_148687).Text, LOC8->Sup.len + 0);
appendString((*N_148687).Text, LOC8);
(*P_148685).Idx += 1;
LA5: ;
break;
default:
(*N_148687).Text = resizeString((*N_148687).Text, (*P_148685).Tok->data[(*P_148685).Idx].Symbol->Sup.len + 0);
appendString((*N_148687).Text, (*P_148685).Tok->data[(*P_148685).Idx].Symbol);
(*P_148685).Idx += 1;
break;
}
} LA4: ;
goto LA1;
LA2: ;
while (1) {
if (!!(((3 &(1<<(((*P_148685).Tok->data[(*P_148685).Idx].Kind)&7)))!=0))) goto LA9;
(*N_148687).Text = resizeString((*N_148687).Text, (*P_148685).Tok->data[(*P_148685).Idx].Symbol->Sup.len + 0);
appendString((*N_148687).Text, (*P_148685).Tok->data[(*P_148685).Idx].Symbol);
(*P_148685).Idx += 1;
} LA9: ;
LA1: ;
Addson_146101(Result_148686, N_148687);
return Result_148686;
}
N_NIMCALL(TY146077*, Parsebulletlist_149571)(TY146690* P_149574) {
TY146077* Result_149575;
NimStringDesc* Bullet_149585;
NI Col_149586;
TY146077* Item_149599;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_149575 = 0;
Result_149575 = NIM_NIL;
if (!((*P_149574).Tok->data[(NI32)((*P_149574).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Bullet_149585 = 0;
Bullet_149585 = copyString((*P_149574).Tok->data[(*P_149574).Idx].Symbol);
Col_149586 = 0;
Col_149586 = (*P_149574).Tok->data[(*P_149574).Idx].Col;
Result_149575 = Newrstnode_146094(((NU8) 5));
Pushind_146778(P_149574, (*P_149574).Tok->data[(NI32)((*P_149574).Idx + 2)].Col);
(*P_149574).Idx += 2;
while (1) {
Item_149599 = 0;
Item_149599 = Newrstnode_146094(((NU8) 6));
Parsesection_148508(P_149574, Item_149599);
Addson_146101(Result_149575, Item_149599);
LOC8 = ((*P_149574).Tok->data[(*P_149574).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_149574).Tok->data[(*P_149574).Idx].Ival == Col_149586);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_149574).Tok->data[(NI32)((*P_149574).Idx + 1)].Symbol, Bullet_149585);
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_149574).Tok->data[(NI32)((*P_149574).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_149574).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_146801(P_149574);
LA2: ;
return Result_149575;
}
N_NIMCALL(TY146077*, Parselineblock_148875)(TY146690* P_148878) {
TY146077* Result_148879;
NI Col_148889;
TY146077* Item_148902;
NIM_BOOL LOC6;
NIM_BOOL LOC7;
NIM_BOOL LOC8;
Result_148879 = 0;
Result_148879 = NIM_NIL;
if (!((*P_148878).Tok->data[(NI32)((*P_148878).Idx + 1)].Kind == ((NU8) 2))) goto LA2;
Col_148889 = 0;
Col_148889 = (*P_148878).Tok->data[(*P_148878).Idx].Col;
Result_148879 = Newrstnode_146094(((NU8) 26));
Pushind_146778(P_148878, (*P_148878).Tok->data[(NI32)((*P_148878).Idx + 2)].Col);
(*P_148878).Idx += 2;
while (1) {
Item_148902 = 0;
Item_148902 = Newrstnode_146094(((NU8) 27));
Parsesection_148508(P_148878, Item_148902);
Addson_146101(Result_148879, Item_148902);
LOC8 = ((*P_148878).Tok->data[(*P_148878).Idx].Kind == ((NU8) 1));
if (!(LOC8)) goto LA9;
LOC8 = ((*P_148878).Tok->data[(*P_148878).Idx].Ival == Col_148889);
LA9: ;
LOC7 = LOC8;
if (!(LOC7)) goto LA10;
LOC7 = eqStrings((*P_148878).Tok->data[(NI32)((*P_148878).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198121));
LA10: ;
LOC6 = LOC7;
if (!(LOC6)) goto LA11;
LOC6 = ((*P_148878).Tok->data[(NI32)((*P_148878).Idx + 2)].Kind == ((NU8) 2));
LA11: ;
if (!LOC6) goto LA12;
(*P_148878).Idx += 3;
goto LA5;
LA12: ;
goto LA4;
LA5: ;
} LA4: ;
Popind_146801(P_148878);
LA2: ;
return Result_148879;
}
N_NIMCALL(NimStringDesc*, Getdirective_148270)(TY146690* P_148273) {
NimStringDesc* Result_148274;
NIM_BOOL LOC2;
NI J_148293;
Result_148274 = 0;
LOC2 = ((*P_148273).Tok->data[(*P_148273).Idx].Kind == ((NU8) 2));
if (!(LOC2)) goto LA3;
LOC2 = ((*P_148273).Tok->data[(NI32)((*P_148273).Idx + 1)].Kind == ((NU8) 3));
LA3: ;
if (!LOC2) goto LA4;
J_148293 = 0;
J_148293 = (*P_148273).Idx;
(*P_148273).Idx += 1;
Result_148274 = copyString((*P_148273).Tok->data[(*P_148273).Idx].Symbol);
(*P_148273).Idx += 1;
while (1) {
if (!((120 &(1<<(((*P_148273).Tok->data[(*P_148273).Idx].Kind)&7)))!=0)) goto LA6;
if (!eqStrings((*P_148273).Tok->data[(*P_148273).Idx].Symbol, ((NimStringDesc*) &TMP198117))) goto LA8;
goto LA6;
LA8: ;
Result_148274 = resizeString(Result_148274, (*P_148273).Tok->data[(*P_148273).Idx].Symbol->Sup.len + 0);
appendString(Result_148274, (*P_148273).Tok->data[(*P_148273).Idx].Symbol);
(*P_148273).Idx += 1;
} LA6: ;
if (!((*P_148273).Tok->data[(*P_148273).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_148273).Idx += 1;
LA11: ;
if (!eqStrings((*P_148273).Tok->data[(*P_148273).Idx].Symbol, ((NimStringDesc*) &TMP198117))) goto LA14;
(*P_148273).Idx += 1;
if (!((*P_148273).Tok->data[(*P_148273).Idx].Kind == ((NU8) 2))) goto LA17;
(*P_148273).Idx += 1;
LA17: ;
goto LA13;
LA14: ;
(*P_148273).Idx = J_148293;
Result_148274 = copyString(((NimStringDesc*) &TMP148483));
LA13: ;
goto LA1;
LA4: ;
Result_148274 = copyString(((NimStringDesc*) &TMP148483));
LA1: ;
return Result_148274;
}
N_NIMCALL(NU8, Getdirkind_148495)(NimStringDesc* S_148497) {
NU8 Result_148498;
NI I_148499;
Result_148498 = 0;
I_148499 = 0;
I_148499 = Binarystrsearch_46147(Dirids_148478, 12, S_148497);
if (!(0 <= I_148499)) goto LA2;
Result_148498 = ((NU8) (I_148499));
goto LA1;
LA2: ;
Result_148498 = ((NU8) 0);
LA1: ;
return Result_148498;
}
N_NIMCALL(TY146077*, Newleaf_147513)(TY146690* P_147516) {
TY146077* Result_147517;
Result_147517 = 0;
Result_147517 = Newrstnode_146097(((NU8) 62), (*P_147516).Tok->data[(*P_147516).Idx].Symbol);
return Result_147517;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupstart_147640)(TY146690* P_147642, NimStringDesc* Markup_147643) {
NIM_BOOL Result_147644;
NIM_CHAR D_147645;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NIM_CHAR C_147686;
Result_147644 = 0;
D_147645 = 0;
Result_147644 = eqStrings((*P_147642).Tok->data[(*P_147642).Idx].Symbol, Markup_147643);
if (!!(Result_147644)) goto LA2;
goto BeforeRet;
LA2: ;
LOC5 = ((*P_147642).Idx == 0);
if (LOC5) goto LA6;
LOC5 = ((6 &(1<<(((*P_147642).Tok->data[(NI32)((*P_147642).Idx - 1)].Kind)&7)))!=0);
LA6: ;
LOC4 = LOC5;
if (LOC4) goto LA7;
LOC4 = ((TMP198132[((NU8)((*P_147642).Tok->data[(NI32)((*P_147642).Idx - 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_147642).Tok->data[(NI32)((*P_147642).Idx - 1)].Symbol->data[0]))%8)))!=0);
LA7: ;
Result_147644 = LOC4;
if (!!(Result_147644)) goto LA9;
goto BeforeRet;
LA9: ;
Result_147644 = !(((7 &(1<<(((*P_147642).Tok->data[(NI32)((*P_147642).Idx + 1)].Kind)&7)))!=0));
if (!!(Result_147644)) goto LA12;
goto BeforeRet;
LA12: ;
if (!(0 < (*P_147642).Idx)) goto LA15;
if (!eqStrings((*P_147642).Tok->data[(NI32)((*P_147642).Idx - 1)].Symbol, ((NimStringDesc*) &TMP198133))) goto LA18;
Result_147644 = NIM_FALSE;
goto LA17;
LA18: ;
C_147686 = 0;
C_147686 = (*P_147642).Tok->data[(NI32)((*P_147642).Idx - 1)].Symbol->data[0];
switch (((NU8)(C_147686))) {
case 39:
case 34:
D_147645 = C_147686;
break;
case 40:
D_147645 = 41;
break;
case 91:
D_147645 = 93;
break;
case 123:
D_147645 = 125;
break;
case 60:
D_147645 = 62;
break;
default:
D_147645 = 0;
break;
}
if (!!(((NU8)(D_147645) == (NU8)(0)))) goto LA21;
Result_147644 = !(((NU8)((*P_147642).Tok->data[(NI32)((*P_147642).Idx + 1)].Symbol->data[0]) == (NU8)(D_147645)));
LA21: ;
LA17: ;
LA15: ;
BeforeRet: ;
return Result_147644;
}
N_NIMCALL(NIM_BOOL, Isinlinemarkupend_147597)(TY146690* P_147599, NimStringDesc* Markup_147600) {
NIM_BOOL Result_147601;
NIM_BOOL LOC7;
NIM_BOOL LOC16;
Result_147601 = 0;
Result_147601 = eqStrings((*P_147599).Tok->data[(*P_147599).Idx].Symbol, Markup_147600);
if (!!(Result_147601)) goto LA2;
goto BeforeRet;
LA2: ;
Result_147601 = !(((6 &(1<<(((*P_147599).Tok->data[(NI32)((*P_147599).Idx - 1)].Kind)&7)))!=0));
if (!!(Result_147601)) goto LA5;
goto BeforeRet;
LA5: ;
LOC7 = ((7 &(1<<(((*P_147599).Tok->data[(NI32)((*P_147599).Idx + 1)].Kind)&7)))!=0);
if (LOC7) goto LA8;
LOC7 = ((TMP198135[((NU8)((*P_147599).Tok->data[(NI32)((*P_147599).Idx + 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*P_147599).Tok->data[(NI32)((*P_147599).Idx + 1)].Symbol->data[0]))%8)))!=0);
LA8: ;
Result_147601 = LOC7;
if (!!(Result_147601)) goto LA10;
goto BeforeRet;
LA10: ;
if (!(0 < (*P_147599).Idx)) goto LA13;
LOC16 = !(eqStrings(Markup_147600, ((NimStringDesc*) &TMP198136)));
if (!(LOC16)) goto LA17;
LOC16 = eqStrings((*P_147599).Tok->data[(NI32)((*P_147599).Idx - 1)].Symbol, ((NimStringDesc*) &TMP198133));
LA17: ;
if (!LOC16) goto LA18;
Result_147601 = NIM_FALSE;
LA18: ;
LA13: ;
BeforeRet: ;
return Result_147601;
}
N_NIMCALL(void, Parsebackslash_147691)(TY146690* P_147694, TY146077* Father_147695) {
TY146077* LOC4;
TY146077* LOC10;
TY146077* LOC11;
if (!eqStrings((*P_147694).Tok->data[(*P_147694).Idx].Symbol, ((NimStringDesc*) &TMP198137))) goto LA2;
LOC4 = 0;
LOC4 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198133));
Addson_146101(Father_147695, LOC4);
(*P_147694).Idx += 1;
goto LA1;
LA2: ;
if (!eqStrings((*P_147694).Tok->data[(*P_147694).Idx].Symbol, ((NimStringDesc*) &TMP198133))) goto LA5;
(*P_147694).Idx += 1;
if (!!(((*P_147694).Tok->data[(*P_147694).Idx].Kind == ((NU8) 2)))) goto LA8;
LOC10 = 0;
LOC10 = Newleaf_147513(P_147694);
Addson_146101(Father_147695, LOC10);
LA8: ;
(*P_147694).Idx += 1;
goto LA1;
LA5: ;
LOC11 = 0;
LOC11 = Newleaf_147513(P_147694);
Addson_146101(Father_147695, LOC11);
(*P_147694).Idx += 1;
LA1: ;
}
N_NIMCALL(void, Parseuntil_148111)(TY146690* P_148114, TY146077* Father_148115, NimStringDesc* Postfix_148116, NIM_BOOL Interpretbackslash_148117) {
NIM_BOOL LOC3;
TY146077* LOC8;
TY146077* LOC9;
TY146077* LOC10;
TY146077* LOC14;
while (1) {
switch ((*P_148114).Tok->data[(*P_148114).Idx].Kind) {
case ((NU8) 5):
LOC3 = Isinlinemarkupend_147597(&(*P_148114), Postfix_148116);
if (!LOC3) goto LA4;
(*P_148114).Idx += 1;
goto LA1;
goto LA2;
LA4: ;
if (!Interpretbackslash_148117) goto LA6;
Parsebackslash_147691(P_148114, Father_148115);
goto LA2;
LA6: ;
LOC8 = 0;
LOC8 = Newleaf_147513(P_148114);
Addson_146101(Father_148115, LOC8);
(*P_148114).Idx += 1;
LA2: ;
break;
case ((NU8) 4):
case ((NU8) 3):
case ((NU8) 6):
LOC9 = 0;
LOC9 = Newleaf_147513(P_148114);
Addson_146101(Father_148115, LOC9);
(*P_148114).Idx += 1;
break;
case ((NU8) 1):
LOC10 = 0;
LOC10 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198138));
Addson_146101(Father_148115, LOC10);
(*P_148114).Idx += 1;
if (!((*P_148114).Tok->data[(*P_148114).Idx].Kind == ((NU8) 1))) goto LA12;
Rstmessage_146765(&(*P_148114), ((NU8) 182), Postfix_148116);
goto LA1;
LA12: ;
break;
case ((NU8) 2):
LOC14 = 0;
LOC14 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198138));
Addson_146101(Father_148115, LOC14);
(*P_148114).Idx += 1;
break;
default:
Rstmessage_146765(&(*P_148114), ((NU8) 182), Postfix_148116);
break;
}
} LA1: ;
}
N_NIMCALL(void, Fixupembeddedref_147941)(TY146077* N_147943, TY146077* A_147944, TY146077* B_147945) {
NI Sep_147946;
NI I_147969;
NI HEX3Atmp_147992;
NI LOC1;
NI Res_147994;
NI Incr_147974;
NI LOC6;
NIM_BOOL LOC8;
NI I_147982;
NI HEX3Atmp_147998;
NI Res_148000;
NI I_147990;
NI HEX3Atmp_148004;
NI HEX3Atmp_148005;
NI LOC12;
NI Res_148007;
Sep_147946 = 0;
Sep_147946 = -1;
I_147969 = 0;
HEX3Atmp_147992 = 0;
LOC1 = Rsonslen_146091(N_147943);
HEX3Atmp_147992 = (NI32)(LOC1 - 2);
Res_147994 = 0;
Res_147994 = HEX3Atmp_147992;
while (1) {
if (!(0 <= Res_147994)) goto LA2;
I_147969 = Res_147994;
if (!eqStrings((*(*N_147943).Sons->data[I_147969]).Text, ((NimStringDesc*) &TMP198142))) goto LA4;
Sep_147946 = I_147969;
goto LA2;
LA4: ;
Res_147994 -= 1;
} LA2: ;
Incr_147974 = 0;
LOC8 = (0 < Sep_147946);
if (!(LOC8)) goto LA9;
LOC8 = ((NU8)((*(*N_147943).Sons->data[(NI32)(Sep_147946 - 1)]).Text->data[0]) == (NU8)(32));
LA9: ;
if (!LOC8) goto LA10;
LOC6 = 2;
goto LA7;
LA10: ;
LOC6 = 1;
LA7: ;
Incr_147974 = LOC6;
I_147982 = 0;
HEX3Atmp_147998 = 0;
HEX3Atmp_147998 = (NI32)(Sep_147946 - Incr_147974);
Res_148000 = 0;
Res_148000 = 0;
while (1) {
if (!(Res_148000 <= HEX3Atmp_147998)) goto LA11;
I_147982 = Res_148000;
Addson_146101(A_147944, (*N_147943).Sons->data[I_147982]);
Res_148000 += 1;
} LA11: ;
I_147990 = 0;
HEX3Atmp_148004 = 0;
HEX3Atmp_148005 = 0;
HEX3Atmp_148004 = (NI32)(Sep_147946 + 1);
LOC12 = Rsonslen_146091(N_147943);
HEX3Atmp_148005 = (NI32)(LOC12 - 2);
Res_148007 = 0;
Res_148007 = HEX3Atmp_148004;
while (1) {
if (!(Res_148007 <= HEX3Atmp_148005)) goto LA13;
I_147990 = Res_148007;
Addson_146101(B_147945, (*N_147943).Sons->data[I_147990]);
Res_148007 += 1;
} LA13: ;
}
N_NIMCALL(void, Setref_147078)(TY146690* P_147081, NimStringDesc* Key_147082, TY146077* Value_147083) {
NI Length_147094;
NI I_147102;
NI HEX3Atmp_147116;
NI Res_147118;
Length_147094 = 0;
Length_147094 = (*(*P_147081).S).Refs->Sup.len;
I_147102 = 0;
HEX3Atmp_147116 = 0;
HEX3Atmp_147116 = (NI32)(Length_147094 - 1);
Res_147118 = 0;
Res_147118 = 0;
while (1) {
if (!(Res_147118 <= HEX3Atmp_147116)) goto LA1;
I_147102 = Res_147118;
if (!eqStrings(Key_147082, (*(*P_147081).S).Refs->data[I_147102].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_147081).S).Refs->data[I_147102].Value, Value_147083);
Rstmessage_146765(&(*P_147081), ((NU8) 216), Key_147082);
goto BeforeRet;
LA3: ;
Res_147118 += 1;
} LA1: ;
(*(*P_147081).S).Refs = (TY146695*) setLengthSeq(&((*(*P_147081).S).Refs)->Sup, sizeof(TY146684), (NI32)(Length_147094 + 1));
asgnRefNoCycle((void**) &(*(*P_147081).S).Refs->data[Length_147094].Key, copyString(Key_147082));
asgnRefNoCycle((void**) &(*(*P_147081).S).Refs->data[Length_147094].Value, Value_147083);
BeforeRet: ;
}
N_NIMCALL(TY146077*, Parsepostfix_148010)(TY146690* P_148013, TY146077* N_148014) {
TY146077* Result_148015;
NIM_BOOL LOC2;
NIM_BOOL LOC6;
TY146077* A_148028;
TY146077* B_148029;
NI LOC11;
NimStringDesc* LOC14;
NIM_BOOL LOC17;
NIM_BOOL LOC29;
NIM_BOOL LOC33;
TY146077* LOC37;
Result_148015 = 0;
Result_148015 = N_148014;
LOC2 = Isinlinemarkupend_147597(&(*P_148013), ((NimStringDesc*) &TMP198140));
if (!LOC2) goto LA3;
(*P_148013).Idx += 1;
LOC6 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx - 2)].Symbol, ((NimStringDesc*) &TMP198139));
if (!(LOC6)) goto LA7;
LOC6 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx - 3)].Symbol, ((NimStringDesc*) &TMP198141));
LA7: ;
if (!LOC6) goto LA8;
A_148028 = 0;
A_148028 = Newrstnode_146094(((NU8) 0));
B_148029 = 0;
B_148029 = Newrstnode_146094(((NU8) 0));
Fixupembeddedref_147941(N_148014, A_148028, B_148029);
LOC11 = Rsonslen_146091(A_148028);
if (!(LOC11 == 0)) goto LA12;
Result_148015 = Newrstnode_146094(((NU8) 37));
Addson_146101(Result_148015, B_148029);
goto LA10;
LA12: ;
Result_148015 = Newrstnode_146094(((NU8) 38));
Addson_146101(Result_148015, A_148028);
Addson_146101(Result_148015, B_148029);
LOC14 = 0;
LOC14 = Rstnodetorefname_146105(A_148028);
Setref_147078(P_148013, LOC14, B_148029);
LA10: ;
goto LA5;
LA8: ;
if (!((*N_148014).Kind == ((NU8) 59))) goto LA15;
(*N_148014).Kind = ((NU8) 39);
goto LA5;
LA15: ;
Result_148015 = Newrstnode_146094(((NU8) 39));
Addson_146101(Result_148015, N_148014);
LA5: ;
goto LA1;
LA3: ;
LOC17 = Match_147762(&(*P_148013), (*P_148013).Idx, ((NimStringDesc*) &TMP198143));
if (!LOC17) goto LA18;
if (!eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198144))) goto LA21;
(*N_148014).Kind = ((NU8) 56);
goto LA20;
LA21: ;
if (!eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198145))) goto LA23;
(*N_148014).Kind = ((NU8) 60);
goto LA20;
LA23: ;
if (!eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198146))) goto LA25;
(*N_148014).Kind = ((NU8) 58);
goto LA20;
LA25: ;
if (!eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198147))) goto LA27;
(*N_148014).Kind = ((NU8) 57);
goto LA20;
LA27: ;
LOC29 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198148));
if (LOC29) goto LA30;
LOC29 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198149));
LA30: ;
if (!LOC29) goto LA31;
(*N_148014).Kind = ((NU8) 54);
goto LA20;
LA31: ;
LOC33 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198150));
if (LOC33) goto LA34;
LOC33 = eqStrings((*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198151));
LA34: ;
if (!LOC33) goto LA35;
(*N_148014).Kind = ((NU8) 55);
goto LA20;
LA35: ;
Result_148015 = Newrstnode_146094(((NU8) 53));
(*N_148014).Kind = ((NU8) 0);
Addson_146101(Result_148015, N_148014);
LOC37 = 0;
LOC37 = Newrstnode_146097(((NU8) 62), (*P_148013).Tok->data[(NI32)((*P_148013).Idx + 1)].Symbol);
Addson_146101(Result_148015, LOC37);
LA20: ;
(*P_148013).Idx += 3;
goto LA1;
LA18: ;
LA1: ;
return Result_148015;
}
N_NIMCALL(NIM_BOOL, Isurl_148053)(TY146690* P_148055, NI I_148056) {
NIM_BOOL Result_148057;
NIM_BOOL LOC1;
NIM_BOOL LOC2;
NIM_BOOL LOC3;
Result_148057 = 0;
LOC3 = eqStrings((*P_148055).Tok->data[(NI32)(I_148056 + 1)].Symbol, ((NimStringDesc*) &TMP198123));
if (!(LOC3)) goto LA4;
LOC3 = eqStrings((*P_148055).Tok->data[(NI32)(I_148056 + 2)].Symbol, ((NimStringDesc*) &TMP198152));
LA4: ;
LOC2 = LOC3;
if (!(LOC2)) goto LA5;
LOC2 = ((*P_148055).Tok->data[(NI32)(I_148056 + 3)].Kind == ((NU8) 3));
LA5: ;
LOC1 = LOC2;
if (!(LOC1)) goto LA6;
LOC1 = eqStrings((*P_148055).Tok->data[(NI32)(I_148056 + 4)].Symbol, ((NimStringDesc*) &TMP198153));
LA6: ;
Result_148057 = LOC1;
return Result_148057;
}
N_NIMCALL(void, Parseurl_148067)(TY146690* P_148070, TY146077* Father_148071) {
NIM_BOOL LOC2;
TY146077* N_148072;
TY146077* LOC9;
TY146077* N_148097;
LOC2 = Isurl_148053(&(*P_148070), (*P_148070).Idx);
if (!LOC2) goto LA3;
N_148072 = 0;
N_148072 = Newrstnode_146094(((NU8) 37));
while (1) {
switch ((*P_148070).Tok->data[(*P_148070).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
break;
case ((NU8) 5):
if (!!(((120 &(1<<(((*P_148070).Tok->data[(NI32)((*P_148070).Idx + 1)].Kind)&7)))!=0))) goto LA7;
goto LA5;
LA7: ;
break;
default:
goto LA5;
break;
}
LOC9 = 0;
LOC9 = Newleaf_147513(P_148070);
Addson_146101(N_148072, LOC9);
(*P_148070).Idx += 1;
} LA5: ;
Addson_146101(Father_148071, N_148072);
goto LA1;
LA3: ;
N_148097 = 0;
N_148097 = Newleaf_147513(P_148070);
(*P_148070).Idx += 1;
if (!eqStrings((*P_148070).Tok->data[(*P_148070).Idx].Symbol, ((NimStringDesc*) &TMP198140))) goto LA11;
N_148097 = Parsepostfix_148010(P_148070, N_148097);
LA11: ;
Addson_146101(Father_148071, N_148097);
LA1: ;
}
N_NIMCALL(void, Parseinline_148188)(TY146690* P_148191, TY146077* Father_148192) {
NIM_BOOL LOC2;
TY146077* N_148205;
NIM_BOOL LOC5;
TY146077* N_148218;
NIM_BOOL LOC8;
TY146077* N_148231;
NIM_BOOL LOC11;
TY146077* N_148244;
NIM_BOOL LOC14;
TY146077* N_148257;
TY146077* LOC17;
switch ((*P_148191).Tok->data[(*P_148191).Idx].Kind) {
case ((NU8) 5):
LOC2 = Isinlinemarkupstart_147640(&(*P_148191), ((NimStringDesc*) &TMP198134));
if (!LOC2) goto LA3;
(*P_148191).Idx += 1;
N_148205 = 0;
N_148205 = Newrstnode_146094(((NU8) 58));
Parseuntil_148111(P_148191, N_148205, ((NimStringDesc*) &TMP198134), NIM_TRUE);
Addson_146101(Father_148192, N_148205);
goto LA1;
LA3: ;
LOC5 = Isinlinemarkupstart_147640(&(*P_148191), ((NimStringDesc*) &TMP198119));
if (!LOC5) goto LA6;
(*P_148191).Idx += 1;
N_148218 = 0;
N_148218 = Newrstnode_146094(((NU8) 57));
Parseuntil_148111(P_148191, N_148218, ((NimStringDesc*) &TMP198119), NIM_TRUE);
Addson_146101(Father_148192, N_148218);
goto LA1;
LA6: ;
LOC8 = Isinlinemarkupstart_147640(&(*P_148191), ((NimStringDesc*) &TMP198136));
if (!LOC8) goto LA9;
(*P_148191).Idx += 1;
N_148231 = 0;
N_148231 = Newrstnode_146094(((NU8) 60));
Parseuntil_148111(P_148191, N_148231, ((NimStringDesc*) &TMP198136), NIM_FALSE);
Addson_146101(Father_148192, N_148231);
goto LA1;
LA9: ;
LOC11 = Isinlinemarkupstart_147640(&(*P_148191), ((NimStringDesc*) &TMP198139));
if (!LOC11) goto LA12;
(*P_148191).Idx += 1;
N_148244 = 0;
N_148244 = Newrstnode_146094(((NU8) 59));
Parseuntil_148111(P_148191, N_148244, ((NimStringDesc*) &TMP198139), NIM_TRUE);
N_148244 = Parsepostfix_148010(P_148191, N_148244);
Addson_146101(Father_148192, N_148244);
goto LA1;
LA12: ;
LOC14 = Isinlinemarkupstart_147640(&(*P_148191), ((NimStringDesc*) &TMP198121));
if (!LOC14) goto LA15;
(*P_148191).Idx += 1;
N_148257 = 0;
N_148257 = Newrstnode_146094(((NU8) 61));
Parseuntil_148111(P_148191, N_148257, ((NimStringDesc*) &TMP198121), NIM_FALSE);
Addson_146101(Father_148192, N_148257);
goto LA1;
LA15: ;
Parsebackslash_147691(P_148191, Father_148192);
LA1: ;
break;
case ((NU8) 3):
Parseurl_148067(P_148191, Father_148192);
break;
case ((NU8) 4):
case ((NU8) 6):
case ((NU8) 2):
LOC17 = 0;
LOC17 = Newleaf_147513(P_148191);
Addson_146101(Father_148192, LOC17);
(*P_148191).Idx += 1;
break;
default:
break;
}
}
N_NIMCALL(void, Parseline_148502)(TY146690* P_148505, TY146077* Father_148506) {
while (1) {
switch ((*P_148505).Tok->data[(*P_148505).Idx].Kind) {
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
Parseinline_148188(P_148505, Father_148506);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(TY146077*, Parsefield_148513)(TY146690* P_148516) {
TY146077* Result_148517;
NI Col_148518;
TY146077* Fieldname_148531;
TY146077* Fieldbody_148532;
NI Indent_148551;
Result_148517 = 0;
Result_148517 = Newrstnode_146094(((NU8) 14));
Col_148518 = 0;
Col_148518 = (*P_148516).Tok->data[(*P_148516).Idx].Col;
(*P_148516).Idx += 1;
Fieldname_148531 = 0;
Fieldname_148531 = Newrstnode_146094(((NU8) 15));
Parseuntil_148111(P_148516, Fieldname_148531, ((NimStringDesc*) &TMP198123), NIM_FALSE);
Fieldbody_148532 = 0;
Fieldbody_148532 = Newrstnode_146094(((NU8) 16));
if (!!(((*P_148516).Tok->data[(*P_148516).Idx].Kind == ((NU8) 1)))) goto LA2;
Parseline_148502(P_148516, Fieldbody_148532);
LA2: ;
if (!((*P_148516).Tok->data[(*P_148516).Idx].Kind == ((NU8) 1))) goto LA5;
Indent_148551 = 0;
Indent_148551 = (*P_148516).Tok->data[(*P_148516).Idx].Ival;
if (!(Col_148518 < Indent_148551)) goto LA8;
Pushind_146778(P_148516, Indent_148551);
Parsesection_148508(P_148516, Fieldbody_148532);
Popind_146801(P_148516);
LA8: ;
LA5: ;
Addson_146101(Result_148517, Fieldname_148531);
Addson_146101(Result_148517, Fieldbody_148532);
return Result_148517;
}
N_NIMCALL(TY146077*, Parsefields_148554)(TY146690* P_148557) {
TY146077* Result_148558;
NIM_BOOL LOC2;
NI Col_148568;
TY146077* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC10;
Result_148558 = 0;
Result_148558 = NIM_NIL;
LOC2 = ((*P_148557).Tok->data[(*P_148557).Idx].Kind == ((NU8) 1));
if (!(LOC2)) goto LA3;
LOC2 = eqStrings((*P_148557).Tok->data[(NI32)((*P_148557).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198123));
LA3: ;
if (!LOC2) goto LA4;
Col_148568 = 0;
Col_148568 = (*P_148557).Tok->data[(*P_148557).Idx].Ival;
Result_148558 = Newrstnode_146094(((NU8) 13));
(*P_148557).Idx += 1;
while (1) {
LOC7 = 0;
LOC7 = Parsefield_148513(P_148557);
Addson_146101(Result_148558, LOC7);
LOC10 = ((*P_148557).Tok->data[(*P_148557).Idx].Kind == ((NU8) 1));
if (!(LOC10)) goto LA11;
LOC10 = ((*P_148557).Tok->data[(*P_148557).Idx].Ival == Col_148568);
LA11: ;
LOC9 = LOC10;
if (!(LOC9)) goto LA12;
LOC9 = eqStrings((*P_148557).Tok->data[(NI32)((*P_148557).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198123));
LA12: ;
if (!LOC9) goto LA13;
(*P_148557).Idx += 1;
goto LA8;
LA13: ;
goto LA6;
LA8: ;
} LA6: ;
LA4: ;
return Result_148558;
}
N_NIMCALL(TY146077*, Parsedirective_150079)(TY146690* P_150082, NU8 Flags_150083) {
TY146077* Result_150084;
TY146077* Args_150085;
TY146077* Options_150086;
TY146077* LOC8;
TY146077* LOC15;
NIM_BOOL LOC20;
NIM_BOOL LOC21;
Result_150084 = 0;
Result_150084 = Newrstnode_146094(((NU8) 40));
Args_150085 = 0;
Args_150085 = NIM_NIL;
Options_150086 = 0;
Options_150086 = NIM_NIL;
if (!((Flags_150083 &(1<<((((NU8) 0))&7)))!=0)) goto LA2;
Args_150085 = Newrstnode_146094(((NU8) 41));
if (!((Flags_150083 &(1<<((((NU8) 2))&7)))!=0)) goto LA5;
while (1) {
switch ((*P_150082).Tok->data[(*P_150082).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 5):
case ((NU8) 4):
LOC8 = 0;
LOC8 = Newleaf_147513(P_150082);
Addson_146101(Args_150085, LOC8);
(*P_150082).Idx += 1;
break;
default:
goto LA7;
break;
}
} LA7: ;
goto LA4;
LA5: ;
if (!((Flags_150083 &(1<<((((NU8) 3))&7)))!=0)) goto LA9;
while (1) {
if (!((*P_150082).Tok->data[(*P_150082).Idx].Kind == ((NU8) 2))) goto LA11;
(*P_150082).Idx += 1;
} LA11: ;
if (!((*P_150082).Tok->data[(*P_150082).Idx].Kind == ((NU8) 3))) goto LA13;
LOC15 = 0;
LOC15 = Newleaf_147513(P_150082);
Addson_146101(Args_150085, LOC15);
(*P_150082).Idx += 1;
goto LA12;
LA13: ;
Args_150085 = NIM_NIL;
LA12: ;
goto LA4;
LA9: ;
Parseline_148502(P_150082, Args_150085);
LA4: ;
LA2: ;
Addson_146101(Result_150084, Args_150085);
if (!((Flags_150083 &(1<<((((NU8) 1))&7)))!=0)) goto LA17;
LOC21 = ((*P_150082).Tok->data[(*P_150082).Idx].Kind == ((NU8) 1));
if (!(LOC21)) goto LA22;
LOC21 = (3 <= (*P_150082).Tok->data[(*P_150082).Idx].Ival);
LA22: ;
LOC20 = LOC21;
if (!(LOC20)) goto LA23;
LOC20 = eqStrings((*P_150082).Tok->data[(NI32)((*P_150082).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198123));
LA23: ;
if (!LOC20) goto LA24;
Options_150086 = Parsefields_148554(P_150082);
LA24: ;
LA17: ;
Addson_146101(Result_150084, Options_150086);
return Result_150084;
}
N_NIMCALL(NIM_BOOL, Indfollows_150198)(TY146690* P_150200) {
NIM_BOOL Result_150201;
NIM_BOOL LOC1;
NI LOC3;
Result_150201 = 0;
LOC1 = ((*P_150200).Tok->data[(*P_150200).Idx].Kind == ((NU8) 1));
if (!(LOC1)) goto LA2;
LOC3 = Currind_146774(P_150200);
LOC1 = (LOC3 < (*P_150200).Tok->data[(*P_150200).Idx].Ival);
LA2: ;
Result_150201 = LOC1;
return Result_150201;
}
N_NIMCALL(TY146077*, Parsedirective_150213)(TY146690* P_150216, NU8 Flags_150217, TY150071 Contentparser_150218) {
TY146077* Result_150219;
NIM_BOOL LOC2;
TY146077* Content_150220;
Result_150219 = 0;
Result_150219 = Parsedirective_150079(P_150216, Flags_150217);
LOC2 = !(((void*) (Contentparser_150218)) == 0);
if (!(LOC2)) goto LA3;
LOC2 = Indfollows_150198(&(*P_150216));
LA3: ;
if (!LOC2) goto LA4;
Pushind_146778(P_150216, (*P_150216).Tok->data[(*P_150216).Idx].Ival);
Content_150220 = 0;
Content_150220 = Contentparser_150218(P_150216);
Popind_146801(P_150216);
Addson_146101(Result_150219, Content_150220);
goto LA1;
LA4: ;
Addson_146101(Result_150219, NIM_NIL);
LA1: ;
return Result_150219;
}
N_NIMCALL(NimStringDesc*, Getfieldvalue_146111)(TY146077* N_146113, NimStringDesc* Fieldname_146114) {
NimStringDesc* Result_148609;
NimStringDesc* LOC7;
NI I_148653;
NI HEX3Atmp_148658;
NI LOC8;
NI Res_148660;
TY146077* F_148654;
NimStringDesc* LOC11;
NI LOC12;
Result_148609 = 0;
Result_148609 = copyString(((NimStringDesc*) &TMP148483));
if (!((*N_146113).Sons->data[1] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((*(*N_146113).Sons->data[1]).Kind == ((NU8) 13)))) goto LA5;
LOC7 = 0;
LOC7 = rawNewString(reprEnum((*(*N_146113).Sons->data[1]).Kind, NTI146008)->Sup.len + 19);
appendString(LOC7, ((NimStringDesc*) &TMP198154));
appendString(LOC7, reprEnum((*(*N_146113).Sons->data[1]).Kind, NTI146008));
Internalerror_47571(LOC7);
LA5: ;
I_148653 = 0;
HEX3Atmp_148658 = 0;
LOC8 = Rsonslen_146091((*N_146113).Sons->data[1]);
HEX3Atmp_148658 = (NI32)(LOC8 - 1);
Res_148660 = 0;
Res_148660 = 0;
while (1) {
if (!(Res_148660 <= HEX3Atmp_148658)) goto LA9;
I_148653 = Res_148660;
F_148654 = 0;
F_148654 = (*(*N_146113).Sons->data[1]).Sons->data[I_148653];
LOC11 = 0;
LOC11 = Addnodes_146108((*F_148654).Sons->data[0]);
LOC12 = nsuCmpIgnoreStyle(LOC11, Fieldname_146114);
if (!(LOC12 == 0)) goto LA13;
Result_148609 = Addnodes_146108((*F_148654).Sons->data[1]);
if (!((Result_148609) && (Result_148609)->Sup.len == 0)) goto LA16;
Result_148609 = copyString(((NimStringDesc*) &TMP198155));
LA16: ;
goto BeforeRet;
LA13: ;
Res_148660 += 1;
} LA9: ;
BeforeRet: ;
return Result_148609;
}
N_NIMCALL(TY146077*, Dirinclude_150227)(TY146690* P_150230) {
TY146077* Result_150231;
TY146077* N_150233;
NimStringDesc* Filename_150234;
NimStringDesc* LOC1;
NimStringDesc* Path_150235;
NimStringDesc* LOC6;
NimStringDesc* LOC9;
TY146077* LOC10;
TY146690 Q_150236;
NimStringDesc* LOC11;
NI LOC13;
Result_150231 = 0;
Result_150231 = NIM_NIL;
N_150233 = 0;
N_150233 = Parsedirective_150213(P_150230, 7, NIM_NIL);
Filename_150234 = 0;
LOC1 = 0;
LOC1 = Addnodes_146108((*N_150233).Sons->data[0]);
Filename_150234 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Path_150235 = 0;
Path_150235 = Findfile_46088(Filename_150234);
if (!((Path_150235) && (Path_150235)->Sup.len == 0)) goto LA3;
Rstmessage_146765(&(*P_150230), ((NU8) 2), Filename_150234);
goto LA2;
LA3: ;
LOC6 = 0;
LOC6 = Getfieldvalue_146111(N_150233, ((NimStringDesc*) &TMP198145));
if (!!(((LOC6) && (LOC6)->Sup.len == 0))) goto LA7;
Result_150231 = Newrstnode_146094(((NU8) 24));
LOC9 = 0;
LOC9 = Readfile_3647(Path_150235);
LOC10 = 0;
LOC10 = Newrstnode_146097(((NU8) 62), LOC9);
Addson_146101(Result_150231, LOC10);
goto LA5;
LA7: ;
memset((void*)&Q_150236, 0, sizeof(Q_150236));
Q_150236.Sup.m_type = NTI146690;
Initparser_146839(&Q_150236, (*P_150230).S);
Q_150236.Filename = copyString(Filename_150234);
LOC11 = 0;
LOC11 = Readfile_3647(Path_150235);
Gettokens_146438(LOC11, NIM_FALSE, &Q_150236.Tok);
LOC13 = nsuFindStr(Q_150236.Tok->data[(Q_150236.Tok->Sup.len-1)].Symbol, ((NimStringDesc*) &TMP198156), 0);
if (!(0 < LOC13)) goto LA14;
Internalerror_47571(((NimStringDesc*) &TMP198157));
LA14: ;
Result_150231 = Parsedoc_149155(&Q_150236);
LA5: ;
LA2: ;
return Result_150231;
}
N_NIMCALL(TY146077*, Dirimage_150268)(TY146690* P_150271) {
TY146077* Result_150272;
Result_150272 = 0;
Result_150272 = Parsedirective_150213(P_150271, 7, NIM_NIL);
(*Result_150272).Kind = ((NU8) 45);
return Result_150272;
}
N_NIMCALL(TY146077*, Dirfigure_150274)(TY146690* P_150277) {
TY146077* Result_150278;
Result_150278 = 0;
Result_150278 = Parsedirective_150213(P_150277, 7, Parsesectionwrapper_150035);
(*Result_150278).Kind = ((NU8) 46);
return Result_150278;
}
N_NIMCALL(TY146077*, Dirtitle_150280)(TY146690* P_150283) {
TY146077* Result_150284;
Result_150284 = 0;
Result_150284 = Parsedirective_150213(P_150283, 1, NIM_NIL);
(*Result_150284).Kind = ((NU8) 43);
return Result_150284;
}
N_NIMCALL(TY146077*, Dircontainer_150251)(TY146690* P_150254) {
TY146077* Result_150255;
Result_150255 = 0;
Result_150255 = Parsedirective_150213(P_150254, 1, Parsesectionwrapper_150035);
(*Result_150255).Kind = ((NU8) 50);
return Result_150255;
}
N_NIMCALL(TY146077*, Dircontents_150286)(TY146690* P_150289) {
TY146077* Result_150290;
Result_150290 = 0;
Result_150290 = Parsedirective_150213(P_150289, 1, NIM_NIL);
(*Result_150290).Kind = ((NU8) 44);
return Result_150290;
}
N_NIMCALL(TY146077*, Parsedirbody_150221)(TY146690* P_150224, TY150071 Contentparser_150225) {
TY146077* Result_150226;
NIM_BOOL LOC2;
Result_150226 = 0;
LOC2 = Indfollows_150198(&(*P_150224));
if (!LOC2) goto LA3;
Pushind_146778(P_150224, (*P_150224).Tok->data[(*P_150224).Idx].Ival);
Result_150226 = Contentparser_150225(P_150224);
Popind_146801(P_150224);
LA3: ;
return Result_150226;
}
N_NIMCALL(void, Dirrawaux_150299)(TY146690* P_150302, TY146077** Result_150304, NU8 Kind_150305, TY150071 Contentparser_150306) {
NimStringDesc* Filename_150307;
NimStringDesc* Path_150312;
NimStringDesc* F_150317;
TY146077* LOC7;
TY146077* LOC8;
Filename_150307 = 0;
Filename_150307 = Getfieldvalue_146111((*Result_150304), ((NimStringDesc*) &TMP198159));
if (!(0 < Filename_150307->Sup.len)) goto LA2;
Path_150312 = 0;
Path_150312 = Findfile_46088(Filename_150307);
if (!(Path_150312->Sup.len == 0)) goto LA5;
Rstmessage_146765(&(*P_150302), ((NU8) 2), Filename_150307);
goto LA4;
LA5: ;
F_150317 = 0;
F_150317 = Readfile_3647(Path_150312);
unsureAsgnRef((void**) &(*Result_150304), Newrstnode_146094(Kind_150305));
LOC7 = 0;
LOC7 = Newrstnode_146097(((NU8) 62), F_150317);
Addson_146101((*Result_150304), LOC7);
LA4: ;
goto LA1;
LA2: ;
(*(*Result_150304)).Kind = Kind_150305;
LOC8 = 0;
LOC8 = Parsedirbody_150221(P_150302, Contentparser_150306);
Addson_146101((*Result_150304), LOC8);
LA1: ;
}
N_NIMCALL(TY146077*, Dirraw_150318)(TY146690* P_150321) {
TY146077* Result_150322;
NI LOC5;
NI LOC8;
Result_150322 = 0;
Result_150322 = Parsedirective_150079(P_150321, 11);
if (!!(((*Result_150322).Sons->data[0] == NIM_NIL))) goto LA2;
LOC5 = nsuCmpIgnoreCase((*(*(*Result_150322).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP198158));
if (!(LOC5 == 0)) goto LA6;
Dirrawaux_150299(P_150321, &Result_150322, ((NU8) 48), Parseliteralblock_148682);
goto LA4;
LA6: ;
LOC8 = nsuCmpIgnoreCase((*(*(*Result_150322).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP198160));
if (!(LOC8 == 0)) goto LA9;
Dirrawaux_150299(P_150321, &Result_150322, ((NU8) 49), Parseliteralblock_148682);
goto LA4;
LA9: ;
Rstmessage_146765(&(*P_150321), ((NU8) 28), (*(*Result_150322).Sons->data[0]).Text);
LA4: ;
goto LA1;
LA2: ;
Dirrawaux_150299(P_150321, &Result_150322, ((NU8) 42), Parsesectionwrapper_150035);
LA1: ;
return Result_150322;
}
N_NIMCALL(TY146077*, Dircodeblock_150242)(TY146690* P_150245) {
TY146077* Result_150246;
NimStringDesc* Filename_150248;
NimStringDesc* LOC1;
NimStringDesc* Path_150249;
TY146077* N_150250;
NimStringDesc* LOC8;
TY146077* LOC9;
Result_150246 = 0;
Result_150246 = Parsedirective_150213(P_150245, 3, Parseliteralblock_148682);
Filename_150248 = 0;
LOC1 = 0;
LOC1 = Getfieldvalue_146111(Result_150246, ((NimStringDesc*) &TMP198159));
Filename_150248 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
if (!!(((Filename_150248) && (Filename_150248)->Sup.len == 0))) goto LA3;
Path_150249 = 0;
Path_150249 = Findfile_46088(Filename_150248);
if (!((Path_150249) && (Path_150249)->Sup.len == 0)) goto LA6;
Rstmessage_146765(&(*P_150245), ((NU8) 2), Filename_150248);
LA6: ;
N_150250 = 0;
N_150250 = Newrstnode_146094(((NU8) 24));
LOC8 = 0;
LOC8 = Readfile_3647(Path_150249);
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), LOC8);
Addson_146101(N_150250, LOC9);
asgnRefNoCycle((void**) &(*Result_150246).Sons->data[2], N_150250);
LA3: ;
(*Result_150246).Kind = ((NU8) 47);
return Result_150246;
}
N_NIMCALL(TY146077*, Dirindex_150292)(TY146690* P_150295) {
TY146077* Result_150296;
Result_150296 = 0;
Result_150296 = Parsedirective_150213(P_150295, 0, Parsesectionwrapper_150035);
(*Result_150296).Kind = ((NU8) 51);
return Result_150296;
}
N_NIMCALL(TY146077*, Getreferencename_147518)(TY146690* P_147521, NimStringDesc* Endstr_147522) {
TY146077* Result_147523;
TY146077* Res_147524;
TY146077* LOC2;
TY146077* LOC6;
Result_147523 = 0;
Res_147524 = 0;
Res_147524 = Newrstnode_146094(((NU8) 0));
while (1) {
switch ((*P_147521).Tok->data[(*P_147521).Idx].Kind) {
case ((NU8) 3):
case ((NU8) 6):
case ((NU8) 2):
LOC2 = 0;
LOC2 = Newleaf_147513(P_147521);
Addson_146101(Res_147524, LOC2);
break;
case ((NU8) 5):
if (!eqStrings((*P_147521).Tok->data[(*P_147521).Idx].Symbol, Endstr_147522)) goto LA4;
(*P_147521).Idx += 1;
goto LA1;
goto LA3;
LA4: ;
LOC6 = 0;
LOC6 = Newleaf_147513(P_147521);
Addson_146101(Res_147524, LOC6);
LA3: ;
break;
default:
Rstmessage_146765(&(*P_147521), ((NU8) 182), Endstr_147522);
goto LA1;
break;
}
(*P_147521).Idx += 1;
} LA1: ;
Result_147523 = Res_147524;
return Result_147523;
}
N_NIMCALL(TY146077*, Untileol_147550)(TY146690* P_147553) {
TY146077* Result_147554;
TY146077* LOC2;
Result_147554 = 0;
Result_147554 = Newrstnode_146094(((NU8) 0));
while (1) {
if (!!(((3 &(1<<(((*P_147553).Tok->data[(*P_147553).Idx].Kind)&7)))!=0))) goto LA1;
LOC2 = 0;
LOC2 = Newleaf_147513(P_147553);
Addson_146101(Result_147554, LOC2);
(*P_147553).Idx += 1;
} LA1: ;
return Result_147554;
}
N_NIMCALL(void, Expect_147580)(TY146690* P_147583, NimStringDesc* Tok_147584) {
if (!eqStrings((*P_147583).Tok->data[(*P_147583).Idx].Symbol, Tok_147584)) goto LA2;
(*P_147583).Idx += 1;
goto LA1;
LA2: ;
Rstmessage_146765(&(*P_147583), ((NU8) 182), Tok_147584);
LA1: ;
}
N_NIMCALL(void, Setsub_147035)(TY146690* P_147038, NimStringDesc* Key_147039, TY146077* Value_147040) {
NI Length_147051;
NI I_147059;
NI HEX3Atmp_147073;
NI Res_147075;
Length_147051 = 0;
Length_147051 = (*(*P_147038).S).Subs->Sup.len;
I_147059 = 0;
HEX3Atmp_147073 = 0;
HEX3Atmp_147073 = (NI32)(Length_147051 - 1);
Res_147075 = 0;
Res_147075 = 0;
while (1) {
if (!(Res_147075 <= HEX3Atmp_147073)) goto LA1;
I_147059 = Res_147075;
if (!eqStrings(Key_147039, (*(*P_147038).S).Subs->data[I_147059].Key)) goto LA3;
asgnRefNoCycle((void**) &(*(*P_147038).S).Subs->data[I_147059].Value, Value_147040);
goto BeforeRet;
LA3: ;
Res_147075 += 1;
} LA1: ;
(*(*P_147038).S).Subs = (TY146695*) setLengthSeq(&((*(*P_147038).S).Subs)->Sup, sizeof(TY146684), (NI32)(Length_147051 + 1));
asgnRefNoCycle((void**) &(*(*P_147038).S).Subs->data[Length_147051].Key, copyString(Key_147039));
asgnRefNoCycle((void**) &(*(*P_147038).S).Subs->data[Length_147051].Value, Value_147040);
BeforeRet: ;
}
N_NIMCALL(TY146077*, Parsecomment_148397)(TY146690* P_148400) {
TY146077* Result_148401;
NI Indent_148423;
Result_148401 = 0;
switch ((*P_148400).Tok->data[(*P_148400).Idx].Kind) {
case ((NU8) 1):
case ((NU8) 0):
if (!((*P_148400).Tok->data[(NI32)((*P_148400).Idx + 1)].Kind == ((NU8) 1))) goto LA2;
(*P_148400).Idx += 1;
goto LA1;
LA2: ;
Indent_148423 = 0;
Indent_148423 = (*P_148400).Tok->data[(*P_148400).Idx].Ival;
while (1) {
switch ((*P_148400).Tok->data[(*P_148400).Idx].Kind) {
case ((NU8) 0):
goto LA4;
break;
case ((NU8) 1):
if (!((*P_148400).Tok->data[(*P_148400).Idx].Ival < Indent_148423)) goto LA6;
goto LA4;
LA6: ;
break;
default:
break;
}
(*P_148400).Idx += 1;
} LA4: ;
LA1: ;
break;
default:
while (1) {
if (!!(((3 &(1<<(((*P_148400).Tok->data[(*P_148400).Idx].Kind)&7)))!=0))) goto LA8;
(*P_148400).Idx += 1;
} LA8: ;
break;
}
Result_148401 = NIM_NIL;
return Result_148401;
}
N_NIMCALL(TY146077*, Parsedotdot_148678)(TY146690* P_148681) {
TY146077* Result_150346;
NI Col_150347;
NimStringDesc* D_150360;
NU8 LOC4;
NIM_BOOL LOC5;
TY146077* A_150373;
TY146077* B_150395;
NimStringDesc* LOC11;
NIM_BOOL LOC12;
TY146077* A_150408;
TY146077* B_150409;
NI LOC19;
NI LOC22;
NimStringDesc* LOC25;
NIM_BOOL LOC26;
TY146077* A_150471;
TY146077* B_150493;
NimStringDesc* LOC32;
Result_150346 = 0;
Result_150346 = NIM_NIL;
Col_150347 = 0;
Col_150347 = (*P_148681).Tok->data[(*P_148681).Idx].Col;
(*P_148681).Idx += 1;
D_150360 = 0;
D_150360 = Getdirective_148270(P_148681);
if (!!(((D_150360) && (D_150360)->Sup.len == 0))) goto LA2;
Pushind_146778(P_148681, Col_150347);
LOC4 = Getdirkind_148495(D_150360);
switch (LOC4) {
case ((NU8) 8):
Result_150346 = Dirinclude_150227(P_148681);
break;
case ((NU8) 7):
Result_150346 = Dirimage_150268(P_148681);
break;
case ((NU8) 6):
Result_150346 = Dirfigure_150274(P_148681);
break;
case ((NU8) 11):
Result_150346 = Dirtitle_150280(P_148681);
break;
case ((NU8) 4):
Result_150346 = Dircontainer_150251(P_148681);
break;
case ((NU8) 5):
Result_150346 = Dircontents_150286(P_148681);
break;
case ((NU8) 10):
Result_150346 = Dirraw_150318(P_148681);
break;
case ((NU8) 3):
Result_150346 = Dircodeblock_150242(P_148681);
break;
case ((NU8) 9):
Result_150346 = Dirindex_150292(P_148681);
break;
default:
Rstmessage_146765(&(*P_148681), ((NU8) 28), D_150360);
break;
}
Popind_146801(P_148681);
goto LA1;
LA2: ;
LOC5 = Match_147762(&(*P_148681), (*P_148681).Idx, ((NimStringDesc*) &TMP198161));
if (!LOC5) goto LA6;
(*P_148681).Idx += 2;
A_150373 = 0;
A_150373 = Getreferencename_147518(P_148681, ((NimStringDesc*) &TMP198123));
if (!((*P_148681).Tok->data[(*P_148681).Idx].Kind == ((NU8) 2))) goto LA9;
(*P_148681).Idx += 1;
LA9: ;
B_150395 = 0;
B_150395 = Untileol_147550(P_148681);
LOC11 = 0;
LOC11 = Rstnodetorefname_146105(A_150373);
Setref_147078(P_148681, LOC11, B_150395);
goto LA1;
LA6: ;
LOC12 = Match_147762(&(*P_148681), (*P_148681).Idx, ((NimStringDesc*) &TMP198162));
if (!LOC12) goto LA13;
(*P_148681).Idx += 2;
A_150408 = 0;
A_150408 = Getreferencename_147518(P_148681, ((NimStringDesc*) &TMP198121));
B_150409 = 0;
if (!((*P_148681).Tok->data[(*P_148681).Idx].Kind == ((NU8) 2))) goto LA16;
(*P_148681).Idx += 1;
LA16: ;
LOC19 = nsuCmpIgnoreStyle((*P_148681).Tok->data[(*P_148681).Idx].Symbol, ((NimStringDesc*) &TMP198163));
if (!(LOC19 == 0)) goto LA20;
(*P_148681).Idx += 1;
Expect_147580(P_148681, ((NimStringDesc*) &TMP198117));
B_150409 = Untileol_147550(P_148681);
goto LA18;
LA20: ;
LOC22 = nsuCmpIgnoreStyle((*P_148681).Tok->data[(*P_148681).Idx].Symbol, ((NimStringDesc*) &TMP148490));
if (!(LOC22 == 0)) goto LA23;
(*P_148681).Idx += 1;
B_150409 = Dirimage_150268(P_148681);
goto LA18;
LA23: ;
Rstmessage_146765(&(*P_148681), ((NU8) 28), (*P_148681).Tok->data[(*P_148681).Idx].Symbol);
LA18: ;
LOC25 = 0;
LOC25 = Addnodes_146108(A_150408);
Setsub_147035(P_148681, LOC25, B_150409);
goto LA1;
LA13: ;
LOC26 = Match_147762(&(*P_148681), (*P_148681).Idx, ((NimStringDesc*) &TMP198164));
if (!LOC26) goto LA27;
(*P_148681).Idx += 2;
A_150471 = 0;
A_150471 = Getreferencename_147518(P_148681, ((NimStringDesc*) &TMP198165));
if (!((*P_148681).Tok->data[(*P_148681).Idx].Kind == ((NU8) 2))) goto LA30;
(*P_148681).Idx += 1;
LA30: ;
B_150493 = 0;
B_150493 = Untileol_147550(P_148681);
LOC32 = 0;
LOC32 = Rstnodetorefname_146105(A_150471);
Setref_147078(P_148681, LOC32, B_150493);
goto LA1;
LA27: ;
Result_150346 = Parsecomment_148397(P_148681);
LA1: ;
return Result_150346;
}
N_NIMCALL(TY146077*, Parseenumlist_149833)(TY146690* P_149836) {
TY146077* Result_149837;
NI W_149848;
NIM_BOOL LOC3;
NI Col_149865;
NI J_149878;
NIM_BOOL LOC10;
TY146077* Item_149881;
NIM_BOOL LOC16;
NIM_BOOL LOC17;
Result_149837 = 0;
Result_149837 = NIM_NIL;
W_149848 = 0;
W_149848 = 0;
while (1) {
if (!(W_149848 <= 2)) goto LA1;
LOC3 = Match_147762(&(*P_149836), (*P_149836).Idx, Wildcards_149838[(W_149848)-0]);
if (!LOC3) goto LA4;
goto LA1;
LA4: ;
W_149848 += 1;
} LA1: ;
if (!(W_149848 <= 2)) goto LA7;
Col_149865 = 0;
Col_149865 = (*P_149836).Tok->data[(*P_149836).Idx].Col;
Result_149837 = Newrstnode_146094(((NU8) 7));
(*P_149836).Idx += (NI32)(Wildpos_149843[(W_149848)-0] + 3);
J_149878 = 0;
J_149878 = Tokenafternewline_148784(&(*P_149836));
LOC10 = ((*P_149836).Tok->data[J_149878].Col == (*P_149836).Tok->data[(*P_149836).Idx].Col);
if (LOC10) goto LA11;
LOC10 = Match_147762(&(*P_149836), J_149878, Wildcards_149838[(W_149848)-0]);
LA11: ;
if (!LOC10) goto LA12;
Pushind_146778(P_149836, (*P_149836).Tok->data[(*P_149836).Idx].Col);
while (1) {
Item_149881 = 0;
Item_149881 = Newrstnode_146094(((NU8) 8));
Parsesection_148508(P_149836, Item_149881);
Addson_146101(Result_149837, Item_149881);
LOC17 = ((*P_149836).Tok->data[(*P_149836).Idx].Kind == ((NU8) 1));
if (!(LOC17)) goto LA18;
LOC17 = ((*P_149836).Tok->data[(*P_149836).Idx].Ival == Col_149865);
LA18: ;
LOC16 = LOC17;
if (!(LOC16)) goto LA19;
LOC16 = Match_147762(&(*P_149836), (NI32)((*P_149836).Idx + 1), Wildcards_149838[(W_149848)-0]);
LA19: ;
if (!LOC16) goto LA20;
(*P_149836).Idx += (NI32)(Wildpos_149843[(W_149848)-0] + 4);
goto LA15;
LA20: ;
goto LA14;
LA15: ;
} LA14: ;
Popind_146801(P_149836);
goto LA9;
LA12: ;
(*P_149836).Idx -= (NI32)(Wildpos_149843[(W_149848)-0] + 3);
Result_149837 = NIM_NIL;
LA9: ;
LA7: ;
return Result_149837;
}
N_NIMCALL(TY146077*, Parsedefinitionlist_149739)(TY146690* P_149742) {
TY146077* Result_149743;
NI J_149744;
NI LOC1;
NIM_BOOL LOC3;
NIM_BOOL LOC4;
NIM_BOOL LOC5;
NI LOC8;
NI Col_149758;
TY146077* A_149759;
NIM_BOOL LOC14;
NIM_BOOL LOC15;
NIM_BOOL LOC16;
NI LOC18;
TY146077* B_149783;
TY146077* C_149784;
NIM_BOOL LOC24;
NI LOC28;
NIM_BOOL LOC30;
NIM_BOOL LOC31;
NIM_BOOL LOC32;
NIM_BOOL LOC33;
NI LOC41;
Result_149743 = 0;
Result_149743 = NIM_NIL;
J_149744 = 0;
LOC1 = Tokenafternewline_148784(&(*P_149742));
J_149744 = (NI32)(LOC1 - 1);
LOC5 = (1 <= J_149744);
if (!(LOC5)) goto LA6;
LOC5 = ((*P_149742).Tok->data[J_149744].Kind == ((NU8) 1));
LA6: ;
LOC4 = LOC5;
if (!(LOC4)) goto LA7;
LOC8 = Currind_146774(&(*P_149742));
LOC4 = (LOC8 < (*P_149742).Tok->data[J_149744].Ival);
LA7: ;
LOC3 = LOC4;
if (!(LOC3)) goto LA9;
LOC3 = !(eqStrings((*P_149742).Tok->data[(NI32)(J_149744 - 1)].Symbol, ((NimStringDesc*) &TMP198117)));
LA9: ;
if (!LOC3) goto LA10;
Col_149758 = 0;
Col_149758 = (*P_149742).Tok->data[(*P_149742).Idx].Col;
Result_149743 = Newrstnode_146094(((NU8) 9));
while (1) {
J_149744 = (*P_149742).Idx;
A_149759 = 0;
A_149759 = Newrstnode_146094(((NU8) 11));
Parseline_148502(P_149742, A_149759);
LOC16 = ((*P_149742).Tok->data[(*P_149742).Idx].Kind == ((NU8) 1));
if (!(LOC16)) goto LA17;
LOC18 = Currind_146774(&(*P_149742));
LOC16 = (LOC18 < (*P_149742).Tok->data[(*P_149742).Idx].Ival);
LA17: ;
LOC15 = LOC16;
if (!(LOC15)) goto LA19;
LOC15 = !(eqStrings((*P_149742).Tok->data[(NI32)((*P_149742).Idx + 1)].Symbol, ((NimStringDesc*) &TMP198117)));
LA19: ;
LOC14 = LOC15;
if (!(LOC14)) goto LA20;
LOC14 = !(((3 &(1<<(((*P_149742).Tok->data[(NI32)((*P_149742).Idx + 1)].Kind)&7)))!=0));
LA20: ;
if (!LOC14) goto LA21;
Pushind_146778(P_149742, (*P_149742).Tok->data[(*P_149742).Idx].Ival);
B_149783 = 0;
B_149783 = Newrstnode_146094(((NU8) 12));
Parsesection_148508(P_149742, B_149783);
C_149784 = 0;
C_149784 = Newrstnode_146094(((NU8) 10));
Addson_146101(C_149784, A_149759);
Addson_146101(C_149784, B_149783);
Addson_146101(Result_149743, C_149784);
Popind_146801(P_149742);
goto LA13;
LA21: ;
(*P_149742).Idx = J_149744;
goto LA12;
LA13: ;
LOC24 = ((*P_149742).Tok->data[(*P_149742).Idx].Kind == ((NU8) 1));
if (!(LOC24)) goto LA25;
LOC24 = ((*P_149742).Tok->data[(*P_149742).Idx].Ival == Col_149758);
LA25: ;
if (!LOC24) goto LA26;
(*P_149742).Idx += 1;
LOC28 = Tokenafternewline_148784(&(*P_149742));
J_149744 = (NI32)(LOC28 - 1);
LOC33 = (1 <= J_149744);
if (!(LOC33)) goto LA34;
LOC33 = ((*P_149742).Tok->data[J_149744].Kind == ((NU8) 1));
LA34: ;
LOC32 = LOC33;
if (!(LOC32)) goto LA35;
LOC32 = (Col_149758 < (*P_149742).Tok->data[J_149744].Ival);
LA35: ;
LOC31 = LOC32;
if (!(LOC31)) goto LA36;
LOC31 = !(eqStrings((*P_149742).Tok->data[(NI32)(J_149744 - 1)].Symbol, ((NimStringDesc*) &TMP198117)));
LA36: ;
LOC30 = LOC31;
if (!(LOC30)) goto LA37;
LOC30 = !(((*P_149742).Tok->data[(NI32)(J_149744 + 1)].Kind == ((NU8) 1)));
LA37: ;
if (!LOC30) goto LA38;
goto LA29;
LA38: ;
goto LA12;
LA29: ;
LA26: ;
} LA12: ;
LOC41 = Rsonslen_146091(Result_149743);
if (!(LOC41 == 0)) goto LA42;
Result_149743 = NIM_NIL;
LA42: ;
LA10: ;
return Result_149743;
}
N_NIMCALL(TY146077*, Parsetransition_149426)(TY146690* P_149429) {
TY146077* Result_149430;
Result_149430 = 0;
Result_149430 = Newrstnode_146094(((NU8) 3));
(*P_149429).Idx += 1;
if (!((*P_149429).Tok->data[(*P_149429).Idx].Kind == ((NU8) 1))) goto LA2;
(*P_149429).Idx += 1;
LA2: ;
if (!((*P_149429).Tok->data[(*P_149429).Idx].Kind == ((NU8) 1))) goto LA5;
(*P_149429).Idx += 1;
LA5: ;
return Result_149430;
}
N_NIMCALL(NI, Getlevel_148762)(NI* Map_148765, NI* Lvl_148767, NIM_CHAR C_148768) {
NI Result_148769;
Result_148769 = 0;
if (!(Map_148765[(((NU8)(C_148768)))-0] == 0)) goto LA2;
(*Lvl_148767) += 1;
Map_148765[(((NU8)(C_148768)))-0] = (*Lvl_148767);
LA2: ;
Result_148769 = Map_148765[(((NU8)(C_148768)))-0];
return Result_148769;
}
N_NIMCALL(TY146077*, Parseheadline_149005)(TY146690* P_149008) {
TY146077* Result_149009;
NIM_CHAR C_149028;
Result_149009 = 0;
Result_149009 = Newrstnode_146094(((NU8) 1));
Parseline_148502(P_149008, Result_149009);
C_149028 = 0;
C_149028 = (*P_149008).Tok->data[(NI32)((*P_149008).Idx + 1)].Symbol->data[0];
(*P_149008).Idx += 2;
(*Result_149009).Level = Getlevel_148762((*(*P_149008).S).Underlinetolevel, &(*(*P_149008).S).Ulevel, C_149028);
return Result_149009;
}
N_NIMCALL(TY146077*, Parseoverline_149485)(TY146690* P_149488) {
TY146077* Result_149489;
NIM_CHAR C_149490;
NI LOC6;
TY146077* LOC9;
Result_149489 = 0;
C_149490 = 0;
C_149490 = (*P_149488).Tok->data[(*P_149488).Idx].Symbol->data[0];
(*P_149488).Idx += 2;
Result_149489 = Newrstnode_146094(((NU8) 2));
while (1) {
Parseline_148502(P_149488, Result_149489);
if (!((*P_149488).Tok->data[(*P_149488).Idx].Kind == ((NU8) 1))) goto LA3;
(*P_149488).Idx += 1;
LOC6 = Currind_146774(&(*P_149488));
if (!(LOC6 < (*P_149488).Tok->data[(NI32)((*P_149488).Idx - 1)].Ival)) goto LA7;
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198138));
Addson_146101(Result_149489, LOC9);
goto LA5;
LA7: ;
goto LA1;
LA5: ;
goto LA2;
LA3: ;
goto LA1;
LA2: ;
} LA1: ;
(*Result_149489).Level = Getlevel_148762((*(*P_149488).S).Overlinetolevel, &(*(*P_149488).S).Olevel, C_149490);
if (!((*P_149488).Tok->data[(*P_149488).Idx].Kind == ((NU8) 4))) goto LA11;
(*P_149488).Idx += 1;
if (!((*P_149488).Tok->data[(*P_149488).Idx].Kind == ((NU8) 1))) goto LA14;
(*P_149488).Idx += 1;
LA14: ;
LA11: ;
return Result_149489;
}
N_NIMCALL(NI, Tokend_149045)(TY146690* P_149047) {
NI Result_149048;
Result_149048 = 0;
Result_149048 = (NI32)((NI32)((*P_149047).Tok->data[(*P_149047).Idx].Col + (*P_149047).Tok->data[(*P_149047).Idx].Symbol->Sup.len) - 1);
return Result_149048;
}
N_NIMCALL(void, Getcolumns_149051)(TY146690* P_149054, TY76281** Cols_149056) {
NI L_149057;
L_149057 = 0;
L_149057 = 0;
while (1) {
L_149057 += 1;
(*Cols_149056) = (TY76281*) setLengthSeq(&((*Cols_149056))->Sup, sizeof(NI), L_149057);
(*Cols_149056)->data[(NI32)(L_149057 - 1)] = Tokend_149045(&(*P_149054));
(*P_149054).Idx += 1;
if (!!(((*P_149054).Tok->data[(*P_149054).Idx].Kind == ((NU8) 2)))) goto LA3;
goto LA1;
LA3: ;
(*P_149054).Idx += 1;
if (!!(((*P_149054).Tok->data[(*P_149054).Idx].Kind == ((NU8) 4)))) goto LA6;
goto LA1;
LA6: ;
} LA1: ;
if (!((*P_149054).Tok->data[(*P_149054).Idx].Kind == ((NU8) 1))) goto LA9;
(*P_149054).Idx += 1;
LA9: ;
(*Cols_149056)->data[(NI32)(L_149057 - 1)] = 32000;
}
N_NIMCALL(TY146077*, Parsesimpletable_149159)(TY146690* P_149162) {
TY146077* Result_149163;
TY76281* Cols_149164;
TY39422* Row_149166;
NI I_149167;
NI Last_149168;
NI Line_149169;
NIM_CHAR C_149170;
TY146690 Q_149171;
TY146077* A_149172;
TY146077* B_149173;
NI J_149268;
NI HEX3Atmp_149400;
NI LOC11;
NI Res_149402;
NI J_149285;
NI HEX3Atmp_149406;
NI Res_149408;
NI LOC20;
NI LOC30;
NI J_149387;
NI HEX3Atmp_149413;
NI Res_149415;
NI J_149395;
NI HEX3Atmp_149420;
NI Res_149422;
TY146077* LOC38;
Result_149163 = 0;
Cols_149164 = 0;
Row_149166 = 0;
I_149167 = 0;
Last_149168 = 0;
Line_149169 = 0;
C_149170 = 0;
memset((void*)&Q_149171, 0, sizeof(Q_149171));
Q_149171.Sup.m_type = NTI146690;
A_149172 = 0;
B_149173 = 0;
Result_149163 = Newrstnode_146094(((NU8) 29));
Cols_149164 = (TY76281*) newSeq(NTI76281, 0);
Row_149166 = (TY39422*) newSeq(NTI39422, 0);
A_149172 = NIM_NIL;
C_149170 = (*P_149162).Tok->data[(*P_149162).Idx].Symbol->data[0];
while (1) {
if (!((*P_149162).Tok->data[(*P_149162).Idx].Kind == ((NU8) 4))) goto LA3;
Last_149168 = Tokenafternewline_148784(&(*P_149162));
if (!((3 &(1<<(((*P_149162).Tok->data[Last_149168].Kind)&7)))!=0)) goto LA6;
(*P_149162).Idx = Last_149168;
goto LA1;
LA6: ;
Getcolumns_149051(P_149162, &Cols_149164);
Row_149166 = (TY39422*) setLengthSeq(&(Row_149166)->Sup, sizeof(NimStringDesc*), Cols_149164->Sup.len);
if (!!((A_149172 == NIM_NIL))) goto LA9;
J_149268 = 0;
HEX3Atmp_149400 = 0;
LOC11 = Rsonslen_146091(A_149172);
HEX3Atmp_149400 = (NI32)(LOC11 - 1);
Res_149402 = 0;
Res_149402 = 0;
while (1) {
if (!(Res_149402 <= HEX3Atmp_149400)) goto LA12;
J_149268 = Res_149402;
(*(*A_149172).Sons->data[J_149268]).Kind = ((NU8) 32);
Res_149402 += 1;
} LA12: ;
LA9: ;
LA3: ;
if (!((*P_149162).Tok->data[(*P_149162).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
J_149285 = 0;
HEX3Atmp_149406 = 0;
HEX3Atmp_149406 = (Row_149166->Sup.len-1);
Res_149408 = 0;
Res_149408 = 0;
while (1) {
if (!(Res_149408 <= HEX3Atmp_149406)) goto LA16;
J_149285 = Res_149408;
asgnRefNoCycle((void**) &Row_149166->data[J_149285], copyString(((NimStringDesc*) &TMP148483)));
Res_149408 += 1;
} LA16: ;
Line_149169 = (*P_149162).Tok->data[(*P_149162).Idx].Line;
while (1) {
I_149167 = 0;
while (1) {
if (!!(((3 &(1<<(((*P_149162).Tok->data[(*P_149162).Idx].Kind)&7)))!=0))) goto LA18;
LOC20 = Tokend_149045(&(*P_149162));
if (!(LOC20 <= Cols_149164->data[I_149167])) goto LA21;
Row_149166->data[I_149167] = resizeString(Row_149166->data[I_149167], (*P_149162).Tok->data[(*P_149162).Idx].Symbol->Sup.len + 0);
appendString(Row_149166->data[I_149167], (*P_149162).Tok->data[(*P_149162).Idx].Symbol);
(*P_149162).Idx += 1;
goto LA19;
LA21: ;
if (!((*P_149162).Tok->data[(*P_149162).Idx].Kind == ((NU8) 2))) goto LA24;
(*P_149162).Idx += 1;
LA24: ;
I_149167 += 1;
LA19: ;
} LA18: ;
if (!((*P_149162).Tok->data[(*P_149162).Idx].Kind == ((NU8) 1))) goto LA27;
(*P_149162).Idx += 1;
LA27: ;
LOC30 = Tokend_149045(&(*P_149162));
if (!(LOC30 <= Cols_149164->data[0])) goto LA31;
goto LA17;
LA31: ;
if (!((17 &(1<<(((*P_149162).Tok->data[(*P_149162).Idx].Kind)&7)))!=0)) goto LA34;
goto LA17;
LA34: ;
J_149387 = 0;
HEX3Atmp_149413 = 0;
HEX3Atmp_149413 = (Row_149166->Sup.len-1);
Res_149415 = 0;
Res_149415 = 1;
while (1) {
if (!(Res_149415 <= HEX3Atmp_149413)) goto LA36;
J_149387 = Res_149415;
Row_149166->data[J_149387] = addChar(Row_149166->data[J_149387], 10);
Res_149415 += 1;
} LA36: ;
} LA17: ;
A_149172 = Newrstnode_146094(((NU8) 31));
J_149395 = 0;
HEX3Atmp_149420 = 0;
HEX3Atmp_149420 = (Row_149166->Sup.len-1);
Res_149422 = 0;
Res_149422 = 0;
while (1) {
if (!(Res_149422 <= HEX3Atmp_149420)) goto LA37;
J_149395 = Res_149422;
Initparser_146839(&Q_149171, (*P_149162).S);
Q_149171.Col = Cols_149164->data[J_149395];
Q_149171.Line = (NI32)(Line_149169 - 1);
Q_149171.Filename = copyString((*P_149162).Filename);
Gettokens_146438(Row_149166->data[J_149395], NIM_FALSE, &Q_149171.Tok);
B_149173 = Newrstnode_146094(((NU8) 33));
LOC38 = 0;
LOC38 = Parsedoc_149155(&Q_149171);
Addson_146101(B_149173, LOC38);
Addson_146101(A_149172, B_149173);
Res_149422 += 1;
} LA37: ;
Addson_146101(Result_149163, A_149172);
} LA1: ;
return Result_149163;
}
N_NIMCALL(TY146077*, Parseoptionlist_149633)(TY146690* P_149636) {
TY146077* Result_149637;
NIM_BOOL LOC3;
TY146077* A_149638;
TY146077* B_149639;
TY146077* C_149640;
NIM_BOOL LOC7;
NIM_BOOL LOC12;
TY146077* LOC16;
NI J_149702;
NIM_BOOL LOC18;
NIM_BOOL LOC19;
NI LOC22;
Result_149637 = 0;
Result_149637 = Newrstnode_146094(((NU8) 17));
while (1) {
LOC3 = Isoptionlist_148858(&(*P_149636));
if (!LOC3) goto LA4;
A_149638 = 0;
A_149638 = Newrstnode_146094(((NU8) 19));
B_149639 = 0;
B_149639 = Newrstnode_146094(((NU8) 23));
C_149640 = 0;
C_149640 = Newrstnode_146094(((NU8) 18));
LOC7 = Match_147762(&(*P_149636), (*P_149636).Idx, ((NimStringDesc*) &TMP198129));
if (!LOC7) goto LA8;
(*P_149636).Idx += 1;
LA8: ;
while (1) {
if (!!(((3 &(1<<(((*P_149636).Tok->data[(*P_149636).Idx].Kind)&7)))!=0))) goto LA10;
LOC12 = ((*P_149636).Tok->data[(*P_149636).Idx].Kind == ((NU8) 2));
if (!(LOC12)) goto LA13;
LOC12 = (1 < (*P_149636).Tok->data[(*P_149636).Idx].Symbol->Sup.len);
LA13: ;
if (!LOC12) goto LA14;
(*P_149636).Idx += 1;
goto LA10;
LA14: ;
LOC16 = 0;
LOC16 = Newleaf_147513(P_149636);
Addson_146101(A_149638, LOC16);
(*P_149636).Idx += 1;
} LA10: ;
J_149702 = 0;
J_149702 = Tokenafternewline_148784(&(*P_149636));
LOC19 = (0 < J_149702);
if (!(LOC19)) goto LA20;
LOC19 = ((*P_149636).Tok->data[(NI32)(J_149702 - 1)].Kind == ((NU8) 1));
LA20: ;
LOC18 = LOC19;
if (!(LOC18)) goto LA21;
LOC22 = Currind_146774(&(*P_149636));
LOC18 = (LOC22 < (*P_149636).Tok->data[(NI32)(J_149702 - 1)].Ival);
LA21: ;
if (!LOC18) goto LA23;
Pushind_146778(P_149636, (*P_149636).Tok->data[(NI32)(J_149702 - 1)].Ival);
Parsesection_148508(P_149636, B_149639);
Popind_146801(P_149636);
goto LA17;
LA23: ;
Parseline_148502(P_149636, B_149639);
LA17: ;
if (!((*P_149636).Tok->data[(*P_149636).Idx].Kind == ((NU8) 1))) goto LA26;
(*P_149636).Idx += 1;
LA26: ;
Addson_146101(C_149640, A_149638);
Addson_146101(C_149640, B_149639);
Addson_146101(Result_149637, C_149640);
goto LA2;
LA4: ;
goto LA1;
LA2: ;
} LA1: ;
return Result_149637;
}
N_NIMCALL(void, Addsonifnotnil_146598)(TY146077* Father_146600, TY146077* Son_146601) {
if (!!((Son_146601 == NIM_NIL))) goto LA2;
Addson_146101(Father_146600, Son_146601);
LA2: ;
}
N_NIMCALL(void, Parseparagraph_148936)(TY146690* P_148939, TY146077* Result_148940) {
NI LOC5;
NU8 LOC8;
TY146077* LOC9;
TY146077* LOC10;
NIM_BOOL LOC12;
NIM_BOOL LOC13;
NI LOC16;
TY146077* LOC19;
TY146077* LOC20;
while (1) {
switch ((*P_148939).Tok->data[(*P_148939).Idx].Kind) {
case ((NU8) 1):
if (!((*P_148939).Tok->data[(NI32)((*P_148939).Idx + 1)].Kind == ((NU8) 1))) goto LA3;
(*P_148939).Idx += 1;
goto LA1;
goto LA2;
LA3: ;
LOC5 = Currind_146774(&(*P_148939));
if (!((*P_148939).Tok->data[(*P_148939).Idx].Ival == LOC5)) goto LA6;
(*P_148939).Idx += 1;
LOC8 = Whichsection_148862(&(*P_148939));
switch (LOC8) {
case ((NU8) 4):
case ((NU8) 62):
case ((NU8) 1):
case ((NU8) 2):
case ((NU8) 40):
LOC9 = 0;
LOC9 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198138));
Addson_146101(Result_148940, LOC9);
break;
case ((NU8) 26):
LOC10 = 0;
LOC10 = Parselineblock_148875(P_148939);
Addsonifnotnil_146598(Result_148940, LOC10);
break;
default:
goto LA1;
break;
}
goto LA2;
LA6: ;
goto LA1;
LA2: ;
break;
case ((NU8) 5):
LOC13 = eqStrings((*P_148939).Tok->data[(*P_148939).Idx].Symbol, ((NimStringDesc*) &TMP198117));
if (!(LOC13)) goto LA14;
LOC13 = ((*P_148939).Tok->data[(NI32)((*P_148939).Idx + 1)].Kind == ((NU8) 1));
LA14: ;
LOC12 = LOC13;
if (!(LOC12)) goto LA15;
LOC16 = Currind_146774(&(*P_148939));
LOC12 = (LOC16 < (*P_148939).Tok->data[(NI32)((*P_148939).Idx + 1)].Ival);
LA15: ;
if (!LOC12) goto LA17;
LOC19 = 0;
LOC19 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198123));
Addson_146101(Result_148940, LOC19);
(*P_148939).Idx += 1;
LOC20 = 0;
LOC20 = Parseliteralblock_148682(P_148939);
Addson_146101(Result_148940, LOC20);
goto LA1;
goto LA11;
LA17: ;
Parseinline_148188(P_148939, Result_148940);
LA11: ;
break;
case ((NU8) 2):
case ((NU8) 3):
case ((NU8) 4):
case ((NU8) 6):
Parseinline_148188(P_148939, Result_148940);
break;
default:
goto LA1;
break;
}
} LA1: ;
}
N_NIMCALL(NU8, Sonkind_149919)(TY146077* Father_149921, NI I_149922) {
NU8 Result_149923;
NI LOC2;
Result_149923 = 0;
Result_149923 = ((NU8) 62);
LOC2 = Rsonslen_146091(Father_149921);
if (!(I_149922 < LOC2)) goto LA3;
Result_149923 = (*(*Father_149921).Sons->data[I_149922]).Kind;
LA3: ;
return Result_149923;
}
N_NIMCALL(void, Parsesection_148508)(TY146690* P_148511, TY146077* Result_148512) {
NIM_BOOL Leave_149931;
NI LOC4;
NI LOC7;
TY146077* A_149959;
TY146077* A_149969;
NU8 K_149970;
NIM_BOOL LOC17;
NIM_BOOL LOC22;
NU8 LOC23;
NU8 LOC25;
while (1) {
Leave_149931 = 0;
Leave_149931 = NIM_FALSE;
while (1) {
if (!((*P_148511).Tok->data[(*P_148511).Idx].Kind == ((NU8) 1))) goto LA2;
LOC4 = Currind_146774(&(*P_148511));
if (!(LOC4 == (*P_148511).Tok->data[(*P_148511).Idx].Ival)) goto LA5;
(*P_148511).Idx += 1;
goto LA3;
LA5: ;
LOC7 = Currind_146774(&(*P_148511));
if (!(LOC7 < (*P_148511).Tok->data[(*P_148511).Idx].Ival)) goto LA8;
Pushind_146778(P_148511, (*P_148511).Tok->data[(*P_148511).Idx].Ival);
A_149959 = 0;
A_149959 = Newrstnode_146094(((NU8) 28));
Parsesection_148508(P_148511, A_149959);
Addson_146101(Result_148512, A_149959);
Popind_146801(P_148511);
goto LA3;
LA8: ;
Leave_149931 = NIM_TRUE;
goto LA2;
LA3: ;
} LA2: ;
if (!Leave_149931) goto LA11;
goto LA1;
LA11: ;
if (!((*P_148511).Tok->data[(*P_148511).Idx].Kind == ((NU8) 0))) goto LA14;
goto LA1;
LA14: ;
A_149969 = 0;
A_149969 = NIM_NIL;
K_149970 = 0;
K_149970 = Whichsection_148862(&(*P_148511));
switch (K_149970) {
case ((NU8) 24):
(*P_148511).Idx += 1;
A_149969 = Parseliteralblock_148682(P_148511);
break;
case ((NU8) 5):
A_149969 = Parsebulletlist_149571(P_148511);
break;
case ((NU8) 26):
A_149969 = Parselineblock_148875(P_148511);
break;
case ((NU8) 40):
A_149969 = Parsedotdot_148678(P_148511);
break;
case ((NU8) 7):
A_149969 = Parseenumlist_149833(P_148511);
break;
case ((NU8) 62):
Rstmessage_146770(&(*P_148511), ((NU8) 186));
break;
case ((NU8) 4):
break;
case ((NU8) 9):
A_149969 = Parsedefinitionlist_149739(P_148511);
break;
case ((NU8) 13):
(*P_148511).Idx -= 1;
A_149969 = Parsefields_148554(P_148511);
break;
case ((NU8) 3):
A_149969 = Parsetransition_149426(P_148511);
break;
case ((NU8) 1):
A_149969 = Parseheadline_149005(P_148511);
break;
case ((NU8) 2):
A_149969 = Parseoverline_149485(P_148511);
break;
case ((NU8) 29):
A_149969 = Parsesimpletable_149159(P_148511);
break;
case ((NU8) 17):
A_149969 = Parseoptionlist_149633(P_148511);
break;
default:
Internalerror_47571(((NimStringDesc*) &TMP198166));
break;
}
LOC17 = (A_149969 == NIM_NIL);
if (!(LOC17)) goto LA18;
LOC17 = !((K_149970 == ((NU8) 40)));
LA18: ;
if (!LOC17) goto LA19;
A_149969 = Newrstnode_146094(((NU8) 4));
Parseparagraph_148936(P_148511, A_149969);
LA19: ;
Addsonifnotnil_146598(Result_148512, A_149969);
} LA1: ;
LOC23 = Sonkind_149919(Result_148512, 0);
LOC22 = (LOC23 == ((NU8) 4));
if (!(LOC22)) goto LA24;
LOC25 = Sonkind_149919(Result_148512, 1);
LOC22 = !((LOC25 == ((NU8) 4)));
LA24: ;
if (!LOC22) goto LA26;
(*(*Result_148512).Sons->data[0]).Kind = ((NU8) 0);
LA26: ;
}
N_NIMCALL(TY146077*, Parsesectionwrapper_150035)(TY146690* P_150038) {
TY146077* Result_150039;
NIM_BOOL LOC2;
NI LOC4;
Result_150039 = 0;
Result_150039 = Newrstnode_146094(((NU8) 0));
Parsesection_148508(P_150038, Result_150039);
while (1) {
LOC2 = ((*Result_150039).Kind == ((NU8) 0));
if (!(LOC2)) goto LA3;
LOC4 = Rsonslen_146091(Result_150039);
LOC2 = (LOC4 == 1);
LA3: ;
if (!LOC2) goto LA1;
Result_150039 = (*Result_150039).Sons->data[0];
} LA1: ;
return Result_150039;
}
N_NIMCALL(TY146077*, Parsedoc_149155)(TY146690* P_149158) {
TY146077* Result_150056;
Result_150056 = 0;
Result_150056 = Parsesectionwrapper_150035(P_149158);
if (!!(((*P_149158).Tok->data[(*P_149158).Idx].Kind == ((NU8) 0)))) goto LA2;
Rstmessage_146770(&(*P_149158), ((NU8) 185));
LA2: ;
return Result_150056;
}
N_NIMCALL(TY146077*, Rstparse_146082)(NimStringDesc* Text_146084, NIM_BOOL Skippounds_146085, NimStringDesc* Filename_146086, NI Line_146087, NI Column_146088, NIM_BOOL* Hastoc_146090) {
TY146077* Result_150551;
TY146690 P_150552;
TY146686* LOC4;
TY146077* LOC5;
Result_150551 = 0;
memset((void*)&P_150552, 0, sizeof(P_150552));
P_150552.Sup.m_type = NTI146690;
if (!Text_146084 == 0) goto LA2;
Rawmessage_47553(((NU8) 2), Filename_146086);
LA2: ;
LOC4 = 0;
LOC4 = Newsharedstate_146710();
Initparser_146839(&P_150552, LOC4);
P_150552.Filename = copyString(Filename_146086);
P_150552.Line = Line_146087;
P_150552.Col = Column_146088;
Gettokens_146438(Text_146084, Skippounds_146085, &P_150552.Tok);
LOC5 = 0;
LOC5 = Parsedoc_149155(&P_150552);
Result_150551 = Resolvesubs_150494(&P_150552, LOC5);
(*Hastoc_146090) = P_150552.Hastoc;
return Result_150551;
}
N_NIMCALL(NIM_BOOL, Matcheshyperlink_147250)(TY146077* H_147252, NimStringDesc* Filename_147253) {
NIM_BOOL Result_147254;
NimStringDesc* S_147275;
NIM_BOOL LOC7;
Result_147254 = 0;
if (!((*H_147252).Kind == ((NU8) 0))) goto LA2;
Result_147254 = Matcheshyperlink_147250((*H_147252).Sons->data[0], Filename_147253);
goto LA1;
LA2: ;
if (!((*H_147252).Kind == ((NU8) 38))) goto LA4;
S_147275 = 0;
S_147275 = Addnodes_146108((*H_147252).Sons->data[1]);
LOC7 = nsuStartsWith(S_147275, Filename_147253);
if (!(LOC7)) goto LA8;
LOC7 = ((NU8)(S_147275->data[(NI32)(Filename_147253->Sup.len + 0)]) == (NU8)(35));
LA8: ;
if (!LOC7) goto LA9;
Result_147254 = NIM_TRUE;
goto LA6;
LA9: ;
Result_147254 = NIM_FALSE;
LA6: ;
goto LA1;
LA4: ;
Result_147254 = NIM_FALSE;
LA1: ;
return Result_147254;
}
N_NIMCALL(void, Clearindex_146126)(TY146077* Index_146128, NimStringDesc* Filename_146129) {
NI K_147284;
NI Items_147285;
NI Lastitem_147286;
TY146077* Val_147287;
NI I_147304;
NI HEX3Atmp_147431;
NI LOC1;
NI Res_147433;
NI J_147339;
NI HEX3Atmp_147425;
NI LOC9;
NI Res_147427;
NIM_BOOL LOC14;
NIM_BOOL LOC22;
NI I_147386;
NI HEX3Atmp_147441;
NI LOC25;
NI Res_147443;
K_147284 = 0;
Items_147285 = 0;
Lastitem_147286 = 0;
Val_147287 = 0;
I_147304 = 0;
HEX3Atmp_147431 = 0;
LOC1 = Rsonslen_146091(Index_146128);
HEX3Atmp_147431 = (NI32)(LOC1 - 1);
Res_147433 = 0;
Res_147433 = 0;
while (1) {
if (!(Res_147433 <= HEX3Atmp_147431)) goto LA2;
I_147304 = Res_147433;
Val_147287 = (*(*(*Index_146128).Sons->data[I_147304]).Sons->data[1]).Sons->data[0];
if (!((*Val_147287).Kind == ((NU8) 0))) goto LA4;
Val_147287 = (*Val_147287).Sons->data[0];
LA4: ;
if (!((*Val_147287).Kind == ((NU8) 5))) goto LA7;
Items_147285 = Rsonslen_146091(Val_147287);
Lastitem_147286 = -1;
J_147339 = 0;
HEX3Atmp_147425 = 0;
LOC9 = Rsonslen_146091(Val_147287);
HEX3Atmp_147425 = (NI32)(LOC9 - 1);
Res_147427 = 0;
Res_147427 = 0;
while (1) {
if (!(Res_147427 <= HEX3Atmp_147425)) goto LA10;
J_147339 = Res_147427;
if (!((*Val_147287).Sons->data[J_147339] == NIM_NIL)) goto LA12;
Items_147285 -= 1;
goto LA11;
LA12: ;
LOC14 = Matcheshyperlink_147250((*(*Val_147287).Sons->data[J_147339]).Sons->data[0], Filename_146129);
if (!LOC14) goto LA15;
asgnRefNoCycle((void**) &(*Val_147287).Sons->data[J_147339], NIM_NIL);
Items_147285 -= 1;
goto LA11;
LA15: ;
Lastitem_147286 = J_147339;
LA11: ;
Res_147427 += 1;
} LA10: ;
if (!(Items_147285 == 1)) goto LA18;
asgnRefNoCycle((void**) &(*(*(*Index_146128).Sons->data[I_147304]).Sons->data[1]).Sons->data[0], (*(*Val_147287).Sons->data[Lastitem_147286]).Sons->data[0]);
goto LA17;
LA18: ;
if (!(Items_147285 == 0)) goto LA20;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[I_147304], NIM_NIL);
goto LA17;
LA20: ;
LA17: ;
goto LA6;
LA7: ;
LOC22 = Matcheshyperlink_147250(Val_147287, Filename_146129);
if (!LOC22) goto LA23;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[I_147304], NIM_NIL);
goto LA6;
LA23: ;
LA6: ;
Res_147433 += 1;
} LA2: ;
K_147284 = 0;
I_147386 = 0;
HEX3Atmp_147441 = 0;
LOC25 = Rsonslen_146091(Index_146128);
HEX3Atmp_147441 = (NI32)(LOC25 - 1);
Res_147443 = 0;
Res_147443 = 0;
while (1) {
if (!(Res_147443 <= HEX3Atmp_147441)) goto LA26;
I_147386 = Res_147443;
if (!!(((*Index_146128).Sons->data[I_147386] == NIM_NIL))) goto LA28;
if (!!((K_147284 == I_147386))) goto LA31;
asgnRefNoCycle((void**) &(*Index_146128).Sons->data[K_147284], (*Index_146128).Sons->data[I_147386]);
LA31: ;
K_147284 += 1;
LA28: ;
Res_147443 += 1;
} LA26: ;
(*Index_146128).Sons = (TY146075*) setLengthSeq(&((*Index_146128).Sons)->Sup, sizeof(TY146077*), K_147284);
}
N_NIMCALL(TY146077*, Lastson_146667)(TY146077* N_146669) {
TY146077* Result_146670;
Result_146670 = 0;
Result_146670 = (*N_146669).Sons->data[(NI32)((*N_146669).Sons->Sup.len - 1)];
return Result_146670;
}
N_NIMCALL(NimStringDesc*, Getargument_146115)(TY146077* N_146117) {
NimStringDesc* Result_148666;
Result_148666 = 0;
if (!((*N_146117).Sons->data[0] == NIM_NIL)) goto LA2;
Result_148666 = copyString(((NimStringDesc*) &TMP148483));
goto LA1;
LA2: ;
Result_148666 = Addnodes_146108((*N_146117).Sons->data[0]);
LA1: ;
return Result_148666;
}
N_NIMCALL(NIM_BOOL, Eqrstnodes_147211)(TY146077* A_147213, TY146077* B_147214) {
NIM_BOOL Result_147215;
NI LOC8;
NI LOC9;
NI I_147243;
NI HEX3Atmp_147245;
NI LOC12;
NI Res_147247;
NIM_BOOL LOC15;
Result_147215 = 0;
if (!!(((*A_147213).Kind == (*B_147214).Kind))) goto LA2;
goto BeforeRet;
LA2: ;
if (!((*A_147213).Kind == ((NU8) 62))) goto LA5;
Result_147215 = eqStrings((*A_147213).Text, (*B_147214).Text);
goto LA4;
LA5: ;
LOC8 = Rsonslen_146091(A_147213);
LOC9 = Rsonslen_146091(B_147214);
if (!!((LOC8 == LOC9))) goto LA10;
goto BeforeRet;
LA10: ;
I_147243 = 0;
HEX3Atmp_147245 = 0;
LOC12 = Rsonslen_146091(A_147213);
HEX3Atmp_147245 = (NI32)(LOC12 - 1);
Res_147247 = 0;
Res_147247 = 0;
while (1) {
if (!(Res_147247 <= HEX3Atmp_147245)) goto LA13;
I_147243 = Res_147247;
LOC15 = Eqrstnodes_147211((*A_147213).Sons->data[I_147243], (*B_147214).Sons->data[I_147243]);
if (!!(LOC15)) goto LA16;
goto BeforeRet;
LA16: ;
Res_147247 += 1;
} LA13: ;
Result_147215 = NIM_TRUE;
LA4: ;
BeforeRet: ;
return Result_147215;
}
N_NIMCALL(void, Setindexpair_146118)(TY146077* Index_146120, TY146077* Key_146121, TY146077* Val_146122) {
TY146077* E_147451;
TY146077* A_147452;
TY146077* B_147453;
NI I_147479;
NI HEX3Atmp_147508;
NI LOC1;
NI Res_147510;
NIM_BOOL LOC4;
E_147451 = 0;
A_147452 = 0;
B_147453 = 0;
A_147452 = Newrstnode_146094(((NU8) 11));
Addson_146101(A_147452, Key_146121);
I_147479 = 0;
HEX3Atmp_147508 = 0;
LOC1 = Rsonslen_146091(Index_146120);
HEX3Atmp_147508 = (NI32)(LOC1 - 1);
Res_147510 = 0;
Res_147510 = 0;
while (1) {
if (!(Res_147510 <= HEX3Atmp_147508)) goto LA2;
I_147479 = Res_147510;
LOC4 = Eqrstnodes_147211((*(*Index_146120).Sons->data[I_147479]).Sons->data[0], A_147452);
if (!LOC4) goto LA5;
E_147451 = (*(*(*Index_146120).Sons->data[I_147479]).Sons->data[1]).Sons->data[0];
if (!!(((*E_147451).Kind == ((NU8) 5)))) goto LA8;
E_147451 = Newrstnode_146094(((NU8) 5));
B_147453 = Newrstnode_146094(((NU8) 6));
Addson_146101(B_147453, (*(*(*Index_146120).Sons->data[I_147479]).Sons->data[1]).Sons->data[0]);
Addson_146101(E_147451, B_147453);
asgnRefNoCycle((void**) &(*(*(*Index_146120).Sons->data[I_147479]).Sons->data[1]).Sons->data[0], E_147451);
LA8: ;
B_147453 = Newrstnode_146094(((NU8) 6));
Addson_146101(B_147453, Val_146122);
Addson_146101(E_147451, B_147453);
goto BeforeRet;
LA5: ;
Res_147510 += 1;
} LA2: ;
E_147451 = Newrstnode_146094(((NU8) 10));
B_147453 = Newrstnode_146094(((NU8) 12));
Addson_146101(B_147453, Val_146122);
Addson_146101(E_147451, A_147452);
Addson_146101(E_147451, B_147453);
Addson_146101(Index_146120, E_147451);
BeforeRet: ;
}
N_NIMCALL(NI, Cmpnodes_147141)(TY146077* A_147143, TY146077* B_147144) {
NI Result_147145;
TY146077* X_147164;
TY146077* Y_147165;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
Result_147145 = 0;
X_147164 = 0;
X_147164 = (*A_147143).Sons->data[0];
Y_147165 = 0;
Y_147165 = (*B_147144).Sons->data[0];
LOC1 = 0;
LOC1 = Addnodes_146108(X_147164);
LOC2 = 0;
LOC2 = Addnodes_146108(Y_147165);
Result_147145 = nsuCmpIgnoreStyle(LOC1, LOC2);
return Result_147145;
}
N_NIMCALL(void, Sortindex_146123)(TY146077* A_146125) {
NI N_147178;
NI H_147179;
NI I_147189;
NI HEX3Atmp_147201;
NI Res_147203;
TY146077* V_147190;
NI J_147191;
NI LOC8;
N_147178 = 0;
N_147178 = Rsonslen_146091(A_146125);
H_147179 = 0;
H_147179 = 1;
while (1) {
H_147179 = (NI32)((NI32)(3 * H_147179) + 1);
if (!(N_147178 < H_147179)) goto LA3;
goto LA1;
LA3: ;
} LA1: ;
while (1) {
H_147179 = (NI32)(H_147179 / 3);
I_147189 = 0;
HEX3Atmp_147201 = 0;
HEX3Atmp_147201 = (NI32)(N_147178 - 1);
Res_147203 = 0;
Res_147203 = H_147179;
while (1) {
if (!(Res_147203 <= HEX3Atmp_147201)) goto LA6;
I_147189 = Res_147203;
V_147190 = 0;
V_147190 = (*A_146125).Sons->data[I_147189];
J_147191 = 0;
J_147191 = I_147189;
while (1) {
LOC8 = Cmpnodes_147141((*A_146125).Sons->data[(NI32)(J_147191 - H_147179)], V_147190);
if (!(0 <= LOC8)) goto LA7;
asgnRefNoCycle((void**) &(*A_146125).Sons->data[J_147191], (*A_146125).Sons->data[(NI32)(J_147191 - H_147179)]);
J_147191 = (NI32)(J_147191 - H_147179);
if (!(J_147191 < H_147179)) goto LA10;
goto LA7;
LA10: ;
} LA7: ;
asgnRefNoCycle((void**) &(*A_146125).Sons->data[J_147191], V_147190);
Res_147203 += 1;
} LA6: ;
if (!(H_147179 == 1)) goto LA13;
goto LA5;
LA13: ;
} LA5: ;
}
N_NOINLINE(void, rstInit)(void) {
}

