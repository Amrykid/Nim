/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY440 TY440;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TY10402 TY10402;
typedef struct TY10418 TY10418;
typedef struct TY10790 TY10790;
typedef struct TY10414 TY10414;
typedef struct TY10410 TY10410;
typedef struct TY10788 TY10788;
typedef NU8 TY20402[32];
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TNimObject {
TNimType* m_type;
};
struct E_Base {
  TNimObject Sup;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY440 {
  TY416 Sup;
};
struct TY10402 {
NI Refcount;
TNimType* Typ;
};
struct TY10418 {
NI Len;
NI Cap;
TY10402** D;
};
struct TY10414 {
NI Counter;
NI Max;
TY10410* Head;
TY10410** Data;
};
struct TY10788 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10790 {
TY10418 Zct;
TY10418 Decstack;
TY10414 Cycleroots;
TY10418 Tempstack;
TY10788 Stat;
};
typedef NI TY24135[256];
typedef NimStringDesc* TY45865[1];
typedef NI TY8414[16];
struct TY10410 {
TY10410* Next;
NI Key;
TY8414 Bits;
};
N_NIMCALL(NIM_CHAR, nsuToLowerChar)(NIM_CHAR C_22417);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17108);
N_NIMCALL(void, nsuAddf)(NimStringDesc** S_22741, NimStringDesc* Formatstr_22742, NimStringDesc** A_22744, NI A_22744Len0);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17192, NimStringDesc* Src_17193);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17182, NI Addlen_17183);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NI, Findnormalized_22714)(NimStringDesc* X_22716, NimStringDesc** Inarray_22718, NI Inarray_22718Len0);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_22638, NimStringDesc* B_22639);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1752, NI First_1753, NI Last_1754);
N_NIMCALL(void*, newObj)(TNimType* Typ_12107, NI Size_12108);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11616, void* Src_11617);
static N_INLINE(TY10402*, Usrtocell_10822)(void* Usr_10824);
static N_INLINE(void, Rtladdzct_11456)(TY10402* C_11458);
N_NOINLINE(void, Addzct_10811)(TY10418* S_10814, TY10402* C_10815);
N_NIMCALL(void, raiseException)(E_Base* E_4604, NCSTRING Ename_4605);
N_NIMCALL(NI, nsuFindCharSet)(NimStringDesc* S_24251, TY20402 Chars_24253, NI Start_24254);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17209, NIM_CHAR C_17210);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17087);
N_NIMCALL(NimStringDesc*, mnewString)(NI Len_1347);
N_NIMCALL(NI, npuParseInt)(NimStringDesc* S_20856, NI* Number_20858, NI Start_20859);
N_NIMCALL(void, Preprocesssub_24136)(NimStringDesc* Sub_24138, NI* A_24140);
N_NIMCALL(NI, Findaux_24171)(NimStringDesc* S_24173, NimStringDesc* Sub_24174, NI Start_24175, TY24135 A_24176);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* Formatstr_22965, NimStringDesc** A_22967, NI A_22967Len0);
N_NIMCALL(NI, npuParseFloat)(NimStringDesc* S_21234, NF* Number_21236, NI Start_21237);
N_NIMCALL(NI, npuParseBiggestInt)(NimStringDesc* S_20849, NI64* Number_20851, NI Start_20852);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_1748, NI First_1749);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_17803);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* S_17225, NI Newlen_17226);
NIM_CONST TY20402 Whitespace_22403 = {
0x00, 0x3E, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
NIM_CONST TY20402 Letters_22405 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
NIM_CONST TY20402 Digits_22407 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
NIM_CONST TY20402 Hexdigits_22409 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x7E, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
NIM_CONST TY20402 Identchars_22411 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
NIM_CONST TY20402 Identstartchars_22413 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0xFE, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP193614, "", 0);
NIM_CONST TY20402 Patternchars_22745 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP193615, "invalid format string", 21);
static NIM_CONST TY20402 TMP193643 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;STRING_LITERAL(TMP193657, "invalid integer: ", 17);
NIM_CONST TY20402 Chars_22985 = {
0x00, 0x3E, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP193703, "invalid float: ", 15);
STRING_LITERAL(TMP193744, "0123456789ABCDEF", 16);
extern TNimType* NTI22867; /* ref EInvalidValue */
extern TNimType* NTI440; /* EInvalidValue */
extern TY10790 Gch_10808;
N_NIMCALL(NIM_CHAR, nsuToLowerChar)(NIM_CHAR C_22417) {
NIM_CHAR Result_22418;
Result_22418 = 0;
if (!(((NU8)(C_22417)) >= ((NU8)(65)) && ((NU8)(C_22417)) <= ((NU8)(90)))) goto LA2;
Result_22418 = ((NIM_CHAR) (((NI) ((NI32)(((NU8)(C_22417)) + 32)))));
goto LA1;
LA2: ;
Result_22418 = C_22417;
LA1: ;
return Result_22418;
}
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_22595, NimStringDesc* B_22596) {
NI Result_22597;
NI I_22598;
NIM_BOOL LOC2;
NIM_CHAR LOC4;
NIM_CHAR LOC5;
Result_22597 = 0;
I_22598 = 0;
I_22598 = 0;
while (1) {
LOC2 = (I_22598 < A_22595->Sup.len);
if (!(LOC2)) goto LA3;
LOC2 = (I_22598 < B_22596->Sup.len);
LA3: ;
if (!LOC2) goto LA1;
LOC4 = nsuToLowerChar(A_22595->data[I_22598]);
LOC5 = nsuToLowerChar(B_22596->data[I_22598]);
Result_22597 = (NI32)(((NU8)(LOC4)) - ((NU8)(LOC5)));
if (!!((Result_22597 == 0))) goto LA7;
goto BeforeRet;
LA7: ;
I_22598 += 1;
} LA1: ;
Result_22597 = (NI32)(A_22595->Sup.len - B_22596->Sup.len);
BeforeRet: ;
return Result_22597;
}
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_22638, NimStringDesc* B_22639) {
NI Result_22640;
NI I_22641;
NI J_22642;
NIM_CHAR Aa_22671;
NIM_CHAR Bb_22672;
NIM_BOOL LOC5;
Result_22640 = 0;
I_22641 = 0;
I_22641 = 0;
J_22642 = 0;
J_22642 = 0;
while (1) {
while (1) {
if (!((NU8)(A_22638->data[I_22641]) == (NU8)(95))) goto LA2;
I_22641 += 1;
} LA2: ;
while (1) {
if (!((NU8)(B_22639->data[J_22642]) == (NU8)(95))) goto LA3;
J_22642 += 1;
} LA3: ;
Aa_22671 = 0;
Aa_22671 = nsuToLowerChar(A_22638->data[I_22641]);
Bb_22672 = 0;
Bb_22672 = nsuToLowerChar(B_22639->data[J_22642]);
Result_22640 = (NI32)(((NU8)(Aa_22671)) - ((NU8)(Bb_22672)));
LOC5 = !((Result_22640 == 0));
if (LOC5) goto LA6;
LOC5 = ((NU8)(Aa_22671) == (NU8)(0));
LA6: ;
if (!LOC5) goto LA7;
goto LA1;
LA7: ;
I_22641 += 1;
J_22642 += 1;
} LA1: ;
return Result_22640;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17192, NimStringDesc* Src_17193) {
memcpy(((NCSTRING) (&(*Dest_17192).data[((*Dest_17192).Sup.len)-0])), ((NCSTRING) ((*Src_17193).data)), ((int) ((NI32)((NI32)((*Src_17193).Sup.len + 1) * 1))));
(*Dest_17192).Sup.len += (*Src_17193).Sup.len;
}
N_NIMCALL(NI, Findnormalized_22714)(NimStringDesc* X_22716, NimStringDesc** Inarray_22718, NI Inarray_22718Len0) {
NI Result_22719;
NI I_22720;
NI LOC3;
Result_22719 = 0;
I_22720 = 0;
I_22720 = 0;
while (1) {
if (!(I_22720 < (Inarray_22718Len0-1))) goto LA1;
LOC3 = nsuCmpIgnoreStyle(X_22716, Inarray_22718[I_22720]);
if (!(LOC3 == 0)) goto LA4;
Result_22719 = I_22720;
goto BeforeRet;
LA4: ;
I_22720 += 2;
} LA1: ;
Result_22719 = -1;
goto BeforeRet;
BeforeRet: ;
return Result_22719;
}
static N_INLINE(TY10402*, Usrtocell_10822)(void* Usr_10824) {
TY10402* Result_10825;
Result_10825 = 0;
Result_10825 = ((TY10402*) ((NI32)((NU32)(((NI) (Usr_10824))) - (NU32)(((NI) (((NI)sizeof(TY10402))))))));
return Result_10825;
}
static N_INLINE(void, Rtladdzct_11456)(TY10402* C_11458) {
Addzct_10811(&Gch_10808.Zct, C_11458);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11616, void* Src_11617) {
TY10402* C_11618;
TY10402* C_11619;
if (!!((Src_11617 == NIM_NIL))) goto LA2;
C_11618 = 0;
C_11618 = Usrtocell_10822(Src_11617);
(*C_11618).Refcount = (NI32)((NU32)((*C_11618).Refcount) + (NU32)(8));
LA2: ;
if (!!(((*Dest_11616) == NIM_NIL))) goto LA5;
C_11619 = 0;
C_11619 = Usrtocell_10822((*Dest_11616));
(*C_11619).Refcount = (NI32)((NU32)((*C_11619).Refcount) - (NU32)(8));
if (!((NU32)((*C_11619).Refcount) < (NU32)(8))) goto LA8;
Rtladdzct_11456(C_11619);
LA8: ;
LA5: ;
(*Dest_11616) = Src_11617;
}
N_NIMCALL(void, nsuAddf)(NimStringDesc** S_22741, NimStringDesc* Formatstr_22742, NimStringDesc** A_22744, NI A_22744Len0) {
NI I_22747;
NI Num_22748;
NI J_22791;
NI J_22837;
NI X_22862;
NimStringDesc* LOC7;
NIM_BOOL LOC9;
TY440* E_22868;
NI J_22884;
NI X_22908;
NimStringDesc* LOC15;
NIM_BOOL LOC17;
TY440* E_22914;
TY440* E_22931;
I_22747 = 0;
I_22747 = 0;
Num_22748 = 0;
Num_22748 = 0;
while (1) {
if (!(I_22747 < Formatstr_22742->Sup.len)) goto LA1;
if (!((NU8)(Formatstr_22742->data[I_22747]) == (NU8)(36))) goto LA3;
switch (((NU8)(Formatstr_22742->data[(NI32)(I_22747 + 1)]))) {
case 35:
(*S_22741) = resizeString((*S_22741), A_22744[Num_22748]->Sup.len + 0);
appendString((*S_22741), A_22744[Num_22748]);
I_22747 += 2;
Num_22748 += 1;
break;
case 36:
(*S_22741) = addChar((*S_22741), 36);
I_22747 += 2;
break;
case 49 ... 57:
J_22791 = 0;
J_22791 = 0;
I_22747 += 1;
while (1) {
if (!(((NU8)(Formatstr_22742->data[I_22747])) >= ((NU8)(48)) && ((NU8)(Formatstr_22742->data[I_22747])) <= ((NU8)(57)))) goto LA5;
J_22791 = (NI32)((NI32)((NI32)(J_22791 * 10) + ((NU8)(Formatstr_22742->data[I_22747]))) - 48);
I_22747 += 1;
} LA5: ;
Num_22748 = J_22791;
(*S_22741) = resizeString((*S_22741), A_22744[(NI32)(J_22791 - 1)]->Sup.len + 0);
appendString((*S_22741), A_22744[(NI32)(J_22791 - 1)]);
break;
case 123:
J_22837 = 0;
J_22837 = (NI32)(I_22747 + 1);
while (1) {
if (!!((((NU8)(Formatstr_22742->data[J_22837])) == ((NU8)(0)) || ((NU8)(Formatstr_22742->data[J_22837])) == ((NU8)(125))))) goto LA6;
J_22837 += 1;
} LA6: ;
X_22862 = 0;
LOC7 = copyStrLast(Formatstr_22742, (NI32)(I_22747 + 2), (NI32)(J_22837 - 1));
X_22862 = Findnormalized_22714(LOC7, A_22744, A_22744Len0);
LOC9 = (0 <= X_22862);
if (!(LOC9)) goto LA10;
LOC9 = (X_22862 < (A_22744Len0-1));
LA10: ;
if (!LOC9) goto LA11;
(*S_22741) = resizeString((*S_22741), A_22744[(NI32)(X_22862 + 1)]->Sup.len + 0);
appendString((*S_22741), A_22744[(NI32)(X_22862 + 1)]);
goto LA8;
LA11: ;
E_22868 = 0;
E_22868 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_22868).Sup.Sup.Sup.m_type = NTI440;
asgnRefNoCycle((void**) &(*E_22868).Sup.Sup.message, copyString(((NimStringDesc*) &TMP193615)));
raiseException((E_Base*)E_22868, "EInvalidValue");
LA8: ;
I_22747 = (NI32)(J_22837 + 1);
break;
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 95:
J_22884 = 0;
J_22884 = (NI32)(I_22747 + 1);
while (1) {
if (!(((NU8)(Formatstr_22742->data[J_22884])) >= ((NU8)(97)) && ((NU8)(Formatstr_22742->data[J_22884])) <= ((NU8)(122)) || ((NU8)(Formatstr_22742->data[J_22884])) >= ((NU8)(65)) && ((NU8)(Formatstr_22742->data[J_22884])) <= ((NU8)(90)) || ((NU8)(Formatstr_22742->data[J_22884])) >= ((NU8)(48)) && ((NU8)(Formatstr_22742->data[J_22884])) <= ((NU8)(57)) || ((NU8)(Formatstr_22742->data[J_22884])) >= ((NU8)(128)) && ((NU8)(Formatstr_22742->data[J_22884])) <= ((NU8)(255)) || ((NU8)(Formatstr_22742->data[J_22884])) == ((NU8)(95)))) goto LA14;
J_22884 += 1;
} LA14: ;
X_22908 = 0;
LOC15 = copyStrLast(Formatstr_22742, (NI32)(I_22747 + 1), (NI32)(J_22884 - 1));
X_22908 = Findnormalized_22714(LOC15, A_22744, A_22744Len0);
LOC17 = (0 <= X_22908);
if (!(LOC17)) goto LA18;
LOC17 = (X_22908 < (A_22744Len0-1));
LA18: ;
if (!LOC17) goto LA19;
(*S_22741) = resizeString((*S_22741), A_22744[(NI32)(X_22908 + 1)]->Sup.len + 0);
appendString((*S_22741), A_22744[(NI32)(X_22908 + 1)]);
goto LA16;
LA19: ;
E_22914 = 0;
E_22914 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_22914).Sup.Sup.Sup.m_type = NTI440;
asgnRefNoCycle((void**) &(*E_22914).Sup.Sup.message, copyString(((NimStringDesc*) &TMP193615)));
raiseException((E_Base*)E_22914, "EInvalidValue");
LA16: ;
I_22747 = J_22884;
break;
default:
E_22931 = 0;
E_22931 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_22931).Sup.Sup.Sup.m_type = NTI440;
asgnRefNoCycle((void**) &(*E_22931).Sup.Sup.message, copyString(((NimStringDesc*) &TMP193615)));
raiseException((E_Base*)E_22931, "EInvalidValue");
break;
}
goto LA2;
LA3: ;
(*S_22741) = addChar((*S_22741), Formatstr_22742->data[I_22747]);
I_22747 += 1;
LA2: ;
} LA1: ;
}
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* Formatstr_22965, NimStringDesc** A_22967, NI A_22967Len0) {
NimStringDesc* Result_22968;
Result_22968 = 0;
Result_22968 = copyString(((NimStringDesc*) &TMP193614));
nsuAddf(&Result_22968, Formatstr_22965, A_22967, A_22967Len0);
return Result_22968;
}
N_NIMCALL(NimStringDesc*, nsuNormalize)(NimStringDesc* S_22546) {
NimStringDesc* Result_22547;
NI I_22557;
NI HEX3Atmp_22588;
NI Res_22590;
Result_22547 = 0;
Result_22547 = copyString(((NimStringDesc*) &TMP193614));
I_22557 = 0;
HEX3Atmp_22588 = 0;
HEX3Atmp_22588 = (NI32)(S_22546->Sup.len - 1);
Res_22590 = 0;
Res_22590 = 0;
while (1) {
if (!(Res_22590 <= HEX3Atmp_22588)) goto LA1;
I_22557 = Res_22590;
if (!(((NU8)(S_22546->data[I_22557])) >= ((NU8)(65)) && ((NU8)(S_22546->data[I_22557])) <= ((NU8)(90)))) goto LA3;
Result_22547 = addChar(Result_22547, ((NIM_CHAR) (((NI) ((NI32)(((NU8)(S_22546->data[I_22557])) + 32))))));
goto LA2;
LA3: ;
if (!!(((NU8)(S_22546->data[I_22557]) == (NU8)(95)))) goto LA5;
Result_22547 = addChar(Result_22547, S_22546->data[I_22557]);
goto LA2;
LA5: ;
LA2: ;
Res_22590 += 1;
} LA1: ;
return Result_22547;
}
N_NIMCALL(NI, nsuFindCharSet)(NimStringDesc* S_24251, TY20402 Chars_24253, NI Start_24254) {
NI Result_24255;
NI I_24265;
NI HEX3Atmp_24278;
NI Res_24280;
Result_24255 = 0;
I_24265 = 0;
HEX3Atmp_24278 = 0;
HEX3Atmp_24278 = (NI32)(S_24251->Sup.len - 1);
Res_24280 = 0;
Res_24280 = Start_24254;
while (1) {
if (!(Res_24280 <= HEX3Atmp_24278)) goto LA1;
I_24265 = Res_24280;
if (!((Chars_24253[((NU8)(S_24251->data[I_24265]))/8] &(1<<(((NU8)(S_24251->data[I_24265]))%8)))!=0)) goto LA3;
Result_24255 = I_24265;
goto BeforeRet;
LA3: ;
Res_24280 += 1;
} LA1: ;
Result_24255 = -1;
goto BeforeRet;
BeforeRet: ;
return Result_24255;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17209, NIM_CHAR C_17210) {
(*Dest_17209).data[((*Dest_17209).Sup.len)-0] = C_17210;
(*Dest_17209).data[((NI32)((*Dest_17209).Sup.len + 1))-0] = 0;
(*Dest_17209).Sup.len += 1;
}
N_NIMCALL(NimStringDesc*, Quoteifcontainswhite_24283)(NimStringDesc* S_24285) {
NimStringDesc* Result_24286;
NIM_BOOL LOC2;
NI LOC3;
NimStringDesc* LOC7;
Result_24286 = 0;
LOC3 = nsuFindCharSet(S_24285, TMP193643, 0);
LOC2 = (0 <= LOC3);
if (!(LOC2)) goto LA4;
LOC2 = !(((NU8)(S_24285->data[0]) == (NU8)(34)));
LA4: ;
if (!LOC2) goto LA5;
LOC7 = rawNewString(S_24285->Sup.len + 2);
appendChar(LOC7, 34);
appendString(LOC7, S_24285);
appendChar(LOC7, 34);
Result_24286 = LOC7;
goto LA1;
LA5: ;
Result_24286 = copyString(S_24285);
LA1: ;
return Result_24286;
}
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* S_24227, NIM_CHAR Sub_24228, NI Start_24229) {
NI Result_24230;
NI I_24240;
NI HEX3Atmp_24244;
NI Res_24246;
Result_24230 = 0;
I_24240 = 0;
HEX3Atmp_24244 = 0;
HEX3Atmp_24244 = (NI32)(S_24227->Sup.len - 1);
Res_24246 = 0;
Res_24246 = Start_24229;
while (1) {
if (!(Res_24246 <= HEX3Atmp_24244)) goto LA1;
I_24240 = Res_24246;
if (!((NU8)(Sub_24228) == (NU8)(S_24227->data[I_24240]))) goto LA3;
Result_24230 = I_24240;
goto BeforeRet;
LA3: ;
Res_24246 += 1;
} LA1: ;
Result_24230 = -1;
goto BeforeRet;
BeforeRet: ;
return Result_24230;
}
N_NIMCALL(NimStringDesc*, nsuToLowerStr)(NimStringDesc* S_22448) {
NimStringDesc* Result_22449;
NI I_22476;
NI HEX3Atmp_22478;
NI Res_22480;
Result_22449 = 0;
Result_22449 = mnewString(S_22448->Sup.len);
I_22476 = 0;
HEX3Atmp_22478 = 0;
HEX3Atmp_22478 = (NI32)(S_22448->Sup.len - 1);
Res_22480 = 0;
Res_22480 = 0;
while (1) {
if (!(Res_22480 <= HEX3Atmp_22478)) goto LA1;
I_22476 = Res_22480;
Result_22449->data[I_22476] = nsuToLowerChar(S_22448->data[I_22476]);
Res_22480 += 1;
} LA1: ;
return Result_22449;
}
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_23769, NimStringDesc* Prefix_23770) {
NIM_BOOL Result_23771;
NI I_23772;
Result_23771 = 0;
I_23772 = 0;
I_23772 = 0;
while (1) {
if (!((NU8)(Prefix_23770->data[I_23772]) == (NU8)(0))) goto LA3;
Result_23771 = NIM_TRUE;
goto BeforeRet;
LA3: ;
if (!!(((NU8)(S_23769->data[I_23772]) == (NU8)(Prefix_23770->data[I_23772])))) goto LA6;
Result_23771 = NIM_FALSE;
goto BeforeRet;
LA6: ;
I_23772 += 1;
}
BeforeRet: ;
return Result_23771;
}
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* S_23504) {
NI Result_23505;
NI L_23507;
TY440* E_23513;
NimStringDesc* LOC5;
Result_23505 = 0;
L_23507 = 0;
L_23507 = npuParseInt(S_23504, &Result_23505, 0);
if (!!((L_23507 == S_23504->Sup.len))) goto LA2;
E_23513 = 0;
E_23513 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_23513).Sup.Sup.Sup.m_type = NTI440;
LOC5 = rawNewString(S_23504->Sup.len + 17);
appendString(LOC5, ((NimStringDesc*) &TMP193657));
appendString(LOC5, S_23504);
asgnRefNoCycle((void**) &(*E_23513).Sup.Sup.message, LOC5);
raiseException((E_Base*)E_23513, "EInvalidValue");
LA2: ;
return Result_23505;
}
N_NIMCALL(void, Preprocesssub_24136)(NimStringDesc* Sub_24138, NI* A_24140) {
NI M_24143;
NI I_24151;
NI Res_24162;
NI I_24159;
NI HEX3Atmp_24166;
NI Res_24168;
M_24143 = 0;
M_24143 = Sub_24138->Sup.len;
I_24151 = 0;
Res_24162 = 0;
Res_24162 = 0;
while (1) {
if (!(Res_24162 <= 255)) goto LA1;
I_24151 = Res_24162;
A_24140[(((NU8)(((NIM_CHAR) (((NI) (I_24151)))))))-0] = (NI32)(M_24143 + 1);
Res_24162 += 1;
} LA1: ;
I_24159 = 0;
HEX3Atmp_24166 = 0;
HEX3Atmp_24166 = (NI32)(M_24143 - 1);
Res_24168 = 0;
Res_24168 = 0;
while (1) {
if (!(Res_24168 <= HEX3Atmp_24166)) goto LA2;
I_24159 = Res_24168;
A_24140[(((NU8)(Sub_24138->data[I_24159])))-0] = (NI32)(M_24143 - I_24159);
Res_24168 += 1;
} LA2: ;
}
N_NIMCALL(NI, Findaux_24171)(NimStringDesc* S_24173, NimStringDesc* Sub_24174, NI Start_24175, TY24135 A_24176) {
NI Result_24177;
NI M_24180;
NI N_24183;
NI J_24184;
NI K_24195;
NI HEX3Atmp_24211;
NI Res_24213;
Result_24177 = 0;
M_24180 = 0;
M_24180 = Sub_24174->Sup.len;
N_24183 = 0;
N_24183 = S_24173->Sup.len;
J_24184 = 0;
J_24184 = Start_24175;
while (1) {
if (!(J_24184 <= (NI32)(N_24183 - M_24180))) goto LA1;
K_24195 = 0;
HEX3Atmp_24211 = 0;
HEX3Atmp_24211 = (NI32)(M_24180 - 1);
Res_24213 = 0;
Res_24213 = 0;
while (1) {
if (!(Res_24213 <= HEX3Atmp_24211)) goto LA3;
K_24195 = Res_24213;
if (!!(((NU8)(Sub_24174->data[K_24195]) == (NU8)(S_24173->data[(NI32)(K_24195 + J_24184)])))) goto LA5;
goto LA2;
LA5: ;
Res_24213 += 1;
} LA3: ;
Result_24177 = J_24184;
goto BeforeRet;
LA2: ;
J_24184 += A_24176[(((NU8)(S_24173->data[(NI32)(J_24184 + M_24180)])))-0];
} LA1: ;
Result_24177 = -1;
goto BeforeRet;
BeforeRet: ;
return Result_24177;
}
N_NIMCALL(NI, nsuFindStr)(NimStringDesc* S_24219, NimStringDesc* Sub_24220, NI Start_24221) {
NI Result_24222;
TY24135 A_24223;
Result_24222 = 0;
memset((void*)&A_24223, 0, sizeof(A_24223));
Preprocesssub_24136(Sub_24220, A_24223);
Result_24222 = Findaux_24171(S_24219, Sub_24220, Start_24221, A_24223);
return Result_24222;
}
N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* Formatstr_22972, NimStringDesc* A_22973) {
NimStringDesc* Result_22974;
TY45865 LOC1;
Result_22974 = 0;
LOC1[0] = copyString(A_22973);
Result_22974 = nsuFormatOpenArray(Formatstr_22972, LOC1, 1);
goto BeforeRet;
BeforeRet: ;
return Result_22974;
}
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_22981, NIM_BOOL Leading_22982, NIM_BOOL Trailing_22983) {
NimStringDesc* Result_22984;
NI First_22987;
NI Last_22990;
NIM_BOOL LOC9;
Result_22984 = 0;
First_22987 = 0;
First_22987 = 0;
Last_22990 = 0;
Last_22990 = (NI32)(S_22981->Sup.len - 1);
if (!Leading_22982) goto LA2;
while (1) {
if (!(((NU8)(S_22981->data[First_22987])) == ((NU8)(32)) || ((NU8)(S_22981->data[First_22987])) == ((NU8)(9)) || ((NU8)(S_22981->data[First_22987])) == ((NU8)(11)) || ((NU8)(S_22981->data[First_22987])) == ((NU8)(13)) || ((NU8)(S_22981->data[First_22987])) == ((NU8)(10)) || ((NU8)(S_22981->data[First_22987])) == ((NU8)(12)))) goto LA4;
First_22987 += 1;
} LA4: ;
LA2: ;
if (!Trailing_22983) goto LA6;
while (1) {
LOC9 = (0 <= Last_22990);
if (!(LOC9)) goto LA10;
LOC9 = (((NU8)(S_22981->data[Last_22990])) == ((NU8)(32)) || ((NU8)(S_22981->data[Last_22990])) == ((NU8)(9)) || ((NU8)(S_22981->data[Last_22990])) == ((NU8)(11)) || ((NU8)(S_22981->data[Last_22990])) == ((NU8)(13)) || ((NU8)(S_22981->data[Last_22990])) == ((NU8)(10)) || ((NU8)(S_22981->data[Last_22990])) == ((NU8)(12)));
LA10: ;
if (!LOC9) goto LA8;
Last_22990 -= 1;
} LA8: ;
LA6: ;
Result_22984 = copyStrLast(S_22981, First_22987, Last_22990);
return Result_22984;
}
N_NIMCALL(NF, nsuParseFloat)(NimStringDesc* S_23574) {
NF Result_23575;
NI L_23577;
TY440* E_23583;
NimStringDesc* LOC5;
Result_23575 = 0;
L_23577 = 0;
L_23577 = npuParseFloat(S_23574, &Result_23575, 0);
if (!!((L_23577 == S_23574->Sup.len))) goto LA2;
E_23583 = 0;
E_23583 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_23583).Sup.Sup.Sup.m_type = NTI440;
LOC5 = rawNewString(S_23574->Sup.len + 15);
appendString(LOC5, ((NimStringDesc*) &TMP193703));
appendString(LOC5, S_23574);
asgnRefNoCycle((void**) &(*E_23583).Sup.Sup.message, LOC5);
raiseException((E_Base*)E_23583, "EInvalidValue");
LA2: ;
return Result_23575;
}
N_NIMCALL(NI64, nsuParseBiggestInt)(NimStringDesc* S_23539) {
NI64 Result_23540;
NI L_23542;
TY440* E_23548;
NimStringDesc* LOC5;
Result_23540 = 0;
L_23542 = 0;
L_23542 = npuParseBiggestInt(S_23539, &Result_23540, 0);
if (!!((L_23542 == S_23539->Sup.len))) goto LA2;
E_23548 = 0;
E_23548 = (TY440*) newObj(NTI22867, sizeof(TY440));
(*E_23548).Sup.Sup.Sup.m_type = NTI440;
LOC5 = rawNewString(S_23539->Sup.len + 17);
appendString(LOC5, ((NimStringDesc*) &TMP193657));
appendString(LOC5, S_23539);
asgnRefNoCycle((void**) &(*E_23548).Sup.Sup.message, LOC5);
raiseException((E_Base*)E_23548, "EInvalidValue");
LA2: ;
return Result_23540;
}
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_23750, NIM_CHAR C_23751) {
NimStringDesc* Result_23752;
NI I_23760;
NI HEX3Atmp_23762;
NI Res_23764;
Result_23752 = 0;
Result_23752 = mnewString(Count_23750);
I_23760 = 0;
HEX3Atmp_23762 = 0;
HEX3Atmp_23762 = (NI32)(Count_23750 - 1);
Res_23764 = 0;
Res_23764 = 0;
while (1) {
if (!(Res_23764 <= HEX3Atmp_23762)) goto LA1;
I_23760 = Res_23764;
Result_23752->data[I_23760] = C_23751;
Res_23764 += 1;
} LA1: ;
return Result_23752;
}
N_NIMCALL(NimStringDesc*, nsuToHex)(NI64 X_23450, NI Len_23451) {
NimStringDesc* Result_23452;
NI64 Shift_23454;
NI J_23462;
NI HEX3Atmp_23464;
NI Res_23466;
Result_23452 = 0;
Shift_23454 = 0;
Result_23452 = mnewString(Len_23451);
J_23462 = 0;
HEX3Atmp_23464 = 0;
HEX3Atmp_23464 = (NI32)(Len_23451 - 1);
Res_23466 = 0;
Res_23466 = HEX3Atmp_23464;
while (1) {
if (!(0 <= Res_23466)) goto LA1;
J_23462 = Res_23466;
Result_23452->data[J_23462] = ((NimStringDesc*) &TMP193744)->data[(NI32)(((NI32)(NU32)(NU64)((NI64)((NU64)(X_23450) >> (NU64)(Shift_23454)))) & ((NI32) 15))];
Shift_23454 = (NI64)(Shift_23454 + 4);
Res_23466 -= 1;
} LA1: ;
return Result_23452;
}
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* S_24324, NimStringDesc* Sub_24325, NimStringDesc* By_24326) {
NimStringDesc* Result_24327;
TY24135 A_24328;
NI I_24330;
NI J_24331;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
Result_24327 = 0;
memset((void*)&A_24328, 0, sizeof(A_24328));
Result_24327 = copyString(((NimStringDesc*) &TMP193614));
Preprocesssub_24136(Sub_24325, A_24328);
I_24330 = 0;
I_24330 = 0;
while (1) {
J_24331 = 0;
J_24331 = Findaux_24171(S_24324, Sub_24325, I_24330, A_24328);
if (!(J_24331 < 0)) goto LA3;
goto LA1;
LA3: ;
LOC5 = copyStrLast(S_24324, I_24330, (NI32)(J_24331 - 1));
Result_24327 = resizeString(Result_24327, LOC5->Sup.len + 0);
appendString(Result_24327, LOC5);
Result_24327 = resizeString(Result_24327, By_24326->Sup.len + 0);
appendString(Result_24327, By_24326);
I_24330 = (NI32)(J_24331 + Sub_24325->Sup.len);
} LA1: ;
LOC6 = copyStr(S_24324, I_24330);
Result_24327 = resizeString(Result_24327, LOC6->Sup.len + 0);
appendString(Result_24327, LOC6);
return Result_24327;
}
N_NIMCALL(NimStringDesc*, nsuToBin)(NI64 X_24516, NI Len_24517) {
NimStringDesc* Result_24518;
NI64 Mask_24519;
NI64 Shift_24520;
NI J_24530;
NI HEX3Atmp_24537;
NI Res_24539;
Result_24518 = 0;
Mask_24519 = 0;
Mask_24519 = 1;
Shift_24520 = 0;
Shift_24520 = 0;
Result_24518 = mnewString(Len_24517);
J_24530 = 0;
HEX3Atmp_24537 = 0;
HEX3Atmp_24537 = (NI32)(Len_24517 - 1);
Res_24539 = 0;
Res_24539 = HEX3Atmp_24537;
while (1) {
if (!(0 <= Res_24539)) goto LA1;
J_24530 = Res_24539;
Result_24518->data[J_24530] = ((NIM_CHAR) (((NI) ((NI32)(((NI) ((NI64)((NU64)((X_24516 & Mask_24519)) >> (NU64)(Shift_24520)))) + 48)))));
Shift_24520 = (NI64)(Shift_24520 + 1);
Mask_24519 = (NI64)((NU64)(Mask_24519) << (NU64)(1));
Res_24539 -= 1;
} LA1: ;
return Result_24518;
}
N_NIMCALL(NimStringDesc*, nsuToOct)(NI64 X_24488, NI Len_24489) {
NimStringDesc* Result_24490;
NI64 Mask_24491;
NI64 Shift_24492;
NI J_24502;
NI HEX3Atmp_24509;
NI Res_24511;
Result_24490 = 0;
Mask_24491 = 0;
Mask_24491 = 7;
Shift_24492 = 0;
Shift_24492 = 0;
Result_24490 = mnewString(Len_24489);
J_24502 = 0;
HEX3Atmp_24509 = 0;
HEX3Atmp_24509 = (NI32)(Len_24489 - 1);
Res_24511 = 0;
Res_24511 = HEX3Atmp_24509;
while (1) {
if (!(0 <= Res_24511)) goto LA1;
J_24502 = Res_24511;
Result_24490->data[J_24502] = ((NIM_CHAR) (((NI) ((NI32)(((NI) ((NI64)((NU64)((X_24488 & Mask_24491)) >> (NU64)(Shift_24492)))) + 48)))));
Shift_24492 = (NI64)(Shift_24492 + 3);
Mask_24491 = (NI64)((NU64)(Mask_24491) << (NU64)(3));
Res_24511 -= 1;
} LA1: ;
return Result_24490;
}
N_NIMCALL(NimStringDesc*, nsuIntToStr)(NI X_23471, NI Minchars_23472) {
NimStringDesc* Result_23473;
NI I_23485;
NI HEX3Atmp_23497;
NI Res_23499;
NimStringDesc* LOC2;
NimStringDesc* LOC6;
Result_23473 = 0;
Result_23473 = nimIntToStr((NI32)abs(X_23471));
I_23485 = 0;
HEX3Atmp_23497 = 0;
HEX3Atmp_23497 = (NI32)(Minchars_23472 - Result_23473->Sup.len);
Res_23499 = 0;
Res_23499 = 1;
while (1) {
if (!(Res_23499 <= HEX3Atmp_23497)) goto LA1;
I_23485 = Res_23499;
LOC2 = rawNewString(Result_23473->Sup.len + 1);
appendChar(LOC2, 48);
appendString(LOC2, Result_23473);
Result_23473 = LOC2;
Res_23499 += 1;
} LA1: ;
if (!(X_23471 < 0)) goto LA4;
LOC6 = rawNewString(Result_23473->Sup.len + 1);
appendChar(LOC6, 45);
appendString(LOC6, Result_23473);
Result_23473 = LOC6;
LA4: ;
return Result_23473;
}
N_NIMCALL(NimStringDesc*, nsuToOctal)(NIM_CHAR C_23043) {
NimStringDesc* Result_23044;
NI Val_23050;
NI I_23073;
NI Res_23081;
Result_23044 = 0;
Result_23044 = mnewString(3);
Val_23050 = 0;
Val_23050 = ((NU8)(C_23043));
I_23073 = 0;
Res_23081 = 0;
Res_23081 = 2;
while (1) {
if (!(0 <= Res_23081)) goto LA1;
I_23073 = Res_23081;
Result_23044->data[I_23073] = ((NIM_CHAR) (((NI) ((NI32)((NI32)(Val_23050 % 8) + 48)))));
Val_23050 = (NI32)(Val_23050 / 8);
Res_23081 -= 1;
} LA1: ;
return Result_23044;
}
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** A_24004, NI A_24004Len0, NimStringDesc* Sep_24005) {
NimStringDesc* Result_24006;
NI L_24031;
NI I_24039;
NI HEX3Atmp_24063;
NI Res_24065;
NI I_24061;
NI HEX3Atmp_24069;
NI Res_24071;
Result_24006 = 0;
if (!(0 < A_24004Len0)) goto LA2;
L_24031 = 0;
L_24031 = (NI32)(Sep_24005->Sup.len * (NI32)(A_24004Len0 - 1));
I_24039 = 0;
HEX3Atmp_24063 = 0;
HEX3Atmp_24063 = (A_24004Len0-1);
Res_24065 = 0;
Res_24065 = 0;
while (1) {
if (!(Res_24065 <= HEX3Atmp_24063)) goto LA4;
I_24039 = Res_24065;
L_24031 += A_24004[I_24039]->Sup.len;
Res_24065 += 1;
} LA4: ;
Result_24006 = mnewString(L_24031);
Result_24006 = setLengthStr(Result_24006, 0);
Result_24006 = resizeString(Result_24006, A_24004[0]->Sup.len + 0);
appendString(Result_24006, A_24004[0]);
I_24061 = 0;
HEX3Atmp_24069 = 0;
HEX3Atmp_24069 = (A_24004Len0-1);
Res_24071 = 0;
Res_24071 = 1;
while (1) {
if (!(Res_24071 <= HEX3Atmp_24069)) goto LA5;
I_24061 = Res_24071;
Result_24006 = resizeString(Result_24006, Sep_24005->Sup.len + 0);
appendString(Result_24006, Sep_24005);
Result_24006 = resizeString(Result_24006, A_24004[I_24061]->Sup.len + 0);
appendString(Result_24006, A_24004[I_24061]);
Res_24071 += 1;
} LA5: ;
goto LA1;
LA2: ;
Result_24006 = copyString(((NimStringDesc*) &TMP193614));
LA1: ;
return Result_24006;
}
N_NIMCALL(NIM_BOOL, Allcharsinset_23830)(NimStringDesc* S_23832, TY20402 Theset_23833) {
NIM_BOOL Result_23834;
NIM_CHAR C_23837;
NI I_23851;
Result_23834 = 0;
C_23837 = 0;
I_23851 = 0;
I_23851 = 0;
while (1) {
if (!(I_23851 < S_23832->Sup.len)) goto LA1;
C_23837 = S_23832->data[I_23851];
if (!!(((Theset_23833[((NU8)(C_23837))/8] &(1<<(((NU8)(C_23837))%8)))!=0))) goto LA3;
Result_23834 = NIM_FALSE;
goto BeforeRet;
LA3: ;
I_23851 += 1;
} LA1: ;
Result_23834 = NIM_TRUE;
goto BeforeRet;
BeforeRet: ;
return Result_23834;
}
N_NOINLINE(void, strutilsInit)(void) {
}

