/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY55526 TY55526;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY55552 TY55552;
typedef struct TY47538 TY47538;
typedef struct TY55548 TY55548;
typedef struct TY54011 TY54011;
typedef struct TY55520 TY55520;
typedef struct TY75204 TY75204;
typedef struct TY54005 TY54005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY55550 TY55550;
typedef struct TY55540 TY55540;
typedef struct TY52008 TY52008;
typedef struct TY55530 TY55530;
typedef struct TY55528 TY55528;
typedef struct TY55544 TY55544;
typedef struct TY43013 TY43013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY47538 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY55526 {
TY55552* Typ;
NimStringDesc* Comment;
TY47538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY55548* Sym;
} S4;
struct {TY54011* Ident;
} S5;
struct {TY55520* Sons;
} S6;
} KindU;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY54005 {
  TNimObject Sup;
NI Id;
};
struct TY55540 {
NU8 K;
NU8 S;
NU8 Flags;
TY55552* T;
TY52008* R;
NI A;
};
struct TY55552 {
  TY54005 Sup;
NU8 Kind;
TY55550* Sons;
TY55526* N;
NU8 Flags;
NU8 Callconv;
TY55548* Owner;
TY55548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY55540 Loc;
};
struct TY55530 {
TNimType* m_type;
NI Counter;
TY55528* Data;
};
struct TY55548 {
  TY54005 Sup;
NU8 Kind;
NU8 Magic;
TY55552* Typ;
TY54011* Name;
TY47538 Info;
TY55548* Owner;
NU32 Flags;
TY55530 Tab;
TY55526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY55540 Loc;
TY55544* Annex;
};
struct TY54011 {
  TY54005 Sup;
NimStringDesc* S;
TY54011* Next;
NI H;
};
struct TY75204 {
  TNimObject Sup;
NU8 Kind;
FILE* F;
NimStringDesc* S;
NI Rd;
NI Wr;
NI Lineoffset;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY52008 {
  TNimObject Sup;
TY52008* Left;
TY52008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY43013 {
  TNimObject Sup;
TY43013* Prev;
TY43013* Next;
};
struct TY55544 {
  TY43013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY52008* Name;
TY55526* Path;
};
struct TY55520 {
  TGenericSeq Sup;
  TY55526* data[SEQ_DECL_SIZE];
};
struct TY55550 {
  TGenericSeq Sup;
  TY55552* data[SEQ_DECL_SIZE];
};
struct TY55528 {
  TGenericSeq Sup;
  TY55548* data[SEQ_DECL_SIZE];
};
N_NIMCALL(TY55526*, Getarg_90036)(TY55526* N_90038, NimStringDesc* Name_90039, NI Pos_90040);
static N_INLINE(NI, Sonslen_55804)(TY55526* N_55806);
N_NIMCALL(void, Invalidpragma_90032)(TY55526* N_90034);
N_NIMCALL(void, Localerror_48144)(TY47538 Info_48146, NU8 Msg_48147, NimStringDesc* Arg_48148);
N_NIMCALL(NimStringDesc*, Rendertree_85042)(TY55526* N_85044, NU8 Renderflags_85047);
N_NIMCALL(NIM_BOOL, Identeq_54028)(TY54011* Id_54030, NimStringDesc* Name_54031);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18712);
N_NIMCALL(NimStringDesc*, Strarg_90020)(TY55526* N_90022, NimStringDesc* Name_90023, NI Pos_90024, NimStringDesc* Default_90025);
N_NIMCALL(NIM_BOOL, Boolarg_90026)(TY55526* N_90028, NimStringDesc* Name_90029, NI Pos_90030, NIM_BOOL Default_90031);
N_NIMCALL(TY75204*, Llstreamopen_75217)(NimStringDesc* Data_75219);
N_NIMCALL(NIM_BOOL, Llstreamatend_75263)(TY75204* S_75265);
N_NIMCALL(NimStringDesc*, Llstreamreadline_75240)(TY75204* S_75242);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24976, NIM_BOOL Leading_24977, NIM_BOOL Trailing_24978);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25848, NimStringDesc* Prefix_25849);
N_NIMCALL(void, Llstreamwriteln_75259)(TY75204* S_75261, NimStringDesc* Data_75262);
N_NIMCALL(void, Llstreamclose_75232)(TY75204* S_75234);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* S_26301, NimStringDesc* Sub_26302, NimStringDesc* By_26303);
STRING_LITERAL(TMP195851, "startswith", 10);
STRING_LITERAL(TMP195852, "", 0);
STRING_LITERAL(TMP195853, "true", 4);
STRING_LITERAL(TMP195854, "false", 5);
STRING_LITERAL(TMP195855, "leading", 7);
STRING_LITERAL(TMP195856, "trailing", 8);
STRING_LITERAL(TMP195857, "sub", 3);
STRING_LITERAL(TMP195858, "by", 2);
static N_INLINE(NI, Sonslen_55804)(TY55526* N_55806) {
NI Result_56880;
Result_56880 = 0;
if (!(*N_55806).KindU.S6.Sons == 0) goto LA2;
Result_56880 = 0;
goto LA1;
LA2: ;
Result_56880 = (*N_55806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_56880;
}
N_NIMCALL(void, Invalidpragma_90032)(TY55526* N_90034) {
NimStringDesc* LOC1;
LOC1 = 0;
LOC1 = Rendertree_85042(N_90034, 4);
Localerror_48144((*N_90034).Info, ((NU8) 159), LOC1);
}
N_NIMCALL(TY55526*, Getarg_90036)(TY55526* N_90038, NimStringDesc* Name_90039, NI Pos_90040) {
TY55526* Result_90041;
NI I_90077;
NI HEX3Atmp_90206;
NI LOC4;
NI Res_90208;
NIM_BOOL LOC13;
Result_90041 = 0;
Result_90041 = NIM_NIL;
if (!((*N_90038).Kind >= ((NU8) 1) && (*N_90038).Kind <= ((NU8) 18))) goto LA2;
goto BeforeRet;
LA2: ;
I_90077 = 0;
HEX3Atmp_90206 = 0;
LOC4 = Sonslen_55804(N_90038);
HEX3Atmp_90206 = (NI32)(LOC4 - 1);
Res_90208 = 0;
Res_90208 = 1;
while (1) {
if (!(Res_90208 <= HEX3Atmp_90206)) goto LA5;
I_90077 = Res_90208;
if (!((*(*N_90038).KindU.S6.Sons->data[I_90077]).Kind == ((NU8) 23))) goto LA7;
if (!!(((*(*(*N_90038).KindU.S6.Sons->data[I_90077]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA10;
Invalidpragma_90032(N_90038);
LA10: ;
LOC13 = Identeq_54028((*(*(*N_90038).KindU.S6.Sons->data[I_90077]).KindU.S6.Sons->data[0]).KindU.S5.Ident, Name_90039);
if (!LOC13) goto LA14;
Result_90041 = (*(*N_90038).KindU.S6.Sons->data[I_90077]).KindU.S6.Sons->data[1];
goto BeforeRet;
LA14: ;
goto LA6;
LA7: ;
if (!(I_90077 == Pos_90040)) goto LA16;
Result_90041 = (*N_90038).KindU.S6.Sons->data[I_90077];
goto BeforeRet;
goto LA6;
LA16: ;
LA6: ;
Res_90208 += 1;
} LA5: ;
BeforeRet: ;
return Result_90041;
}
N_NIMCALL(NIM_CHAR, Chararg_90014)(TY55526* N_90016, NimStringDesc* Name_90017, NI Pos_90018, NIM_CHAR Default_90019) {
NIM_CHAR Result_90215;
TY55526* X_90216;
Result_90215 = 0;
X_90216 = 0;
X_90216 = Getarg_90036(N_90016, Name_90017, Pos_90018);
if (!(X_90216 == NIM_NIL)) goto LA2;
Result_90215 = Default_90019;
goto LA1;
LA2: ;
if (!((*X_90216).Kind == ((NU8) 5))) goto LA4;
Result_90215 = ((NIM_CHAR) (((NI) (((NI) ((*X_90216).KindU.S1.Intval))))));
goto LA1;
LA4: ;
Invalidpragma_90032(N_90016);
LA1: ;
return Result_90215;
}
N_NIMCALL(NimStringDesc*, Strarg_90020)(TY55526* N_90022, NimStringDesc* Name_90023, NI Pos_90024, NimStringDesc* Default_90025) {
NimStringDesc* Result_90255;
TY55526* X_90256;
Result_90255 = 0;
X_90256 = 0;
X_90256 = Getarg_90036(N_90022, Name_90023, Pos_90024);
if (!(X_90256 == NIM_NIL)) goto LA2;
Result_90255 = copyString(Default_90025);
goto LA1;
LA2: ;
if (!((*X_90256).Kind >= ((NU8) 14) && (*X_90256).Kind <= ((NU8) 16))) goto LA4;
Result_90255 = copyString((*X_90256).KindU.S3.Strval);
goto LA1;
LA4: ;
Invalidpragma_90032(N_90022);
LA1: ;
return Result_90255;
}
N_NIMCALL(NIM_BOOL, Boolarg_90026)(TY55526* N_90028, NimStringDesc* Name_90029, NI Pos_90030, NIM_BOOL Default_90031) {
NIM_BOOL Result_90298;
TY55526* X_90299;
NIM_BOOL LOC4;
NIM_BOOL LOC8;
Result_90298 = 0;
X_90299 = 0;
X_90299 = Getarg_90036(N_90028, Name_90029, Pos_90030);
if (!(X_90299 == NIM_NIL)) goto LA2;
Result_90298 = Default_90031;
goto LA1;
LA2: ;
LOC4 = ((*X_90299).Kind == ((NU8) 2));
if (!(LOC4)) goto LA5;
LOC4 = Identeq_54028((*X_90299).KindU.S5.Ident, ((NimStringDesc*) &TMP195853));
LA5: ;
if (!LOC4) goto LA6;
Result_90298 = NIM_TRUE;
goto LA1;
LA6: ;
LOC8 = ((*X_90299).Kind == ((NU8) 2));
if (!(LOC8)) goto LA9;
LOC8 = Identeq_54028((*X_90299).KindU.S5.Ident, ((NimStringDesc*) &TMP195854));
LA9: ;
if (!LOC8) goto LA10;
Result_90298 = NIM_FALSE;
goto LA1;
LA10: ;
Invalidpragma_90032(N_90028);
LA1: ;
return Result_90298;
}
N_NIMCALL(TY75204*, Filterstrip_90009)(TY75204* Stdin_90011, NimStringDesc* Filename_90012, TY55526* Call_90013) {
TY75204* Result_90358;
NimStringDesc* Pattern_90359;
NIM_BOOL Leading_90360;
NIM_BOOL Trailing_90361;
NIM_BOOL LOC2;
NimStringDesc* Line_90362;
NimStringDesc* Stripped_90363;
NIM_BOOL LOC4;
Result_90358 = 0;
Pattern_90359 = 0;
Pattern_90359 = Strarg_90020(Call_90013, ((NimStringDesc*) &TMP195851), 1, ((NimStringDesc*) &TMP195852));
Leading_90360 = 0;
Leading_90360 = Boolarg_90026(Call_90013, ((NimStringDesc*) &TMP195855), 2, NIM_TRUE);
Trailing_90361 = 0;
Trailing_90361 = Boolarg_90026(Call_90013, ((NimStringDesc*) &TMP195856), 3, NIM_TRUE);
Result_90358 = Llstreamopen_75217(((NimStringDesc*) &TMP195852));
while (1) {
LOC2 = Llstreamatend_75263(Stdin_90011);
if (!!(LOC2)) goto LA1;
Line_90362 = 0;
Line_90362 = Llstreamreadline_75240(Stdin_90011);
Stripped_90363 = 0;
Stripped_90363 = nsuStrip(Line_90362, Leading_90360, Trailing_90361);
LOC4 = (Pattern_90359->Sup.len == 0);
if (LOC4) goto LA5;
LOC4 = nsuStartsWith(Stripped_90363, Pattern_90359);
LA5: ;
if (!LOC4) goto LA6;
Llstreamwriteln_75259(Result_90358, Stripped_90363);
goto LA3;
LA6: ;
Llstreamwriteln_75259(Result_90358, Line_90362);
LA3: ;
} LA1: ;
Llstreamclose_75232(Stdin_90011);
return Result_90358;
}
N_NIMCALL(TY75204*, Filterreplace_90004)(TY75204* Stdin_90006, NimStringDesc* Filename_90007, TY55526* Call_90008) {
TY75204* Result_90373;
NimStringDesc* Sub_90374;
NimStringDesc* By_90379;
NIM_BOOL LOC5;
NimStringDesc* Line_90380;
NimStringDesc* LOC6;
Result_90373 = 0;
Sub_90374 = 0;
Sub_90374 = Strarg_90020(Call_90008, ((NimStringDesc*) &TMP195857), 1, ((NimStringDesc*) &TMP195852));
if (!(Sub_90374->Sup.len == 0)) goto LA2;
Invalidpragma_90032(Call_90008);
LA2: ;
By_90379 = 0;
By_90379 = Strarg_90020(Call_90008, ((NimStringDesc*) &TMP195858), 2, ((NimStringDesc*) &TMP195852));
Result_90373 = Llstreamopen_75217(((NimStringDesc*) &TMP195852));
while (1) {
LOC5 = Llstreamatend_75263(Stdin_90006);
if (!!(LOC5)) goto LA4;
Line_90380 = 0;
Line_90380 = Llstreamreadline_75240(Stdin_90006);
LOC6 = 0;
LOC6 = nsuReplaceStr(Line_90380, Sub_90374, By_90379);
Llstreamwriteln_75259(Result_90373, LOC6);
} LA4: ;
Llstreamclose_75232(Stdin_90006);
return Result_90373;
}
N_NOINLINE(void, filtersInit)(void) {
}

