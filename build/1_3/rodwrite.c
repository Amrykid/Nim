/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY51900 TY51900;
typedef struct TY51896 TY51896;
typedef struct TY51898 TY51898;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY101006 TY101006;
typedef struct TY101002 TY101002;
typedef struct TY51547 TY51547;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY89031 TY89031;
typedef struct TY51525 TY51525;
typedef struct TY50005 TY50005;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY51551 TY51551;
typedef struct TY50011 TY50011;
typedef struct TY43532 TY43532;
typedef struct TY51529 TY51529;
typedef struct TY51527 TY51527;
typedef struct TY51539 TY51539;
typedef struct TY48008 TY48008;
typedef struct TY51543 TY51543;
typedef struct TY107004 TY107004;
typedef struct TY89029 TY89029;
typedef struct TY55223 TY55223;
typedef struct TY55221 TY55221;
typedef struct TY55219 TY55219;
typedef struct TY51549 TY51549;
typedef struct TY35221 TY35221;
typedef struct TY10602 TY10602;
typedef struct TY10614 TY10614;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10610 TY10610;
typedef struct TY8004 TY8004;
typedef struct TY10988 TY10988;
typedef struct TY55079 TY55079;
typedef struct TY51519 TY51519;
typedef struct TY39013 TY39013;
typedef struct TY51563 TY51563;
typedef struct TY51561 TY51561;
typedef struct TY51559 TY51559;
struct TGenericSeq {
NI len;
NI space;
};
struct TY51900 {
NI Counter;
NI Max;
TY51896* Head;
TY51898* Data;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
typedef N_NIMCALL_PTR(TY101002*, TY101007) (TY51547* Module_101008, NimStringDesc* Filename_101009);
typedef N_NIMCALL_PTR(TY101002*, TY101012) (TY51547* Module_101013, NimStringDesc* Filename_101014, TY89031* Rd_101015);
typedef N_NIMCALL_PTR(TY51525*, TY101018) (TY101002* P_101019, TY51525* N_101020);
typedef N_NIMCALL_PTR(TY51525*, TY101023) (TY101002* P_101024, TY51525* Toplevelstmt_101025);
struct TY101006 {
TY101007 Open;
TY101012 Opencached;
TY101018 Close;
TY101023 Process;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TY50005 {
  TNimObject Sup;
NI Id;
};
struct TY43532 {
NI16 Line;
NI16 Col;
NI32 Fileindex;
};
struct TY51529 {
TNimType* m_type;
NI Counter;
TY51527* Data;
};
struct TY51539 {
NU8 K;
NU8 S;
NU8 Flags;
TY51551* T;
TY48008* R;
NI A;
};
struct TY51547 {
  TY50005 Sup;
NU8 Kind;
NU8 Magic;
TY51551* Typ;
TY50011* Name;
TY43532 Info;
TY51547* Owner;
NU32 Flags;
TY51529 Tab;
TY51525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY51539 Loc;
TY51543* Annex;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY101002 {
  TNimObject Sup;
};
struct TY55219 {
NI Key;
NI Val;
};
struct TY55223 {
NI Counter;
TY55221* Data;
};
struct TY89029 {
NI Lastidxkey;
NI Lastidxval;
TY55223 Tab;
TY48008* R;
NI Offset;
};
struct TY107004 {
  TY101002 Sup;
TY51547* Module;
NI32 Crc;
NU32 Options;
TY48008* Defines;
TY48008* Incldeps;
TY48008* Moddeps;
TY48008* Interf;
TY48008* Compilerprocs;
TY89029 Index;
TY89029 Imports;
TY48008* Converters;
TY48008* Init;
TY48008* Data;
NimStringDesc* Filename;
TY51527* Sstack;
TY51549* Tstack;
TY35221* Files;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY8004 {
void* Debuginfo;
NI32 Lockcount;
NI32 Recursioncount;
NI Owningthread;
NI Locksemaphore;
NI32 Reserved;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
TY8004 Cyclerootslock;
TY8004 Zctlock;
TY10988 Stat;
};
struct TY55079 {
NI H;
};
struct TY50011 {
  TY50005 Sup;
NimStringDesc* S;
TY50011* Next;
NI H;
};
typedef TY48008* TY173060[2];
typedef TY48008* TY48446[1];
struct TY51551 {
  TY50005 Sup;
NU8 Kind;
TY51549* Sons;
TY51525* N;
NU8 Flags;
NU8 Callconv;
TY51547* Owner;
TY51547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY51539 Loc;
};
typedef TY48008* TY157050[3];
struct TY51525 {
TY51551* Typ;
NimStringDesc* Comment;
TY43532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY51547* Sym;
} S4;
struct {TY50011* Ident;
} S5;
struct {TY51519* Sons;
} S6;
} KindU;
};
struct TY39013 {
  TNimObject Sup;
TY39013* Prev;
TY39013* Next;
};
struct TY51543 {
  TY39013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY48008* Name;
TY51525* Path;
};
typedef NI TY8614[16];
struct TY51896 {
TY51896* Next;
NI Key;
TY8614 Bits;
};
struct TY51559 {
TY50005* Key;
TNimObject* Val;
};
struct TY51563 {
NI Counter;
TY51561* Data;
};
struct TY89031 {
  TNimObject Sup;
NI Pos;
NimStringDesc* S;
NU32 Options;
NU8 Reason;
TY35221* Moddeps;
TY35221* Files;
NI Dataidx;
NI Convertersidx;
NI Initidx;
NI Interfidx;
NI Compilerprocsidx;
NI Cgenidx;
NimStringDesc* Filename;
TY89029 Index;
TY89029 Imports;
NI Readerindex;
NI Line;
NI Moduleid;
TY51563 Syms;
};
struct TY48008 {
  TNimObject Sup;
TY48008* Left;
TY48008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY51898 {
  TGenericSeq Sup;
  TY51896* data[SEQ_DECL_SIZE];
};
struct TY51527 {
  TGenericSeq Sup;
  TY51547* data[SEQ_DECL_SIZE];
};
struct TY55221 {
  TGenericSeq Sup;
  TY55219 data[SEQ_DECL_SIZE];
};
struct TY51549 {
  TGenericSeq Sup;
  TY51551* data[SEQ_DECL_SIZE];
};
struct TY35221 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY51519 {
  TGenericSeq Sup;
  TY51525* data[SEQ_DECL_SIZE];
};
struct TY51561 {
  TGenericSeq Sup;
  TY51559 data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, Intsetinit_51924)(TY51900* S_51927);
N_NIMCALL(void, Initpass_101031)(TY101006* P_101034);
N_NIMCALL(TY101002*, Myopen_108968)(TY51547* Module_108970, NimStringDesc* Filename_108971);
N_NIMCALL(void, Internalerror_43571)(NimStringDesc* Errmsg_43573);
N_NIMCALL(TY107004*, Newrodwriter_107024)(NimStringDesc* Modfilename_107026, NI32 Crc_107027, TY51547* Module_107028);
N_NIMCALL(void*, newObj)(TNimType* Typ_13507, NI Size_13508);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14004, NI Len_14005);
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015);
static N_INLINE(void, Incref_13002)(TY10602* C_13004);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418);
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054);
N_NOINLINE(void, Incl_10874)(TY10614* S_10877, TY10602* Cell_10878);
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414);
static N_INLINE(void, Decref_12801)(TY10602* C_12803);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403);
N_NOINLINE(void, Addzct_11401)(TY10618* S_11404, TY10602* C_11405);
N_NIMCALL(void, Initiitable_55228)(TY55223* X_55231);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18508);
N_NIMCALL(TY48008*, Getdefines_107056)(void);
N_NIMCALL(TY51547*, Inittabiter_55081)(TY55079* Ti_55084, TY51529* Tab_55085);
N_NIMCALL(void, App_48036)(TY48008** A_48039, NimStringDesc* B_48040);
N_NIMCALL(TY51547*, Nextiter_55086)(TY55079* Ti_55089, TY51529* Tab_55090);
N_NIMCALL(NI32, Getcrc_89064)(NimStringDesc* Filename_89066);
N_NIMCALL(void, Rawaddinterfacesym_108327)(TY107004* W_108329, TY51547* S_108330);
N_NIMCALL(void, Pushsym_107272)(TY107004* W_107274, TY51547* S_107275);
N_NIMCALL(NI, Iitableget_55232)(TY55223 T_55234, NI Key_55235);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_18803, NI Elemsize_18804, NI Newlen_18805);
N_NIMCALL(void, Processstacks_107053)(TY107004* W_107055);
N_NIMCALL(void, Symstack_108098)(TY107004* W_108100);
N_NIMCALL(TY51547*, Getmodule_55206)(TY51547* S_55208);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18487);
N_NIMCALL(NI, Ropelen_48055)(TY48008* A_48057);
N_NIMCALL(void, Addtoindex_108073)(TY89029* W_108076, NI Key_108077, NI Val_108078);
N_NIMCALL(void, App_48031)(TY48008** A_48034, TY48008* B_48035);
N_NIMCALL(TY48008*, Encodeint_89073)(NI64 X_89075);
N_NIMCALL(void, Appf_48074)(TY48008** C_48077, NimStringDesc* Frmt_48078, TY48008** Args_48080, NI Args_48080Len0);
N_NIMCALL(void, Iitableput_55236)(TY55223* T_55239, NI Key_55240, NI Val_55241);
N_NIMCALL(TY48008*, Encodesym_107860)(TY107004* W_107862, TY51547* S_107863);
N_NIMCALL(TY48008*, Torope_48046)(NimStringDesc* S_48048);
N_NIMCALL(TY48008*, Encodestr_107048)(TY107004* W_107050, NimStringDesc* S_107051);
N_NIMCALL(TY48008*, Encode_89076)(NimStringDesc* S_89078);
N_NIMCALL(void, Pushtype_107243)(TY107004* W_107245, TY51551* T_107246);
N_NIMCALL(NI, Fileidx_107090)(TY107004* W_107092, NimStringDesc* Filename_107093);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448);
N_NIMCALL(NimStringDesc*, Tofilename_43579)(TY43532 Info_43581);
N_NIMCALL(NIM_BOOL, Astneeded_101041)(TY51547* S_101043);
N_NIMCALL(TY48008*, Encodenode_107301)(TY107004* W_107303, TY43532 Finfo_107304, TY51525* N_107305);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF X_19260);
N_NIMCALL(NI, Sonslen_51803)(TY51525* N_51805);
N_NIMCALL(TY48008*, Encodeloc_107553)(TY107004* W_107555, TY51539 Loc_107556);
N_NIMCALL(NimStringDesc*, Ropetostr_48066)(TY48008* P_48068);
N_NIMCALL(TY48008*, Ropef_48069)(NimStringDesc* Frmt_48071, TY48008** Args_48073, NI Args_48073Len0);
N_NIMCALL(TY48008*, Encodelib_107834)(TY107004* W_107836, TY51543* Lib_107837, TY43532 Info_107838);
N_NIMCALL(void, Typestack_108252)(TY107004* W_108254);
N_NIMCALL(TY48008*, Encodetype_107664)(TY107004* W_107666, TY51551* T_107667);
N_NIMCALL(TY43532, Unknownlineinfo_43536)(void);
N_NIMCALL(NI, Sonslen_51806)(TY51551* N_51808);
N_NIMCALL(TY51525*, Myclose_108976)(TY101002* C_108978, TY51525* N_108979);
N_NIMCALL(void, Writerod_107045)(TY107004* W_107047);
N_NIMCALL(void, Writerope_48058)(TY48008* Head_48060, NimStringDesc* Filename_48061);
N_NIMCALL(NimStringDesc*, Completegeneratedfilepath_42099)(NimStringDesc* F_42101, NIM_BOOL Createsubdir_42102);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_34820, NimStringDesc* Ext_34821);
N_NIMCALL(TY51525*, Process_108537)(TY101002* C_108539, TY51525* N_108540);
N_NIMCALL(void, Addinterfacesym_107037)(TY107004* W_107039, TY51547* S_107040);
N_NIMCALL(void, Internalerror_43567)(TY43532 Info_43569, NimStringDesc* Errmsg_43570);
N_NIMCALL(void, Addmoddep_107029)(TY107004* W_107031, NimStringDesc* Dep_107032);
N_NIMCALL(NimStringDesc*, Getmodulefile_106013)(TY51525* N_106015);
N_NIMCALL(void, Addstmt_107041)(TY107004* W_107043, TY51525* N_107044);
N_NIMCALL(void, Addincldep_107033)(TY107004* W_107035, NimStringDesc* Dep_107036);
N_NIMCALL(NI32, Crcfromfile_46029)(NimStringDesc* Filename_46031);
STRING_LITERAL(TMP194824, "rodwrite: module ID not set", 27);
STRING_LITERAL(TMP194826, " ", 1);
STRING_LITERAL(TMP194827, "symStack: module nil: ", 22);
STRING_LITERAL(TMP194828, "\012", 1);
STRING_LITERAL(TMP194829, "$1 $2\012", 6);
STRING_LITERAL(TMP194830, "{}", 2);
STRING_LITERAL(TMP194831, "+$1", 3);
STRING_LITERAL(TMP194832, "&$1", 3);
STRING_LITERAL(TMP194833, "^$1", 3);
STRING_LITERAL(TMP194834, "?$1,$2,$3", 9);
STRING_LITERAL(TMP194835, "*$1", 3);
STRING_LITERAL(TMP194836, "$$$1", 4);
STRING_LITERAL(TMP194837, "@$1", 3);
STRING_LITERAL(TMP194838, "()", 2);
STRING_LITERAL(TMP194839, "(", 1);
STRING_LITERAL(TMP194840, "?$1,$2", 6);
STRING_LITERAL(TMP194841, "?$1", 3);
STRING_LITERAL(TMP194842, "!$1", 3);
STRING_LITERAL(TMP194843, ")", 1);
STRING_LITERAL(TMP194844, "%$1", 3);
STRING_LITERAL(TMP194845, "`$1", 3);
STRING_LITERAL(TMP194846, "<$1>", 4);
STRING_LITERAL(TMP194847, "|$1", 3);
STRING_LITERAL(TMP194848, "[]", 2);
STRING_LITERAL(TMP194849, "encodeType: tyForward", 21);
STRING_LITERAL(TMP194850, "/$1", 3);
STRING_LITERAL(TMP194851, "=$1", 3);
STRING_LITERAL(TMP194852, "^()", 3);
STRING_LITERAL(TMP194853, "NIM:", 4);
STRING_LITERAL(TMP194854, "1012", 4);
STRING_LITERAL(TMP194855, "ID:", 3);
STRING_LITERAL(TMP194856, "CRC:", 4);
STRING_LITERAL(TMP194857, "OPTIONS:", 8);
STRING_LITERAL(TMP194858, "DEFINES:", 8);
STRING_LITERAL(TMP194859, "FILES(\012", 7);
STRING_LITERAL(TMP194860, ")\012", 2);
STRING_LITERAL(TMP194861, "INCLUDES(\012", 10);
STRING_LITERAL(TMP194862, "DEPS:", 5);
STRING_LITERAL(TMP194863, "INTERF(\012", 8);
STRING_LITERAL(TMP194864, "COMPILERPROCS(\012", 15);
STRING_LITERAL(TMP194865, "INDEX(\012", 7);
STRING_LITERAL(TMP194866, "IMPORTS(\012", 9);
STRING_LITERAL(TMP194867, "CONVERTERS:", 11);
STRING_LITERAL(TMP194868, "INIT(\012", 6);
STRING_LITERAL(TMP194869, "DATA(\012", 6);
STRING_LITERAL(TMP194870, "rod", 3);
STRING_LITERAL(TMP194871, "rodwrite.process", 16);
TY51900 Debugwritten_108097;
extern NU32 Gglobaloptions_42077;
extern TNimType* NTI107006; /* PRodWriter */
extern TNimType* NTI107004; /* TRodWriter */
extern TNimType* NTI51527; /* TSymSeq */
extern TY10990 Gch_11010;
extern TNimType* NTI51549; /* TTypeSeq */
extern TY51529 Gsymbols_59001;
extern NU32 Goptions_42075;
extern TNimType* NTI35221; /* seq[string] */
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11416)(TY10602* C_11418) {
NIM_BOOL Result_11419;
Result_11419 = 0;
Result_11419 = !((((*(*C_11418).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11419;
}
static N_INLINE(void, Rtladdcycleroot_12052)(TY10602* C_12054) {
Incl_10874(&Gch_11010.Cycleroots, C_12054);
}
static N_INLINE(void, Incref_13002)(TY10602* C_13004) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3001(&(*C_13004).Refcount, 8);
LOC3 = Canbecycleroot_11416(C_13004);
if (!LOC3) goto LA4;
Rtladdcycleroot_12052(C_13004);
LA4: ;
}
static N_INLINE(TY10602*, Usrtocell_11412)(void* Usr_11414) {
TY10602* Result_11415;
Result_11415 = 0;
Result_11415 = ((TY10602*) ((NI32)((NU32)(((NI) (Usr_11414))) - (NU32)(((NI) (((NI)sizeof(TY10602))))))));
return Result_11415;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12401)(TY10602* C_12403) {
Addzct_11401(&Gch_11010.Zct, C_12403);
}
static N_INLINE(void, Decref_12801)(TY10602* C_12803) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3006(&(*C_12803).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12401(C_12803);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11416(C_12803);
if (!LOC5) goto LA6;
Rtladdcycleroot_12052(C_12803);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13014, void* Src_13015) {
TY10602* LOC4;
TY10602* LOC8;
if (!!((Src_13015 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11412(Src_13015);
Incref_13002(LOC4);
LA2: ;
if (!!(((*Dest_13014) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11412((*Dest_13014));
Decref_12801(LOC8);
LA6: ;
(*Dest_13014) = Src_13015;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13018, void* Src_13019) {
TY10602* C_13020;
NI LOC4;
TY10602* C_13022;
NI LOC9;
if (!!((Src_13019 == NIM_NIL))) goto LA2;
C_13020 = 0;
C_13020 = Usrtocell_11412(Src_13019);
LOC4 = Atomicinc_3001(&(*C_13020).Refcount, 8);
LA2: ;
if (!!(((*Dest_13018) == NIM_NIL))) goto LA6;
C_13022 = 0;
C_13022 = Usrtocell_11412((*Dest_13018));
LOC9 = Atomicdec_3006(&(*C_13022).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12401(C_13022);
LA10: ;
LA6: ;
(*Dest_13018) = Src_13019;
}
N_NIMCALL(TY48008*, Getdefines_107056)(void) {
TY48008* Result_107058;
TY55079 It_107059;
TY51547* S_107061;
Result_107058 = 0;
memset((void*)&It_107059, 0, sizeof(It_107059));
S_107061 = 0;
S_107061 = Inittabiter_55081(&It_107059, &Gsymbols_59001);
Result_107058 = NIM_NIL;
while (1) {
if (!!((S_107061 == NIM_NIL))) goto LA1;
if (!((*S_107061).Position == 1)) goto LA3;
if (!!((Result_107058 == NIM_NIL))) goto LA6;
App_48036(&Result_107058, ((NimStringDesc*) &TMP194826));
LA6: ;
App_48036(&Result_107058, (*(*S_107061).Name).S);
LA3: ;
S_107061 = Nextiter_55086(&It_107059, &Gsymbols_59001);
} LA1: ;
return Result_107058;
}
N_NIMCALL(TY107004*, Newrodwriter_107024)(NimStringDesc* Modfilename_107026, NI32 Crc_107027, TY51547* Module_107028) {
TY107004* Result_107151;
Result_107151 = 0;
Result_107151 = (TY107004*) newObj(NTI107006, sizeof(TY107004));
(*Result_107151).Sup.Sup.m_type = NTI107004;
asgnRef((void**) &(*Result_107151).Sstack, (TY51527*) newSeq(NTI51527, 0));
asgnRef((void**) &(*Result_107151).Tstack, (TY51549*) newSeq(NTI51549, 0));
Initiitable_55228(&(*Result_107151).Index.Tab);
Initiitable_55228(&(*Result_107151).Imports.Tab);
asgnRefNoCycle((void**) &(*Result_107151).Filename, copyString(Modfilename_107026));
(*Result_107151).Crc = Crc_107027;
asgnRef((void**) &(*Result_107151).Module, Module_107028);
asgnRefNoCycle((void**) &(*Result_107151).Defines, Getdefines_107056());
(*Result_107151).Options = Goptions_42075;
asgnRefNoCycle((void**) &(*Result_107151).Files, (TY35221*) newSeq(NTI35221, 0));
return Result_107151;
}
N_NIMCALL(void, Pushsym_107272)(TY107004* W_107274, TY51547* S_107275) {
NI LOC2;
NI L_107288;
LOC2 = Iitableget_55232((*W_107274).Index.Tab, (*S_107275).Sup.Id);
if (!(LOC2 == (-2147483647 -1))) goto LA3;
L_107288 = 0;
L_107288 = (*W_107274).Sstack->Sup.len;
(*W_107274).Sstack = (TY51527*) setLengthSeq(&((*W_107274).Sstack)->Sup, sizeof(TY51547*), (NI32)(L_107288 + 1));
asgnRef((void**) &(*W_107274).Sstack->data[L_107288], S_107275);
LA3: ;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18592, NimStringDesc* Src_18593) {
memcpy(((NCSTRING) (&(*Dest_18592).data[((*Dest_18592).Sup.len)-0])), ((NCSTRING) ((*Src_18593).data)), ((NI32) ((NI32)((NI32)((*Src_18593).Sup.len + 1) * 1))));
(*Dest_18592).Sup.len += (*Src_18593).Sup.len;
}
N_NIMCALL(void, Addtoindex_108073)(TY89029* W_108076, NI Key_108077, NI Val_108078) {
TY48008* LOC4;
TY173060 LOC5;
if (!((NI32)(Key_108077 - (*W_108076).Lastidxkey) == 1)) goto LA2;
LOC4 = 0;
LOC4 = Encodeint_89073(((NI64) ((NI32)(Val_108078 - (*W_108076).Lastidxval))));
App_48031(&(*W_108076).R, LOC4);
App_48036(&(*W_108076).R, ((NimStringDesc*) &TMP194828));
goto LA1;
LA2: ;
memset((void*)&LOC5, 0, sizeof(LOC5));
LOC5[0] = Encodeint_89073(((NI64) ((NI32)(Key_108077 - (*W_108076).Lastidxkey))));
LOC5[1] = Encodeint_89073(((NI64) ((NI32)(Val_108078 - (*W_108076).Lastidxval))));
Appf_48074(&(*W_108076).R, ((NimStringDesc*) &TMP194829), LOC5, 2);
LA1: ;
(*W_108076).Lastidxkey = Key_108077;
(*W_108076).Lastidxval = Val_108078;
Iitableput_55236(&(*W_108076).Tab, Key_108077, Val_108078);
}
N_NIMCALL(TY48008*, Encodestr_107048)(TY107004* W_107050, NimStringDesc* S_107051) {
TY48008* Result_107052;
Result_107052 = 0;
Result_107052 = Encode_89076(S_107051);
return Result_107052;
}
N_NIMCALL(void, Pushtype_107243)(TY107004* W_107245, TY51551* T_107246) {
NI LOC2;
NI L_107259;
LOC2 = Iitableget_55232((*W_107245).Index.Tab, (*T_107246).Sup.Id);
if (!(LOC2 == (-2147483647 -1))) goto LA3;
L_107259 = 0;
L_107259 = (*W_107245).Tstack->Sup.len;
(*W_107245).Tstack = (TY51549*) setLengthSeq(&((*W_107245).Tstack)->Sup, sizeof(TY51551*), (NI32)(L_107259 + 1));
asgnRef((void**) &(*W_107245).Tstack->data[L_107259], T_107246);
LA3: ;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18447, NimStringDesc* B_18448) {
NIM_BOOL Result_18449;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
NI32 LOC11;
Result_18449 = 0;
if (!(A_18447 == B_18448)) goto LA2;
Result_18449 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18447 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18448 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18449 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18447).Sup.len == (*B_18448).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18447).data)), ((NCSTRING) ((*B_18448).data)), ((NI32) ((NI32)((*A_18447).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18449 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18449;
}
N_NIMCALL(NI, Fileidx_107090)(TY107004* W_107092, NimStringDesc* Filename_107093) {
NI Result_107094;
NI I_107117;
NI HEX3Atmp_107141;
NI Res_107143;
Result_107094 = 0;
I_107117 = 0;
HEX3Atmp_107141 = 0;
HEX3Atmp_107141 = ((*W_107092).Files->Sup.len-1);
Res_107143 = 0;
Res_107143 = 0;
while (1) {
if (!(Res_107143 <= HEX3Atmp_107141)) goto LA1;
I_107117 = Res_107143;
if (!eqStrings((*W_107092).Files->data[I_107117], Filename_107093)) goto LA3;
Result_107094 = I_107117;
goto BeforeRet;
LA3: ;
Res_107143 += 1;
} LA1: ;
Result_107094 = (*W_107092).Files->Sup.len;
(*W_107092).Files = (TY35221*) setLengthSeq(&((*W_107092).Files)->Sup, sizeof(NimStringDesc*), (NI32)(Result_107094 + 1));
asgnRefNoCycle((void**) &(*W_107092).Files->data[Result_107094], copyString(Filename_107093));
BeforeRet: ;
return Result_107094;
}
N_NIMCALL(TY48008*, Encodenode_107301)(TY107004* W_107303, TY43532 Finfo_107304, TY51525* N_107305) {
TY48008* Result_107306;
TY48008* LOC4;
TY157050 LOC8;
NimStringDesc* LOC9;
NI LOC10;
TY173060 LOC13;
TY48446 LOC16;
NU8 F_107355;
TY48446 LOC20;
TY48446 LOC24;
TY48446 LOC28;
TY48446 LOC32;
NimStringDesc* LOC33;
TY48446 LOC37;
TY48446 LOC38;
TY48446 LOC39;
NI I_107532;
NI HEX3Atmp_107548;
NI LOC40;
NI Res_107550;
TY48008* LOC42;
Result_107306 = 0;
if (!(N_107305 == NIM_NIL)) goto LA2;
Result_107306 = Torope_48046(((NimStringDesc*) &TMP194838));
goto BeforeRet;
LA2: ;
Result_107306 = Torope_48046(((NimStringDesc*) &TMP194839));
LOC4 = 0;
LOC4 = Encodeint_89073(((NI64) ((*N_107305).Kind)));
App_48031(&Result_107306, LOC4);
if (!!((Finfo_107304.Fileindex == (*N_107305).Info.Fileindex))) goto LA6;
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Encodeint_89073(((NI64) ((*N_107305).Info.Col)));
LOC8[1] = Encodeint_89073(((NI64) ((*N_107305).Info.Line)));
LOC9 = 0;
LOC9 = Tofilename_43579((*N_107305).Info);
LOC10 = Fileidx_107090(W_107303, LOC9);
LOC8[2] = Encodeint_89073(((NI64) (LOC10)));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194834), LOC8, 3);
goto LA5;
LA6: ;
if (!!((Finfo_107304.Line == (*N_107305).Info.Line))) goto LA11;
memset((void*)&LOC13, 0, sizeof(LOC13));
LOC13[0] = Encodeint_89073(((NI64) ((*N_107305).Info.Col)));
LOC13[1] = Encodeint_89073(((NI64) ((*N_107305).Info.Line)));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194840), LOC13, 2);
goto LA5;
LA11: ;
if (!!((Finfo_107304.Col == (*N_107305).Info.Col))) goto LA14;
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC16[0] = Encodeint_89073(((NI64) ((*N_107305).Info.Col)));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194841), LOC16, 1);
goto LA5;
LA14: ;
LA5: ;
memset((void*)&F_107355, 0, sizeof(F_107355));
F_107355 = ((*N_107305).Flags & 30);
if (!!((F_107355 == 0))) goto LA18;
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC20[0] = Encodeint_89073(((NI64) (((NI32) (F_107355)))));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194836), LOC20, 1);
LA18: ;
if (!!(((*N_107305).Typ == NIM_NIL))) goto LA22;
memset((void*)&LOC24, 0, sizeof(LOC24));
LOC24[0] = Encodeint_89073(((NI64) ((*(*N_107305).Typ).Sup.Id)));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194833), LOC24, 1);
Pushtype_107243(W_107303, (*N_107305).Typ);
LA22: ;
switch ((*N_107305).Kind) {
case ((NU8) 5) ... ((NU8) 10):
if (!!(((*N_107305).KindU.S1.Intval == 0))) goto LA26;
memset((void*)&LOC28, 0, sizeof(LOC28));
LOC28[0] = Encodeint_89073((*N_107305).KindU.S1.Intval);
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194842), LOC28, 1);
LA26: ;
break;
case ((NU8) 11) ... ((NU8) 13):
if (!!((((NF) ((*N_107305).KindU.S2.Floatval)) == 0.00000))) goto LA30;
memset((void*)&LOC32, 0, sizeof(LOC32));
LOC33 = 0;
LOC33 = nimFloatToStr(((NF) ((*N_107305).KindU.S2.Floatval)));
LOC32[0] = Encodestr_107048(W_107303, LOC33);
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194842), LOC32, 1);
LA30: ;
break;
case ((NU8) 14) ... ((NU8) 16):
if (!!((((*N_107305).KindU.S3.Strval) && ((*N_107305).KindU.S3.Strval)->Sup.len == 0))) goto LA35;
memset((void*)&LOC37, 0, sizeof(LOC37));
LOC37[0] = Encodestr_107048(W_107303, (*N_107305).KindU.S3.Strval);
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194842), LOC37, 1);
LA35: ;
break;
case ((NU8) 2):
memset((void*)&LOC38, 0, sizeof(LOC38));
LOC38[0] = Encodestr_107048(W_107303, (*(*N_107305).KindU.S5.Ident).S);
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194842), LOC38, 1);
break;
case ((NU8) 3):
memset((void*)&LOC39, 0, sizeof(LOC39));
LOC39[0] = Encodeint_89073(((NI64) ((*(*N_107305).KindU.S4.Sym).Sup.Id)));
Appf_48074(&Result_107306, ((NimStringDesc*) &TMP194842), LOC39, 1);
Pushsym_107272(W_107303, (*N_107305).KindU.S4.Sym);
break;
default:
I_107532 = 0;
HEX3Atmp_107548 = 0;
LOC40 = Sonslen_51803(N_107305);
HEX3Atmp_107548 = (NI32)(LOC40 - 1);
Res_107550 = 0;
Res_107550 = 0;
while (1) {
if (!(Res_107550 <= HEX3Atmp_107548)) goto LA41;
I_107532 = Res_107550;
LOC42 = 0;
LOC42 = Encodenode_107301(W_107303, (*N_107305).Info, (*N_107305).KindU.S6.Sons->data[I_107532]);
App_48031(&Result_107306, LOC42);
Res_107550 += 1;
} LA41: ;
break;
}
App_48036(&Result_107306, ((NimStringDesc*) &TMP194843));
BeforeRet: ;
return Result_107306;
}
N_NIMCALL(TY48008*, Encodeloc_107553)(TY107004* W_107555, TY51539 Loc_107556) {
TY48008* Result_107557;
TY48008* LOC4;
TY48446 LOC8;
TY48446 LOC12;
TY48446 LOC16;
TY48446 LOC20;
NimStringDesc* LOC21;
TY48446 LOC25;
TY48446 LOC29;
Result_107557 = 0;
Result_107557 = NIM_NIL;
if (!!((Loc_107556.K == ((NU8) 0)))) goto LA2;
LOC4 = 0;
LOC4 = Encodeint_89073(((NI64) (Loc_107556.K)));
App_48031(&Result_107557, LOC4);
LA2: ;
if (!!((Loc_107556.S == ((NU8) 0)))) goto LA6;
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Encodeint_89073(((NI64) (Loc_107556.S)));
Appf_48074(&Result_107557, ((NimStringDesc*) &TMP194835), LOC8, 1);
LA6: ;
if (!!((Loc_107556.Flags == 0))) goto LA10;
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC12[0] = Encodeint_89073(((NI64) (((NI32) (Loc_107556.Flags)))));
Appf_48074(&Result_107557, ((NimStringDesc*) &TMP194836), LOC12, 1);
LA10: ;
if (!!((Loc_107556.T == NIM_NIL))) goto LA14;
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC16[0] = Encodeint_89073(((NI64) ((*Loc_107556.T).Sup.Id)));
Appf_48074(&Result_107557, ((NimStringDesc*) &TMP194833), LOC16, 1);
Pushtype_107243(W_107555, Loc_107556.T);
LA14: ;
if (!!((Loc_107556.R == NIM_NIL))) goto LA18;
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC21 = 0;
LOC21 = Ropetostr_48066(Loc_107556.R);
LOC20[0] = Encodestr_107048(W_107555, LOC21);
Appf_48074(&Result_107557, ((NimStringDesc*) &TMP194842), LOC20, 1);
LA18: ;
if (!!((Loc_107556.A == 0))) goto LA23;
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC25[0] = Encodeint_89073(((NI64) (Loc_107556.A)));
Appf_48074(&Result_107557, ((NimStringDesc*) &TMP194841), LOC25, 1);
LA23: ;
if (!!((Result_107557 == NIM_NIL))) goto LA27;
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC29[0] = Result_107557;
Result_107557 = Ropef_48069(((NimStringDesc*) &TMP194846), LOC29, 1);
LA27: ;
return Result_107557;
}
N_NIMCALL(TY48008*, Encodelib_107834)(TY107004* W_107836, TY51543* Lib_107837, TY43532 Info_107838) {
TY48008* Result_107839;
TY48446 LOC1;
TY48446 LOC2;
NimStringDesc* LOC3;
TY48446 LOC4;
Result_107839 = 0;
Result_107839 = NIM_NIL;
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = Encodeint_89073(((NI64) ((*Lib_107837).Kind)));
Appf_48074(&Result_107839, ((NimStringDesc*) &TMP194847), LOC1, 1);
memset((void*)&LOC2, 0, sizeof(LOC2));
LOC3 = 0;
LOC3 = Ropetostr_48066((*Lib_107837).Name);
LOC2[0] = Encodestr_107048(W_107836, LOC3);
Appf_48074(&Result_107839, ((NimStringDesc*) &TMP194847), LOC2, 1);
memset((void*)&LOC4, 0, sizeof(LOC4));
LOC4[0] = Encodenode_107301(W_107836, Info_107838, (*Lib_107837).Path);
Appf_48074(&Result_107839, ((NimStringDesc*) &TMP194847), LOC4, 1);
return Result_107839;
}
N_NIMCALL(TY48008*, Encodesym_107860)(TY107004* W_107862, TY51547* S_107863) {
TY48008* Result_107864;
TY51525* Codeast_107865;
TY48008* Col_107866;
TY48008* Line_107867;
TY48008* LOC4;
TY48446 LOC5;
TY48446 LOC6;
TY48446 LOC10;
TY157050 LOC17;
NimStringDesc* LOC18;
NI LOC19;
TY48446 LOC23;
TY48446 LOC27;
TY48446 LOC31;
NIM_BOOL LOC36;
TY48008* LOC39;
TY48446 LOC46;
TY48446 LOC50;
TY48446 LOC54;
TY48008* LOC55;
TY48008* LOC59;
Result_107864 = 0;
Codeast_107865 = 0;
Col_107866 = 0;
Line_107867 = 0;
Codeast_107865 = NIM_NIL;
if (!(S_107863 == NIM_NIL)) goto LA2;
Result_107864 = Torope_48046(((NimStringDesc*) &TMP194830));
goto BeforeRet;
LA2: ;
Result_107864 = NIM_NIL;
LOC4 = 0;
LOC4 = Encodeint_89073(((NI64) ((*S_107863).Kind)));
App_48031(&Result_107864, LOC4);
memset((void*)&LOC5, 0, sizeof(LOC5));
LOC5[0] = Encodeint_89073(((NI64) ((*S_107863).Sup.Id)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194831), LOC5, 1);
memset((void*)&LOC6, 0, sizeof(LOC6));
LOC6[0] = Encodestr_107048(W_107862, (*(*S_107863).Name).S);
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194832), LOC6, 1);
if (!!(((*S_107863).Typ == NIM_NIL))) goto LA8;
memset((void*)&LOC10, 0, sizeof(LOC10));
LOC10[0] = Encodeint_89073(((NI64) ((*(*S_107863).Typ).Sup.Id)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194833), LOC10, 1);
Pushtype_107243(W_107862, (*S_107863).Typ);
LA8: ;
if (!((*S_107863).Info.Col == ((NI16) -1))) goto LA12;
Col_107866 = NIM_NIL;
goto LA11;
LA12: ;
Col_107866 = Encodeint_89073(((NI64) ((*S_107863).Info.Col)));
LA11: ;
if (!((*S_107863).Info.Line == ((NI16) -1))) goto LA15;
Line_107867 = NIM_NIL;
goto LA14;
LA15: ;
Line_107867 = Encodeint_89073(((NI64) ((*S_107863).Info.Line)));
LA14: ;
memset((void*)&LOC17, 0, sizeof(LOC17));
LOC17[0] = Col_107866;
LOC17[1] = Line_107867;
LOC18 = 0;
LOC18 = Tofilename_43579((*S_107863).Info);
LOC19 = Fileidx_107090(W_107862, LOC18);
LOC17[2] = Encodeint_89073(((NI64) (LOC19)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194834), LOC17, 3);
if (!!(((*S_107863).Owner == NIM_NIL))) goto LA21;
memset((void*)&LOC23, 0, sizeof(LOC23));
LOC23[0] = Encodeint_89073(((NI64) ((*(*S_107863).Owner).Sup.Id)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194835), LOC23, 1);
Pushsym_107272(W_107862, (*S_107863).Owner);
LA21: ;
if (!!(((*S_107863).Flags == 0))) goto LA25;
memset((void*)&LOC27, 0, sizeof(LOC27));
LOC27[0] = Encodeint_89073(((NI64) (((NI32) ((*S_107863).Flags)))));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194836), LOC27, 1);
LA25: ;
if (!!(((*S_107863).Magic == ((NU8) 0)))) goto LA29;
memset((void*)&LOC31, 0, sizeof(LOC31));
LOC31[0] = Encodeint_89073(((NI64) ((*S_107863).Magic)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194837), LOC31, 1);
LA29: ;
if (!!(((*S_107863).Ast == NIM_NIL))) goto LA33;
LOC36 = Astneeded_101041(S_107863);
if (!!(LOC36)) goto LA37;
Codeast_107865 = (*(*S_107863).Ast).KindU.S6.Sons->data[4];
asgnRefNoCycle((void**) &(*(*S_107863).Ast).KindU.S6.Sons->data[4], NIM_NIL);
LA37: ;
LOC39 = 0;
LOC39 = Encodenode_107301(W_107862, (*S_107863).Info, (*S_107863).Ast);
App_48031(&Result_107864, LOC39);
if (!!((Codeast_107865 == NIM_NIL))) goto LA41;
asgnRefNoCycle((void**) &(*(*S_107863).Ast).KindU.S6.Sons->data[4], Codeast_107865);
LA41: ;
LA33: ;
if (!!(((*S_107863).Options == (*W_107862).Options))) goto LA44;
memset((void*)&LOC46, 0, sizeof(LOC46));
LOC46[0] = Encodeint_89073(((NI64) (((NI32) ((*S_107863).Options)))));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194842), LOC46, 1);
LA44: ;
if (!!(((*S_107863).Position == 0))) goto LA48;
memset((void*)&LOC50, 0, sizeof(LOC50));
LOC50[0] = Encodeint_89073(((NI64) ((*S_107863).Position)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194844), LOC50, 1);
LA48: ;
if (!!(((*S_107863).Offset == -1))) goto LA52;
memset((void*)&LOC54, 0, sizeof(LOC54));
LOC54[0] = Encodeint_89073(((NI64) ((*S_107863).Offset)));
Appf_48074(&Result_107864, ((NimStringDesc*) &TMP194845), LOC54, 1);
LA52: ;
LOC55 = 0;
LOC55 = Encodeloc_107553(W_107862, (*S_107863).Loc);
App_48031(&Result_107864, LOC55);
if (!!(((*S_107863).Annex == NIM_NIL))) goto LA57;
LOC59 = 0;
LOC59 = Encodelib_107834(W_107862, (*S_107863).Annex, (*S_107863).Info);
App_48031(&Result_107864, LOC59);
LA57: ;
BeforeRet: ;
return Result_107864;
}
N_NIMCALL(void, Symstack_108098)(TY107004* W_108100) {
NI I_108101;
NI L_108102;
TY51547* S_108103;
TY51547* M_108104;
NI LOC3;
NimStringDesc* LOC9;
NIM_BOOL LOC11;
TY48008* LOC15;
TY173060 LOC19;
TY173060 LOC23;
TY48008* LOC30;
NI LOC31;
I_108101 = 0;
L_108102 = 0;
S_108103 = 0;
M_108104 = 0;
I_108101 = 0;
while (1) {
if (!(I_108101 < (*W_108100).Sstack->Sup.len)) goto LA1;
S_108103 = (*W_108100).Sstack->data[I_108101];
LOC3 = Iitableget_55232((*W_108100).Index.Tab, (*S_108103).Sup.Id);
if (!(LOC3 == (-2147483647 -1))) goto LA4;
M_108104 = Getmodule_55206(S_108103);
if (!(M_108104 == NIM_NIL)) goto LA7;
LOC9 = 0;
LOC9 = rawNewString((*(*S_108103).Name).S->Sup.len + 22);
appendString(LOC9, ((NimStringDesc*) &TMP194827));
appendString(LOC9, (*(*S_108103).Name).S);
Internalerror_43571(LOC9);
LA7: ;
LOC11 = ((*M_108104).Sup.Id == (*(*W_108100).Module).Sup.Id);
if (LOC11) goto LA12;
LOC11 = (((*S_108103).Flags &(1<<((((NU8) 4))&31)))!=0);
LA12: ;
if (!LOC11) goto LA13;
L_108102 = Ropelen_48055((*W_108100).Data);
Addtoindex_108073(&(*W_108100).Index, (*S_108103).Sup.Id, L_108102);
LOC15 = 0;
LOC15 = Encodesym_107860(W_108100, S_108103);
App_48031(&(*W_108100).Data, LOC15);
App_48036(&(*W_108100).Data, ((NimStringDesc*) &TMP194828));
if (!(((*S_108103).Flags &(1<<((((NU8) 3))&31)))!=0)) goto LA17;
memset((void*)&LOC19, 0, sizeof(LOC19));
LOC19[0] = Encode_89076((*(*S_108103).Name).S);
LOC19[1] = Encodeint_89073(((NI64) ((*S_108103).Sup.Id)));
Appf_48074(&(*W_108100).Interf, ((NimStringDesc*) &TMP194829), LOC19, 2);
LA17: ;
if (!(((*S_108103).Flags &(1<<((((NU8) 19))&31)))!=0)) goto LA21;
memset((void*)&LOC23, 0, sizeof(LOC23));
LOC23[0] = Encode_89076((*(*S_108103).Name).S);
LOC23[1] = Encodeint_89073(((NI64) ((*S_108103).Sup.Id)));
Appf_48074(&(*W_108100).Compilerprocs, ((NimStringDesc*) &TMP194829), LOC23, 2);
LA21: ;
if (!((*S_108103).Kind == ((NU8) 12))) goto LA25;
if (!!(((*W_108100).Converters == NIM_NIL))) goto LA28;
App_48036(&(*W_108100).Converters, ((NimStringDesc*) &TMP194826));
LA28: ;
LOC30 = 0;
LOC30 = Encodeint_89073(((NI64) ((*S_108103).Sup.Id)));
App_48031(&(*W_108100).Converters, LOC30);
LA25: ;
goto LA10;
LA13: ;
LOC31 = Iitableget_55232((*W_108100).Imports.Tab, (*S_108103).Sup.Id);
if (!(LOC31 == (-2147483647 -1))) goto LA32;
Addtoindex_108073(&(*W_108100).Imports, (*S_108103).Sup.Id, (*M_108104).Sup.Id);
goto LA10;
LA32: ;
LA10: ;
LA4: ;
I_108101 += 1;
} LA1: ;
(*W_108100).Sstack = (TY51527*) setLengthSeq(&((*W_108100).Sstack)->Sup, sizeof(TY51547*), 0);
}
N_NIMCALL(TY48008*, Encodetype_107664)(TY107004* W_107666, TY51551* T_107667) {
TY48008* Result_107668;
TY48008* LOC7;
TY48446 LOC8;
TY43532 LOC12;
TY48008* LOC13;
TY48446 LOC17;
TY48446 LOC21;
TY48446 LOC25;
TY48446 LOC29;
TY48446 LOC33;
TY48446 LOC37;
TY48446 LOC41;
TY48008* LOC42;
NI I_107810;
NI HEX3Atmp_107829;
NI LOC43;
NI Res_107831;
TY48446 LOC48;
Result_107668 = 0;
if (!(T_107667 == NIM_NIL)) goto LA2;
Result_107668 = Torope_48046(((NimStringDesc*) &TMP194848));
goto BeforeRet;
LA2: ;
Result_107668 = NIM_NIL;
if (!((*T_107667).Kind == ((NU8) 30))) goto LA5;
Internalerror_43571(((NimStringDesc*) &TMP194849));
LA5: ;
LOC7 = 0;
LOC7 = Encodeint_89073(((NI64) ((*T_107667).Kind)));
App_48031(&Result_107668, LOC7);
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Encodeint_89073(((NI64) ((*T_107667).Sup.Id)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194831), LOC8, 1);
if (!!(((*T_107667).N == NIM_NIL))) goto LA10;
LOC12 = Unknownlineinfo_43536();
LOC13 = 0;
LOC13 = Encodenode_107301(W_107666, LOC12, (*T_107667).N);
App_48031(&Result_107668, LOC13);
LA10: ;
if (!!(((*T_107667).Flags == 0))) goto LA15;
memset((void*)&LOC17, 0, sizeof(LOC17));
LOC17[0] = Encodeint_89073(((NI64) (((NI32) ((*T_107667).Flags)))));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194836), LOC17, 1);
LA15: ;
if (!!(((*T_107667).Callconv == ((NU8) 0)))) goto LA19;
memset((void*)&LOC21, 0, sizeof(LOC21));
LOC21[0] = Encodeint_89073(((NI64) ((*T_107667).Callconv)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194841), LOC21, 1);
LA19: ;
if (!!(((*T_107667).Owner == NIM_NIL))) goto LA23;
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC25[0] = Encodeint_89073(((NI64) ((*(*T_107667).Owner).Sup.Id)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194835), LOC25, 1);
Pushsym_107272(W_107666, (*T_107667).Owner);
LA23: ;
if (!!(((*T_107667).Sym == NIM_NIL))) goto LA27;
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC29[0] = Encodeint_89073(((NI64) ((*(*T_107667).Sym).Sup.Id)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194832), LOC29, 1);
Pushsym_107272(W_107666, (*T_107667).Sym);
LA27: ;
if (!!(((*T_107667).Size == -1))) goto LA31;
memset((void*)&LOC33, 0, sizeof(LOC33));
LOC33[0] = Encodeint_89073((*T_107667).Size);
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194850), LOC33, 1);
LA31: ;
if (!!(((*T_107667).Align == 2))) goto LA35;
memset((void*)&LOC37, 0, sizeof(LOC37));
LOC37[0] = Encodeint_89073(((NI64) ((*T_107667).Align)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194851), LOC37, 1);
LA35: ;
if (!!(((*T_107667).Containerid == 0))) goto LA39;
memset((void*)&LOC41, 0, sizeof(LOC41));
LOC41[0] = Encodeint_89073(((NI64) ((*T_107667).Containerid)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194837), LOC41, 1);
LA39: ;
LOC42 = 0;
LOC42 = Encodeloc_107553(W_107666, (*T_107667).Loc);
App_48031(&Result_107668, LOC42);
I_107810 = 0;
HEX3Atmp_107829 = 0;
LOC43 = Sonslen_51806(T_107667);
HEX3Atmp_107829 = (NI32)(LOC43 - 1);
Res_107831 = 0;
Res_107831 = 0;
while (1) {
if (!(Res_107831 <= HEX3Atmp_107829)) goto LA44;
I_107810 = Res_107831;
if (!((*T_107667).Sons->data[I_107810] == NIM_NIL)) goto LA46;
App_48036(&Result_107668, ((NimStringDesc*) &TMP194852));
goto LA45;
LA46: ;
memset((void*)&LOC48, 0, sizeof(LOC48));
LOC48[0] = Encodeint_89073(((NI64) ((*(*T_107667).Sons->data[I_107810]).Sup.Id)));
Appf_48074(&Result_107668, ((NimStringDesc*) &TMP194833), LOC48, 1);
Pushtype_107243(W_107666, (*T_107667).Sons->data[I_107810]);
LA45: ;
Res_107831 += 1;
} LA44: ;
BeforeRet: ;
return Result_107668;
}
N_NIMCALL(void, Typestack_108252)(TY107004* W_108254) {
NI I_108255;
NI LOC3;
NI L_108270;
TY48008* LOC6;
I_108255 = 0;
I_108255 = 0;
while (1) {
if (!(I_108255 < (*W_108254).Tstack->Sup.len)) goto LA1;
LOC3 = Iitableget_55232((*W_108254).Index.Tab, (*(*W_108254).Tstack->data[I_108255]).Sup.Id);
if (!(LOC3 == (-2147483647 -1))) goto LA4;
L_108270 = 0;
L_108270 = Ropelen_48055((*W_108254).Data);
Addtoindex_108073(&(*W_108254).Index, (*(*W_108254).Tstack->data[I_108255]).Sup.Id, L_108270);
LOC6 = 0;
LOC6 = Encodetype_107664(W_108254, (*W_108254).Tstack->data[I_108255]);
App_48031(&(*W_108254).Data, LOC6);
App_48036(&(*W_108254).Data, ((NimStringDesc*) &TMP194828));
LA4: ;
I_108255 += 1;
} LA1: ;
(*W_108254).Tstack = (TY51549*) setLengthSeq(&((*W_108254).Tstack)->Sup, sizeof(TY51551*), 0);
}
N_NIMCALL(void, Processstacks_107053)(TY107004* W_107055) {
NIM_BOOL LOC2;
while (1) {
LOC2 = (0 < (*W_107055).Tstack->Sup.len);
if (LOC2) goto LA3;
LOC2 = (0 < (*W_107055).Sstack->Sup.len);
LA3: ;
if (!LOC2) goto LA1;
Symstack_108098(W_107055);
Typestack_108252(W_107055);
} LA1: ;
}
N_NIMCALL(void, Rawaddinterfacesym_108327)(TY107004* W_108329, TY51547* S_108330) {
Pushsym_107272(W_108329, S_108330);
Processstacks_107053(W_108329);
}
N_NIMCALL(TY101002*, Myopen_108968)(TY51547* Module_108970, NimStringDesc* Filename_108971) {
TY101002* Result_108972;
TY107004* W_108975;
NI32 LOC4;
Result_108972 = 0;
if (!((*Module_108970).Sup.Id < 0)) goto LA2;
Internalerror_43571(((NimStringDesc*) &TMP194824));
LA2: ;
W_108975 = 0;
LOC4 = Getcrc_89064(Filename_108971);
W_108975 = Newrodwriter_107024(Filename_108971, LOC4, Module_108970);
Rawaddinterfacesym_108327(W_108975, Module_108970);
Result_108972 = &W_108975->Sup;
return Result_108972;
}
N_NIMCALL(void, Writerod_107045)(TY107004* W_107047) {
TY48008* Content_108381;
TY48008* LOC1;
TY48008* LOC2;
TY48008* LOC3;
TY48008* LOC4;
TY48008* LOC5;
TY48008* LOC6;
TY48008* LOC7;
TY48008* LOC8;
TY48008* LOC9;
NI I_108412;
NI HEX3Atmp_108532;
NI Res_108534;
TY48008* LOC11;
TY48008* LOC12;
TY48008* LOC13;
TY48008* LOC14;
TY48008* LOC15;
TY48008* LOC16;
TY48008* LOC17;
TY48008* LOC18;
TY48008* LOC19;
TY48008* LOC20;
TY48008* LOC21;
TY48008* LOC22;
TY48008* LOC23;
TY48008* LOC24;
TY48008* LOC25;
TY48008* LOC26;
TY48008* LOC27;
TY48008* LOC28;
TY48008* LOC29;
NimStringDesc* LOC30;
NimStringDesc* LOC31;
Processstacks_107053(W_107047);
Content_108381 = 0;
Content_108381 = Torope_48046(((NimStringDesc*) &TMP194853));
LOC1 = 0;
LOC1 = Torope_48046(((NimStringDesc*) &TMP194854));
App_48031(&Content_108381, LOC1);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC2 = 0;
LOC2 = Torope_48046(((NimStringDesc*) &TMP194855));
App_48031(&Content_108381, LOC2);
LOC3 = 0;
LOC3 = Encodeint_89073(((NI64) ((*(*W_107047).Module).Sup.Id)));
App_48031(&Content_108381, LOC3);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC4 = 0;
LOC4 = Torope_48046(((NimStringDesc*) &TMP194856));
App_48031(&Content_108381, LOC4);
LOC5 = 0;
LOC5 = Encodeint_89073(((NI64) ((*W_107047).Crc)));
App_48031(&Content_108381, LOC5);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC6 = 0;
LOC6 = Torope_48046(((NimStringDesc*) &TMP194857));
App_48031(&Content_108381, LOC6);
LOC7 = 0;
LOC7 = Encodeint_89073(((NI64) (((NI32) ((*W_107047).Options)))));
App_48031(&Content_108381, LOC7);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC8 = 0;
LOC8 = Torope_48046(((NimStringDesc*) &TMP194858));
App_48031(&Content_108381, LOC8);
App_48031(&Content_108381, (*W_107047).Defines);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC9 = 0;
LOC9 = Torope_48046(((NimStringDesc*) &TMP194859));
App_48031(&Content_108381, LOC9);
I_108412 = 0;
HEX3Atmp_108532 = 0;
HEX3Atmp_108532 = ((*W_107047).Files->Sup.len-1);
Res_108534 = 0;
Res_108534 = 0;
while (1) {
if (!(Res_108534 <= HEX3Atmp_108532)) goto LA10;
I_108412 = Res_108534;
LOC11 = 0;
LOC11 = Encode_89076((*W_107047).Files->data[I_108412]);
App_48031(&Content_108381, LOC11);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
Res_108534 += 1;
} LA10: ;
LOC12 = 0;
LOC12 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC12);
LOC13 = 0;
LOC13 = Torope_48046(((NimStringDesc*) &TMP194861));
App_48031(&Content_108381, LOC13);
App_48031(&Content_108381, (*W_107047).Incldeps);
LOC14 = 0;
LOC14 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC14);
LOC15 = 0;
LOC15 = Torope_48046(((NimStringDesc*) &TMP194862));
App_48031(&Content_108381, LOC15);
App_48031(&Content_108381, (*W_107047).Moddeps);
App_48036(&Content_108381, ((NimStringDesc*) &TMP194828));
LOC16 = 0;
LOC16 = Torope_48046(((NimStringDesc*) &TMP194863));
App_48031(&Content_108381, LOC16);
App_48031(&Content_108381, (*W_107047).Interf);
LOC17 = 0;
LOC17 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC17);
LOC18 = 0;
LOC18 = Torope_48046(((NimStringDesc*) &TMP194864));
App_48031(&Content_108381, LOC18);
App_48031(&Content_108381, (*W_107047).Compilerprocs);
LOC19 = 0;
LOC19 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC19);
LOC20 = 0;
LOC20 = Torope_48046(((NimStringDesc*) &TMP194865));
App_48031(&Content_108381, LOC20);
App_48031(&Content_108381, (*W_107047).Index.R);
LOC21 = 0;
LOC21 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC21);
LOC22 = 0;
LOC22 = Torope_48046(((NimStringDesc*) &TMP194866));
App_48031(&Content_108381, LOC22);
App_48031(&Content_108381, (*W_107047).Imports.R);
LOC23 = 0;
LOC23 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC23);
LOC24 = 0;
LOC24 = Torope_48046(((NimStringDesc*) &TMP194867));
App_48031(&Content_108381, LOC24);
App_48031(&Content_108381, (*W_107047).Converters);
LOC25 = 0;
LOC25 = Torope_48046(((NimStringDesc*) &TMP194828));
App_48031(&Content_108381, LOC25);
LOC26 = 0;
LOC26 = Torope_48046(((NimStringDesc*) &TMP194868));
App_48031(&Content_108381, LOC26);
App_48031(&Content_108381, (*W_107047).Init);
LOC27 = 0;
LOC27 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC27);
LOC28 = 0;
LOC28 = Torope_48046(((NimStringDesc*) &TMP194869));
App_48031(&Content_108381, LOC28);
App_48031(&Content_108381, (*W_107047).Data);
LOC29 = 0;
LOC29 = Torope_48046(((NimStringDesc*) &TMP194860));
App_48031(&Content_108381, LOC29);
LOC30 = 0;
LOC30 = nosChangeFileExt((*W_107047).Filename, ((NimStringDesc*) &TMP194870));
LOC31 = 0;
LOC31 = Completegeneratedfilepath_42099(LOC30, NIM_TRUE);
Writerope_48058(Content_108381, LOC31);
}
N_NIMCALL(TY51525*, Myclose_108976)(TY101002* C_108978, TY51525* N_108979) {
TY51525* Result_108980;
TY107004* W_108981;
Result_108980 = 0;
W_108981 = 0;
W_108981 = ((TY107004*) (C_108978));
Writerod_107045(W_108981);
Result_108980 = N_108979;
return Result_108980;
}
N_NIMCALL(void, Addinterfacesym_107037)(TY107004* W_107039, TY51547* S_107040) {
if (!(W_107039 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
if (!!(((134219776 & (*S_107040).Flags) == 0))) goto LA5;
Rawaddinterfacesym_108327(W_107039, S_107040);
LA5: ;
BeforeRet: ;
}
N_NIMCALL(void, Addmoddep_107029)(TY107004* W_107031, NimStringDesc* Dep_107032) {
NI LOC4;
TY48008* LOC5;
if (!!(((*W_107031).Moddeps == NIM_NIL))) goto LA2;
App_48036(&(*W_107031).Moddeps, ((NimStringDesc*) &TMP194826));
LA2: ;
LOC4 = Fileidx_107090(W_107031, Dep_107032);
LOC5 = 0;
LOC5 = Encodeint_89073(((NI64) (LOC4)));
App_48031(&(*W_107031).Moddeps, LOC5);
}
N_NIMCALL(void, Addstmt_107041)(TY107004* W_107043, TY51525* N_107044) {
NI LOC1;
TY48008* LOC2;
TY43532 LOC3;
TY48008* LOC4;
LOC1 = Ropelen_48055((*W_107043).Data);
LOC2 = 0;
LOC2 = Encodeint_89073(((NI64) (LOC1)));
App_48031(&(*W_107043).Init, LOC2);
App_48036(&(*W_107043).Init, ((NimStringDesc*) &TMP194828));
LOC3 = Unknownlineinfo_43536();
LOC4 = 0;
LOC4 = Encodenode_107301(W_107043, LOC3, N_107044);
App_48031(&(*W_107043).Data, LOC4);
App_48036(&(*W_107043).Data, ((NimStringDesc*) &TMP194828));
Processstacks_107053(W_107043);
}
N_NIMCALL(void, Addincldep_107033)(TY107004* W_107035, NimStringDesc* Dep_107036) {
NI LOC1;
TY48008* LOC2;
NI32 LOC3;
TY48008* LOC4;
LOC1 = Fileidx_107090(W_107035, Dep_107036);
LOC2 = 0;
LOC2 = Encodeint_89073(((NI64) (LOC1)));
App_48031(&(*W_107035).Incldeps, LOC2);
App_48036(&(*W_107035).Incldeps, ((NimStringDesc*) &TMP194826));
LOC3 = Crcfromfile_46029(Dep_107036);
LOC4 = 0;
LOC4 = Encodeint_89073(((NI64) (LOC3)));
App_48031(&(*W_107035).Incldeps, LOC4);
App_48036(&(*W_107035).Incldeps, ((NimStringDesc*) &TMP194828));
}
N_NIMCALL(TY51525*, Process_108537)(TY101002* C_108539, TY51525* N_108540) {
TY51525* Result_108541;
TY107004* W_108553;
NI I_108561;
NI HEX3Atmp_108933;
NI LOC4;
NI Res_108935;
TY51525* LOC6;
TY51547* S_108598;
TY51547* S_108623;
NIM_BOOL LOC11;
NIM_BOOL LOC12;
NI I_108685;
NI HEX3Atmp_108939;
NI LOC17;
NI Res_108941;
TY51525* A_108698;
NI I_108748;
NI HEX3Atmp_108945;
NI LOC26;
NI Res_108947;
TY51525* A_108761;
NI I_108811;
NI HEX3Atmp_108951;
NI LOC35;
NI Res_108953;
TY51525* A_108824;
TY51547* S_108879;
NI I_108887;
NI HEX3Atmp_108957;
NI LOC44;
NI Res_108959;
NimStringDesc* LOC46;
NimStringDesc* LOC47;
NI I_108919;
NI HEX3Atmp_108963;
NI LOC48;
NI Res_108965;
NimStringDesc* LOC50;
Result_108541 = 0;
Result_108541 = N_108540;
if (!(C_108539 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
W_108553 = 0;
W_108553 = ((TY107004*) (C_108539));
switch ((*N_108540).Kind) {
case ((NU8) 101):
I_108561 = 0;
HEX3Atmp_108933 = 0;
LOC4 = Sonslen_51803(N_108540);
HEX3Atmp_108933 = (NI32)(LOC4 - 1);
Res_108935 = 0;
Res_108935 = 0;
while (1) {
if (!(Res_108935 <= HEX3Atmp_108933)) goto LA5;
I_108561 = Res_108935;
LOC6 = 0;
LOC6 = Process_108537(C_108539, (*N_108540).KindU.S6.Sons->data[I_108561]);
Res_108935 += 1;
} LA5: ;
break;
case ((NU8) 73):
case ((NU8) 72):
S_108598 = 0;
S_108598 = (*(*N_108540).KindU.S6.Sons->data[0]).KindU.S4.Sym;
Addinterfacesym_107037(W_108553, S_108598);
break;
case ((NU8) 69):
case ((NU8) 70):
case ((NU8) 74):
case ((NU8) 71):
S_108623 = 0;
S_108623 = (*(*N_108540).KindU.S6.Sons->data[0]).KindU.S4.Sym;
if (!(S_108623 == NIM_NIL)) goto LA8;
Internalerror_43567((*N_108540).Info, ((NimStringDesc*) &TMP194871));
LA8: ;
LOC12 = !(((*N_108540).KindU.S6.Sons->data[4] == NIM_NIL));
if (LOC12) goto LA13;
LOC12 = !(((*S_108623).Magic == ((NU8) 0)));
LA13: ;
LOC11 = LOC12;
if (LOC11) goto LA14;
LOC11 = !((((*S_108623).Flags &(1<<((((NU8) 6))&31)))!=0));
LA14: ;
if (!LOC11) goto LA15;
Addinterfacesym_107037(W_108553, S_108623);
LA15: ;
break;
case ((NU8) 87):
I_108685 = 0;
HEX3Atmp_108939 = 0;
LOC17 = Sonslen_51803(N_108540);
HEX3Atmp_108939 = (NI32)(LOC17 - 1);
Res_108941 = 0;
Res_108941 = 0;
while (1) {
if (!(Res_108941 <= HEX3Atmp_108939)) goto LA18;
I_108685 = Res_108941;
A_108698 = 0;
A_108698 = (*N_108540).KindU.S6.Sons->data[I_108685];
if (!((*A_108698).Kind == ((NU8) 105))) goto LA21;
goto LA19;
LA21: ;
if (!!(((*A_108698).Kind == ((NU8) 25)))) goto LA24;
Internalerror_43567((*A_108698).Info, ((NimStringDesc*) &TMP194871));
LA24: ;
Addinterfacesym_107037(W_108553, (*(*A_108698).KindU.S6.Sons->data[0]).KindU.S4.Sym);
LA19: ;
Res_108941 += 1;
} LA18: ;
break;
case ((NU8) 88):
I_108748 = 0;
HEX3Atmp_108945 = 0;
LOC26 = Sonslen_51803(N_108540);
HEX3Atmp_108945 = (NI32)(LOC26 - 1);
Res_108947 = 0;
Res_108947 = 0;
while (1) {
if (!(Res_108947 <= HEX3Atmp_108945)) goto LA27;
I_108748 = Res_108947;
A_108761 = 0;
A_108761 = (*N_108540).KindU.S6.Sons->data[I_108748];
if (!((*A_108761).Kind == ((NU8) 105))) goto LA30;
goto LA28;
LA30: ;
if (!!(((*A_108761).Kind == ((NU8) 89)))) goto LA33;
Internalerror_43567((*A_108761).Info, ((NimStringDesc*) &TMP194871));
LA33: ;
Addinterfacesym_107037(W_108553, (*(*A_108761).KindU.S6.Sons->data[0]).KindU.S4.Sym);
LA28: ;
Res_108947 += 1;
} LA27: ;
break;
case ((NU8) 90):
I_108811 = 0;
HEX3Atmp_108951 = 0;
LOC35 = Sonslen_51803(N_108540);
HEX3Atmp_108951 = (NI32)(LOC35 - 1);
Res_108953 = 0;
Res_108953 = 0;
while (1) {
if (!(Res_108953 <= HEX3Atmp_108951)) goto LA36;
I_108811 = Res_108953;
A_108824 = 0;
A_108824 = (*N_108540).KindU.S6.Sons->data[I_108811];
if (!((*A_108824).Kind == ((NU8) 105))) goto LA39;
goto LA37;
LA39: ;
if (!!(((*(*A_108824).KindU.S6.Sons->data[0]).Kind == ((NU8) 3)))) goto LA42;
Internalerror_43567((*A_108824).Info, ((NimStringDesc*) &TMP194871));
LA42: ;
S_108879 = 0;
S_108879 = (*(*A_108824).KindU.S6.Sons->data[0]).KindU.S4.Sym;
Addinterfacesym_107037(W_108553, S_108879);
LA37: ;
Res_108953 += 1;
} LA36: ;
break;
case ((NU8) 102):
I_108887 = 0;
HEX3Atmp_108957 = 0;
LOC44 = Sonslen_51803(N_108540);
HEX3Atmp_108957 = (NI32)(LOC44 - 1);
Res_108959 = 0;
Res_108959 = 0;
while (1) {
if (!(Res_108959 <= HEX3Atmp_108957)) goto LA45;
I_108887 = Res_108959;
LOC46 = 0;
LOC46 = Getmodulefile_106013((*N_108540).KindU.S6.Sons->data[I_108887]);
Addmoddep_107029(W_108553, LOC46);
Res_108959 += 1;
} LA45: ;
Addstmt_107041(W_108553, N_108540);
break;
case ((NU8) 103):
LOC47 = 0;
LOC47 = Getmodulefile_106013((*N_108540).KindU.S6.Sons->data[0]);
Addmoddep_107029(W_108553, LOC47);
Addstmt_107041(W_108553, N_108540);
break;
case ((NU8) 104):
I_108919 = 0;
HEX3Atmp_108963 = 0;
LOC48 = Sonslen_51803(N_108540);
HEX3Atmp_108963 = (NI32)(LOC48 - 1);
Res_108965 = 0;
Res_108965 = 0;
while (1) {
if (!(Res_108965 <= HEX3Atmp_108963)) goto LA49;
I_108919 = Res_108965;
LOC50 = 0;
LOC50 = Getmodulefile_106013((*N_108540).KindU.S6.Sons->data[I_108919]);
Addincldep_107033(W_108553, LOC50);
Res_108965 += 1;
} LA49: ;
break;
case ((NU8) 81):
Addstmt_107041(W_108553, N_108540);
break;
default:
break;
}
BeforeRet: ;
return Result_108541;
}
N_NIMCALL(TY101006, Rodwritepass_107001)(void) {
TY101006 Result_108984;
memset((void*)&Result_108984, 0, sizeof(Result_108984));
Initpass_101031(&Result_108984);
if (!((Gglobaloptions_42077 &(1<<((((NU8) 15))&31)))!=0)) goto LA2;
Result_108984.Open = Myopen_108968;
Result_108984.Close = Myclose_108976;
Result_108984.Process = Process_108537;
LA2: ;
return Result_108984;
}
N_NOINLINE(void, rodwriteInit)(void) {
Intsetinit_51924(&Debugwritten_108097);
}

