/* Generated by Nimrod Compiler v0.8.11 */
/*   (c) 2011 Andreas Rumpf */

typedef long int NI;
typedef unsigned long int NU;
#include "nimbase.h"

typedef struct TY108012 TY108012;
typedef struct TY56552 TY56552;
typedef struct TY127007 TY127007;
typedef struct TY56548 TY56548;
typedef struct TY56526 TY56526;
typedef struct TY56564 TY56564;
typedef struct TY56562 TY56562;
typedef struct TY56560 TY56560;
typedef struct TY55005 TY55005;
typedef struct TNimObject TNimObject;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct NimStringDesc NimStringDesc;
typedef struct TY48538 TY48538;
typedef struct TY55011 TY55011;
typedef struct TY56520 TY56520;
typedef struct TY56550 TY56550;
typedef struct TY56540 TY56540;
typedef struct TY53008 TY53008;
typedef struct TY56530 TY56530;
typedef struct TY56528 TY56528;
typedef struct TY56544 TY56544;
typedef struct TY10802 TY10802;
typedef struct TY10814 TY10814;
typedef struct TY11196 TY11196;
typedef struct TY10818 TY10818;
typedef struct TY10810 TY10810;
typedef struct TY11194 TY11194;
typedef struct TY106002 TY106002;
typedef struct TY108006 TY108006;
typedef struct TY61099 TY61099;
typedef struct TY61101 TY61101;
typedef struct TY56895 TY56895;
typedef struct TY56891 TY56891;
typedef struct TY56893 TY56893;
typedef struct TY44019 TY44019;
typedef struct TY44013 TY44013;
typedef struct TY109004 TY109004;
typedef struct TY61084 TY61084;
struct TY56560 {
TY55005* Key;
TNimObject* Val;
};
struct TGenericSeq {
NI len;
NI space;
};
struct TY56564 {
NI Counter;
TY56562* Data;
};
struct TY127007 {
NI Exactmatches;
NI Subtypematches;
NI Intconvmatches;
NI Convmatches;
NI Genericmatches;
NU8 State;
TY56552* Callee;
TY56548* Calleesym;
TY56526* Call;
TY56564 Bindings;
NIM_BOOL Basetypematch;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef NIM_CHAR TY245[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY245 data;
};
struct TY48538 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY56526 {
TY56552* Typ;
NimStringDesc* Comment;
TY48538 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY56548* Sym;
} S4;
struct {TY55011* Ident;
} S5;
struct {TY56520* Sons;
} S6;
} KindU;
};
struct TNimObject {
TNimType* m_type;
};
struct TY55005 {
  TNimObject Sup;
NI Id;
};
struct TY56540 {
NU8 K;
NU8 S;
NU8 Flags;
TY56552* T;
TY53008* R;
NI A;
};
struct TY56552 {
  TY55005 Sup;
NU8 Kind;
TY56550* Sons;
TY56526* N;
NU8 Flags;
NU8 Callconv;
TY56548* Owner;
TY56548* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY56540 Loc;
};
struct TY56530 {
TNimType* m_type;
NI Counter;
TY56528* Data;
};
struct TY56548 {
  TY55005 Sup;
NU8 Kind;
NU8 Magic;
TY56552* Typ;
TY55011* Name;
TY48538 Info;
TY56548* Owner;
NU32 Flags;
TY56530 Tab;
TY56526* Ast;
NU32 Options;
NI Position;
NI Offset;
TY56540 Loc;
TY56544* Annex;
};
struct TY55011 {
  TY55005 Sup;
NimStringDesc* S;
TY55011* Next;
NI H;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11194 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11196 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
TY11194 Stat;
};
struct TY106002 {
  TNimObject Sup;
};
struct TY61099 {
NI Tos;
TY61101* Stack;
};
struct TY56895 {
NI Counter;
NI Max;
TY56891* Head;
TY56893* Data;
};
struct TY44019 {
TNimType* m_type;
TY44013* Head;
TY44013* Tail;
NI Counter;
};
typedef N_NIMCALL_PTR(TY56526*, TY108032) (TY108012* C_108033, TY56526* N_108034);
typedef N_NIMCALL_PTR(TY56526*, TY108037) (TY108012* C_108038, TY56526* N_108039);
struct TY108012 {
  TY106002 Sup;
TY56548* Module;
TY108006* P;
NI Instcounter;
TY56526* Generics;
NI Lastgenericidx;
TY61099 Tab;
TY56895 Ambiguoussymbols;
TY56528* Converters;
TY44019 Optionstack;
TY44019 Libs;
NIM_BOOL Fromcache;
TY108032 Semconstexpr;
TY108037 Semexpr;
TY56895 Includedfiles;
NimStringDesc* Filename;
TY56530 Userpragmas;
};
struct TY61084 {
NI H;
TY55011* Name;
};
struct TY109004 {
NI Stackptr;
TY61084 It;
TY56548* M;
NU8 Mode;
};
struct TY53008 {
  TNimObject Sup;
TY53008* Left;
TY53008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY44013 {
  TNimObject Sup;
TY44013* Prev;
TY44013* Next;
};
struct TY56544 {
  TY44013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY53008* Name;
TY56526* Path;
};
typedef NI TY8814[16];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY108006 {
TY56548* Owner;
TY56548* Resultsym;
NI Nestedloopcounter;
NI Nestedblockcounter;
};
struct TY56891 {
TY56891* Next;
NI Key;
TY8814 Bits;
};
struct TY56562 {
  TGenericSeq Sup;
  TY56560 data[SEQ_DECL_SIZE];
};
struct TY56520 {
  TGenericSeq Sup;
  TY56526* data[SEQ_DECL_SIZE];
};
struct TY56550 {
  TGenericSeq Sup;
  TY56552* data[SEQ_DECL_SIZE];
};
struct TY56528 {
  TGenericSeq Sup;
  TY56548* data[SEQ_DECL_SIZE];
};
struct TY61101 {
  TGenericSeq Sup;
  TY56530 data[SEQ_DECL_SIZE];
};
struct TY56893 {
  TGenericSeq Sup;
  TY56891* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, genericReset)(void* Dest_19728, TNimType* Mt_19729);
N_NIMCALL(void, Initcandidate_127035)(TY127007* C_127038, TY56552* Callee_127039);
static N_INLINE(void, Initcandidateaux_127030)(TY127007* C_127033, TY56552* Callee_127034);
N_NIMCALL(void, unsureAsgnRef)(void** Dest_13226, void* Src_13227);
N_NIMCALL(void, Initidtable_56755)(TY56564* X_56758);
N_NIMCALL(TY56526*, Paramtypesmatch_128712)(TY108012* C_128714, TY127007* M_128716, TY56552* F_128717, TY56552* A_128718, TY56526* Arg_128719);
N_NIMCALL(TY56526*, Paramtypesmatchaux_128566)(TY108012* C_128568, TY127007* M_128570, TY56552* F_128571, TY56552* A_128572, TY56526* Arg_128573);
N_NIMCALL(NU8, Typerel_127303)(TY56564* Mapping_127306, TY56552* F_127307, TY56552* A_127308);
N_NIMCALL(TY56552*, Skiptypes_98087)(TY56552* T_98089, NU64 Kinds_98090);
static N_INLINE(TY56552*, Lastson_56813)(TY56552* N_56815);
static N_INLINE(NI, Sonslen_56807)(TY56552* N_56809);
N_NIMCALL(TY56552*, Base_98021)(TY56552* T_98023);
N_NIMCALL(NU8, Handlerange_127334)(TY56552* F_127336, TY56552* A_127337, NU8 Min_127338, NU8 Max_127339);
N_NIMCALL(NU8, Handlefloatrange_127400)(TY56552* F_127402, TY56552* A_127403);
N_NIMCALL(NU8, Minrel_127473)(NU8 A_127475, NU8 B_127476);
N_NIMCALL(NI64, Lengthord_98007)(TY56552* T_98009);
N_NIMCALL(NIM_BOOL, Isordinaltype_98069)(TY56552* T_98071);
N_NIMCALL(void, Internalerror_49212)(NimStringDesc* Errmsg_49214);
N_NIMCALL(NU8, Tuplerel_127487)(TY56564* Mapping_127490, TY56552* F_127491, TY56552* A_127492);
static N_INLINE(NI, Sonslen_56804)(TY56526* N_56806);
N_NIMCALL(void, Internalerror_49208)(TY48538 Info_49210, NimStringDesc* Errmsg_49211);
N_NIMCALL(NIM_BOOL, Isobjectsubtype_127443)(TY56552* A_127445, TY56552* F_127446);
N_NIMCALL(NI64, Firstord_98001)(TY56552* T_98003);
N_NIMCALL(TNimObject*, Idtableget_61158)(TY56564 T_61160, TY55005* Key_61161);
N_NIMCALL(void, Idtableput_61166)(TY56564* T_61169, TY55005* Key_61170, TNimObject* Val_61171);
N_NIMCALL(TY56552*, Concretetype_127309)(TY56564 Mapping_127311, TY56552* T_127312);
N_NIMCALL(TY56552*, Newtype_56707)(NU8 Kind_56709, TY56548* Owner_56710);
N_NIMCALL(void, Addson_56828)(TY56552* Father_56830, TY56552* Son_56831);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18689);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19832, TNimType* Typ_19833);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18816, NIM_CHAR C_18817);
N_NIMCALL(TY56526*, Implicitconv_128481)(NU8 Kind_128483, TY56552* F_128484, TY56526* Arg_128485, TY127007* M_128486, TY108012* C_128487);
N_NIMCALL(TY56526*, Newnodei_56738)(NU8 Kind_56740, TY48538 Info_56741);
N_NIMCALL(NIM_BOOL, Containsgenerictype_126066)(TY56552* T_126068);
N_NIMCALL(TY56552*, Getinstantiatedtype_128452)(TY108012* C_128454, TY56526* Arg_128455, TY127007* M_128456, TY56552* F_128457);
N_NIMCALL(TY56552*, Generatetypeinstance_126447)(TY108012* P_126449, TY56564 Pt_126450, TY56526* Arg_126451, TY56552* T_126452);
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215);
static N_INLINE(void, Incref_13202)(TY10802* C_13204);
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225);
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618);
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254);
N_NOINLINE(void, Incl_11080)(TY10814* S_11083, TY10802* Cell_11084);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(void, Decref_13001)(TY10802* C_13003);
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(void, Addson_56824)(TY56526* Father_56826, TY56526* Son_56827);
N_NIMCALL(TY56526*, Copytree_56852)(TY56526* Src_56854);
N_NIMCALL(TY56526*, Userconvmatch_128500)(TY108012* C_128502, TY127007* M_128504, TY56552* F_128505, TY56552* A_128506, TY56526* Arg_128507);
N_NIMCALL(TY56526*, Newsymnode_56735)(TY56548* Sym_56737);
N_NIMCALL(TY56526*, Newnodeit_56742)(NU8 Kind_56744, TY48538 Info_56745, TY56552* Typ_56746);
N_NIMCALL(void, Copycandidate_127103)(TY127007* A_127106, TY127007* B_127107);
N_NIMCALL(void, Copyidtable_56799)(TY56564* Dest_56802, TY56564 Src_56803);
N_NIMCALL(void, genericAssign)(void* Dest_19652, void* Src_19653, TNimType* Mt_19654);
N_NIMCALL(NI, Cmpcandidates_127109)(TY127007* A_127111, TY127007* B_127112);
N_NIMCALL(void, Markused_108403)(TY56526* N_108405, TY56548* S_108406);
static N_INLINE(TY56526*, HEX5BHEX5D_58137)(TY56526* N_58139, NI I_58140);
N_NIMCALL(void, Intsetinit_56919)(TY56895* S_56922);
N_NIMCALL(void, Matchesaux_128977)(TY108012* C_128979, TY56526* N_128980, TY127007* M_128982, TY56895* Marker_128984);
N_NIMCALL(void, Localerror_49193)(TY48538 Info_49195, NU8 Msg_49196, NimStringDesc* Arg_49197);
N_NIMCALL(TY56548*, Getsymfromlist_61189)(TY56526* List_61191, TY55011* Ident_61192, NI Start_61193);
N_NIMCALL(NIM_BOOL, Intsetcontainsorincl_56923)(TY56895* S_56926, NI Key_56927);
N_NIMCALL(void, Setson_128934)(TY56526* Father_128936, NI At_128937, TY56526* Son_128938);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
N_NIMCALL(TY56552*, Getsystype_103008)(NU8 Kind_103010);
N_NIMCALL(NimStringDesc*, Msgkindtostring_48832)(NU8 Kind_48834);
N_NIMCALL(NimStringDesc*, Rendertree_86042)(TY56526* N_86044, NU8 Renderflags_86047);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18789, NI Addlen_18790);
N_NIMCALL(NimStringDesc*, Typetostring_98014)(TY56552* Typ_98016, NU8 Prefer_98017);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1803, NIM_CHAR C_1804);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18712);
N_NIMCALL(TY56548*, Initoverloaditer_109745)(TY109004* O_109748, TY108012* C_109749, TY56526* N_109750);
N_NIMCALL(NimStringDesc*, Getprocheader_98018)(TY56548* Sym_98020);
N_NIMCALL(TY56548*, Nextoverloaditer_110074)(TY109004* O_110077, TY108012* C_110078, TY56526* N_110079);
STRING_LITERAL(TMP198031, "forward type in typeRel()", 25);
STRING_LITERAL(TMP198032, "tupleRel", 8);
STRING_LITERAL(TMP198033, "typeRel: tyGenericInvokation -> tyGenericInvokation", 51);
STRING_LITERAL(TMP198034, "wrong instantiated type!", 24);
STRING_LITERAL(TMP198035, "has constraints: ", 17);
STRING_LITERAL(TMP198036, "typeRel(", 8);
STRING_LITERAL(TMP198047, "getInstantiatedType", 19);
STRING_LITERAL(TMP198048, "implicitConv", 12);
STRING_LITERAL(TMP198049, "x.state is not csMatch", 22);
STRING_LITERAL(TMP198050, "", 0);
STRING_LITERAL(TMP198069, "matches", 7);
STRING_LITERAL(TMP198248, ": ", 2);
STRING_LITERAL(TMP198249, ", ", 2);
STRING_LITERAL(TMP198250, "\012", 1);
extern TNimType* NTI127007; /* TCandidate */
extern TNimType* NTI56162; /* TTypeKind */
extern TY11196 Gch_11214;
extern TY56526* Emptynode_56858;
extern TNimType* NTI56895; /* TIntSet */
extern TNimType* NTI56564; /* TIdTable */
extern TNimType* NTI109004; /* TOverloadIter */
static N_INLINE(void, Initcandidateaux_127030)(TY127007* C_127033, TY56552* Callee_127034) {
(*C_127033).Exactmatches = 0;
(*C_127033).Subtypematches = 0;
(*C_127033).Convmatches = 0;
(*C_127033).Intconvmatches = 0;
(*C_127033).Genericmatches = 0;
(*C_127033).State = ((NU8) 0);
unsureAsgnRef((void**) &(*C_127033).Callee, Callee_127034);
unsureAsgnRef((void**) &(*C_127033).Call, NIM_NIL);
(*C_127033).Basetypematch = NIM_FALSE;
}
N_NIMCALL(void, Initcandidate_127035)(TY127007* C_127038, TY56552* Callee_127039) {
Initcandidateaux_127030(C_127038, Callee_127039);
unsureAsgnRef((void**) &(*C_127038).Calleesym, NIM_NIL);
Initidtable_56755(&(*C_127038).Bindings);
}
static N_INLINE(NI, Sonslen_56807)(TY56552* N_56809) {
NI Result_57761;
Result_57761 = 0;
if (!(*N_56809).Sons == 0) goto LA2;
Result_57761 = 0;
goto LA1;
LA2: ;
Result_57761 = (*N_56809).Sons->Sup.len;
LA1: ;
return Result_57761;
}
static N_INLINE(TY56552*, Lastson_56813)(TY56552* N_56815) {
TY56552* Result_58932;
NI LOC1;
Result_58932 = 0;
Result_58932 = NIM_NIL;
LOC1 = Sonslen_56807(N_56815);
Result_58932 = (*N_56815).Sons->data[(NI32)(LOC1 - 1)];
return Result_58932;
}
N_NIMCALL(NU8, Handlerange_127334)(TY56552* F_127336, TY56552* A_127337, NU8 Min_127338, NU8 Max_127339) {
NU8 Result_127340;
NU8 K_127351;
TY56552* LOC4;
NIM_BOOL LOC8;
NIM_BOOL LOC12;
Result_127340 = 0;
if (!((*A_127337).Kind == (*F_127336).Kind)) goto LA2;
Result_127340 = ((NU8) 5);
goto LA1;
LA2: ;
K_127351 = 0;
LOC4 = 0;
LOC4 = Skiptypes_98087(A_127337, 1048576);
K_127351 = (*LOC4).Kind;
if (!(K_127351 == (*F_127336).Kind)) goto LA6;
Result_127340 = ((NU8) 3);
goto LA5;
LA6: ;
LOC8 = ((*F_127336).Kind == ((NU8) 31));
if (!(LOC8)) goto LA9;
LOC8 = (K_127351 >= ((NU8) 31) && K_127351 <= ((NU8) 34));
LA9: ;
if (!LOC8) goto LA10;
Result_127340 = ((NU8) 2);
goto LA5;
LA10: ;
LOC12 = (Min_127338 <= K_127351);
if (!(LOC12)) goto LA13;
LOC12 = (K_127351 <= Max_127339);
LA13: ;
if (!LOC12) goto LA14;
Result_127340 = ((NU8) 1);
goto LA5;
LA14: ;
Result_127340 = ((NU8) 0);
LA5: ;
LA1: ;
return Result_127340;
}
N_NIMCALL(NU8, Handlefloatrange_127400)(TY56552* F_127402, TY56552* A_127403) {
NU8 Result_127404;
NU8 K_127415;
TY56552* LOC4;
NIM_BOOL LOC8;
Result_127404 = 0;
if (!((*A_127403).Kind == (*F_127402).Kind)) goto LA2;
Result_127404 = ((NU8) 5);
goto LA1;
LA2: ;
K_127415 = 0;
LOC4 = 0;
LOC4 = Skiptypes_98087(A_127403, 1048576);
K_127415 = (*LOC4).Kind;
if (!(K_127415 == (*F_127402).Kind)) goto LA6;
Result_127404 = ((NU8) 3);
goto LA5;
LA6: ;
LOC8 = (((NU8) 36) <= K_127415);
if (!(LOC8)) goto LA9;
LOC8 = (K_127415 <= ((NU8) 39));
LA9: ;
if (!LOC8) goto LA10;
Result_127404 = ((NU8) 1);
goto LA5;
LA10: ;
Result_127404 = ((NU8) 0);
LA5: ;
LA1: ;
return Result_127404;
}
N_NIMCALL(NU8, Minrel_127473)(NU8 A_127475, NU8 B_127476) {
NU8 Result_127477;
Result_127477 = 0;
if (!(A_127475 <= B_127476)) goto LA2;
Result_127477 = A_127475;
goto LA1;
LA2: ;
Result_127477 = B_127476;
LA1: ;
return Result_127477;
}
static N_INLINE(NI, Sonslen_56804)(TY56526* N_56806) {
NI Result_57897;
Result_57897 = 0;
if (!(*N_56806).KindU.S6.Sons == 0) goto LA2;
Result_57897 = 0;
goto LA1;
LA2: ;
Result_57897 = (*N_56806).KindU.S6.Sons->Sup.len;
LA1: ;
return Result_57897;
}
N_NIMCALL(NU8, Tuplerel_127487)(TY56564* Mapping_127490, TY56552* F_127491, TY56552* A_127492) {
NU8 Result_127493;
NI LOC2;
NI LOC3;
NI I_127504;
NI HEX3Atmp_127642;
NI LOC6;
NI Res_127644;
NU8 M_127505;
NIM_BOOL LOC12;
NI I_127547;
NI HEX3Atmp_127645;
NI LOC16;
NI Res_127647;
TY56548* X_127614;
TY56548* Y_127639;
X_127614 = 0;
Y_127639 = 0;
Result_127493 = 0;
Result_127493 = ((NU8) 0);
LOC2 = Sonslen_56807(A_127492);
LOC3 = Sonslen_56807(F_127491);
if (!(LOC2 == LOC3)) goto LA4;
Result_127493 = ((NU8) 5);
I_127504 = 0;
HEX3Atmp_127642 = 0;
LOC6 = Sonslen_56807(F_127491);
HEX3Atmp_127642 = (NI32)(LOC6 - 1);
Res_127644 = 0;
Res_127644 = 0;
while (1) {
if (!(Res_127644 <= HEX3Atmp_127642)) goto LA7;
I_127504 = Res_127644;
M_127505 = 0;
M_127505 = Typerel_127303(Mapping_127490, (*F_127491).Sons->data[I_127504], (*A_127492).Sons->data[I_127504]);
if (!(M_127505 < ((NU8) 3))) goto LA9;
Result_127493 = ((NU8) 0);
goto BeforeRet;
LA9: ;
Result_127493 = Minrel_127473(Result_127493, M_127505);
Res_127644 += 1;
} LA7: ;
LOC12 = !(((*F_127491).N == NIM_NIL));
if (!(LOC12)) goto LA13;
LOC12 = !(((*A_127492).N == NIM_NIL));
LA13: ;
if (!LOC12) goto LA14;
I_127547 = 0;
HEX3Atmp_127645 = 0;
LOC16 = Sonslen_56804((*F_127491).N);
HEX3Atmp_127645 = (NI32)(LOC16 - 1);
Res_127647 = 0;
Res_127647 = 0;
while (1) {
if (!(Res_127647 <= HEX3Atmp_127645)) goto LA17;
I_127547 = Res_127647;
if (!!(((*(*(*F_127491).N).KindU.S6.Sons->data[I_127547]).Kind == ((NU8) 3)))) goto LA19;
Internalerror_49208((*(*F_127491).N).Info, ((NimStringDesc*) &TMP198032));
LA19: ;
if (!!(((*(*(*A_127492).N).KindU.S6.Sons->data[I_127547]).Kind == ((NU8) 3)))) goto LA22;
Internalerror_49208((*(*A_127492).N).Info, ((NimStringDesc*) &TMP198032));
LA22: ;
X_127614 = NIM_NIL;
X_127614 = (*(*(*F_127491).N).KindU.S6.Sons->data[I_127547]).KindU.S4.Sym;
Y_127639 = NIM_NIL;
Y_127639 = (*(*(*A_127492).N).KindU.S6.Sons->data[I_127547]).KindU.S4.Sym;
if (!!(((*(*X_127614).Name).Sup.Id == (*(*Y_127639).Name).Sup.Id))) goto LA25;
Result_127493 = ((NU8) 0);
goto BeforeRet;
LA25: ;
Res_127647 += 1;
} LA17: ;
LA14: ;
LA4: ;
BeforeRet: ;
return Result_127493;
}
N_NIMCALL(NIM_BOOL, Isobjectsubtype_127443)(TY56552* A_127445, TY56552* F_127446) {
NIM_BOOL Result_127447;
TY56552* T_127448;
NIM_BOOL LOC2;
T_127448 = 0;
Result_127447 = 0;
T_127448 = NIM_NIL;
T_127448 = A_127445;
while (1) {
LOC2 = !((T_127448 == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = !(((*T_127448).Sup.Id == (*F_127446).Sup.Id));
LA3: ;
if (!LOC2) goto LA1;
T_127448 = Base_98021(T_127448);
} LA1: ;
Result_127447 = !((T_127448 == NIM_NIL));
return Result_127447;
}
N_NIMCALL(TY56552*, Concretetype_127309)(TY56564 Mapping_127311, TY56552* T_127312) {
TY56552* Result_127313;
TNimObject* LOC2;
Result_127313 = 0;
Result_127313 = NIM_NIL;
switch ((*T_127312).Kind) {
case ((NU8) 4):
Result_127313 = Newtype_56707(((NU8) 16), (*T_127312).Owner);
Addson_56828(Result_127313, (*T_127312).Sons->data[0]);
Addson_56828(Result_127313, (*T_127312).Sons->data[1]);
break;
case ((NU8) 5):
Result_127313 = NIM_NIL;
break;
case ((NU8) 12):
Result_127313 = T_127312;
while (1) {
LOC2 = 0;
LOC2 = Idtableget_61158(Mapping_127311, &T_127312->Sup);
Result_127313 = ((TY56552*) (LOC2));
if (!(Result_127313 == NIM_NIL)) goto LA4;
goto LA1;
LA4: ;
if (!!(((*Result_127313).Kind == ((NU8) 12)))) goto LA7;
goto LA1;
LA7: ;
} LA1: ;
break;
default:
Result_127313 = T_127312;
break;
}
return Result_127313;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18799, NimStringDesc* Src_18800) {
memcpy(((NCSTRING) (&(*Dest_18799).data[((*Dest_18799).Sup.len)-0])), ((NCSTRING) ((*Src_18800).data)), ((int) ((NI32)((NI32)((*Src_18800).Sup.len + 1) * 1))));
(*Dest_18799).Sup.len += (*Src_18800).Sup.len;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18816, NIM_CHAR C_18817) {
(*Dest_18816).data[((*Dest_18816).Sup.len)-0] = C_18817;
(*Dest_18816).data[((NI32)((*Dest_18816).Sup.len + 1))-0] = 0;
(*Dest_18816).Sup.len += 1;
}
N_NIMCALL(NU8, Typerel_127303)(TY56564* Mapping_127306, TY56552* F_127307, TY56552* A_127308) {
NU8 Result_127654;
TY56552* X_127655;
TY56552* Concrete_127656;
NU8 M_127657;
NIM_BOOL LOC2;
TY56552* LOC4;
TY56552* LOC7;
NIM_BOOL LOC9;
NIM_BOOL LOC14;
TY56552* LOC18;
TY56552* LOC24;
TY56552* LOC30;
TY56552* LOC31;
TY56552* LOC35;
TY56552* LOC41;
TY56552* LOC42;
TY56552* LOC43;
NU8 LOC44;
NU8 LOC45;
NIM_BOOL LOC53;
NI64 LOC55;
NI64 LOC56;
NU8 LOC61;
TY56552* LOC62;
TY56552* LOC63;
NIM_BOOL LOC68;
TY56552* LOC72;
NU8 LOC73;
NIM_BOOL LOC77;
TY56552* LOC81;
NU8 LOC82;
NIM_BOOL LOC86;
TY56552* LOC90;
NU8 LOC91;
NIM_BOOL LOC95;
NIM_BOOL LOC103;
NIM_BOOL LOC124;
NIM_BOOL LOC128;
NIM_BOOL LOC136;
TY56552* LOC143;
TY56552* LOC144;
TY56552* LOC148;
TY56552* LOC149;
NIM_BOOL LOC154;
NI LOC155;
NI LOC156;
NI I_128090;
NI HEX3Atmp_128432;
NI LOC160;
NI Res_128434;
NIM_BOOL LOC163;
NU8 LOC165;
NIM_BOOL LOC184;
NIM_BOOL LOC192;
NIM_BOOL LOC193;
NI64 LOC194;
TY56552* LOC196;
TY56552* LOC203;
TY56552* LOC204;
NIM_BOOL LOC212;
NI LOC214;
NI LOC215;
NI I_128285;
NI HEX3Atmp_128435;
NI LOC218;
NI Res_128437;
NU8 LOC224;
NI I_128323;
NI HEX3Atmp_128438;
NI LOC230;
NI Res_128440;
TNimObject* LOC232;
NIM_BOOL LOC234;
TNimObject* LOC238;
NI LOC243;
NimStringDesc* LOC249;
NI I_128376;
NI HEX3Atmp_128441;
NI LOC250;
NI Res_128443;
NU8 LOC253;
NimStringDesc* LOC266;
X_127655 = 0;
Concrete_127656 = 0;
Result_127654 = 0;
X_127655 = NIM_NIL;
Concrete_127656 = NIM_NIL;
M_127657 = 0;
Result_127654 = ((NU8) 0);
LOC2 = ((*A_127308).Kind == ((NU8) 11));
if (!(LOC2)) goto LA3;
LOC4 = 0;
LOC4 = Skiptypes_98087(F_127307, 8388608);
LOC2 = !(((*LOC4).Kind == ((NU8) 10) || (*LOC4).Kind == ((NU8) 9)));
LA3: ;
if (!LOC2) goto LA5;
LOC7 = 0;
LOC7 = Lastson_56813(A_127308);
Result_127654 = Typerel_127303(Mapping_127306, F_127307, LOC7);
goto BeforeRet;
LA5: ;
LOC9 = ((*A_127308).Kind == ((NU8) 23));
if (!(LOC9)) goto LA10;
LOC9 = !(((*F_127307).Kind == ((NU8) 23)));
LA10: ;
if (!LOC9) goto LA11;
Result_127654 = Typerel_127303(Mapping_127306, F_127307, (*A_127308).Sons->data[0]);
goto BeforeRet;
LA11: ;
switch ((*F_127307).Kind) {
case ((NU8) 14):
LOC14 = ((*A_127308).Kind == (*F_127307).Kind);
if (!(LOC14)) goto LA15;
LOC14 = ((*A_127308).Sup.Id == (*F_127307).Sup.Id);
LA15: ;
if (!LOC14) goto LA16;
Result_127654 = ((NU8) 5);
goto LA13;
LA16: ;
LOC18 = 0;
LOC18 = Skiptypes_98087(A_127308, 1048576);
if (!((*LOC18).Sup.Id == (*F_127307).Sup.Id)) goto LA19;
Result_127654 = ((NU8) 3);
goto LA13;
LA19: ;
LA13: ;
break;
case ((NU8) 1):
case ((NU8) 2):
if (!((*A_127308).Kind == (*F_127307).Kind)) goto LA22;
Result_127654 = ((NU8) 5);
goto LA21;
LA22: ;
LOC24 = 0;
LOC24 = Skiptypes_98087(A_127308, 1048576);
if (!((*LOC24).Kind == (*F_127307).Kind)) goto LA25;
Result_127654 = ((NU8) 3);
goto LA21;
LA25: ;
LA21: ;
break;
case ((NU8) 20):
if (!((*A_127308).Kind == (*F_127307).Kind)) goto LA28;
LOC30 = 0;
LOC30 = Base_98021(A_127308);
LOC31 = 0;
LOC31 = Base_98021(F_127307);
Result_127654 = Typerel_127303(Mapping_127306, LOC30, LOC31);
if (!(Result_127654 < ((NU8) 4))) goto LA33;
Result_127654 = ((NU8) 0);
LA33: ;
goto LA27;
LA28: ;
LOC35 = 0;
LOC35 = Skiptypes_98087(F_127307, 1048576);
if (!((*LOC35).Kind == (*A_127308).Kind)) goto LA36;
Result_127654 = ((NU8) 1);
goto LA27;
LA36: ;
LA27: ;
break;
case ((NU8) 31):
Result_127654 = Handlerange_127334(F_127307, A_127308, ((NU8) 32), ((NU8) 34));
break;
case ((NU8) 32):
Result_127654 = Handlerange_127334(F_127307, A_127308, ((NU8) 32), ((NU8) 32));
break;
case ((NU8) 33):
Result_127654 = Handlerange_127334(F_127307, A_127308, ((NU8) 32), ((NU8) 33));
break;
case ((NU8) 34):
Result_127654 = Handlerange_127334(F_127307, A_127308, ((NU8) 31), ((NU8) 34));
break;
case ((NU8) 35):
Result_127654 = Handlerange_127334(F_127307, A_127308, ((NU8) 31), ((NU8) 35));
break;
case ((NU8) 36):
Result_127654 = Handlefloatrange_127400(F_127307, A_127308);
break;
case ((NU8) 37):
Result_127654 = Handlefloatrange_127400(F_127307, A_127308);
break;
case ((NU8) 38):
Result_127654 = Handlefloatrange_127400(F_127307, A_127308);
break;
case ((NU8) 39):
Result_127654 = Handlefloatrange_127400(F_127307, A_127308);
break;
case ((NU8) 23):
if (!((*A_127308).Kind == (*F_127307).Kind)) goto LA39;
LOC41 = 0;
LOC41 = Base_98021(F_127307);
LOC42 = 0;
LOC42 = Base_98021(A_127308);
Result_127654 = Typerel_127303(Mapping_127306, LOC41, LOC42);
goto LA38;
LA39: ;
LOC43 = 0;
LOC43 = Base_98021(F_127307);
Result_127654 = Typerel_127303(Mapping_127306, LOC43, A_127308);
LA38: ;
break;
case ((NU8) 16):
case ((NU8) 4):
switch ((*A_127308).Kind) {
case ((NU8) 16):
LOC44 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], (*A_127308).Sons->data[0]);
LOC45 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[1], (*A_127308).Sons->data[1]);
Result_127654 = Minrel_127473(LOC44, LOC45);
if (!(Result_127654 < ((NU8) 4))) goto LA47;
Result_127654 = ((NU8) 0);
LA47: ;
break;
case ((NU8) 4):
Result_127654 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[1], (*A_127308).Sons->data[1]);
if (!(Result_127654 < ((NU8) 4))) goto LA50;
Result_127654 = ((NU8) 0);
goto LA49;
LA50: ;
LOC53 = !((Result_127654 == ((NU8) 4)));
if (!(LOC53)) goto LA54;
LOC55 = Lengthord_98007(F_127307);
LOC56 = Lengthord_98007(A_127308);
LOC53 = !((LOC55 == LOC56));
LA54: ;
if (!LOC53) goto LA57;
Result_127654 = ((NU8) 0);
goto LA52;
LA57: ;
if (!((*(*F_127307).Sons->data[0]).Kind == ((NU8) 9) || (*(*F_127307).Sons->data[0]).Kind == ((NU8) 10) || (*(*F_127307).Sons->data[0]).Kind == ((NU8) 12))) goto LA59;
LOC61 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], (*A_127308).Sons->data[0]);
Result_127654 = Minrel_127473(Result_127654, LOC61);
goto LA52;
LA59: ;
LA52: ;
LA49: ;
break;
default:
break;
}
break;
case ((NU8) 27):
switch ((*A_127308).Kind) {
case ((NU8) 27):
LOC62 = 0;
LOC62 = Base_98021(F_127307);
LOC63 = 0;
LOC63 = Base_98021(A_127308);
Result_127654 = Typerel_127303(Mapping_127306, LOC62, LOC63);
if (!(Result_127654 < ((NU8) 4))) goto LA65;
Result_127654 = ((NU8) 0);
LA65: ;
break;
case ((NU8) 4):
LOC68 = !(((*(*F_127307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC68)) goto LA69;
LOC68 = ((*(*A_127308).Sons->data[1]).Kind == ((NU8) 3));
LA69: ;
if (!LOC68) goto LA70;
Result_127654 = ((NU8) 3);
goto LA67;
LA70: ;
LOC72 = 0;
LOC72 = Base_98021(F_127307);
LOC73 = Typerel_127303(Mapping_127306, LOC72, (*A_127308).Sons->data[1]);
if (!(((NU8) 4) <= LOC73)) goto LA74;
Result_127654 = ((NU8) 3);
goto LA67;
LA74: ;
LA67: ;
break;
case ((NU8) 16):
LOC77 = !(((*(*F_127307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC77)) goto LA78;
LOC77 = ((*(*A_127308).Sons->data[1]).Kind == ((NU8) 3));
LA78: ;
if (!LOC77) goto LA79;
Result_127654 = ((NU8) 3);
goto LA76;
LA79: ;
LOC81 = 0;
LOC81 = Base_98021(F_127307);
LOC82 = Typerel_127303(Mapping_127306, LOC81, (*A_127308).Sons->data[1]);
if (!(((NU8) 4) <= LOC82)) goto LA83;
Result_127654 = ((NU8) 1);
goto LA76;
LA83: ;
LA76: ;
break;
case ((NU8) 24):
LOC86 = !(((*(*F_127307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC86)) goto LA87;
LOC86 = ((*(*A_127308).Sons->data[0]).Kind == ((NU8) 3));
LA87: ;
if (!LOC86) goto LA88;
Result_127654 = ((NU8) 1);
goto LA85;
LA88: ;
LOC90 = 0;
LOC90 = Base_98021(F_127307);
LOC91 = Typerel_127303(Mapping_127306, LOC90, (*A_127308).Sons->data[0]);
if (!(((NU8) 4) <= LOC91)) goto LA92;
Result_127654 = ((NU8) 1);
goto LA85;
LA92: ;
LA85: ;
break;
default:
break;
}
break;
case ((NU8) 24):
switch ((*A_127308).Kind) {
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
case ((NU8) 24):
LOC95 = !(((*(*F_127307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC95)) goto LA96;
LOC95 = ((*(*A_127308).Sons->data[0]).Kind == ((NU8) 3));
LA96: ;
if (!LOC95) goto LA97;
Result_127654 = ((NU8) 3);
goto LA94;
LA97: ;
Result_127654 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], (*A_127308).Sons->data[0]);
if (!(Result_127654 < ((NU8) 4))) goto LA100;
Result_127654 = ((NU8) 0);
LA100: ;
LA94: ;
break;
default:
break;
}
break;
case ((NU8) 15):
LOC103 = Isordinaltype_98069(A_127308);
if (!LOC103) goto LA104;
if (!((*A_127308).Kind == ((NU8) 15))) goto LA107;
X_127655 = (*A_127308).Sons->data[0];
goto LA106;
LA107: ;
X_127655 = A_127308;
LA106: ;
Result_127654 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], X_127655);
if (!(Result_127654 < ((NU8) 4))) goto LA110;
Result_127654 = ((NU8) 0);
LA110: ;
LA104: ;
break;
case ((NU8) 30):
Internalerror_49212(((NimStringDesc*) &TMP198031));
break;
case ((NU8) 5):
if (!((*A_127308).Kind == (*F_127307).Kind)) goto LA113;
Result_127654 = ((NU8) 5);
LA113: ;
break;
case ((NU8) 18):
if (!((*A_127308).Kind == ((NU8) 18))) goto LA116;
Result_127654 = Tuplerel_127487(Mapping_127306, F_127307, A_127308);
LA116: ;
break;
case ((NU8) 17):
if (!((*A_127308).Kind == ((NU8) 17))) goto LA119;
if (!((*A_127308).Sup.Id == (*F_127307).Sup.Id)) goto LA122;
Result_127654 = ((NU8) 5);
goto LA121;
LA122: ;
LOC124 = Isobjectsubtype_127443(A_127308, F_127307);
if (!LOC124) goto LA125;
Result_127654 = ((NU8) 3);
goto LA121;
LA125: ;
LA121: ;
LA119: ;
break;
case ((NU8) 13):
LOC128 = ((*A_127308).Kind == ((NU8) 13));
if (!(LOC128)) goto LA129;
LOC128 = ((*A_127308).Sup.Id == (*F_127307).Sup.Id);
LA129: ;
if (!LOC128) goto LA130;
Result_127654 = ((NU8) 5);
LA130: ;
break;
case ((NU8) 19):
if (!((*A_127308).Kind == ((NU8) 19))) goto LA133;
LOC136 = !(((*(*F_127307).Sons->data[0]).Kind == ((NU8) 12)));
if (!(LOC136)) goto LA137;
LOC136 = ((*(*A_127308).Sons->data[0]).Kind == ((NU8) 3));
LA137: ;
if (!LOC136) goto LA138;
Result_127654 = ((NU8) 3);
goto LA135;
LA138: ;
Result_127654 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], (*A_127308).Sons->data[0]);
if (!(Result_127654 <= ((NU8) 1))) goto LA141;
Result_127654 = ((NU8) 0);
LA141: ;
LA135: ;
LA133: ;
break;
case ((NU8) 21):
switch ((*A_127308).Kind) {
case ((NU8) 21):
LOC143 = 0;
LOC143 = Base_98021(F_127307);
LOC144 = 0;
LOC144 = Base_98021(A_127308);
Result_127654 = Typerel_127303(Mapping_127306, LOC143, LOC144);
if (!(Result_127654 <= ((NU8) 1))) goto LA146;
Result_127654 = ((NU8) 0);
LA146: ;
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 22):
switch ((*A_127308).Kind) {
case ((NU8) 22):
LOC148 = 0;
LOC148 = Base_98021(F_127307);
LOC149 = 0;
LOC149 = Base_98021(A_127308);
Result_127654 = Typerel_127303(Mapping_127306, LOC148, LOC149);
if (!(Result_127654 <= ((NU8) 1))) goto LA151;
Result_127654 = ((NU8) 0);
LA151: ;
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 25):
switch ((*A_127308).Kind) {
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
case ((NU8) 25):
LOC155 = Sonslen_56807(F_127307);
LOC156 = Sonslen_56807(A_127308);
LOC154 = (LOC155 == LOC156);
if (!(LOC154)) goto LA157;
LOC154 = ((*F_127307).Callconv == (*A_127308).Callconv);
LA157: ;
if (!LOC154) goto LA158;
Result_127654 = ((NU8) 5);
I_128090 = 0;
HEX3Atmp_128432 = 0;
LOC160 = Sonslen_56807(F_127307);
HEX3Atmp_128432 = (NI32)(LOC160 - 1);
Res_128434 = 0;
Res_128434 = 1;
while (1) {
if (!(Res_128434 <= HEX3Atmp_128432)) goto LA161;
I_128090 = Res_128434;
M_127657 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[I_128090], (*A_127308).Sons->data[I_128090]);
LOC163 = (M_127657 == ((NU8) 0));
if (!(LOC163)) goto LA164;
LOC165 = Typerel_127303(Mapping_127306, (*A_127308).Sons->data[I_128090], (*F_127307).Sons->data[I_128090]);
LOC163 = (LOC165 == ((NU8) 3));
LA164: ;
if (!LOC163) goto LA166;
Result_127654 = ((NU8) 1);
goto LA162;
LA166: ;
if (!(M_127657 < ((NU8) 3))) goto LA168;
Result_127654 = ((NU8) 0);
goto BeforeRet;
goto LA162;
LA168: ;
Result_127654 = Minrel_127473(M_127657, Result_127654);
LA162: ;
Res_128434 += 1;
} LA161: ;
if (!!(((*F_127307).Sons->data[0] == NIM_NIL))) goto LA171;
if (!!(((*A_127308).Sons->data[0] == NIM_NIL))) goto LA174;
M_127657 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], (*A_127308).Sons->data[0]);
if (!(M_127657 < ((NU8) 3))) goto LA177;
Result_127654 = ((NU8) 0);
goto LA176;
LA177: ;
if (!(M_127657 == ((NU8) 3))) goto LA179;
Result_127654 = ((NU8) 1);
goto LA176;
LA179: ;
Result_127654 = Minrel_127473(M_127657, Result_127654);
LA176: ;
goto LA173;
LA174: ;
Result_127654 = ((NU8) 0);
LA173: ;
goto LA170;
LA171: ;
if (!!(((*A_127308).Sons->data[0] == NIM_NIL))) goto LA181;
Result_127654 = ((NU8) 0);
goto LA170;
LA181: ;
LA170: ;
LOC184 = (((*F_127307).Flags &(1<<((((NU8) 1))&7)))!=0);
if (!(LOC184)) goto LA185;
LOC184 = !((((*A_127308).Flags &(1<<((((NU8) 1))&7)))!=0));
LA185: ;
if (!LOC184) goto LA186;
Result_127654 = ((NU8) 0);
LA186: ;
LA158: ;
break;
default:
break;
}
break;
case ((NU8) 26):
switch ((*A_127308).Kind) {
case ((NU8) 26):
Result_127654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
case ((NU8) 21):
case ((NU8) 25):
case ((NU8) 29):
Result_127654 = ((NU8) 1);
break;
default:
break;
}
break;
case ((NU8) 28):
switch ((*A_127308).Kind) {
case ((NU8) 28):
Result_127654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
default:
break;
}
break;
case ((NU8) 29):
switch ((*A_127308).Kind) {
case ((NU8) 29):
Result_127654 = ((NU8) 5);
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
case ((NU8) 28):
Result_127654 = ((NU8) 1);
break;
case ((NU8) 21):
if (!((*(*A_127308).Sons->data[0]).Kind == ((NU8) 2))) goto LA189;
Result_127654 = ((NU8) 1);
LA189: ;
break;
case ((NU8) 16):
LOC194 = Firstord_98001((*A_127308).Sons->data[0]);
LOC193 = (LOC194 == 0);
if (!(LOC193)) goto LA195;
LOC196 = 0;
LOC196 = Skiptypes_98087((*A_127308).Sons->data[0], 1048576);
LOC193 = ((*LOC196).Kind >= ((NU8) 31) && (*LOC196).Kind <= ((NU8) 35));
LA195: ;
LOC192 = LOC193;
if (!(LOC192)) goto LA197;
LOC192 = ((*(*A_127308).Sons->data[1]).Kind == ((NU8) 2));
LA197: ;
if (!LOC192) goto LA198;
Result_127654 = ((NU8) 1);
LA198: ;
break;
default:
break;
}
break;
case ((NU8) 3):
if (!((*A_127308).Kind == ((NU8) 3))) goto LA201;
Result_127654 = ((NU8) 5);
LA201: ;
break;
case ((NU8) 11):
LOC203 = 0;
LOC203 = Lastson_56813(F_127307);
Result_127654 = Typerel_127303(Mapping_127306, LOC203, A_127308);
break;
case ((NU8) 10):
LOC204 = 0;
LOC204 = Lastson_56813(F_127307);
Result_127654 = Typerel_127303(Mapping_127306, LOC204, A_127308);
break;
case ((NU8) 9):
if (!((*A_127308).Kind == ((NU8) 9))) goto LA206;
Internalerror_49212(((NimStringDesc*) &TMP198033));
LA206: ;
if (!((*A_127308).Kind == ((NU8) 11))) goto LA209;
LOC212 = ((*(*F_127307).Sons->data[0]).Containerid == (*(*A_127308).Sons->data[0]).Containerid);
if (!(LOC212)) goto LA213;
LOC214 = Sonslen_56807(A_127308);
LOC215 = Sonslen_56807(F_127307);
LOC212 = ((NI32)(LOC214 - 1) == LOC215);
LA213: ;
if (!LOC212) goto LA216;
I_128285 = 0;
HEX3Atmp_128435 = 0;
LOC218 = Sonslen_56807(F_127307);
HEX3Atmp_128435 = (NI32)(LOC218 - 1);
Res_128437 = 0;
Res_128437 = 1;
while (1) {
if (!(Res_128437 <= HEX3Atmp_128435)) goto LA219;
I_128285 = Res_128437;
if (!((*(*A_127308).Sons->data[I_128285]).Kind == ((NU8) 12))) goto LA221;
Internalerror_49212(((NimStringDesc*) &TMP198034));
LA221: ;
LOC224 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[I_128285], (*A_127308).Sons->data[I_128285]);
if (!(LOC224 < ((NU8) 4))) goto LA225;
goto BeforeRet;
LA225: ;
Res_128437 += 1;
} LA219: ;
Result_127654 = ((NU8) 4);
LA216: ;
goto LA208;
LA209: ;
Result_127654 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[0], A_127308);
if (!!((Result_127654 == ((NU8) 0)))) goto LA228;
I_128323 = 0;
HEX3Atmp_128438 = 0;
LOC230 = Sonslen_56807(F_127307);
HEX3Atmp_128438 = (NI32)(LOC230 - 1);
Res_128440 = 0;
Res_128440 = 1;
while (1) {
if (!(Res_128440 <= HEX3Atmp_128438)) goto LA231;
I_128323 = Res_128440;
LOC232 = 0;
LOC232 = Idtableget_61158((*Mapping_127306), &(*(*F_127307).Sons->data[0]).Sons->data[(NI32)(I_128323 - 1)]->Sup);
X_127655 = ((TY56552*) (LOC232));
LOC234 = (X_127655 == NIM_NIL);
if (LOC234) goto LA235;
LOC234 = ((*X_127655).Kind == ((NU8) 12));
LA235: ;
if (!LOC234) goto LA236;
Internalerror_49212(((NimStringDesc*) &TMP198034));
LA236: ;
Idtableput_61166(Mapping_127306, &(*F_127307).Sons->data[I_128323]->Sup, &X_127655->Sup.Sup);
Res_128440 += 1;
} LA231: ;
LA228: ;
LA208: ;
break;
case ((NU8) 12):
LOC238 = 0;
LOC238 = Idtableget_61158((*Mapping_127306), &F_127307->Sup);
X_127655 = ((TY56552*) (LOC238));
if (!(X_127655 == NIM_NIL)) goto LA240;
LOC243 = Sonslen_56807(F_127307);
if (!(LOC243 == 0)) goto LA244;
Concrete_127656 = Concretetype_127309((*Mapping_127306), A_127308);
if (!!((Concrete_127656 == NIM_NIL))) goto LA247;
Idtableput_61166(Mapping_127306, &F_127307->Sup, &Concrete_127656->Sup.Sup);
Result_127654 = ((NU8) 4);
LA247: ;
goto LA242;
LA244: ;
LOC249 = 0;
LOC249 = rawNewString((*(*(*F_127307).Sym).Name).S->Sup.len + 17);
appendString(LOC249, ((NimStringDesc*) &TMP198035));
appendString(LOC249, (*(*(*F_127307).Sym).Name).S);
Internalerror_49208((*(*F_127307).Sym).Info, LOC249);
I_128376 = 0;
HEX3Atmp_128441 = 0;
LOC250 = Sonslen_56807(F_127307);
HEX3Atmp_128441 = (NI32)(LOC250 - 1);
Res_128443 = 0;
Res_128443 = 0;
while (1) {
if (!(Res_128443 <= HEX3Atmp_128441)) goto LA251;
I_128376 = Res_128443;
LOC253 = Typerel_127303(Mapping_127306, (*F_127307).Sons->data[I_128376], A_127308);
if (!(((NU8) 3) <= LOC253)) goto LA254;
Concrete_127656 = Concretetype_127309((*Mapping_127306), A_127308);
if (!!((Concrete_127656 == NIM_NIL))) goto LA257;
Idtableput_61166(Mapping_127306, &F_127307->Sup, &Concrete_127656->Sup.Sup);
Result_127654 = ((NU8) 4);
LA257: ;
goto LA251;
LA254: ;
Res_128443 += 1;
} LA251: ;
LA242: ;
goto LA239;
LA240: ;
if (!((*A_127308).Kind == ((NU8) 3))) goto LA259;
Result_127654 = ((NU8) 4);
goto LA239;
LA259: ;
if (!((*X_127655).Kind == ((NU8) 12))) goto LA261;
Result_127654 = ((NU8) 4);
goto LA239;
LA261: ;
Result_127654 = Typerel_127303(Mapping_127306, X_127655, A_127308);
LA239: ;
break;
case ((NU8) 6):
case ((NU8) 7):
case ((NU8) 8):
if (!((*A_127308).Kind == (*F_127307).Kind)) goto LA264;
Result_127654 = ((NU8) 5);
goto LA263;
LA264: ;
switch ((*A_127308).Kind) {
case ((NU8) 6):
case ((NU8) 7):
case ((NU8) 8):
Result_127654 = ((NU8) 4);
break;
case ((NU8) 5):
Result_127654 = ((NU8) 3);
break;
default:
break;
}
LA263: ;
break;
default:
LOC266 = 0;
LOC266 = rawNewString(reprEnum((*F_127307).Kind, NTI56162)->Sup.len + 9);
appendString(LOC266, ((NimStringDesc*) &TMP198036));
appendString(LOC266, reprEnum((*F_127307).Kind, NTI56162));
appendChar(LOC266, 41);
Internalerror_49212(LOC266);
break;
}
BeforeRet: ;
return Result_127654;
}
N_NIMCALL(TY56552*, Getinstantiatedtype_128452)(TY108012* C_128454, TY56526* Arg_128455, TY127007* M_128456, TY56552* F_128457) {
TY56552* Result_128458;
TNimObject* LOC1;
Result_128458 = 0;
Result_128458 = NIM_NIL;
LOC1 = 0;
LOC1 = Idtableget_61158((*M_128456).Bindings, &F_128457->Sup);
Result_128458 = ((TY56552*) (LOC1));
if (!(Result_128458 == NIM_NIL)) goto LA3;
Result_128458 = Generatetypeinstance_126447(C_128454, (*M_128456).Bindings, Arg_128455, F_128457);
LA3: ;
if (!(Result_128458 == NIM_NIL)) goto LA6;
Internalerror_49208((*Arg_128455).Info, ((NimStringDesc*) &TMP198047));
LA6: ;
return Result_128458;
}
static N_INLINE(NI, Atomicinc_3221)(NI* Memloc_3224, NI X_3225) {
NI Result_7807;
Result_7807 = 0;
(*Memloc_3224) += X_3225;
Result_7807 = (*Memloc_3224);
return Result_7807;
}
static N_INLINE(NIM_BOOL, Canbecycleroot_11616)(TY10802* C_11618) {
NIM_BOOL Result_11619;
Result_11619 = 0;
Result_11619 = !((((*(*C_11618).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
return Result_11619;
}
static N_INLINE(void, Rtladdcycleroot_12252)(TY10802* C_12254) {
Incl_11080(&Gch_11214.Cycleroots, C_12254);
}
static N_INLINE(void, Incref_13202)(TY10802* C_13204) {
NI LOC1;
NIM_BOOL LOC3;
LOC1 = Atomicinc_3221(&(*C_13204).Refcount, 8);
LOC3 = Canbecycleroot_11616(C_13204);
if (!LOC3) goto LA4;
Rtladdcycleroot_12252(C_13204);
LA4: ;
}
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI32)((NU32)(((NI) (Usr_11614))) - (NU32)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicdec_3226)(NI* Memloc_3229, NI X_3230) {
NI Result_8006;
Result_8006 = 0;
(*Memloc_3229) -= X_3230;
Result_8006 = (*Memloc_3229);
return Result_8006;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11214.Zct, C_12603);
}
static N_INLINE(void, Decref_13001)(TY10802* C_13003) {
NI LOC2;
NIM_BOOL LOC5;
LOC2 = Atomicdec_3226(&(*C_13003).Refcount, 8);
if (!((NU32)(LOC2) < (NU32)(8))) goto LA3;
Rtladdzct_12601(C_13003);
goto LA1;
LA3: ;
LOC5 = Canbecycleroot_11616(C_13003);
if (!LOC5) goto LA6;
Rtladdcycleroot_12252(C_13003);
goto LA1;
LA6: ;
LA1: ;
}
static N_INLINE(void, asgnRef)(void** Dest_13214, void* Src_13215) {
TY10802* LOC4;
TY10802* LOC8;
if (!!((Src_13215 == NIM_NIL))) goto LA2;
LOC4 = Usrtocell_11612(Src_13215);
Incref_13202(LOC4);
LA2: ;
if (!!(((*Dest_13214) == NIM_NIL))) goto LA6;
LOC8 = Usrtocell_11612((*Dest_13214));
Decref_13001(LOC8);
LA6: ;
(*Dest_13214) = Src_13215;
}
N_NIMCALL(TY56526*, Implicitconv_128481)(NU8 Kind_128483, TY56552* F_128484, TY56526* Arg_128485, TY127007* M_128486, TY108012* C_128487) {
TY56526* Result_128488;
NIM_BOOL LOC2;
Result_128488 = 0;
Result_128488 = NIM_NIL;
Result_128488 = Newnodei_56738(Kind_128483, (*Arg_128485).Info);
LOC2 = Containsgenerictype_126066(F_128484);
if (!LOC2) goto LA3;
asgnRef((void**) &(*Result_128488).Typ, Getinstantiatedtype_128452(C_128487, Arg_128485, M_128486, F_128484));
goto LA1;
LA3: ;
asgnRef((void**) &(*Result_128488).Typ, F_128484);
LA1: ;
if (!((*Result_128488).Typ == NIM_NIL)) goto LA6;
Internalerror_49208((*Arg_128485).Info, ((NimStringDesc*) &TMP198048));
LA6: ;
Addson_56824(Result_128488, Emptynode_56858);
Addson_56824(Result_128488, Arg_128485);
return Result_128488;
}
N_NIMCALL(TY56526*, Userconvmatch_128500)(TY108012* C_128502, TY127007* M_128504, TY56552* F_128505, TY56552* A_128506, TY56526* Arg_128507) {
TY56526* Result_128508;
NI I_128527;
NI HEX3Atmp_128563;
NI Res_128565;
TY56552* Src_128528;
TY56552* Dest_128529;
NIM_BOOL LOC3;
NU8 LOC4;
NU8 LOC6;
TY56526* S_128550;
TY56526* LOC9;
Result_128508 = 0;
Src_128528 = 0;
Dest_128529 = 0;
S_128550 = 0;
Result_128508 = NIM_NIL;
Result_128508 = NIM_NIL;
I_128527 = 0;
HEX3Atmp_128563 = 0;
HEX3Atmp_128563 = (NI32)((*C_128502).Converters->Sup.len - 1);
Res_128565 = 0;
Res_128565 = 0;
while (1) {
if (!(Res_128565 <= HEX3Atmp_128563)) goto LA1;
I_128527 = Res_128565;
Src_128528 = NIM_NIL;
Src_128528 = (*(*(*C_128502).Converters->data[I_128527]).Typ).Sons->data[1];
Dest_128529 = NIM_NIL;
Dest_128529 = (*(*(*C_128502).Converters->data[I_128527]).Typ).Sons->data[0];
LOC4 = Typerel_127303(&(*M_128504).Bindings, F_128505, Dest_128529);
LOC3 = (LOC4 == ((NU8) 5));
if (!(LOC3)) goto LA5;
LOC6 = Typerel_127303(&(*M_128504).Bindings, Src_128528, A_128506);
LOC3 = (LOC6 == ((NU8) 5));
LA5: ;
if (!LOC3) goto LA7;
S_128550 = NIM_NIL;
S_128550 = Newsymnode_56735((*C_128502).Converters->data[I_128527]);
asgnRef((void**) &(*S_128550).Typ, (*(*C_128502).Converters->data[I_128527]).Typ);
(*S_128550).Info = (*Arg_128507).Info;
Result_128508 = Newnodeit_56742(((NU8) 49), (*Arg_128507).Info, (*(*S_128550).Typ).Sons->data[0]);
Addson_56824(Result_128508, S_128550);
LOC9 = 0;
LOC9 = Copytree_56852(Arg_128507);
Addson_56824(Result_128508, LOC9);
(*M_128504).Convmatches += 1;
goto BeforeRet;
LA7: ;
Res_128565 += 1;
} LA1: ;
BeforeRet: ;
return Result_128508;
}
N_NIMCALL(TY56526*, Paramtypesmatchaux_128566)(TY108012* C_128568, TY127007* M_128570, TY56552* F_128571, TY56552* A_128572, TY56526* Arg_128573) {
TY56526* Result_128574;
NU8 R_128576;
TY56526* LOC1;
TY56526* LOC2;
TY56526* LOC3;
TY56552* LOC5;
TY56526* LOC8;
TY56552* LOC10;
TY56526* LOC13;
NIM_BOOL LOC15;
TY56552* LOC19;
TY56552* LOC26;
TY56552* LOC27;
Result_128574 = 0;
Result_128574 = NIM_NIL;
R_128576 = 0;
R_128576 = Typerel_127303(&(*M_128570).Bindings, F_128571, A_128572);
switch (R_128576) {
case ((NU8) 1):
(*M_128570).Convmatches += 1;
LOC1 = 0;
LOC1 = Copytree_56852(Arg_128573);
Result_128574 = Implicitconv_128481(((NU8) 47), F_128571, LOC1, &(*M_128570), C_128568);
break;
case ((NU8) 2):
(*M_128570).Intconvmatches += 1;
LOC2 = 0;
LOC2 = Copytree_56852(Arg_128573);
Result_128574 = Implicitconv_128481(((NU8) 47), F_128571, LOC2, &(*M_128570), C_128568);
break;
case ((NU8) 3):
(*M_128570).Subtypematches += 1;
LOC3 = 0;
LOC3 = Copytree_56852(Arg_128573);
Result_128574 = Implicitconv_128481(((NU8) 48), F_128571, LOC3, &(*M_128570), C_128568);
break;
case ((NU8) 4):
(*M_128570).Genericmatches += 1;
Result_128574 = Copytree_56852(Arg_128573);
asgnRef((void**) &(*Result_128574).Typ, Getinstantiatedtype_128452(C_128568, Arg_128573, &(*M_128570), F_128571));
LOC5 = 0;
LOC5 = Skiptypes_98087((*Result_128574).Typ, 8431616);
if (!((*LOC5).Kind == ((NU8) 18) || (*LOC5).Kind == ((NU8) 27))) goto LA6;
LOC8 = 0;
LOC8 = Copytree_56852(Arg_128573);
Result_128574 = Implicitconv_128481(((NU8) 47), F_128571, LOC8, &(*M_128570), C_128568);
LA6: ;
break;
case ((NU8) 5):
(*M_128570).Exactmatches += 1;
Result_128574 = Copytree_56852(Arg_128573);
LOC10 = 0;
LOC10 = Skiptypes_98087(F_128571, 8431616);
if (!((*LOC10).Kind == ((NU8) 18) || (*LOC10).Kind == ((NU8) 27))) goto LA11;
LOC13 = 0;
LOC13 = Copytree_56852(Arg_128573);
Result_128574 = Implicitconv_128481(((NU8) 47), F_128571, LOC13, &(*M_128570), C_128568);
LA11: ;
break;
case ((NU8) 0):
Result_128574 = Userconvmatch_128500(C_128568, M_128570, F_128571, A_128572, Arg_128573);
LOC15 = (Result_128574 == NIM_NIL);
if (!(LOC15)) goto LA16;
LOC15 = ((*F_128571).Kind == ((NU8) 27));
LA16: ;
if (!LOC15) goto LA17;
LOC19 = 0;
LOC19 = Base_98021(F_128571);
R_128576 = Typerel_127303(&(*M_128570).Bindings, LOC19, A_128572);
if (!(((NU8) 4) <= R_128576)) goto LA21;
(*M_128570).Convmatches += 1;
Result_128574 = Copytree_56852(Arg_128573);
if (!(R_128576 == ((NU8) 4))) goto LA24;
LOC26 = 0;
LOC26 = Base_98021(F_128571);
asgnRef((void**) &(*Result_128574).Typ, Getinstantiatedtype_128452(C_128568, Arg_128573, &(*M_128570), LOC26));
LA24: ;
(*M_128570).Basetypematch = NIM_TRUE;
goto LA20;
LA21: ;
LOC27 = 0;
LOC27 = Base_98021(F_128571);
Result_128574 = Userconvmatch_128500(C_128568, M_128570, LOC27, A_128572, Arg_128573);
LA20: ;
LA17: ;
break;
}
return Result_128574;
}
N_NIMCALL(void, Copycandidate_127103)(TY127007* A_127106, TY127007* B_127107) {
(*A_127106).Exactmatches = (*B_127107).Exactmatches;
(*A_127106).Subtypematches = (*B_127107).Subtypematches;
(*A_127106).Convmatches = (*B_127107).Convmatches;
(*A_127106).Intconvmatches = (*B_127107).Intconvmatches;
(*A_127106).Genericmatches = (*B_127107).Genericmatches;
(*A_127106).State = (*B_127107).State;
unsureAsgnRef((void**) &(*A_127106).Callee, (*B_127107).Callee);
unsureAsgnRef((void**) &(*A_127106).Calleesym, (*B_127107).Calleesym);
unsureAsgnRef((void**) &(*A_127106).Call, Copytree_56852((*B_127107).Call));
(*A_127106).Basetypematch = (*B_127107).Basetypematch;
Copyidtable_56799(&(*A_127106).Bindings, (*B_127107).Bindings);
}
N_NIMCALL(NI, Cmpcandidates_127109)(TY127007* A_127111, TY127007* B_127112) {
NI Result_127113;
Result_127113 = 0;
Result_127113 = (NI32)((*A_127111).Exactmatches - (*B_127112).Exactmatches);
if (!!((Result_127113 == 0))) goto LA2;
goto BeforeRet;
LA2: ;
Result_127113 = (NI32)((*A_127111).Genericmatches - (*B_127112).Genericmatches);
if (!!((Result_127113 == 0))) goto LA5;
goto BeforeRet;
LA5: ;
Result_127113 = (NI32)((*A_127111).Subtypematches - (*B_127112).Subtypematches);
if (!!((Result_127113 == 0))) goto LA8;
goto BeforeRet;
LA8: ;
Result_127113 = (NI32)((*A_127111).Intconvmatches - (*B_127112).Intconvmatches);
if (!!((Result_127113 == 0))) goto LA11;
goto BeforeRet;
LA11: ;
Result_127113 = (NI32)((*A_127111).Convmatches - (*B_127112).Convmatches);
BeforeRet: ;
return Result_127113;
}
N_NIMCALL(TY56526*, Paramtypesmatch_128712)(TY108012* C_128714, TY127007* M_128716, TY56552* F_128717, TY56552* A_128718, TY56526* Arg_128719) {
TY56526* Result_128720;
NIM_BOOL LOC2;
TY127007 X_128741;
TY127007 Y_128742;
TY127007 Z_128743;
NI Best_128747;
NI I_128756;
NI HEX3Atmp_128901;
NI LOC6;
NI Res_128903;
NU8 R_128807;
NI Cmp_128817;
NIM_BOOL LOC22;
NI LOC24;
Result_128720 = 0;
memset((void*)&X_128741, 0, sizeof(X_128741));
memset((void*)&Y_128742, 0, sizeof(Y_128742));
memset((void*)&Z_128743, 0, sizeof(Z_128743));
Result_128720 = NIM_NIL;
LOC2 = (Arg_128719 == NIM_NIL);
if (LOC2) goto LA3;
LOC2 = !(((*Arg_128719).Kind == ((NU8) 46)));
LA3: ;
if (!LOC2) goto LA4;
Result_128720 = Paramtypesmatchaux_128566(C_128714, M_128716, F_128717, A_128718, Arg_128719);
goto LA1;
LA4: ;
genericReset((void*)&X_128741, NTI127007);
genericReset((void*)&Y_128742, NTI127007);
genericReset((void*)&Z_128743, NTI127007);
Initcandidate_127035(&X_128741, (*M_128716).Callee);
Initcandidate_127035(&Y_128742, (*M_128716).Callee);
Initcandidate_127035(&Z_128743, (*M_128716).Callee);
X_128741.Calleesym = (*M_128716).Calleesym;
Y_128742.Calleesym = (*M_128716).Calleesym;
Z_128743.Calleesym = (*M_128716).Calleesym;
Best_128747 = 0;
Best_128747 = -1;
I_128756 = 0;
HEX3Atmp_128901 = 0;
LOC6 = Sonslen_56804(Arg_128719);
HEX3Atmp_128901 = (NI32)(LOC6 - 1);
Res_128903 = 0;
Res_128903 = 0;
while (1) {
if (!(Res_128903 <= HEX3Atmp_128901)) goto LA7;
I_128756 = Res_128903;
if (!((11264 &(1<<(((*(*(*Arg_128719).KindU.S6.Sons->data[I_128756]).KindU.S4.Sym).Kind)&31)))!=0)) goto LA9;
Copycandidate_127103(&Z_128743, &(*M_128716));
R_128807 = 0;
R_128807 = Typerel_127303(&Z_128743.Bindings, F_128717, (*(*Arg_128719).KindU.S6.Sons->data[I_128756]).Typ);
if (!!((R_128807 == ((NU8) 0)))) goto LA12;
switch (X_128741.State) {
case ((NU8) 0):
case ((NU8) 2):
genericAssign((void*)&X_128741, (void*)&Z_128743, NTI127007);
Best_128747 = I_128756;
X_128741.State = ((NU8) 1);
break;
case ((NU8) 1):
Cmp_128817 = 0;
Cmp_128817 = Cmpcandidates_127109(&X_128741, &Z_128743);
if (!(Cmp_128817 < 0)) goto LA15;
Best_128747 = I_128756;
genericAssign((void*)&X_128741, (void*)&Z_128743, NTI127007);
goto LA14;
LA15: ;
if (!(Cmp_128817 == 0)) goto LA17;
genericAssign((void*)&Y_128742, (void*)&Z_128743, NTI127007);
goto LA14;
LA17: ;
LA14: ;
break;
}
LA12: ;
LA9: ;
Res_128903 += 1;
} LA7: ;
if (!(X_128741.State == ((NU8) 0))) goto LA20;
Result_128720 = NIM_NIL;
goto LA19;
LA20: ;
LOC22 = (Y_128742.State == ((NU8) 1));
if (!(LOC22)) goto LA23;
LOC24 = Cmpcandidates_127109(&X_128741, &Y_128742);
LOC22 = (LOC24 == 0);
LA23: ;
if (!LOC22) goto LA25;
if (!!((X_128741.State == ((NU8) 1)))) goto LA28;
Internalerror_49208((*Arg_128719).Info, ((NimStringDesc*) &TMP198049));
LA28: ;
Result_128720 = NIM_NIL;
goto LA19;
LA25: ;
Markused_108403(Arg_128719, (*(*Arg_128719).KindU.S6.Sons->data[Best_128747]).KindU.S4.Sym);
Result_128720 = Paramtypesmatchaux_128566(C_128714, M_128716, F_128717, (*(*Arg_128719).KindU.S6.Sons->data[Best_128747]).Typ, (*Arg_128719).KindU.S6.Sons->data[Best_128747]);
LA19: ;
LA1: ;
return Result_128720;
}
N_NIMCALL(NIM_BOOL, Argtypematches_128914)(TY108012* C_128916, TY56552* F_128917, TY56552* A_128918) {
NIM_BOOL Result_128919;
TY127007 M_128920;
TY56526* LOC1;
memset((void*)&M_128920, 0, sizeof(M_128920));
Result_128919 = 0;
genericReset((void*)&M_128920, NTI127007);
Initcandidate_127035(&M_128920, F_128917);
LOC1 = 0;
LOC1 = Paramtypesmatch_128712(C_128916, &M_128920, F_128917, A_128918, Emptynode_56858);
Result_128919 = !((LOC1 == NIM_NIL));
return Result_128919;
}
static N_INLINE(TY56526*, HEX5BHEX5D_58137)(TY56526* N_58139, NI I_58140) {
TY56526* Result_58141;
Result_58141 = 0;
Result_58141 = NIM_NIL;
Result_58141 = (*N_58139).KindU.S6.Sons->data[I_58140];
return Result_58141;
}
N_NIMCALL(void, Initcandidate_127041)(TY127007* C_127044, TY56548* Callee_127045, TY56526* Binding_127046) {
TY56526* Typeparams_127059;
NI I_127085;
NI HEX3Atmp_127100;
NI LOC4;
NI LOC5;
NI Res_127102;
TY56552* Formaltypeparam_127098;
TY56526* LOC7;
Typeparams_127059 = 0;
Formaltypeparam_127098 = 0;
Initcandidateaux_127030(C_127044, (*Callee_127045).Typ);
unsureAsgnRef((void**) &(*C_127044).Calleesym, Callee_127045);
Initidtable_56755(&(*C_127044).Bindings);
if (!!((Binding_127046 == NIM_NIL))) goto LA2;
Typeparams_127059 = NIM_NIL;
Typeparams_127059 = HEX5BHEX5D_58137((*Callee_127045).Ast, 1);
I_127085 = 0;
HEX3Atmp_127100 = 0;
LOC4 = Sonslen_56804(Typeparams_127059);
LOC5 = Sonslen_56804(Binding_127046);
HEX3Atmp_127100 = ((LOC4 <= (NI32)(LOC5 - 1)) ? LOC4 : (NI32)(LOC5 - 1));
Res_127102 = 0;
Res_127102 = 1;
while (1) {
if (!(Res_127102 <= HEX3Atmp_127100)) goto LA6;
I_127085 = Res_127102;
Formaltypeparam_127098 = NIM_NIL;
Formaltypeparam_127098 = (*(*Typeparams_127059).KindU.S6.Sons->data[(NI32)(I_127085 - 1)]).Typ;
LOC7 = 0;
LOC7 = HEX5BHEX5D_58137(Binding_127046, I_127085);
Idtableput_61166(&(*C_127044).Bindings, &Formaltypeparam_127098->Sup, &(*LOC7).Typ->Sup.Sup);
Res_127102 += 1;
} LA6: ;
LA2: ;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3221(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3226(&(*C_13222).Refcount, 8);
if (!((NU32)(LOC9) < (NU32)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(void, Setson_128934)(TY56526* Father_128936, NI At_128937, TY56526* Son_128938) {
NI LOC2;
LOC2 = Sonslen_56804(Father_128936);
if (!(LOC2 <= At_128937)) goto LA3;
(*Father_128936).KindU.S6.Sons = (TY56520*) setLengthSeq(&((*Father_128936).KindU.S6.Sons)->Sup, sizeof(TY56526*), (NI32)(At_128937 + 1));
LA3: ;
asgnRefNoCycle((void**) &(*Father_128936).KindU.S6.Sons->data[At_128937], Son_128938);
}
N_NIMCALL(void, Matchesaux_128977)(TY108012* C_128979, TY56526* N_128980, TY127007* M_128982, TY56895* Marker_128984) {
NI F_128985;
NI A_128986;
NI Formallen_128987;
TY56526* LOC1;
TY56526* Container_129000;
TY56548* Formal_129001;
NI LOC3;
NIM_BOOL LOC14;
TY56526* Arg_129167;
TY56552* LOC33;
TY56552* LOC36;
TY56526* LOC37;
TY56526* LOC38;
TY56526* LOC39;
TY56526* Arg_129297;
NIM_BOOL LOC43;
NIM_BOOL LOC44;
NIM_BOOL LOC53;
TY56526* Arg_129413;
TY56526* LOC62;
Container_129000 = 0;
Formal_129001 = 0;
Arg_129167 = 0;
Arg_129297 = 0;
Arg_129413 = 0;
F_128985 = 0;
F_128985 = 1;
A_128986 = 0;
A_128986 = 1;
(*M_128982).State = ((NU8) 1);
unsureAsgnRef((void**) &(*M_128982).Call, Newnodei_56738(((NU8) 21), (*N_128980).Info));
asgnRef((void**) &(*(*M_128982).Call).Typ, Base_98021((*M_128982).Callee));
Formallen_128987 = 0;
Formallen_128987 = Sonslen_56804((*(*M_128982).Callee).N);
LOC1 = 0;
LOC1 = Copytree_56852((*N_128980).KindU.S6.Sons->data[0]);
Addson_56824((*M_128982).Call, LOC1);
Container_129000 = NIM_NIL;
Container_129000 = NIM_NIL;
Formal_129001 = NIM_NIL;
Formal_129001 = NIM_NIL;
while (1) {
LOC3 = Sonslen_56804(N_128980);
if (!(A_128986 < LOC3)) goto LA2;
if (!((*(*N_128980).KindU.S6.Sons->data[A_128986]).Kind == ((NU8) 23))) goto LA5;
if (!!(((*(*(*N_128980).KindU.S6.Sons->data[A_128986]).KindU.S6.Sons->data[0]).Kind == ((NU8) 2)))) goto LA8;
Localerror_49193((*(*N_128980).KindU.S6.Sons->data[A_128986]).Info, ((NU8) 155), ((NimStringDesc*) &TMP198050));
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA8: ;
Formal_129001 = Getsymfromlist_61189((*(*M_128982).Callee).N, (*(*(*N_128980).KindU.S6.Sons->data[A_128986]).KindU.S6.Sons->data[0]).KindU.S5.Ident, 1);
if (!(Formal_129001 == NIM_NIL)) goto LA11;
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA11: ;
LOC14 = Intsetcontainsorincl_56923(Marker_128984, (*Formal_129001).Position);
if (!LOC14) goto LA15;
Localerror_49193((*(*N_128980).KindU.S6.Sons->data[A_128986]).Info, ((NU8) 139), (*(*Formal_129001).Name).S);
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA15: ;
(*M_128982).Basetypematch = NIM_FALSE;
Arg_129167 = NIM_NIL;
Arg_129167 = Paramtypesmatch_128712(C_128979, M_128982, (*Formal_129001).Typ, (*(*N_128980).KindU.S6.Sons->data[A_128986]).Typ, (*(*N_128980).KindU.S6.Sons->data[A_128986]).KindU.S6.Sons->data[1]);
if (!(Arg_129167 == NIM_NIL)) goto LA18;
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA18: ;
if (!(*M_128982).Basetypematch) goto LA21;
Container_129000 = Newnodei_56738(((NU8) 32), (*(*N_128980).KindU.S6.Sons->data[A_128986]).Info);
Addson_56824(Container_129000, Arg_129167);
Setson_128934((*M_128982).Call, (NI32)((*Formal_129001).Position + 1), Container_129000);
if (!!((F_128985 == (NI32)(Formallen_128987 - 1)))) goto LA24;
Container_129000 = NIM_NIL;
LA24: ;
goto LA20;
LA21: ;
Setson_128934((*M_128982).Call, (NI32)((*Formal_129001).Position + 1), Arg_129167);
LA20: ;
goto LA4;
LA5: ;
if (!(Formallen_128987 <= F_128985)) goto LA27;
if (!(((*(*M_128982).Callee).Flags &(1<<((((NU8) 0))&7)))!=0)) goto LA30;
LOC33 = 0;
LOC33 = Skiptypes_98087((*(*N_128980).KindU.S6.Sons->data[A_128986]).Typ, 8431616);
if (!((*LOC33).Kind == ((NU8) 28))) goto LA34;
LOC36 = 0;
LOC36 = Getsystype_103008(((NU8) 29));
LOC37 = 0;
LOC37 = Copytree_56852((*N_128980).KindU.S6.Sons->data[A_128986]);
LOC38 = 0;
LOC38 = Implicitconv_128481(((NU8) 47), LOC36, LOC37, &(*M_128982), C_128979);
Addson_56824((*M_128982).Call, LOC38);
goto LA32;
LA34: ;
LOC39 = 0;
LOC39 = Copytree_56852((*N_128980).KindU.S6.Sons->data[A_128986]);
Addson_56824((*M_128982).Call, LOC39);
LA32: ;
goto LA29;
LA30: ;
if (!!((Formal_129001 == NIM_NIL))) goto LA40;
(*M_128982).Basetypematch = NIM_FALSE;
Arg_129297 = NIM_NIL;
Arg_129297 = Paramtypesmatch_128712(C_128979, M_128982, (*Formal_129001).Typ, (*(*N_128980).KindU.S6.Sons->data[A_128986]).Typ, (*N_128980).KindU.S6.Sons->data[A_128986]);
LOC44 = !((Arg_129297 == NIM_NIL));
if (!(LOC44)) goto LA45;
LOC44 = (*M_128982).Basetypematch;
LA45: ;
LOC43 = LOC44;
if (!(LOC43)) goto LA46;
LOC43 = !((Container_129000 == NIM_NIL));
LA46: ;
if (!LOC43) goto LA47;
Addson_56824(Container_129000, Arg_129297);
goto LA42;
LA47: ;
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA42: ;
goto LA29;
LA40: ;
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA29: ;
goto LA26;
LA27: ;
if (!!(((*(*(*(*M_128982).Callee).N).KindU.S6.Sons->data[F_128985]).Kind == ((NU8) 3)))) goto LA50;
Internalerror_49208((*(*N_128980).KindU.S6.Sons->data[A_128986]).Info, ((NimStringDesc*) &TMP198069));
LA50: ;
Formal_129001 = (*(*(*(*M_128982).Callee).N).KindU.S6.Sons->data[F_128985]).KindU.S4.Sym;
LOC53 = Intsetcontainsorincl_56923(Marker_128984, (*Formal_129001).Position);
if (!LOC53) goto LA54;
Localerror_49193((*(*N_128980).KindU.S6.Sons->data[A_128986]).Info, ((NU8) 139), (*(*Formal_129001).Name).S);
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA54: ;
(*M_128982).Basetypematch = NIM_FALSE;
Arg_129413 = NIM_NIL;
Arg_129413 = Paramtypesmatch_128712(C_128979, M_128982, (*Formal_129001).Typ, (*(*N_128980).KindU.S6.Sons->data[A_128986]).Typ, (*N_128980).KindU.S6.Sons->data[A_128986]);
if (!(Arg_129413 == NIM_NIL)) goto LA57;
(*M_128982).State = ((NU8) 2);
goto BeforeRet;
LA57: ;
if (!(*M_128982).Basetypematch) goto LA60;
Container_129000 = Newnodei_56738(((NU8) 32), (*(*N_128980).KindU.S6.Sons->data[A_128986]).Info);
Addson_56824(Container_129000, Arg_129413);
LOC62 = 0;
LOC62 = Implicitconv_128481(((NU8) 47), (*Formal_129001).Typ, Container_129000, &(*M_128982), C_128979);
Setson_128934((*M_128982).Call, (NI32)((*Formal_129001).Position + 1), LOC62);
if (!!((F_128985 == (NI32)(Formallen_128987 - 1)))) goto LA64;
Container_129000 = NIM_NIL;
LA64: ;
goto LA59;
LA60: ;
Setson_128934((*M_128982).Call, (NI32)((*Formal_129001).Position + 1), Arg_129413);
LA59: ;
LA26: ;
LA4: ;
A_128986 += 1;
F_128985 += 1;
} LA2: ;
BeforeRet: ;
}
N_NIMCALL(void, Partialmatch_129474)(TY108012* C_129476, TY56526* N_129477, TY127007* M_129479) {
TY56895 Marker_129480;
memset((void*)&Marker_129480, 0, sizeof(Marker_129480));
genericReset((void*)&Marker_129480, NTI56895);
Intsetinit_56919(&Marker_129480);
Matchesaux_128977(C_129476, N_129477, M_129479, &Marker_129480);
}
N_NIMCALL(void, Matches_129483)(TY108012* C_129485, TY56526* N_129486, TY127007* M_129488) {
TY56895 Marker_129489;
NI F_129501;
NI LOC5;
TY56548* Formal_129530;
NIM_BOOL LOC7;
TY56526* Container_129552;
TY56526* LOC16;
TY56526* LOC17;
memset((void*)&Marker_129489, 0, sizeof(Marker_129489));
Formal_129530 = 0;
Container_129552 = 0;
genericReset((void*)&Marker_129489, NTI56895);
Intsetinit_56919(&Marker_129489);
Matchesaux_128977(C_129485, N_129486, M_129488, &Marker_129489);
if (!((*M_129488).State == ((NU8) 2))) goto LA2;
goto BeforeRet;
LA2: ;
F_129501 = 0;
F_129501 = 1;
while (1) {
LOC5 = Sonslen_56804((*(*M_129488).Callee).N);
if (!(F_129501 < LOC5)) goto LA4;
Formal_129530 = NIM_NIL;
Formal_129530 = (*(*(*(*M_129488).Callee).N).KindU.S6.Sons->data[F_129501]).KindU.S4.Sym;
LOC7 = Intsetcontainsorincl_56923(&Marker_129489, (*Formal_129530).Position);
if (!!(LOC7)) goto LA8;
if (!((*Formal_129530).Ast == NIM_NIL)) goto LA11;
if (!((*(*Formal_129530).Typ).Kind == ((NU8) 27))) goto LA14;
Container_129552 = NIM_NIL;
Container_129552 = Newnodei_56738(((NU8) 32), (*N_129486).Info);
LOC16 = 0;
LOC16 = Implicitconv_128481(((NU8) 47), (*Formal_129530).Typ, Container_129552, &(*M_129488), C_129485);
Addson_56824((*M_129488).Call, LOC16);
goto LA13;
LA14: ;
(*M_129488).State = ((NU8) 2);
goto LA4;
LA13: ;
goto LA10;
LA11: ;
LOC17 = 0;
LOC17 = Copytree_56852((*Formal_129530).Ast);
Setson_128934((*M_129488).Call, (NI32)((*Formal_129530).Position + 1), LOC17);
LA10: ;
LA8: ;
F_129501 += 1;
} LA4: ;
BeforeRet: ;
}
N_NIMCALL(NU8, Cmptypes_128444)(TY56552* F_128446, TY56552* A_128447) {
NU8 Result_128448;
TY56564 Mapping_128449;
memset((void*)&Mapping_128449, 0, sizeof(Mapping_128449));
Result_128448 = 0;
genericReset((void*)&Mapping_128449, NTI56564);
Initidtable_56755(&Mapping_128449);
Result_128448 = Typerel_127303(&Mapping_128449, F_128446, A_128447);
return Result_128448;
}
N_NIMCALL(TY56526*, Indextypesmatch_128904)(TY108012* C_128906, TY56552* F_128907, TY56552* A_128908, TY56526* Arg_128909) {
TY56526* Result_128910;
TY127007 M_128911;
Result_128910 = 0;
memset((void*)&M_128911, 0, sizeof(M_128911));
Result_128910 = NIM_NIL;
genericReset((void*)&M_128911, NTI127007);
Initcandidate_127035(&M_128911, F_128907);
Result_128910 = Paramtypesmatch_128712(C_128906, &M_128911, F_128907, A_128908, Arg_128909);
return Result_128910;
}
N_NIMCALL(NimStringDesc*, Getnotfounderror_127175)(TY108012* C_127177, TY56526* N_127178) {
NimStringDesc* Result_127179;
NI I_127188;
NI HEX3Atmp_127300;
NI LOC1;
NI Res_127302;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NI LOC9;
NimStringDesc* Candidates_127248;
TY109004 O_127249;
TY56548* Sym_127263;
NimStringDesc* LOC16;
NimStringDesc* LOC20;
NimStringDesc* LOC21;
Result_127179 = 0;
Candidates_127248 = 0;
memset((void*)&O_127249, 0, sizeof(O_127249));
Sym_127263 = 0;
Result_127179 = NIM_NIL;
Result_127179 = Msgkindtostring_48832(((NU8) 125));
I_127188 = 0;
HEX3Atmp_127300 = 0;
LOC1 = Sonslen_56804(N_127178);
HEX3Atmp_127300 = (NI32)(LOC1 - 1);
Res_127302 = 0;
Res_127302 = 1;
while (1) {
if (!(Res_127302 <= HEX3Atmp_127300)) goto LA2;
I_127188 = Res_127302;
if (!((*(*N_127178).KindU.S6.Sons->data[I_127188]).Kind == ((NU8) 23))) goto LA4;
LOC6 = 0;
LOC6 = Rendertree_86042((*(*N_127178).KindU.S6.Sons->data[I_127188]).KindU.S6.Sons->data[0], 0);
Result_127179 = resizeString(Result_127179, LOC6->Sup.len + 0);
appendString(Result_127179, LOC6);
Result_127179 = resizeString(Result_127179, 2);
appendString(Result_127179, ((NimStringDesc*) &TMP198248));
LA4: ;
LOC7 = 0;
LOC7 = Typetostring_98014((*(*N_127178).KindU.S6.Sons->data[I_127188]).Typ, ((NU8) 0));
Result_127179 = resizeString(Result_127179, LOC7->Sup.len + 0);
appendString(Result_127179, LOC7);
LOC9 = Sonslen_56804(N_127178);
if (!!((I_127188 == (NI32)(LOC9 - 1)))) goto LA10;
Result_127179 = resizeString(Result_127179, 2);
appendString(Result_127179, ((NimStringDesc*) &TMP198249));
LA10: ;
Res_127302 += 1;
} LA2: ;
Result_127179 = addChar(Result_127179, 41);
Candidates_127248 = NIM_NIL;
Candidates_127248 = copyString(((NimStringDesc*) &TMP198050));
genericReset((void*)&O_127249, NTI109004);
Sym_127263 = NIM_NIL;
Sym_127263 = Initoverloaditer_109745(&O_127249, C_127177, (*N_127178).KindU.S6.Sons->data[0]);
while (1) {
if (!!((Sym_127263 == NIM_NIL))) goto LA12;
if (!((15360 &(1<<(((*Sym_127263).Kind)&31)))!=0)) goto LA14;
LOC16 = 0;
LOC16 = Getprocheader_98018(Sym_127263);
Candidates_127248 = resizeString(Candidates_127248, LOC16->Sup.len + 0);
appendString(Candidates_127248, LOC16);
Candidates_127248 = resizeString(Candidates_127248, 1);
appendString(Candidates_127248, ((NimStringDesc*) &TMP198250));
LA14: ;
Sym_127263 = Nextoverloaditer_110074(&O_127249, C_127177, (*N_127178).KindU.S6.Sons->data[0]);
} LA12: ;
if (!!(((Candidates_127248) && (Candidates_127248)->Sup.len == 0))) goto LA18;
LOC20 = 0;
LOC21 = 0;
LOC21 = Msgkindtostring_48832(((NU8) 126));
LOC20 = rawNewString(LOC21->Sup.len + Candidates_127248->Sup.len + 2);
appendString(LOC20, ((NimStringDesc*) &TMP198250));
appendString(LOC20, LOC21);
appendString(LOC20, ((NimStringDesc*) &TMP198250));
appendString(LOC20, Candidates_127248);
Result_127179 = resizeString(Result_127179, LOC20->Sup.len + 0);
appendString(Result_127179, LOC20);
LA18: ;
return Result_127179;
}
N_NOINLINE(void, sigmatchInit)(void) {
}

