/* Generated by Nimrod Compiler v0.8.10 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10802 TY10802;
typedef struct TNimType TNimType;
typedef struct TY10818 TY10818;
typedef struct TY11190 TY11190;
typedef struct TY10814 TY10814;
typedef struct TY10810 TY10810;
typedef struct TY11188 TY11188;
typedef struct TY55525 TY55525;
typedef struct TY154017 TY154017;
typedef struct TNimNode TNimNode;
typedef struct TY52008 TY52008;
typedef struct TY154034 TY154034;
typedef struct TY154011 TY154011;
typedef struct TY146077 TY146077;
typedef struct TY146075 TY146075;
typedef struct TY55551 TY55551;
typedef struct TY47532 TY47532;
typedef struct TY55547 TY55547;
typedef struct TY54011 TY54011;
typedef struct TY55519 TY55519;
typedef struct TY151007 TY151007;
typedef struct TNimObject TNimObject;
typedef struct TY84016 TY84016;
typedef struct TY84014 TY84014;
typedef struct TY84012 TY84012;
typedef struct TY54005 TY54005;
typedef struct TY55529 TY55529;
typedef struct TY55527 TY55527;
typedef struct TY55539 TY55539;
typedef struct TY55543 TY55543;
typedef struct TY55549 TY55549;
typedef struct TY43013 TY43013;
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY10802 {
NI Refcount;
TNimType* Typ;
};
struct TY10818 {
NI Len;
NI Cap;
TY10802** D;
};
struct TY10814 {
NI Counter;
NI Max;
TY10810* Head;
TY10810** Data;
};
struct TY11188 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY11190 {
TY10818 Zct;
TY10818 Decstack;
TY10814 Cycleroots;
TY10818 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY11188 Stat;
};
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TY154011 {
TY146077* N;
TY52008* Refname;
TY52008* Header;
};
typedef TY52008* TY154013[21];
typedef TY52008* TY154044[5];
struct TY154017 {
NimStringDesc* Filename;
NimStringDesc* Basedir;
TY52008* Moddesc;
TY52008* Dependson;
NI Id;
NI Splitafter;
TY154034* Tocpart;
NIM_BOOL Hastoc;
TY154013 Toc;
TY154013 Section;
TY146077* Indexfile;
TY146077* Theindex;
NimStringDesc* Indexvalfilename;
NI Indent;
NI Verbatim;
TY154044 Meta;
};
struct TY146077 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
TY146075* Sons;
};
struct TY47532 {
NI16 Line;
NI16 Col;
int Fileindex;
};
struct TY55525 {
TY55551* Typ;
NimStringDesc* Comment;
TY47532 Info;
NU8 Flags;
NU8 Kind;
union {
struct {NI64 Intval;
} S1;
struct {NF64 Floatval;
} S2;
struct {NimStringDesc* Strval;
} S3;
struct {TY55547* Sym;
} S4;
struct {TY54011* Ident;
} S5;
struct {TY55519* Sons;
} S6;
} KindU;
};
typedef TY52008* TY52446[1];
typedef TY52008* TY161585[4];
typedef TY52008* TY176060[2];
struct TNimObject {
TNimType* m_type;
};
struct TY151007 {
  TNimObject Sup;
NU8 Kind;
NI Start;
NI Length;
NCSTRING Buf;
NI Pos;
NU8 State;
};
typedef NimStringDesc* TY151060[33];
struct TY84012 {
NU8 Kind;
NI16 Length;
};
struct TY84016 {
NI Indent;
NI Linelen;
NI Pos;
NI Idx;
TY84014* Tokens;
NimStringDesc* Buf;
NI Pendingnl;
TY55519* Comstack;
NU8 Flags;
};
struct TY54005 {
  TNimObject Sup;
NI Id;
};
struct TY54011 {
  TY54005 Sup;
NimStringDesc* S;
TY54011* Next;
NI H;
};
struct TY55529 {
TNimType* m_type;
NI Counter;
TY55527* Data;
};
struct TY55539 {
NU8 K;
NU8 S;
NU8 Flags;
TY55551* T;
TY52008* R;
NI A;
};
struct TY55547 {
  TY54005 Sup;
NU8 Kind;
NU8 Magic;
TY55551* Typ;
TY54011* Name;
TY47532 Info;
TY55547* Owner;
NU32 Flags;
TY55529 Tab;
TY55525* Ast;
NU32 Options;
NI Position;
NI Offset;
TY55539 Loc;
TY55543* Annex;
};
typedef NimStringDesc* TY76146[109];
typedef NimStringDesc* TY48018[4];
typedef NimStringDesc* TY47865[1];
typedef NimStringDesc* TY156604[6];
typedef TY52008* TY162326[6];
typedef NimStringDesc* TY156623[8];
typedef TY52008* TY163005[8];
typedef NIM_CHAR TY155336[9];
typedef TY52008* TY160050[3];
typedef NI TY8814[8];
struct TY10810 {
TY10810* Next;
NI Key;
TY8814 Bits;
};
struct TY52008 {
  TNimObject Sup;
TY52008* Left;
TY52008* Right;
NI Length;
NimStringDesc* Data;
};
struct TY55551 {
  TY54005 Sup;
NU8 Kind;
TY55549* Sons;
TY55525* N;
NU8 Flags;
NU8 Callconv;
TY55547* Owner;
TY55547* Sym;
NI64 Size;
NI Align;
NI Containerid;
TY55539 Loc;
};
struct TY43013 {
  TNimObject Sup;
TY43013* Prev;
TY43013* Next;
};
struct TY55543 {
  TY43013 Sup;
NU8 Kind;
NIM_BOOL Generated;
TY52008* Name;
TY55525* Path;
};
struct TY154034 {
  TGenericSeq Sup;
  TY154011 data[SEQ_DECL_SIZE];
};
struct TY146075 {
  TGenericSeq Sup;
  TY146077* data[SEQ_DECL_SIZE];
};
struct TY55519 {
  TGenericSeq Sup;
  TY55525* data[SEQ_DECL_SIZE];
};
struct TY84014 {
  TGenericSeq Sup;
  TY84012 data[SEQ_DECL_SIZE];
};
struct TY55527 {
  TGenericSeq Sup;
  TY55547* data[SEQ_DECL_SIZE];
};
struct TY55549 {
  TGenericSeq Sup;
  TY55551* data[SEQ_DECL_SIZE];
};
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219);
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603);
N_NOINLINE(void, Addzct_11601)(TY10818* S_11604, TY10802* C_11605);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_18708);
N_NIMCALL(TY55525*, Parsefile_91031)(NimStringDesc* Filename_91033);
N_NIMCALL(NimStringDesc*, nosaddFileExt)(NimStringDesc* Filename_39044, NimStringDesc* Ext_39045);
N_NIMCALL(TY154017*, Newdocumentor_154162)(NimStringDesc* Filename_154164);
N_NIMCALL(void*, newObj)(TNimType* Typ_13707, NI Size_13708);
N_NIMCALL(void*, newSeq)(TNimType* Typ_14204, NI Len_14205);
N_NIMCALL(NimStringDesc*, Getconfigvar_46133)(NimStringDesc* Key_46135);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* S_25504);
N_NIMCALL(void, Initindexfile_154132)(TY154017* D_154134);
N_NIMCALL(NimStringDesc*, nosChangeFileExt)(NimStringDesc* Filename_39020, NimStringDesc* Ext_39021);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* Path_38785);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* Filename_37003);
N_NIMCALL(TY146077*, Rstparse_146082)(NimStringDesc* Text_146084, NIM_BOOL Skippounds_146085, NimStringDesc* Filename_146086, NI Line_146087, NI Column_146088, NIM_BOOL* Hastoc_146090);
N_NIMCALL(NimStringDesc*, Readfile_3647)(NimStringDesc* Filename_3649);
N_NIMCALL(TY146077*, Findindexnode_154048)(TY146077* N_154050);
N_NIMCALL(TY146077*, Newrstnode_146094)(NU8 Kind_146096);
N_NIMCALL(NI, Rsonslen_146091)(TY146077* N_146093);
N_NIMCALL(void, Rawmessage_47553)(NU8 Msg_47555, NimStringDesc* Arg_47556);
N_NIMCALL(void, Clearindex_146126)(TY146077* Index_146128, NimStringDesc* Filename_146129);
N_NIMCALL(void, Addson_146101)(TY146077* Father_146103, TY146077* Son_146104);
N_NIMCALL(TY146077*, Newrstnode_146097)(NU8 Kind_146099, NimStringDesc* S_146100);
N_NIMCALL(void, Generatedoc_156108)(TY154017* D_156110, TY55525* N_156111);
N_NIMCALL(void, App_52031)(TY52008** A_52034, TY52008* B_52035);
N_NIMCALL(TY52008*, Gencomment_154718)(TY154017* D_154720, TY55525* N_154721);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* S_25769, NimStringDesc* Prefix_25770);
N_NIMCALL(TY52008*, Renderrsttoout_154612)(TY154017* D_154614, TY146077* N_154615);
N_NIMCALL(TY52008*, Renderaux_154616)(TY154017* D_154618, TY146077* N_154619, NimStringDesc* Outer_154620);
N_NIMCALL(TY52008*, Ropef_52069)(NimStringDesc* Frmt_52071, TY52008** Args_52073, NI Args_52073Len0);
N_NIMCALL(TY52008*, Renderheadline_155180)(TY154017* D_155182, TY146077* N_155183);
N_NIMCALL(TY52008*, Torope_52046)(NimStringDesc* S_52048);
N_NIMCALL(NimStringDesc*, Rstnodetorefname_146105)(TY146077* N_146107);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* Seq_19003, NI Elemsize_19004, NI Newlen_19005);
N_NIMCALL(TY52008*, Dispf_154579)(NimStringDesc* Xml_154581, NimStringDesc* Tex_154582, TY52008** Args_154584, NI Args_154584Len0);
N_NIMCALL(TY52008*, Torope_52052)(NI64 I_52054);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18809, NIM_CHAR C_18810);
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_18687);
N_NIMCALL(TY52008*, Renderoverline_155250)(TY154017* D_155252, TY146077* N_155253);
N_NIMCALL(NimStringDesc*, Disp_154565)(NimStringDesc* Xml_154567, NimStringDesc* Tex_154568);
N_NIMCALL(TY52008*, Renderfield_155873)(TY154017* D_155875, TY146077* N_155876);
N_NIMCALL(NimStringDesc*, Addnodes_146108)(TY146077* N_146110);
N_NIMCALL(NimStringDesc*, Esc_154505)(NimStringDesc* S_154507, NI Splitafter_154508);
N_NIMCALL(NI, Nextsplitpoint_154455)(NimStringDesc* S_154457, NI Start_154458);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18647, NimStringDesc* B_18648);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_18782, NI Addlen_18783);
N_NIMCALL(void, Escchar_154441)(NimStringDesc** Dest_154444, NIM_CHAR C_154445);
N_NIMCALL(void, Addxmlchar_154426)(NimStringDesc** Dest_154429, NIM_CHAR C_154430);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(void, Addtexchar_154436)(NimStringDesc** Dest_154439, NIM_CHAR C_154440);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* S_24981, NIM_BOOL Leading_24982, NIM_BOOL Trailing_24983);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_24638, NimStringDesc* B_24639);
N_NIMCALL(void, Internalerror_47571)(NimStringDesc* Errmsg_47573);
N_NIMCALL(NimStringDesc*, Texcolumns_155855)(TY146077* N_155857);
N_NIMCALL(void, Dispa_154595)(TY52008** Dest_154598, NimStringDesc* Xml_154599, NimStringDesc* Tex_154600, TY52008** Args_154602, NI Args_154602Len0);
N_NIMCALL(void, Appf_52074)(TY52008** C_52077, NimStringDesc* Frmt_52078, TY52008** Args_52080, NI Args_52080Len0);
N_NIMCALL(TY146077*, Lastson_146667)(TY146077* N_146669);
N_NIMCALL(TY52008*, Renderimage_155713)(TY154017* D_155715, TY146077* N_155716);
N_NIMCALL(NimStringDesc*, Getfieldvalue_146111)(TY146077* N_146113, NimStringDesc* Fieldname_146114);
N_NIMCALL(TY52008*, Fieldaux_155709)(NimStringDesc* S_155711);
N_NIMCALL(NimStringDesc*, Getargument_146115)(TY146077* N_146117);
N_NIMCALL(TY52008*, Rendercodeblock_155767)(TY154017* D_155769, TY146077* N_155770);
N_NIMCALL(NU8, Getsourcelanguage_151102)(NimStringDesc* Name_151104);
N_NIMCALL(void, Initgeneraltokenizer_151105)(TY151007* G_151108, NimStringDesc* Buf_151109);
N_NIMCALL(void, Getnexttoken_151114)(TY151007* G_151117, NU8 Lang_151118);
N_NIMCALL(void, App_52036)(TY52008** A_52039, NimStringDesc* B_52040);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1928, NI First_1929, NI Last_1930);
N_NIMCALL(void, Deinitgeneraltokenizer_151110)(TY151007* G_151113);
N_NIMCALL(TY52008*, Rendercontainer_155830)(TY154017* D_155832, TY146077* N_155833);
N_NIMCALL(TY52008*, Renderindexterm_154677)(TY154017* D_154679, TY146077* N_154680);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI X_19403);
N_NIMCALL(void, Setindexpair_146118)(TY146077* Index_146120, TY146077* Key_146121, TY146077* Val_146122);
N_NIMCALL(NimStringDesc*, Tofilename_47579)(TY47532 Info_47581);
N_NIMCALL(NI, Tolinenumber_47585)(TY47532 Info_47587);
N_NIMCALL(NI, Tocolumn_47582)(TY47532 Info_47584);
N_NIMCALL(void, Genitem_155074)(TY154017* D_155076, TY55525* N_155077, TY55525* Namenode_155078, NU8 K_155079);
N_NIMCALL(NIM_BOOL, Isvisible_154801)(TY55525* N_154803);
N_NIMCALL(NI, Sonslen_55803)(TY55525* N_55805);
N_NIMCALL(NimStringDesc*, Getname_154929)(TY55525* N_154931, NI Splitafter_154932);
N_NIMCALL(void, Internalerror_47567)(TY47532 Info_47569, NimStringDesc* Errmsg_47570);
N_NIMCALL(TY52008*, Genreccomment_154725)(TY154017* D_154727, TY55525* N_154728);
N_NIMCALL(void, Inittokrender_84048)(TY84016* R_84051, TY55525* N_84052, NU8 Renderflags_84055);
N_NIMCALL(void, Getnexttok_84056)(TY84016* R_84059, NU8* Kind_84061, NimStringDesc** Literal_84063);
N_NIMCALL(TY52008*, Ropeformatnamedvars_154220)(NimStringDesc* Frmt_154222, NimStringDesc** Varnames_154224, NI Varnames_154224Len0, TY52008** Varvalues_154226, NI Varvalues_154226Len0);
N_NIMCALL(NI, Getvaridx_154198)(NimStringDesc** Varnames_154201, NI Varnames_154201Len0, NimStringDesc* Id_154202);
N_NIMCALL(void, Setindexforsourceterm_154641)(TY154017* D_154643, TY146077* Name_154644, NI Id_154645);
N_NIMCALL(TY146077*, Getrstname_155010)(TY55525* N_155012);
N_NIMCALL(TY55525*, Lastson_55809)(TY55525* N_55811);
N_NIMCALL(void, Writerope_52058)(TY52008* Head_52060, NimStringDesc* Filename_52061);
N_NIMCALL(TY52008*, Genoutfile_156511)(TY154017* D_156513);
N_NIMCALL(TY52008*, Rendertocentries_155674)(TY154017* D_155676, NI* J_155678, NI Lvl_155679);
N_NIMCALL(TY52008*, Rendertocentry_155665)(TY154017* D_155667, TY154011* E_155668);
N_NIMCALL(void, Gensection_156447)(TY154017* D_156449, NU8 Kind_156450);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* S_1924, NI First_1925);
N_NIMCALL(NimStringDesc*, reprEnum)(NI E_19779, TNimType* Typ_19780);
N_NIMCALL(NimStringDesc*, ntgetDateStr)(void);
N_NIMCALL(NimStringDesc*, ntgetClockStr)(void);
N_NIMCALL(NimStringDesc*, Getoutfile_46143)(NimStringDesc* Filename_46145, NimStringDesc* Ext_46146);
N_NIMCALL(void, Generateindex_156637)(TY154017* D_156639);
N_NIMCALL(void, Sortindex_146123)(TY146077* A_146125);
N_NIMCALL(TY52008*, Renderrsttorst_155306)(TY154017* D_155308, TY146077* N_155309);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI Count_25750, NIM_CHAR C_25751);
N_NIMCALL(TY52008*, Renderrstsons_155310)(TY154017* D_155312, TY146077* N_155313);
N_NIMCALL(NI, Ropelen_52055)(TY52008* A_52057);
N_NIMCALL(void, Commandrstaux_156667)(NimStringDesc* Filename_156669, NimStringDesc* Outext_156670);
STRING_LITERAL(TMP154047, "<wbr />", 7);
STRING_LITERAL(TMP198089, "nim", 3);
STRING_LITERAL(TMP198096, "split.item.toc", 14);
STRING_LITERAL(TMP198097, "txt", 3);
STRING_LITERAL(TMP198098, "html", 4);
STRING_LITERAL(TMP198166, "Index", 5);
STRING_LITERAL(TMP198167, "##", 2);
STRING_LITERAL(TMP198168, "$1", 2);
STRING_LITERAL(TMP198169, "<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2_toc\">$3</a></h$1>", 63);
STRING_LITERAL(TMP198170, "\\rsth$4{$3}\\label{$2}$n", 23);
STRING_LITERAL(TMP198171, "", 0);
STRING_LITERAL(TMP198172, "<h$1 id=\"$2\">$3</h$1>", 21);
STRING_LITERAL(TMP198173, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP198174, "\\rstov$4{$3}\\label{$2}$n", 24);
STRING_LITERAL(TMP198175, "<hr />\012", 7);
STRING_LITERAL(TMP198176, "\\hrule\012", 7);
STRING_LITERAL(TMP198177, "<p>$1</p>\012", 10);
STRING_LITERAL(TMP198178, "$1$n$n", 6);
STRING_LITERAL(TMP198179, "<ul class=\"simple\">$1</ul>\012", 27);
STRING_LITERAL(TMP198180, "\\begin{itemize}$1\\end{itemize}\012", 31);
STRING_LITERAL(TMP198181, "<li>$1</li>\012", 12);
STRING_LITERAL(TMP198182, "\\item $1\012", 9);
STRING_LITERAL(TMP198183, "<ol class=\"simple\">$1</ol>\012", 27);
STRING_LITERAL(TMP198184, "\\begin{enumerate}$1\\end{enumerate}\012", 35);
STRING_LITERAL(TMP198185, "<dl class=\"docutils\">$1</dl>\012", 29);
STRING_LITERAL(TMP198186, "\\begin{description}$1\\end{description}\012", 39);
STRING_LITERAL(TMP198187, "<dt>$1</dt>\012", 12);
STRING_LITERAL(TMP198188, "\\item[$1] ", 10);
STRING_LITERAL(TMP198189, "<dd>$1</dd>\012", 12);
STRING_LITERAL(TMP198190, "$1\012", 3);
STRING_LITERAL(TMP198191, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP198192, " ", 1);
STRING_LITERAL(TMP198193, "&amp;", 5);
STRING_LITERAL(TMP198194, "&lt;", 4);
STRING_LITERAL(TMP198195, "&gt;", 4);
STRING_LITERAL(TMP198196, "&quot;", 6);
STRING_LITERAL(TMP198197, "\\_", 2);
STRING_LITERAL(TMP198198, "\\symbol{123}", 12);
STRING_LITERAL(TMP198199, "\\symbol{125}", 12);
STRING_LITERAL(TMP198200, "\\symbol{91}", 11);
STRING_LITERAL(TMP198201, "\\symbol{93}", 11);
STRING_LITERAL(TMP198202, "\\symbol{92}", 11);
STRING_LITERAL(TMP198203, "\\$", 2);
STRING_LITERAL(TMP198204, "\\&", 2);
STRING_LITERAL(TMP198205, "\\#", 2);
STRING_LITERAL(TMP198206, "\\%", 2);
STRING_LITERAL(TMP198207, "\\symbol{126}", 12);
STRING_LITERAL(TMP198208, "\\symbol{64}", 11);
STRING_LITERAL(TMP198209, "\\symbol{94}", 11);
STRING_LITERAL(TMP198210, "\\symbol{96}", 11);
STRING_LITERAL(TMP198211, "author", 6);
STRING_LITERAL(TMP198212, "version", 7);
STRING_LITERAL(TMP198213, "<tr>$1</tr>$n", 13);
STRING_LITERAL(TMP198214, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP198215, "\\item[$1:]", 10);
STRING_LITERAL(TMP198216, "<td>$1</td>", 11);
STRING_LITERAL(TMP198217, " $1$n", 5);
STRING_LITERAL(TMP198218, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP198219, "\\begin{description}$n$1\\end{description}\012", 41);
STRING_LITERAL(TMP198220, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP198221, "\\item[$1]", 9);
STRING_LITERAL(TMP198222, "<td align=\"left\">$1</td>$n", 26);
STRING_LITERAL(TMP198223, "renderRstToOut", 14);
STRING_LITERAL(TMP198224, "<pre>$1</pre>$n", 15);
STRING_LITERAL(TMP198225, "\\begin{rstpre}$n$1$n\\end{rstpre}$n", 34);
STRING_LITERAL(TMP198226, "<p>$1</p>", 9);
STRING_LITERAL(TMP198227, "$1<br />", 8);
STRING_LITERAL(TMP198228, "$1\\\\$n", 6);
STRING_LITERAL(TMP198229, "<blockquote><p>$1</p></blockquote>$n", 36);
STRING_LITERAL(TMP198230, "\\begin{quote}$1\\end{quote}$n", 28);
STRING_LITERAL(TMP198231, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP198232, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP198233, "|X", 2);
STRING_LITERAL(TMP198234, "|}$n\\hline$n$1\\end{rsttab}\\end{table}", 37);
STRING_LITERAL(TMP198235, " & $1", 5);
STRING_LITERAL(TMP198236, "$1\\\\$n\\hline$n", 14);
STRING_LITERAL(TMP198237, "<th>$1</th>", 11);
STRING_LITERAL(TMP198238, "\\textbf{$1}", 11);
STRING_LITERAL(TMP198239, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP198240, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP198241, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP198242, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP198243, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP198244, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP198245, "scale", 5);
STRING_LITERAL(TMP198246, " scale=\"$1\"", 11);
STRING_LITERAL(TMP198247, " scale=$1", 9);
STRING_LITERAL(TMP198248, "height", 6);
STRING_LITERAL(TMP198249, " height=\"$1\"", 12);
STRING_LITERAL(TMP198250, " height=$1", 10);
STRING_LITERAL(TMP198251, "width", 5);
STRING_LITERAL(TMP198252, " width=\"$1\"", 11);
STRING_LITERAL(TMP198253, " width=$1", 9);
STRING_LITERAL(TMP198254, "alt", 3);
STRING_LITERAL(TMP198255, " alt=\"$1\"", 9);
STRING_LITERAL(TMP198256, "align", 5);
STRING_LITERAL(TMP198257, " align=\"$1\"", 11);
STRING_LITERAL(TMP198258, "[$1]", 4);
STRING_LITERAL(TMP198259, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP198260, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP198261, "renderCodeBlock", 15);
STRING_LITERAL(TMP198377, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP198378, "\\span$2{$1}", 11);
extern NIM_CONST TY151060 Tokenclasstostr_151059;
STRING_LITERAL(TMP198379, "<pre>$1</pre>", 13);
STRING_LITERAL(TMP198380, "<div>$1</div>", 13);
STRING_LITERAL(TMP198381, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP198382, "$2", 2);
STRING_LITERAL(TMP198383, "|$1|", 4);
STRING_LITERAL(TMP198384, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP198385, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP198386, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP198387, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP198388, "<em>$1</em>", 11);
STRING_LITERAL(TMP198389, "\\emph{$1}", 9);
STRING_LITERAL(TMP198390, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP198391, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP198392, "<em id=\"$1\">$2</em>", 19);
STRING_LITERAL(TMP198393, "$2\\label{$1}", 12);
STRING_LITERAL(TMP198394, "#", 1);
STRING_LITERAL(TMP198395, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP198396, "\\texttt{$1}", 11);
STRING_LITERAL(TMP198397, "`", 1);
STRING_LITERAL(TMP198398, "getName()", 9);
STRING_LITERAL(TMP198399, "<span class=\"Comment\">$1</span>", 31);
STRING_LITERAL(TMP198400, "\\spanComment{$1}", 16);
STRING_LITERAL(TMP198401, "<span class=\"Keyword\">$1</span>", 31);
STRING_LITERAL(TMP198402, "\\spanKeyword{$1}", 16);
STRING_LITERAL(TMP198403, "<span class=\"Operator\">$1</span>", 32);
STRING_LITERAL(TMP198404, "\\spanOperator{$1}", 17);
STRING_LITERAL(TMP198405, "<span class=\"StringLit\">$1</span>", 33);
STRING_LITERAL(TMP198406, "\\spanStringLit{$1}", 18);
STRING_LITERAL(TMP198407, "<span class=\"CharLit\">$1</span>", 31);
STRING_LITERAL(TMP198408, "\\spanCharLit{$1}", 16);
STRING_LITERAL(TMP198409, "<span class=\"DecNumber\">$1</span>", 33);
STRING_LITERAL(TMP198410, "\\spanDecNumber{$1}", 18);
STRING_LITERAL(TMP198411, "<span class=\"FloatNumber\">$1</span>", 35);
STRING_LITERAL(TMP198412, "\\spanFloatNumber{$1}", 20);
STRING_LITERAL(TMP198413, "<span class=\"Identifier\">$1</span>", 34);
STRING_LITERAL(TMP198414, "\\spanIdentifier{$1}", 19);
STRING_LITERAL(TMP198415, "<span class=\"Other\">$1</span>", 29);
STRING_LITERAL(TMP198416, "\\spanOther{$1}", 14);
STRING_LITERAL(TMP198417, "docgen.genThing(", 16);
extern NIM_CONST TY76146 Toktypetostr_76145;
STRING_LITERAL(TMP198418, "$", 1);
STRING_LITERAL(TMP198419, "ropeFormatNamedVars", 19);
STRING_LITERAL(TMP198420, "}", 1);
STRING_LITERAL(TMP198421, "doc.item", 8);
STRING_LITERAL(TMP198423, "name", 4);
STRING_LITERAL(TMP198424, "header", 6);
STRING_LITERAL(TMP198425, "desc", 4);
STRING_LITERAL(TMP198426, "itemID", 6);
NIM_CONST TY48018 TMP198422 = {((NimStringDesc*) &TMP198423),
((NimStringDesc*) &TMP198424),
((NimStringDesc*) &TMP198425),
((NimStringDesc*) &TMP198426)}
;
STRING_LITERAL(TMP198427, "doc.item.toc", 12);
STRING_LITERAL(TMP198428, "getRstName()", 12);
STRING_LITERAL(TMP198429, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>$n", 61);
STRING_LITERAL(TMP198430, "\\item\\label{$1_toc} $2\\ref{$1}$n", 32);
STRING_LITERAL(TMP198431, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP198432, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP198433, "doc.section", 11);
STRING_LITERAL(TMP198435, "sectionid", 9);
STRING_LITERAL(TMP198436, "sectionTitle", 12);
STRING_LITERAL(TMP198437, "sectionTitleID", 14);
STRING_LITERAL(TMP198438, "content", 7);
NIM_CONST TY48018 TMP198434 = {((NimStringDesc*) &TMP198435),
((NimStringDesc*) &TMP198436),
((NimStringDesc*) &TMP198437),
((NimStringDesc*) &TMP198438)}
;
STRING_LITERAL(TMP198439, "doc.section.toc", 15);
STRING_LITERAL(TMP198440, "doc.toc", 7);
NIM_CONST TY47865 TMP198441 = {((NimStringDesc*) &TMP198438)}
;
STRING_LITERAL(TMP198442, "Module ", 7);
STRING_LITERAL(TMP198443, "doc.body_toc", 12);
STRING_LITERAL(TMP198444, "doc.body_no_toc", 15);
STRING_LITERAL(TMP198446, "title", 5);
STRING_LITERAL(TMP198447, "tableofcontents", 15);
STRING_LITERAL(TMP198448, "moduledesc", 10);
STRING_LITERAL(TMP198449, "date", 4);
STRING_LITERAL(TMP198450, "time", 4);
NIM_CONST TY156604 TMP198445 = {((NimStringDesc*) &TMP198446),
((NimStringDesc*) &TMP198447),
((NimStringDesc*) &TMP198448),
((NimStringDesc*) &TMP198449),
((NimStringDesc*) &TMP198450),
((NimStringDesc*) &TMP198438)}
;
STRING_LITERAL(TMP198451, "doc.file", 8);
NIM_CONST TY156623 TMP198452 = {((NimStringDesc*) &TMP198446),
((NimStringDesc*) &TMP198447),
((NimStringDesc*) &TMP198448),
((NimStringDesc*) &TMP198449),
((NimStringDesc*) &TMP198450),
((NimStringDesc*) &TMP198438),
((NimStringDesc*) &TMP198211),
((NimStringDesc*) &TMP198212)}
;
NIM_CONST TY155336 Lvltochar_155335 = {33,
61,
45,
126,
96,
60,
42,
124,
43}
;
STRING_LITERAL(TMP198453, "$n$1$2$n$1$3", 12);
extern NIM_CONST TY155336 Lvltochar_155335;
STRING_LITERAL(TMP198454, "$n$1$3$n$1$2$n$1$3", 18);
STRING_LITERAL(TMP198455, "$n$n$1$2$n$n", 12);
STRING_LITERAL(TMP198456, "$n$n$1$2", 8);
STRING_LITERAL(TMP198457, "$n$1* $2", 8);
STRING_LITERAL(TMP198458, "$n$1(#) $2", 10);
STRING_LITERAL(TMP198459, "$n$1  $2", 8);
STRING_LITERAL(TMP198460, "$n$1:$2:$3$4", 12);
STRING_LITERAL(TMP198461, "$n$1| $2", 8);
STRING_LITERAL(TMP198462, "`$1`_", 5);
STRING_LITERAL(TMP198463, "`$1 <$2>`_", 10);
STRING_LITERAL(TMP198464, "`$1`:$2:", 8);
STRING_LITERAL(TMP198465, "`$1`:sub:", 9);
STRING_LITERAL(TMP198466, "`$1`:sup:", 9);
STRING_LITERAL(TMP198467, "`$1`:idx:", 9);
STRING_LITERAL(TMP198468, "*$1*", 4);
STRING_LITERAL(TMP198469, "**$1**", 6);
STRING_LITERAL(TMP198470, "`$1`", 4);
STRING_LITERAL(TMP198471, "``$1``", 6);
STRING_LITERAL(TMP198472, "\\", 1);
STRING_LITERAL(TMP198473, "\\\\", 2);
STRING_LITERAL(TMP198474, "$n$n$1.. index::$n$2", 20);
STRING_LITERAL(TMP198475, "$n$n$1.. contents::", 19);
STRING_LITERAL(TMP198477, "\\-", 2);
STRING_LITERAL(TMP198478, "tex", 3);
NimStringDesc* Splitter_154046;
extern TY11190 Gch_11210;
extern TNimType* NTI154019; /* PDoc */
extern TNimType* NTI154034; /* seq[TTocEntry] */
extern NimStringDesc* Gindexfile_46081;
extern NU8 Gcmd_46082;
extern TNimType* NTI151007; /* TGeneralTokenizer */
extern TNimType* NTI55174; /* TSymKind */
extern NU32 Gglobaloptions_46077;
extern TNimType* NTI146008; /* TRstNodeKind */
static N_INLINE(TY10802*, Usrtocell_11612)(void* Usr_11614) {
TY10802* Result_11615;
Result_11615 = 0;
Result_11615 = ((TY10802*) ((NI64)((NU64)(((NI) (Usr_11614))) - (NU64)(((NI) (((NI)sizeof(TY10802))))))));
return Result_11615;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7607;
Result_7607 = 0;
(*Memloc_3004) += X_3005;
Result_7607 = (*Memloc_3004);
return Result_7607;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7806;
Result_7806 = 0;
(*Memloc_3009) -= X_3010;
Result_7806 = (*Memloc_3009);
return Result_7806;
}
static N_INLINE(void, Rtladdzct_12601)(TY10802* C_12603) {
Addzct_11601(&Gch_11210.Zct, C_12603);
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_13218, void* Src_13219) {
TY10802* C_13220;
NI LOC4;
TY10802* C_13222;
NI LOC9;
if (!!((Src_13219 == NIM_NIL))) goto LA2;
C_13220 = 0;
C_13220 = Usrtocell_11612(Src_13219);
LOC4 = Atomicinc_3001(&(*C_13220).Refcount, 8);
LA2: ;
if (!!(((*Dest_13218) == NIM_NIL))) goto LA6;
C_13222 = 0;
C_13222 = Usrtocell_11612((*Dest_13218));
LOC9 = Atomicdec_3006(&(*C_13222).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
Rtladdzct_12601(C_13222);
LA10: ;
LA6: ;
(*Dest_13218) = Src_13219;
}
N_NIMCALL(TY154017*, Newdocumentor_154162)(NimStringDesc* Filename_154164) {
TY154017* Result_154165;
NimStringDesc* S_154197;
Result_154165 = 0;
Result_154165 = (TY154017*) newObj(NTI154019, sizeof(TY154017));
asgnRefNoCycle((void**) &(*Result_154165).Tocpart, (TY154034*) newSeq(NTI154034, 0));
asgnRefNoCycle((void**) &(*Result_154165).Filename, copyString(Filename_154164));
(*Result_154165).Id = 100;
(*Result_154165).Splitafter = 20;
S_154197 = 0;
S_154197 = Getconfigvar_46133(((NimStringDesc*) &TMP198096));
if (!!(((S_154197) && (S_154197)->Sup.len == 0))) goto LA2;
(*Result_154165).Splitafter = nsuParseInt(S_154197);
LA2: ;
return Result_154165;
}
N_NIMCALL(TY146077*, Findindexnode_154048)(TY146077* N_154050) {
TY146077* Result_154051;
NI I_154114;
NI HEX3Atmp_154127;
NI LOC11;
NI Res_154129;
Result_154051 = 0;
if (!(N_154050 == NIM_NIL)) goto LA2;
Result_154051 = NIM_NIL;
goto LA1;
LA2: ;
if (!((*N_154050).Kind == ((NU8) 51))) goto LA4;
Result_154051 = (*N_154050).Sons->data[2];
if (!(Result_154051 == NIM_NIL)) goto LA7;
Result_154051 = Newrstnode_146094(((NU8) 9));
asgnRefNoCycle((void**) &(*N_154050).Sons->data[2], Result_154051);
goto LA6;
LA7: ;
if (!((*Result_154051).Kind == ((NU8) 0))) goto LA9;
Result_154051 = (*Result_154051).Sons->data[0];
goto LA6;
LA9: ;
LA6: ;
goto LA1;
LA4: ;
Result_154051 = NIM_NIL;
I_154114 = 0;
HEX3Atmp_154127 = 0;
LOC11 = Rsonslen_146091(N_154050);
HEX3Atmp_154127 = (NI64)(LOC11 - 1);
Res_154129 = 0;
Res_154129 = 0;
while (1) {
if (!(Res_154129 <= HEX3Atmp_154127)) goto LA12;
I_154114 = Res_154129;
Result_154051 = Findindexnode_154048((*N_154050).Sons->data[I_154114]);
if (!!((Result_154051 == NIM_NIL))) goto LA14;
goto BeforeRet;
LA14: ;
Res_154129 += 1;
} LA12: ;
LA1: ;
BeforeRet: ;
return Result_154051;
}
N_NIMCALL(void, Initindexfile_154132)(TY154017* D_154134) {
TY146077* H_154135;
NIM_BOOL Dummyhastoc_154136;
NimStringDesc* LOC4;
NIM_BOOL LOC6;
NimStringDesc* LOC9;
NIM_BOOL LOC11;
TY146077* LOC15;
H_154135 = 0;
Dummyhastoc_154136 = 0;
if (!(Gindexfile_46081->Sup.len == 0)) goto LA2;
goto BeforeRet;
LA2: ;
asgnRefNoCycle((void**) &Gindexfile_46081, nosaddFileExt(Gindexfile_46081, ((NimStringDesc*) &TMP198097)));
LOC4 = 0;
LOC4 = nosextractFilename((*D_154134).Filename);
asgnRefNoCycle((void**) &(*D_154134).Indexvalfilename, nosChangeFileExt(LOC4, ((NimStringDesc*) &TMP198098)));
LOC6 = nosexistsFile(Gindexfile_46081);
if (!LOC6) goto LA7;
LOC9 = 0;
LOC9 = Readfile_3647(Gindexfile_46081);
asgnRefNoCycle((void**) &(*D_154134).Indexfile, Rstparse_146082(LOC9, NIM_FALSE, Gindexfile_46081, 0, 1, &Dummyhastoc_154136));
asgnRefNoCycle((void**) &(*D_154134).Theindex, Findindexnode_154048((*D_154134).Indexfile));
LOC11 = ((*D_154134).Theindex == NIM_NIL);
if (LOC11) goto LA12;
LOC11 = !(((*(*D_154134).Theindex).Kind == ((NU8) 9)));
LA12: ;
if (!LOC11) goto LA13;
Rawmessage_47553(((NU8) 188), Gindexfile_46081);
LA13: ;
Clearindex_146126((*D_154134).Theindex, (*D_154134).Indexvalfilename);
goto LA5;
LA7: ;
asgnRefNoCycle((void**) &(*D_154134).Indexfile, Newrstnode_146094(((NU8) 0)));
H_154135 = Newrstnode_146094(((NU8) 2));
(*H_154135).Level = 1;
LOC15 = 0;
LOC15 = Newrstnode_146097(((NU8) 62), ((NimStringDesc*) &TMP198166));
Addson_146101(H_154135, LOC15);
Addson_146101((*D_154134).Indexfile, H_154135);
H_154135 = Newrstnode_146094(((NU8) 51));
Addson_146101(H_154135, NIM_NIL);
Addson_146101(H_154135, NIM_NIL);
asgnRefNoCycle((void**) &(*D_154134).Theindex, Newrstnode_146094(((NU8) 9)));
Addson_146101(H_154135, (*D_154134).Theindex);
Addson_146101((*D_154134).Indexfile, H_154135);
LA5: ;
BeforeRet: ;
}
N_NIMCALL(TY52008*, Renderaux_154616)(TY154017* D_154618, TY146077* N_154619, NimStringDesc* Outer_154620) {
TY52008* Result_154621;
NI I_154629;
NI HEX3Atmp_154636;
NI LOC1;
NI Res_154638;
TY52008* LOC3;
TY52446 LOC4;
Result_154621 = 0;
Result_154621 = NIM_NIL;
I_154629 = 0;
HEX3Atmp_154636 = 0;
LOC1 = Rsonslen_146091(N_154619);
HEX3Atmp_154636 = (NI64)(LOC1 - 1);
Res_154638 = 0;
Res_154638 = 0;
while (1) {
if (!(Res_154638 <= HEX3Atmp_154636)) goto LA2;
I_154629 = Res_154638;
LOC3 = 0;
LOC3 = Renderrsttoout_154612(D_154618, (*N_154619).Sons->data[I_154629]);
App_52031(&Result_154621, LOC3);
Res_154638 += 1;
} LA2: ;
memset((void*)&LOC4, 0, sizeof(LOC4));
LOC4[0] = Result_154621;
Result_154621 = Ropef_52069(Outer_154620, LOC4, 1);
return Result_154621;
}
N_NIMCALL(TY52008*, Dispf_154579)(NimStringDesc* Xml_154581, NimStringDesc* Tex_154582, TY52008** Args_154584, NI Args_154584Len0) {
TY52008* Result_154585;
Result_154585 = 0;
if (!!((Gcmd_46082 == ((NU8) 15)))) goto LA2;
Result_154585 = Ropef_52069(Xml_154581, Args_154584, Args_154584Len0);
goto LA1;
LA2: ;
Result_154585 = Ropef_52069(Tex_154582, Args_154584, Args_154584Len0);
LA1: ;
return Result_154585;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_18809, NIM_CHAR C_18810) {
(*Dest_18809).data[((*Dest_18809).Sup.len)-0] = C_18810;
(*Dest_18809).data[((NI64)((*Dest_18809).Sup.len + 1))-0] = 0;
(*Dest_18809).Sup.len += 1;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_18792, NimStringDesc* Src_18793) {
memcpy(((NCSTRING) (&(*Dest_18792).data[((*Dest_18792).Sup.len)-0])), ((NCSTRING) ((*Src_18793).data)), ((int) ((NI64)((NI64)((*Src_18793).Sup.len + 1) * 1))));
(*Dest_18792).Sup.len += (*Src_18793).Sup.len;
}
N_NIMCALL(TY52008*, Renderheadline_155180)(TY154017* D_155182, TY146077* N_155183) {
TY52008* Result_155184;
NI I_155192;
NI HEX3Atmp_155245;
NI LOC1;
NI Res_155247;
TY52008* LOC3;
TY52008* Refname_155194;
NimStringDesc* LOC4;
NI Length_155205;
TY161585 LOC8;
NimStringDesc* LOC9;
TY161585 LOC10;
NimStringDesc* LOC11;
Result_155184 = 0;
Result_155184 = NIM_NIL;
I_155192 = 0;
HEX3Atmp_155245 = 0;
LOC1 = Rsonslen_146091(N_155183);
HEX3Atmp_155245 = (NI64)(LOC1 - 1);
Res_155247 = 0;
Res_155247 = 0;
while (1) {
if (!(Res_155247 <= HEX3Atmp_155245)) goto LA2;
I_155192 = Res_155247;
LOC3 = 0;
LOC3 = Renderrsttoout_154612(D_155182, (*N_155183).Sons->data[I_155192]);
App_52031(&Result_155184, LOC3);
Res_155247 += 1;
} LA2: ;
Refname_155194 = 0;
LOC4 = 0;
LOC4 = Rstnodetorefname_146105(N_155183);
Refname_155194 = Torope_52046(LOC4);
if (!(*D_155182).Hastoc) goto LA6;
Length_155205 = 0;
Length_155205 = (*D_155182).Tocpart->Sup.len;
(*D_155182).Tocpart = (TY154034*) setLengthSeq(&((*D_155182).Tocpart)->Sup, sizeof(TY154011), (NI64)(Length_155205 + 1));
asgnRefNoCycle((void**) &(*D_155182).Tocpart->data[Length_155205].Refname, Refname_155194);
asgnRefNoCycle((void**) &(*D_155182).Tocpart->data[Length_155205].N, N_155183);
asgnRefNoCycle((void**) &(*D_155182).Tocpart->data[Length_155205].Header, Result_155184);
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Torope_52052(((NI64) ((*N_155183).Level)));
LOC8[1] = (*D_155182).Tocpart->data[Length_155205].Refname;
LOC8[2] = Result_155184;
LOC9 = 0;
LOC9 = rawNewString(1);
appendChar(LOC9, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_155183).Level - 1) + 65))))));
appendString(LOC9, ((NimStringDesc*) &TMP198171));
LOC8[3] = Torope_52046(LOC9);
Result_155184 = Dispf_154579(((NimStringDesc*) &TMP198169), ((NimStringDesc*) &TMP198170), LOC8, 4);
goto LA5;
LA6: ;
memset((void*)&LOC10, 0, sizeof(LOC10));
LOC10[0] = Torope_52052(((NI64) ((*N_155183).Level)));
LOC10[1] = Refname_155194;
LOC10[2] = Result_155184;
LOC11 = 0;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_155183).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP198171));
LOC10[3] = Torope_52046(LOC11);
Result_155184 = Dispf_154579(((NimStringDesc*) &TMP198172), ((NimStringDesc*) &TMP198170), LOC10, 4);
LA5: ;
return Result_155184;
}
N_NIMCALL(TY52008*, Renderoverline_155250)(TY154017* D_155252, TY146077* N_155253) {
TY52008* Result_155254;
TY52008* T_155255;
NI I_155263;
NI HEX3Atmp_155301;
NI LOC1;
NI Res_155303;
TY52008* LOC3;
TY161585 LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
Result_155254 = 0;
T_155255 = 0;
T_155255 = NIM_NIL;
I_155263 = 0;
HEX3Atmp_155301 = 0;
LOC1 = Rsonslen_146091(N_155253);
HEX3Atmp_155301 = (NI64)(LOC1 - 1);
Res_155303 = 0;
Res_155303 = 0;
while (1) {
if (!(Res_155303 <= HEX3Atmp_155301)) goto LA2;
I_155263 = Res_155303;
LOC3 = 0;
LOC3 = Renderrsttoout_154612(D_155252, (*N_155253).Sons->data[I_155263]);
App_52031(&T_155255, LOC3);
Res_155303 += 1;
} LA2: ;
Result_155254 = NIM_NIL;
if (!((*D_155252).Meta[(((NU8) 1))-0] == NIM_NIL)) goto LA5;
asgnRefNoCycle((void**) &(*D_155252).Meta[(((NU8) 1))-0], T_155255);
goto LA4;
LA5: ;
if (!((*D_155252).Meta[(((NU8) 2))-0] == NIM_NIL)) goto LA7;
asgnRefNoCycle((void**) &(*D_155252).Meta[(((NU8) 2))-0], T_155255);
goto LA4;
LA7: ;
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_52052(((NI64) ((*N_155253).Level)));
LOC10 = 0;
LOC10 = Rstnodetorefname_146105(N_155253);
LOC9[1] = Torope_52046(LOC10);
LOC9[2] = T_155255;
LOC11 = 0;
LOC11 = rawNewString(1);
appendChar(LOC11, ((NIM_CHAR) (((NI) ((NI64)((NI64)((*N_155253).Level - 1) + 65))))));
appendString(LOC11, ((NimStringDesc*) &TMP198171));
LOC9[3] = Torope_52046(LOC11);
Result_155254 = Dispf_154579(((NimStringDesc*) &TMP198173), ((NimStringDesc*) &TMP198174), LOC9, 4);
LA4: ;
return Result_155254;
}
N_NIMCALL(NimStringDesc*, Disp_154565)(NimStringDesc* Xml_154567, NimStringDesc* Tex_154568) {
NimStringDesc* Result_154569;
Result_154569 = 0;
if (!!((Gcmd_46082 == ((NU8) 15)))) goto LA2;
Result_154569 = copyString(Xml_154567);
goto LA1;
LA2: ;
Result_154569 = copyString(Tex_154568);
LA1: ;
return Result_154569;
}
N_NIMCALL(NI, Nextsplitpoint_154455)(NimStringDesc* S_154457, NI Start_154458) {
NI Result_154459;
Result_154459 = 0;
Result_154459 = Start_154458;
while (1) {
if (!(Result_154459 < (NI64)(S_154457->Sup.len + 0))) goto LA1;
switch (((NU8)(S_154457->data[Result_154459]))) {
case 95:
goto BeforeRet;
break;
case 97 ... 122:
if (!((NI64)(Result_154459 + 1) < (NI64)(S_154457->Sup.len + 0))) goto LA3;
if (!(((NU8)(S_154457->data[(NI64)(Result_154459 + 1)])) >= ((NU8)(65)) && ((NU8)(S_154457->data[(NI64)(Result_154459 + 1)])) <= ((NU8)(90)))) goto LA6;
goto BeforeRet;
LA6: ;
LA3: ;
break;
default:
break;
}
Result_154459 += 1;
} LA1: ;
Result_154459 -= 1;
BeforeRet: ;
return Result_154459;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* A_18647, NimStringDesc* B_18648) {
NIM_BOOL Result_18649;
NIM_BOOL LOC5;
NIM_BOOL LOC9;
int LOC11;
Result_18649 = 0;
if (!(A_18647 == B_18648)) goto LA2;
Result_18649 = NIM_TRUE;
goto BeforeRet;
LA2: ;
LOC5 = (A_18647 == NIM_NIL);
if (LOC5) goto LA6;
LOC5 = (B_18648 == NIM_NIL);
LA6: ;
if (!LOC5) goto LA7;
Result_18649 = NIM_FALSE;
goto BeforeRet;
LA7: ;
LOC9 = ((*A_18647).Sup.len == (*B_18648).Sup.len);
if (!(LOC9)) goto LA10;
LOC11 = memcmp(((NCSTRING) ((*A_18647).data)), ((NCSTRING) ((*B_18648).data)), ((int) ((NI64)((*A_18647).Sup.len * 1))));
LOC9 = (LOC11 == ((NI32) 0));
LA10: ;
Result_18649 = LOC9;
goto BeforeRet;
BeforeRet: ;
return Result_18649;
}
N_NIMCALL(void, Addxmlchar_154426)(NimStringDesc** Dest_154429, NIM_CHAR C_154430) {
switch (((NU8)(C_154430))) {
case 38:
(*Dest_154429) = resizeString((*Dest_154429), 5);
appendString((*Dest_154429), ((NimStringDesc*) &TMP198193));
break;
case 60:
(*Dest_154429) = resizeString((*Dest_154429), 4);
appendString((*Dest_154429), ((NimStringDesc*) &TMP198194));
break;
case 62:
(*Dest_154429) = resizeString((*Dest_154429), 4);
appendString((*Dest_154429), ((NimStringDesc*) &TMP198195));
break;
case 34:
(*Dest_154429) = resizeString((*Dest_154429), 6);
appendString((*Dest_154429), ((NimStringDesc*) &TMP198196));
break;
default:
(*Dest_154429) = addChar((*Dest_154429), C_154430);
break;
}
}
N_NIMCALL(void, Addtexchar_154436)(NimStringDesc** Dest_154439, NIM_CHAR C_154440) {
switch (((NU8)(C_154440))) {
case 95:
(*Dest_154439) = resizeString((*Dest_154439), 2);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198197));
break;
case 123:
(*Dest_154439) = resizeString((*Dest_154439), 12);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198198));
break;
case 125:
(*Dest_154439) = resizeString((*Dest_154439), 12);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198199));
break;
case 91:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198200));
break;
case 93:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198201));
break;
case 92:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198202));
break;
case 36:
(*Dest_154439) = resizeString((*Dest_154439), 2);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198203));
break;
case 38:
(*Dest_154439) = resizeString((*Dest_154439), 2);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198204));
break;
case 35:
(*Dest_154439) = resizeString((*Dest_154439), 2);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198205));
break;
case 37:
(*Dest_154439) = resizeString((*Dest_154439), 2);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198206));
break;
case 126:
(*Dest_154439) = resizeString((*Dest_154439), 12);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198207));
break;
case 64:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198208));
break;
case 94:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198209));
break;
case 96:
(*Dest_154439) = resizeString((*Dest_154439), 11);
appendString((*Dest_154439), ((NimStringDesc*) &TMP198210));
break;
default:
(*Dest_154439) = addChar((*Dest_154439), C_154440);
break;
}
}
N_NIMCALL(void, Escchar_154441)(NimStringDesc** Dest_154444, NIM_CHAR C_154445) {
if (!!((Gcmd_46082 == ((NU8) 15)))) goto LA2;
Addxmlchar_154426(Dest_154444, C_154445);
goto LA1;
LA2: ;
Addtexchar_154436(Dest_154444, C_154445);
LA1: ;
}
N_NIMCALL(NimStringDesc*, Esc_154505)(NimStringDesc* S_154507, NI Splitafter_154508) {
NimStringDesc* Result_154509;
NI Partlen_154512;
NI J_154513;
NI K_154518;
NIM_BOOL LOC6;
NI I_154528;
NI Res_154555;
NI I_154551;
NI HEX3Atmp_154560;
NI Res_154562;
Result_154509 = 0;
Result_154509 = copyString(((NimStringDesc*) &TMP198171));
if (!(0 <= Splitafter_154508)) goto LA2;
Partlen_154512 = 0;
Partlen_154512 = 0;
J_154513 = 0;
J_154513 = 0;
while (1) {
if (!(J_154513 < S_154507->Sup.len)) goto LA4;
K_154518 = 0;
K_154518 = Nextsplitpoint_154455(S_154507, J_154513);
LOC6 = !(eqStrings(Splitter_154046, ((NimStringDesc*) &TMP198192)));
if (LOC6) goto LA7;
LOC6 = (Splitafter_154508 < (NI64)((NI64)((NI64)(Partlen_154512 + K_154518) - J_154513) + 1));
LA7: ;
if (!LOC6) goto LA8;
Partlen_154512 = 0;
Result_154509 = resizeString(Result_154509, Splitter_154046->Sup.len + 0);
appendString(Result_154509, Splitter_154046);
LA8: ;
I_154528 = 0;
Res_154555 = 0;
Res_154555 = J_154513;
while (1) {
if (!(Res_154555 <= K_154518)) goto LA10;
I_154528 = Res_154555;
Escchar_154441(&Result_154509, S_154507->data[I_154528]);
Res_154555 += 1;
} LA10: ;
Partlen_154512 += (NI64)((NI64)(K_154518 - J_154513) + 1);
J_154513 = (NI64)(K_154518 + 1);
} LA4: ;
goto LA1;
LA2: ;
I_154551 = 0;
HEX3Atmp_154560 = 0;
HEX3Atmp_154560 = (NI64)((NI64)(S_154507->Sup.len + 0) - 1);
Res_154562 = 0;
Res_154562 = 0;
while (1) {
if (!(Res_154562 <= HEX3Atmp_154560)) goto LA11;
I_154551 = Res_154562;
Escchar_154441(&Result_154509, S_154507->data[I_154551]);
Res_154562 += 1;
} LA11: ;
LA1: ;
return Result_154509;
}
N_NIMCALL(TY52008*, Renderfield_155873)(TY154017* D_155875, TY146077* N_155876) {
TY52008* Result_155877;
NIM_BOOL B_155878;
NimStringDesc* Fieldname_155888;
TY52008* Fieldval_155889;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NI LOC8;
NI LOC14;
NimStringDesc* LOC23;
Result_155877 = 0;
B_155878 = 0;
B_155878 = NIM_FALSE;
if (!(Gcmd_46082 == ((NU8) 15))) goto LA2;
Fieldname_155888 = 0;
Fieldname_155888 = Addnodes_146108((*N_155876).Sons->data[0]);
Fieldval_155889 = 0;
LOC4 = 0;
LOC4 = Addnodes_146108((*N_155876).Sons->data[1]);
LOC5 = 0;
LOC5 = nsuStrip(LOC4, NIM_TRUE, NIM_TRUE);
LOC6 = 0;
LOC6 = Esc_154505(LOC5, -1);
Fieldval_155889 = Torope_52046(LOC6);
LOC8 = nsuCmpIgnoreStyle(Fieldname_155888, ((NimStringDesc*) &TMP198211));
if (!(LOC8 == 0)) goto LA9;
if (!((*D_155875).Meta[(((NU8) 3))-0] == NIM_NIL)) goto LA12;
asgnRefNoCycle((void**) &(*D_155875).Meta[(((NU8) 3))-0], Fieldval_155889);
B_155878 = NIM_TRUE;
LA12: ;
goto LA7;
LA9: ;
LOC14 = nsuCmpIgnoreStyle(Fieldname_155888, ((NimStringDesc*) &TMP198212));
if (!(LOC14 == 0)) goto LA15;
if (!((*D_155875).Meta[(((NU8) 4))-0] == NIM_NIL)) goto LA18;
asgnRefNoCycle((void**) &(*D_155875).Meta[(((NU8) 4))-0], Fieldval_155889);
B_155878 = NIM_TRUE;
LA18: ;
goto LA7;
LA15: ;
LA7: ;
LA2: ;
if (!B_155878) goto LA21;
Result_155877 = NIM_NIL;
goto LA20;
LA21: ;
LOC23 = 0;
LOC23 = Disp_154565(((NimStringDesc*) &TMP198213), ((NimStringDesc*) &TMP198168));
Result_155877 = Renderaux_154616(D_155875, N_155876, LOC23);
LA20: ;
return Result_155877;
}
N_NIMCALL(NimStringDesc*, Texcolumns_155855)(TY146077* N_155857) {
NimStringDesc* Result_155858;
NI I_155866;
NI HEX3Atmp_155868;
NI Res_155870;
Result_155858 = 0;
Result_155858 = copyString(((NimStringDesc*) &TMP198171));
I_155866 = 0;
HEX3Atmp_155868 = 0;
HEX3Atmp_155868 = Rsonslen_146091(N_155857);
Res_155870 = 0;
Res_155870 = 1;
while (1) {
if (!(Res_155870 <= HEX3Atmp_155868)) goto LA1;
I_155866 = Res_155870;
Result_155858 = resizeString(Result_155858, 2);
appendString(Result_155858, ((NimStringDesc*) &TMP198233));
Res_155870 += 1;
} LA1: ;
return Result_155858;
}
N_NIMCALL(void, Dispa_154595)(TY52008** Dest_154598, NimStringDesc* Xml_154599, NimStringDesc* Tex_154600, TY52008** Args_154602, NI Args_154602Len0) {
if (!!((Gcmd_46082 == ((NU8) 15)))) goto LA2;
Appf_52074(Dest_154598, Xml_154599, Args_154602, Args_154602Len0);
goto LA1;
LA2: ;
Appf_52074(Dest_154598, Tex_154600, Args_154602, Args_154602Len0);
LA1: ;
}
N_NIMCALL(TY52008*, Fieldaux_155709)(NimStringDesc* S_155711) {
TY52008* Result_155712;
NimStringDesc* LOC1;
Result_155712 = 0;
LOC1 = 0;
LOC1 = nsuStrip(S_155711, NIM_TRUE, NIM_TRUE);
Result_155712 = Torope_52046(LOC1);
return Result_155712;
}
N_NIMCALL(TY52008*, Renderimage_155713)(TY154017* D_155715, TY146077* N_155716) {
TY52008* Result_155717;
TY52008* Options_155718;
NimStringDesc* S_155719;
TY52446 LOC4;
TY52446 LOC8;
TY52446 LOC12;
TY52446 LOC16;
TY52446 LOC20;
TY52446 LOC24;
TY176060 LOC25;
NimStringDesc* LOC26;
NI LOC28;
TY52008* LOC31;
Result_155717 = 0;
Options_155718 = 0;
Options_155718 = NIM_NIL;
S_155719 = 0;
S_155719 = Getfieldvalue_146111(N_155716, ((NimStringDesc*) &TMP198245));
if (!!(((S_155719) && (S_155719)->Sup.len == 0))) goto LA2;
memset((void*)&LOC4, 0, sizeof(LOC4));
LOC4[0] = Fieldaux_155709(S_155719);
Dispa_154595(&Options_155718, ((NimStringDesc*) &TMP198246), ((NimStringDesc*) &TMP198247), LOC4, 1);
LA2: ;
S_155719 = Getfieldvalue_146111(N_155716, ((NimStringDesc*) &TMP198248));
if (!!(((S_155719) && (S_155719)->Sup.len == 0))) goto LA6;
memset((void*)&LOC8, 0, sizeof(LOC8));
LOC8[0] = Fieldaux_155709(S_155719);
Dispa_154595(&Options_155718, ((NimStringDesc*) &TMP198249), ((NimStringDesc*) &TMP198250), LOC8, 1);
LA6: ;
S_155719 = Getfieldvalue_146111(N_155716, ((NimStringDesc*) &TMP198251));
if (!!(((S_155719) && (S_155719)->Sup.len == 0))) goto LA10;
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC12[0] = Fieldaux_155709(S_155719);
Dispa_154595(&Options_155718, ((NimStringDesc*) &TMP198252), ((NimStringDesc*) &TMP198253), LOC12, 1);
LA10: ;
S_155719 = Getfieldvalue_146111(N_155716, ((NimStringDesc*) &TMP198254));
if (!!(((S_155719) && (S_155719)->Sup.len == 0))) goto LA14;
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC16[0] = Fieldaux_155709(S_155719);
Dispa_154595(&Options_155718, ((NimStringDesc*) &TMP198255), ((NimStringDesc*) &TMP198171), LOC16, 1);
LA14: ;
S_155719 = Getfieldvalue_146111(N_155716, ((NimStringDesc*) &TMP198256));
if (!!(((S_155719) && (S_155719)->Sup.len == 0))) goto LA18;
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC20[0] = Fieldaux_155709(S_155719);
Dispa_154595(&Options_155718, ((NimStringDesc*) &TMP198257), ((NimStringDesc*) &TMP198171), LOC20, 1);
LA18: ;
if (!!((Options_155718 == NIM_NIL))) goto LA22;
memset((void*)&LOC24, 0, sizeof(LOC24));
LOC24[0] = Options_155718;
Options_155718 = Dispf_154579(((NimStringDesc*) &TMP198168), ((NimStringDesc*) &TMP198258), LOC24, 1);
LA22: ;
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC26 = 0;
LOC26 = Getargument_146115(N_155716);
LOC25[0] = Torope_52046(LOC26);
LOC25[1] = Options_155718;
Result_155717 = Dispf_154579(((NimStringDesc*) &TMP198259), ((NimStringDesc*) &TMP198260), LOC25, 2);
LOC28 = Rsonslen_146091(N_155716);
if (!(3 <= LOC28)) goto LA29;
LOC31 = 0;
LOC31 = Renderrsttoout_154612(D_155715, (*N_155716).Sons->data[2]);
App_52031(&Result_155717, LOC31);
LA29: ;
return Result_155717;
}
N_NIMCALL(TY52008*, Rendercodeblock_155767)(TY154017* D_155769, TY146077* N_155770) {
TY52008* Result_155771;
TY146077* M_155783;
NimStringDesc* Langstr_155793;
NimStringDesc* LOC7;
NU8 Lang_155794;
TY151007 G_155804;
NimStringDesc* LOC15;
TY176060 LOC16;
NimStringDesc* LOC17;
NimStringDesc* LOC18;
TY52446 LOC22;
Result_155771 = 0;
Result_155771 = NIM_NIL;
if (!((*N_155770).Sons->data[2] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
M_155783 = 0;
M_155783 = (*(*N_155770).Sons->data[2]).Sons->data[0];
if (!!(((*M_155783).Kind == ((NU8) 62)))) goto LA5;
Internalerror_47571(((NimStringDesc*) &TMP198261));
LA5: ;
Langstr_155793 = 0;
LOC7 = 0;
LOC7 = Getargument_146115(N_155770);
Langstr_155793 = nsuStrip(LOC7, NIM_TRUE, NIM_TRUE);
Lang_155794 = 0;
if (!((Langstr_155793) && (Langstr_155793)->Sup.len == 0)) goto LA9;
Lang_155794 = ((NU8) 1);
goto LA8;
LA9: ;
Lang_155794 = Getsourcelanguage_151102(Langstr_155793);
LA8: ;
if (!(Lang_155794 == ((NU8) 0))) goto LA12;
Rawmessage_47553(((NU8) 218), Langstr_155793);
Result_155771 = Torope_52046((*M_155783).Text);
goto LA11;
LA12: ;
memset((void*)&G_155804, 0, sizeof(G_155804));
G_155804.Sup.m_type = NTI151007;
Initgeneraltokenizer_151105(&G_155804, (*M_155783).Text);
while (1) {
Getnexttoken_151114(&G_155804, Lang_155794);
switch (G_155804.Kind) {
case ((NU8) 0):
goto LA14;
break;
case ((NU8) 1):
case ((NU8) 2):
LOC15 = 0;
LOC15 = copyStrLast((*M_155783).Text, (NI64)(G_155804.Start + 0), (NI64)((NI64)((NI64)(G_155804.Length + G_155804.Start) - 1) + 0));
App_52036(&Result_155771, LOC15);
break;
default:
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC17 = 0;
LOC17 = copyStrLast((*M_155783).Text, (NI64)(G_155804.Start + 0), (NI64)((NI64)((NI64)(G_155804.Length + G_155804.Start) - 1) + 0));
LOC18 = 0;
LOC18 = Esc_154505(LOC17, -1);
LOC16[0] = Torope_52046(LOC18);
LOC16[1] = Torope_52046(Tokenclasstostr_151059[(G_155804.Kind)-0]);
Dispa_154595(&Result_155771, ((NimStringDesc*) &TMP198377), ((NimStringDesc*) &TMP198378), LOC16, 2);
break;
}
} LA14: ;
Deinitgeneraltokenizer_151110(&G_155804);
LA11: ;
if (!!((Result_155771 == NIM_NIL))) goto LA20;
memset((void*)&LOC22, 0, sizeof(LOC22));
LOC22[0] = Result_155771;
Result_155771 = Dispf_154579(((NimStringDesc*) &TMP198379), ((NimStringDesc*) &TMP198225), LOC22, 1);
LA20: ;
BeforeRet: ;
return Result_155771;
}
N_NIMCALL(TY52008*, Rendercontainer_155830)(TY154017* D_155832, TY146077* N_155833) {
TY52008* Result_155834;
TY52008* Arg_155835;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
TY52446 LOC6;
TY176060 LOC7;
Result_155834 = 0;
Result_155834 = Renderrsttoout_154612(D_155832, (*N_155833).Sons->data[2]);
Arg_155835 = 0;
LOC1 = 0;
LOC1 = Getargument_146115(N_155833);
LOC2 = 0;
LOC2 = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
Arg_155835 = Torope_52046(LOC2);
if (!(Arg_155835 == NIM_NIL)) goto LA4;
memset((void*)&LOC6, 0, sizeof(LOC6));
LOC6[0] = Result_155834;
Result_155834 = Dispf_154579(((NimStringDesc*) &TMP198380), ((NimStringDesc*) &TMP198168), LOC6, 1);
goto LA3;
LA4: ;
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Arg_155835;
LOC7[1] = Result_155834;
Result_155834 = Dispf_154579(((NimStringDesc*) &TMP198381), ((NimStringDesc*) &TMP198382), LOC7, 2);
LA3: ;
return Result_155834;
}
N_NIMCALL(TY52008*, Renderindexterm_154677)(TY154017* D_154679, TY146077* N_154680) {
TY52008* Result_154681;
TY176060 LOC1;
TY146077* H_154698;
TY146077* A_154717;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_154681 = 0;
(*D_154679).Id += 1;
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = Torope_52052(((NI64) ((*D_154679).Id)));
LOC1[1] = Renderaux_154616(D_154679, N_154680, ((NimStringDesc*) &TMP198168));
Result_154681 = Dispf_154579(((NimStringDesc*) &TMP198392), ((NimStringDesc*) &TMP198393), LOC1, 2);
H_154698 = 0;
H_154698 = Newrstnode_146094(((NU8) 38));
A_154717 = 0;
LOC2 = 0;
LOC3 = 0;
LOC3 = Disp_154565(((NimStringDesc*) &TMP198394), ((NimStringDesc*) &TMP198171));
LOC4 = 0;
LOC4 = nimIntToStr((*D_154679).Id);
LOC2 = rawNewString((*D_154679).Indexvalfilename->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC2, (*D_154679).Indexvalfilename);
appendString(LOC2, LOC3);
appendString(LOC2, LOC4);
A_154717 = Newrstnode_146097(((NU8) 62), LOC2);
Addson_146101(H_154698, A_154717);
Addson_146101(H_154698, A_154717);
Setindexpair_146118((*D_154679).Theindex, N_154680, H_154698);
return Result_154681;
}
N_NIMCALL(TY52008*, Renderrsttoout_154612)(TY154017* D_154614, TY146077* N_154615) {
TY52008* Result_155920;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
NimStringDesc* LOC7;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NimStringDesc* LOC10;
NimStringDesc* LOC11;
NI I_155971;
NI HEX3Atmp_156097;
NI LOC12;
NI Res_156099;
TY52008* LOC14;
TY52446 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC21;
NimStringDesc* LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
NimStringDesc* LOC28;
NimStringDesc* LOC29;
NimStringDesc* LOC30;
NimStringDesc* LOC31;
NI LOC33;
NI I_156045;
NI HEX3Atmp_156103;
NI LOC36;
NI Res_156105;
TY52446 LOC38;
TY52446 LOC39;
NimStringDesc* LOC40;
NimStringDesc* LOC41;
TY176060 LOC42;
NimStringDesc* LOC43;
NimStringDesc* LOC44;
TY176060 LOC45;
TY146077* LOC49;
NimStringDesc* LOC50;
TY146077* LOC54;
NimStringDesc* LOC55;
NimStringDesc* LOC56;
TY176060 LOC57;
NimStringDesc* LOC58;
NimStringDesc* LOC59;
NimStringDesc* LOC60;
NimStringDesc* LOC61;
NimStringDesc* LOC62;
NimStringDesc* LOC66;
NimStringDesc* LOC67;
NimStringDesc* LOC68;
Result_155920 = 0;
if (!(N_154615 == NIM_NIL)) goto LA2;
Result_155920 = NIM_NIL;
goto BeforeRet;
LA2: ;
switch ((*N_154615).Kind) {
case ((NU8) 0):
Result_155920 = Renderaux_154616(D_154614, N_154615, ((NimStringDesc*) &TMP198168));
break;
case ((NU8) 1):
Result_155920 = Renderheadline_155180(D_154614, N_154615);
break;
case ((NU8) 2):
Result_155920 = Renderoverline_155250(D_154614, N_154615);
break;
case ((NU8) 3):
LOC4 = 0;
LOC4 = Disp_154565(((NimStringDesc*) &TMP198175), ((NimStringDesc*) &TMP198176));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC4);
break;
case ((NU8) 4):
LOC5 = 0;
LOC5 = Disp_154565(((NimStringDesc*) &TMP198177), ((NimStringDesc*) &TMP198178));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC5);
break;
case ((NU8) 5):
LOC6 = 0;
LOC6 = Disp_154565(((NimStringDesc*) &TMP198179), ((NimStringDesc*) &TMP198180));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC6);
break;
case ((NU8) 6):
case ((NU8) 8):
LOC7 = 0;
LOC7 = Disp_154565(((NimStringDesc*) &TMP198181), ((NimStringDesc*) &TMP198182));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC7);
break;
case ((NU8) 7):
LOC8 = 0;
LOC8 = Disp_154565(((NimStringDesc*) &TMP198183), ((NimStringDesc*) &TMP198184));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC8);
break;
case ((NU8) 9):
LOC9 = 0;
LOC9 = Disp_154565(((NimStringDesc*) &TMP198185), ((NimStringDesc*) &TMP198186));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC9);
break;
case ((NU8) 10):
Result_155920 = Renderaux_154616(D_154614, N_154615, ((NimStringDesc*) &TMP198168));
break;
case ((NU8) 11):
LOC10 = 0;
LOC10 = Disp_154565(((NimStringDesc*) &TMP198187), ((NimStringDesc*) &TMP198188));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC10);
break;
case ((NU8) 12):
LOC11 = 0;
LOC11 = Disp_154565(((NimStringDesc*) &TMP198189), ((NimStringDesc*) &TMP198190));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC11);
break;
case ((NU8) 13):
Result_155920 = NIM_NIL;
I_155971 = 0;
HEX3Atmp_156097 = 0;
LOC12 = Rsonslen_146091(N_154615);
HEX3Atmp_156097 = (NI64)(LOC12 - 1);
Res_156099 = 0;
Res_156099 = 0;
while (1) {
if (!(Res_156099 <= HEX3Atmp_156097)) goto LA13;
I_155971 = Res_156099;
LOC14 = 0;
LOC14 = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[I_155971]);
App_52031(&Result_155920, LOC14);
Res_156099 += 1;
} LA13: ;
if (!!((Result_155920 == NIM_NIL))) goto LA16;
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC18[0] = Result_155920;
Result_155920 = Dispf_154579(((NimStringDesc*) &TMP198191), ((NimStringDesc*) &TMP198186), LOC18, 1);
LA16: ;
break;
case ((NU8) 14):
Result_155920 = Renderfield_155873(D_154614, N_154615);
break;
case ((NU8) 15):
LOC19 = 0;
LOC19 = Disp_154565(((NimStringDesc*) &TMP198214), ((NimStringDesc*) &TMP198215));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC19);
break;
case ((NU8) 16):
LOC20 = 0;
LOC20 = Disp_154565(((NimStringDesc*) &TMP198216), ((NimStringDesc*) &TMP198217));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC20);
break;
case ((NU8) 51):
Result_155920 = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[2]);
break;
case ((NU8) 17):
LOC21 = 0;
LOC21 = Disp_154565(((NimStringDesc*) &TMP198218), ((NimStringDesc*) &TMP198219));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC21);
break;
case ((NU8) 18):
LOC22 = 0;
LOC22 = Disp_154565(((NimStringDesc*) &TMP198213), ((NimStringDesc*) &TMP198168));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC22);
break;
case ((NU8) 19):
LOC23 = 0;
LOC23 = Disp_154565(((NimStringDesc*) &TMP198220), ((NimStringDesc*) &TMP198221));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC23);
break;
case ((NU8) 23):
LOC24 = 0;
LOC24 = Disp_154565(((NimStringDesc*) &TMP198222), ((NimStringDesc*) &TMP198217));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC24);
break;
case ((NU8) 20):
case ((NU8) 21):
case ((NU8) 22):
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
case ((NU8) 24):
LOC25 = 0;
LOC25 = Disp_154565(((NimStringDesc*) &TMP198224), ((NimStringDesc*) &TMP198225));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC25);
break;
case ((NU8) 25):
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
case ((NU8) 26):
LOC26 = 0;
LOC26 = Disp_154565(((NimStringDesc*) &TMP198226), ((NimStringDesc*) &TMP198178));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC26);
break;
case ((NU8) 27):
LOC27 = 0;
LOC27 = Disp_154565(((NimStringDesc*) &TMP198227), ((NimStringDesc*) &TMP198228));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC27);
break;
case ((NU8) 28):
LOC28 = 0;
LOC28 = Disp_154565(((NimStringDesc*) &TMP198229), ((NimStringDesc*) &TMP198230));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC28);
break;
case ((NU8) 29):
case ((NU8) 30):
LOC29 = 0;
LOC30 = 0;
LOC30 = Texcolumns_155855(N_154615);
LOC29 = rawNewString(LOC30->Sup.len + 65);
appendString(LOC29, ((NimStringDesc*) &TMP198232));
appendString(LOC29, LOC30);
appendString(LOC29, ((NimStringDesc*) &TMP198234));
LOC31 = 0;
LOC31 = Disp_154565(((NimStringDesc*) &TMP198231), LOC29);
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC31);
break;
case ((NU8) 31):
LOC33 = Rsonslen_146091(N_154615);
if (!(1 <= LOC33)) goto LA34;
Result_155920 = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[0]);
I_156045 = 0;
HEX3Atmp_156103 = 0;
LOC36 = Rsonslen_146091(N_154615);
HEX3Atmp_156103 = (NI64)(LOC36 - 1);
Res_156105 = 0;
Res_156105 = 1;
while (1) {
if (!(Res_156105 <= HEX3Atmp_156103)) goto LA37;
I_156045 = Res_156105;
memset((void*)&LOC38, 0, sizeof(LOC38));
LOC38[0] = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[I_156045]);
Dispa_154595(&Result_155920, ((NimStringDesc*) &TMP198168), ((NimStringDesc*) &TMP198235), LOC38, 1);
Res_156105 += 1;
} LA37: ;
memset((void*)&LOC39, 0, sizeof(LOC39));
LOC39[0] = Result_155920;
Result_155920 = Dispf_154579(((NimStringDesc*) &TMP198213), ((NimStringDesc*) &TMP198236), LOC39, 1);
goto LA32;
LA34: ;
Result_155920 = NIM_NIL;
LA32: ;
break;
case ((NU8) 33):
LOC40 = 0;
LOC40 = Disp_154565(((NimStringDesc*) &TMP198216), ((NimStringDesc*) &TMP198168));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC40);
break;
case ((NU8) 32):
LOC41 = 0;
LOC41 = Disp_154565(((NimStringDesc*) &TMP198237), ((NimStringDesc*) &TMP198238));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC41);
break;
case ((NU8) 34):
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
case ((NU8) 35):
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
case ((NU8) 36):
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
case ((NU8) 39):
memset((void*)&LOC42, 0, sizeof(LOC42));
LOC42[0] = Renderaux_154616(D_154614, N_154615, ((NimStringDesc*) &TMP198168));
LOC43 = 0;
LOC43 = Rstnodetorefname_146105(N_154615);
LOC42[1] = Torope_52046(LOC43);
Result_155920 = Dispf_154579(((NimStringDesc*) &TMP198239), ((NimStringDesc*) &TMP198240), LOC42, 2);
break;
case ((NU8) 37):
LOC44 = 0;
LOC44 = Disp_154565(((NimStringDesc*) &TMP198241), ((NimStringDesc*) &TMP198242));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC44);
break;
case ((NU8) 38):
memset((void*)&LOC45, 0, sizeof(LOC45));
LOC45[0] = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[0]);
LOC45[1] = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[1]);
Result_155920 = Dispf_154579(((NimStringDesc*) &TMP198243), ((NimStringDesc*) &TMP198244), LOC45, 2);
break;
case ((NU8) 41):
case ((NU8) 42):
Result_155920 = Renderaux_154616(D_154614, N_154615, ((NimStringDesc*) &TMP198168));
break;
case ((NU8) 48):
if (!!((Gcmd_46082 == ((NU8) 15)))) goto LA47;
LOC49 = 0;
LOC49 = Lastson_146667(N_154615);
LOC50 = 0;
LOC50 = Addnodes_146108(LOC49);
Result_155920 = Torope_52046(LOC50);
LA47: ;
break;
case ((NU8) 49):
if (!(Gcmd_46082 == ((NU8) 15))) goto LA52;
LOC54 = 0;
LOC54 = Lastson_146667(N_154615);
LOC55 = 0;
LOC55 = Addnodes_146108(LOC54);
Result_155920 = Torope_52046(LOC55);
LA52: ;
break;
case ((NU8) 45):
case ((NU8) 46):
Result_155920 = Renderimage_155713(D_154614, N_154615);
break;
case ((NU8) 47):
Result_155920 = Rendercodeblock_155767(D_154614, N_154615);
break;
case ((NU8) 50):
Result_155920 = Rendercontainer_155830(D_154614, N_154615);
break;
case ((NU8) 61):
case ((NU8) 52):
LOC56 = 0;
LOC56 = Disp_154565(((NimStringDesc*) &TMP198383), ((NimStringDesc*) &TMP198383));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC56);
break;
case ((NU8) 40):
Result_155920 = Renderaux_154616(D_154614, N_154615, ((NimStringDesc*) &TMP198171));
break;
case ((NU8) 53):
memset((void*)&LOC57, 0, sizeof(LOC57));
LOC57[0] = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[0]);
LOC57[1] = Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[1]);
Result_155920 = Dispf_154579(((NimStringDesc*) &TMP198377), ((NimStringDesc*) &TMP198378), LOC57, 2);
break;
case ((NU8) 54):
LOC58 = 0;
LOC58 = Disp_154565(((NimStringDesc*) &TMP198384), ((NimStringDesc*) &TMP198385));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC58);
break;
case ((NU8) 55):
LOC59 = 0;
LOC59 = Disp_154565(((NimStringDesc*) &TMP198386), ((NimStringDesc*) &TMP198387));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC59);
break;
case ((NU8) 57):
LOC60 = 0;
LOC60 = Disp_154565(((NimStringDesc*) &TMP198388), ((NimStringDesc*) &TMP198389));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC60);
break;
case ((NU8) 58):
LOC61 = 0;
LOC61 = Disp_154565(((NimStringDesc*) &TMP198390), ((NimStringDesc*) &TMP198238));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC61);
break;
case ((NU8) 59):
LOC62 = 0;
LOC62 = Disp_154565(((NimStringDesc*) &TMP198391), ((NimStringDesc*) &TMP198389));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC62);
break;
case ((NU8) 56):
if (!((*D_154614).Theindex == NIM_NIL)) goto LA64;
LOC66 = 0;
LOC66 = Disp_154565(((NimStringDesc*) &TMP198388), ((NimStringDesc*) &TMP198389));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC66);
goto LA63;
LA64: ;
Result_155920 = Renderindexterm_154677(D_154614, N_154615);
LA63: ;
break;
case ((NU8) 60):
LOC67 = 0;
LOC67 = Disp_154565(((NimStringDesc*) &TMP198395), ((NimStringDesc*) &TMP198396));
Result_155920 = Renderaux_154616(D_154614, N_154615, LOC67);
break;
case ((NU8) 62):
LOC68 = 0;
LOC68 = Esc_154505((*N_154615).Text, -1);
Result_155920 = Torope_52046(LOC68);
break;
case ((NU8) 44):
(*D_154614).Hastoc = NIM_TRUE;
break;
case ((NU8) 43):
asgnRefNoCycle((void**) &(*D_154614).Meta[(((NU8) 1))-0], Renderrsttoout_154612(D_154614, (*N_154615).Sons->data[0]));
break;
default:
Internalerror_47571(((NimStringDesc*) &TMP198223));
break;
}
BeforeRet: ;
return Result_155920;
}
N_NIMCALL(TY52008*, Gencomment_154718)(TY154017* D_154720, TY55525* N_154721) {
TY52008* Result_154722;
NIM_BOOL Dummyhastoc_154723;
NIM_BOOL LOC2;
NimStringDesc* LOC6;
NI LOC7;
NI LOC8;
TY146077* LOC9;
Result_154722 = 0;
Dummyhastoc_154723 = 0;
LOC2 = !(((*N_154721).Comment == NIM_NIL));
if (!(LOC2)) goto LA3;
LOC2 = nsuStartsWith((*N_154721).Comment, ((NimStringDesc*) &TMP198167));
LA3: ;
if (!LOC2) goto LA4;
LOC6 = 0;
LOC6 = Tofilename_47579((*N_154721).Info);
LOC7 = Tolinenumber_47585((*N_154721).Info);
LOC8 = Tocolumn_47582((*N_154721).Info);
LOC9 = 0;
LOC9 = Rstparse_146082((*N_154721).Comment, NIM_TRUE, LOC6, LOC7, LOC8, &Dummyhastoc_154723);
Result_154722 = Renderrsttoout_154612(D_154720, LOC9);
LA4: ;
return Result_154722;
}
N_NIMCALL(NIM_BOOL, Isvisible_154801)(TY55525* N_154803) {
NIM_BOOL Result_154804;
NIM_BOOL LOC5;
NI LOC6;
TY54011* V_154861;
NIM_BOOL LOC10;
Result_154804 = 0;
Result_154804 = NIM_FALSE;
if (!((*N_154803).Kind == ((NU8) 29))) goto LA2;
LOC6 = Sonslen_55803(N_154803);
LOC5 = (LOC6 == 2);
if (!(LOC5)) goto LA7;
LOC5 = ((*(*N_154803).KindU.S6.Sons->data[0]).Kind == ((NU8) 2));
LA7: ;
if (!LOC5) goto LA8;
V_154861 = 0;
V_154861 = (*(*N_154803).KindU.S6.Sons->data[0]).KindU.S5.Ident;
LOC10 = ((*V_154861).Sup.Id == 69);
if (LOC10) goto LA11;
LOC10 = ((*V_154861).Sup.Id == 70);
LA11: ;
Result_154804 = LOC10;
LA8: ;
goto LA1;
LA2: ;
if (!((*N_154803).Kind == ((NU8) 3))) goto LA12;
Result_154804 = (((*(*N_154803).KindU.S4.Sym).Flags &(1<<((((NU8) 3))&31)))!=0);
goto LA1;
LA12: ;
if (!((*N_154803).Kind == ((NU8) 34))) goto LA14;
Result_154804 = Isvisible_154801((*N_154803).KindU.S6.Sons->data[0]);
goto LA1;
LA14: ;
LA1: ;
return Result_154804;
}
N_NIMCALL(NimStringDesc*, Getname_154929)(TY55525* N_154931, NI Splitafter_154932) {
NimStringDesc* Result_154933;
NimStringDesc* LOC1;
NimStringDesc* LOC2;
NimStringDesc* LOC3;
NimStringDesc* LOC4;
Result_154933 = 0;
switch ((*N_154931).Kind) {
case ((NU8) 29):
Result_154933 = Getname_154929((*N_154931).KindU.S6.Sons->data[1], Splitafter_154932);
break;
case ((NU8) 34):
Result_154933 = Getname_154929((*N_154931).KindU.S6.Sons->data[0], Splitafter_154932);
break;
case ((NU8) 3):
Result_154933 = Esc_154505((*(*(*N_154931).KindU.S4.Sym).Name).S, Splitafter_154932);
break;
case ((NU8) 2):
Result_154933 = Esc_154505((*(*N_154931).KindU.S5.Ident).S, Splitafter_154932);
break;
case ((NU8) 43):
LOC1 = 0;
LOC2 = 0;
LOC2 = Esc_154505(((NimStringDesc*) &TMP198397), -1);
LOC3 = 0;
LOC3 = Getname_154929((*N_154931).KindU.S6.Sons->data[0], Splitafter_154932);
LOC4 = 0;
LOC4 = Esc_154505(((NimStringDesc*) &TMP198397), -1);
LOC1 = rawNewString(LOC2->Sup.len + LOC3->Sup.len + LOC4->Sup.len + 0);
appendString(LOC1, LOC2);
appendString(LOC1, LOC3);
appendString(LOC1, LOC4);
Result_154933 = LOC1;
break;
default:
Internalerror_47567((*N_154931).Info, ((NimStringDesc*) &TMP198398));
Result_154933 = copyString(((NimStringDesc*) &TMP198171));
break;
}
return Result_154933;
}
N_NIMCALL(TY52008*, Genreccomment_154725)(TY154017* D_154727, TY55525* N_154728) {
TY52008* Result_154729;
NI I_154771;
NI HEX3Atmp_154796;
NI LOC10;
NI Res_154798;
Result_154729 = 0;
if (!(N_154728 == NIM_NIL)) goto LA2;
Result_154729 = NIM_NIL;
goto BeforeRet;
LA2: ;
Result_154729 = Gencomment_154718(D_154727, N_154728);
if (!(Result_154729 == NIM_NIL)) goto LA5;
if (!!(((*N_154728).Kind >= ((NU8) 1) && (*N_154728).Kind <= ((NU8) 18)))) goto LA8;
I_154771 = 0;
HEX3Atmp_154796 = 0;
LOC10 = Sonslen_55803(N_154728);
HEX3Atmp_154796 = (NI64)(LOC10 - 1);
Res_154798 = 0;
Res_154798 = 0;
while (1) {
if (!(Res_154798 <= HEX3Atmp_154796)) goto LA11;
I_154771 = Res_154798;
Result_154729 = Genreccomment_154725(D_154727, (*N_154728).KindU.S6.Sons->data[I_154771]);
if (!!((Result_154729 == NIM_NIL))) goto LA13;
goto BeforeRet;
LA13: ;
Res_154798 += 1;
} LA11: ;
LA8: ;
goto LA4;
LA5: ;
asgnRefNoCycle((void**) &(*N_154728).Comment, copyString(NIM_NIL));
LA4: ;
BeforeRet: ;
return Result_154729;
}
N_NIMCALL(NI, Getvaridx_154198)(NimStringDesc** Varnames_154201, NI Varnames_154201Len0, NimStringDesc* Id_154202) {
NI Result_154203;
NI I_154211;
NI HEX3Atmp_154215;
NI Res_154217;
NI LOC3;
Result_154203 = 0;
I_154211 = 0;
HEX3Atmp_154215 = 0;
HEX3Atmp_154215 = (Varnames_154201Len0-1);
Res_154217 = 0;
Res_154217 = 0;
while (1) {
if (!(Res_154217 <= HEX3Atmp_154215)) goto LA1;
I_154211 = Res_154217;
LOC3 = nsuCmpIgnoreStyle(Varnames_154201[I_154211], Id_154202);
if (!(LOC3 == 0)) goto LA4;
Result_154203 = I_154211;
goto BeforeRet;
LA4: ;
Res_154217 += 1;
} LA1: ;
Result_154203 = -1;
BeforeRet: ;
return Result_154203;
}
N_NIMCALL(TY52008*, Ropeformatnamedvars_154220)(NimStringDesc* Frmt_154222, NimStringDesc** Varnames_154224, NI Varnames_154224Len0, TY52008** Varvalues_154226, NI Varvalues_154226Len0) {
TY52008* Result_154227;
NI I_154228;
NI L_154231;
NI Num_154232;
NI J_154287;
NIM_BOOL LOC7;
NimStringDesc* Id_154327;
NI Idx_154352;
NimStringDesc* Id_154356;
NI Idx_154397;
NI Start_154401;
NimStringDesc* LOC35;
Result_154227 = 0;
I_154228 = 0;
I_154228 = 0;
L_154231 = 0;
L_154231 = Frmt_154222->Sup.len;
Result_154227 = NIM_NIL;
Num_154232 = 0;
Num_154232 = 0;
while (1) {
if (!(I_154228 < L_154231)) goto LA1;
if (!((NU8)(Frmt_154222->data[I_154228]) == (NU8)(36))) goto LA3;
I_154228 += 1;
switch (((NU8)(Frmt_154222->data[I_154228]))) {
case 35:
App_52031(&Result_154227, Varvalues_154226[Num_154232]);
Num_154232 += 1;
I_154228 += 1;
break;
case 36:
App_52036(&Result_154227, ((NimStringDesc*) &TMP198418));
I_154228 += 1;
break;
case 48 ... 57:
J_154287 = 0;
J_154287 = 0;
while (1) {
J_154287 = (NI64)((NI64)((NI64)(J_154287 * 10) + ((NU8)(Frmt_154222->data[I_154228]))) - 48);
I_154228 += 1;
LOC7 = ((NI64)((NI64)(L_154231 + 0) - 1) < I_154228);
if (LOC7) goto LA8;
LOC7 = !((((NU8)(Frmt_154222->data[I_154228])) >= ((NU8)(48)) && ((NU8)(Frmt_154222->data[I_154228])) <= ((NU8)(57))));
LA8: ;
if (!LOC7) goto LA9;
goto LA5;
LA9: ;
} LA5: ;
if (!((NI64)((Varvalues_154226Len0-1) + 1) < J_154287)) goto LA12;
Internalerror_47571(((NimStringDesc*) &TMP198419));
LA12: ;
Num_154232 = J_154287;
App_52031(&Result_154227, Varvalues_154226[(NI64)(J_154287 - 1)]);
break;
case 65 ... 90:
case 97 ... 122:
case 128 ... 255:
Id_154327 = 0;
Id_154327 = copyString(((NimStringDesc*) &TMP198171));
while (1) {
Id_154327 = addChar(Id_154327, Frmt_154222->data[I_154228]);
I_154228 += 1;
if (!!((((NU8)(Frmt_154222->data[I_154228])) >= ((NU8)(65)) && ((NU8)(Frmt_154222->data[I_154228])) <= ((NU8)(90)) || ((NU8)(Frmt_154222->data[I_154228])) == ((NU8)(95)) || ((NU8)(Frmt_154222->data[I_154228])) >= ((NU8)(97)) && ((NU8)(Frmt_154222->data[I_154228])) <= ((NU8)(122)) || ((NU8)(Frmt_154222->data[I_154228])) >= ((NU8)(128)) && ((NU8)(Frmt_154222->data[I_154228])) <= ((NU8)(255))))) goto LA16;
goto LA14;
LA16: ;
} LA14: ;
Idx_154352 = 0;
Idx_154352 = Getvaridx_154198(Varnames_154224, Varnames_154224Len0, Id_154327);
if (!(0 <= Idx_154352)) goto LA19;
App_52031(&Result_154227, Varvalues_154226[Idx_154352]);
goto LA18;
LA19: ;
Rawmessage_47553(((NU8) 148), Id_154327);
LA18: ;
break;
case 123:
Id_154356 = 0;
Id_154356 = copyString(((NimStringDesc*) &TMP198171));
I_154228 += 1;
while (1) {
if (!!(((NU8)(Frmt_154222->data[I_154228]) == (NU8)(125)))) goto LA21;
if (!((NU8)(Frmt_154222->data[I_154228]) == (NU8)(0))) goto LA23;
Rawmessage_47553(((NU8) 21), ((NimStringDesc*) &TMP198420));
LA23: ;
Id_154356 = addChar(Id_154356, Frmt_154222->data[I_154228]);
I_154228 += 1;
} LA21: ;
I_154228 += 1;
Idx_154397 = 0;
Idx_154397 = Getvaridx_154198(Varnames_154224, Varnames_154224Len0, Id_154356);
if (!(0 <= Idx_154397)) goto LA26;
App_52031(&Result_154227, Varvalues_154226[Idx_154397]);
goto LA25;
LA26: ;
Rawmessage_47553(((NU8) 148), Id_154356);
LA25: ;
break;
default:
Internalerror_47571(((NimStringDesc*) &TMP198419));
break;
}
LA3: ;
Start_154401 = 0;
Start_154401 = I_154228;
while (1) {
if (!(I_154228 < L_154231)) goto LA28;
if (!!(((NU8)(Frmt_154222->data[I_154228]) == (NU8)(36)))) goto LA30;
I_154228 += 1;
goto LA29;
LA30: ;
goto LA28;
LA29: ;
} LA28: ;
if (!(Start_154401 <= (NI64)(I_154228 - 1))) goto LA33;
LOC35 = 0;
LOC35 = copyStrLast(Frmt_154222, Start_154401, (NI64)(I_154228 - 1));
App_52036(&Result_154227, LOC35);
LA33: ;
} LA1: ;
return Result_154227;
}
N_NIMCALL(void, Setindexforsourceterm_154641)(TY154017* D_154643, TY146077* Name_154644, NI Id_154645) {
TY146077* H_154657;
TY146077* A_154676;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
if (!((*D_154643).Theindex == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
H_154657 = 0;
H_154657 = Newrstnode_146094(((NU8) 38));
A_154676 = 0;
LOC4 = 0;
LOC5 = 0;
LOC5 = Disp_154565(((NimStringDesc*) &TMP198394), ((NimStringDesc*) &TMP198171));
LOC6 = 0;
LOC6 = nimIntToStr(Id_154645);
LOC4 = rawNewString((*D_154643).Indexvalfilename->Sup.len + LOC5->Sup.len + LOC6->Sup.len + 0);
appendString(LOC4, (*D_154643).Indexvalfilename);
appendString(LOC4, LOC5);
appendString(LOC4, LOC6);
A_154676 = Newrstnode_146097(((NU8) 62), LOC4);
Addson_146101(H_154657, A_154676);
Addson_146101(H_154657, A_154676);
A_154676 = Newrstnode_146094(((NU8) 56));
Addson_146101(A_154676, Name_154644);
Setindexpair_146118((*D_154643).Theindex, A_154676, H_154657);
BeforeRet: ;
}
N_NIMCALL(TY146077*, Getrstname_155010)(TY55525* N_155012) {
TY146077* Result_155013;
Result_155013 = 0;
switch ((*N_155012).Kind) {
case ((NU8) 29):
Result_155013 = Getrstname_155010((*N_155012).KindU.S6.Sons->data[1]);
break;
case ((NU8) 34):
Result_155013 = Getrstname_155010((*N_155012).KindU.S6.Sons->data[0]);
break;
case ((NU8) 3):
Result_155013 = Newrstnode_146097(((NU8) 62), (*(*(*N_155012).KindU.S4.Sym).Name).S);
break;
case ((NU8) 2):
Result_155013 = Newrstnode_146097(((NU8) 62), (*(*N_155012).KindU.S5.Ident).S);
break;
case ((NU8) 43):
Result_155013 = Getrstname_155010((*N_155012).KindU.S6.Sons->data[0]);
break;
default:
Internalerror_47567((*N_155012).Info, ((NimStringDesc*) &TMP198428));
Result_155013 = NIM_NIL;
break;
}
return Result_155013;
}
N_NIMCALL(void, Genitem_155074)(TY154017* D_155076, TY55525* N_155077, TY55525* Namenode_155078, NU8 K_155079) {
TY84016 R_155080;
NU8 Kind_155081;
NimStringDesc* Literal_155082;
TY52008* Name_155083;
TY52008* Result_155084;
TY52008* Comm_155085;
NIM_BOOL LOC2;
NimStringDesc* LOC5;
TY52446 LOC7;
NimStringDesc* LOC8;
TY52446 LOC9;
TY52446 LOC10;
NimStringDesc* LOC11;
TY52446 LOC12;
NimStringDesc* LOC13;
TY52446 LOC14;
NimStringDesc* LOC15;
TY52446 LOC16;
NimStringDesc* LOC17;
TY52446 LOC18;
NimStringDesc* LOC19;
TY52446 LOC20;
NimStringDesc* LOC21;
TY52446 LOC22;
NimStringDesc* LOC23;
NimStringDesc* LOC24;
NimStringDesc* LOC25;
TY161585 LOC26;
TY52008* LOC27;
NimStringDesc* LOC28;
TY161585 LOC29;
NimStringDesc* LOC30;
TY52008* LOC31;
TY146077* LOC32;
memset((void*)&R_155080, 0, sizeof(R_155080));
Kind_155081 = 0;
Literal_155082 = 0;
Name_155083 = 0;
Result_155084 = 0;
Comm_155085 = 0;
LOC2 = Isvisible_154801(Namenode_155078);
if (!!(LOC2)) goto LA3;
goto BeforeRet;
LA3: ;
LOC5 = 0;
LOC5 = Getname_154929(Namenode_155078, -1);
Name_155083 = Torope_52046(LOC5);
Result_155084 = NIM_NIL;
Literal_155082 = copyString(((NimStringDesc*) &TMP198171));
Kind_155081 = ((NU8) 1);
Comm_155085 = Genreccomment_154725(D_155076, N_155077);
Inittokrender_84048(&R_155080, N_155077, 30);
while (1) {
Getnexttok_84056(&R_155080, &Kind_155081, &Literal_155082);
switch (Kind_155081) {
case ((NU8) 1):
goto LA6;
break;
case ((NU8) 100):
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC8 = 0;
LOC8 = Esc_154505(Literal_155082, -1);
LOC7[0] = Torope_52046(LOC8);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198399), ((NimStringDesc*) &TMP198400), LOC7, 1);
break;
case ((NU8) 3) ... ((NU8) 65):
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_52046(Literal_155082);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198401), ((NimStringDesc*) &TMP198402), LOC9, 1);
break;
case ((NU8) 99):
case ((NU8) 98):
memset((void*)&LOC10, 0, sizeof(LOC10));
LOC11 = 0;
LOC11 = Esc_154505(Literal_155082, -1);
LOC10[0] = Torope_52046(LOC11);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198403), ((NimStringDesc*) &TMP198404), LOC10, 1);
break;
case ((NU8) 74) ... ((NU8) 76):
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC13 = 0;
LOC13 = Esc_154505(Literal_155082, -1);
LOC12[0] = Torope_52046(LOC13);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198405), ((NimStringDesc*) &TMP198406), LOC12, 1);
break;
case ((NU8) 79):
memset((void*)&LOC14, 0, sizeof(LOC14));
LOC15 = 0;
LOC15 = Esc_154505(Literal_155082, -1);
LOC14[0] = Torope_52046(LOC15);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198407), ((NimStringDesc*) &TMP198408), LOC14, 1);
break;
case ((NU8) 66) ... ((NU8) 70):
memset((void*)&LOC16, 0, sizeof(LOC16));
LOC17 = 0;
LOC17 = Esc_154505(Literal_155082, -1);
LOC16[0] = Torope_52046(LOC17);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198409), ((NimStringDesc*) &TMP198410), LOC16, 1);
break;
case ((NU8) 71) ... ((NU8) 73):
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC19 = 0;
LOC19 = Esc_154505(Literal_155082, -1);
LOC18[0] = Torope_52046(LOC19);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198411), ((NimStringDesc*) &TMP198412), LOC18, 1);
break;
case ((NU8) 2):
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC21 = 0;
LOC21 = Esc_154505(Literal_155082, -1);
LOC20[0] = Torope_52046(LOC21);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198413), ((NimStringDesc*) &TMP198414), LOC20, 1);
break;
case ((NU8) 102):
case ((NU8) 103):
case ((NU8) 104):
case ((NU8) 105):
App_52036(&Result_155084, Literal_155082);
break;
case ((NU8) 80):
case ((NU8) 81):
case ((NU8) 82):
case ((NU8) 83):
case ((NU8) 84):
case ((NU8) 85):
case ((NU8) 86):
case ((NU8) 87):
case ((NU8) 88):
case ((NU8) 89):
case ((NU8) 90):
case ((NU8) 91):
case ((NU8) 92):
case ((NU8) 93):
case ((NU8) 94):
case ((NU8) 95):
case ((NU8) 96):
case ((NU8) 97):
case ((NU8) 101):
memset((void*)&LOC22, 0, sizeof(LOC22));
LOC23 = 0;
LOC23 = Esc_154505(Literal_155082, -1);
LOC22[0] = Torope_52046(LOC23);
Dispa_154595(&Result_155084, ((NimStringDesc*) &TMP198415), ((NimStringDesc*) &TMP198416), LOC22, 1);
break;
default:
LOC24 = 0;
LOC24 = rawNewString(Toktypetostr_76145[(Kind_155081)-0]->Sup.len + 17);
appendString(LOC24, ((NimStringDesc*) &TMP198417));
appendString(LOC24, Toktypetostr_76145[(Kind_155081)-0]);
appendChar(LOC24, 41);
Internalerror_47567((*N_155077).Info, LOC24);
break;
}
} LA6: ;
(*D_155076).Id += 1;
LOC25 = 0;
LOC25 = Getconfigvar_46133(((NimStringDesc*) &TMP198421));
memset((void*)&LOC26, 0, sizeof(LOC26));
LOC26[0] = Name_155083;
LOC26[1] = Result_155084;
LOC26[2] = Comm_155085;
LOC26[3] = Torope_52052(((NI64) ((*D_155076).Id)));
LOC27 = 0;
LOC27 = Ropeformatnamedvars_154220(LOC25, TMP198422, 4, LOC26, 4);
App_52031(&(*D_155076).Section[(K_155079)-0], LOC27);
LOC28 = 0;
LOC28 = Getconfigvar_46133(((NimStringDesc*) &TMP198427));
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC30 = 0;
LOC30 = Getname_154929(Namenode_155078, (*D_155076).Splitafter);
LOC29[0] = Torope_52046(LOC30);
LOC29[1] = Result_155084;
LOC29[2] = Comm_155085;
LOC29[3] = Torope_52052(((NI64) ((*D_155076).Id)));
LOC31 = 0;
LOC31 = Ropeformatnamedvars_154220(LOC28, TMP198422, 4, LOC29, 4);
App_52031(&(*D_155076).Toc[(K_155079)-0], LOC31);
LOC32 = 0;
LOC32 = Getrstname_155010(Namenode_155078);
Setindexforsourceterm_154641(D_155076, LOC32, (*D_155076).Id);
BeforeRet: ;
}
N_NIMCALL(void, Generatedoc_156108)(TY154017* D_156110, TY55525* N_156111) {
TY52008* LOC4;
NI I_156203;
NI HEX3Atmp_156424;
NI LOC5;
NI Res_156426;
NI I_156268;
NI HEX3Atmp_156430;
NI LOC10;
NI Res_156432;
NI I_156333;
NI HEX3Atmp_156436;
NI LOC15;
NI Res_156438;
NI I_156398;
NI HEX3Atmp_156442;
NI LOC20;
NI Res_156444;
TY55525* LOC22;
if (!(N_156111 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
switch ((*N_156111).Kind) {
case ((NU8) 105):
LOC4 = 0;
LOC4 = Gencomment_154718(D_156110, N_156111);
App_52031(&(*D_156110).Moddesc, LOC4);
break;
case ((NU8) 69):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 9));
break;
case ((NU8) 70):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 10));
break;
case ((NU8) 74):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 11));
break;
case ((NU8) 72):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 13));
break;
case ((NU8) 73):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 14));
break;
case ((NU8) 71):
Genitem_155074(D_156110, N_156111, (*N_156111).KindU.S6.Sons->data[0], ((NU8) 12));
break;
case ((NU8) 87):
I_156203 = 0;
HEX3Atmp_156424 = 0;
LOC5 = Sonslen_55803(N_156111);
HEX3Atmp_156424 = (NI64)(LOC5 - 1);
Res_156426 = 0;
Res_156426 = 0;
while (1) {
if (!(Res_156426 <= HEX3Atmp_156424)) goto LA6;
I_156203 = Res_156426;
if (!!(((*(*N_156111).KindU.S6.Sons->data[I_156203]).Kind == ((NU8) 105)))) goto LA8;
Genitem_155074(D_156110, (*N_156111).KindU.S6.Sons->data[I_156203], (*(*N_156111).KindU.S6.Sons->data[I_156203]).KindU.S6.Sons->data[0], ((NU8) 8));
LA8: ;
Res_156426 += 1;
} LA6: ;
break;
case ((NU8) 88):
I_156268 = 0;
HEX3Atmp_156430 = 0;
LOC10 = Sonslen_55803(N_156111);
HEX3Atmp_156430 = (NI64)(LOC10 - 1);
Res_156432 = 0;
Res_156432 = 0;
while (1) {
if (!(Res_156432 <= HEX3Atmp_156430)) goto LA11;
I_156268 = Res_156432;
if (!!(((*(*N_156111).KindU.S6.Sons->data[I_156268]).Kind == ((NU8) 105)))) goto LA13;
Genitem_155074(D_156110, (*N_156111).KindU.S6.Sons->data[I_156268], (*(*N_156111).KindU.S6.Sons->data[I_156268]).KindU.S6.Sons->data[0], ((NU8) 7));
LA13: ;
Res_156432 += 1;
} LA11: ;
break;
case ((NU8) 90):
I_156333 = 0;
HEX3Atmp_156436 = 0;
LOC15 = Sonslen_55803(N_156111);
HEX3Atmp_156436 = (NI64)(LOC15 - 1);
Res_156438 = 0;
Res_156438 = 0;
while (1) {
if (!(Res_156438 <= HEX3Atmp_156436)) goto LA16;
I_156333 = Res_156438;
if (!!(((*(*N_156111).KindU.S6.Sons->data[I_156333]).Kind == ((NU8) 105)))) goto LA18;
Genitem_155074(D_156110, (*N_156111).KindU.S6.Sons->data[I_156333], (*(*N_156111).KindU.S6.Sons->data[I_156333]).KindU.S6.Sons->data[0], ((NU8) 6));
LA18: ;
Res_156438 += 1;
} LA16: ;
break;
case ((NU8) 101):
I_156398 = 0;
HEX3Atmp_156442 = 0;
LOC20 = Sonslen_55803(N_156111);
HEX3Atmp_156442 = (NI64)(LOC20 - 1);
Res_156444 = 0;
Res_156444 = 0;
while (1) {
if (!(Res_156444 <= HEX3Atmp_156442)) goto LA21;
I_156398 = Res_156444;
Generatedoc_156108(D_156110, (*N_156111).KindU.S6.Sons->data[I_156398]);
Res_156444 += 1;
} LA21: ;
break;
case ((NU8) 83):
LOC22 = 0;
LOC22 = Lastson_55809((*N_156111).KindU.S6.Sons->data[0]);
Generatedoc_156108(D_156110, LOC22);
break;
default:
break;
}
BeforeRet: ;
}
N_NIMCALL(TY52008*, Rendertocentry_155665)(TY154017* D_155667, TY154011* E_155668) {
TY52008* Result_155669;
TY176060 LOC1;
Result_155669 = 0;
memset((void*)&LOC1, 0, sizeof(LOC1));
LOC1[0] = (*E_155668).Refname;
LOC1[1] = (*E_155668).Header;
Result_155669 = Dispf_154579(((NimStringDesc*) &TMP198429), ((NimStringDesc*) &TMP198430), LOC1, 2);
return Result_155669;
}
N_NIMCALL(TY52008*, Rendertocentries_155674)(TY154017* D_155676, NI* J_155678, NI Lvl_155679) {
TY52008* Result_155680;
NI A_155683;
TY52008* LOC5;
TY52008* LOC8;
TY52446 LOC12;
Result_155680 = 0;
Result_155680 = NIM_NIL;
while (1) {
if (!((*J_155678) <= ((*D_155676).Tocpart->Sup.len-1))) goto LA1;
A_155683 = 0;
A_155683 = (NI64)abs((*(*D_155676).Tocpart->data[(*J_155678)].N).Level);
if (!(A_155683 == Lvl_155679)) goto LA3;
LOC5 = 0;
LOC5 = Rendertocentry_155665(D_155676, &(*D_155676).Tocpart->data[(*J_155678)]);
App_52031(&Result_155680, LOC5);
(*J_155678) += 1;
goto LA2;
LA3: ;
if (!(Lvl_155679 < A_155683)) goto LA6;
LOC8 = 0;
LOC8 = Rendertocentries_155674(D_155676, J_155678, A_155683);
App_52031(&Result_155680, LOC8);
goto LA2;
LA6: ;
goto LA1;
LA2: ;
} LA1: ;
if (!(1 < Lvl_155679)) goto LA10;
memset((void*)&LOC12, 0, sizeof(LOC12));
LOC12[0] = Result_155680;
Result_155680 = Dispf_154579(((NimStringDesc*) &TMP198431), ((NimStringDesc*) &TMP198432), LOC12, 1);
LA10: ;
return Result_155680;
}
N_NIMCALL(void, Gensection_156447)(TY154017* D_156449, NU8 Kind_156450) {
TY52008* Title_156474;
NimStringDesc* LOC4;
NimStringDesc* LOC5;
NimStringDesc* LOC6;
TY161585 LOC7;
NimStringDesc* LOC8;
TY161585 LOC9;
if (!((*D_156449).Section[(Kind_156450)-0] == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Title_156474 = 0;
LOC4 = 0;
LOC5 = 0;
LOC5 = copyStr(reprEnum(Kind_156450, NTI55174), 2);
LOC4 = rawNewString(LOC5->Sup.len + 1);
appendString(LOC4, LOC5);
appendChar(LOC4, 115);
Title_156474 = Torope_52046(LOC4);
LOC6 = 0;
LOC6 = Getconfigvar_46133(((NimStringDesc*) &TMP198433));
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Torope_52052(((NI64) (Kind_156450)));
LOC7[1] = Title_156474;
LOC7[2] = Torope_52052(((NI64) ((NI64)(Kind_156450 + 50))));
LOC7[3] = (*D_156449).Section[(Kind_156450)-0];
asgnRefNoCycle((void**) &(*D_156449).Section[(Kind_156450)-0], Ropeformatnamedvars_154220(LOC6, TMP198434, 4, LOC7, 4));
LOC8 = 0;
LOC8 = Getconfigvar_46133(((NimStringDesc*) &TMP198439));
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Torope_52052(((NI64) (Kind_156450)));
LOC9[1] = Title_156474;
LOC9[2] = Torope_52052(((NI64) ((NI64)(Kind_156450 + 50))));
LOC9[3] = (*D_156449).Toc[(Kind_156450)-0];
asgnRefNoCycle((void**) &(*D_156449).Toc[(Kind_156450)-0], Ropeformatnamedvars_154220(LOC8, TMP198434, 4, LOC9, 4));
BeforeRet: ;
}
N_NIMCALL(TY52008*, Genoutfile_156511)(TY154017* D_156513) {
TY52008* Result_156514;
TY52008* Code_156515;
TY52008* Toc_156516;
TY52008* Title_156517;
TY52008* Content_156518;
NimStringDesc* Bodyname_156519;
NI J_156520;
NU8 I_156551;
NU8 Res_156629;
NimStringDesc* LOC5;
TY52446 LOC6;
NU8 I_156579;
NU8 Res_156634;
NimStringDesc* LOC11;
NimStringDesc* LOC12;
NimStringDesc* LOC13;
NimStringDesc* LOC17;
TY162326 LOC18;
NimStringDesc* LOC19;
NimStringDesc* LOC20;
NimStringDesc* LOC24;
TY163005 LOC25;
NimStringDesc* LOC26;
NimStringDesc* LOC27;
Result_156514 = 0;
Code_156515 = 0;
Toc_156516 = 0;
Title_156517 = 0;
Content_156518 = 0;
Bodyname_156519 = 0;
J_156520 = 0;
J_156520 = 0;
Toc_156516 = Rendertocentries_155674(D_156513, &J_156520, 1);
Code_156515 = NIM_NIL;
Content_156518 = NIM_NIL;
Title_156517 = NIM_NIL;
I_156551 = 0;
Res_156629 = 0;
Res_156629 = ((NU8) 0);
while (1) {
if (!(Res_156629 <= ((NU8) 20))) goto LA1;
I_156551 = Res_156629;
Gensection_156447(D_156513, I_156551);
App_52031(&Toc_156516, (*D_156513).Toc[(I_156551)-0]);
Res_156629 += 1;
} LA1: ;
if (!!((Toc_156516 == NIM_NIL))) goto LA3;
LOC5 = 0;
LOC5 = Getconfigvar_46133(((NimStringDesc*) &TMP198440));
memset((void*)&LOC6, 0, sizeof(LOC6));
LOC6[0] = Toc_156516;
Toc_156516 = Ropeformatnamedvars_154220(LOC5, TMP198441, 1, LOC6, 1);
LA3: ;
I_156579 = 0;
Res_156634 = 0;
Res_156634 = ((NU8) 0);
while (1) {
if (!(Res_156634 <= ((NU8) 20))) goto LA7;
I_156579 = Res_156634;
App_52031(&Code_156515, (*D_156513).Section[(I_156579)-0]);
Res_156634 += 1;
} LA7: ;
if (!!(((*D_156513).Meta[(((NU8) 1))-0] == NIM_NIL))) goto LA9;
Title_156517 = (*D_156513).Meta[(((NU8) 1))-0];
goto LA8;
LA9: ;
LOC11 = 0;
LOC12 = 0;
LOC12 = nosChangeFileExt((*D_156513).Filename, ((NimStringDesc*) &TMP198171));
LOC13 = 0;
LOC13 = nosextractFilename(LOC12);
LOC11 = rawNewString(LOC13->Sup.len + 7);
appendString(LOC11, ((NimStringDesc*) &TMP198442));
appendString(LOC11, LOC13);
Title_156517 = Torope_52046(LOC11);
LA8: ;
if (!(*D_156513).Hastoc) goto LA15;
Bodyname_156519 = copyString(((NimStringDesc*) &TMP198443));
goto LA14;
LA15: ;
Bodyname_156519 = copyString(((NimStringDesc*) &TMP198444));
LA14: ;
LOC17 = 0;
LOC17 = Getconfigvar_46133(Bodyname_156519);
memset((void*)&LOC18, 0, sizeof(LOC18));
LOC18[0] = Title_156517;
LOC18[1] = Toc_156516;
LOC18[2] = (*D_156513).Moddesc;
LOC19 = 0;
LOC19 = ntgetDateStr();
LOC18[3] = Torope_52046(LOC19);
LOC20 = 0;
LOC20 = ntgetClockStr();
LOC18[4] = Torope_52046(LOC20);
LOC18[5] = Code_156515;
Content_156518 = Ropeformatnamedvars_154220(LOC17, TMP198445, 6, LOC18, 6);
if (!!(((Gglobaloptions_46077 &(1<<((((NU8) 6))&31)))!=0))) goto LA22;
LOC24 = 0;
LOC24 = Getconfigvar_46133(((NimStringDesc*) &TMP198451));
memset((void*)&LOC25, 0, sizeof(LOC25));
LOC25[0] = Title_156517;
LOC25[1] = Toc_156516;
LOC25[2] = (*D_156513).Moddesc;
LOC26 = 0;
LOC26 = ntgetDateStr();
LOC25[3] = Torope_52046(LOC26);
LOC27 = 0;
LOC27 = ntgetClockStr();
LOC25[4] = Torope_52046(LOC27);
LOC25[5] = Content_156518;
LOC25[6] = (*D_156513).Meta[(((NU8) 3))-0];
LOC25[7] = (*D_156513).Meta[(((NU8) 4))-0];
Code_156515 = Ropeformatnamedvars_154220(LOC24, TMP198452, 8, LOC25, 8);
goto LA21;
LA22: ;
Code_156515 = Content_156518;
LA21: ;
Result_156514 = Code_156515;
return Result_156514;
}
N_NIMCALL(TY52008*, Renderrstsons_155310)(TY154017* D_155312, TY146077* N_155313) {
TY52008* Result_155314;
NI I_155322;
NI HEX3Atmp_155325;
NI LOC1;
NI Res_155327;
TY52008* LOC3;
Result_155314 = 0;
I_155322 = 0;
HEX3Atmp_155325 = 0;
LOC1 = Rsonslen_146091(N_155313);
HEX3Atmp_155325 = (NI64)(LOC1 - 1);
Res_155327 = 0;
Res_155327 = 0;
while (1) {
if (!(Res_155327 <= HEX3Atmp_155325)) goto LA2;
I_155322 = Res_155327;
LOC3 = 0;
LOC3 = Renderrsttorst_155306(D_155312, (*N_155313).Sons->data[I_155322]);
App_52031(&Result_155314, LOC3);
Res_155327 += 1;
} LA2: ;
return Result_155314;
}
N_NIMCALL(TY52008*, Renderrsttorst_155306)(TY154017* D_155308, TY146077* N_155309) {
TY52008* Result_155334;
TY52008* Ind_155351;
NimStringDesc* LOC4;
NI L_155352;
TY160050 LOC5;
NimStringDesc* LOC6;
NI L_155357;
TY160050 LOC7;
NimStringDesc* LOC8;
TY176060 LOC9;
NimStringDesc* LOC10;
TY176060 LOC11;
TY176060 LOC15;
TY176060 LOC19;
TY176060 LOC20;
TY176060 LOC24;
NI L_155491;
NI LOC25;
TY161585 LOC26;
NI LOC27;
NimStringDesc* LOC28;
TY176060 LOC29;
TY52446 LOC30;
TY176060 LOC31;
TY176060 LOC32;
TY52446 LOC33;
TY52446 LOC34;
TY52446 LOC35;
TY52446 LOC36;
TY52446 LOC37;
TY52446 LOC38;
TY52446 LOC39;
NIM_BOOL LOC41;
TY176060 LOC48;
TY52446 LOC49;
Result_155334 = 0;
Result_155334 = NIM_NIL;
if (!(N_155309 == NIM_NIL)) goto LA2;
goto BeforeRet;
LA2: ;
Ind_155351 = 0;
LOC4 = 0;
LOC4 = nsuRepeatChar((*D_155308).Indent, 32);
Ind_155351 = Torope_52046(LOC4);
switch ((*N_155309).Kind) {
case ((NU8) 0):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
break;
case ((NU8) 1):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
L_155352 = 0;
L_155352 = Ropelen_52055(Result_155334);
memset((void*)&LOC5, 0, sizeof(LOC5));
LOC5[0] = Ind_155351;
LOC5[1] = Result_155334;
LOC6 = 0;
LOC6 = nsuRepeatChar(L_155352, Lvltochar_155335[((*N_155309).Level)-0]);
LOC5[2] = Torope_52046(LOC6);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198453), LOC5, 3);
break;
case ((NU8) 2):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
L_155357 = 0;
L_155357 = Ropelen_52055(Result_155334);
memset((void*)&LOC7, 0, sizeof(LOC7));
LOC7[0] = Ind_155351;
LOC7[1] = Result_155334;
LOC8 = 0;
LOC8 = nsuRepeatChar(L_155357, Lvltochar_155335[((*N_155309).Level)-0]);
LOC7[2] = Torope_52046(LOC8);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198454), LOC7, 3);
break;
case ((NU8) 3):
memset((void*)&LOC9, 0, sizeof(LOC9));
LOC9[0] = Ind_155351;
LOC10 = 0;
LOC10 = nsuRepeatChar((NI64)(78 - (*D_155308).Indent), 45);
LOC9[1] = Torope_52046(LOC10);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198455), LOC9, 2);
break;
case ((NU8) 4):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC11, 0, sizeof(LOC11));
LOC11[0] = Ind_155351;
LOC11[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198456), LOC11, 2);
break;
case ((NU8) 6):
(*D_155308).Indent += 2;
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
if (!!((Result_155334 == NIM_NIL))) goto LA13;
memset((void*)&LOC15, 0, sizeof(LOC15));
LOC15[0] = Ind_155351;
LOC15[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198457), LOC15, 2);
LA13: ;
(*D_155308).Indent -= 2;
break;
case ((NU8) 8):
(*D_155308).Indent += 4;
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
if (!!((Result_155334 == NIM_NIL))) goto LA17;
memset((void*)&LOC19, 0, sizeof(LOC19));
LOC19[0] = Ind_155351;
LOC19[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198458), LOC19, 2);
LA17: ;
(*D_155308).Indent -= 4;
break;
case ((NU8) 17):
case ((NU8) 13):
case ((NU8) 9):
case ((NU8) 10):
case ((NU8) 26):
case ((NU8) 15):
case ((NU8) 16):
case ((NU8) 37):
case ((NU8) 5):
case ((NU8) 7):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
break;
case ((NU8) 11):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC20, 0, sizeof(LOC20));
LOC20[0] = Ind_155351;
LOC20[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198456), LOC20, 2);
break;
case ((NU8) 12):
(*D_155308).Indent += 2;
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
if (!!(((*(*N_155309).Sons->data[0]).Kind == ((NU8) 5)))) goto LA22;
memset((void*)&LOC24, 0, sizeof(LOC24));
LOC24[0] = Ind_155351;
LOC24[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198459), LOC24, 2);
LA22: ;
(*D_155308).Indent -= 2;
break;
case ((NU8) 14):
Result_155334 = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[0]);
L_155491 = 0;
LOC25 = Ropelen_52055(Result_155334);
L_155491 = (((NI64)(LOC25 + 3) >= 30) ? (NI64)(LOC25 + 3) : 30);
(*D_155308).Indent += L_155491;
memset((void*)&LOC26, 0, sizeof(LOC26));
LOC26[0] = Ind_155351;
LOC26[1] = Result_155334;
LOC27 = Ropelen_52055(Result_155334);
LOC28 = 0;
LOC28 = nsuRepeatChar((NI64)((NI64)(L_155491 - LOC27) - 2), 32);
LOC26[2] = Torope_52046(LOC28);
LOC26[3] = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[1]);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198460), LOC26, 4);
(*D_155308).Indent -= L_155491;
break;
case ((NU8) 27):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC29, 0, sizeof(LOC29));
LOC29[0] = Ind_155351;
LOC29[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198461), LOC29, 2);
break;
case ((NU8) 28):
(*D_155308).Indent += 2;
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
(*D_155308).Indent -= 2;
break;
case ((NU8) 39):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC30, 0, sizeof(LOC30));
LOC30[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198462), LOC30, 1);
break;
case ((NU8) 38):
memset((void*)&LOC31, 0, sizeof(LOC31));
LOC31[0] = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[0]);
LOC31[1] = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[1]);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198463), LOC31, 2);
break;
case ((NU8) 53):
Result_155334 = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[0]);
memset((void*)&LOC32, 0, sizeof(LOC32));
LOC32[0] = Result_155334;
LOC32[1] = Renderrsttorst_155306(D_155308, (*N_155309).Sons->data[1]);
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198464), LOC32, 2);
break;
case ((NU8) 54):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC33, 0, sizeof(LOC33));
LOC33[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198465), LOC33, 1);
break;
case ((NU8) 55):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC34, 0, sizeof(LOC34));
LOC34[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198466), LOC34, 1);
break;
case ((NU8) 56):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC35, 0, sizeof(LOC35));
LOC35[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198467), LOC35, 1);
break;
case ((NU8) 57):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC36, 0, sizeof(LOC36));
LOC36[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198468), LOC36, 1);
break;
case ((NU8) 58):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC37, 0, sizeof(LOC37));
LOC37[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198469), LOC37, 1);
break;
case ((NU8) 59):
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC38, 0, sizeof(LOC38));
LOC38[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198470), LOC38, 1);
break;
case ((NU8) 60):
(*D_155308).Verbatim += 1;
Result_155334 = Renderrstsons_155310(D_155308, N_155309);
memset((void*)&LOC39, 0, sizeof(LOC39));
LOC39[0] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198471), LOC39, 1);
(*D_155308).Verbatim -= 1;
break;
case ((NU8) 62):
LOC41 = ((*D_155308).Verbatim == 0);
if (!(LOC41)) goto LA42;
LOC41 = eqStrings((*N_155309).Text, ((NimStringDesc*) &TMP198472));
LA42: ;
if (!LOC41) goto LA43;
Result_155334 = Torope_52046(((NimStringDesc*) &TMP198473));
goto LA40;
LA43: ;
Result_155334 = Torope_52046((*N_155309).Text);
LA40: ;
break;
case ((NU8) 51):
(*D_155308).Indent += 3;
if (!!(((*N_155309).Sons->data[2] == NIM_NIL))) goto LA46;
Result_155334 = Renderrstsons_155310(D_155308, (*N_155309).Sons->data[2]);
LA46: ;
(*D_155308).Indent -= 3;
memset((void*)&LOC48, 0, sizeof(LOC48));
LOC48[0] = Ind_155351;
LOC48[1] = Result_155334;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198474), LOC48, 2);
break;
case ((NU8) 44):
memset((void*)&LOC49, 0, sizeof(LOC49));
LOC49[0] = Ind_155351;
Result_155334 = Ropef_52069(((NimStringDesc*) &TMP198475), LOC49, 1);
break;
default:
Rawmessage_47553(((NU8) 189), reprEnum((*N_155309).Kind, NTI146008));
break;
}
BeforeRet: ;
return Result_155334;
}
N_NIMCALL(void, Generateindex_156637)(TY154017* D_156639) {
TY52008* LOC4;
if (!!(((*D_156639).Theindex == NIM_NIL))) goto LA2;
Sortindex_146123((*D_156639).Theindex);
LOC4 = 0;
LOC4 = Renderrsttorst_155306(D_156639, (*D_156639).Indexfile);
Writerope_52058(LOC4, Gindexfile_46081);
LA2: ;
}
N_NIMCALL(void, Commanddoc_154001)(NimStringDesc* Filename_154003) {
TY55525* Ast_156654;
NimStringDesc* LOC1;
TY154017* D_156666;
TY52008* LOC5;
NimStringDesc* LOC6;
Ast_156654 = 0;
LOC1 = 0;
LOC1 = nosaddFileExt(Filename_154003, ((NimStringDesc*) &TMP198089));
Ast_156654 = Parsefile_91031(LOC1);
if (!(Ast_156654 == NIM_NIL)) goto LA3;
goto BeforeRet;
LA3: ;
D_156666 = 0;
D_156666 = Newdocumentor_154162(Filename_154003);
Initindexfile_154132(D_156666);
(*D_156666).Hastoc = NIM_TRUE;
Generatedoc_156108(D_156666, Ast_156654);
LOC5 = 0;
LOC5 = Genoutfile_156511(D_156666);
LOC6 = 0;
LOC6 = Getoutfile_46143(Filename_154003, ((NimStringDesc*) &TMP198098));
Writerope_52058(LOC5, LOC6);
Generateindex_156637(D_156666);
BeforeRet: ;
}
N_NIMCALL(void, Commandrstaux_156667)(NimStringDesc* Filename_156669, NimStringDesc* Outext_156670) {
NimStringDesc* Filen_156671;
TY154017* D_156672;
TY146077* Rst_156674;
NimStringDesc* LOC1;
TY52008* Code_156675;
NimStringDesc* LOC2;
Filen_156671 = 0;
Filen_156671 = nosaddFileExt(Filename_156669, ((NimStringDesc*) &TMP198097));
D_156672 = 0;
D_156672 = Newdocumentor_154162(Filen_156671);
Initindexfile_154132(D_156672);
Rst_156674 = 0;
LOC1 = 0;
LOC1 = Readfile_3647(Filen_156671);
Rst_156674 = Rstparse_146082(LOC1, NIM_FALSE, Filen_156671, 0, 1, &(*D_156672).Hastoc);
asgnRefNoCycle((void**) &(*D_156672).Moddesc, Renderrsttoout_154612(D_156672, Rst_156674));
Code_156675 = 0;
Code_156675 = Genoutfile_156511(D_156672);
LOC2 = 0;
LOC2 = Getoutfile_46143(Filename_156669, Outext_156670);
Writerope_52058(Code_156675, LOC2);
Generateindex_156637(D_156672);
}
N_NIMCALL(void, Commandrst2html_154004)(NimStringDesc* Filename_154006) {
Commandrstaux_156667(Filename_154006, ((NimStringDesc*) &TMP198098));
}
N_NIMCALL(void, Commandrst2tex_154007)(NimStringDesc* Filename_154009) {
asgnRefNoCycle((void**) &Splitter_154046, copyString(((NimStringDesc*) &TMP198477)));
Commandrstaux_156667(Filename_154009, ((NimStringDesc*) &TMP198478));
}
N_NOINLINE(void, docgenInit)(void) {
asgnRefNoCycle((void**) &Splitter_154046, copyString(((NimStringDesc*) &TMP154047)));
}

